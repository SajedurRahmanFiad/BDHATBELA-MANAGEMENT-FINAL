var JL=Object.defineProperty;var YO=e=>{throw TypeError(e)};var eB=(e,t,r)=>t in e?JL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Gv=(e,t,r)=>eB(e,typeof t!="symbol"?t+"":t,r),Yv=(e,t,r)=>t.has(e)||YO("Cannot "+r);var $=(e,t,r)=>(Yv(e,t,"read from private field"),r?r.call(e):t.get(e)),De=(e,t,r)=>t.has(e)?YO("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),_e=(e,t,r,n)=>(Yv(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Ge=(e,t,r)=>(Yv(e,t,"access private method"),r);var Kh=(e,t,r,n)=>({set _(a){_e(e,t,a,r)},get _(){return $(e,t,n)}});function tB(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();function Fa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function mle(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var Wv={exports:{}},Ku={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WO;function rB(){if(WO)return Ku;WO=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,s){var l=null;if(s!==void 0&&(l=""+s),a.key!==void 0&&(l=""+a.key),"key"in a){s={};for(var d in a)d!=="key"&&(s[d]=a[d])}else s=a;return a=s.ref,{$$typeof:e,type:n,key:l,ref:a!==void 0?a:null,props:s}}return Ku.Fragment=t,Ku.jsx=r,Ku.jsxs=r,Ku}var XO;function nB(){return XO||(XO=1,Wv.exports=rB()),Wv.exports}var c=nB(),Xv={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZO;function aB(){if(ZO)return Ke;ZO=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),y=Symbol.iterator;function v(P){return P===null||typeof P!="object"?null:(P=y&&P[y]||P["@@iterator"],typeof P=="function"?P:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,_={};function N(P,B,W){this.props=P,this.context=B,this.refs=_,this.updater=W||j}N.prototype.isReactComponent={},N.prototype.setState=function(P,B){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,B,"setState")},N.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function O(){}O.prototype=N.prototype;function E(P,B,W){this.props=P,this.context=B,this.refs=_,this.updater=W||j}var C=E.prototype=new O;C.constructor=E,S(C,N.prototype),C.isPureReactComponent=!0;var D=Array.isArray;function T(){}var M={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function U(P,B,W){var re=W.ref;return{$$typeof:e,type:P,key:B,ref:re!==void 0?re:null,props:W}}function Y(P,B){return U(P.type,B,P.props)}function K(P){return typeof P=="object"&&P!==null&&P.$$typeof===e}function z(P){var B={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(W){return B[W]})}var pe=/\/+/g;function le(P,B){return typeof P=="object"&&P!==null&&P.key!=null?z(""+P.key):B.toString(36)}function ge(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(T,T):(P.status="pending",P.then(function(B){P.status==="pending"&&(P.status="fulfilled",P.value=B)},function(B){P.status==="pending"&&(P.status="rejected",P.reason=B)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function I(P,B,W,re,G){var ve=typeof P;(ve==="undefined"||ve==="boolean")&&(P=null);var ye=!1;if(P===null)ye=!0;else switch(ve){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(P.$$typeof){case e:case t:ye=!0;break;case p:return ye=P._init,I(ye(P._payload),B,W,re,G)}}if(ye)return G=G(P),ye=re===""?"."+le(P,0):re,D(G)?(W="",ye!=null&&(W=ye.replace(pe,"$&/")+"/"),I(G,B,W,"",function(we){return we})):G!=null&&(K(G)&&(G=Y(G,W+(G.key==null||P&&P.key===G.key?"":(""+G.key).replace(pe,"$&/")+"/")+ye)),B.push(G)),1;ye=0;var xe=re===""?".":re+":";if(D(P))for(var q=0;q<P.length;q++)re=P[q],ve=xe+le(re,q),ye+=I(re,B,W,ve,G);else if(q=v(P),typeof q=="function")for(P=q.call(P),q=0;!(re=P.next()).done;)re=re.value,ve=xe+le(re,q++),ye+=I(re,B,W,ve,G);else if(ve==="object"){if(typeof P.then=="function")return I(ge(P),B,W,re,G);throw B=String(P),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return ye}function V(P,B,W){if(P==null)return P;var re=[],G=0;return I(P,re,"","",function(ve){return B.call(W,ve,G++)}),re}function ae(P){if(P._status===-1){var B=P._result;B=B(),B.then(function(W){(P._status===0||P._status===-1)&&(P._status=1,P._result=W)},function(W){(P._status===0||P._status===-1)&&(P._status=2,P._result=W)}),P._status===-1&&(P._status=0,P._result=B)}if(P._status===1)return P._result.default;throw P._result}var he=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},Q={map:V,forEach:function(P,B,W){V(P,function(){B.apply(this,arguments)},W)},count:function(P){var B=0;return V(P,function(){B++}),B},toArray:function(P){return V(P,function(B){return B})||[]},only:function(P){if(!K(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Ke.Activity=g,Ke.Children=Q,Ke.Component=N,Ke.Fragment=r,Ke.Profiler=a,Ke.PureComponent=E,Ke.StrictMode=n,Ke.Suspense=f,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(P){return M.H.useMemoCache(P)}},Ke.cache=function(P){return function(){return P.apply(null,arguments)}},Ke.cacheSignal=function(){return null},Ke.cloneElement=function(P,B,W){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var re=S({},P.props),G=P.key;if(B!=null)for(ve in B.key!==void 0&&(G=""+B.key),B)!R.call(B,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&B.ref===void 0||(re[ve]=B[ve]);var ve=arguments.length-2;if(ve===1)re.children=W;else if(1<ve){for(var ye=Array(ve),xe=0;xe<ve;xe++)ye[xe]=arguments[xe+2];re.children=ye}return U(P.type,G,re)},Ke.createContext=function(P){return P={$$typeof:l,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:s,_context:P},P},Ke.createElement=function(P,B,W){var re,G={},ve=null;if(B!=null)for(re in B.key!==void 0&&(ve=""+B.key),B)R.call(B,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(G[re]=B[re]);var ye=arguments.length-2;if(ye===1)G.children=W;else if(1<ye){for(var xe=Array(ye),q=0;q<ye;q++)xe[q]=arguments[q+2];G.children=xe}if(P&&P.defaultProps)for(re in ye=P.defaultProps,ye)G[re]===void 0&&(G[re]=ye[re]);return U(P,ve,G)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(P){return{$$typeof:d,render:P}},Ke.isValidElement=K,Ke.lazy=function(P){return{$$typeof:p,_payload:{_status:-1,_result:P},_init:ae}},Ke.memo=function(P,B){return{$$typeof:h,type:P,compare:B===void 0?null:B}},Ke.startTransition=function(P){var B=M.T,W={};M.T=W;try{var re=P(),G=M.S;G!==null&&G(W,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(T,he)}catch(ve){he(ve)}finally{B!==null&&W.types!==null&&(B.types=W.types),M.T=B}},Ke.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ke.use=function(P){return M.H.use(P)},Ke.useActionState=function(P,B,W){return M.H.useActionState(P,B,W)},Ke.useCallback=function(P,B){return M.H.useCallback(P,B)},Ke.useContext=function(P){return M.H.useContext(P)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(P,B){return M.H.useDeferredValue(P,B)},Ke.useEffect=function(P,B){return M.H.useEffect(P,B)},Ke.useEffectEvent=function(P){return M.H.useEffectEvent(P)},Ke.useId=function(){return M.H.useId()},Ke.useImperativeHandle=function(P,B,W){return M.H.useImperativeHandle(P,B,W)},Ke.useInsertionEffect=function(P,B){return M.H.useInsertionEffect(P,B)},Ke.useLayoutEffect=function(P,B){return M.H.useLayoutEffect(P,B)},Ke.useMemo=function(P,B){return M.H.useMemo(P,B)},Ke.useOptimistic=function(P,B){return M.H.useOptimistic(P,B)},Ke.useReducer=function(P,B,W){return M.H.useReducer(P,B,W)},Ke.useRef=function(P){return M.H.useRef(P)},Ke.useState=function(P){return M.H.useState(P)},Ke.useSyncExternalStore=function(P,B,W){return M.H.useSyncExternalStore(P,B,W)},Ke.useTransition=function(){return M.H.useTransition()},Ke.version="19.2.4",Ke}var JO;function Rc(){return JO||(JO=1,Xv.exports=aB()),Xv.exports}var x=Rc();const $t=Fa(x),iB=tB({__proto__:null,default:$t},[x]);var Zv={exports:{}},Qu={},Jv={exports:{}},e0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eE;function sB(){return eE||(eE=1,(function(e){function t(I,V){var ae=I.length;I.push(V);e:for(;0<ae;){var he=ae-1>>>1,Q=I[he];if(0<a(Q,V))I[he]=V,I[ae]=Q,ae=he;else break e}}function r(I){return I.length===0?null:I[0]}function n(I){if(I.length===0)return null;var V=I[0],ae=I.pop();if(ae!==V){I[0]=ae;e:for(var he=0,Q=I.length,P=Q>>>1;he<P;){var B=2*(he+1)-1,W=I[B],re=B+1,G=I[re];if(0>a(W,ae))re<Q&&0>a(G,W)?(I[he]=G,I[re]=ae,he=re):(I[he]=W,I[B]=ae,he=B);else if(re<Q&&0>a(G,ae))I[he]=G,I[re]=ae,he=re;else break e}}return V}function a(I,V){var ae=I.sortIndex-V.sortIndex;return ae!==0?ae:I.id-V.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,d=l.now();e.unstable_now=function(){return l.now()-d}}var f=[],h=[],p=1,g=null,y=3,v=!1,j=!1,S=!1,_=!1,N=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function C(I){for(var V=r(h);V!==null;){if(V.callback===null)n(h);else if(V.startTime<=I)n(h),V.sortIndex=V.expirationTime,t(f,V);else break;V=r(h)}}function D(I){if(S=!1,C(I),!j)if(r(f)!==null)j=!0,T||(T=!0,z());else{var V=r(h);V!==null&&ge(D,V.startTime-I)}}var T=!1,M=-1,R=5,U=-1;function Y(){return _?!0:!(e.unstable_now()-U<R)}function K(){if(_=!1,T){var I=e.unstable_now();U=I;var V=!0;try{e:{j=!1,S&&(S=!1,O(M),M=-1),v=!0;var ae=y;try{t:{for(C(I),g=r(f);g!==null&&!(g.expirationTime>I&&Y());){var he=g.callback;if(typeof he=="function"){g.callback=null,y=g.priorityLevel;var Q=he(g.expirationTime<=I);if(I=e.unstable_now(),typeof Q=="function"){g.callback=Q,C(I),V=!0;break t}g===r(f)&&n(f),C(I)}else n(f);g=r(f)}if(g!==null)V=!0;else{var P=r(h);P!==null&&ge(D,P.startTime-I),V=!1}}break e}finally{g=null,y=ae,v=!1}V=void 0}}finally{V?z():T=!1}}}var z;if(typeof E=="function")z=function(){E(K)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,le=pe.port2;pe.port1.onmessage=K,z=function(){le.postMessage(null)}}else z=function(){N(K,0)};function ge(I,V){M=N(function(){I(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(I){switch(y){case 1:case 2:case 3:var V=3;break;default:V=y}var ae=y;y=V;try{return I()}finally{y=ae}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(I,V){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var ae=y;y=I;try{return V()}finally{y=ae}},e.unstable_scheduleCallback=function(I,V,ae){var he=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?he+ae:he):ae=he,I){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ae+Q,I={id:p++,callback:V,priorityLevel:I,startTime:ae,expirationTime:Q,sortIndex:-1},ae>he?(I.sortIndex=ae,t(h,I),r(f)===null&&I===r(h)&&(S?(O(M),M=-1):S=!0,ge(D,ae-he))):(I.sortIndex=Q,t(f,I),j||v||(j=!0,T||(T=!0,z()))),I},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(I){var V=y;return function(){var ae=y;y=V;try{return I.apply(this,arguments)}finally{y=ae}}}})(e0)),e0}var tE;function oB(){return tE||(tE=1,Jv.exports=sB()),Jv.exports}var t0={exports:{}},Fr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rE;function lB(){if(rE)return Fr;rE=1;var e=Rc();function t(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(f,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:g==null?null:""+g,children:f,containerInfo:h,implementation:p}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Fr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Fr.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return s(f,h,null,p)},Fr.flushSync=function(f){var h=l.T,p=n.p;try{if(l.T=null,n.p=2,f)return f()}finally{l.T=h,n.p=p,n.d.f()}},Fr.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(f,h))},Fr.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},Fr.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,g=d(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?n.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:v}):p==="script"&&n.d.X(f,{crossOrigin:g,integrity:y,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Fr.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=d(h.as,h.crossOrigin);n.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(f)},Fr.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=d(p,h.crossOrigin);n.d.L(f,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Fr.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=d(h.as,h.crossOrigin);n.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(f)},Fr.requestFormReset=function(f){n.d.r(f)},Fr.unstable_batchedUpdates=function(f,h){return f(h)},Fr.useFormState=function(f,h,p){return l.H.useFormState(f,h,p)},Fr.useFormStatus=function(){return l.H.useHostTransitionStatus()},Fr.version="19.2.4",Fr}var nE;function yT(){if(nE)return t0.exports;nE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),t0.exports=lB(),t0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aE;function cB(){if(aE)return Qu;aE=1;var e=oB(),t=Rc(),r=yT();function n(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function s(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function l(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function d(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function f(i){if(s(i)!==i)throw Error(n(188))}function h(i){var o=i.alternate;if(!o){if(o=s(i),o===null)throw Error(n(188));return o!==i?null:i}for(var u=i,m=o;;){var b=u.return;if(b===null)break;var w=b.alternate;if(w===null){if(m=b.return,m!==null){u=m;continue}break}if(b.child===w.child){for(w=b.child;w;){if(w===u)return f(b),i;if(w===m)return f(b),o;w=w.sibling}throw Error(n(188))}if(u.return!==m.return)u=b,m=w;else{for(var A=!1,k=b.child;k;){if(k===u){A=!0,u=b,m=w;break}if(k===m){A=!0,m=b,u=w;break}k=k.sibling}if(!A){for(k=w.child;k;){if(k===u){A=!0,u=w,m=b;break}if(k===m){A=!0,m=w,u=b;break}k=k.sibling}if(!A)throw Error(n(189))}}if(u.alternate!==m)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?i:o}function p(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=p(i),o!==null)return o;i=i.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function z(i){return i===null||typeof i!="object"?null:(i=K&&i[K]||i["@@iterator"],typeof i=="function"?i:null)}var pe=Symbol.for("react.client.reference");function le(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===pe?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case S:return"Fragment";case N:return"Profiler";case _:return"StrictMode";case D:return"Suspense";case T:return"SuspenseList";case U:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case j:return"Portal";case E:return i.displayName||"Context";case O:return(i._context.displayName||"Context")+".Consumer";case C:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return o=i.displayName||null,o!==null?o:le(i.type)||"Memo";case R:o=i._payload,i=i._init;try{return le(i(o))}catch{}}return null}var ge=Array.isArray,I=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},he=[],Q=-1;function P(i){return{current:i}}function B(i){0>Q||(i.current=he[Q],he[Q]=null,Q--)}function W(i,o){Q++,he[Q]=i.current,i.current=o}var re=P(null),G=P(null),ve=P(null),ye=P(null);function xe(i,o){switch(W(ve,o),W(G,i),W(re,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?vO(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=vO(o),i=bO(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}B(re),W(re,i)}function q(){B(re),B(G),B(ve)}function we(i){i.memoizedState!==null&&W(ye,i);var o=re.current,u=bO(o,i.type);o!==u&&(W(G,i),W(re,u))}function je(i){G.current===i&&(B(re),B(G)),ye.current===i&&(B(ye),Uu._currentValue=ae)}var ue,Ue;function fe(i){if(ue===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);ue=o&&o[1]||"",Ue=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ue+i+Ue}var Me=!1;function ze(i,o){if(!i||Me)return"";Me=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(ne){var ee=ne}Reflect.construct(i,[],me)}else{try{me.call()}catch(ne){ee=ne}i.call(me.prototype)}}else{try{throw Error()}catch(ne){ee=ne}(me=i())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(ne){if(ne&&ee&&typeof ne.stack=="string")return[ne.stack,ee.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=m.DetermineComponentFrameRoot(),A=w[0],k=w[1];if(A&&k){var L=A.split(`
`),J=k.split(`
`);for(b=m=0;m<L.length&&!L[m].includes("DetermineComponentFrameRoot");)m++;for(;b<J.length&&!J[b].includes("DetermineComponentFrameRoot");)b++;if(m===L.length||b===J.length)for(m=L.length-1,b=J.length-1;1<=m&&0<=b&&L[m]!==J[b];)b--;for(;1<=m&&0<=b;m--,b--)if(L[m]!==J[b]){if(m!==1||b!==1)do if(m--,b--,0>b||L[m]!==J[b]){var ce=`
`+L[m].replace(" at new "," at ");return i.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",i.displayName)),ce}while(1<=m&&0<=b);break}}}finally{Me=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?fe(u):""}function At(i,o){switch(i.tag){case 26:case 27:case 5:return fe(i.type);case 16:return fe("Lazy");case 13:return i.child!==o&&o!==null?fe("Suspense Fallback"):fe("Suspense");case 19:return fe("SuspenseList");case 0:case 15:return ze(i.type,!1);case 11:return ze(i.type.render,!1);case 1:return ze(i.type,!0);case 31:return fe("Activity");default:return""}}function Ft(i){try{var o="",u=null;do o+=At(i,u),u=i,i=i.return;while(i);return o}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var wa=Object.prototype.hasOwnProperty,oe=e.unstable_scheduleCallback,dt=e.unstable_cancelCallback,Kt=e.unstable_shouldYield,te=e.unstable_requestPaint,Oe=e.unstable_now,xt=e.unstable_getCurrentPriorityLevel,mt=e.unstable_ImmediatePriority,qr=e.unstable_UserBlockingPriority,Pr=e.unstable_NormalPriority,ja=e.unstable_LowPriority,Rn=e.unstable_IdlePriority,al=e.log,il=e.unstable_setDisableYieldValue,kr=null,fr=null;function Sa(i){if(typeof al=="function"&&il(i),fr&&typeof fr.setStrictMode=="function")try{fr.setStrictMode(kr,i)}catch{}}var vn=Math.clz32?Math.clz32:$5,L5=Math.log,B5=Math.LN2;function $5(i){return i>>>=0,i===0?32:31-(L5(i)/B5|0)|0}var Af=256,Cf=262144,Pf=4194304;function Ks(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function kf(i,o,u){var m=i.pendingLanes;if(m===0)return 0;var b=0,w=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var k=m&134217727;return k!==0?(m=k&~w,m!==0?b=Ks(m):(A&=k,A!==0?b=Ks(A):u||(u=k&~i,u!==0&&(b=Ks(u))))):(k=m&~w,k!==0?b=Ks(k):A!==0?b=Ks(A):u||(u=m&~i,u!==0&&(b=Ks(u)))),b===0?0:o!==0&&o!==b&&(o&w)===0&&(w=b&-b,u=o&-o,w>=u||w===32&&(u&4194048)!==0)?o:b}function Jc(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function U5(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jj(){var i=Pf;return Pf<<=1,(Pf&62914560)===0&&(Pf=4194304),i}function Ig(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function eu(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function z5(i,o,u,m,b,w){var A=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var k=i.entanglements,L=i.expirationTimes,J=i.hiddenUpdates;for(u=A&~u;0<u;){var ce=31-vn(u),me=1<<ce;k[ce]=0,L[ce]=-1;var ee=J[ce];if(ee!==null)for(J[ce]=null,ce=0;ce<ee.length;ce++){var ne=ee[ce];ne!==null&&(ne.lane&=-536870913)}u&=~me}m!==0&&eS(i,m,0),w!==0&&b===0&&i.tag!==0&&(i.suspendedLanes|=w&~(A&~o))}function eS(i,o,u){i.pendingLanes|=o,i.suspendedLanes&=~o;var m=31-vn(o);i.entangledLanes|=o,i.entanglements[m]=i.entanglements[m]|1073741824|u&261930}function tS(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var m=31-vn(u),b=1<<m;b&o|i[m]&o&&(i[m]|=o),u&=~b}}function rS(i,o){var u=o&-o;return u=(u&42)!==0?1:Lg(u),(u&(i.suspendedLanes|o))!==0?0:u}function Lg(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Bg(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function nS(){var i=V.p;return i!==0?i:(i=window.event,i===void 0?32:qO(i.type))}function aS(i,o){var u=V.p;try{return V.p=i,o()}finally{V.p=u}}var Fi=Math.random().toString(36).slice(2),Tr="__reactFiber$"+Fi,nn="__reactProps$"+Fi,sl="__reactContainer$"+Fi,$g="__reactEvents$"+Fi,q5="__reactListeners$"+Fi,F5="__reactHandles$"+Fi,iS="__reactResources$"+Fi,tu="__reactMarker$"+Fi;function Ug(i){delete i[Tr],delete i[nn],delete i[$g],delete i[q5],delete i[F5]}function ol(i){var o=i[Tr];if(o)return o;for(var u=i.parentNode;u;){if(o=u[sl]||u[Tr]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=OO(i);i!==null;){if(u=i[Tr])return u;i=OO(i)}return o}i=u,u=i.parentNode}return null}function ll(i){if(i=i[Tr]||i[sl]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function ru(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(n(33))}function cl(i){var o=i[iS];return o||(o=i[iS]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function xr(i){i[tu]=!0}var sS=new Set,oS={};function Qs(i,o){ul(i,o),ul(i+"Capture",o)}function ul(i,o){for(oS[i]=o,i=0;i<o.length;i++)sS.add(o[i])}var K5=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lS={},cS={};function Q5(i){return wa.call(cS,i)?!0:wa.call(lS,i)?!1:K5.test(i)?cS[i]=!0:(lS[i]=!0,!1)}function Tf(i,o,u){if(Q5(o))if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+u)}}function Df(i,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+u)}}function Qa(i,o,u,m){if(m===null)i.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(o,u,""+m)}}function In(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function uS(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function H5(i,o,u){var m=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var b=m.get,w=m.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return b.call(this)},set:function(A){u=""+A,w.call(this,A)}}),Object.defineProperty(i,o,{enumerable:m.enumerable}),{getValue:function(){return u},setValue:function(A){u=""+A},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function zg(i){if(!i._valueTracker){var o=uS(i)?"checked":"value";i._valueTracker=H5(i,o,""+i[o])}}function dS(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),m="";return i&&(m=uS(i)?i.checked?"true":"false":i.value),i=m,i!==u?(o.setValue(i),!0):!1}function Mf(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var V5=/[\n"\\]/g;function Ln(i){return i.replace(V5,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function qg(i,o,u,m,b,w,A,k){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),o!=null?A==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+In(o)):i.value!==""+In(o)&&(i.value=""+In(o)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),o!=null?Fg(i,A,In(o)):u!=null?Fg(i,A,In(u)):m!=null&&i.removeAttribute("value"),b==null&&w!=null&&(i.defaultChecked=!!w),b!=null&&(i.checked=b&&typeof b!="function"&&typeof b!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?i.name=""+In(k):i.removeAttribute("name")}function fS(i,o,u,m,b,w,A,k){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.type=w),o!=null||u!=null){if(!(w!=="submit"&&w!=="reset"||o!=null)){zg(i);return}u=u!=null?""+In(u):"",o=o!=null?""+In(o):u,k||o===i.value||(i.value=o),i.defaultValue=o}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,i.checked=k?i.checked:!!m,i.defaultChecked=!!m,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),zg(i)}function Fg(i,o,u){o==="number"&&Mf(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function dl(i,o,u,m){if(i=i.options,o){o={};for(var b=0;b<u.length;b++)o["$"+u[b]]=!0;for(u=0;u<i.length;u++)b=o.hasOwnProperty("$"+i[u].value),i[u].selected!==b&&(i[u].selected=b),b&&m&&(i[u].defaultSelected=!0)}else{for(u=""+In(u),o=null,b=0;b<i.length;b++){if(i[b].value===u){i[b].selected=!0,m&&(i[b].defaultSelected=!0);return}o!==null||i[b].disabled||(o=i[b])}o!==null&&(o.selected=!0)}}function hS(i,o,u){if(o!=null&&(o=""+In(o),o!==i.value&&(i.value=o),u==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=u!=null?""+In(u):""}function mS(i,o,u,m){if(o==null){if(m!=null){if(u!=null)throw Error(n(92));if(ge(m)){if(1<m.length)throw Error(n(93));m=m[0]}u=m}u==null&&(u=""),o=u}u=In(o),i.defaultValue=u,m=i.textContent,m===u&&m!==""&&m!==null&&(i.value=m),zg(i)}function fl(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var G5=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pS(i,o,u){var m=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?m?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":m?i.setProperty(o,u):typeof u!="number"||u===0||G5.has(o)?o==="float"?i.cssFloat=u:i[o]=(""+u).trim():i[o]=u+"px"}function gS(i,o,u){if(o!=null&&typeof o!="object")throw Error(n(62));if(i=i.style,u!=null){for(var m in u)!u.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?i.setProperty(m,""):m==="float"?i.cssFloat="":i[m]="");for(var b in o)m=o[b],o.hasOwnProperty(b)&&u[b]!==m&&pS(i,b,m)}else for(var w in o)o.hasOwnProperty(w)&&pS(i,w,o[w])}function Kg(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Y5=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),W5=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rf(i){return W5.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Ha(){}var Qg=null;function Hg(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var hl=null,ml=null;function yS(i){var o=ll(i);if(o&&(i=o.stateNode)){var u=i[nn]||null;e:switch(i=o.stateNode,o.type){case"input":if(qg(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Ln(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var m=u[o];if(m!==i&&m.form===i.form){var b=m[nn]||null;if(!b)throw Error(n(90));qg(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(o=0;o<u.length;o++)m=u[o],m.form===i.form&&dS(m)}break e;case"textarea":hS(i,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&dl(i,!!u.multiple,o,!1)}}}var Vg=!1;function vS(i,o,u){if(Vg)return i(o,u);Vg=!0;try{var m=i(o);return m}finally{if(Vg=!1,(hl!==null||ml!==null)&&(jh(),hl&&(o=hl,i=ml,ml=hl=null,yS(o),i)))for(o=0;o<i.length;o++)yS(i[o])}}function nu(i,o){var u=i.stateNode;if(u===null)return null;var m=u[nn]||null;if(m===null)return null;u=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(n(231,o,typeof u));return u}var Va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gg=!1;if(Va)try{var au={};Object.defineProperty(au,"passive",{get:function(){Gg=!0}}),window.addEventListener("test",au,au),window.removeEventListener("test",au,au)}catch{Gg=!1}var Ki=null,Yg=null,If=null;function bS(){if(If)return If;var i,o=Yg,u=o.length,m,b="value"in Ki?Ki.value:Ki.textContent,w=b.length;for(i=0;i<u&&o[i]===b[i];i++);var A=u-i;for(m=1;m<=A&&o[u-m]===b[w-m];m++);return If=b.slice(i,1<m?1-m:void 0)}function Lf(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Bf(){return!0}function xS(){return!1}function an(i){function o(u,m,b,w,A){this._reactName=u,this._targetInst=b,this.type=m,this.nativeEvent=w,this.target=A,this.currentTarget=null;for(var k in i)i.hasOwnProperty(k)&&(u=i[k],this[k]=u?u(w):w[k]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Bf:xS,this.isPropagationStopped=xS,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Bf)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Bf)},persist:function(){},isPersistent:Bf}),o}var Hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$f=an(Hs),iu=g({},Hs,{view:0,detail:0}),X5=an(iu),Wg,Xg,su,Uf=g({},iu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jg,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==su&&(su&&i.type==="mousemove"?(Wg=i.screenX-su.screenX,Xg=i.screenY-su.screenY):Xg=Wg=0,su=i),Wg)},movementY:function(i){return"movementY"in i?i.movementY:Xg}}),wS=an(Uf),Z5=g({},Uf,{dataTransfer:0}),J5=an(Z5),e3=g({},iu,{relatedTarget:0}),Zg=an(e3),t3=g({},Hs,{animationName:0,elapsedTime:0,pseudoElement:0}),r3=an(t3),n3=g({},Hs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),a3=an(n3),i3=g({},Hs,{data:0}),jS=an(i3),s3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function c3(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=l3[i])?!!o[i]:!1}function Jg(){return c3}var u3=g({},iu,{key:function(i){if(i.key){var o=s3[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Lf(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?o3[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jg,charCode:function(i){return i.type==="keypress"?Lf(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Lf(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),d3=an(u3),f3=g({},Uf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),SS=an(f3),h3=g({},iu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jg}),m3=an(h3),p3=g({},Hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),g3=an(p3),y3=g({},Uf,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),v3=an(y3),b3=g({},Hs,{newState:0,oldState:0}),x3=an(b3),w3=[9,13,27,32],ey=Va&&"CompositionEvent"in window,ou=null;Va&&"documentMode"in document&&(ou=document.documentMode);var j3=Va&&"TextEvent"in window&&!ou,_S=Va&&(!ey||ou&&8<ou&&11>=ou),NS=" ",OS=!1;function ES(i,o){switch(i){case"keyup":return w3.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AS(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var pl=!1;function S3(i,o){switch(i){case"compositionend":return AS(o);case"keypress":return o.which!==32?null:(OS=!0,NS);case"textInput":return i=o.data,i===NS&&OS?null:i;default:return null}}function _3(i,o){if(pl)return i==="compositionend"||!ey&&ES(i,o)?(i=bS(),If=Yg=Ki=null,pl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return _S&&o.locale!=="ko"?null:o.data;default:return null}}var N3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CS(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!N3[i.type]:o==="textarea"}function PS(i,o,u,m){hl?ml?ml.push(m):ml=[m]:hl=m,o=Ch(o,"onChange"),0<o.length&&(u=new $f("onChange","change",null,u,m),i.push({event:u,listeners:o}))}var lu=null,cu=null;function O3(i){fO(i,0)}function zf(i){var o=ru(i);if(dS(o))return i}function kS(i,o){if(i==="change")return o}var TS=!1;if(Va){var ty;if(Va){var ry="oninput"in document;if(!ry){var DS=document.createElement("div");DS.setAttribute("oninput","return;"),ry=typeof DS.oninput=="function"}ty=ry}else ty=!1;TS=ty&&(!document.documentMode||9<document.documentMode)}function MS(){lu&&(lu.detachEvent("onpropertychange",RS),cu=lu=null)}function RS(i){if(i.propertyName==="value"&&zf(cu)){var o=[];PS(o,cu,i,Hg(i)),vS(O3,o)}}function E3(i,o,u){i==="focusin"?(MS(),lu=o,cu=u,lu.attachEvent("onpropertychange",RS)):i==="focusout"&&MS()}function A3(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return zf(cu)}function C3(i,o){if(i==="click")return zf(o)}function P3(i,o){if(i==="input"||i==="change")return zf(o)}function k3(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var bn=typeof Object.is=="function"?Object.is:k3;function uu(i,o){if(bn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),m=Object.keys(o);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var b=u[m];if(!wa.call(o,b)||!bn(i[b],o[b]))return!1}return!0}function IS(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function LS(i,o){var u=IS(i);i=0;for(var m;u;){if(u.nodeType===3){if(m=i+u.textContent.length,i<=o&&m>=o)return{node:u,offset:o-i};i=m}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=IS(u)}}function BS(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?BS(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function $S(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Mf(i.document);o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=Mf(i.document)}return o}function ny(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var T3=Va&&"documentMode"in document&&11>=document.documentMode,gl=null,ay=null,du=null,iy=!1;function US(i,o,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;iy||gl==null||gl!==Mf(m)||(m=gl,"selectionStart"in m&&ny(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),du&&uu(du,m)||(du=m,m=Ch(ay,"onSelect"),0<m.length&&(o=new $f("onSelect","select",null,o,u),i.push({event:o,listeners:m}),o.target=gl)))}function Vs(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var yl={animationend:Vs("Animation","AnimationEnd"),animationiteration:Vs("Animation","AnimationIteration"),animationstart:Vs("Animation","AnimationStart"),transitionrun:Vs("Transition","TransitionRun"),transitionstart:Vs("Transition","TransitionStart"),transitioncancel:Vs("Transition","TransitionCancel"),transitionend:Vs("Transition","TransitionEnd")},sy={},zS={};Va&&(zS=document.createElement("div").style,"AnimationEvent"in window||(delete yl.animationend.animation,delete yl.animationiteration.animation,delete yl.animationstart.animation),"TransitionEvent"in window||delete yl.transitionend.transition);function Gs(i){if(sy[i])return sy[i];if(!yl[i])return i;var o=yl[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in zS)return sy[i]=o[u];return i}var qS=Gs("animationend"),FS=Gs("animationiteration"),KS=Gs("animationstart"),D3=Gs("transitionrun"),M3=Gs("transitionstart"),R3=Gs("transitioncancel"),QS=Gs("transitionend"),HS=new Map,oy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");oy.push("scrollEnd");function na(i,o){HS.set(i,o),Qs(o,[i])}var qf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Bn=[],vl=0,ly=0;function Ff(){for(var i=vl,o=ly=vl=0;o<i;){var u=Bn[o];Bn[o++]=null;var m=Bn[o];Bn[o++]=null;var b=Bn[o];Bn[o++]=null;var w=Bn[o];if(Bn[o++]=null,m!==null&&b!==null){var A=m.pending;A===null?b.next=b:(b.next=A.next,A.next=b),m.pending=b}w!==0&&VS(u,b,w)}}function Kf(i,o,u,m){Bn[vl++]=i,Bn[vl++]=o,Bn[vl++]=u,Bn[vl++]=m,ly|=m,i.lanes|=m,i=i.alternate,i!==null&&(i.lanes|=m)}function cy(i,o,u,m){return Kf(i,o,u,m),Qf(i)}function Ys(i,o){return Kf(i,null,null,o),Qf(i)}function VS(i,o,u){i.lanes|=u;var m=i.alternate;m!==null&&(m.lanes|=u);for(var b=!1,w=i.return;w!==null;)w.childLanes|=u,m=w.alternate,m!==null&&(m.childLanes|=u),w.tag===22&&(i=w.stateNode,i===null||i._visibility&1||(b=!0)),i=w,w=w.return;return i.tag===3?(w=i.stateNode,b&&o!==null&&(b=31-vn(u),i=w.hiddenUpdates,m=i[b],m===null?i[b]=[o]:m.push(o),o.lane=u|536870912),w):null}function Qf(i){if(50<Du)throw Du=0,vv=null,Error(n(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var bl={};function I3(i,o,u,m){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(i,o,u,m){return new I3(i,o,u,m)}function uy(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ga(i,o){var u=i.alternate;return u===null?(u=xn(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function GS(i,o){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,o=u.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function Hf(i,o,u,m,b,w){var A=0;if(m=i,typeof i=="function")uy(i)&&(A=1);else if(typeof i=="string")A=zL(i,u,re.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case U:return i=xn(31,u,o,b),i.elementType=U,i.lanes=w,i;case S:return Ws(u.children,b,w,o);case _:A=8,b|=24;break;case N:return i=xn(12,u,o,b|2),i.elementType=N,i.lanes=w,i;case D:return i=xn(13,u,o,b),i.elementType=D,i.lanes=w,i;case T:return i=xn(19,u,o,b),i.elementType=T,i.lanes=w,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case E:A=10;break e;case O:A=9;break e;case C:A=11;break e;case M:A=14;break e;case R:A=16,m=null;break e}A=29,u=Error(n(130,i===null?"null":typeof i,"")),m=null}return o=xn(A,u,o,b),o.elementType=i,o.type=m,o.lanes=w,o}function Ws(i,o,u,m){return i=xn(7,i,m,o),i.lanes=u,i}function dy(i,o,u){return i=xn(6,i,null,o),i.lanes=u,i}function YS(i){var o=xn(18,null,null,0);return o.stateNode=i,o}function fy(i,o,u){return o=xn(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var WS=new WeakMap;function $n(i,o){if(typeof i=="object"&&i!==null){var u=WS.get(i);return u!==void 0?u:(o={value:i,source:o,stack:Ft(o)},WS.set(i,o),o)}return{value:i,source:o,stack:Ft(o)}}var xl=[],wl=0,Vf=null,fu=0,Un=[],zn=0,Qi=null,_a=1,Na="";function Ya(i,o){xl[wl++]=fu,xl[wl++]=Vf,Vf=i,fu=o}function XS(i,o,u){Un[zn++]=_a,Un[zn++]=Na,Un[zn++]=Qi,Qi=i;var m=_a;i=Na;var b=32-vn(m)-1;m&=~(1<<b),u+=1;var w=32-vn(o)+b;if(30<w){var A=b-b%5;w=(m&(1<<A)-1).toString(32),m>>=A,b-=A,_a=1<<32-vn(o)+b|u<<b|m,Na=w+i}else _a=1<<w|u<<b|m,Na=i}function hy(i){i.return!==null&&(Ya(i,1),XS(i,1,0))}function my(i){for(;i===Vf;)Vf=xl[--wl],xl[wl]=null,fu=xl[--wl],xl[wl]=null;for(;i===Qi;)Qi=Un[--zn],Un[zn]=null,Na=Un[--zn],Un[zn]=null,_a=Un[--zn],Un[zn]=null}function ZS(i,o){Un[zn++]=_a,Un[zn++]=Na,Un[zn++]=Qi,_a=o.id,Na=o.overflow,Qi=i}var Dr=null,Tt=null,tt=!1,Hi=null,qn=!1,py=Error(n(519));function Vi(i){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hu($n(o,i)),py}function JS(i){var o=i.stateNode,u=i.type,m=i.memoizedProps;switch(o[Tr]=i,o[nn]=m,u){case"dialog":Ze("cancel",o),Ze("close",o);break;case"iframe":case"object":case"embed":Ze("load",o);break;case"video":case"audio":for(u=0;u<Ru.length;u++)Ze(Ru[u],o);break;case"source":Ze("error",o);break;case"img":case"image":case"link":Ze("error",o),Ze("load",o);break;case"details":Ze("toggle",o);break;case"input":Ze("invalid",o),fS(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":Ze("invalid",o);break;case"textarea":Ze("invalid",o),mS(o,m.value,m.defaultValue,m.children)}u=m.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||m.suppressHydrationWarning===!0||gO(o.textContent,u)?(m.popover!=null&&(Ze("beforetoggle",o),Ze("toggle",o)),m.onScroll!=null&&Ze("scroll",o),m.onScrollEnd!=null&&Ze("scrollend",o),m.onClick!=null&&(o.onclick=Ha),o=!0):o=!1,o||Vi(i,!0)}function e_(i){for(Dr=i.return;Dr;)switch(Dr.tag){case 5:case 31:case 13:qn=!1;return;case 27:case 3:qn=!0;return;default:Dr=Dr.return}}function jl(i){if(i!==Dr)return!1;if(!tt)return e_(i),tt=!0,!1;var o=i.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||Dv(i.type,i.memoizedProps)),u=!u),u&&Tt&&Vi(i),e_(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Tt=NO(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Tt=NO(i)}else o===27?(o=Tt,os(i.type)?(i=Bv,Bv=null,Tt=i):Tt=o):Tt=Dr?Kn(i.stateNode.nextSibling):null;return!0}function Xs(){Tt=Dr=null,tt=!1}function gy(){var i=Hi;return i!==null&&(cn===null?cn=i:cn.push.apply(cn,i),Hi=null),i}function hu(i){Hi===null?Hi=[i]:Hi.push(i)}var yy=P(null),Zs=null,Wa=null;function Gi(i,o,u){W(yy,o._currentValue),o._currentValue=u}function Xa(i){i._currentValue=yy.current,B(yy)}function vy(i,o,u){for(;i!==null;){var m=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),i===u)break;i=i.return}}function by(i,o,u,m){var b=i.child;for(b!==null&&(b.return=i);b!==null;){var w=b.dependencies;if(w!==null){var A=b.child;w=w.firstContext;e:for(;w!==null;){var k=w;w=b;for(var L=0;L<o.length;L++)if(k.context===o[L]){w.lanes|=u,k=w.alternate,k!==null&&(k.lanes|=u),vy(w.return,u,i),m||(A=null);break e}w=k.next}}else if(b.tag===18){if(A=b.return,A===null)throw Error(n(341));A.lanes|=u,w=A.alternate,w!==null&&(w.lanes|=u),vy(A,u,i),A=null}else A=b.child;if(A!==null)A.return=b;else for(A=b;A!==null;){if(A===i){A=null;break}if(b=A.sibling,b!==null){b.return=A.return,A=b;break}A=A.return}b=A}}function Sl(i,o,u,m){i=null;for(var b=o,w=!1;b!==null;){if(!w){if((b.flags&524288)!==0)w=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var A=b.alternate;if(A===null)throw Error(n(387));if(A=A.memoizedProps,A!==null){var k=b.type;bn(b.pendingProps.value,A.value)||(i!==null?i.push(k):i=[k])}}else if(b===ye.current){if(A=b.alternate,A===null)throw Error(n(387));A.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(i!==null?i.push(Uu):i=[Uu])}b=b.return}i!==null&&by(o,i,u,m),o.flags|=262144}function Gf(i){for(i=i.firstContext;i!==null;){if(!bn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Js(i){Zs=i,Wa=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Mr(i){return t_(Zs,i)}function Yf(i,o){return Zs===null&&Js(i),t_(i,o)}function t_(i,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Wa===null){if(i===null)throw Error(n(308));Wa=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Wa=Wa.next=o;return u}var L3=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(u,m){i.push(m)}};this.abort=function(){o.aborted=!0,i.forEach(function(u){return u()})}},B3=e.unstable_scheduleCallback,$3=e.unstable_NormalPriority,nr={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xy(){return{controller:new L3,data:new Map,refCount:0}}function mu(i){i.refCount--,i.refCount===0&&B3($3,function(){i.controller.abort()})}var pu=null,wy=0,_l=0,Nl=null;function U3(i,o){if(pu===null){var u=pu=[];wy=0,_l=_v(),Nl={status:"pending",value:void 0,then:function(m){u.push(m)}}}return wy++,o.then(r_,r_),o}function r_(){if(--wy===0&&pu!==null){Nl!==null&&(Nl.status="fulfilled");var i=pu;pu=null,_l=0,Nl=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function z3(i,o){var u=[],m={status:"pending",value:null,reason:null,then:function(b){u.push(b)}};return i.then(function(){m.status="fulfilled",m.value=o;for(var b=0;b<u.length;b++)(0,u[b])(o)},function(b){for(m.status="rejected",m.reason=b,b=0;b<u.length;b++)(0,u[b])(void 0)}),m}var n_=I.S;I.S=function(i,o){UN=Oe(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&U3(i,o),n_!==null&&n_(i,o)};var eo=P(null);function jy(){var i=eo.current;return i!==null?i:Ot.pooledCache}function Wf(i,o){o===null?W(eo,eo.current):W(eo,o.pool)}function a_(){var i=jy();return i===null?null:{parent:nr._currentValue,pool:i}}var Ol=Error(n(460)),Sy=Error(n(474)),Xf=Error(n(542)),Zf={then:function(){}};function i_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function s_(i,o,u){switch(u=i[u],u===void 0?i.push(o):u!==o&&(o.then(Ha,Ha),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,l_(i),i;default:if(typeof o.status=="string")o.then(Ha,Ha);else{if(i=Ot,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=o,i.status="pending",i.then(function(m){if(o.status==="pending"){var b=o;b.status="fulfilled",b.value=m}},function(m){if(o.status==="pending"){var b=o;b.status="rejected",b.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,l_(i),i}throw ro=o,Ol}}function to(i){try{var o=i._init;return o(i._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(ro=u,Ol):u}}var ro=null;function o_(){if(ro===null)throw Error(n(459));var i=ro;return ro=null,i}function l_(i){if(i===Ol||i===Xf)throw Error(n(483))}var El=null,gu=0;function Jf(i){var o=gu;return gu+=1,El===null&&(El=[]),s_(El,i,o)}function yu(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function eh(i,o){throw o.$$typeof===y?Error(n(525)):(i=Object.prototype.toString.call(o),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function c_(i){function o(H,F){if(i){var Z=H.deletions;Z===null?(H.deletions=[F],H.flags|=16):Z.push(F)}}function u(H,F){if(!i)return null;for(;F!==null;)o(H,F),F=F.sibling;return null}function m(H){for(var F=new Map;H!==null;)H.key!==null?F.set(H.key,H):F.set(H.index,H),H=H.sibling;return F}function b(H,F){return H=Ga(H,F),H.index=0,H.sibling=null,H}function w(H,F,Z){return H.index=Z,i?(Z=H.alternate,Z!==null?(Z=Z.index,Z<F?(H.flags|=67108866,F):Z):(H.flags|=67108866,F)):(H.flags|=1048576,F)}function A(H){return i&&H.alternate===null&&(H.flags|=67108866),H}function k(H,F,Z,de){return F===null||F.tag!==6?(F=dy(Z,H.mode,de),F.return=H,F):(F=b(F,Z),F.return=H,F)}function L(H,F,Z,de){var Re=Z.type;return Re===S?ce(H,F,Z.props.children,de,Z.key):F!==null&&(F.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===R&&to(Re)===F.type)?(F=b(F,Z.props),yu(F,Z),F.return=H,F):(F=Hf(Z.type,Z.key,Z.props,null,H.mode,de),yu(F,Z),F.return=H,F)}function J(H,F,Z,de){return F===null||F.tag!==4||F.stateNode.containerInfo!==Z.containerInfo||F.stateNode.implementation!==Z.implementation?(F=fy(Z,H.mode,de),F.return=H,F):(F=b(F,Z.children||[]),F.return=H,F)}function ce(H,F,Z,de,Re){return F===null||F.tag!==7?(F=Ws(Z,H.mode,de,Re),F.return=H,F):(F=b(F,Z),F.return=H,F)}function me(H,F,Z){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=dy(""+F,H.mode,Z),F.return=H,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case v:return Z=Hf(F.type,F.key,F.props,null,H.mode,Z),yu(Z,F),Z.return=H,Z;case j:return F=fy(F,H.mode,Z),F.return=H,F;case R:return F=to(F),me(H,F,Z)}if(ge(F)||z(F))return F=Ws(F,H.mode,Z,null),F.return=H,F;if(typeof F.then=="function")return me(H,Jf(F),Z);if(F.$$typeof===E)return me(H,Yf(H,F),Z);eh(H,F)}return null}function ee(H,F,Z,de){var Re=F!==null?F.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Re!==null?null:k(H,F,""+Z,de);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case v:return Z.key===Re?L(H,F,Z,de):null;case j:return Z.key===Re?J(H,F,Z,de):null;case R:return Z=to(Z),ee(H,F,Z,de)}if(ge(Z)||z(Z))return Re!==null?null:ce(H,F,Z,de,null);if(typeof Z.then=="function")return ee(H,F,Jf(Z),de);if(Z.$$typeof===E)return ee(H,F,Yf(H,Z),de);eh(H,Z)}return null}function ne(H,F,Z,de,Re){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return H=H.get(Z)||null,k(F,H,""+de,Re);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case v:return H=H.get(de.key===null?Z:de.key)||null,L(F,H,de,Re);case j:return H=H.get(de.key===null?Z:de.key)||null,J(F,H,de,Re);case R:return de=to(de),ne(H,F,Z,de,Re)}if(ge(de)||z(de))return H=H.get(Z)||null,ce(F,H,de,Re,null);if(typeof de.then=="function")return ne(H,F,Z,Jf(de),Re);if(de.$$typeof===E)return ne(H,F,Z,Yf(F,de),Re);eh(F,de)}return null}function Ce(H,F,Z,de){for(var Re=null,it=null,ke=F,Ve=F=0,et=null;ke!==null&&Ve<Z.length;Ve++){ke.index>Ve?(et=ke,ke=null):et=ke.sibling;var st=ee(H,ke,Z[Ve],de);if(st===null){ke===null&&(ke=et);break}i&&ke&&st.alternate===null&&o(H,ke),F=w(st,F,Ve),it===null?Re=st:it.sibling=st,it=st,ke=et}if(Ve===Z.length)return u(H,ke),tt&&Ya(H,Ve),Re;if(ke===null){for(;Ve<Z.length;Ve++)ke=me(H,Z[Ve],de),ke!==null&&(F=w(ke,F,Ve),it===null?Re=ke:it.sibling=ke,it=ke);return tt&&Ya(H,Ve),Re}for(ke=m(ke);Ve<Z.length;Ve++)et=ne(ke,H,Ve,Z[Ve],de),et!==null&&(i&&et.alternate!==null&&ke.delete(et.key===null?Ve:et.key),F=w(et,F,Ve),it===null?Re=et:it.sibling=et,it=et);return i&&ke.forEach(function(fs){return o(H,fs)}),tt&&Ya(H,Ve),Re}function Le(H,F,Z,de){if(Z==null)throw Error(n(151));for(var Re=null,it=null,ke=F,Ve=F=0,et=null,st=Z.next();ke!==null&&!st.done;Ve++,st=Z.next()){ke.index>Ve?(et=ke,ke=null):et=ke.sibling;var fs=ee(H,ke,st.value,de);if(fs===null){ke===null&&(ke=et);break}i&&ke&&fs.alternate===null&&o(H,ke),F=w(fs,F,Ve),it===null?Re=fs:it.sibling=fs,it=fs,ke=et}if(st.done)return u(H,ke),tt&&Ya(H,Ve),Re;if(ke===null){for(;!st.done;Ve++,st=Z.next())st=me(H,st.value,de),st!==null&&(F=w(st,F,Ve),it===null?Re=st:it.sibling=st,it=st);return tt&&Ya(H,Ve),Re}for(ke=m(ke);!st.done;Ve++,st=Z.next())st=ne(ke,H,Ve,st.value,de),st!==null&&(i&&st.alternate!==null&&ke.delete(st.key===null?Ve:st.key),F=w(st,F,Ve),it===null?Re=st:it.sibling=st,it=st);return i&&ke.forEach(function(ZL){return o(H,ZL)}),tt&&Ya(H,Ve),Re}function St(H,F,Z,de){if(typeof Z=="object"&&Z!==null&&Z.type===S&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case v:e:{for(var Re=Z.key;F!==null;){if(F.key===Re){if(Re=Z.type,Re===S){if(F.tag===7){u(H,F.sibling),de=b(F,Z.props.children),de.return=H,H=de;break e}}else if(F.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===R&&to(Re)===F.type){u(H,F.sibling),de=b(F,Z.props),yu(de,Z),de.return=H,H=de;break e}u(H,F);break}else o(H,F);F=F.sibling}Z.type===S?(de=Ws(Z.props.children,H.mode,de,Z.key),de.return=H,H=de):(de=Hf(Z.type,Z.key,Z.props,null,H.mode,de),yu(de,Z),de.return=H,H=de)}return A(H);case j:e:{for(Re=Z.key;F!==null;){if(F.key===Re)if(F.tag===4&&F.stateNode.containerInfo===Z.containerInfo&&F.stateNode.implementation===Z.implementation){u(H,F.sibling),de=b(F,Z.children||[]),de.return=H,H=de;break e}else{u(H,F);break}else o(H,F);F=F.sibling}de=fy(Z,H.mode,de),de.return=H,H=de}return A(H);case R:return Z=to(Z),St(H,F,Z,de)}if(ge(Z))return Ce(H,F,Z,de);if(z(Z)){if(Re=z(Z),typeof Re!="function")throw Error(n(150));return Z=Re.call(Z),Le(H,F,Z,de)}if(typeof Z.then=="function")return St(H,F,Jf(Z),de);if(Z.$$typeof===E)return St(H,F,Yf(H,Z),de);eh(H,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,F!==null&&F.tag===6?(u(H,F.sibling),de=b(F,Z),de.return=H,H=de):(u(H,F),de=dy(Z,H.mode,de),de.return=H,H=de),A(H)):u(H,F)}return function(H,F,Z,de){try{gu=0;var Re=St(H,F,Z,de);return El=null,Re}catch(ke){if(ke===Ol||ke===Xf)throw ke;var it=xn(29,ke,null,H.mode);return it.lanes=de,it.return=H,it}finally{}}}var no=c_(!0),u_=c_(!1),Yi=!1;function _y(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ny(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Wi(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Xi(i,o,u){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(ut&2)!==0){var b=m.pending;return b===null?o.next=o:(o.next=b.next,b.next=o),m.pending=o,o=Qf(i),VS(i,null,u),o}return Kf(i,m,o,u),Qf(i)}function vu(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var m=o.lanes;m&=i.pendingLanes,u|=m,o.lanes=u,tS(i,u)}}function Oy(i,o){var u=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var b=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var A={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};w===null?b=w=A:w=w.next=A,u=u.next}while(u!==null);w===null?b=w=o:w=w.next=o}else b=w=o;u={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:w,shared:m.shared,callbacks:m.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}var Ey=!1;function bu(){if(Ey){var i=Nl;if(i!==null)throw i}}function xu(i,o,u,m){Ey=!1;var b=i.updateQueue;Yi=!1;var w=b.firstBaseUpdate,A=b.lastBaseUpdate,k=b.shared.pending;if(k!==null){b.shared.pending=null;var L=k,J=L.next;L.next=null,A===null?w=J:A.next=J,A=L;var ce=i.alternate;ce!==null&&(ce=ce.updateQueue,k=ce.lastBaseUpdate,k!==A&&(k===null?ce.firstBaseUpdate=J:k.next=J,ce.lastBaseUpdate=L))}if(w!==null){var me=b.baseState;A=0,ce=J=L=null,k=w;do{var ee=k.lane&-536870913,ne=ee!==k.lane;if(ne?(Je&ee)===ee:(m&ee)===ee){ee!==0&&ee===_l&&(Ey=!0),ce!==null&&(ce=ce.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Ce=i,Le=k;ee=o;var St=u;switch(Le.tag){case 1:if(Ce=Le.payload,typeof Ce=="function"){me=Ce.call(St,me,ee);break e}me=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Le.payload,ee=typeof Ce=="function"?Ce.call(St,me,ee):Ce,ee==null)break e;me=g({},me,ee);break e;case 2:Yi=!0}}ee=k.callback,ee!==null&&(i.flags|=64,ne&&(i.flags|=8192),ne=b.callbacks,ne===null?b.callbacks=[ee]:ne.push(ee))}else ne={lane:ee,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ce===null?(J=ce=ne,L=me):ce=ce.next=ne,A|=ee;if(k=k.next,k===null){if(k=b.shared.pending,k===null)break;ne=k,k=ne.next,ne.next=null,b.lastBaseUpdate=ne,b.shared.pending=null}}while(!0);ce===null&&(L=me),b.baseState=L,b.firstBaseUpdate=J,b.lastBaseUpdate=ce,w===null&&(b.shared.lanes=0),rs|=A,i.lanes=A,i.memoizedState=me}}function d_(i,o){if(typeof i!="function")throw Error(n(191,i));i.call(o)}function f_(i,o){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)d_(u[i],o)}var Al=P(null),th=P(0);function h_(i,o){i=si,W(th,i),W(Al,o),si=i|o.baseLanes}function Ay(){W(th,si),W(Al,Al.current)}function Cy(){si=th.current,B(Al),B(th)}var wn=P(null),Fn=null;function Zi(i){var o=i.alternate;W(tr,tr.current&1),W(wn,i),Fn===null&&(o===null||Al.current!==null||o.memoizedState!==null)&&(Fn=i)}function Py(i){W(tr,tr.current),W(wn,i),Fn===null&&(Fn=i)}function m_(i){i.tag===22?(W(tr,tr.current),W(wn,i),Fn===null&&(Fn=i)):Ji()}function Ji(){W(tr,tr.current),W(wn,wn.current)}function jn(i){B(wn),Fn===i&&(Fn=null),B(tr)}var tr=P(0);function rh(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Iv(u)||Lv(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Za=0,Qe=null,wt=null,ar=null,nh=!1,Cl=!1,ao=!1,ah=0,wu=0,Pl=null,q3=0;function Vt(){throw Error(n(321))}function ky(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!bn(i[u],o[u]))return!1;return!0}function Ty(i,o,u,m,b,w){return Za=w,Qe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,I.H=i===null||i.memoizedState===null?X_:Vy,ao=!1,w=u(m,b),ao=!1,Cl&&(w=g_(o,u,m,b)),p_(i),w}function p_(i){I.H=_u;var o=wt!==null&&wt.next!==null;if(Za=0,ar=wt=Qe=null,nh=!1,wu=0,Pl=null,o)throw Error(n(300));i===null||ir||(i=i.dependencies,i!==null&&Gf(i)&&(ir=!0))}function g_(i,o,u,m){Qe=i;var b=0;do{if(Cl&&(Pl=null),wu=0,Cl=!1,25<=b)throw Error(n(301));if(b+=1,ar=wt=null,i.updateQueue!=null){var w=i.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}I.H=Z_,w=o(u,m)}while(Cl);return w}function F3(){var i=I.H,o=i.useState()[0];return o=typeof o.then=="function"?ju(o):o,i=i.useState()[0],(wt!==null?wt.memoizedState:null)!==i&&(Qe.flags|=1024),o}function Dy(){var i=ah!==0;return ah=0,i}function My(i,o,u){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~u}function Ry(i){if(nh){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}nh=!1}Za=0,ar=wt=Qe=null,Cl=!1,wu=ah=0,Pl=null}function Wr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ar===null?Qe.memoizedState=ar=i:ar=ar.next=i,ar}function rr(){if(wt===null){var i=Qe.alternate;i=i!==null?i.memoizedState:null}else i=wt.next;var o=ar===null?Qe.memoizedState:ar.next;if(o!==null)ar=o,wt=i;else{if(i===null)throw Qe.alternate===null?Error(n(467)):Error(n(310));wt=i,i={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},ar===null?Qe.memoizedState=ar=i:ar=ar.next=i}return ar}function ih(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ju(i){var o=wu;return wu+=1,Pl===null&&(Pl=[]),i=s_(Pl,i,o),o=Qe,(ar===null?o.memoizedState:ar.next)===null&&(o=o.alternate,I.H=o===null||o.memoizedState===null?X_:Vy),i}function sh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ju(i);if(i.$$typeof===E)return Mr(i)}throw Error(n(438,String(i)))}function Iy(i){var o=null,u=Qe.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var m=Qe.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(b){return b.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=ih(),Qe.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(i),m=0;m<i;m++)u[m]=Y;return o.index++,u}function Ja(i,o){return typeof o=="function"?o(i):o}function oh(i){var o=rr();return Ly(o,wt,i)}function Ly(i,o,u){var m=i.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=u;var b=i.baseQueue,w=m.pending;if(w!==null){if(b!==null){var A=b.next;b.next=w.next,w.next=A}o.baseQueue=b=w,m.pending=null}if(w=i.baseState,b===null)i.memoizedState=w;else{o=b.next;var k=A=null,L=null,J=o,ce=!1;do{var me=J.lane&-536870913;if(me!==J.lane?(Je&me)===me:(Za&me)===me){var ee=J.revertLane;if(ee===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),me===_l&&(ce=!0);else if((Za&ee)===ee){J=J.next,ee===_l&&(ce=!0);continue}else me={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},L===null?(k=L=me,A=w):L=L.next=me,Qe.lanes|=ee,rs|=ee;me=J.action,ao&&u(w,me),w=J.hasEagerState?J.eagerState:u(w,me)}else ee={lane:me,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},L===null?(k=L=ee,A=w):L=L.next=ee,Qe.lanes|=me,rs|=me;J=J.next}while(J!==null&&J!==o);if(L===null?A=w:L.next=k,!bn(w,i.memoizedState)&&(ir=!0,ce&&(u=Nl,u!==null)))throw u;i.memoizedState=w,i.baseState=A,i.baseQueue=L,m.lastRenderedState=w}return b===null&&(m.lanes=0),[i.memoizedState,m.dispatch]}function By(i){var o=rr(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=i;var m=u.dispatch,b=u.pending,w=o.memoizedState;if(b!==null){u.pending=null;var A=b=b.next;do w=i(w,A.action),A=A.next;while(A!==b);bn(w,o.memoizedState)||(ir=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),u.lastRenderedState=w}return[w,m]}function y_(i,o,u){var m=Qe,b=rr(),w=tt;if(w){if(u===void 0)throw Error(n(407));u=u()}else u=o();var A=!bn((wt||b).memoizedState,u);if(A&&(b.memoizedState=u,ir=!0),b=b.queue,zy(x_.bind(null,m,b,i),[i]),b.getSnapshot!==o||A||ar!==null&&ar.memoizedState.tag&1){if(m.flags|=2048,kl(9,{destroy:void 0},b_.bind(null,m,b,u,o),null),Ot===null)throw Error(n(349));w||(Za&127)!==0||v_(m,o,u)}return u}function v_(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=Qe.updateQueue,o===null?(o=ih(),Qe.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function b_(i,o,u,m){o.value=u,o.getSnapshot=m,w_(o)&&j_(i)}function x_(i,o,u){return u(function(){w_(o)&&j_(i)})}function w_(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!bn(i,u)}catch{return!0}}function j_(i){var o=Ys(i,2);o!==null&&un(o,i,2)}function $y(i){var o=Wr();if(typeof i=="function"){var u=i;if(i=u(),ao){Sa(!0);try{u()}finally{Sa(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:i},o}function S_(i,o,u,m){return i.baseState=u,Ly(i,wt,typeof m=="function"?m:Ja)}function K3(i,o,u,m,b){if(uh(i))throw Error(n(485));if(i=o.action,i!==null){var w={payload:b,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){w.listeners.push(A)}};I.T!==null?u(!0):w.isTransition=!1,m(w),u=o.pending,u===null?(w.next=o.pending=w,__(o,w)):(w.next=u.next,o.pending=u.next=w)}}function __(i,o){var u=o.action,m=o.payload,b=i.state;if(o.isTransition){var w=I.T,A={};I.T=A;try{var k=u(b,m),L=I.S;L!==null&&L(A,k),N_(i,o,k)}catch(J){Uy(i,o,J)}finally{w!==null&&A.types!==null&&(w.types=A.types),I.T=w}}else try{w=u(b,m),N_(i,o,w)}catch(J){Uy(i,o,J)}}function N_(i,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(m){O_(i,o,m)},function(m){return Uy(i,o,m)}):O_(i,o,u)}function O_(i,o,u){o.status="fulfilled",o.value=u,E_(o),i.state=u,o=i.pending,o!==null&&(u=o.next,u===o?i.pending=null:(u=u.next,o.next=u,__(i,u)))}function Uy(i,o,u){var m=i.pending;if(i.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=u,E_(o),o=o.next;while(o!==m)}i.action=null}function E_(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function A_(i,o){return o}function C_(i,o){if(tt){var u=Ot.formState;if(u!==null){e:{var m=Qe;if(tt){if(Tt){t:{for(var b=Tt,w=qn;b.nodeType!==8;){if(!w){b=null;break t}if(b=Kn(b.nextSibling),b===null){b=null;break t}}w=b.data,b=w==="F!"||w==="F"?b:null}if(b){Tt=Kn(b.nextSibling),m=b.data==="F!";break e}}Vi(m)}m=!1}m&&(o=u[0])}}return u=Wr(),u.memoizedState=u.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A_,lastRenderedState:o},u.queue=m,u=G_.bind(null,Qe,m),m.dispatch=u,m=$y(!1),w=Hy.bind(null,Qe,!1,m.queue),m=Wr(),b={state:o,dispatch:null,action:i,pending:null},m.queue=b,u=K3.bind(null,Qe,b,w,u),b.dispatch=u,m.memoizedState=i,[o,u,!1]}function P_(i){var o=rr();return k_(o,wt,i)}function k_(i,o,u){if(o=Ly(i,o,A_)[0],i=oh(Ja)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=ju(o)}catch(A){throw A===Ol?Xf:A}else m=o;o=rr();var b=o.queue,w=b.dispatch;return u!==o.memoizedState&&(Qe.flags|=2048,kl(9,{destroy:void 0},Q3.bind(null,b,u),null)),[m,w,i]}function Q3(i,o){i.action=o}function T_(i){var o=rr(),u=wt;if(u!==null)return k_(o,u,i);rr(),o=o.memoizedState,u=rr();var m=u.queue.dispatch;return u.memoizedState=i,[o,m,!1]}function kl(i,o,u,m){return i={tag:i,create:u,deps:m,inst:o,next:null},o=Qe.updateQueue,o===null&&(o=ih(),Qe.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=i.next=i:(m=u.next,u.next=i,i.next=m,o.lastEffect=i),i}function D_(){return rr().memoizedState}function lh(i,o,u,m){var b=Wr();Qe.flags|=i,b.memoizedState=kl(1|o,{destroy:void 0},u,m===void 0?null:m)}function ch(i,o,u,m){var b=rr();m=m===void 0?null:m;var w=b.memoizedState.inst;wt!==null&&m!==null&&ky(m,wt.memoizedState.deps)?b.memoizedState=kl(o,w,u,m):(Qe.flags|=i,b.memoizedState=kl(1|o,w,u,m))}function M_(i,o){lh(8390656,8,i,o)}function zy(i,o){ch(2048,8,i,o)}function H3(i){Qe.flags|=4;var o=Qe.updateQueue;if(o===null)o=ih(),Qe.updateQueue=o,o.events=[i];else{var u=o.events;u===null?o.events=[i]:u.push(i)}}function R_(i){var o=rr().memoizedState;return H3({ref:o,nextImpl:i}),function(){if((ut&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function I_(i,o){return ch(4,2,i,o)}function L_(i,o){return ch(4,4,i,o)}function B_(i,o){if(typeof o=="function"){i=i();var u=o(i);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function $_(i,o,u){u=u!=null?u.concat([i]):null,ch(4,4,B_.bind(null,o,i),u)}function qy(){}function U_(i,o){var u=rr();o=o===void 0?null:o;var m=u.memoizedState;return o!==null&&ky(o,m[1])?m[0]:(u.memoizedState=[i,o],i)}function z_(i,o){var u=rr();o=o===void 0?null:o;var m=u.memoizedState;if(o!==null&&ky(o,m[1]))return m[0];if(m=i(),ao){Sa(!0);try{i()}finally{Sa(!1)}}return u.memoizedState=[m,o],m}function Fy(i,o,u){return u===void 0||(Za&1073741824)!==0&&(Je&261930)===0?i.memoizedState=o:(i.memoizedState=u,i=qN(),Qe.lanes|=i,rs|=i,u)}function q_(i,o,u,m){return bn(u,o)?u:Al.current!==null?(i=Fy(i,u,m),bn(i,o)||(ir=!0),i):(Za&42)===0||(Za&1073741824)!==0&&(Je&261930)===0?(ir=!0,i.memoizedState=u):(i=qN(),Qe.lanes|=i,rs|=i,o)}function F_(i,o,u,m,b){var w=V.p;V.p=w!==0&&8>w?w:8;var A=I.T,k={};I.T=k,Hy(i,!1,o,u);try{var L=b(),J=I.S;if(J!==null&&J(k,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ce=z3(L,m);Su(i,o,ce,Nn(i))}else Su(i,o,m,Nn(i))}catch(me){Su(i,o,{then:function(){},status:"rejected",reason:me},Nn())}finally{V.p=w,A!==null&&k.types!==null&&(A.types=k.types),I.T=A}}function V3(){}function Ky(i,o,u,m){if(i.tag!==5)throw Error(n(476));var b=K_(i).queue;F_(i,b,o,ae,u===null?V3:function(){return Q_(i),u(m)})}function K_(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:ae},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:u},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function Q_(i){var o=K_(i);o.next===null&&(o=i.alternate.memoizedState),Su(i,o.next.queue,{},Nn())}function Qy(){return Mr(Uu)}function H_(){return rr().memoizedState}function V_(){return rr().memoizedState}function G3(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var u=Nn();i=Wi(u);var m=Xi(o,i,u);m!==null&&(un(m,o,u),vu(m,o,u)),o={cache:xy()},i.payload=o;return}o=o.return}}function Y3(i,o,u){var m=Nn();u={lane:m,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},uh(i)?Y_(o,u):(u=cy(i,o,u,m),u!==null&&(un(u,i,m),W_(u,o,m)))}function G_(i,o,u){var m=Nn();Su(i,o,u,m)}function Su(i,o,u,m){var b={lane:m,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(uh(i))Y_(o,b);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var A=o.lastRenderedState,k=w(A,u);if(b.hasEagerState=!0,b.eagerState=k,bn(k,A))return Kf(i,o,b,0),Ot===null&&Ff(),!1}catch{}finally{}if(u=cy(i,o,b,m),u!==null)return un(u,i,m),W_(u,o,m),!0}return!1}function Hy(i,o,u,m){if(m={lane:2,revertLane:_v(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},uh(i)){if(o)throw Error(n(479))}else o=cy(i,u,m,2),o!==null&&un(o,i,2)}function uh(i){var o=i.alternate;return i===Qe||o!==null&&o===Qe}function Y_(i,o){Cl=nh=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function W_(i,o,u){if((u&4194048)!==0){var m=o.lanes;m&=i.pendingLanes,u|=m,o.lanes=u,tS(i,u)}}var _u={readContext:Mr,use:sh,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt};_u.useEffectEvent=Vt;var X_={readContext:Mr,use:sh,useCallback:function(i,o){return Wr().memoizedState=[i,o===void 0?null:o],i},useContext:Mr,useEffect:M_,useImperativeHandle:function(i,o,u){u=u!=null?u.concat([i]):null,lh(4194308,4,B_.bind(null,o,i),u)},useLayoutEffect:function(i,o){return lh(4194308,4,i,o)},useInsertionEffect:function(i,o){lh(4,2,i,o)},useMemo:function(i,o){var u=Wr();o=o===void 0?null:o;var m=i();if(ao){Sa(!0);try{i()}finally{Sa(!1)}}return u.memoizedState=[m,o],m},useReducer:function(i,o,u){var m=Wr();if(u!==void 0){var b=u(o);if(ao){Sa(!0);try{u(o)}finally{Sa(!1)}}}else b=o;return m.memoizedState=m.baseState=b,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:b},m.queue=i,i=i.dispatch=Y3.bind(null,Qe,i),[m.memoizedState,i]},useRef:function(i){var o=Wr();return i={current:i},o.memoizedState=i},useState:function(i){i=$y(i);var o=i.queue,u=G_.bind(null,Qe,o);return o.dispatch=u,[i.memoizedState,u]},useDebugValue:qy,useDeferredValue:function(i,o){var u=Wr();return Fy(u,i,o)},useTransition:function(){var i=$y(!1);return i=F_.bind(null,Qe,i.queue,!0,!1),Wr().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,u){var m=Qe,b=Wr();if(tt){if(u===void 0)throw Error(n(407));u=u()}else{if(u=o(),Ot===null)throw Error(n(349));(Je&127)!==0||v_(m,o,u)}b.memoizedState=u;var w={value:u,getSnapshot:o};return b.queue=w,M_(x_.bind(null,m,w,i),[i]),m.flags|=2048,kl(9,{destroy:void 0},b_.bind(null,m,w,u,o),null),u},useId:function(){var i=Wr(),o=Ot.identifierPrefix;if(tt){var u=Na,m=_a;u=(m&~(1<<32-vn(m)-1)).toString(32)+u,o="_"+o+"R_"+u,u=ah++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=q3++,o="_"+o+"r_"+u.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:Qy,useFormState:C_,useActionState:C_,useOptimistic:function(i){var o=Wr();o.memoizedState=o.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Hy.bind(null,Qe,!0,u),u.dispatch=o,[i,o]},useMemoCache:Iy,useCacheRefresh:function(){return Wr().memoizedState=G3.bind(null,Qe)},useEffectEvent:function(i){var o=Wr(),u={impl:i};return o.memoizedState=u,function(){if((ut&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}},Vy={readContext:Mr,use:sh,useCallback:U_,useContext:Mr,useEffect:zy,useImperativeHandle:$_,useInsertionEffect:I_,useLayoutEffect:L_,useMemo:z_,useReducer:oh,useRef:D_,useState:function(){return oh(Ja)},useDebugValue:qy,useDeferredValue:function(i,o){var u=rr();return q_(u,wt.memoizedState,i,o)},useTransition:function(){var i=oh(Ja)[0],o=rr().memoizedState;return[typeof i=="boolean"?i:ju(i),o]},useSyncExternalStore:y_,useId:H_,useHostTransitionStatus:Qy,useFormState:P_,useActionState:P_,useOptimistic:function(i,o){var u=rr();return S_(u,wt,i,o)},useMemoCache:Iy,useCacheRefresh:V_};Vy.useEffectEvent=R_;var Z_={readContext:Mr,use:sh,useCallback:U_,useContext:Mr,useEffect:zy,useImperativeHandle:$_,useInsertionEffect:I_,useLayoutEffect:L_,useMemo:z_,useReducer:By,useRef:D_,useState:function(){return By(Ja)},useDebugValue:qy,useDeferredValue:function(i,o){var u=rr();return wt===null?Fy(u,i,o):q_(u,wt.memoizedState,i,o)},useTransition:function(){var i=By(Ja)[0],o=rr().memoizedState;return[typeof i=="boolean"?i:ju(i),o]},useSyncExternalStore:y_,useId:H_,useHostTransitionStatus:Qy,useFormState:T_,useActionState:T_,useOptimistic:function(i,o){var u=rr();return wt!==null?S_(u,wt,i,o):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:Iy,useCacheRefresh:V_};Z_.useEffectEvent=R_;function Gy(i,o,u,m){o=i.memoizedState,u=u(m,o),u=u==null?o:g({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Yy={enqueueSetState:function(i,o,u){i=i._reactInternals;var m=Nn(),b=Wi(m);b.payload=o,u!=null&&(b.callback=u),o=Xi(i,b,m),o!==null&&(un(o,i,m),vu(o,i,m))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var m=Nn(),b=Wi(m);b.tag=1,b.payload=o,u!=null&&(b.callback=u),o=Xi(i,b,m),o!==null&&(un(o,i,m),vu(o,i,m))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=Nn(),m=Wi(u);m.tag=2,o!=null&&(m.callback=o),o=Xi(i,m,u),o!==null&&(un(o,i,u),vu(o,i,u))}};function J_(i,o,u,m,b,w,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,w,A):o.prototype&&o.prototype.isPureReactComponent?!uu(u,m)||!uu(b,w):!0}function eN(i,o,u,m){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,m),o.state!==i&&Yy.enqueueReplaceState(o,o.state,null)}function io(i,o){var u=o;if("ref"in o){u={};for(var m in o)m!=="ref"&&(u[m]=o[m])}if(i=i.defaultProps){u===o&&(u=g({},u));for(var b in i)u[b]===void 0&&(u[b]=i[b])}return u}function tN(i){qf(i)}function rN(i){console.error(i)}function nN(i){qf(i)}function dh(i,o){try{var u=i.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function aN(i,o,u){try{var m=i.onCaughtError;m(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Wy(i,o,u){return u=Wi(u),u.tag=3,u.payload={element:null},u.callback=function(){dh(i,o)},u}function iN(i){return i=Wi(i),i.tag=3,i}function sN(i,o,u,m){var b=u.type.getDerivedStateFromError;if(typeof b=="function"){var w=m.value;i.payload=function(){return b(w)},i.callback=function(){aN(o,u,m)}}var A=u.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){aN(o,u,m),typeof b!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var k=m.stack;this.componentDidCatch(m.value,{componentStack:k!==null?k:""})})}function W3(i,o,u,m,b){if(u.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=u.alternate,o!==null&&Sl(o,u,b,!0),u=wn.current,u!==null){switch(u.tag){case 31:case 13:return Fn===null?Sh():u.alternate===null&&Gt===0&&(Gt=3),u.flags&=-257,u.flags|=65536,u.lanes=b,m===Zf?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([m]):o.add(m),wv(i,m,b)),!1;case 22:return u.flags|=65536,m===Zf?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([m]):u.add(m)),wv(i,m,b)),!1}throw Error(n(435,u.tag))}return wv(i,m,b),Sh(),!1}if(tt)return o=wn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=b,m!==py&&(i=Error(n(422),{cause:m}),hu($n(i,u)))):(m!==py&&(o=Error(n(423),{cause:m}),hu($n(o,u))),i=i.current.alternate,i.flags|=65536,b&=-b,i.lanes|=b,m=$n(m,u),b=Wy(i.stateNode,m,b),Oy(i,b),Gt!==4&&(Gt=2)),!1;var w=Error(n(520),{cause:m});if(w=$n(w,u),Tu===null?Tu=[w]:Tu.push(w),Gt!==4&&(Gt=2),o===null)return!0;m=$n(m,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,i=b&-b,u.lanes|=i,i=Wy(u.stateNode,m,i),Oy(u,i),!1;case 1:if(o=u.type,w=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ns===null||!ns.has(w))))return u.flags|=65536,b&=-b,u.lanes|=b,b=iN(b),sN(b,i,u,m),Oy(u,b),!1}u=u.return}while(u!==null);return!1}var Xy=Error(n(461)),ir=!1;function Rr(i,o,u,m){o.child=i===null?u_(o,null,u,m):no(o,i.child,u,m)}function oN(i,o,u,m,b){u=u.render;var w=o.ref;if("ref"in m){var A={};for(var k in m)k!=="ref"&&(A[k]=m[k])}else A=m;return Js(o),m=Ty(i,o,u,A,w,b),k=Dy(),i!==null&&!ir?(My(i,o,b),ei(i,o,b)):(tt&&k&&hy(o),o.flags|=1,Rr(i,o,m,b),o.child)}function lN(i,o,u,m,b){if(i===null){var w=u.type;return typeof w=="function"&&!uy(w)&&w.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=w,cN(i,o,w,m,b)):(i=Hf(u.type,null,m,o,o.mode,b),i.ref=o.ref,i.return=o,o.child=i)}if(w=i.child,!iv(i,b)){var A=w.memoizedProps;if(u=u.compare,u=u!==null?u:uu,u(A,m)&&i.ref===o.ref)return ei(i,o,b)}return o.flags|=1,i=Ga(w,m),i.ref=o.ref,i.return=o,o.child=i}function cN(i,o,u,m,b){if(i!==null){var w=i.memoizedProps;if(uu(w,m)&&i.ref===o.ref)if(ir=!1,o.pendingProps=m=w,iv(i,b))(i.flags&131072)!==0&&(ir=!0);else return o.lanes=i.lanes,ei(i,o,b)}return Zy(i,o,u,m,b)}function uN(i,o,u,m){var b=m.children,w=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((o.flags&128)!==0){if(w=w!==null?w.baseLanes|u:u,i!==null){for(m=o.child=i.child,b=0;m!==null;)b=b|m.lanes|m.childLanes,m=m.sibling;m=b&~w}else m=0,o.child=null;return dN(i,o,w,u,m)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Wf(o,w!==null?w.cachePool:null),w!==null?h_(o,w):Ay(),m_(o);else return m=o.lanes=536870912,dN(i,o,w!==null?w.baseLanes|u:u,u,m)}else w!==null?(Wf(o,w.cachePool),h_(o,w),Ji(),o.memoizedState=null):(i!==null&&Wf(o,null),Ay(),Ji());return Rr(i,o,b,u),o.child}function Nu(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function dN(i,o,u,m,b){var w=jy();return w=w===null?null:{parent:nr._currentValue,pool:w},o.memoizedState={baseLanes:u,cachePool:w},i!==null&&Wf(o,null),Ay(),m_(o),i!==null&&Sl(i,o,m,!0),o.childLanes=b,null}function fh(i,o){return o=mh({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function fN(i,o,u){return no(o,i.child,null,u),i=fh(o,o.pendingProps),i.flags|=2,jn(o),o.memoizedState=null,i}function X3(i,o,u){var m=o.pendingProps,b=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(tt){if(m.mode==="hidden")return i=fh(o,m),o.lanes=536870912,Nu(null,i);if(Py(o),(i=Tt)?(i=_O(i,qn),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Qi!==null?{id:_a,overflow:Na}:null,retryLane:536870912,hydrationErrors:null},u=YS(i),u.return=o,o.child=u,Dr=o,Tt=null)):i=null,i===null)throw Vi(o);return o.lanes=536870912,null}return fh(o,m)}var w=i.memoizedState;if(w!==null){var A=w.dehydrated;if(Py(o),b)if(o.flags&256)o.flags&=-257,o=fN(i,o,u);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(n(558));else if(ir||Sl(i,o,u,!1),b=(u&i.childLanes)!==0,ir||b){if(m=Ot,m!==null&&(A=rS(m,u),A!==0&&A!==w.retryLane))throw w.retryLane=A,Ys(i,A),un(m,i,A),Xy;Sh(),o=fN(i,o,u)}else i=w.treeContext,Tt=Kn(A.nextSibling),Dr=o,tt=!0,Hi=null,qn=!1,i!==null&&ZS(o,i),o=fh(o,m),o.flags|=4096;return o}return i=Ga(i.child,{mode:m.mode,children:m.children}),i.ref=o.ref,o.child=i,i.return=o,i}function hh(i,o){var u=o.ref;if(u===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(n(284));(i===null||i.ref!==u)&&(o.flags|=4194816)}}function Zy(i,o,u,m,b){return Js(o),u=Ty(i,o,u,m,void 0,b),m=Dy(),i!==null&&!ir?(My(i,o,b),ei(i,o,b)):(tt&&m&&hy(o),o.flags|=1,Rr(i,o,u,b),o.child)}function hN(i,o,u,m,b,w){return Js(o),o.updateQueue=null,u=g_(o,m,u,b),p_(i),m=Dy(),i!==null&&!ir?(My(i,o,w),ei(i,o,w)):(tt&&m&&hy(o),o.flags|=1,Rr(i,o,u,w),o.child)}function mN(i,o,u,m,b){if(Js(o),o.stateNode===null){var w=bl,A=u.contextType;typeof A=="object"&&A!==null&&(w=Mr(A)),w=new u(m,w),o.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Yy,o.stateNode=w,w._reactInternals=o,w=o.stateNode,w.props=m,w.state=o.memoizedState,w.refs={},_y(o),A=u.contextType,w.context=typeof A=="object"&&A!==null?Mr(A):bl,w.state=o.memoizedState,A=u.getDerivedStateFromProps,typeof A=="function"&&(Gy(o,u,A,m),w.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(A=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),A!==w.state&&Yy.enqueueReplaceState(w,w.state,null),xu(o,m,w,b),bu(),w.state=o.memoizedState),typeof w.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(i===null){w=o.stateNode;var k=o.memoizedProps,L=io(u,k);w.props=L;var J=w.context,ce=u.contextType;A=bl,typeof ce=="object"&&ce!==null&&(A=Mr(ce));var me=u.getDerivedStateFromProps;ce=typeof me=="function"||typeof w.getSnapshotBeforeUpdate=="function",k=o.pendingProps!==k,ce||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k||J!==A)&&eN(o,w,m,A),Yi=!1;var ee=o.memoizedState;w.state=ee,xu(o,m,w,b),bu(),J=o.memoizedState,k||ee!==J||Yi?(typeof me=="function"&&(Gy(o,u,me,m),J=o.memoizedState),(L=Yi||J_(o,u,L,m,ee,J,A))?(ce||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(o.flags|=4194308)):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=J),w.props=m,w.state=J,w.context=A,m=L):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{w=o.stateNode,Ny(i,o),A=o.memoizedProps,ce=io(u,A),w.props=ce,me=o.pendingProps,ee=w.context,J=u.contextType,L=bl,typeof J=="object"&&J!==null&&(L=Mr(J)),k=u.getDerivedStateFromProps,(J=typeof k=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==me||ee!==L)&&eN(o,w,m,L),Yi=!1,ee=o.memoizedState,w.state=ee,xu(o,m,w,b),bu();var ne=o.memoizedState;A!==me||ee!==ne||Yi||i!==null&&i.dependencies!==null&&Gf(i.dependencies)?(typeof k=="function"&&(Gy(o,u,k,m),ne=o.memoizedState),(ce=Yi||J_(o,u,ce,m,ee,ne,L)||i!==null&&i.dependencies!==null&&Gf(i.dependencies))?(J||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(m,ne,L),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(m,ne,L)),typeof w.componentDidUpdate=="function"&&(o.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===i.memoizedProps&&ee===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ee===i.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=ne),w.props=m,w.state=ne,w.context=L,m=ce):(typeof w.componentDidUpdate!="function"||A===i.memoizedProps&&ee===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ee===i.memoizedState||(o.flags|=1024),m=!1)}return w=m,hh(i,o),m=(o.flags&128)!==0,w||m?(w=o.stateNode,u=m&&typeof u.getDerivedStateFromError!="function"?null:w.render(),o.flags|=1,i!==null&&m?(o.child=no(o,i.child,null,b),o.child=no(o,null,u,b)):Rr(i,o,u,b),o.memoizedState=w.state,i=o.child):i=ei(i,o,b),i}function pN(i,o,u,m){return Xs(),o.flags|=256,Rr(i,o,u,m),o.child}var Jy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ev(i){return{baseLanes:i,cachePool:a_()}}function tv(i,o,u){return i=i!==null?i.childLanes&~u:0,o&&(i|=_n),i}function gN(i,o,u){var m=o.pendingProps,b=!1,w=(o.flags&128)!==0,A;if((A=w)||(A=i!==null&&i.memoizedState===null?!1:(tr.current&2)!==0),A&&(b=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,i===null){if(tt){if(b?Zi(o):Ji(),(i=Tt)?(i=_O(i,qn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Qi!==null?{id:_a,overflow:Na}:null,retryLane:536870912,hydrationErrors:null},u=YS(i),u.return=o,o.child=u,Dr=o,Tt=null)):i=null,i===null)throw Vi(o);return Lv(i)?o.lanes=32:o.lanes=536870912,null}var k=m.children;return m=m.fallback,b?(Ji(),b=o.mode,k=mh({mode:"hidden",children:k},b),m=Ws(m,b,u,null),k.return=o,m.return=o,k.sibling=m,o.child=k,m=o.child,m.memoizedState=ev(u),m.childLanes=tv(i,A,u),o.memoizedState=Jy,Nu(null,m)):(Zi(o),rv(o,k))}var L=i.memoizedState;if(L!==null&&(k=L.dehydrated,k!==null)){if(w)o.flags&256?(Zi(o),o.flags&=-257,o=nv(i,o,u)):o.memoizedState!==null?(Ji(),o.child=i.child,o.flags|=128,o=null):(Ji(),k=m.fallback,b=o.mode,m=mh({mode:"visible",children:m.children},b),k=Ws(k,b,u,null),k.flags|=2,m.return=o,k.return=o,m.sibling=k,o.child=m,no(o,i.child,null,u),m=o.child,m.memoizedState=ev(u),m.childLanes=tv(i,A,u),o.memoizedState=Jy,o=Nu(null,m));else if(Zi(o),Lv(k)){if(A=k.nextSibling&&k.nextSibling.dataset,A)var J=A.dgst;A=J,m=Error(n(419)),m.stack="",m.digest=A,hu({value:m,source:null,stack:null}),o=nv(i,o,u)}else if(ir||Sl(i,o,u,!1),A=(u&i.childLanes)!==0,ir||A){if(A=Ot,A!==null&&(m=rS(A,u),m!==0&&m!==L.retryLane))throw L.retryLane=m,Ys(i,m),un(A,i,m),Xy;Iv(k)||Sh(),o=nv(i,o,u)}else Iv(k)?(o.flags|=192,o.child=i.child,o=null):(i=L.treeContext,Tt=Kn(k.nextSibling),Dr=o,tt=!0,Hi=null,qn=!1,i!==null&&ZS(o,i),o=rv(o,m.children),o.flags|=4096);return o}return b?(Ji(),k=m.fallback,b=o.mode,L=i.child,J=L.sibling,m=Ga(L,{mode:"hidden",children:m.children}),m.subtreeFlags=L.subtreeFlags&65011712,J!==null?k=Ga(J,k):(k=Ws(k,b,u,null),k.flags|=2),k.return=o,m.return=o,m.sibling=k,o.child=m,Nu(null,m),m=o.child,k=i.child.memoizedState,k===null?k=ev(u):(b=k.cachePool,b!==null?(L=nr._currentValue,b=b.parent!==L?{parent:L,pool:L}:b):b=a_(),k={baseLanes:k.baseLanes|u,cachePool:b}),m.memoizedState=k,m.childLanes=tv(i,A,u),o.memoizedState=Jy,Nu(i.child,m)):(Zi(o),u=i.child,i=u.sibling,u=Ga(u,{mode:"visible",children:m.children}),u.return=o,u.sibling=null,i!==null&&(A=o.deletions,A===null?(o.deletions=[i],o.flags|=16):A.push(i)),o.child=u,o.memoizedState=null,u)}function rv(i,o){return o=mh({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function mh(i,o){return i=xn(22,i,null,o),i.lanes=0,i}function nv(i,o,u){return no(o,i.child,null,u),i=rv(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function yN(i,o,u){i.lanes|=o;var m=i.alternate;m!==null&&(m.lanes|=o),vy(i.return,o,u)}function av(i,o,u,m,b,w){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:b,treeForkCount:w}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=m,A.tail=u,A.tailMode=b,A.treeForkCount=w)}function vN(i,o,u){var m=o.pendingProps,b=m.revealOrder,w=m.tail;m=m.children;var A=tr.current,k=(A&2)!==0;if(k?(A=A&1|2,o.flags|=128):A&=1,W(tr,A),Rr(i,o,m,u),m=tt?fu:0,!k&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&yN(i,u,o);else if(i.tag===19)yN(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(b){case"forwards":for(u=o.child,b=null;u!==null;)i=u.alternate,i!==null&&rh(i)===null&&(b=u),u=u.sibling;u=b,u===null?(b=o.child,o.child=null):(b=u.sibling,u.sibling=null),av(o,!1,b,u,w,m);break;case"backwards":case"unstable_legacy-backwards":for(u=null,b=o.child,o.child=null;b!==null;){if(i=b.alternate,i!==null&&rh(i)===null){o.child=b;break}i=b.sibling,b.sibling=u,u=b,b=i}av(o,!0,u,null,w,m);break;case"together":av(o,!1,null,null,void 0,m);break;default:o.memoizedState=null}return o.child}function ei(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),rs|=o.lanes,(u&o.childLanes)===0)if(i!==null){if(Sl(i,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(n(153));if(o.child!==null){for(i=o.child,u=Ga(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=Ga(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function iv(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Gf(i)))}function Z3(i,o,u){switch(o.tag){case 3:xe(o,o.stateNode.containerInfo),Gi(o,nr,i.memoizedState.cache),Xs();break;case 27:case 5:we(o);break;case 4:xe(o,o.stateNode.containerInfo);break;case 10:Gi(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Py(o),null;break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(Zi(o),o.flags|=128,null):(u&o.child.childLanes)!==0?gN(i,o,u):(Zi(o),i=ei(i,o,u),i!==null?i.sibling:null);Zi(o);break;case 19:var b=(i.flags&128)!==0;if(m=(u&o.childLanes)!==0,m||(Sl(i,o,u,!1),m=(u&o.childLanes)!==0),b){if(m)return vN(i,o,u);o.flags|=128}if(b=o.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),W(tr,tr.current),m)break;return null;case 22:return o.lanes=0,uN(i,o,u,o.pendingProps);case 24:Gi(o,nr,i.memoizedState.cache)}return ei(i,o,u)}function bN(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps)ir=!0;else{if(!iv(i,u)&&(o.flags&128)===0)return ir=!1,Z3(i,o,u);ir=(i.flags&131072)!==0}else ir=!1,tt&&(o.flags&1048576)!==0&&XS(o,fu,o.index);switch(o.lanes=0,o.tag){case 16:e:{var m=o.pendingProps;if(i=to(o.elementType),o.type=i,typeof i=="function")uy(i)?(m=io(i,m),o.tag=1,o=mN(null,o,i,m,u)):(o.tag=0,o=Zy(null,o,i,m,u));else{if(i!=null){var b=i.$$typeof;if(b===C){o.tag=11,o=oN(null,o,i,m,u);break e}else if(b===M){o.tag=14,o=lN(null,o,i,m,u);break e}}throw o=le(i)||i,Error(n(306,o,""))}}return o;case 0:return Zy(i,o,o.type,o.pendingProps,u);case 1:return m=o.type,b=io(m,o.pendingProps),mN(i,o,m,b,u);case 3:e:{if(xe(o,o.stateNode.containerInfo),i===null)throw Error(n(387));m=o.pendingProps;var w=o.memoizedState;b=w.element,Ny(i,o),xu(o,m,null,u);var A=o.memoizedState;if(m=A.cache,Gi(o,nr,m),m!==w.cache&&by(o,[nr],u,!0),bu(),m=A.element,w.isDehydrated)if(w={element:m,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){o=pN(i,o,m,u);break e}else if(m!==b){b=$n(Error(n(424)),o),hu(b),o=pN(i,o,m,u);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Tt=Kn(i.firstChild),Dr=o,tt=!0,Hi=null,qn=!0,u=u_(o,null,m,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Xs(),m===b){o=ei(i,o,u);break e}Rr(i,o,m,u)}o=o.child}return o;case 26:return hh(i,o),i===null?(u=PO(o.type,null,o.pendingProps,null))?o.memoizedState=u:tt||(u=o.type,i=o.pendingProps,m=Ph(ve.current).createElement(u),m[Tr]=o,m[nn]=i,Ir(m,u,i),xr(m),o.stateNode=m):o.memoizedState=PO(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return we(o),i===null&&tt&&(m=o.stateNode=EO(o.type,o.pendingProps,ve.current),Dr=o,qn=!0,b=Tt,os(o.type)?(Bv=b,Tt=Kn(m.firstChild)):Tt=b),Rr(i,o,o.pendingProps.children,u),hh(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&tt&&((b=m=Tt)&&(m=AL(m,o.type,o.pendingProps,qn),m!==null?(o.stateNode=m,Dr=o,Tt=Kn(m.firstChild),qn=!1,b=!0):b=!1),b||Vi(o)),we(o),b=o.type,w=o.pendingProps,A=i!==null?i.memoizedProps:null,m=w.children,Dv(b,w)?m=null:A!==null&&Dv(b,A)&&(o.flags|=32),o.memoizedState!==null&&(b=Ty(i,o,F3,null,null,u),Uu._currentValue=b),hh(i,o),Rr(i,o,m,u),o.child;case 6:return i===null&&tt&&((i=u=Tt)&&(u=CL(u,o.pendingProps,qn),u!==null?(o.stateNode=u,Dr=o,Tt=null,i=!0):i=!1),i||Vi(o)),null;case 13:return gN(i,o,u);case 4:return xe(o,o.stateNode.containerInfo),m=o.pendingProps,i===null?o.child=no(o,null,m,u):Rr(i,o,m,u),o.child;case 11:return oN(i,o,o.type,o.pendingProps,u);case 7:return Rr(i,o,o.pendingProps,u),o.child;case 8:return Rr(i,o,o.pendingProps.children,u),o.child;case 12:return Rr(i,o,o.pendingProps.children,u),o.child;case 10:return m=o.pendingProps,Gi(o,o.type,m.value),Rr(i,o,m.children,u),o.child;case 9:return b=o.type._context,m=o.pendingProps.children,Js(o),b=Mr(b),m=m(b),o.flags|=1,Rr(i,o,m,u),o.child;case 14:return lN(i,o,o.type,o.pendingProps,u);case 15:return cN(i,o,o.type,o.pendingProps,u);case 19:return vN(i,o,u);case 31:return X3(i,o,u);case 22:return uN(i,o,u,o.pendingProps);case 24:return Js(o),m=Mr(nr),i===null?(b=jy(),b===null&&(b=Ot,w=xy(),b.pooledCache=w,w.refCount++,w!==null&&(b.pooledCacheLanes|=u),b=w),o.memoizedState={parent:m,cache:b},_y(o),Gi(o,nr,b)):((i.lanes&u)!==0&&(Ny(i,o),xu(o,null,null,u),bu()),b=i.memoizedState,w=o.memoizedState,b.parent!==m?(b={parent:m,cache:m},o.memoizedState=b,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=b),Gi(o,nr,m)):(m=w.cache,Gi(o,nr,m),m!==b.cache&&by(o,[nr],u,!0))),Rr(i,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function ti(i){i.flags|=4}function sv(i,o,u,m,b){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(b&335544128)===b)if(i.stateNode.complete)i.flags|=8192;else if(HN())i.flags|=8192;else throw ro=Zf,Sy}else i.flags&=-16777217}function xN(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!RO(o))if(HN())i.flags|=8192;else throw ro=Zf,Sy}function ph(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Jj():536870912,i.lanes|=o,Rl|=o)}function Ou(i,o){if(!tt)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function Dt(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,m=0;if(o)for(var b=i.child;b!==null;)u|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=i,b=b.sibling;else for(b=i.child;b!==null;)u|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=i,b=b.sibling;return i.subtreeFlags|=m,i.childLanes=u,o}function J3(i,o,u){var m=o.pendingProps;switch(my(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(o),null;case 1:return Dt(o),null;case 3:return u=o.stateNode,m=null,i!==null&&(m=i.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),Xa(nr),q(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(jl(o)?ti(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,gy())),Dt(o),null;case 26:var b=o.type,w=o.memoizedState;return i===null?(ti(o),w!==null?(Dt(o),xN(o,w)):(Dt(o),sv(o,b,null,m,u))):w?w!==i.memoizedState?(ti(o),Dt(o),xN(o,w)):(Dt(o),o.flags&=-16777217):(i=i.memoizedProps,i!==m&&ti(o),Dt(o),sv(o,b,i,m,u)),null;case 27:if(je(o),u=ve.current,b=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==m&&ti(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return Dt(o),null}i=re.current,jl(o)?JS(o):(i=EO(b,m,u),o.stateNode=i,ti(o))}return Dt(o),null;case 5:if(je(o),b=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==m&&ti(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return Dt(o),null}if(w=re.current,jl(o))JS(o);else{var A=Ph(ve.current);switch(w){case 1:w=A.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:w=A.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":w=A.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":w=A.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":w=A.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof m.is=="string"?A.createElement("select",{is:m.is}):A.createElement("select"),m.multiple?w.multiple=!0:m.size&&(w.size=m.size);break;default:w=typeof m.is=="string"?A.createElement(b,{is:m.is}):A.createElement(b)}}w[Tr]=o,w[nn]=m;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)w.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=w;e:switch(Ir(w,b,m),b){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&ti(o)}}return Dt(o),sv(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,u),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==m&&ti(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(n(166));if(i=ve.current,jl(o)){if(i=o.stateNode,u=o.memoizedProps,m=null,b=Dr,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}i[Tr]=o,i=!!(i.nodeValue===u||m!==null&&m.suppressHydrationWarning===!0||gO(i.nodeValue,u)),i||Vi(o,!0)}else i=Ph(i).createTextNode(m),i[Tr]=o,o.stateNode=i}return Dt(o),null;case 31:if(u=o.memoizedState,i===null||i.memoizedState!==null){if(m=jl(o),u!==null){if(i===null){if(!m)throw Error(n(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[Tr]=o}else Xs(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Dt(o),i=!1}else u=gy(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=u),i=!0;if(!i)return o.flags&256?(jn(o),o):(jn(o),null);if((o.flags&128)!==0)throw Error(n(558))}return Dt(o),null;case 13:if(m=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(b=jl(o),m!==null&&m.dehydrated!==null){if(i===null){if(!b)throw Error(n(318));if(b=o.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[Tr]=o}else Xs(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Dt(o),b=!1}else b=gy(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=b),b=!0;if(!b)return o.flags&256?(jn(o),o):(jn(o),null)}return jn(o),(o.flags&128)!==0?(o.lanes=u,o):(u=m!==null,i=i!==null&&i.memoizedState!==null,u&&(m=o.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool),w=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(w=m.memoizedState.cachePool.pool),w!==b&&(m.flags|=2048)),u!==i&&u&&(o.child.flags|=8192),ph(o,o.updateQueue),Dt(o),null);case 4:return q(),i===null&&Av(o.stateNode.containerInfo),Dt(o),null;case 10:return Xa(o.type),Dt(o),null;case 19:if(B(tr),m=o.memoizedState,m===null)return Dt(o),null;if(b=(o.flags&128)!==0,w=m.rendering,w===null)if(b)Ou(m,!1);else{if(Gt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(w=rh(i),w!==null){for(o.flags|=128,Ou(m,!1),i=w.updateQueue,o.updateQueue=i,ph(o,i),o.subtreeFlags=0,i=u,u=o.child;u!==null;)GS(u,i),u=u.sibling;return W(tr,tr.current&1|2),tt&&Ya(o,m.treeForkCount),o.child}i=i.sibling}m.tail!==null&&Oe()>xh&&(o.flags|=128,b=!0,Ou(m,!1),o.lanes=4194304)}else{if(!b)if(i=rh(w),i!==null){if(o.flags|=128,b=!0,i=i.updateQueue,o.updateQueue=i,ph(o,i),Ou(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!tt)return Dt(o),null}else 2*Oe()-m.renderingStartTime>xh&&u!==536870912&&(o.flags|=128,b=!0,Ou(m,!1),o.lanes=4194304);m.isBackwards?(w.sibling=o.child,o.child=w):(i=m.last,i!==null?i.sibling=w:o.child=w,m.last=w)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=Oe(),i.sibling=null,u=tr.current,W(tr,b?u&1|2:u&1),tt&&Ya(o,m.treeForkCount),i):(Dt(o),null);case 22:case 23:return jn(o),Cy(),m=o.memoizedState!==null,i!==null?i.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(u&536870912)!==0&&(o.flags&128)===0&&(Dt(o),o.subtreeFlags&6&&(o.flags|=8192)):Dt(o),u=o.updateQueue,u!==null&&ph(o,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==u&&(o.flags|=2048),i!==null&&B(eo),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Xa(nr),Dt(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function eL(i,o){switch(my(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Xa(nr),q(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return je(o),null;case 31:if(o.memoizedState!==null){if(jn(o),o.alternate===null)throw Error(n(340));Xs()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(jn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Xs()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return B(tr),null;case 4:return q(),null;case 10:return Xa(o.type),null;case 22:case 23:return jn(o),Cy(),i!==null&&B(eo),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Xa(nr),null;case 25:return null;default:return null}}function wN(i,o){switch(my(o),o.tag){case 3:Xa(nr),q();break;case 26:case 27:case 5:je(o);break;case 4:q();break;case 31:o.memoizedState!==null&&jn(o);break;case 13:jn(o);break;case 19:B(tr);break;case 10:Xa(o.type);break;case 22:case 23:jn(o),Cy(),i!==null&&B(eo);break;case 24:Xa(nr)}}function Eu(i,o){try{var u=o.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var b=m.next;u=b;do{if((u.tag&i)===i){m=void 0;var w=u.create,A=u.inst;m=w(),A.destroy=m}u=u.next}while(u!==b)}}catch(k){gt(o,o.return,k)}}function es(i,o,u){try{var m=o.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var w=b.next;m=w;do{if((m.tag&i)===i){var A=m.inst,k=A.destroy;if(k!==void 0){A.destroy=void 0,b=o;var L=u,J=k;try{J()}catch(ce){gt(b,L,ce)}}}m=m.next}while(m!==w)}}catch(ce){gt(o,o.return,ce)}}function jN(i){var o=i.updateQueue;if(o!==null){var u=i.stateNode;try{f_(o,u)}catch(m){gt(i,i.return,m)}}}function SN(i,o,u){u.props=io(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(m){gt(i,o,m)}}function Au(i,o){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var m=i.stateNode;break;case 30:m=i.stateNode;break;default:m=i.stateNode}typeof u=="function"?i.refCleanup=u(m):u.current=m}}catch(b){gt(i,o,b)}}function Oa(i,o){var u=i.ref,m=i.refCleanup;if(u!==null)if(typeof m=="function")try{m()}catch(b){gt(i,o,b)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(b){gt(i,o,b)}else u.current=null}function _N(i){var o=i.type,u=i.memoizedProps,m=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&m.focus();break e;case"img":u.src?m.src=u.src:u.srcSet&&(m.srcset=u.srcSet)}}catch(b){gt(i,i.return,b)}}function ov(i,o,u){try{var m=i.stateNode;jL(m,i.type,u,o),m[nn]=o}catch(b){gt(i,i.return,b)}}function NN(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&os(i.type)||i.tag===4}function lv(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||NN(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&os(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function cv(i,o,u){var m=i.tag;if(m===5||m===6)i=i.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(i),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Ha));else if(m!==4&&(m===27&&os(i.type)&&(u=i.stateNode,o=null),i=i.child,i!==null))for(cv(i,o,u),i=i.sibling;i!==null;)cv(i,o,u),i=i.sibling}function gh(i,o,u){var m=i.tag;if(m===5||m===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(m!==4&&(m===27&&os(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(gh(i,o,u),i=i.sibling;i!==null;)gh(i,o,u),i=i.sibling}function ON(i){var o=i.stateNode,u=i.memoizedProps;try{for(var m=i.type,b=o.attributes;b.length;)o.removeAttributeNode(b[0]);Ir(o,m,u),o[Tr]=i,o[nn]=u}catch(w){gt(i,i.return,w)}}var ri=!1,sr=!1,uv=!1,EN=typeof WeakSet=="function"?WeakSet:Set,wr=null;function tL(i,o){if(i=i.containerInfo,kv=Lh,i=$S(i),ny(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var b=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var A=0,k=-1,L=-1,J=0,ce=0,me=i,ee=null;t:for(;;){for(var ne;me!==u||b!==0&&me.nodeType!==3||(k=A+b),me!==w||m!==0&&me.nodeType!==3||(L=A+m),me.nodeType===3&&(A+=me.nodeValue.length),(ne=me.firstChild)!==null;)ee=me,me=ne;for(;;){if(me===i)break t;if(ee===u&&++J===b&&(k=A),ee===w&&++ce===m&&(L=A),(ne=me.nextSibling)!==null)break;me=ee,ee=me.parentNode}me=ne}u=k===-1||L===-1?null:{start:k,end:L}}else u=null}u=u||{start:0,end:0}}else u=null;for(Tv={focusedElem:i,selectionRange:u},Lh=!1,wr=o;wr!==null;)if(o=wr,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,wr=i;else for(;wr!==null;){switch(o=wr,w=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(u=0;u<i.length;u++)b=i[u],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&w!==null){i=void 0,u=o,b=w.memoizedProps,w=w.memoizedState,m=u.stateNode;try{var Ce=io(u.type,b);i=m.getSnapshotBeforeUpdate(Ce,w),m.__reactInternalSnapshotBeforeUpdate=i}catch(Le){gt(u,u.return,Le)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,u=i.nodeType,u===9)Rv(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Rv(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=o.sibling,i!==null){i.return=o.return,wr=i;break}wr=o.return}}function AN(i,o,u){var m=u.flags;switch(u.tag){case 0:case 11:case 15:ai(i,u),m&4&&Eu(5,u);break;case 1:if(ai(i,u),m&4)if(i=u.stateNode,o===null)try{i.componentDidMount()}catch(A){gt(u,u.return,A)}else{var b=io(u.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(b,o,i.__reactInternalSnapshotBeforeUpdate)}catch(A){gt(u,u.return,A)}}m&64&&jN(u),m&512&&Au(u,u.return);break;case 3:if(ai(i,u),m&64&&(i=u.updateQueue,i!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{f_(i,o)}catch(A){gt(u,u.return,A)}}break;case 27:o===null&&m&4&&ON(u);case 26:case 5:ai(i,u),o===null&&m&4&&_N(u),m&512&&Au(u,u.return);break;case 12:ai(i,u);break;case 31:ai(i,u),m&4&&kN(i,u);break;case 13:ai(i,u),m&4&&TN(i,u),m&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=uL.bind(null,u),PL(i,u))));break;case 22:if(m=u.memoizedState!==null||ri,!m){o=o!==null&&o.memoizedState!==null||sr,b=ri;var w=sr;ri=m,(sr=o)&&!w?ii(i,u,(u.subtreeFlags&8772)!==0):ai(i,u),ri=b,sr=w}break;case 30:break;default:ai(i,u)}}function CN(i){var o=i.alternate;o!==null&&(i.alternate=null,CN(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Ug(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var It=null,sn=!1;function ni(i,o,u){for(u=u.child;u!==null;)PN(i,o,u),u=u.sibling}function PN(i,o,u){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(kr,u)}catch{}switch(u.tag){case 26:sr||Oa(u,o),ni(i,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:sr||Oa(u,o);var m=It,b=sn;os(u.type)&&(It=u.stateNode,sn=!1),ni(i,o,u),Lu(u.stateNode),It=m,sn=b;break;case 5:sr||Oa(u,o);case 6:if(m=It,b=sn,It=null,ni(i,o,u),It=m,sn=b,It!==null)if(sn)try{(It.nodeType===9?It.body:It.nodeName==="HTML"?It.ownerDocument.body:It).removeChild(u.stateNode)}catch(w){gt(u,o,w)}else try{It.removeChild(u.stateNode)}catch(w){gt(u,o,w)}break;case 18:It!==null&&(sn?(i=It,jO(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),Fl(i)):jO(It,u.stateNode));break;case 4:m=It,b=sn,It=u.stateNode.containerInfo,sn=!0,ni(i,o,u),It=m,sn=b;break;case 0:case 11:case 14:case 15:es(2,u,o),sr||es(4,u,o),ni(i,o,u);break;case 1:sr||(Oa(u,o),m=u.stateNode,typeof m.componentWillUnmount=="function"&&SN(u,o,m)),ni(i,o,u);break;case 21:ni(i,o,u);break;case 22:sr=(m=sr)||u.memoizedState!==null,ni(i,o,u),sr=m;break;default:ni(i,o,u)}}function kN(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Fl(i)}catch(u){gt(o,o.return,u)}}}function TN(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Fl(i)}catch(u){gt(o,o.return,u)}}function rL(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new EN),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new EN),o;default:throw Error(n(435,i.tag))}}function yh(i,o){var u=rL(i);o.forEach(function(m){if(!u.has(m)){u.add(m);var b=dL.bind(null,i,m);m.then(b,b)}})}function on(i,o){var u=o.deletions;if(u!==null)for(var m=0;m<u.length;m++){var b=u[m],w=i,A=o,k=A;e:for(;k!==null;){switch(k.tag){case 27:if(os(k.type)){It=k.stateNode,sn=!1;break e}break;case 5:It=k.stateNode,sn=!1;break e;case 3:case 4:It=k.stateNode.containerInfo,sn=!0;break e}k=k.return}if(It===null)throw Error(n(160));PN(w,A,b),It=null,sn=!1,w=b.alternate,w!==null&&(w.return=null),b.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)DN(o,i),o=o.sibling}var aa=null;function DN(i,o){var u=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:on(o,i),ln(i),m&4&&(es(3,i,i.return),Eu(3,i),es(5,i,i.return));break;case 1:on(o,i),ln(i),m&512&&(sr||u===null||Oa(u,u.return)),m&64&&ri&&(i=i.updateQueue,i!==null&&(m=i.callbacks,m!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?m:u.concat(m))));break;case 26:var b=aa;if(on(o,i),ln(i),m&512&&(sr||u===null||Oa(u,u.return)),m&4){var w=u!==null?u.memoizedState:null;if(m=i.memoizedState,u===null)if(m===null)if(i.stateNode===null){e:{m=i.type,u=i.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":w=b.getElementsByTagName("title")[0],(!w||w[tu]||w[Tr]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=b.createElement(m),b.head.insertBefore(w,b.querySelector("head > title"))),Ir(w,m,u),w[Tr]=i,xr(w),m=w;break e;case"link":var A=DO("link","href",b).get(m+(u.href||""));if(A){for(var k=0;k<A.length;k++)if(w=A[k],w.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&w.getAttribute("rel")===(u.rel==null?null:u.rel)&&w.getAttribute("title")===(u.title==null?null:u.title)&&w.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){A.splice(k,1);break t}}w=b.createElement(m),Ir(w,m,u),b.head.appendChild(w);break;case"meta":if(A=DO("meta","content",b).get(m+(u.content||""))){for(k=0;k<A.length;k++)if(w=A[k],w.getAttribute("content")===(u.content==null?null:""+u.content)&&w.getAttribute("name")===(u.name==null?null:u.name)&&w.getAttribute("property")===(u.property==null?null:u.property)&&w.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&w.getAttribute("charset")===(u.charSet==null?null:u.charSet)){A.splice(k,1);break t}}w=b.createElement(m),Ir(w,m,u),b.head.appendChild(w);break;default:throw Error(n(468,m))}w[Tr]=i,xr(w),m=w}i.stateNode=m}else MO(b,i.type,i.stateNode);else i.stateNode=TO(b,m,i.memoizedProps);else w!==m?(w===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):w.count--,m===null?MO(b,i.type,i.stateNode):TO(b,m,i.memoizedProps)):m===null&&i.stateNode!==null&&ov(i,i.memoizedProps,u.memoizedProps)}break;case 27:on(o,i),ln(i),m&512&&(sr||u===null||Oa(u,u.return)),u!==null&&m&4&&ov(i,i.memoizedProps,u.memoizedProps);break;case 5:if(on(o,i),ln(i),m&512&&(sr||u===null||Oa(u,u.return)),i.flags&32){b=i.stateNode;try{fl(b,"")}catch(Ce){gt(i,i.return,Ce)}}m&4&&i.stateNode!=null&&(b=i.memoizedProps,ov(i,b,u!==null?u.memoizedProps:b)),m&1024&&(uv=!0);break;case 6:if(on(o,i),ln(i),m&4){if(i.stateNode===null)throw Error(n(162));m=i.memoizedProps,u=i.stateNode;try{u.nodeValue=m}catch(Ce){gt(i,i.return,Ce)}}break;case 3:if(Dh=null,b=aa,aa=kh(o.containerInfo),on(o,i),aa=b,ln(i),m&4&&u!==null&&u.memoizedState.isDehydrated)try{Fl(o.containerInfo)}catch(Ce){gt(i,i.return,Ce)}uv&&(uv=!1,MN(i));break;case 4:m=aa,aa=kh(i.stateNode.containerInfo),on(o,i),ln(i),aa=m;break;case 12:on(o,i),ln(i);break;case 31:on(o,i),ln(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,yh(i,m)));break;case 13:on(o,i),ln(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(bh=Oe()),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,yh(i,m)));break;case 22:b=i.memoizedState!==null;var L=u!==null&&u.memoizedState!==null,J=ri,ce=sr;if(ri=J||b,sr=ce||L,on(o,i),sr=ce,ri=J,ln(i),m&8192)e:for(o=i.stateNode,o._visibility=b?o._visibility&-2:o._visibility|1,b&&(u===null||L||ri||sr||so(i)),u=null,o=i;;){if(o.tag===5||o.tag===26){if(u===null){L=u=o;try{if(w=L.stateNode,b)A=w.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{k=L.stateNode;var me=L.memoizedProps.style,ee=me!=null&&me.hasOwnProperty("display")?me.display:null;k.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(Ce){gt(L,L.return,Ce)}}}else if(o.tag===6){if(u===null){L=o;try{L.stateNode.nodeValue=b?"":L.memoizedProps}catch(Ce){gt(L,L.return,Ce)}}}else if(o.tag===18){if(u===null){L=o;try{var ne=L.stateNode;b?SO(ne,!0):SO(L.stateNode,!1)}catch(Ce){gt(L,L.return,Ce)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=i.updateQueue,m!==null&&(u=m.retryQueue,u!==null&&(m.retryQueue=null,yh(i,u))));break;case 19:on(o,i),ln(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,yh(i,m)));break;case 30:break;case 21:break;default:on(o,i),ln(i)}}function ln(i){var o=i.flags;if(o&2){try{for(var u,m=i.return;m!==null;){if(NN(m)){u=m;break}m=m.return}if(u==null)throw Error(n(160));switch(u.tag){case 27:var b=u.stateNode,w=lv(i);gh(i,w,b);break;case 5:var A=u.stateNode;u.flags&32&&(fl(A,""),u.flags&=-33);var k=lv(i);gh(i,k,A);break;case 3:case 4:var L=u.stateNode.containerInfo,J=lv(i);cv(i,J,L);break;default:throw Error(n(161))}}catch(ce){gt(i,i.return,ce)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function MN(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;MN(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function ai(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)AN(i,o.alternate,o),o=o.sibling}function so(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:es(4,o,o.return),so(o);break;case 1:Oa(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&SN(o,o.return,u),so(o);break;case 27:Lu(o.stateNode);case 26:case 5:Oa(o,o.return),so(o);break;case 22:o.memoizedState===null&&so(o);break;case 30:so(o);break;default:so(o)}i=i.sibling}}function ii(i,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,b=i,w=o,A=w.flags;switch(w.tag){case 0:case 11:case 15:ii(b,w,u),Eu(4,w);break;case 1:if(ii(b,w,u),m=w,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(J){gt(m,m.return,J)}if(m=w,b=m.updateQueue,b!==null){var k=m.stateNode;try{var L=b.shared.hiddenCallbacks;if(L!==null)for(b.shared.hiddenCallbacks=null,b=0;b<L.length;b++)d_(L[b],k)}catch(J){gt(m,m.return,J)}}u&&A&64&&jN(w),Au(w,w.return);break;case 27:ON(w);case 26:case 5:ii(b,w,u),u&&m===null&&A&4&&_N(w),Au(w,w.return);break;case 12:ii(b,w,u);break;case 31:ii(b,w,u),u&&A&4&&kN(b,w);break;case 13:ii(b,w,u),u&&A&4&&TN(b,w);break;case 22:w.memoizedState===null&&ii(b,w,u),Au(w,w.return);break;case 30:break;default:ii(b,w,u)}o=o.sibling}}function dv(i,o){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&mu(u))}function fv(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&mu(i))}function ia(i,o,u,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)RN(i,o,u,m),o=o.sibling}function RN(i,o,u,m){var b=o.flags;switch(o.tag){case 0:case 11:case 15:ia(i,o,u,m),b&2048&&Eu(9,o);break;case 1:ia(i,o,u,m);break;case 3:ia(i,o,u,m),b&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&mu(i)));break;case 12:if(b&2048){ia(i,o,u,m),i=o.stateNode;try{var w=o.memoizedProps,A=w.id,k=w.onPostCommit;typeof k=="function"&&k(A,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(L){gt(o,o.return,L)}}else ia(i,o,u,m);break;case 31:ia(i,o,u,m);break;case 13:ia(i,o,u,m);break;case 23:break;case 22:w=o.stateNode,A=o.alternate,o.memoizedState!==null?w._visibility&2?ia(i,o,u,m):Cu(i,o):w._visibility&2?ia(i,o,u,m):(w._visibility|=2,Tl(i,o,u,m,(o.subtreeFlags&10256)!==0||!1)),b&2048&&dv(A,o);break;case 24:ia(i,o,u,m),b&2048&&fv(o.alternate,o);break;default:ia(i,o,u,m)}}function Tl(i,o,u,m,b){for(b=b&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var w=i,A=o,k=u,L=m,J=A.flags;switch(A.tag){case 0:case 11:case 15:Tl(w,A,k,L,b),Eu(8,A);break;case 23:break;case 22:var ce=A.stateNode;A.memoizedState!==null?ce._visibility&2?Tl(w,A,k,L,b):Cu(w,A):(ce._visibility|=2,Tl(w,A,k,L,b)),b&&J&2048&&dv(A.alternate,A);break;case 24:Tl(w,A,k,L,b),b&&J&2048&&fv(A.alternate,A);break;default:Tl(w,A,k,L,b)}o=o.sibling}}function Cu(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=i,m=o,b=m.flags;switch(m.tag){case 22:Cu(u,m),b&2048&&dv(m.alternate,m);break;case 24:Cu(u,m),b&2048&&fv(m.alternate,m);break;default:Cu(u,m)}o=o.sibling}}var Pu=8192;function Dl(i,o,u){if(i.subtreeFlags&Pu)for(i=i.child;i!==null;)IN(i,o,u),i=i.sibling}function IN(i,o,u){switch(i.tag){case 26:Dl(i,o,u),i.flags&Pu&&i.memoizedState!==null&&qL(u,aa,i.memoizedState,i.memoizedProps);break;case 5:Dl(i,o,u);break;case 3:case 4:var m=aa;aa=kh(i.stateNode.containerInfo),Dl(i,o,u),aa=m;break;case 22:i.memoizedState===null&&(m=i.alternate,m!==null&&m.memoizedState!==null?(m=Pu,Pu=16777216,Dl(i,o,u),Pu=m):Dl(i,o,u));break;default:Dl(i,o,u)}}function LN(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function ku(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var m=o[u];wr=m,$N(m,i)}LN(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)BN(i),i=i.sibling}function BN(i){switch(i.tag){case 0:case 11:case 15:ku(i),i.flags&2048&&es(9,i,i.return);break;case 3:ku(i);break;case 12:ku(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,vh(i)):ku(i);break;default:ku(i)}}function vh(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var m=o[u];wr=m,$N(m,i)}LN(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:es(8,o,o.return),vh(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,vh(o));break;default:vh(o)}i=i.sibling}}function $N(i,o){for(;wr!==null;){var u=wr;switch(u.tag){case 0:case 11:case 15:es(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var m=u.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:mu(u.memoizedState.cache)}if(m=u.child,m!==null)m.return=u,wr=m;else e:for(u=i;wr!==null;){m=wr;var b=m.sibling,w=m.return;if(CN(m),m===u){wr=null;break e}if(b!==null){b.return=w,wr=b;break e}wr=w}}}var nL={getCacheForType:function(i){var o=Mr(nr),u=o.data.get(i);return u===void 0&&(u=i(),o.data.set(i,u)),u},cacheSignal:function(){return Mr(nr).controller.signal}},aL=typeof WeakMap=="function"?WeakMap:Map,ut=0,Ot=null,Xe=null,Je=0,pt=0,Sn=null,ts=!1,Ml=!1,hv=!1,si=0,Gt=0,rs=0,oo=0,mv=0,_n=0,Rl=0,Tu=null,cn=null,pv=!1,bh=0,UN=0,xh=1/0,wh=null,ns=null,hr=0,as=null,Il=null,oi=0,gv=0,yv=null,zN=null,Du=0,vv=null;function Nn(){return(ut&2)!==0&&Je!==0?Je&-Je:I.T!==null?_v():nS()}function qN(){if(_n===0)if((Je&536870912)===0||tt){var i=Cf;Cf<<=1,(Cf&3932160)===0&&(Cf=262144),_n=i}else _n=536870912;return i=wn.current,i!==null&&(i.flags|=32),_n}function un(i,o,u){(i===Ot&&(pt===2||pt===9)||i.cancelPendingCommit!==null)&&(Ll(i,0),is(i,Je,_n,!1)),eu(i,u),((ut&2)===0||i!==Ot)&&(i===Ot&&((ut&2)===0&&(oo|=u),Gt===4&&is(i,Je,_n,!1)),Ea(i))}function FN(i,o,u){if((ut&6)!==0)throw Error(n(327));var m=!u&&(o&127)===0&&(o&i.expiredLanes)===0||Jc(i,o),b=m?oL(i,o):xv(i,o,!0),w=m;do{if(b===0){Ml&&!m&&is(i,o,0,!1);break}else{if(u=i.current.alternate,w&&!iL(u)){b=xv(i,o,!1),w=!1;continue}if(b===2){if(w=o,i.errorRecoveryDisabledLanes&w)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var k=i;b=Tu;var L=k.current.memoizedState.isDehydrated;if(L&&(Ll(k,A).flags|=256),A=xv(k,A,!1),A!==2){if(hv&&!L){k.errorRecoveryDisabledLanes|=w,oo|=w,b=4;break e}w=cn,cn=b,w!==null&&(cn===null?cn=w:cn.push.apply(cn,w))}b=A}if(w=!1,b!==2)continue}}if(b===1){Ll(i,0),is(i,o,0,!0);break}e:{switch(m=i,w=b,w){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:is(m,o,_n,!ts);break e;case 2:cn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(b=bh+300-Oe(),10<b)){if(is(m,o,_n,!ts),kf(m,0,!0)!==0)break e;oi=o,m.timeoutHandle=xO(KN.bind(null,m,u,cn,wh,pv,o,_n,oo,Rl,ts,w,"Throttled",-0,0),b);break e}KN(m,u,cn,wh,pv,o,_n,oo,Rl,ts,w,null,-0,0)}}break}while(!0);Ea(i)}function KN(i,o,u,m,b,w,A,k,L,J,ce,me,ee,ne){if(i.timeoutHandle=-1,me=o.subtreeFlags,me&8192||(me&16785408)===16785408){me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ha},IN(o,w,me);var Ce=(w&62914560)===w?bh-Oe():(w&4194048)===w?UN-Oe():0;if(Ce=FL(me,Ce),Ce!==null){oi=w,i.cancelPendingCommit=Ce(ZN.bind(null,i,o,w,u,m,b,A,k,L,ce,me,null,ee,ne)),is(i,w,A,!J);return}}ZN(i,o,w,u,m,b,A,k,L)}function iL(i){for(var o=i;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var m=0;m<u.length;m++){var b=u[m],w=b.getSnapshot;b=b.value;try{if(!bn(w(),b))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function is(i,o,u,m){o&=~mv,o&=~oo,i.suspendedLanes|=o,i.pingedLanes&=~o,m&&(i.warmLanes|=o),m=i.expirationTimes;for(var b=o;0<b;){var w=31-vn(b),A=1<<w;m[w]=-1,b&=~A}u!==0&&eS(i,u,o)}function jh(){return(ut&6)===0?(Mu(0),!1):!0}function bv(){if(Xe!==null){if(pt===0)var i=Xe.return;else i=Xe,Wa=Zs=null,Ry(i),El=null,gu=0,i=Xe;for(;i!==null;)wN(i.alternate,i),i=i.return;Xe=null}}function Ll(i,o){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,NL(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),oi=0,bv(),Ot=i,Xe=u=Ga(i.current,null),Je=o,pt=0,Sn=null,ts=!1,Ml=Jc(i,o),hv=!1,Rl=_n=mv=oo=rs=Gt=0,cn=Tu=null,pv=!1,(o&8)!==0&&(o|=o&32);var m=i.entangledLanes;if(m!==0)for(i=i.entanglements,m&=o;0<m;){var b=31-vn(m),w=1<<b;o|=i[b],m&=~w}return si=o,Ff(),u}function QN(i,o){Qe=null,I.H=_u,o===Ol||o===Xf?(o=o_(),pt=3):o===Sy?(o=o_(),pt=4):pt=o===Xy?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Sn=o,Xe===null&&(Gt=1,dh(i,$n(o,i.current)))}function HN(){var i=wn.current;return i===null?!0:(Je&4194048)===Je?Fn===null:(Je&62914560)===Je||(Je&536870912)!==0?i===Fn:!1}function VN(){var i=I.H;return I.H=_u,i===null?_u:i}function GN(){var i=I.A;return I.A=nL,i}function Sh(){Gt=4,ts||(Je&4194048)!==Je&&wn.current!==null||(Ml=!0),(rs&134217727)===0&&(oo&134217727)===0||Ot===null||is(Ot,Je,_n,!1)}function xv(i,o,u){var m=ut;ut|=2;var b=VN(),w=GN();(Ot!==i||Je!==o)&&(wh=null,Ll(i,o)),o=!1;var A=Gt;e:do try{if(pt!==0&&Xe!==null){var k=Xe,L=Sn;switch(pt){case 8:bv(),A=6;break e;case 3:case 2:case 9:case 6:wn.current===null&&(o=!0);var J=pt;if(pt=0,Sn=null,Bl(i,k,L,J),u&&Ml){A=0;break e}break;default:J=pt,pt=0,Sn=null,Bl(i,k,L,J)}}sL(),A=Gt;break}catch(ce){QN(i,ce)}while(!0);return o&&i.shellSuspendCounter++,Wa=Zs=null,ut=m,I.H=b,I.A=w,Xe===null&&(Ot=null,Je=0,Ff()),A}function sL(){for(;Xe!==null;)YN(Xe)}function oL(i,o){var u=ut;ut|=2;var m=VN(),b=GN();Ot!==i||Je!==o?(wh=null,xh=Oe()+500,Ll(i,o)):Ml=Jc(i,o);e:do try{if(pt!==0&&Xe!==null){o=Xe;var w=Sn;t:switch(pt){case 1:pt=0,Sn=null,Bl(i,o,w,1);break;case 2:case 9:if(i_(w)){pt=0,Sn=null,WN(o);break}o=function(){pt!==2&&pt!==9||Ot!==i||(pt=7),Ea(i)},w.then(o,o);break e;case 3:pt=7;break e;case 4:pt=5;break e;case 7:i_(w)?(pt=0,Sn=null,WN(o)):(pt=0,Sn=null,Bl(i,o,w,7));break;case 5:var A=null;switch(Xe.tag){case 26:A=Xe.memoizedState;case 5:case 27:var k=Xe;if(A?RO(A):k.stateNode.complete){pt=0,Sn=null;var L=k.sibling;if(L!==null)Xe=L;else{var J=k.return;J!==null?(Xe=J,_h(J)):Xe=null}break t}}pt=0,Sn=null,Bl(i,o,w,5);break;case 6:pt=0,Sn=null,Bl(i,o,w,6);break;case 8:bv(),Gt=6;break e;default:throw Error(n(462))}}lL();break}catch(ce){QN(i,ce)}while(!0);return Wa=Zs=null,I.H=m,I.A=b,ut=u,Xe!==null?0:(Ot=null,Je=0,Ff(),Gt)}function lL(){for(;Xe!==null&&!Kt();)YN(Xe)}function YN(i){var o=bN(i.alternate,i,si);i.memoizedProps=i.pendingProps,o===null?_h(i):Xe=o}function WN(i){var o=i,u=o.alternate;switch(o.tag){case 15:case 0:o=hN(u,o,o.pendingProps,o.type,void 0,Je);break;case 11:o=hN(u,o,o.pendingProps,o.type.render,o.ref,Je);break;case 5:Ry(o);default:wN(u,o),o=Xe=GS(o,si),o=bN(u,o,si)}i.memoizedProps=i.pendingProps,o===null?_h(i):Xe=o}function Bl(i,o,u,m){Wa=Zs=null,Ry(o),El=null,gu=0;var b=o.return;try{if(W3(i,b,o,u,Je)){Gt=1,dh(i,$n(u,i.current)),Xe=null;return}}catch(w){if(b!==null)throw Xe=b,w;Gt=1,dh(i,$n(u,i.current)),Xe=null;return}o.flags&32768?(tt||m===1?i=!0:Ml||(Je&536870912)!==0?i=!1:(ts=i=!0,(m===2||m===9||m===3||m===6)&&(m=wn.current,m!==null&&m.tag===13&&(m.flags|=16384))),XN(o,i)):_h(o)}function _h(i){var o=i;do{if((o.flags&32768)!==0){XN(o,ts);return}i=o.return;var u=J3(o.alternate,o,si);if(u!==null){Xe=u;return}if(o=o.sibling,o!==null){Xe=o;return}Xe=o=i}while(o!==null);Gt===0&&(Gt=5)}function XN(i,o){do{var u=eL(i.alternate,i);if(u!==null){u.flags&=32767,Xe=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(i=i.sibling,i!==null)){Xe=i;return}Xe=i=u}while(i!==null);Gt=6,Xe=null}function ZN(i,o,u,m,b,w,A,k,L){i.cancelPendingCommit=null;do Nh();while(hr!==0);if((ut&6)!==0)throw Error(n(327));if(o!==null){if(o===i.current)throw Error(n(177));if(w=o.lanes|o.childLanes,w|=ly,z5(i,u,w,A,k,L),i===Ot&&(Xe=Ot=null,Je=0),Il=o,as=i,oi=u,gv=w,yv=b,zN=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,fL(Pr,function(){return nO(),null})):(i.callbackNode=null,i.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=I.T,I.T=null,b=V.p,V.p=2,A=ut,ut|=4;try{tL(i,o,u)}finally{ut=A,V.p=b,I.T=m}}hr=1,JN(),eO(),tO()}}function JN(){if(hr===1){hr=0;var i=as,o=Il,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=I.T,I.T=null;var m=V.p;V.p=2;var b=ut;ut|=4;try{DN(o,i);var w=Tv,A=$S(i.containerInfo),k=w.focusedElem,L=w.selectionRange;if(A!==k&&k&&k.ownerDocument&&BS(k.ownerDocument.documentElement,k)){if(L!==null&&ny(k)){var J=L.start,ce=L.end;if(ce===void 0&&(ce=J),"selectionStart"in k)k.selectionStart=J,k.selectionEnd=Math.min(ce,k.value.length);else{var me=k.ownerDocument||document,ee=me&&me.defaultView||window;if(ee.getSelection){var ne=ee.getSelection(),Ce=k.textContent.length,Le=Math.min(L.start,Ce),St=L.end===void 0?Le:Math.min(L.end,Ce);!ne.extend&&Le>St&&(A=St,St=Le,Le=A);var H=LS(k,Le),F=LS(k,St);if(H&&F&&(ne.rangeCount!==1||ne.anchorNode!==H.node||ne.anchorOffset!==H.offset||ne.focusNode!==F.node||ne.focusOffset!==F.offset)){var Z=me.createRange();Z.setStart(H.node,H.offset),ne.removeAllRanges(),Le>St?(ne.addRange(Z),ne.extend(F.node,F.offset)):(Z.setEnd(F.node,F.offset),ne.addRange(Z))}}}}for(me=[],ne=k;ne=ne.parentNode;)ne.nodeType===1&&me.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<me.length;k++){var de=me[k];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}Lh=!!kv,Tv=kv=null}finally{ut=b,V.p=m,I.T=u}}i.current=o,hr=2}}function eO(){if(hr===2){hr=0;var i=as,o=Il,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=I.T,I.T=null;var m=V.p;V.p=2;var b=ut;ut|=4;try{AN(i,o.alternate,o)}finally{ut=b,V.p=m,I.T=u}}hr=3}}function tO(){if(hr===4||hr===3){hr=0,te();var i=as,o=Il,u=oi,m=zN;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?hr=5:(hr=0,Il=as=null,rO(i,i.pendingLanes));var b=i.pendingLanes;if(b===0&&(ns=null),Bg(u),o=o.stateNode,fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(kr,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=I.T,b=V.p,V.p=2,I.T=null;try{for(var w=i.onRecoverableError,A=0;A<m.length;A++){var k=m[A];w(k.value,{componentStack:k.stack})}}finally{I.T=o,V.p=b}}(oi&3)!==0&&Nh(),Ea(i),b=i.pendingLanes,(u&261930)!==0&&(b&42)!==0?i===vv?Du++:(Du=0,vv=i):Du=0,Mu(0)}}function rO(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,mu(o)))}function Nh(){return JN(),eO(),tO(),nO()}function nO(){if(hr!==5)return!1;var i=as,o=gv;gv=0;var u=Bg(oi),m=I.T,b=V.p;try{V.p=32>u?32:u,I.T=null,u=yv,yv=null;var w=as,A=oi;if(hr=0,Il=as=null,oi=0,(ut&6)!==0)throw Error(n(331));var k=ut;if(ut|=4,BN(w.current),RN(w,w.current,A,u),ut=k,Mu(0,!1),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(kr,w)}catch{}return!0}finally{V.p=b,I.T=m,rO(i,o)}}function aO(i,o,u){o=$n(u,o),o=Wy(i.stateNode,o,2),i=Xi(i,o,2),i!==null&&(eu(i,2),Ea(i))}function gt(i,o,u){if(i.tag===3)aO(i,i,u);else for(;o!==null;){if(o.tag===3){aO(o,i,u);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(ns===null||!ns.has(m))){i=$n(u,i),u=iN(2),m=Xi(o,u,2),m!==null&&(sN(u,m,o,i),eu(m,2),Ea(m));break}}o=o.return}}function wv(i,o,u){var m=i.pingCache;if(m===null){m=i.pingCache=new aL;var b=new Set;m.set(o,b)}else b=m.get(o),b===void 0&&(b=new Set,m.set(o,b));b.has(u)||(hv=!0,b.add(u),i=cL.bind(null,i,o,u),o.then(i,i))}function cL(i,o,u){var m=i.pingCache;m!==null&&m.delete(o),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,Ot===i&&(Je&u)===u&&(Gt===4||Gt===3&&(Je&62914560)===Je&&300>Oe()-bh?(ut&2)===0&&Ll(i,0):mv|=u,Rl===Je&&(Rl=0)),Ea(i)}function iO(i,o){o===0&&(o=Jj()),i=Ys(i,o),i!==null&&(eu(i,o),Ea(i))}function uL(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),iO(i,u)}function dL(i,o){var u=0;switch(i.tag){case 31:case 13:var m=i.stateNode,b=i.memoizedState;b!==null&&(u=b.retryLane);break;case 19:m=i.stateNode;break;case 22:m=i.stateNode._retryCache;break;default:throw Error(n(314))}m!==null&&m.delete(o),iO(i,u)}function fL(i,o){return oe(i,o)}var Oh=null,$l=null,jv=!1,Eh=!1,Sv=!1,ss=0;function Ea(i){i!==$l&&i.next===null&&($l===null?Oh=$l=i:$l=$l.next=i),Eh=!0,jv||(jv=!0,mL())}function Mu(i,o){if(!Sv&&Eh){Sv=!0;do for(var u=!1,m=Oh;m!==null;){if(i!==0){var b=m.pendingLanes;if(b===0)var w=0;else{var A=m.suspendedLanes,k=m.pingedLanes;w=(1<<31-vn(42|i)+1)-1,w&=b&~(A&~k),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(u=!0,cO(m,w))}else w=Je,w=kf(m,m===Ot?w:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(w&3)===0||Jc(m,w)||(u=!0,cO(m,w));m=m.next}while(u);Sv=!1}}function hL(){sO()}function sO(){Eh=jv=!1;var i=0;ss!==0&&_L()&&(i=ss);for(var o=Oe(),u=null,m=Oh;m!==null;){var b=m.next,w=oO(m,o);w===0?(m.next=null,u===null?Oh=b:u.next=b,b===null&&($l=u)):(u=m,(i!==0||(w&3)!==0)&&(Eh=!0)),m=b}hr!==0&&hr!==5||Mu(i),ss!==0&&(ss=0)}function oO(i,o){for(var u=i.suspendedLanes,m=i.pingedLanes,b=i.expirationTimes,w=i.pendingLanes&-62914561;0<w;){var A=31-vn(w),k=1<<A,L=b[A];L===-1?((k&u)===0||(k&m)!==0)&&(b[A]=U5(k,o)):L<=o&&(i.expiredLanes|=k),w&=~k}if(o=Ot,u=Je,u=kf(i,i===o?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m=i.callbackNode,u===0||i===o&&(pt===2||pt===9)||i.cancelPendingCommit!==null)return m!==null&&m!==null&&dt(m),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||Jc(i,u)){if(o=u&-u,o===i.callbackPriority)return o;switch(m!==null&&dt(m),Bg(u)){case 2:case 8:u=qr;break;case 32:u=Pr;break;case 268435456:u=Rn;break;default:u=Pr}return m=lO.bind(null,i),u=oe(u,m),i.callbackPriority=o,i.callbackNode=u,o}return m!==null&&m!==null&&dt(m),i.callbackPriority=2,i.callbackNode=null,2}function lO(i,o){if(hr!==0&&hr!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(Nh()&&i.callbackNode!==u)return null;var m=Je;return m=kf(i,i===Ot?m:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m===0?null:(FN(i,m,o),oO(i,Oe()),i.callbackNode!=null&&i.callbackNode===u?lO.bind(null,i):null)}function cO(i,o){if(Nh())return null;FN(i,o,!0)}function mL(){OL(function(){(ut&6)!==0?oe(mt,hL):sO()})}function _v(){if(ss===0){var i=_l;i===0&&(i=Af,Af<<=1,(Af&261888)===0&&(Af=256)),ss=i}return ss}function uO(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Rf(""+i)}function dO(i,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,i.id&&u.setAttribute("form",i.id),o.parentNode.insertBefore(u,o),i=new FormData(i),u.parentNode.removeChild(u),i}function pL(i,o,u,m,b){if(o==="submit"&&u&&u.stateNode===b){var w=uO((b[nn]||null).action),A=m.submitter;A&&(o=(o=A[nn]||null)?uO(o.formAction):A.getAttribute("formAction"),o!==null&&(w=o,A=null));var k=new $f("action","action",null,m,b);i.push({event:k,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(ss!==0){var L=A?dO(b,A):new FormData(b);Ky(u,{pending:!0,data:L,method:b.method,action:w},null,L)}}else typeof w=="function"&&(k.preventDefault(),L=A?dO(b,A):new FormData(b),Ky(u,{pending:!0,data:L,method:b.method,action:w},w,L))},currentTarget:b}]})}}for(var Nv=0;Nv<oy.length;Nv++){var Ov=oy[Nv],gL=Ov.toLowerCase(),yL=Ov[0].toUpperCase()+Ov.slice(1);na(gL,"on"+yL)}na(qS,"onAnimationEnd"),na(FS,"onAnimationIteration"),na(KS,"onAnimationStart"),na("dblclick","onDoubleClick"),na("focusin","onFocus"),na("focusout","onBlur"),na(D3,"onTransitionRun"),na(M3,"onTransitionStart"),na(R3,"onTransitionCancel"),na(QS,"onTransitionEnd"),ul("onMouseEnter",["mouseout","mouseover"]),ul("onMouseLeave",["mouseout","mouseover"]),ul("onPointerEnter",["pointerout","pointerover"]),ul("onPointerLeave",["pointerout","pointerover"]),Qs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ru));function fO(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var m=i[u],b=m.event;m=m.listeners;e:{var w=void 0;if(o)for(var A=m.length-1;0<=A;A--){var k=m[A],L=k.instance,J=k.currentTarget;if(k=k.listener,L!==w&&b.isPropagationStopped())break e;w=k,b.currentTarget=J;try{w(b)}catch(ce){qf(ce)}b.currentTarget=null,w=L}else for(A=0;A<m.length;A++){if(k=m[A],L=k.instance,J=k.currentTarget,k=k.listener,L!==w&&b.isPropagationStopped())break e;w=k,b.currentTarget=J;try{w(b)}catch(ce){qf(ce)}b.currentTarget=null,w=L}}}}function Ze(i,o){var u=o[$g];u===void 0&&(u=o[$g]=new Set);var m=i+"__bubble";u.has(m)||(hO(o,i,2,!1),u.add(m))}function Ev(i,o,u){var m=0;o&&(m|=4),hO(u,i,m,o)}var Ah="_reactListening"+Math.random().toString(36).slice(2);function Av(i){if(!i[Ah]){i[Ah]=!0,sS.forEach(function(u){u!=="selectionchange"&&(vL.has(u)||Ev(u,!1,i),Ev(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Ah]||(o[Ah]=!0,Ev("selectionchange",!1,o))}}function hO(i,o,u,m){switch(qO(o)){case 2:var b=HL;break;case 8:b=VL;break;default:b=Fv}u=b.bind(null,o,u,i),b=void 0,!Gg||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(b=!0),m?b!==void 0?i.addEventListener(o,u,{capture:!0,passive:b}):i.addEventListener(o,u,!0):b!==void 0?i.addEventListener(o,u,{passive:b}):i.addEventListener(o,u,!1)}function Cv(i,o,u,m,b){var w=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var A=m.tag;if(A===3||A===4){var k=m.stateNode.containerInfo;if(k===b)break;if(A===4)for(A=m.return;A!==null;){var L=A.tag;if((L===3||L===4)&&A.stateNode.containerInfo===b)return;A=A.return}for(;k!==null;){if(A=ol(k),A===null)return;if(L=A.tag,L===5||L===6||L===26||L===27){m=w=A;continue e}k=k.parentNode}}m=m.return}vS(function(){var J=w,ce=Hg(u),me=[];e:{var ee=HS.get(i);if(ee!==void 0){var ne=$f,Ce=i;switch(i){case"keypress":if(Lf(u)===0)break e;case"keydown":case"keyup":ne=d3;break;case"focusin":Ce="focus",ne=Zg;break;case"focusout":Ce="blur",ne=Zg;break;case"beforeblur":case"afterblur":ne=Zg;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=wS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=J5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=m3;break;case qS:case FS:case KS:ne=r3;break;case QS:ne=g3;break;case"scroll":case"scrollend":ne=X5;break;case"wheel":ne=v3;break;case"copy":case"cut":case"paste":ne=a3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=SS;break;case"toggle":case"beforetoggle":ne=x3}var Le=(o&4)!==0,St=!Le&&(i==="scroll"||i==="scrollend"),H=Le?ee!==null?ee+"Capture":null:ee;Le=[];for(var F=J,Z;F!==null;){var de=F;if(Z=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||Z===null||H===null||(de=nu(F,H),de!=null&&Le.push(Iu(F,de,Z))),St)break;F=F.return}0<Le.length&&(ee=new ne(ee,Ce,null,u,ce),me.push({event:ee,listeners:Le}))}}if((o&7)===0){e:{if(ee=i==="mouseover"||i==="pointerover",ne=i==="mouseout"||i==="pointerout",ee&&u!==Qg&&(Ce=u.relatedTarget||u.fromElement)&&(ol(Ce)||Ce[sl]))break e;if((ne||ee)&&(ee=ce.window===ce?ce:(ee=ce.ownerDocument)?ee.defaultView||ee.parentWindow:window,ne?(Ce=u.relatedTarget||u.toElement,ne=J,Ce=Ce?ol(Ce):null,Ce!==null&&(St=s(Ce),Le=Ce.tag,Ce!==St||Le!==5&&Le!==27&&Le!==6)&&(Ce=null)):(ne=null,Ce=J),ne!==Ce)){if(Le=wS,de="onMouseLeave",H="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(Le=SS,de="onPointerLeave",H="onPointerEnter",F="pointer"),St=ne==null?ee:ru(ne),Z=Ce==null?ee:ru(Ce),ee=new Le(de,F+"leave",ne,u,ce),ee.target=St,ee.relatedTarget=Z,de=null,ol(ce)===J&&(Le=new Le(H,F+"enter",Ce,u,ce),Le.target=Z,Le.relatedTarget=St,de=Le),St=de,ne&&Ce)t:{for(Le=bL,H=ne,F=Ce,Z=0,de=H;de;de=Le(de))Z++;de=0;for(var Re=F;Re;Re=Le(Re))de++;for(;0<Z-de;)H=Le(H),Z--;for(;0<de-Z;)F=Le(F),de--;for(;Z--;){if(H===F||F!==null&&H===F.alternate){Le=H;break t}H=Le(H),F=Le(F)}Le=null}else Le=null;ne!==null&&mO(me,ee,ne,Le,!1),Ce!==null&&St!==null&&mO(me,St,Ce,Le,!0)}}e:{if(ee=J?ru(J):window,ne=ee.nodeName&&ee.nodeName.toLowerCase(),ne==="select"||ne==="input"&&ee.type==="file")var it=kS;else if(CS(ee))if(TS)it=P3;else{it=A3;var ke=E3}else ne=ee.nodeName,!ne||ne.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?J&&Kg(J.elementType)&&(it=kS):it=C3;if(it&&(it=it(i,J))){PS(me,it,u,ce);break e}ke&&ke(i,ee,J),i==="focusout"&&J&&ee.type==="number"&&J.memoizedProps.value!=null&&Fg(ee,"number",ee.value)}switch(ke=J?ru(J):window,i){case"focusin":(CS(ke)||ke.contentEditable==="true")&&(gl=ke,ay=J,du=null);break;case"focusout":du=ay=gl=null;break;case"mousedown":iy=!0;break;case"contextmenu":case"mouseup":case"dragend":iy=!1,US(me,u,ce);break;case"selectionchange":if(T3)break;case"keydown":case"keyup":US(me,u,ce)}var Ve;if(ey)e:{switch(i){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else pl?ES(i,u)&&(et="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(et="onCompositionStart");et&&(_S&&u.locale!=="ko"&&(pl||et!=="onCompositionStart"?et==="onCompositionEnd"&&pl&&(Ve=bS()):(Ki=ce,Yg="value"in Ki?Ki.value:Ki.textContent,pl=!0)),ke=Ch(J,et),0<ke.length&&(et=new jS(et,i,null,u,ce),me.push({event:et,listeners:ke}),Ve?et.data=Ve:(Ve=AS(u),Ve!==null&&(et.data=Ve)))),(Ve=j3?S3(i,u):_3(i,u))&&(et=Ch(J,"onBeforeInput"),0<et.length&&(ke=new jS("onBeforeInput","beforeinput",null,u,ce),me.push({event:ke,listeners:et}),ke.data=Ve)),pL(me,i,J,u,ce)}fO(me,o)})}function Iu(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Ch(i,o){for(var u=o+"Capture",m=[];i!==null;){var b=i,w=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||w===null||(b=nu(i,u),b!=null&&m.unshift(Iu(i,b,w)),b=nu(i,o),b!=null&&m.push(Iu(i,b,w))),i.tag===3)return m;i=i.return}return[]}function bL(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function mO(i,o,u,m,b){for(var w=o._reactName,A=[];u!==null&&u!==m;){var k=u,L=k.alternate,J=k.stateNode;if(k=k.tag,L!==null&&L===m)break;k!==5&&k!==26&&k!==27||J===null||(L=J,b?(J=nu(u,w),J!=null&&A.unshift(Iu(u,J,L))):b||(J=nu(u,w),J!=null&&A.push(Iu(u,J,L)))),u=u.return}A.length!==0&&i.push({event:o,listeners:A})}var xL=/\r\n?/g,wL=/\u0000|\uFFFD/g;function pO(i){return(typeof i=="string"?i:""+i).replace(xL,`
`).replace(wL,"")}function gO(i,o){return o=pO(o),pO(i)===o}function jt(i,o,u,m,b,w){switch(u){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||fl(i,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&fl(i,""+m);break;case"className":Df(i,"class",m);break;case"tabIndex":Df(i,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Df(i,u,m);break;case"style":gS(i,m,w);break;case"data":if(o!=="object"){Df(i,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||u!=="href")){i.removeAttribute(u);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(u);break}m=Rf(""+m),i.setAttribute(u,m);break;case"action":case"formAction":if(typeof m=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(u==="formAction"?(o!=="input"&&jt(i,o,"name",b.name,b,null),jt(i,o,"formEncType",b.formEncType,b,null),jt(i,o,"formMethod",b.formMethod,b,null),jt(i,o,"formTarget",b.formTarget,b,null)):(jt(i,o,"encType",b.encType,b,null),jt(i,o,"method",b.method,b,null),jt(i,o,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(u);break}m=Rf(""+m),i.setAttribute(u,m);break;case"onClick":m!=null&&(i.onclick=Ha);break;case"onScroll":m!=null&&Ze("scroll",i);break;case"onScrollEnd":m!=null&&Ze("scrollend",i);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(u=m.__html,u!=null){if(b.children!=null)throw Error(n(60));i.innerHTML=u}}break;case"multiple":i.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":i.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){i.removeAttribute("xlink:href");break}u=Rf(""+m),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(u,""+m):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":m===!0?i.setAttribute(u,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(u,m):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?i.setAttribute(u,m):i.removeAttribute(u);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?i.removeAttribute(u):i.setAttribute(u,m);break;case"popover":Ze("beforetoggle",i),Ze("toggle",i),Tf(i,"popover",m);break;case"xlinkActuate":Qa(i,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Qa(i,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Qa(i,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Qa(i,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Qa(i,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Qa(i,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Qa(i,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Qa(i,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Qa(i,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Tf(i,"is",m);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Y5.get(u)||u,Tf(i,u,m))}}function Pv(i,o,u,m,b,w){switch(u){case"style":gS(i,m,w);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(u=m.__html,u!=null){if(b.children!=null)throw Error(n(60));i.innerHTML=u}}break;case"children":typeof m=="string"?fl(i,m):(typeof m=="number"||typeof m=="bigint")&&fl(i,""+m);break;case"onScroll":m!=null&&Ze("scroll",i);break;case"onScrollEnd":m!=null&&Ze("scrollend",i);break;case"onClick":m!=null&&(i.onclick=Ha);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oS.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(b=u.endsWith("Capture"),o=u.slice(2,b?u.length-7:void 0),w=i[nn]||null,w=w!=null?w[u]:null,typeof w=="function"&&i.removeEventListener(o,w,b),typeof m=="function")){typeof w!="function"&&w!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(o,m,b);break e}u in i?i[u]=m:m===!0?i.setAttribute(u,""):Tf(i,u,m)}}}function Ir(i,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",i),Ze("load",i);var m=!1,b=!1,w;for(w in u)if(u.hasOwnProperty(w)){var A=u[w];if(A!=null)switch(w){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:jt(i,o,w,A,u,null)}}b&&jt(i,o,"srcSet",u.srcSet,u,null),m&&jt(i,o,"src",u.src,u,null);return;case"input":Ze("invalid",i);var k=w=A=b=null,L=null,J=null;for(m in u)if(u.hasOwnProperty(m)){var ce=u[m];if(ce!=null)switch(m){case"name":b=ce;break;case"type":A=ce;break;case"checked":L=ce;break;case"defaultChecked":J=ce;break;case"value":w=ce;break;case"defaultValue":k=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(n(137,o));break;default:jt(i,o,m,ce,u,null)}}fS(i,w,k,L,J,A,b,!1);return;case"select":Ze("invalid",i),m=A=w=null;for(b in u)if(u.hasOwnProperty(b)&&(k=u[b],k!=null))switch(b){case"value":w=k;break;case"defaultValue":A=k;break;case"multiple":m=k;default:jt(i,o,b,k,u,null)}o=w,u=A,i.multiple=!!m,o!=null?dl(i,!!m,o,!1):u!=null&&dl(i,!!m,u,!0);return;case"textarea":Ze("invalid",i),w=b=m=null;for(A in u)if(u.hasOwnProperty(A)&&(k=u[A],k!=null))switch(A){case"value":m=k;break;case"defaultValue":b=k;break;case"children":w=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(n(91));break;default:jt(i,o,A,k,u,null)}mS(i,m,b,w);return;case"option":for(L in u)if(u.hasOwnProperty(L)&&(m=u[L],m!=null))switch(L){case"selected":i.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:jt(i,o,L,m,u,null)}return;case"dialog":Ze("beforetoggle",i),Ze("toggle",i),Ze("cancel",i),Ze("close",i);break;case"iframe":case"object":Ze("load",i);break;case"video":case"audio":for(m=0;m<Ru.length;m++)Ze(Ru[m],i);break;case"image":Ze("error",i),Ze("load",i);break;case"details":Ze("toggle",i);break;case"embed":case"source":case"link":Ze("error",i),Ze("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in u)if(u.hasOwnProperty(J)&&(m=u[J],m!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:jt(i,o,J,m,u,null)}return;default:if(Kg(o)){for(ce in u)u.hasOwnProperty(ce)&&(m=u[ce],m!==void 0&&Pv(i,o,ce,m,u,void 0));return}}for(k in u)u.hasOwnProperty(k)&&(m=u[k],m!=null&&jt(i,o,k,m,u,null))}function jL(i,o,u,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,w=null,A=null,k=null,L=null,J=null,ce=null;for(ne in u){var me=u[ne];if(u.hasOwnProperty(ne)&&me!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":L=me;default:m.hasOwnProperty(ne)||jt(i,o,ne,null,m,me)}}for(var ee in m){var ne=m[ee];if(me=u[ee],m.hasOwnProperty(ee)&&(ne!=null||me!=null))switch(ee){case"type":w=ne;break;case"name":b=ne;break;case"checked":J=ne;break;case"defaultChecked":ce=ne;break;case"value":A=ne;break;case"defaultValue":k=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(n(137,o));break;default:ne!==me&&jt(i,o,ee,ne,m,me)}}qg(i,A,k,L,J,ce,w,b);return;case"select":ne=A=k=ee=null;for(w in u)if(L=u[w],u.hasOwnProperty(w)&&L!=null)switch(w){case"value":break;case"multiple":ne=L;default:m.hasOwnProperty(w)||jt(i,o,w,null,m,L)}for(b in m)if(w=m[b],L=u[b],m.hasOwnProperty(b)&&(w!=null||L!=null))switch(b){case"value":ee=w;break;case"defaultValue":k=w;break;case"multiple":A=w;default:w!==L&&jt(i,o,b,w,m,L)}o=k,u=A,m=ne,ee!=null?dl(i,!!u,ee,!1):!!m!=!!u&&(o!=null?dl(i,!!u,o,!0):dl(i,!!u,u?[]:"",!1));return;case"textarea":ne=ee=null;for(k in u)if(b=u[k],u.hasOwnProperty(k)&&b!=null&&!m.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:jt(i,o,k,null,m,b)}for(A in m)if(b=m[A],w=u[A],m.hasOwnProperty(A)&&(b!=null||w!=null))switch(A){case"value":ee=b;break;case"defaultValue":ne=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(n(91));break;default:b!==w&&jt(i,o,A,b,m,w)}hS(i,ee,ne);return;case"option":for(var Ce in u)if(ee=u[Ce],u.hasOwnProperty(Ce)&&ee!=null&&!m.hasOwnProperty(Ce))switch(Ce){case"selected":i.selected=!1;break;default:jt(i,o,Ce,null,m,ee)}for(L in m)if(ee=m[L],ne=u[L],m.hasOwnProperty(L)&&ee!==ne&&(ee!=null||ne!=null))switch(L){case"selected":i.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:jt(i,o,L,ee,m,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in u)ee=u[Le],u.hasOwnProperty(Le)&&ee!=null&&!m.hasOwnProperty(Le)&&jt(i,o,Le,null,m,ee);for(J in m)if(ee=m[J],ne=u[J],m.hasOwnProperty(J)&&ee!==ne&&(ee!=null||ne!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(n(137,o));break;default:jt(i,o,J,ee,m,ne)}return;default:if(Kg(o)){for(var St in u)ee=u[St],u.hasOwnProperty(St)&&ee!==void 0&&!m.hasOwnProperty(St)&&Pv(i,o,St,void 0,m,ee);for(ce in m)ee=m[ce],ne=u[ce],!m.hasOwnProperty(ce)||ee===ne||ee===void 0&&ne===void 0||Pv(i,o,ce,ee,m,ne);return}}for(var H in u)ee=u[H],u.hasOwnProperty(H)&&ee!=null&&!m.hasOwnProperty(H)&&jt(i,o,H,null,m,ee);for(me in m)ee=m[me],ne=u[me],!m.hasOwnProperty(me)||ee===ne||ee==null&&ne==null||jt(i,o,me,ee,m,ne)}function yO(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function SL(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,u=performance.getEntriesByType("resource"),m=0;m<u.length;m++){var b=u[m],w=b.transferSize,A=b.initiatorType,k=b.duration;if(w&&k&&yO(A)){for(A=0,k=b.responseEnd,m+=1;m<u.length;m++){var L=u[m],J=L.startTime;if(J>k)break;var ce=L.transferSize,me=L.initiatorType;ce&&yO(me)&&(L=L.responseEnd,A+=ce*(L<k?1:(k-J)/(L-J)))}if(--m,o+=8*(w+A)/(b.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var kv=null,Tv=null;function Ph(i){return i.nodeType===9?i:i.ownerDocument}function vO(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bO(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Dv(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Mv=null;function _L(){var i=window.event;return i&&i.type==="popstate"?i===Mv?!1:(Mv=i,!0):(Mv=null,!1)}var xO=typeof setTimeout=="function"?setTimeout:void 0,NL=typeof clearTimeout=="function"?clearTimeout:void 0,wO=typeof Promise=="function"?Promise:void 0,OL=typeof queueMicrotask=="function"?queueMicrotask:typeof wO<"u"?function(i){return wO.resolve(null).then(i).catch(EL)}:xO;function EL(i){setTimeout(function(){throw i})}function os(i){return i==="head"}function jO(i,o){var u=o,m=0;do{var b=u.nextSibling;if(i.removeChild(u),b&&b.nodeType===8)if(u=b.data,u==="/$"||u==="/&"){if(m===0){i.removeChild(b),Fl(o);return}m--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")m++;else if(u==="html")Lu(i.ownerDocument.documentElement);else if(u==="head"){u=i.ownerDocument.head,Lu(u);for(var w=u.firstChild;w;){var A=w.nextSibling,k=w.nodeName;w[tu]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&w.rel.toLowerCase()==="stylesheet"||u.removeChild(w),w=A}}else u==="body"&&Lu(i.ownerDocument.body);u=b}while(u);Fl(o)}function SO(i,o){var u=i;i=0;do{var m=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(i===0)break;i--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||i++;u=m}while(u)}function Rv(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Rv(u),Ug(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function AL(i,o,u,m){for(;i.nodeType===1;){var b=u;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(m){if(!i[tu])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(w=i.getAttribute("rel"),w==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(w!==b.rel||i.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||i.getAttribute("title")!==(b.title==null?null:b.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(w=i.getAttribute("src"),(w!==(b.src==null?null:b.src)||i.getAttribute("type")!==(b.type==null?null:b.type)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&w&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var w=b.name==null?null:""+b.name;if(b.type==="hidden"&&i.getAttribute("name")===w)return i}else return i;if(i=Kn(i.nextSibling),i===null)break}return null}function CL(i,o,u){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=Kn(i.nextSibling),i===null))return null;return i}function _O(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Kn(i.nextSibling),i===null))return null;return i}function Iv(i){return i.data==="$?"||i.data==="$~"}function Lv(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function PL(i,o){var u=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||u.readyState!=="loading")o();else{var m=function(){o(),u.removeEventListener("DOMContentLoaded",m)};u.addEventListener("DOMContentLoaded",m),i._reactRetry=m}}function Kn(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var Bv=null;function NO(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"||u==="/&"){if(o===0)return Kn(i.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}i=i.nextSibling}return null}function OO(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return i;o--}else u!=="/$"&&u!=="/&"||o++}i=i.previousSibling}return null}function EO(i,o,u){switch(o=Ph(u),i){case"html":if(i=o.documentElement,!i)throw Error(n(452));return i;case"head":if(i=o.head,!i)throw Error(n(453));return i;case"body":if(i=o.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function Lu(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Ug(i)}var Qn=new Map,AO=new Set;function kh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var li=V.d;V.d={f:kL,r:TL,D:DL,C:ML,L:RL,m:IL,X:BL,S:LL,M:$L};function kL(){var i=li.f(),o=jh();return i||o}function TL(i){var o=ll(i);o!==null&&o.tag===5&&o.type==="form"?Q_(o):li.r(i)}var Ul=typeof document>"u"?null:document;function CO(i,o,u){var m=Ul;if(m&&typeof o=="string"&&o){var b=Ln(o);b='link[rel="'+i+'"][href="'+b+'"]',typeof u=="string"&&(b+='[crossorigin="'+u+'"]'),AO.has(b)||(AO.add(b),i={rel:i,crossOrigin:u,href:o},m.querySelector(b)===null&&(o=m.createElement("link"),Ir(o,"link",i),xr(o),m.head.appendChild(o)))}}function DL(i){li.D(i),CO("dns-prefetch",i,null)}function ML(i,o){li.C(i,o),CO("preconnect",i,o)}function RL(i,o,u){li.L(i,o,u);var m=Ul;if(m&&i&&o){var b='link[rel="preload"][as="'+Ln(o)+'"]';o==="image"&&u&&u.imageSrcSet?(b+='[imagesrcset="'+Ln(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(b+='[imagesizes="'+Ln(u.imageSizes)+'"]')):b+='[href="'+Ln(i)+'"]';var w=b;switch(o){case"style":w=zl(i);break;case"script":w=ql(i)}Qn.has(w)||(i=g({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:i,as:o},u),Qn.set(w,i),m.querySelector(b)!==null||o==="style"&&m.querySelector(Bu(w))||o==="script"&&m.querySelector($u(w))||(o=m.createElement("link"),Ir(o,"link",i),xr(o),m.head.appendChild(o)))}}function IL(i,o){li.m(i,o);var u=Ul;if(u&&i){var m=o&&typeof o.as=="string"?o.as:"script",b='link[rel="modulepreload"][as="'+Ln(m)+'"][href="'+Ln(i)+'"]',w=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=ql(i)}if(!Qn.has(w)&&(i=g({rel:"modulepreload",href:i},o),Qn.set(w,i),u.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector($u(w)))return}m=u.createElement("link"),Ir(m,"link",i),xr(m),u.head.appendChild(m)}}}function LL(i,o,u){li.S(i,o,u);var m=Ul;if(m&&i){var b=cl(m).hoistableStyles,w=zl(i);o=o||"default";var A=b.get(w);if(!A){var k={loading:0,preload:null};if(A=m.querySelector(Bu(w)))k.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":o},u),(u=Qn.get(w))&&$v(i,u);var L=A=m.createElement("link");xr(L),Ir(L,"link",i),L._p=new Promise(function(J,ce){L.onload=J,L.onerror=ce}),L.addEventListener("load",function(){k.loading|=1}),L.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Th(A,o,m)}A={type:"stylesheet",instance:A,count:1,state:k},b.set(w,A)}}}function BL(i,o){li.X(i,o);var u=Ul;if(u&&i){var m=cl(u).hoistableScripts,b=ql(i),w=m.get(b);w||(w=u.querySelector($u(b)),w||(i=g({src:i,async:!0},o),(o=Qn.get(b))&&Uv(i,o),w=u.createElement("script"),xr(w),Ir(w,"link",i),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(b,w))}}function $L(i,o){li.M(i,o);var u=Ul;if(u&&i){var m=cl(u).hoistableScripts,b=ql(i),w=m.get(b);w||(w=u.querySelector($u(b)),w||(i=g({src:i,async:!0,type:"module"},o),(o=Qn.get(b))&&Uv(i,o),w=u.createElement("script"),xr(w),Ir(w,"link",i),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(b,w))}}function PO(i,o,u,m){var b=(b=ve.current)?kh(b):null;if(!b)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=zl(u.href),u=cl(b).hoistableStyles,m=u.get(o),m||(m={type:"style",instance:null,count:0,state:null},u.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=zl(u.href);var w=cl(b).hoistableStyles,A=w.get(i);if(A||(b=b.ownerDocument||b,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(i,A),(w=b.querySelector(Bu(i)))&&!w._p&&(A.instance=w,A.state.loading=5),Qn.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Qn.set(i,u),w||UL(b,i,u,A.state))),o&&m===null)throw Error(n(528,""));return A}if(o&&m!==null)throw Error(n(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=ql(u),u=cl(b).hoistableScripts,m=u.get(o),m||(m={type:"script",instance:null,count:0,state:null},u.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function zl(i){return'href="'+Ln(i)+'"'}function Bu(i){return'link[rel="stylesheet"]['+i+"]"}function kO(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function UL(i,o,u,m){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=i.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),Ir(o,"link",u),xr(o),i.head.appendChild(o))}function ql(i){return'[src="'+Ln(i)+'"]'}function $u(i){return"script[async]"+i}function TO(i,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var m=i.querySelector('style[data-href~="'+Ln(u.href)+'"]');if(m)return o.instance=m,xr(m),m;var b=g({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return m=(i.ownerDocument||i).createElement("style"),xr(m),Ir(m,"style",b),Th(m,u.precedence,i),o.instance=m;case"stylesheet":b=zl(u.href);var w=i.querySelector(Bu(b));if(w)return o.state.loading|=4,o.instance=w,xr(w),w;m=kO(u),(b=Qn.get(b))&&$v(m,b),w=(i.ownerDocument||i).createElement("link"),xr(w);var A=w;return A._p=new Promise(function(k,L){A.onload=k,A.onerror=L}),Ir(w,"link",m),o.state.loading|=4,Th(w,u.precedence,i),o.instance=w;case"script":return w=ql(u.src),(b=i.querySelector($u(w)))?(o.instance=b,xr(b),b):(m=u,(b=Qn.get(w))&&(m=g({},u),Uv(m,b)),i=i.ownerDocument||i,b=i.createElement("script"),xr(b),Ir(b,"link",m),i.head.appendChild(b),o.instance=b);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,Th(m,u.precedence,i));return o.instance}function Th(i,o,u){for(var m=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,w=b,A=0;A<m.length;A++){var k=m[A];if(k.dataset.precedence===o)w=k;else if(w!==b)break}w?w.parentNode.insertBefore(i,w.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(i,o.firstChild))}function $v(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Uv(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Dh=null;function DO(i,o,u){if(Dh===null){var m=new Map,b=Dh=new Map;b.set(u,m)}else b=Dh,m=b.get(u),m||(m=new Map,b.set(u,m));if(m.has(i))return m;for(m.set(i,null),u=u.getElementsByTagName(i),b=0;b<u.length;b++){var w=u[b];if(!(w[tu]||w[Tr]||i==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var A=w.getAttribute(o)||"";A=i+A;var k=m.get(A);k?k.push(w):m.set(A,[w])}}return m}function MO(i,o,u){i=i.ownerDocument||i,i.head.insertBefore(u,o==="title"?i.querySelector("head > title"):null)}function zL(i,o,u){if(u===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function RO(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function qL(i,o,u,m){if(u.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var b=zl(m.href),w=o.querySelector(Bu(b));if(w){o=w._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=Mh.bind(i),o.then(i,i)),u.state.loading|=4,u.instance=w,xr(w);return}w=o.ownerDocument||o,m=kO(m),(b=Qn.get(b))&&$v(m,b),w=w.createElement("link"),xr(w);var A=w;A._p=new Promise(function(k,L){A.onload=k,A.onerror=L}),Ir(w,"link",m),u.instance=w}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(i.count++,u=Mh.bind(i),o.addEventListener("load",u),o.addEventListener("error",u))}}var zv=0;function FL(i,o){return i.stylesheets&&i.count===0&&Ih(i,i.stylesheets),0<i.count||0<i.imgCount?function(u){var m=setTimeout(function(){if(i.stylesheets&&Ih(i,i.stylesheets),i.unsuspend){var w=i.unsuspend;i.unsuspend=null,w()}},6e4+o);0<i.imgBytes&&zv===0&&(zv=62500*SL());var b=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Ih(i,i.stylesheets),i.unsuspend)){var w=i.unsuspend;i.unsuspend=null,w()}},(i.imgBytes>zv?50:800)+o);return i.unsuspend=u,function(){i.unsuspend=null,clearTimeout(m),clearTimeout(b)}}:null}function Mh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ih(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Rh=null;function Ih(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Rh=new Map,o.forEach(KL,i),Rh=null,Mh.call(i))}function KL(i,o){if(!(o.state.loading&4)){var u=Rh.get(i);if(u)var m=u.get(null);else{u=new Map,Rh.set(i,u);for(var b=i.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<b.length;w++){var A=b[w];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(u.set(A.dataset.precedence,A),m=A)}m&&u.set(null,m)}b=o.instance,A=b.getAttribute("data-precedence"),w=u.get(A)||m,w===m&&u.set(null,b),u.set(A,b),this.count++,m=Mh.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),w?w.parentNode.insertBefore(b,w.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(b,i.firstChild)),o.state.loading|=4}}var Uu={$$typeof:E,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function QL(i,o,u,m,b,w,A,k,L){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ig(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ig(0),this.hiddenUpdates=Ig(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=w,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function IO(i,o,u,m,b,w,A,k,L,J,ce,me){return i=new QL(i,o,u,A,L,J,ce,me,k),o=1,w===!0&&(o|=24),w=xn(3,null,null,o),i.current=w,w.stateNode=i,o=xy(),o.refCount++,i.pooledCache=o,o.refCount++,w.memoizedState={element:m,isDehydrated:u,cache:o},_y(w),i}function LO(i){return i?(i=bl,i):bl}function BO(i,o,u,m,b,w){b=LO(b),m.context===null?m.context=b:m.pendingContext=b,m=Wi(o),m.payload={element:u},w=w===void 0?null:w,w!==null&&(m.callback=w),u=Xi(i,m,o),u!==null&&(un(u,i,o),vu(u,i,o))}function $O(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function qv(i,o){$O(i,o),(i=i.alternate)&&$O(i,o)}function UO(i){if(i.tag===13||i.tag===31){var o=Ys(i,67108864);o!==null&&un(o,i,67108864),qv(i,67108864)}}function zO(i){if(i.tag===13||i.tag===31){var o=Nn();o=Lg(o);var u=Ys(i,o);u!==null&&un(u,i,o),qv(i,o)}}var Lh=!0;function HL(i,o,u,m){var b=I.T;I.T=null;var w=V.p;try{V.p=2,Fv(i,o,u,m)}finally{V.p=w,I.T=b}}function VL(i,o,u,m){var b=I.T;I.T=null;var w=V.p;try{V.p=8,Fv(i,o,u,m)}finally{V.p=w,I.T=b}}function Fv(i,o,u,m){if(Lh){var b=Kv(m);if(b===null)Cv(i,o,m,Bh,u),FO(i,m);else if(YL(b,i,o,u,m))m.stopPropagation();else if(FO(i,m),o&4&&-1<GL.indexOf(i)){for(;b!==null;){var w=ll(b);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var A=Ks(w.pendingLanes);if(A!==0){var k=w;for(k.pendingLanes|=2,k.entangledLanes|=2;A;){var L=1<<31-vn(A);k.entanglements[1]|=L,A&=~L}Ea(w),(ut&6)===0&&(xh=Oe()+500,Mu(0))}}break;case 31:case 13:k=Ys(w,2),k!==null&&un(k,w,2),jh(),qv(w,2)}if(w=Kv(m),w===null&&Cv(i,o,m,Bh,u),w===b)break;b=w}b!==null&&m.stopPropagation()}else Cv(i,o,m,null,u)}}function Kv(i){return i=Hg(i),Qv(i)}var Bh=null;function Qv(i){if(Bh=null,i=ol(i),i!==null){var o=s(i);if(o===null)i=null;else{var u=o.tag;if(u===13){if(i=l(o),i!==null)return i;i=null}else if(u===31){if(i=d(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Bh=i,null}function qO(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xt()){case mt:return 2;case qr:return 8;case Pr:case ja:return 32;case Rn:return 268435456;default:return 32}default:return 32}}var Hv=!1,ls=null,cs=null,us=null,zu=new Map,qu=new Map,ds=[],GL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function FO(i,o){switch(i){case"focusin":case"focusout":ls=null;break;case"dragenter":case"dragleave":cs=null;break;case"mouseover":case"mouseout":us=null;break;case"pointerover":case"pointerout":zu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":qu.delete(o.pointerId)}}function Fu(i,o,u,m,b,w){return i===null||i.nativeEvent!==w?(i={blockedOn:o,domEventName:u,eventSystemFlags:m,nativeEvent:w,targetContainers:[b]},o!==null&&(o=ll(o),o!==null&&UO(o)),i):(i.eventSystemFlags|=m,o=i.targetContainers,b!==null&&o.indexOf(b)===-1&&o.push(b),i)}function YL(i,o,u,m,b){switch(o){case"focusin":return ls=Fu(ls,i,o,u,m,b),!0;case"dragenter":return cs=Fu(cs,i,o,u,m,b),!0;case"mouseover":return us=Fu(us,i,o,u,m,b),!0;case"pointerover":var w=b.pointerId;return zu.set(w,Fu(zu.get(w)||null,i,o,u,m,b)),!0;case"gotpointercapture":return w=b.pointerId,qu.set(w,Fu(qu.get(w)||null,i,o,u,m,b)),!0}return!1}function KO(i){var o=ol(i.target);if(o!==null){var u=s(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){i.blockedOn=o,aS(i.priority,function(){zO(u)});return}}else if(o===31){if(o=d(u),o!==null){i.blockedOn=o,aS(i.priority,function(){zO(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function $h(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=Kv(i.nativeEvent);if(u===null){u=i.nativeEvent;var m=new u.constructor(u.type,u);Qg=m,u.target.dispatchEvent(m),Qg=null}else return o=ll(u),o!==null&&UO(o),i.blockedOn=u,!1;o.shift()}return!0}function QO(i,o,u){$h(i)&&u.delete(o)}function WL(){Hv=!1,ls!==null&&$h(ls)&&(ls=null),cs!==null&&$h(cs)&&(cs=null),us!==null&&$h(us)&&(us=null),zu.forEach(QO),qu.forEach(QO)}function Uh(i,o){i.blockedOn===o&&(i.blockedOn=null,Hv||(Hv=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,WL)))}var zh=null;function HO(i){zh!==i&&(zh=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){zh===i&&(zh=null);for(var o=0;o<i.length;o+=3){var u=i[o],m=i[o+1],b=i[o+2];if(typeof m!="function"){if(Qv(m||u)===null)continue;break}var w=ll(u);w!==null&&(i.splice(o,3),o-=3,Ky(w,{pending:!0,data:b,method:u.method,action:m},m,b))}}))}function Fl(i){function o(L){return Uh(L,i)}ls!==null&&Uh(ls,i),cs!==null&&Uh(cs,i),us!==null&&Uh(us,i),zu.forEach(o),qu.forEach(o);for(var u=0;u<ds.length;u++){var m=ds[u];m.blockedOn===i&&(m.blockedOn=null)}for(;0<ds.length&&(u=ds[0],u.blockedOn===null);)KO(u),u.blockedOn===null&&ds.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(m=0;m<u.length;m+=3){var b=u[m],w=u[m+1],A=b[nn]||null;if(typeof w=="function")A||HO(u);else if(A){var k=null;if(w&&w.hasAttribute("formAction")){if(b=w,A=w[nn]||null)k=A.formAction;else if(Qv(b)!==null)continue}else k=A.action;typeof k=="function"?u[m+1]=k:(u.splice(m,3),m-=3),HO(u)}}}function VO(){function i(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(A){return b=A})},focusReset:"manual",scroll:"manual"})}function o(){b!==null&&(b(),b=null),m||setTimeout(u,20)}function u(){if(!m&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,b=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){m=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),b!==null&&(b(),b=null)}}}function Vv(i){this._internalRoot=i}qh.prototype.render=Vv.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(n(409));var u=o.current,m=Nn();BO(u,m,i,o,null,null)},qh.prototype.unmount=Vv.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;BO(i.current,2,null,i,null,null),jh(),o[sl]=null}};function qh(i){this._internalRoot=i}qh.prototype.unstable_scheduleHydration=function(i){if(i){var o=nS();i={blockedOn:null,target:i,priority:o};for(var u=0;u<ds.length&&o!==0&&o<ds[u].priority;u++);ds.splice(u,0,i),u===0&&KO(i)}};var GO=t.version;if(GO!=="19.2.4")throw Error(n(527,GO,"19.2.4"));V.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=h(o),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var XL={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fh.isDisabled&&Fh.supportsFiber)try{kr=Fh.inject(XL),fr=Fh}catch{}}return Qu.createRoot=function(i,o){if(!a(i))throw Error(n(299));var u=!1,m="",b=tN,w=rN,A=nN;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(b=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=IO(i,1,!1,null,null,u,m,null,b,w,A,VO),i[sl]=o.current,Av(i),new Vv(o)},Qu.hydrateRoot=function(i,o,u){if(!a(i))throw Error(n(299));var m=!1,b="",w=tN,A=rN,k=nN,L=null;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onUncaughtError!==void 0&&(w=u.onUncaughtError),u.onCaughtError!==void 0&&(A=u.onCaughtError),u.onRecoverableError!==void 0&&(k=u.onRecoverableError),u.formState!==void 0&&(L=u.formState)),o=IO(i,1,!0,o,u??null,m,b,L,w,A,k,VO),o.context=LO(null),u=o.current,m=Nn(),m=Lg(m),b=Wi(m),b.callback=null,Xi(u,b,m),u=m,o.current.lanes=u,eu(o,u),Ea(o),i[sl]=o.current,Av(i),new qh(o)},Qu.version="19.2.4",Qu}var iE;function uB(){if(iE)return Zv.exports;iE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Zv.exports=cB(),Zv.exports}var dB=uB();const fB=Fa(dB);/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var sE="popstate";function hB(e={}){function t(a,s){let{pathname:l="/",search:d="",hash:f=""}=Yo(a.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Yb("",{pathname:l,search:d,hash:f},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(a,s){let l=a.document.querySelector("base"),d="";if(l&&l.getAttribute("href")){let f=a.location.href,h=f.indexOf("#");d=h===-1?f:f.slice(0,h)}return d+"#"+(typeof s=="string"?s:fd(s))}function n(a,s){Jn(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return pB(t,r,n,e)}function zt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Jn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function mB(){return Math.random().toString(36).substring(2,10)}function oE(e,t){return{usr:e.state,key:e.key,idx:t}}function Yb(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Yo(t):t,state:r,key:t&&t.key||n||mB()}}function fd({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Yo(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function pB(e,t,r,n={}){let{window:a=document.defaultView,v5Compat:s=!1}=n,l=a.history,d="POP",f=null,h=p();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function p(){return(l.state||{idx:null}).idx}function g(){d="POP";let _=p(),N=_==null?null:_-h;h=_,f&&f({action:d,location:S.location,delta:N})}function y(_,N){d="PUSH";let O=Yb(S.location,_,N);r&&r(O,_),h=p()+1;let E=oE(O,h),C=S.createHref(O);try{l.pushState(E,"",C)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;a.location.assign(C)}s&&f&&f({action:d,location:S.location,delta:1})}function v(_,N){d="REPLACE";let O=Yb(S.location,_,N);r&&r(O,_),h=p();let E=oE(O,h),C=S.createHref(O);l.replaceState(E,"",C),s&&f&&f({action:d,location:S.location,delta:0})}function j(_){return gB(_)}let S={get action(){return d},get location(){return e(a,l)},listen(_){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(sE,g),f=_,()=>{a.removeEventListener(sE,g),f=null}},createHref(_){return t(a,_)},createURL:j,encodeLocation(_){let N=j(_);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:y,replace:v,go(_){return l.go(_)}};return S}function gB(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),zt(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:fd(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function vT(e,t,r="/"){return yB(e,t,r,!1)}function yB(e,t,r,n){let a=typeof t=="string"?Yo(t):t,s=_i(a.pathname||"/",r);if(s==null)return null;let l=bT(e);vB(l);let d=null;for(let f=0;d==null&&f<l.length;++f){let h=CB(s);d=EB(l[f],h,n)}return d}function bT(e,t=[],r=[],n="",a=!1){let s=(l,d,f=a,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&f)return;zt(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let g=xi([n,p.relativePath]),y=r.concat(p);l.children&&l.children.length>0&&(zt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),bT(l.children,t,y,g,f)),!(l.path==null&&!l.index)&&t.push({path:g,score:NB(g,l.index),routesMeta:y})};return e.forEach((l,d)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))s(l,d);else for(let h of xT(l.path))s(l,d,!0,h)}),t}function xT(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let l=xT(n.join("/")),d=[];return d.push(...l.map(f=>f===""?s:[s,f].join("/"))),a&&d.push(...l),d.map(f=>e.startsWith("/")&&f===""?"/":f)}function vB(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:OB(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var bB=/^:[\w-]+$/,xB=3,wB=2,jB=1,SB=10,_B=-2,lE=e=>e==="*";function NB(e,t){let r=e.split("/"),n=r.length;return r.some(lE)&&(n+=_B),t&&(n+=wB),r.filter(a=>!lE(a)).reduce((a,s)=>a+(bB.test(s)?xB:s===""?jB:SB),n)}function OB(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function EB(e,t,r=!1){let{routesMeta:n}=e,a={},s="/",l=[];for(let d=0;d<n.length;++d){let f=n[d],h=d===n.length-1,p=s==="/"?t:t.slice(s.length)||"/",g=Om({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},p),y=f.route;if(!g&&h&&r&&!n[n.length-1].route.index&&(g=Om({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},p)),!g)return null;Object.assign(a,g.params),l.push({params:a,pathname:xi([s,g.pathname]),pathnameBase:DB(xi([s,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(s=xi([s,g.pathnameBase]))}return l}function Om(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=AB(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let s=a[0],l=s.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:n.reduce((h,{paramName:p,isOptional:g},y)=>{if(p==="*"){let j=d[y]||"";l=s.slice(0,s.length-j.length).replace(/(.)\/+$/,"$1")}const v=d[y];return g&&!v?h[p]=void 0:h[p]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:l,pattern:e}}function AB(e,t=!1,r=!0){Jn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,f)=>(n.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function CB(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Jn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function _i(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var PB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function kB(e,t="/"){let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Yo(e):e,s;return r?(r=r.replace(/\/\/+/g,"/"),r.startsWith("/")?s=cE(r.substring(1),"/"):s=cE(r,t)):s=t,{pathname:s,search:MB(n),hash:RB(a)}}function cE(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function r0(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function TB(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function _w(e){let t=TB(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function Nw(e,t,r,n=!1){let a;typeof e=="string"?a=Yo(e):(a={...e},zt(!a.pathname||!a.pathname.includes("?"),r0("?","pathname","search",a)),zt(!a.pathname||!a.pathname.includes("#"),r0("#","pathname","hash",a)),zt(!a.search||!a.search.includes("#"),r0("#","search","hash",a)));let s=e===""||a.pathname==="",l=s?"/":a.pathname,d;if(l==null)d=r;else{let g=t.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),g-=1;a.pathname=y.join("/")}d=g>=0?t[g]:"/"}let f=kB(a,d),h=l&&l!=="/"&&l.endsWith("/"),p=(s||l===".")&&r.endsWith("/");return!f.pathname.endsWith("/")&&(h||p)&&(f.pathname+="/"),f}var xi=e=>e.join("/").replace(/\/\/+/g,"/"),DB=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),MB=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,RB=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,IB=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function LB(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function BB(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var wT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function jT(e,t){let r=e;if(typeof r!="string"||!PB.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,a=!1;if(wT)try{let s=new URL(window.location.href),l=r.startsWith("//")?new URL(s.protocol+r):new URL(r),d=_i(l.pathname,t);l.origin===s.origin&&d!=null?r=d+l.search+l.hash:a=!0}catch{Jn(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:a,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ST=["POST","PUT","PATCH","DELETE"];new Set(ST);var $B=["GET",...ST];new Set($B);var Ic=x.createContext(null);Ic.displayName="DataRouter";var Cp=x.createContext(null);Cp.displayName="DataRouterState";var UB=x.createContext(!1),_T=x.createContext({isTransitioning:!1});_T.displayName="ViewTransition";var zB=x.createContext(new Map);zB.displayName="Fetchers";var qB=x.createContext(null);qB.displayName="Await";var Dn=x.createContext(null);Dn.displayName="Navigation";var Fd=x.createContext(null);Fd.displayName="Location";var ya=x.createContext({outlet:null,matches:[],isDataRoute:!1});ya.displayName="Route";var Ow=x.createContext(null);Ow.displayName="RouteError";var NT="REACT_ROUTER_ERROR",FB="REDIRECT",KB="ROUTE_ERROR_RESPONSE";function QB(e){if(e.startsWith(`${NT}:${FB}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function HB(e){if(e.startsWith(`${NT}:${KB}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new IB(t.status,t.statusText,t.data)}catch{}}function VB(e,{relative:t}={}){zt(Lc(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=x.useContext(Dn),{hash:a,pathname:s,search:l}=Kd(e,{relative:t}),d=s;return r!=="/"&&(d=s==="/"?r:xi([r,s])),n.createHref({pathname:d,search:l,hash:a})}function Lc(){return x.useContext(Fd)!=null}function va(){return zt(Lc(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(Fd).location}var OT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ET(e){x.useContext(Dn).static||x.useLayoutEffect(e)}function vt(){let{isDataRoute:e}=x.useContext(ya);return e?s6():GB()}function GB(){zt(Lc(),"useNavigate() may be used only in the context of a <Router> component.");let e=x.useContext(Ic),{basename:t,navigator:r}=x.useContext(Dn),{matches:n}=x.useContext(ya),{pathname:a}=va(),s=JSON.stringify(_w(n)),l=x.useRef(!1);return ET(()=>{l.current=!0}),x.useCallback((f,h={})=>{if(Jn(l.current,OT),!l.current)return;if(typeof f=="number"){r.go(f);return}let p=Nw(f,JSON.parse(s),a,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:xi([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,s,a,e])}x.createContext(null);function Mn(){let{matches:e}=x.useContext(ya),t=e[e.length-1];return t?t.params:{}}function Kd(e,{relative:t}={}){let{matches:r}=x.useContext(ya),{pathname:n}=va(),a=JSON.stringify(_w(r));return x.useMemo(()=>Nw(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function YB(e,t){return AT(e,t)}function AT(e,t,r,n,a){var O;zt(Lc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=x.useContext(Dn),{matches:l}=x.useContext(ya),d=l[l.length-1],f=d?d.params:{},h=d?d.pathname:"/",p=d?d.pathnameBase:"/",g=d&&d.route;{let E=g&&g.path||"";PT(h,!g||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let y=va(),v;if(t){let E=typeof t=="string"?Yo(t):t;zt(p==="/"||((O=E.pathname)==null?void 0:O.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${E.pathname}" was given in the \`location\` prop.`),v=E}else v=y;let j=v.pathname||"/",S=j;if(p!=="/"){let E=p.replace(/^\//,"").split("/");S="/"+j.replace(/^\//,"").split("/").slice(E.length).join("/")}let _=vT(e,{pathname:S});Jn(g||_!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Jn(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=e6(_&&_.map(E=>Object.assign({},E,{params:Object.assign({},f,E.params),pathname:xi([p,s.encodeLocation?s.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?p:xi([p,s.encodeLocation?s.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),l,r,n,a);return t&&N?x.createElement(Fd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},N):N}function WB(){let e=i6(),t=LB(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:s},"ErrorBoundary")," or"," ",x.createElement("code",{style:s},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),r?x.createElement("pre",{style:a},r):null,l)}var XB=x.createElement(WB,null),CT=class extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const r=HB(e.digest);r&&(e=r)}let t=e!==void 0?x.createElement(ya.Provider,{value:this.props.routeContext},x.createElement(Ow.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?x.createElement(ZB,{error:e},t):t}};CT.contextType=UB;var n0=new WeakMap;function ZB({children:e,error:t}){let{basename:r}=x.useContext(Dn);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=QB(t.digest);if(n){let a=n0.get(t);if(a)throw a;let s=jT(n.location,r);if(wT&&!n0.get(t))if(s.isExternal||n.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:n.replace}));throw n0.set(t,l),l}return x.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return e}function JB({routeContext:e,match:t,children:r}){let n=x.useContext(Ic);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),x.createElement(ya.Provider,{value:e},r)}function e6(e,t=[],r=null,n=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,l=r==null?void 0:r.errors;if(l!=null){let p=s.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);zt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,p+1))}let d=!1,f=-1;if(r)for(let p=0;p<s.length;p++){let g=s[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=p),g.route.id){let{loaderData:y,errors:v}=r,j=g.route.loader&&!y.hasOwnProperty(g.route.id)&&(!v||v[g.route.id]===void 0);if(g.route.lazy||j){d=!0,f>=0?s=s.slice(0,f+1):s=[s[0]];break}}}let h=r&&n?(p,g)=>{var y,v;n(p,{location:r.location,params:((v=(y=r.matches)==null?void 0:y[0])==null?void 0:v.params)??{},unstable_pattern:BB(r.matches),errorInfo:g})}:void 0;return s.reduceRight((p,g,y)=>{let v,j=!1,S=null,_=null;r&&(v=l&&g.route.id?l[g.route.id]:void 0,S=g.route.errorElement||XB,d&&(f<0&&y===0?(PT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,_=null):f===y&&(j=!0,_=g.route.hydrateFallbackElement||null)));let N=t.concat(s.slice(0,y+1)),O=()=>{let E;return v?E=S:j?E=_:g.route.Component?E=x.createElement(g.route.Component,null):g.route.element?E=g.route.element:E=p,x.createElement(JB,{match:g,routeContext:{outlet:p,matches:N,isDataRoute:r!=null},children:E})};return r&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?x.createElement(CT,{location:r.location,revalidation:r.revalidation,component:S,error:v,children:O(),routeContext:{outlet:null,matches:N,isDataRoute:!0},onError:h}):O()},null)}function Ew(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function t6(e){let t=x.useContext(Ic);return zt(t,Ew(e)),t}function r6(e){let t=x.useContext(Cp);return zt(t,Ew(e)),t}function n6(e){let t=x.useContext(ya);return zt(t,Ew(e)),t}function Aw(e){let t=n6(e),r=t.matches[t.matches.length-1];return zt(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function a6(){return Aw("useRouteId")}function i6(){var n;let e=x.useContext(Ow),t=r6("useRouteError"),r=Aw("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function s6(){let{router:e}=t6("useNavigate"),t=Aw("useNavigate"),r=x.useRef(!1);return ET(()=>{r.current=!0}),x.useCallback(async(a,s={})=>{Jn(r.current,OT),r.current&&(typeof a=="number"?await e.navigate(a):await e.navigate(a,{fromRouteId:t,...s}))},[e,t])}var uE={};function PT(e,t,r){!t&&!uE[e]&&(uE[e]=!0,Jn(!1,r))}x.memo(o6);function o6({routes:e,future:t,state:r,onError:n}){return AT(e,void 0,r,n,t)}function He({to:e,replace:t,state:r,relative:n}){zt(Lc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=x.useContext(Dn);Jn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=x.useContext(ya),{pathname:l}=va(),d=vt(),f=Nw(e,_w(s),l,n==="path"),h=JSON.stringify(f);return x.useEffect(()=>{d(JSON.parse(h),{replace:t,state:r,relative:n})},[d,h,n,t,r]),null}function Ye(e){zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function l6({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:a,static:s=!1,unstable_useTransitions:l}){zt(!Lc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=e.replace(/^\/*/,"/"),f=x.useMemo(()=>({basename:d,navigator:a,static:s,unstable_useTransitions:l,future:{}}),[d,a,s,l]);typeof r=="string"&&(r=Yo(r));let{pathname:h="/",search:p="",hash:g="",state:y=null,key:v="default"}=r,j=x.useMemo(()=>{let S=_i(h,d);return S==null?null:{location:{pathname:S,search:p,hash:g,state:y,key:v},navigationType:n}},[d,h,p,g,y,v,n]);return Jn(j!=null,`<Router basename="${d}"> is not able to match the URL "${h}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:x.createElement(Dn.Provider,{value:f},x.createElement(Fd.Provider,{children:t,value:j}))}function c6({children:e,location:t}){return YB(Wb(e),t)}function Wb(e,t=[]){let r=[];return x.Children.forEach(e,(n,a)=>{if(!x.isValidElement(n))return;let s=[...t,a];if(n.type===x.Fragment){r.push.apply(r,Wb(n.props.children,s));return}zt(n.type===Ye,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Wb(n.props.children,s)),r.push(l)}),r}var ym="get",vm="application/x-www-form-urlencoded";function Pp(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function u6(e){return Pp(e)&&e.tagName.toLowerCase()==="button"}function d6(e){return Pp(e)&&e.tagName.toLowerCase()==="form"}function f6(e){return Pp(e)&&e.tagName.toLowerCase()==="input"}function h6(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function m6(e,t){return e.button===0&&(!t||t==="_self")&&!h6(e)}var Qh=null;function p6(){if(Qh===null)try{new FormData(document.createElement("form"),0),Qh=!1}catch{Qh=!0}return Qh}var g6=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function a0(e){return e!=null&&!g6.has(e)?(Jn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vm}"`),null):e}function y6(e,t){let r,n,a,s,l;if(d6(e)){let d=e.getAttribute("action");n=d?_i(d,t):null,r=e.getAttribute("method")||ym,a=a0(e.getAttribute("enctype"))||vm,s=new FormData(e)}else if(u6(e)||f6(e)&&(e.type==="submit"||e.type==="image")){let d=e.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=e.getAttribute("formaction")||d.getAttribute("action");if(n=f?_i(f,t):null,r=e.getAttribute("formmethod")||d.getAttribute("method")||ym,a=a0(e.getAttribute("formenctype"))||a0(d.getAttribute("enctype"))||vm,s=new FormData(d,e),!p6()){let{name:h,type:p,value:g}=e;if(p==="image"){let y=h?`${h}.`:"";s.append(`${y}x`,"0"),s.append(`${y}y`,"0")}else h&&s.append(h,g)}}else{if(Pp(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ym,n=null,a=vm,l=e}return s&&a==="text/plain"&&(l=s,s=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:s,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Cw(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function v6(e,t,r,n){let a=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${n}`:a.pathname=`${a.pathname}.${n}`:a.pathname==="/"?a.pathname=`_root.${n}`:t&&_i(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${n}`,a}async function b6(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function x6(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function w6(e,t,r){let n=await Promise.all(e.map(async a=>{let s=t.routes[a.route.id];if(s){let l=await b6(s,r);return l.links?l.links():[]}return[]}));return N6(n.flat(1).filter(x6).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function dE(e,t,r,n,a,s){let l=(f,h)=>r[h]?f.route.id!==r[h].route.id:!0,d=(f,h)=>{var p;return r[h].pathname!==f.pathname||((p=r[h].route.path)==null?void 0:p.endsWith("*"))&&r[h].params["*"]!==f.params["*"]};return s==="assets"?t.filter((f,h)=>l(f,h)||d(f,h)):s==="data"?t.filter((f,h)=>{var g;let p=n.routes[f.route.id];if(!p||!p.hasLoader)return!1;if(l(f,h)||d(f,h))return!0;if(f.route.shouldRevalidate){let y=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((g=r[0])==null?void 0:g.params)||{},nextUrl:new URL(e,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function j6(e,t,{includeHydrateFallback:r}={}){return S6(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function S6(e){return[...new Set(e)]}function _6(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function N6(e,t){let r=new Set;return new Set(t),e.reduce((n,a)=>{let s=JSON.stringify(_6(a));return r.has(s)||(r.add(s),n.push({key:s,link:a})),n},[])}function kT(){let e=x.useContext(Ic);return Cw(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function O6(){let e=x.useContext(Cp);return Cw(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Pw=x.createContext(void 0);Pw.displayName="FrameworkContext";function TT(){let e=x.useContext(Pw);return Cw(e,"You must render this element inside a <HydratedRouter> element"),e}function E6(e,t){let r=x.useContext(Pw),[n,a]=x.useState(!1),[s,l]=x.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:h,onMouseLeave:p,onTouchStart:g}=t,y=x.useRef(null);x.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let S=N=>{N.forEach(O=>{l(O.isIntersecting)})},_=new IntersectionObserver(S,{threshold:.5});return y.current&&_.observe(y.current),()=>{_.disconnect()}}},[e]),x.useEffect(()=>{if(n){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[n]);let v=()=>{a(!0)},j=()=>{a(!1),l(!1)};return r?e!=="intent"?[s,y,{}]:[s,y,{onFocus:Hu(d,v),onBlur:Hu(f,j),onMouseEnter:Hu(h,v),onMouseLeave:Hu(p,j),onTouchStart:Hu(g,v)}]:[!1,y,{}]}function Hu(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function A6({page:e,...t}){let{router:r}=kT(),n=x.useMemo(()=>vT(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?x.createElement(P6,{page:e,matches:n,...t}):null}function C6(e){let{manifest:t,routeModules:r}=TT(),[n,a]=x.useState([]);return x.useEffect(()=>{let s=!1;return w6(e,t,r).then(l=>{s||a(l)}),()=>{s=!0}},[e,t,r]),n}function P6({page:e,matches:t,...r}){let n=va(),{future:a,manifest:s,routeModules:l}=TT(),{basename:d}=kT(),{loaderData:f,matches:h}=O6(),p=x.useMemo(()=>dE(e,t,h,s,n,"data"),[e,t,h,s,n]),g=x.useMemo(()=>dE(e,t,h,s,n,"assets"),[e,t,h,s,n]),y=x.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let S=new Set,_=!1;if(t.forEach(O=>{var C;let E=s.routes[O.route.id];!E||!E.hasLoader||(!p.some(D=>D.route.id===O.route.id)&&O.route.id in f&&((C=l[O.route.id])!=null&&C.shouldRevalidate)||E.hasClientLoader?_=!0:S.add(O.route.id))}),S.size===0)return[];let N=v6(e,d,a.unstable_trailingSlashAwareDataRequests,"data");return _&&S.size>0&&N.searchParams.set("_routes",t.filter(O=>S.has(O.route.id)).map(O=>O.route.id).join(",")),[N.pathname+N.search]},[d,a.unstable_trailingSlashAwareDataRequests,f,n,s,p,t,e,l]),v=x.useMemo(()=>j6(g,s),[g,s]),j=C6(g);return x.createElement(x.Fragment,null,y.map(S=>x.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...r})),v.map(S=>x.createElement("link",{key:S,rel:"modulepreload",href:S,...r})),j.map(({key:S,link:_})=>x.createElement("link",{key:S,nonce:r.nonce,..._,crossOrigin:_.crossOrigin??r.crossOrigin})))}function k6(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var T6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{T6&&(window.__reactRouterVersion="7.13.0")}catch{}function D6({basename:e,children:t,unstable_useTransitions:r,window:n}){let a=x.useRef();a.current==null&&(a.current=hB({window:n,v5Compat:!0}));let s=a.current,[l,d]=x.useState({action:s.action,location:s.location}),f=x.useCallback(h=>{r===!1?d(h):x.startTransition(()=>d(h))},[r]);return x.useLayoutEffect(()=>s.listen(f),[s,f]),x.createElement(l6,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:s,unstable_useTransitions:r})}var DT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oc=x.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:a,reloadDocument:s,replace:l,state:d,target:f,to:h,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:y,...v},j){let{basename:S,unstable_useTransitions:_}=x.useContext(Dn),N=typeof h=="string"&&DT.test(h),O=jT(h,S);h=O.to;let E=VB(h,{relative:a}),[C,D,T]=E6(n,v),M=L6(h,{replace:l,state:d,target:f,preventScrollReset:p,relative:a,viewTransition:g,unstable_defaultShouldRevalidate:y,unstable_useTransitions:_});function R(Y){t&&t(Y),Y.defaultPrevented||M(Y)}let U=x.createElement("a",{...v,...T,href:O.absoluteURL||E,onClick:O.isExternal||s?t:R,ref:k6(j,D),target:f,"data-discover":!N&&r==="render"?"true":void 0});return C&&!N?x.createElement(x.Fragment,null,U,x.createElement(A6,{page:E})):U});Oc.displayName="Link";var M6=x.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:a=!1,style:s,to:l,viewTransition:d,children:f,...h},p){let g=Kd(l,{relative:h.relative}),y=va(),v=x.useContext(Cp),{navigator:j,basename:S}=x.useContext(Dn),_=v!=null&&q6(g)&&d===!0,N=j.encodeLocation?j.encodeLocation(g).pathname:g.pathname,O=y.pathname,E=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;r||(O=O.toLowerCase(),E=E?E.toLowerCase():null,N=N.toLowerCase()),E&&S&&(E=_i(E,S)||E);const C=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let D=O===N||!a&&O.startsWith(N)&&O.charAt(C)==="/",T=E!=null&&(E===N||!a&&E.startsWith(N)&&E.charAt(N.length)==="/"),M={isActive:D,isPending:T,isTransitioning:_},R=D?t:void 0,U;typeof n=="function"?U=n(M):U=[n,D?"active":null,T?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let Y=typeof s=="function"?s(M):s;return x.createElement(Oc,{...h,"aria-current":R,className:U,ref:p,style:Y,to:l,viewTransition:d},typeof f=="function"?f(M):f)});M6.displayName="NavLink";var R6=x.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:a,state:s,method:l=ym,action:d,onSubmit:f,relative:h,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:y,...v},j)=>{let{unstable_useTransitions:S}=x.useContext(Dn),_=U6(),N=z6(d,{relative:h}),O=l.toLowerCase()==="get"?"get":"post",E=typeof d=="string"&&DT.test(d),C=D=>{if(f&&f(D),D.defaultPrevented)return;D.preventDefault();let T=D.nativeEvent.submitter,M=(T==null?void 0:T.getAttribute("formmethod"))||l,R=()=>_(T||D.currentTarget,{fetcherKey:t,method:M,navigate:r,replace:a,state:s,relative:h,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:y});S&&r!==!1?x.startTransition(()=>R()):R()};return x.createElement("form",{ref:j,method:O,action:N,onSubmit:n?f:C,...v,"data-discover":!E&&e==="render"?"true":void 0})});R6.displayName="Form";function I6(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MT(e){let t=x.useContext(Ic);return zt(t,I6(e)),t}function L6(e,{target:t,replace:r,state:n,preventScrollReset:a,relative:s,viewTransition:l,unstable_defaultShouldRevalidate:d,unstable_useTransitions:f}={}){let h=vt(),p=va(),g=Kd(e,{relative:s});return x.useCallback(y=>{if(m6(y,t)){y.preventDefault();let v=r!==void 0?r:fd(p)===fd(g),j=()=>h(e,{replace:v,state:n,preventScrollReset:a,relative:s,viewTransition:l,unstable_defaultShouldRevalidate:d});f?x.startTransition(()=>j()):j()}},[p,h,g,r,n,t,e,a,s,l,d,f])}var B6=0,$6=()=>`__${String(++B6)}__`;function U6(){let{router:e}=MT("useSubmit"),{basename:t}=x.useContext(Dn),r=a6(),n=e.fetch,a=e.navigate;return x.useCallback(async(s,l={})=>{let{action:d,method:f,encType:h,formData:p,body:g}=y6(s,t);if(l.navigate===!1){let y=l.fetcherKey||$6();await n(y,r,l.action||d,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:g,formMethod:l.method||f,formEncType:l.encType||h,flushSync:l.flushSync})}else await a(l.action||d,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:g,formMethod:l.method||f,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[n,a,t,r])}function z6(e,{relative:t}={}){let{basename:r}=x.useContext(Dn),n=x.useContext(ya);zt(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),s={...Kd(e||".",{relative:t})},l=va();if(e==null){s.search=l.search;let d=new URLSearchParams(s.search),f=d.getAll("index");if(f.some(p=>p==="")){d.delete("index"),f.filter(g=>g).forEach(g=>d.append("index",g));let p=d.toString();s.search=p?`?${p}`:""}}return(!e||e===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:xi([r,s.pathname])),fd(s)}function q6(e,{relative:t}={}){let r=x.useContext(_T);zt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=MT("useViewTransitionState"),a=Kd(e,{relative:t});if(!r.isTransitioning)return!1;let s=_i(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=_i(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Om(a.pathname,l)!=null||Om(a.pathname,s)!=null}var kp=yT(),Bc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},F6={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},xs,Sw,sT,K6=(sT=class{constructor(){De(this,xs,F6);De(this,Sw,!1)}setTimeoutProvider(e){_e(this,xs,e)}setTimeout(e,t){return $(this,xs).setTimeout(e,t)}clearTimeout(e){$(this,xs).clearTimeout(e)}setInterval(e,t){return $(this,xs).setInterval(e,t)}clearInterval(e){$(this,xs).clearInterval(e)}},xs=new WeakMap,Sw=new WeakMap,sT),vo=new K6;function Q6(e){setTimeout(e,0)}var Lo=typeof window>"u"||"Deno"in globalThis;function Zr(){}function H6(e,t){return typeof e=="function"?e(t):e}function Xb(e){return typeof e=="number"&&e>=0&&e!==1/0}function RT(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ps(e,t){return typeof e=="function"?e(t):e}function Xn(e,t){return typeof e=="function"?e(t):e}function fE(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:s,queryKey:l,stale:d}=e;if(l){if(n){if(t.queryHash!==kw(l,t.options))return!1}else if(!hd(t.queryKey,l))return!1}if(r!=="all"){const f=t.isActive();if(r==="active"&&!f||r==="inactive"&&f)return!1}return!(typeof d=="boolean"&&t.isStale()!==d||a&&a!==t.state.fetchStatus||s&&!s(t))}function hE(e,t){const{exact:r,status:n,predicate:a,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(r){if(Bo(t.options.mutationKey)!==Bo(s))return!1}else if(!hd(t.options.mutationKey,s))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function kw(e,t){return((t==null?void 0:t.queryKeyHashFn)||Bo)(e)}function Bo(e){return JSON.stringify(e,(t,r)=>Zb(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function hd(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>hd(e[r],t[r])):!1}var V6=Object.prototype.hasOwnProperty;function IT(e,t,r=0){if(e===t)return e;if(r>500)return t;const n=mE(e)&&mE(t);if(!n&&!(Zb(e)&&Zb(t)))return t;const s=(n?e:Object.keys(e)).length,l=n?t:Object.keys(t),d=l.length,f=n?new Array(d):{};let h=0;for(let p=0;p<d;p++){const g=n?p:l[p],y=e[g],v=t[g];if(y===v){f[g]=y,(n?p<s:V6.call(e,g))&&h++;continue}if(y===null||v===null||typeof y!="object"||typeof v!="object"){f[g]=v;continue}const j=IT(y,v,r+1);f[g]=j,j===y&&h++}return s===d&&h===s?e:f}function Em(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function mE(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Zb(e){if(!pE(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!pE(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function pE(e){return Object.prototype.toString.call(e)==="[object Object]"}function G6(e){return new Promise(t=>{vo.setTimeout(t,e)})}function Jb(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?IT(e,t):t}function Y6(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function W6(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Tw=Symbol();function LT(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Tw?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Dw(e,t){return typeof e=="function"?e(...t):!!e}function X6(e,t,r){let n=!1,a;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(a??(a=t()),n||(n=!0,a.aborted?r():a.addEventListener("abort",r,{once:!0})),a)}),e}var No,ws,mc,oT,Z6=(oT=class extends Bc{constructor(){super();De(this,No);De(this,ws);De(this,mc);_e(this,mc,t=>{if(!Lo&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){$(this,ws)||this.setEventListener($(this,mc))}onUnsubscribe(){var t;this.hasListeners()||((t=$(this,ws))==null||t.call(this),_e(this,ws,void 0))}setEventListener(t){var r;_e(this,mc,t),(r=$(this,ws))==null||r.call(this),_e(this,ws,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){$(this,No)!==t&&(_e(this,No,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof $(this,No)=="boolean"?$(this,No):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},No=new WeakMap,ws=new WeakMap,mc=new WeakMap,oT),Mw=new Z6;function ex(){let e,t;const r=new Promise((a,s)=>{e=a,t=s});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var J6=Q6;function e$(){let e=[],t=0,r=d=>{d()},n=d=>{d()},a=J6;const s=d=>{t?e.push(d):a(()=>{r(d)})},l=()=>{const d=e;e=[],d.length&&a(()=>{n(()=>{d.forEach(f=>{r(f)})})})};return{batch:d=>{let f;t++;try{f=d()}finally{t--,t||l()}return f},batchCalls:d=>(...f)=>{s(()=>{d(...f)})},schedule:s,setNotifyFunction:d=>{r=d},setBatchNotifyFunction:d=>{n=d},setScheduler:d=>{a=d}}}var gr=e$(),pc,js,gc,lT,t$=(lT=class extends Bc{constructor(){super();De(this,pc,!0);De(this,js);De(this,gc);_e(this,gc,t=>{if(!Lo&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){$(this,js)||this.setEventListener($(this,gc))}onUnsubscribe(){var t;this.hasListeners()||((t=$(this,js))==null||t.call(this),_e(this,js,void 0))}setEventListener(t){var r;_e(this,gc,t),(r=$(this,js))==null||r.call(this),_e(this,js,t(this.setOnline.bind(this)))}setOnline(t){$(this,pc)!==t&&(_e(this,pc,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return $(this,pc)}},pc=new WeakMap,js=new WeakMap,gc=new WeakMap,lT),Am=new t$;function r$(e){return Math.min(1e3*2**e,3e4)}function BT(e){return(e??"online")==="online"?Am.isOnline():!0}var tx=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function $T(e){let t=!1,r=0,n;const a=ex(),s=()=>a.status!=="pending",l=S=>{var _;if(!s()){const N=new tx(S);y(N),(_=e.onCancel)==null||_.call(e,N)}},d=()=>{t=!0},f=()=>{t=!1},h=()=>Mw.isFocused()&&(e.networkMode==="always"||Am.isOnline())&&e.canRun(),p=()=>BT(e.networkMode)&&e.canRun(),g=S=>{s()||(n==null||n(),a.resolve(S))},y=S=>{s()||(n==null||n(),a.reject(S))},v=()=>new Promise(S=>{var _;n=N=>{(s()||h())&&S(N)},(_=e.onPause)==null||_.call(e)}).then(()=>{var S;n=void 0,s()||(S=e.onContinue)==null||S.call(e)}),j=()=>{if(s())return;let S;const _=r===0?e.initialPromise:void 0;try{S=_??e.fn()}catch(N){S=Promise.reject(N)}Promise.resolve(S).then(g).catch(N=>{var T;if(s())return;const O=e.retry??(Lo?0:3),E=e.retryDelay??r$,C=typeof E=="function"?E(r,N):E,D=O===!0||typeof O=="number"&&r<O||typeof O=="function"&&O(r,N);if(t||!D){y(N);return}r++,(T=e.onFail)==null||T.call(e,r,N),G6(C).then(()=>h()?void 0:v()).then(()=>{t?y(N):j()})})};return{promise:a,status:()=>a.status,cancel:l,continue:()=>(n==null||n(),a),cancelRetry:d,continueRetry:f,canStart:p,start:()=>(p()?j():v().then(j),a)}}var Oo,cT,UT=(cT=class{constructor(){De(this,Oo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Xb(this.gcTime)&&_e(this,Oo,vo.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Lo?1/0:300*1e3))}clearGcTimeout(){$(this,Oo)&&(vo.clearTimeout($(this,Oo)),_e(this,Oo,void 0))}},Oo=new WeakMap,cT),Eo,yc,Wn,Ao,_r,Bd,Co,ca,ci,uT,n$=(uT=class extends UT{constructor(t){super();De(this,ca);De(this,Eo);De(this,yc);De(this,Wn);De(this,Ao);De(this,_r);De(this,Bd);De(this,Co);_e(this,Co,!1),_e(this,Bd,t.defaultOptions),this.setOptions(t.options),this.observers=[],_e(this,Ao,t.client),_e(this,Wn,$(this,Ao).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,_e(this,Eo,yE(this.options)),this.state=t.state??$(this,Eo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=$(this,_r))==null?void 0:t.promise}setOptions(t){if(this.options={...$(this,Bd),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=yE(this.options);r.data!==void 0&&(this.setState(gE(r.data,r.dataUpdatedAt)),_e(this,Eo,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&$(this,Wn).remove(this)}setData(t,r){const n=Jb(this.state.data,t,this.options);return Ge(this,ca,ci).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Ge(this,ca,ci).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=$(this,_r))==null?void 0:n.promise;return(a=$(this,_r))==null||a.cancel(t),r?r.then(Zr).catch(Zr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState($(this,Eo))}isActive(){return this.observers.some(t=>Xn(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Tw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ps(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!RT(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=$(this,_r))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=$(this,_r))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),$(this,Wn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||($(this,_r)&&($(this,Co)?$(this,_r).cancel({revert:!0}):$(this,_r).cancelRetry()),this.scheduleGc()),$(this,Wn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ge(this,ca,ci).call(this,{type:"invalidate"})}async fetch(t,r){var f,h,p,g,y,v,j,S,_,N,O,E;if(this.state.fetchStatus!=="idle"&&((f=$(this,_r))==null?void 0:f.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if($(this,_r))return $(this,_r).continueRetry(),$(this,_r).promise}if(t&&this.setOptions(t),!this.options.queryFn){const C=this.observers.find(D=>D.options.queryFn);C&&this.setOptions(C.options)}const n=new AbortController,a=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(_e(this,Co,!0),n.signal)})},s=()=>{const C=LT(this.options,r),T=(()=>{const M={client:$(this,Ao),queryKey:this.queryKey,meta:this.meta};return a(M),M})();return _e(this,Co,!1),this.options.persister?this.options.persister(C,T,this):C(T)},d=(()=>{const C={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:$(this,Ao),state:this.state,fetchFn:s};return a(C),C})();(h=this.options.behavior)==null||h.onFetch(d,this),_e(this,yc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=d.fetchOptions)==null?void 0:p.meta))&&Ge(this,ca,ci).call(this,{type:"fetch",meta:(g=d.fetchOptions)==null?void 0:g.meta}),_e(this,_r,$T({initialPromise:r==null?void 0:r.initialPromise,fn:d.fetchFn,onCancel:C=>{C instanceof tx&&C.revert&&this.setState({...$(this,yc),fetchStatus:"idle"}),n.abort()},onFail:(C,D)=>{Ge(this,ca,ci).call(this,{type:"failed",failureCount:C,error:D})},onPause:()=>{Ge(this,ca,ci).call(this,{type:"pause"})},onContinue:()=>{Ge(this,ca,ci).call(this,{type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0}));try{const C=await $(this,_r).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(v=(y=$(this,Wn).config).onSuccess)==null||v.call(y,C,this),(S=(j=$(this,Wn).config).onSettled)==null||S.call(j,C,this.state.error,this),C}catch(C){if(C instanceof tx){if(C.silent)return $(this,_r).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw Ge(this,ca,ci).call(this,{type:"error",error:C}),(N=(_=$(this,Wn).config).onError)==null||N.call(_,C,this),(E=(O=$(this,Wn).config).onSettled)==null||E.call(O,this.state.data,C,this),C}finally{this.scheduleGc()}}},Eo=new WeakMap,yc=new WeakMap,Wn=new WeakMap,Ao=new WeakMap,_r=new WeakMap,Bd=new WeakMap,Co=new WeakMap,ca=new WeakSet,ci=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...zT(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,...gE(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return _e(this,yc,t.manual?a:void 0),a;case"error":const s=t.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),gr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),$(this,Wn).notify({query:this,type:"updated",action:t})})},uT);function zT(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:BT(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function gE(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function yE(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var dn,rt,$d,Xr,Po,vc,fi,Ss,Ud,bc,xc,ko,To,_s,wc,ft,ad,rx,nx,ax,ix,sx,ox,lx,qT,dT,a$=(dT=class extends Bc{constructor(t,r){super();De(this,ft);De(this,dn);De(this,rt);De(this,$d);De(this,Xr);De(this,Po);De(this,vc);De(this,fi);De(this,Ss);De(this,Ud);De(this,bc);De(this,xc);De(this,ko);De(this,To);De(this,_s);De(this,wc,new Set);this.options=r,_e(this,dn,t),_e(this,Ss,null),_e(this,fi,ex()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&($(this,rt).addObserver(this),vE($(this,rt),this.options)?Ge(this,ft,ad).call(this):this.updateResult(),Ge(this,ft,ix).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return cx($(this,rt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return cx($(this,rt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ge(this,ft,sx).call(this),Ge(this,ft,ox).call(this),$(this,rt).removeObserver(this)}setOptions(t){const r=this.options,n=$(this,rt);if(this.options=$(this,dn).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Xn(this.options.enabled,$(this,rt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ge(this,ft,lx).call(this),$(this,rt).setOptions(this.options),r._defaulted&&!Em(this.options,r)&&$(this,dn).getQueryCache().notify({type:"observerOptionsUpdated",query:$(this,rt),observer:this});const a=this.hasListeners();a&&bE($(this,rt),n,this.options,r)&&Ge(this,ft,ad).call(this),this.updateResult(),a&&($(this,rt)!==n||Xn(this.options.enabled,$(this,rt))!==Xn(r.enabled,$(this,rt))||Ps(this.options.staleTime,$(this,rt))!==Ps(r.staleTime,$(this,rt)))&&Ge(this,ft,rx).call(this);const s=Ge(this,ft,nx).call(this);a&&($(this,rt)!==n||Xn(this.options.enabled,$(this,rt))!==Xn(r.enabled,$(this,rt))||s!==$(this,_s))&&Ge(this,ft,ax).call(this,s)}getOptimisticResult(t){const r=$(this,dn).getQueryCache().build($(this,dn),t),n=this.createResult(r,t);return s$(this,n)&&(_e(this,Xr,n),_e(this,vc,this.options),_e(this,Po,$(this,rt).state)),n}getCurrentResult(){return $(this,Xr)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&$(this,fi).status==="pending"&&$(this,fi).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(t){$(this,wc).add(t)}getCurrentQuery(){return $(this,rt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=$(this,dn).defaultQueryOptions(t),n=$(this,dn).getQueryCache().build($(this,dn),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return Ge(this,ft,ad).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),$(this,Xr)))}createResult(t,r){var U;const n=$(this,rt),a=this.options,s=$(this,Xr),l=$(this,Po),d=$(this,vc),h=t!==n?t.state:$(this,$d),{state:p}=t;let g={...p},y=!1,v;if(r._optimisticResults){const Y=this.hasListeners(),K=!Y&&vE(t,r),z=Y&&bE(t,n,r,a);(K||z)&&(g={...g,...zT(p.data,t.options)}),r._optimisticResults==="isRestoring"&&(g.fetchStatus="idle")}let{error:j,errorUpdatedAt:S,status:_}=g;v=g.data;let N=!1;if(r.placeholderData!==void 0&&v===void 0&&_==="pending"){let Y;s!=null&&s.isPlaceholderData&&r.placeholderData===(d==null?void 0:d.placeholderData)?(Y=s.data,N=!0):Y=typeof r.placeholderData=="function"?r.placeholderData((U=$(this,xc))==null?void 0:U.state.data,$(this,xc)):r.placeholderData,Y!==void 0&&(_="success",v=Jb(s==null?void 0:s.data,Y,r),y=!0)}if(r.select&&v!==void 0&&!N)if(s&&v===(l==null?void 0:l.data)&&r.select===$(this,Ud))v=$(this,bc);else try{_e(this,Ud,r.select),v=r.select(v),v=Jb(s==null?void 0:s.data,v,r),_e(this,bc,v),_e(this,Ss,null)}catch(Y){_e(this,Ss,Y)}$(this,Ss)&&(j=$(this,Ss),v=$(this,bc),S=Date.now(),_="error");const O=g.fetchStatus==="fetching",E=_==="pending",C=_==="error",D=E&&O,T=v!==void 0,R={status:_,fetchStatus:g.fetchStatus,isPending:E,isSuccess:_==="success",isError:C,isInitialLoading:D,isLoading:D,data:v,dataUpdatedAt:g.dataUpdatedAt,error:j,errorUpdatedAt:S,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>h.dataUpdateCount||g.errorUpdateCount>h.errorUpdateCount,isFetching:O,isRefetching:O&&!E,isLoadingError:C&&!T,isPaused:g.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:C&&T,isStale:Rw(t,r),refetch:this.refetch,promise:$(this,fi),isEnabled:Xn(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const Y=R.data!==void 0,K=R.status==="error"&&!Y,z=ge=>{K?ge.reject(R.error):Y&&ge.resolve(R.data)},pe=()=>{const ge=_e(this,fi,R.promise=ex());z(ge)},le=$(this,fi);switch(le.status){case"pending":t.queryHash===n.queryHash&&z(le);break;case"fulfilled":(K||R.data!==le.value)&&pe();break;case"rejected":(!K||R.error!==le.reason)&&pe();break}}return R}updateResult(){const t=$(this,Xr),r=this.createResult($(this,rt),this.options);if(_e(this,Po,$(this,rt).state),_e(this,vc,this.options),$(this,Po).data!==void 0&&_e(this,xc,$(this,rt)),Em(r,t))return;_e(this,Xr,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,s=typeof a=="function"?a():a;if(s==="all"||!s&&!$(this,wc).size)return!0;const l=new Set(s??$(this,wc));return this.options.throwOnError&&l.add("error"),Object.keys($(this,Xr)).some(d=>{const f=d;return $(this,Xr)[f]!==t[f]&&l.has(f)})};Ge(this,ft,qT).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ge(this,ft,ix).call(this)}},dn=new WeakMap,rt=new WeakMap,$d=new WeakMap,Xr=new WeakMap,Po=new WeakMap,vc=new WeakMap,fi=new WeakMap,Ss=new WeakMap,Ud=new WeakMap,bc=new WeakMap,xc=new WeakMap,ko=new WeakMap,To=new WeakMap,_s=new WeakMap,wc=new WeakMap,ft=new WeakSet,ad=function(t){Ge(this,ft,lx).call(this);let r=$(this,rt).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Zr)),r},rx=function(){Ge(this,ft,sx).call(this);const t=Ps(this.options.staleTime,$(this,rt));if(Lo||$(this,Xr).isStale||!Xb(t))return;const n=RT($(this,Xr).dataUpdatedAt,t)+1;_e(this,ko,vo.setTimeout(()=>{$(this,Xr).isStale||this.updateResult()},n))},nx=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval($(this,rt)):this.options.refetchInterval)??!1},ax=function(t){Ge(this,ft,ox).call(this),_e(this,_s,t),!(Lo||Xn(this.options.enabled,$(this,rt))===!1||!Xb($(this,_s))||$(this,_s)===0)&&_e(this,To,vo.setInterval(()=>{(this.options.refetchIntervalInBackground||Mw.isFocused())&&Ge(this,ft,ad).call(this)},$(this,_s)))},ix=function(){Ge(this,ft,rx).call(this),Ge(this,ft,ax).call(this,Ge(this,ft,nx).call(this))},sx=function(){$(this,ko)&&(vo.clearTimeout($(this,ko)),_e(this,ko,void 0))},ox=function(){$(this,To)&&(vo.clearInterval($(this,To)),_e(this,To,void 0))},lx=function(){const t=$(this,dn).getQueryCache().build($(this,dn),this.options);if(t===$(this,rt))return;const r=$(this,rt);_e(this,rt,t),_e(this,$d,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},qT=function(t){gr.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r($(this,Xr))}),$(this,dn).getQueryCache().notify({query:$(this,rt),type:"observerResultsUpdated"})})},dT);function i$(e,t){return Xn(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function vE(e,t){return i$(e,t)||e.state.data!==void 0&&cx(e,t,t.refetchOnMount)}function cx(e,t,r){if(Xn(t.enabled,e)!==!1&&Ps(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&Rw(e,t)}return!1}function bE(e,t,r,n){return(e!==t||Xn(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Rw(e,r)}function Rw(e,t){return Xn(t.enabled,e)!==!1&&e.isStaleByTime(Ps(t.staleTime,e))}function s$(e,t){return!Em(e.getCurrentResult(),t)}function xE(e){return{onFetch:(t,r)=>{var p,g,y,v,j;const n=t.options,a=(y=(g=(p=t.fetchOptions)==null?void 0:p.meta)==null?void 0:g.fetchMore)==null?void 0:y.direction,s=((v=t.state.data)==null?void 0:v.pages)||[],l=((j=t.state.data)==null?void 0:j.pageParams)||[];let d={pages:[],pageParams:[]},f=0;const h=async()=>{let S=!1;const _=E=>{X6(E,()=>t.signal,()=>S=!0)},N=LT(t.options,t.fetchOptions),O=async(E,C,D)=>{if(S)return Promise.reject();if(C==null&&E.pages.length)return Promise.resolve(E);const M=(()=>{const K={client:t.client,queryKey:t.queryKey,pageParam:C,direction:D?"backward":"forward",meta:t.options.meta};return _(K),K})(),R=await N(M),{maxPages:U}=t.options,Y=D?W6:Y6;return{pages:Y(E.pages,R,U),pageParams:Y(E.pageParams,C,U)}};if(a&&s.length){const E=a==="backward",C=E?o$:wE,D={pages:s,pageParams:l},T=C(n,D);d=await O(D,T,E)}else{const E=e??s.length;do{const C=f===0?l[0]??n.initialPageParam:wE(n,d);if(f>0&&C==null)break;d=await O(d,C),f++}while(f<E)}return d};t.options.persister?t.fetchFn=()=>{var S,_;return(_=(S=t.options).persister)==null?void 0:_.call(S,h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=h}}}function wE(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function o$(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var zd,Ta,Kr,Do,Da,ms,fT,l$=(fT=class extends UT{constructor(t){super();De(this,Da);De(this,zd);De(this,Ta);De(this,Kr);De(this,Do);_e(this,zd,t.client),this.mutationId=t.mutationId,_e(this,Kr,t.mutationCache),_e(this,Ta,[]),this.state=t.state||FT(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){$(this,Ta).includes(t)||($(this,Ta).push(t),this.clearGcTimeout(),$(this,Kr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){_e(this,Ta,$(this,Ta).filter(r=>r!==t)),this.scheduleGc(),$(this,Kr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){$(this,Ta).length||(this.state.status==="pending"?this.scheduleGc():$(this,Kr).remove(this))}continue(){var t;return((t=$(this,Do))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var l,d,f,h,p,g,y,v,j,S,_,N,O,E,C,D,T,M;const r=()=>{Ge(this,Da,ms).call(this,{type:"continue"})},n={client:$(this,zd),meta:this.options.meta,mutationKey:this.options.mutationKey};_e(this,Do,$T({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(R,U)=>{Ge(this,Da,ms).call(this,{type:"failed",failureCount:R,error:U})},onPause:()=>{Ge(this,Da,ms).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>$(this,Kr).canRun(this)}));const a=this.state.status==="pending",s=!$(this,Do).canStart();try{if(a)r();else{Ge(this,Da,ms).call(this,{type:"pending",variables:t,isPaused:s}),$(this,Kr).config.onMutate&&await $(this,Kr).config.onMutate(t,this,n);const U=await((d=(l=this.options).onMutate)==null?void 0:d.call(l,t,n));U!==this.state.context&&Ge(this,Da,ms).call(this,{type:"pending",context:U,variables:t,isPaused:s})}const R=await $(this,Do).start();return await((h=(f=$(this,Kr).config).onSuccess)==null?void 0:h.call(f,R,t,this.state.context,this,n)),await((g=(p=this.options).onSuccess)==null?void 0:g.call(p,R,t,this.state.context,n)),await((v=(y=$(this,Kr).config).onSettled)==null?void 0:v.call(y,R,null,this.state.variables,this.state.context,this,n)),await((S=(j=this.options).onSettled)==null?void 0:S.call(j,R,null,t,this.state.context,n)),Ge(this,Da,ms).call(this,{type:"success",data:R}),R}catch(R){try{await((N=(_=$(this,Kr).config).onError)==null?void 0:N.call(_,R,t,this.state.context,this,n))}catch(U){Promise.reject(U)}try{await((E=(O=this.options).onError)==null?void 0:E.call(O,R,t,this.state.context,n))}catch(U){Promise.reject(U)}try{await((D=(C=$(this,Kr).config).onSettled)==null?void 0:D.call(C,void 0,R,this.state.variables,this.state.context,this,n))}catch(U){Promise.reject(U)}try{await((M=(T=this.options).onSettled)==null?void 0:M.call(T,void 0,R,t,this.state.context,n))}catch(U){Promise.reject(U)}throw Ge(this,Da,ms).call(this,{type:"error",error:R}),R}finally{$(this,Kr).runNext(this)}}},zd=new WeakMap,Ta=new WeakMap,Kr=new WeakMap,Do=new WeakMap,Da=new WeakSet,ms=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),gr.batch(()=>{$(this,Ta).forEach(n=>{n.onMutationUpdate(t)}),$(this,Kr).notify({mutation:this,type:"updated",action:t})})},fT);function FT(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var hi,ua,qd,hT,c$=(hT=class extends Bc{constructor(t={}){super();De(this,hi);De(this,ua);De(this,qd);this.config=t,_e(this,hi,new Set),_e(this,ua,new Map),_e(this,qd,0)}build(t,r,n){const a=new l$({client:t,mutationCache:this,mutationId:++Kh(this,qd)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){$(this,hi).add(t);const r=Hh(t);if(typeof r=="string"){const n=$(this,ua).get(r);n?n.push(t):$(this,ua).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if($(this,hi).delete(t)){const r=Hh(t);if(typeof r=="string"){const n=$(this,ua).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&$(this,ua).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Hh(t);if(typeof r=="string"){const n=$(this,ua).get(r),a=n==null?void 0:n.find(s=>s.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=Hh(t);if(typeof r=="string"){const a=(n=$(this,ua).get(r))==null?void 0:n.find(s=>s!==t&&s.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){gr.batch(()=>{$(this,hi).forEach(t=>{this.notify({type:"removed",mutation:t})}),$(this,hi).clear(),$(this,ua).clear()})}getAll(){return Array.from($(this,hi))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>hE(r,n))}findAll(t={}){return this.getAll().filter(r=>hE(t,r))}notify(t){gr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return gr.batch(()=>Promise.all(t.map(r=>r.continue().catch(Zr))))}},hi=new WeakMap,ua=new WeakMap,qd=new WeakMap,hT);function Hh(e){var t;return(t=e.options.scope)==null?void 0:t.id}var mi,Ns,fn,pi,Si,bm,ux,mT,u$=(mT=class extends Bc{constructor(r,n){super();De(this,Si);De(this,mi);De(this,Ns);De(this,fn);De(this,pi);_e(this,mi,r),this.setOptions(n),this.bindMethods(),Ge(this,Si,bm).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=$(this,mi).defaultMutationOptions(r),Em(this.options,n)||$(this,mi).getMutationCache().notify({type:"observerOptionsUpdated",mutation:$(this,fn),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Bo(n.mutationKey)!==Bo(this.options.mutationKey)?this.reset():((a=$(this,fn))==null?void 0:a.state.status)==="pending"&&$(this,fn).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=$(this,fn))==null||r.removeObserver(this)}onMutationUpdate(r){Ge(this,Si,bm).call(this),Ge(this,Si,ux).call(this,r)}getCurrentResult(){return $(this,Ns)}reset(){var r;(r=$(this,fn))==null||r.removeObserver(this),_e(this,fn,void 0),Ge(this,Si,bm).call(this),Ge(this,Si,ux).call(this)}mutate(r,n){var a;return _e(this,pi,n),(a=$(this,fn))==null||a.removeObserver(this),_e(this,fn,$(this,mi).getMutationCache().build($(this,mi),this.options)),$(this,fn).addObserver(this),$(this,fn).execute(r)}},mi=new WeakMap,Ns=new WeakMap,fn=new WeakMap,pi=new WeakMap,Si=new WeakSet,bm=function(){var n;const r=((n=$(this,fn))==null?void 0:n.state)??FT();_e(this,Ns,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},ux=function(r){gr.batch(()=>{var n,a,s,l,d,f,h,p;if($(this,pi)&&this.hasListeners()){const g=$(this,Ns).variables,y=$(this,Ns).context,v={client:$(this,mi),meta:this.options.meta,mutationKey:this.options.mutationKey};if((r==null?void 0:r.type)==="success"){try{(a=(n=$(this,pi)).onSuccess)==null||a.call(n,r.data,g,y,v)}catch(j){Promise.reject(j)}try{(l=(s=$(this,pi)).onSettled)==null||l.call(s,r.data,null,g,y,v)}catch(j){Promise.reject(j)}}else if((r==null?void 0:r.type)==="error"){try{(f=(d=$(this,pi)).onError)==null||f.call(d,r.error,g,y,v)}catch(j){Promise.reject(j)}try{(p=(h=$(this,pi)).onSettled)==null||p.call(h,void 0,r.error,g,y,v)}catch(j){Promise.reject(j)}}}this.listeners.forEach(g=>{g($(this,Ns))})})},mT),Ma,pT,d$=(pT=class extends Bc{constructor(t={}){super();De(this,Ma);this.config=t,_e(this,Ma,new Map)}build(t,r,n){const a=r.queryKey,s=r.queryHash??kw(a,r);let l=this.get(s);return l||(l=new n$({client:t,queryKey:a,queryHash:s,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(l)),l}add(t){$(this,Ma).has(t.queryHash)||($(this,Ma).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=$(this,Ma).get(t.queryHash);r&&(t.destroy(),r===t&&$(this,Ma).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){gr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return $(this,Ma).get(t)}getAll(){return[...$(this,Ma).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>fE(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>fE(t,n)):r}notify(t){gr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){gr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){gr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ma=new WeakMap,pT),Yt,Os,Es,jc,Sc,As,_c,Nc,gT,f$=(gT=class{constructor(e={}){De(this,Yt);De(this,Os);De(this,Es);De(this,jc);De(this,Sc);De(this,As);De(this,_c);De(this,Nc);_e(this,Yt,e.queryCache||new d$),_e(this,Os,e.mutationCache||new c$),_e(this,Es,e.defaultOptions||{}),_e(this,jc,new Map),_e(this,Sc,new Map),_e(this,As,0)}mount(){Kh(this,As)._++,$(this,As)===1&&(_e(this,_c,Mw.subscribe(async e=>{e&&(await this.resumePausedMutations(),$(this,Yt).onFocus())})),_e(this,Nc,Am.subscribe(async e=>{e&&(await this.resumePausedMutations(),$(this,Yt).onOnline())})))}unmount(){var e,t;Kh(this,As)._--,$(this,As)===0&&((e=$(this,_c))==null||e.call(this),_e(this,_c,void 0),(t=$(this,Nc))==null||t.call(this),_e(this,Nc,void 0))}isFetching(e){return $(this,Yt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return $(this,Os).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=$(this,Yt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=$(this,Yt).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Ps(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return $(this,Yt).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=$(this,Yt).get(n.queryHash),s=a==null?void 0:a.state.data,l=H6(t,s);if(l!==void 0)return $(this,Yt).build(this,n).setData(l,{...r,manual:!0})}setQueriesData(e,t,r){return gr.batch(()=>$(this,Yt).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=$(this,Yt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=$(this,Yt);gr.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=$(this,Yt);return gr.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=gr.batch(()=>$(this,Yt).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(Zr).catch(Zr)}invalidateQueries(e,t={}){return gr.batch(()=>($(this,Yt).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=gr.batch(()=>$(this,Yt).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let s=a.fetch(void 0,r);return r.throwOnError||(s=s.catch(Zr)),a.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(Zr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=$(this,Yt).build(this,t);return r.isStaleByTime(Ps(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Zr).catch(Zr)}fetchInfiniteQuery(e){return e.behavior=xE(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Zr).catch(Zr)}ensureInfiniteQueryData(e){return e.behavior=xE(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Am.isOnline()?$(this,Os).resumePausedMutations():Promise.resolve()}getQueryCache(){return $(this,Yt)}getMutationCache(){return $(this,Os)}getDefaultOptions(){return $(this,Es)}setDefaultOptions(e){_e(this,Es,e)}setQueryDefaults(e,t){$(this,jc).set(Bo(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...$(this,jc).values()],r={};return t.forEach(n=>{hd(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){$(this,Sc).set(Bo(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...$(this,Sc).values()],r={};return t.forEach(n=>{hd(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...$(this,Es).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=kw(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Tw&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...$(this,Es).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){$(this,Yt).clear(),$(this,Os).clear()}},Yt=new WeakMap,Os=new WeakMap,Es=new WeakMap,jc=new WeakMap,Sc=new WeakMap,As=new WeakMap,_c=new WeakMap,Nc=new WeakMap,gT),KT=x.createContext(void 0),Fe=e=>{const t=x.useContext(KT);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},h$=({client:e,children:t})=>(x.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),c.jsx(KT.Provider,{value:e,children:t})),QT=x.createContext(!1),m$=()=>x.useContext(QT);QT.Provider;function p$(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var g$=x.createContext(p$()),y$=()=>x.useContext(g$),v$=(e,t,r)=>{const n=r!=null&&r.state.error&&typeof e.throwOnError=="function"?Dw(e.throwOnError,[r.state.error,r]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||n)&&(t.isReset()||(e.retryOnMount=!1))},b$=e=>{x.useEffect(()=>{e.clearReset()},[e])},x$=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||Dw(r,[e.error,n])),w$=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},j$=(e,t)=>e.isLoading&&e.isFetching&&!t,S$=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,jE=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function _$(e,t,r){var y,v,j,S;const n=m$(),a=y$(),s=Fe(),l=s.defaultQueryOptions(e);(v=(y=s.getDefaultOptions().queries)==null?void 0:y._experimental_beforeQuery)==null||v.call(y,l);const d=s.getQueryCache().get(l.queryHash);l._optimisticResults=n?"isRestoring":"optimistic",w$(l),v$(l,a,d),b$(a);const f=!s.getQueryCache().get(l.queryHash),[h]=x.useState(()=>new t(s,l)),p=h.getOptimisticResult(l),g=!n&&e.subscribed!==!1;if(x.useSyncExternalStore(x.useCallback(_=>{const N=g?h.subscribe(gr.batchCalls(_)):Zr;return h.updateResult(),N},[h,g]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),x.useEffect(()=>{h.setOptions(l)},[l,h]),S$(l,p))throw jE(l,h,a);if(x$({result:p,errorResetBoundary:a,throwOnError:l.throwOnError,query:d,suspense:l.suspense}))throw p.error;if((S=(j=s.getDefaultOptions().queries)==null?void 0:j._experimental_afterQuery)==null||S.call(j,l,p),l.experimental_prefetchInRender&&!Lo&&j$(p,n)){const _=f?jE(l,h,a):d==null?void 0:d.promise;_==null||_.catch(Zr).finally(()=>{h.updateResult()})}return l.notifyOnChangeProps?p:h.trackResult(p)}function bt(e,t){return _$(e,a$)}function ht(e,t){const r=Fe(),[n]=x.useState(()=>new u$(r,e));x.useEffect(()=>{n.setOptions(e)},[n,e]);const a=x.useSyncExternalStore(x.useCallback(l=>n.subscribe(gr.batchCalls(l)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=x.useCallback((l,d)=>{n.mutate(l,d).catch(Zr)},[n]);if(a.error&&Dw(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:s,mutateAsync:a.mutate}}const N$="modulepreload",O$=function(e){return"/"+e},SE={},Iw=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let l=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));a=l(r.map(h=>{if(h=O$(h),h in SE)return;SE[h]=!0;const p=h.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":N$,p||(y.as="script"),y.crossOrigin="",y.href=h,f&&y.setAttribute("nonce",f),document.head.appendChild(y),p)return new Promise((v,j)=>{y.addEventListener("load",v),y.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return a.then(l=>{for(const d of l||[])d.status==="rejected"&&s(d.reason);return t().catch(s)})};function Tp(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function E$(e,t,r,n){function a(s){return s instanceof r?s:new r(function(l){l(s)})}return new(r||(r=Promise))(function(s,l){function d(p){try{h(n.next(p))}catch(g){l(g)}}function f(p){try{h(n.throw(p))}catch(g){l(g)}}function h(p){p.done?s(p.value):a(p.value).then(d,f)}h((n=n.apply(e,t||[])).next())})}const A$=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Lw extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class C$ extends Lw{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class _E extends Lw{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class NE extends Lw{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var dx;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(dx||(dx={}));class P${constructor(t,{headers:r={},customFetch:n,region:a=dx.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=A$(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return E$(this,arguments,void 0,function*(r,n={}){var a;let s,l;try{const{headers:d,method:f,body:h,signal:p,timeout:g}=n;let y={},{region:v}=n;v||(v=this.region);const j=new URL(`${this.url}/${r}`);v&&v!=="any"&&(y["x-region"]=v,j.searchParams.set("forceFunctionRegion",v));let S;h&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",S=h):typeof h=="string"?(y["Content-Type"]="text/plain",S=h):typeof FormData<"u"&&h instanceof FormData?S=h:(y["Content-Type"]="application/json",S=JSON.stringify(h)):h&&typeof h!="string"&&!(typeof Blob<"u"&&h instanceof Blob)&&!(h instanceof ArrayBuffer)&&!(typeof FormData<"u"&&h instanceof FormData)?S=JSON.stringify(h):S=h;let _=p;g&&(l=new AbortController,s=setTimeout(()=>l.abort(),g),p?(_=l.signal,p.addEventListener("abort",()=>l.abort())):_=l.signal);const N=yield this.fetch(j.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),d),body:S,signal:_}).catch(D=>{throw new C$(D)}),O=N.headers.get("x-relay-error");if(O&&O==="true")throw new _E(N);if(!N.ok)throw new NE(N);let E=((a=N.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),C;return E==="application/json"?C=yield N.json():E==="application/octet-stream"||E==="application/pdf"?C=yield N.blob():E==="text/event-stream"?C=N:E==="multipart/form-data"?C=yield N.formData():C=yield N.text(),{data:C,error:null,response:N}}catch(d){return{data:null,error:d,response:d instanceof NE||d instanceof _E?d.context:void 0}}finally{s&&clearTimeout(s)}})}}var k$=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},T$=class{constructor(e){var t,r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(n=e.urlLengthLimit)!==null&&n!==void 0?n:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let l=null,d=null,f=null,h=s.status,p=s.statusText;if(s.ok){var g,y;if(r.method!=="HEAD"){var v;const N=await s.text();N===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((v=r.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?d=N:d=JSON.parse(N))}const S=(g=r.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),_=(y=s.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");S&&_&&_.length>1&&(f=parseInt(_[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(d)&&(d.length>1?(l={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var j;const S=await s.text();try{l=JSON.parse(S),Array.isArray(l)&&s.status===404&&(d=[],l=null,h=200,p="OK")}catch{s.status===404&&S===""?(h=204,p="No Content"):l={message:S}}if(l&&r.isMaybeSingle&&(!(l==null||(j=l.details)===null||j===void 0)&&j.includes("0 rows"))&&(l=null,h=200,p="OK"),l&&r.shouldThrowOnError)throw new k$(l)}return{error:l,data:d,count:f,status:h,statusText:p}});return this.shouldThrowOnError||(a=a.catch(s=>{var l;let d="",f="",h="";const p=s==null?void 0:s.cause;if(p){var g,y,v,j;const N=(g=p==null?void 0:p.message)!==null&&g!==void 0?g:"",O=(y=p==null?void 0:p.code)!==null&&y!==void 0?y:"";d=`${(v=s==null?void 0:s.name)!==null&&v!==void 0?v:"FetchError"}: ${s==null?void 0:s.message}`,d+=`

Caused by: ${(j=p==null?void 0:p.name)!==null&&j!==void 0?j:"Error"}: ${N}`,O&&(d+=` (${O})`),p!=null&&p.stack&&(d+=`
${p.stack}`)}else{var S;d=(S=s==null?void 0:s.stack)!==null&&S!==void 0?S:""}const _=this.url.toString().length;return(s==null?void 0:s.name)==="AbortError"||(s==null?void 0:s.code)==="ABORT_ERR"?(h="",f="Request was aborted (timeout or manual cancellation)",_>this.urlLengthLimit&&(f+=`. Note: Your request URL is ${_} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((p==null?void 0:p.name)==="HeadersOverflowError"||(p==null?void 0:p.code)==="UND_ERR_HEADERS_OVERFLOW")&&(h="",f="HTTP headers exceeded server limits (typically 16KB)",_>this.urlLengthLimit&&(f+=`. Your request URL is ${_} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(l=s==null?void 0:s.name)!==null&&l!==void 0?l:"FetchError"}: ${s==null?void 0:s.message}`,details:d,hint:f,code:h},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},D$=class extends T${select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:a=n}={}){const s=a?`${a}.order`:"order",l=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"offset":`${n}.offset`,s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(s,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:a=!1,format:s="text"}={}){var l;const d=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),f=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${f}"; options=${d};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const OE=new RegExp("[,()]");var ec=class extends D${eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&OE.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&OE.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const s=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},M$=class{constructor(e,{headers:t={},schema:r,fetch:n,urlLengthLimit:a=8e3}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n,this.urlLengthLimit=a}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},a=r?"HEAD":"GET";let s=!1;const l=(e??"*").split("").map(h=>/\s/.test(h)&&!s?"":(h==='"'&&(s=!s),h)).join(""),{url:d,headers:f}=this.cloneRequestState();return d.searchParams.set("select",l),n&&f.append("Prefer",`count=${n}`),new ec({method:a,url:d,headers:f,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const a="POST",{url:s,headers:l}=this.cloneRequestState();if(t&&l.append("Prefer",`count=${t}`),r||l.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((f,h)=>f.concat(Object.keys(h)),[]);if(d.length>0){const f=[...new Set(d)].map(h=>`"${h}"`);s.searchParams.set("columns",f.join(","))}}return new ec({method:a,url:s,headers:l,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:a=!0}={}){var s;const l="POST",{url:d,headers:f}=this.cloneRequestState();if(f.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&d.searchParams.set("on_conflict",t),n&&f.append("Prefer",`count=${n}`),a||f.append("Prefer","missing=default"),Array.isArray(e)){const h=e.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(h.length>0){const p=[...new Set(h)].map(g=>`"${g}"`);d.searchParams.set("columns",p.join(","))}}return new ec({method:l,url:d,headers:f,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var r;const n="PATCH",{url:a,headers:s}=this.cloneRequestState();return t&&s.append("Prefer",`count=${t}`),new ec({method:n,url:a,headers:s,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new ec({method:r,url:n,headers:a,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function md(e){"@babel/helpers - typeof";return md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},md(e)}function R$(e,t){if(md(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(md(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function I$(e){var t=R$(e,"string");return md(t)=="symbol"?t:t+""}function L$(e,t,r){return(t=I$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EE(Object(r),!0).forEach(function(n){L$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var B$=class HT{constructor(t,{headers:r={},schema:n,fetch:a,timeout:s,urlLengthLimit:l=8e3}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.urlLengthLimit=l;const d=a??globalThis.fetch;s!==void 0&&s>0?this.fetch=(f,h)=>{const p=new AbortController,g=setTimeout(()=>p.abort(),s),y=h==null?void 0:h.signal;if(y){if(y.aborted)return clearTimeout(g),d(f,h);const v=()=>{clearTimeout(g),p.abort()};return y.addEventListener("abort",v,{once:!0}),d(f,Vh(Vh({},h),{},{signal:p.signal})).finally(()=>{clearTimeout(g),y.removeEventListener("abort",v)})}return d(f,Vh(Vh({},h),{},{signal:p.signal})).finally(()=>clearTimeout(g))}:this.fetch=d}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new M$(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new HT(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,r={},{head:n=!1,get:a=!1,count:s}={}){var l;let d;const f=new URL(`${this.url}/rpc/${t}`);let h;const p=v=>v!==null&&typeof v=="object"&&(!Array.isArray(v)||v.some(p)),g=n&&Object.values(r).some(p);g?(d="POST",h=r):n||a?(d=n?"HEAD":"GET",Object.entries(r).filter(([v,j])=>j!==void 0).map(([v,j])=>[v,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([v,j])=>{f.searchParams.append(v,j)})):(d="POST",h=r);const y=new Headers(this.headers);return g?y.set("Prefer",s?`count=${s},return=minimal`:"return=minimal"):s&&y.set("Prefer",`count=${s}`),new ec({method:d,url:f,headers:y,schema:this.schemaName,body:h,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}};class $${constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const a=n.node,s=parseInt(a.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const U$="2.95.3",z$=`realtime-js/${U$}`,q$="1.0.0",VT="2.0.0",AE=VT,fx=1e4,F$=1e3,K$=100;var ps;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ps||(ps={}));var mr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(mr||(mr={}));var da;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(da||(da={}));var hx;(function(e){e.websocket="websocket"})(hx||(hx={}));var go;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(go||(go={}));class Q${constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},l=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(t,r,n){var a,s;const l=t.topic,d=(a=t.ref)!==null&&a!==void 0?a:"",f=(s=t.join_ref)!==null&&s!==void 0?s:"",h=t.payload.event,p=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},g=Object.keys(p).length===0?"":JSON.stringify(p);if(f.length>255)throw new Error(`joinRef length ${f.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`metadata length ${g.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+d.length+l.length+h.length+g.length,v=new ArrayBuffer(this.HEADER_LENGTH+y);let j=new DataView(v),S=0;j.setUint8(S++,this.KINDS.userBroadcastPush),j.setUint8(S++,f.length),j.setUint8(S++,d.length),j.setUint8(S++,l.length),j.setUint8(S++,h.length),j.setUint8(S++,g.length),j.setUint8(S++,r),Array.from(f,N=>j.setUint8(S++,N.charCodeAt(0))),Array.from(d,N=>j.setUint8(S++,N.charCodeAt(0))),Array.from(l,N=>j.setUint8(S++,N.charCodeAt(0))),Array.from(h,N=>j.setUint8(S++,N.charCodeAt(0))),Array.from(g,N=>j.setUint8(S++,N.charCodeAt(0)));var _=new Uint8Array(v.byteLength+n.byteLength);return _.set(new Uint8Array(v),0),_.set(new Uint8Array(n),v.byteLength),_.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,s,l,d,f]=n;return r({join_ref:a,ref:s,topic:l,event:d,payload:f})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),s=r.getUint8(2),l=r.getUint8(3),d=r.getUint8(4);let f=this.HEADER_LENGTH+4;const h=n.decode(t.slice(f,f+a));f=f+a;const p=n.decode(t.slice(f,f+s));f=f+s;const g=n.decode(t.slice(f,f+l));f=f+l;const y=t.slice(f,t.byteLength),v=d===this.JSON_ENCODING?JSON.parse(n.decode(y)):y,j={type:this.BROADCAST_EVENT,event:p,payload:v};return l>0&&(j.meta=JSON.parse(g)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:j}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class GT{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ct;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ct||(Ct={}));const CE=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((s,l)=>(s[l]=H$(l,e,t,a),s),{}):{}},H$=(e,t,r,n)=>{const a=t.find(d=>d.name===e),s=a==null?void 0:a.type,l=r[e];return s&&!n.includes(s)?YT(s,l):mx(l)},YT=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return W$(t,r)}switch(e){case Ct.bool:return V$(t);case Ct.float4:case Ct.float8:case Ct.int2:case Ct.int4:case Ct.int8:case Ct.numeric:case Ct.oid:return G$(t);case Ct.json:case Ct.jsonb:return Y$(t);case Ct.timestamp:return X$(t);case Ct.abstime:case Ct.date:case Ct.daterange:case Ct.int4range:case Ct.int8range:case Ct.money:case Ct.reltime:case Ct.text:case Ct.time:case Ct.timestamptz:case Ct.timetz:case Ct.tsrange:case Ct.tstzrange:return mx(t);default:return mx(t)}},mx=e=>e,V$=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},G$=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Y$=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},W$=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let s;const l=e.slice(1,r);try{s=JSON.parse("["+l+"]")}catch{s=l?l.split(","):[]}return s.map(d=>YT(t,d))}return e},X$=e=>typeof e=="string"?e.replace(" ","T"):e,WT=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class i0{constructor(t,r,n={},a=fx){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var PE;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(PE||(PE={}));class cd{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:s,onLeave:l,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=cd.syncState(this.state,a,s,l),this.pendingDiffs.forEach(f=>{this.state=cd.syncDiff(this.state,f,s,l)}),this.pendingDiffs=[],d()}),this.channel._on(n.diff,{},a=>{const{onJoin:s,onLeave:l,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=cd.syncDiff(this.state,a,s,l),d())}),this.onJoin((a,s,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:s,newPresences:l})}),this.onLeave((a,s,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:s,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const s=this.cloneDeep(t),l=this.transformState(r),d={},f={};return this.map(s,(h,p)=>{l[h]||(f[h]=p)}),this.map(l,(h,p)=>{const g=s[h];if(g){const y=p.map(_=>_.presence_ref),v=g.map(_=>_.presence_ref),j=p.filter(_=>v.indexOf(_.presence_ref)<0),S=g.filter(_=>y.indexOf(_.presence_ref)<0);j.length>0&&(d[h]=j),S.length>0&&(f[h]=S)}else d[h]=p}),this.syncDiff(s,{joins:d,leaves:f},n,a)}static syncDiff(t,r,n,a){const{joins:s,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(s,(d,f)=>{var h;const p=(h=t[d])!==null&&h!==void 0?h:[];if(t[d]=this.cloneDeep(f),p.length>0){const g=t[d].map(v=>v.presence_ref),y=p.filter(v=>g.indexOf(v.presence_ref)<0);t[d].unshift(...y)}n(d,p,f)}),this.map(l,(d,f)=>{let h=t[d];if(!h)return;const p=f.map(g=>g.presence_ref);h=h.filter(g=>p.indexOf(g.presence_ref)<0),t[d]=h,a(d,h,f),h.length===0&&delete t[d]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var kE;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(kE||(kE={}));var ud;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ud||(ud={}));var ui;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ui||(ui={}));class ac{constructor(t,r={config:{}},n){var a,s;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=mr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new i0(this,da.join,this.params,this.timeout),this.rejoinTimer=new GT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=mr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=mr.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=mr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=mr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=mr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(da.reply,{},(l,d)=>{this._trigger(this._replyEventName(d),l)}),this.presence=new cd(this),this.broadcastEndpointURL=WT(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,s;if(this.socket.isConnected()||this.socket.connect(),this.state==mr.closed){const{config:{broadcast:l,presence:d,private:f}}=this.params,h=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(v=>v.filter))!==null&&a!==void 0?a:[],p=!!this.bindings[ud.PRESENCE]&&this.bindings[ud.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,g={},y={broadcast:l,presence:Object.assign(Object.assign({},d),{enabled:p}),postgres_changes:h,private:f};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(v=>t==null?void 0:t(ui.CHANNEL_ERROR,v)),this._onClose(()=>t==null?void 0:t(ui.CLOSED)),this.updateJoinPayload(Object.assign({config:y},g)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:v})=>{var j;if(this.socket._isManualToken()||this.socket.setAuth(),v===void 0){t==null||t(ui.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,_=(j=S==null?void 0:S.length)!==null&&j!==void 0?j:0,N=[];for(let O=0;O<_;O++){const E=S[O],{filter:{event:C,schema:D,table:T,filter:M}}=E,R=v&&v[O];if(R&&R.event===C&&ac.isFilterValueEqual(R.schema,D)&&ac.isFilterValueEqual(R.table,T)&&ac.isFilterValueEqual(R.filter,M))N.push(Object.assign(Object.assign({},E),{id:R.id}));else{this.unsubscribe(),this.state=mr.errored,t==null||t(ui.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,t&&t(ui.SUBSCRIBED);return}}).receive("error",v=>{this.state=mr.errored,t==null||t(ui.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ui.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===mr.joined&&t===ud.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;if(r==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(d.status===202)return{success:!0};let f=d.statusText;try{const h=await d.json();f=h.error||h.message||f}catch{}return Promise.reject(new Error(f))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:l}=t,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=h.body)===null||a===void 0?void 0:a.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var l,d,f;const h=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((f=(d=(l=this.params)===null||l===void 0?void 0:l.config)===null||d===void 0?void 0:d.broadcast)===null||f===void 0)&&f.ack)&&s("ok"),h.receive("ok",()=>s("ok")),h.receive("error",()=>s("error")),h.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=mr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(da.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new i0(this,da.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=mr.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,s=setTimeout(()=>a.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(s),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new i0(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>K$){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,s;const l=t.toLocaleLowerCase(),{close:d,error:f,leave:h,join:p}=da;if(n&&[d,f,h,p].indexOf(l)>=0&&n!==this._joinRef())return;let y=this._onMessage(l,r,n);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(v=>{var j,S,_;return((j=v.filter)===null||j===void 0?void 0:j.event)==="*"||((_=(S=v.filter)===null||S===void 0?void 0:S.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===l}).map(v=>v.callback(y,n)):(s=this.bindings[l])===null||s===void 0||s.filter(v=>{var j,S,_,N,O,E;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in v){const C=v.id,D=(j=v.filter)===null||j===void 0?void 0:j.event;return C&&((S=r.ids)===null||S===void 0?void 0:S.includes(C))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((_=r.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const C=(O=(N=v==null?void 0:v.filter)===null||N===void 0?void 0:N.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return C==="*"||C===((E=r==null?void 0:r.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===l}).map(v=>{if(typeof y=="object"&&"ids"in y){const j=y.data,{schema:S,table:_,commit_timestamp:N,type:O,errors:E}=j;y=Object.assign(Object.assign({},{schema:S,table:_,commit_timestamp:N,eventType:O,new:{},old:{},errors:E}),this._getPayloadRecords(j))}v.callback(y,n)})}_isClosed(){return this.state===mr.closed}_isJoined(){return this.state===mr.joined}_isJoining(){return this.state===mr.joining}_isLeaving(){return this.state===mr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),s={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(s):this.bindings[a]=[s],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var s;return!(((s=a.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&ac.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(da.close,{},t)}_onError(t){this._on(da.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=mr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=CE(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=CE(t.columns,t.old_record)),r}}const s0=()=>{},Gh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Z$=[1e3,2e3,5e3,1e4],J$=1e4,eU=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class tU{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=fx,this.transport=null,this.heartbeatIntervalMs=Gh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=s0,this.ref=0,this.reconnectTimer=null,this.vsn=AE,this.logger=s0,this.conn=null,this.sendBuffer=[],this.serializer=new Q$,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...s)=>a(...s):(...s)=>fetch(...s),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${hx.websocket}`,this.httpEndpoint=WT(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=$$.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return r==="ok"&&this._remove(t),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ps.connecting:return go.Connecting;case ps.open:return go.Open;case ps.closing:return go.Closing;default:return go.Closed}}isConnected(){return this.connectionState()===go.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(s=>s.topic===n);if(a)return a;{const s=new ac(`realtime:${t}`,r,this);return this.channels.push(s),s}}push(t){const{topic:r,event:n,payload:a,ref:s}=t,l=()=>{this.encode(t,d=>{var f;(f=this.conn)===null||f===void 0||f.send(d)})};this.log("push",`${r} ${n} (${s})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(F$,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Gh.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const h=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",h)}catch(p){this.log("error","error in heartbeat callback",p)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:a,payload:s,ref:l}=r,d=l?`(${l})`:"",f=s.status||"";this.log("receive",`${f} ${n} ${a} ${d}`.trim(),s),this.channels.filter(h=>h._isMember(n)).forEach(h=>h._trigger(a,s,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===ps.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ps.open||this.conn.readyState===ps.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(da.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([eU],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const s={access_token:r,version:z$};r&&a.updateJoinPayload(s),a.joinedOnce&&a._isJoined()&&a._push(da.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new GT(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Gh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,s,l,d,f,h,p,g,y,v;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:fx,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Gh.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(d=t==null?void 0:t.heartbeatCallback)!==null&&d!==void 0?d:s0,this.vsn=(f=t==null?void 0:t.vsn)!==null&&f!==void 0?f:AE,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=t==null?void 0:t.reconnectAfterMs)!==null&&h!==void 0?h:(j=>Z$[j-1]||J$),this.vsn){case q$:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:((j,S)=>S(JSON.stringify(j))),this.decode=(g=t==null?void 0:t.decode)!==null&&g!==void 0?g:((j,S)=>S(JSON.parse(j)));break;case VT:this.encode=(y=t==null?void 0:t.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(v=t==null?void 0:t.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var pd=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function rU(e,t,r){const n=new URL(t,e);if(r)for(const[a,s]of Object.entries(r))s!==void 0&&n.searchParams.set(a,s);return n.toString()}async function nU(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function aU(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:a,body:s,headers:l}){const d=rU(e.baseUrl,n,a),f=await nU(e.auth),h=await t(d,{method:r,headers:{...s?{"Content-Type":"application/json"}:{},...f,...l},body:s?JSON.stringify(s):void 0}),p=await h.text(),g=(h.headers.get("content-type")||"").includes("application/json"),y=g&&p?JSON.parse(p):p;if(!h.ok){const v=g?y:void 0,j=v==null?void 0:v.error;throw new pd((j==null?void 0:j.message)??`Request failed with status ${h.status}`,{status:h.status,icebergType:j==null?void 0:j.type,icebergCode:j==null?void 0:j.code,details:v})}return{status:h.status,headers:h.headers,data:y}}}}function Yh(e){return e.join("")}var iU=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Yh(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Yh(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Yh(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Yh(e.namespace)}`}),!0}catch(t){if(t instanceof pd&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof pd&&r.status===409)return;throw r}}};function Kl(e){return e.join("")}var sU=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Kl(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Kl(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Kl(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Kl(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Kl(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Kl(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof pd&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof pd&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},oU=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=aU({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new iU(this.client,t),this.tableOps=new sU(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Dp=class extends Error{constructor(e,t="storage",r,n){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function Mp(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Wh=class extends Dp{constructor(e,t,r,n="storage"){super(e,n,t,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},XT=class extends Dp{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const lU=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),cU=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},px=e=>{if(Array.isArray(e))return e.map(r=>px(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[a]=px(n)}),t},uU=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function gd(e){"@babel/helpers - typeof";return gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gd(e)}function dU(e,t){if(gd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fU(e){var t=dU(e,"string");return gd(t)=="symbol"?t:t+""}function hU(e,t,r){return(t=fU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TE(Object(r),!0).forEach(function(n){hU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const DE=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},mU=async(e,t,r,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e,s=a.status||500;if(typeof a.json=="function")a.json().then(l=>{const d=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||s+"";t(new Wh(DE(l),s,d,n))}).catch(()=>{if(n==="vectors"){const l=s+"";t(new Wh(a.statusText||`HTTP ${s} error`,s,l,n))}else{const l=s+"";t(new Wh(a.statusText||`HTTP ${s} error`,s,l,n))}});else{const l=s+"";t(new Wh(a.statusText||`HTTP ${s} error`,s,l,n))}}else t(new XT(DE(e),e,n))},pU=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!n?$e($e({},a),r):(cU(n)?(a.headers=$e({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),$e($e({},a),r))};async function Vu(e,t,r,n,a,s,l){return new Promise((d,f)=>{e(r,pU(t,n,a,s)).then(h=>{if(!h.ok)throw h;if(n!=null&&n.noResolveJson)return h;if(l==="vectors"){const p=h.headers.get("content-type");if(h.headers.get("content-length")==="0"||h.status===204)return{};if(!p||!p.includes("application/json"))return{}}return h.json()}).then(h=>d(h)).catch(h=>mU(h,f,n,l))})}function ZT(e="storage"){return{get:async(t,r,n,a)=>Vu(t,"GET",r,n,a,void 0,e),post:async(t,r,n,a,s)=>Vu(t,"POST",r,a,s,n,e),put:async(t,r,n,a,s)=>Vu(t,"PUT",r,a,s,n,e),head:async(t,r,n,a)=>Vu(t,"HEAD",r,$e($e({},n),{},{noResolveJson:!0}),a,void 0,e),remove:async(t,r,n,a,s)=>Vu(t,"DELETE",r,a,s,n,e)}}const gU=ZT("storage"),{get:yd,post:la,put:gx,head:yU,remove:Bw}=gU,En=ZT("vectors");var $c=class{constructor(e,t={},r,n="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=lU(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Mp(r))return{data:null,error:r};throw r}}},vU=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Mp(t))return{data:null,error:t};throw t}}};let JT;JT=Symbol.toStringTag;var bU=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[JT]="BlobDownloadBuilder",this.promise=null}asStream(){return new vU(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Mp(t))return{data:null,error:t};throw t}}};const xU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ME={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var wU=class extends $c{constructor(e,t={},r,n){super(e,t,n,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,n){var a=this;return a.handleOperation(async()=>{let s;const l=$e($e({},ME),n);let d=$e($e({},a.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const f=l.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",l.cacheControl),f&&s.append("metadata",a.encodeMetadata(f)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.has("cacheControl")||s.append("cacheControl",l.cacheControl),f&&!s.has("metadata")&&s.append("metadata",a.encodeMetadata(f))):(s=r,d["cache-control"]=`max-age=${l.cacheControl}`,d["content-type"]=l.contentType,f&&(d["x-metadata"]=a.toBase64(a.encodeMetadata(f))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!l.duplex&&(l.duplex="half")),n!=null&&n.headers&&(d=$e($e({},d),n.headers));const h=a._removeEmptyFolders(t),p=a._getFinalPath(h),g=await(e=="PUT"?gx:la)(a.fetch,`${a.url}/object/${p}`,s,$e({headers:d},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{path:h,id:g.Id,fullPath:g.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var a=this;const s=a._removeEmptyFolders(e),l=a._getFinalPath(s),d=new URL(a.url+`/object/upload/sign/${l}`);return d.searchParams.set("token",t),a.handleOperation(async()=>{let f;const h=$e({upsert:ME.upsert},n),p=$e($e({},a.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&r instanceof Blob?(f=new FormData,f.append("cacheControl",h.cacheControl),f.append("",r)):typeof FormData<"u"&&r instanceof FormData?(f=r,f.append("cacheControl",h.cacheControl)):(f=r,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType),{path:s,fullPath:(await gx(a.fetch,d.toString(),f,{headers:p})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(e);const a=$e({},r.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const s=await la(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:a}),l=new URL(r.url+s.url),d=l.searchParams.get("token");if(!d)throw new Dp("No token returned by API");return{signedUrl:l.toString(),path:e,token:d}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;return n.handleOperation(async()=>await la(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}))}async copy(e,t,r){var n=this;return n.handleOperation(async()=>({path:(await la(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(e,t,r){var n=this;return n.handleOperation(async()=>{let a=n._getFinalPath(e),s=await la(n.fetch,`${n.url}/object/sign/${a}`,$e({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${s.signedURL}${l}`)}})}async createSignedUrls(e,t,r){var n=this;return n.handleOperation(async()=>{const a=await la(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a.map(l=>$e($e({},l),{},{signedUrl:l.signedURL?encodeURI(`${n.url}${l.signedURL}${s}`):null}))})}download(e,t,r){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=a?`?${a}`:"",l=this._getFinalPath(e),d=()=>yd(this.fetch,`${this.url}/${n}/${l}${s}`,{headers:this.headers,noResolveJson:!0},r);return new bU(d,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>px(await yd(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await yU(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Mp(n)&&n instanceof XT){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&n.push(a);const s=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&n.push(l);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${r}${d}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await Bw(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var n=this;return n.handleOperation(async()=>{const a=$e($e($e({},xU),t),{},{prefix:e||""});return await la(n.fetch,`${n.url}/object/list/${n.bucketId}`,a,{headers:n.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const n=$e({},e);return await la(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const jU="2.95.3",Qd={"X-Client-Info":`storage-js/${jU}`};var SU=class extends $c{constructor(e,t={},r,n){const a=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."));const s=a.href.replace(/\/$/,""),l=$e($e({},Qd),t);super(s,l,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await yd(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await yd(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await la(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await gx(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await la(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Bw(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},_U=class extends $c{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=$e($e({},Qd),t);super(n,a,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await la(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),a=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return await yd(t.fetch,a,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Bw(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!uU(e))throw new Dp("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new oU({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(a,s){const l=a[s];return typeof l!="function"?l:async(...d)=>{try{return{data:await l.apply(a,d),error:null}}catch(f){if(n)throw f;return{data:null,error:f}}}}})}},NU=class extends $c{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=$e($e({},Qd),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await En.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await En.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await En.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await En.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},OU=class extends $c{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=$e($e({},Qd),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await En.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await En.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await En.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await En.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await En.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},EU=class extends $c{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=$e($e({},Qd),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await En.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await En.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await En.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await En.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},AU=class extends EU{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new CU(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},CU=class extends NU{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,$e($e({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,$e($e({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new PU(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},PU=class extends OU{constructor(e,t,r,n,a){super(e,t,a),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,$e($e({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,$e($e({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,$e($e({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,$e($e({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,$e($e({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},kU=class extends SU{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new wU(this.url,this.headers,e,this.fetch)}get vectors(){return new AU(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new _U(this.url+"/iceberg",this.headers,this.fetch)}};const eD="2.95.3",tc=30*1e3,yx=3,o0=yx*tc,TU="http://localhost:9999",DU="supabase.auth.token",MU={"X-Client-Info":`gotrue-js/${eD}`},vx="X-Supabase-Api-Version",tD={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},RU=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,IU=600*1e3;class vd extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Te(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class LU extends vd{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function BU(e){return Te(e)&&e.name==="AuthApiError"}class yo extends vd{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ti extends vd{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class On extends Ti{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function l0(e){return Te(e)&&e.name==="AuthSessionMissingError"}class Ql extends Ti{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xh extends Ti{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Zh extends Ti{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $U(e){return Te(e)&&e.name==="AuthImplicitGrantRedirectError"}class RE extends Ti{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class UU extends Ti{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class bx extends Ti{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function c0(e){return Te(e)&&e.name==="AuthRetryableFetchError"}class IE extends Ti{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class xx extends Ti{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Cm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),LE=` 	
\r=`.split(""),zU=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<LE.length;t+=1)e[LE[t].charCodeAt(0)]=-2;for(let t=0;t<Cm.length;t+=1)e[Cm[t].charCodeAt(0)]=t;return e})();function BE(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Cm[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Cm[n]),t.queuedBits-=6}}function rD(e,t,r){const n=zU[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function $E(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=l=>{KU(l,n,r)};for(let l=0;l<e.length;l+=1)rD(e.charCodeAt(l),a,s);return t.join("")}function qU(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function FU(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}qU(n,t)}}function KU(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function oc(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)rD(e.charCodeAt(a),r,n);return new Uint8Array(t)}function QU(e){const t=[];return FU(e,r=>t.push(r)),new Uint8Array(t)}function bo(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>BE(a,r,n)),BE(null,r,n),t.join("")}function HU(e){return Math.round(Date.now()/1e3)+e}function VU(){return Symbol("auth-callback")}const Br=()=>typeof window<"u"&&typeof document<"u",lo={tested:!1,writable:!1},nD=()=>{if(!Br())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(lo.tested)return lo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),lo.tested=!0,lo.writable=!0}catch{lo.tested=!0,lo.writable=!1}return lo.writable};function GU(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,s)=>{t[s]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const aD=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),YU=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",rc=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},co=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Lr=async(e,t)=>{await e.removeItem(t)};class Rp{constructor(){this.promise=new Rp.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Rp.promiseConstructor=Promise;function Jh(e){const t=e.split(".");if(t.length!==3)throw new xx("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!RU.test(t[n]))throw new xx("JWT not in base64url format");return{header:JSON.parse($E(t[0])),payload:JSON.parse($E(t[1])),signature:oc(t[2]),raw:{header:t[0],payload:t[1]}}}async function WU(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function XU(e,t){return new Promise((n,a)=>{(async()=>{for(let s=0;s<1/0;s++)try{const l=await e(s);if(!t(s,null,l)){n(l);return}}catch(l){if(!t(s,l)){a(l);return}}})()})}function ZU(e){return("0"+e.toString(16)).substr(-2)}function JU(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let s=0;s<56;s++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,ZU).join("")}async function ez(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(s=>String.fromCharCode(s)).join("")}async function tz(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await ez(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Hl(e,t,r=!1){const n=JU();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await rc(e,`${t}-code-verifier`,a);const s=await tz(n);return[s,n===s?"plain":"s256"]}const rz=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function nz(e){const t=e.headers.get(vx);if(!t||!t.match(rz))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function az(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function iz(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const sz=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Vl(e){if(!sz.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function u0(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function oz(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function UE(e){return JSON.parse(JSON.stringify(e))}const fo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),lz=[502,503,504];async function zE(e){var t;if(!YU(e))throw new bx(fo(e),0);if(lz.includes(e.status))throw new bx(fo(e),e.status);let r;try{r=await e.json()}catch(s){throw new yo(fo(s),s)}let n;const a=nz(e);if(a&&a.getTime()>=tD["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new IE(fo(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new On}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,l)=>s&&typeof l=="string",!0))throw new IE(fo(r),e.status,r.weak_password.reasons);throw new LU(fo(r),e.status||500,n)}const cz=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Be(e,t,r,n){var a;const s=Object.assign({},n==null?void 0:n.headers);s[vx]||(s[vx]=tD["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const l=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const d=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",f=await uz(e,t,r+d,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(f):{data:Object.assign({},f),error:null}}async function uz(e,t,r,n,a,s){const l=cz(t,n,a,s);let d;try{d=await e(r,Object.assign({},l))}catch(f){throw console.error(f),new bx(fo(f),0)}if(d.ok||await zE(d),n!=null&&n.noResolveJson)return d;try{return await d.json()}catch(f){await zE(f)}}function oa(e){var t;let r=null;hz(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=HU(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function qE(e){const t=oa(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function vs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function dz(e){return{data:e,error:null}}function fz(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s}=e,l=Tp(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s},f=Object.assign({},l);return{data:{properties:d,user:f},error:null}}function FE(e){return e}function hz(e){return e.access_token&&e.refresh_token&&e.expires_in}const d0=["global","local","others"];class mz{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=aD(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=d0[0]){if(d0.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${d0.join(", ")}`);try{return await Be(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Te(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Be(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:vs})}catch(n){if(Te(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Tp(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Be(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:fz,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Te(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Be(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:vs})}catch(r){if(Te(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,s,l,d,f;try{const h={nextPage:null,lastPage:0,total:0},p=await Be(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:FE});if(p.error)throw p.error;const g=await p.json(),y=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(f=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return v.length>0&&(v.forEach(j=>{const S=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(j.split(";")[1].split("=")[1]);h[`${_}Page`]=S}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(Te(h))return{data:{users:[]},error:h};throw h}}async getUserById(t){Vl(t);try{return await Be(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:vs})}catch(r){if(Te(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Vl(t);try{return await Be(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:vs})}catch(n){if(Te(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Vl(t);try{return await Be(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:vs})}catch(n){if(Te(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Vl(t.userId);try{const{data:r,error:n}=await Be(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Vl(t.userId),Vl(t.id);try{return{data:await Be(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,s,l,d,f;try{const h={nextPage:null,lastPage:0,total:0},p=await Be(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:FE});if(p.error)throw p.error;const g=await p.json(),y=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(f=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return v.length>0&&(v.forEach(j=>{const S=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(j.split(";")[1].split("=")[1]);h[`${_}Page`]=S}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(Te(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(t){try{return await Be(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Be(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Be(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Te(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Be(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Be(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Te(r))return{data:null,error:r};throw r}}}function KE(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Gl={debug:!!(globalThis&&nD()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class iD extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class pz extends iD{}async function gz(e,t,r){Gl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Gl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Gl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Gl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Gl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new pz(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Gl.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function yz(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function sD(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function vz(e){return parseInt(e,16)}function bz(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function xz(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:s=new Date,nonce:l,notBefore:d,requestId:f,resources:h,scheme:p,uri:g,version:y}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const v=sD(e.address),j=p?`${p}://${n}`:n,S=e.statement?`${e.statement}
`:"",_=`${j} wants you to sign in with your Ethereum account:
${v}

${S}`;let N=`URI: ${g}
Version: ${y}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${s.toISOString()}`;if(a&&(N+=`
Expiration Time: ${a.toISOString()}`),d&&(N+=`
Not Before: ${d.toISOString()}`),f&&(N+=`
Request ID: ${f}`),h){let O=`
Resources:`;for(const E of h){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);O+=`
- ${E}`}N+=O}return`${_}
${N}`}class or extends Error{constructor({message:t,code:r,cause:n,name:a}){var s;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(s=a??(n instanceof Error?n.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=r}}class Pm extends or{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function wz({error:e,options:t}){var r,n,a;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new or({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=s.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new or({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=s.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new or({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=s.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new or({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new or({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new or({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new or({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new or({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(oD(l)){if(s.rp.id!==l)return new or({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new or({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new or({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new or({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new or({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function jz({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new or({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new or({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(oD(n)){if(r.rpId!==n)return new or({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new or({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new or({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new or({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Sz{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const _z=new Sz;function Nz(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=Tp(e,["challenge","user","excludeCredentials"]),s=oc(t).buffer,l=Object.assign(Object.assign({},r),{id:oc(r.id).buffer}),d=Object.assign(Object.assign({},a),{challenge:s,user:l});if(n&&n.length>0){d.excludeCredentials=new Array(n.length);for(let f=0;f<n.length;f++){const h=n[f];d.excludeCredentials[f]=Object.assign(Object.assign({},h),{id:oc(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return d}function Oz(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Tp(e,["challenge","allowCredentials"]),a=oc(t).buffer,s=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){s.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const d=r[l];s.allowCredentials[l]=Object.assign(Object.assign({},d),{id:oc(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return s}function Ez(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:bo(new Uint8Array(e.response.attestationObject)),clientDataJSON:bo(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Az(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:bo(new Uint8Array(a.authenticatorData)),clientDataJSON:bo(new Uint8Array(a.clientDataJSON)),signature:bo(new Uint8Array(a.signature)),userHandle:a.userHandle?bo(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function oD(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function QE(){var e,t;return!!(Br()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Cz(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Pm("Browser returned unexpected credential type",t)}:{data:null,error:new Pm("Empty credential response",t)}}catch(t){return{data:null,error:wz({error:t,options:e})}}}async function Pz(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Pm("Browser returned unexpected credential type",t)}:{data:null,error:new Pm("Empty credential response",t)}}catch(t){return{data:null,error:jz({error:t,options:e})}}}const kz={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Tz={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function km(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const s in a){const l=a[s];if(l!==void 0)if(Array.isArray(l))n[s]=l;else if(r(l))n[s]=l;else if(t(l)){const d=n[s];t(d)?n[s]=km(d,l):n[s]=km(l)}else n[s]=l}return n}function Dz(e,t){return km(kz,e,t||{})}function Mz(e,t){return km(Tz,e,t||{})}class Rz{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},s){var l;try{const{data:d,error:f}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!d)return{data:null,error:f};const h=a??_z.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:p}=d.webauthn.credential_options.publicKey;if(!p.name){const g=n;if(g)p.name=`${p.id}:${g}`;else{const v=(await this.client.getUser()).data.user,j=((l=v==null?void 0:v.user_metadata)===null||l===void 0?void 0:l.name)||(v==null?void 0:v.email)||(v==null?void 0:v.id)||"User";p.name=`${p.id}:${j}`}}p.displayName||(p.displayName=p.name)}switch(d.webauthn.type){case"create":{const p=Dz(d.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:g,error:y}=await Cz({publicKey:p,signal:h});return g?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}case"request":{const p=Mz(d.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:g,error:y}=await Pz(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:p,signal:h}));return g?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}}}catch(d){return Te(d)?{data:null,error:d}:{data:null,error:new yo("Unexpected error in challenge",d)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},s){if(!r)return{data:null,error:new vd("rpId is required for WebAuthn authentication")};try{if(!QE())return{data:null,error:new yo("Browser does not support WebAuthn",null)};const{data:l,error:d}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:s});if(!l)return{data:null,error:d};const{webauthn:f}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:f.type,rpId:r,rpOrigins:n,credential_response:f.credential_response}})}catch(l){return Te(l)?{data:null,error:l}:{data:null,error:new yo("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},s){if(!r)return{data:null,error:new vd("rpId is required for WebAuthn registration")};try{if(!QE())return{data:null,error:new yo("Browser does not support WebAuthn",null)};const{data:l,error:d}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(p=>{var g;return(g=p.data)===null||g===void 0?void 0:g.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===t&&y.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p==null?void 0:p.id}):void 0),{data:null,error:d};const{data:f,error:h}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:s});return f?this._verify({factorId:l.id,challengeId:f.challengeId,webauthn:{rpId:r,rpOrigins:n,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:h}}catch(l){return Te(l)?{data:null,error:l}:{data:null,error:new yo("Unexpected error in register",l)}}}}yz();const Iz={url:TU,storageKey:DU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:MU,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function HE(e,t,r){return await r()}const Yl={};class bd{get jwks(){var t,r;return(r=(t=Yl[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Yl[this.storageKey]=Object.assign(Object.assign({},Yl[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Yl[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Yl[this.storageKey]=Object.assign(Object.assign({},Yl[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},Iz),t);if(this.storageKey=s.storageKey,this.instanceID=(r=bd.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,bd.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Br()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new mz({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=aD(s.fetch),this.lock=s.lock||HE,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&Br()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=gz:this.lock=HE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Rz(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:nD()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=KE(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=KE(this.memoryStorage)),Br()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l);try{await this._notifyAllSubscribers(l.data.event,l.data.session,!1)}catch(d){this._debug("#broadcastChannel","error",d)}})}this.initialize().catch(l=>{this._debug("#initialize()","error",l)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${eD}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Br()&&(r=GU(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Br()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:s}=await this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),$U(s)){const f=(t=s.details)===null||t===void 0?void 0:t.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:s}}return{error:s}}const{session:l,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",d),await this._saveSession(l),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Te(r)?this._returnResult({error:r}):this._returnResult({error:new yo("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const s=await Be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:oa}),{data:l,error:d}=s;if(d||!l)return this._returnResult({data:{user:null,session:null},error:d});const f=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(s){if(Te(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(t){var r,n,a;try{let s;if("email"in t){const{email:p,password:g,options:y}=t;let v=null,j=null;this.flowType==="pkce"&&([v,j]=await Hl(this.storage,this.storageKey)),s=await Be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:p,password:g,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:v,code_challenge_method:j},xform:oa})}else if("phone"in t){const{phone:p,password:g,options:y}=t;s=await Be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:g,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},channel:(a=y==null?void 0:y.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:oa})}else throw new Xh("You must provide either an email or phone number and a password");const{data:l,error:d}=s;if(d||!l)return await Lr(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const f=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(s){if(await Lr(this.storage,`${this.storageKey}-code-verifier`),Te(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(t){try{let r;if("email"in t){const{email:s,password:l,options:d}=t;r=await Be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:l,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:qE})}else if("phone"in t){const{phone:s,password:l,options:d}=t;r=await Be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:l,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:qE})}else throw new Xh("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const s=new Ql;return this._returnResult({data:{user:null,session:null},error:s})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(Te(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,s,l,d,f,h,p,g,y;let v,j;if("message"in t)v=t.message,j=t.signature;else{const{chain:S,wallet:_,statement:N,options:O}=t;let E;if(Br())if(typeof _=="object")E=_;else{const U=window;if("ethereum"in U&&typeof U.ethereum=="object"&&"request"in U.ethereum&&typeof U.ethereum.request=="function")E=U.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=_}const C=new URL((r=O==null?void 0:O.url)!==null&&r!==void 0?r:window.location.href),D=await E.request({method:"eth_requestAccounts"}).then(U=>U).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const T=sD(D[0]);let M=(n=O==null?void 0:O.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!M){const U=await E.request({method:"eth_chainId"});M=vz(U)}const R={domain:C.host,address:T,statement:N,uri:C.href,version:"1",chainId:M,nonce:(a=O==null?void 0:O.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(l=(s=O==null?void 0:O.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(d=O==null?void 0:O.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(f=O==null?void 0:O.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(h=O==null?void 0:O.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(p=O==null?void 0:O.signInWithEthereum)===null||p===void 0?void 0:p.resources};v=xz(R),j=await E.request({method:"personal_sign",params:[bz(v),T]})}try{const{data:S,error:_}=await Be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:j},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:oa});if(_)throw _;if(!S||!S.session||!S.user){const N=new Ql;return this._returnResult({data:{user:null,session:null},error:N})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:_})}catch(S){if(Te(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async signInWithSolana(t){var r,n,a,s,l,d,f,h,p,g,y,v;let j,S;if("message"in t)j=t.message,S=t.signature;else{const{chain:_,wallet:N,statement:O,options:E}=t;let C;if(Br())if(typeof N=="object")C=N;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))C=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=N}const D=new URL((r=E==null?void 0:E.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in C&&C.signIn){const T=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E==null?void 0:E.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),O?{statement:O}:null));let M;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")M=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)M=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)j=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),S=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${D.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(a=(n=E==null?void 0:E.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((s=E==null?void 0:E.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((l=E==null?void 0:E.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((d=E==null?void 0:E.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((f=E==null?void 0:E.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((h=E==null?void 0:E.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((g=(p=E==null?void 0:E.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||g===void 0)&&g.length?["Resources",...E.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const T=await C.signMessage(new TextEncoder().encode(j),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=T}}try{const{data:_,error:N}=await Be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:bo(S)},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:oa});if(N)throw N;if(!_||!_.session||!_.user){const O=new Ql;return this._returnResult({data:{user:null,session:null},error:O})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:N})}catch(_){if(Te(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(t){const r=await co(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new UU;const{data:s,error:l}=await Be(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:oa});if(await Lr(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!s||!s.session||!s.user){const d=new Ql;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:a??null}),error:l})}catch(s){if(await Lr(this.storage,`${this.storageKey}-code-verifier`),Te(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:s,nonce:l}=t,d=await Be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:s,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:oa}),{data:f,error:h}=d;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!f||!f.session||!f.user){const p=new Ql;return this._returnResult({data:{user:null,session:null},error:p})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:h})}catch(r){if(Te(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,s,l;try{if("email"in t){const{email:d,options:f}=t;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await Hl(this.storage,this.storageKey));const{error:g}=await Be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},create_user:(n=f==null?void 0:f.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:f==null?void 0:f.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:g})}if("phone"in t){const{phone:d,options:f}=t,{data:h,error:p}=await Be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=f==null?void 0:f.data)!==null&&a!==void 0?a:{},create_user:(s=f==null?void 0:f.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(l=f==null?void 0:f.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:p})}throw new Xh("You must provide either an email or phone number.")}catch(d){if(await Lr(this.storage,`${this.storageKey}-code-verifier`),Te(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(t){var r,n;try{let a,s;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,s=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:d}=await Be(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:a,xform:oa});if(d)throw d;if(!l)throw new Error("An error occurred on token verification.");const f=l.session,h=l.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(a){if(Te(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a,s,l;try{let d=null,f=null;this.flowType==="pkce"&&([d,f]=await Hl(this.storage,this.storageKey));const h=await Be(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:f}),headers:this.headers,xform:dz});return!((s=h.data)===null||s===void 0)&&s.url&&Br()&&!(!((l=t.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(d){if(await Lr(this.storage,`${this.storageKey}-code-verifier`),Te(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new On;const{error:a}=await Be(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(Te(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:s}=t,{error:l}=await Be(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in t){const{phone:n,type:a,options:s}=t,{data:l,error:d}=await Be(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:d})}throw new Xh("You must provide either an email or phone number and a type")}catch(r){if(Te(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await co(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<o0:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await co(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=u0()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};t.user=oz(t.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:vs}):await this._useSession(async r=>{var n,a,s;const{data:l,error:d}=r;if(d)throw d;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new On}:await Be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&s!==void 0?s:void 0,xform:vs})})}catch(r){if(Te(r))return l0(r)&&(await this._removeSession(),await Lr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:s}=n;if(s)throw s;if(!a.session)throw new On;const l=a.session;let d=null,f=null;this.flowType==="pkce"&&t.email!=null&&([d,f]=await Hl(this.storage,this.storageKey));const{data:h,error:p}=await Be(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:f}),jwt:l.access_token,xform:vs});if(p)throw p;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(n){if(await Lr(this.storage,`${this.storageKey}-code-verifier`),Te(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new On;const r=Date.now()/1e3;let n=r,a=!0,s=null;const{payload:l}=Jh(t.access_token);if(l.exp&&(n=l.exp,a=n<=r),a){const{data:d,error:f}=await this._callRefreshToken(t.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!d)return{data:{user:null,session:null},error:null};s=d}else{const{data:d,error:f}=await this._getUser(t.access_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});s={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(Te(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:d}=r;if(d)throw d;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new On;const{data:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Te(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Br())throw new Zh("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Zh(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new RE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Zh("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new RE("No code detected.");const{data:O,error:E}=await this._exchangeCodeForSession(t.code);if(E)throw E;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:s,refresh_token:l,expires_in:d,expires_at:f,token_type:h}=t;if(!s||!d||!l||!h)throw new Zh("No session defined in URL");const p=Math.round(Date.now()/1e3),g=parseInt(d);let y=p+g;f&&(y=parseInt(f));const v=y-p;v*1e3<=tc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${g}s`);const j=y-g;p-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,y,p):p-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,y,p);const{data:S,error:_}=await this._getUser(s);if(_)throw _;const N={provider_token:n,provider_refresh_token:a,access_token:s,expires_in:g,expires_at:y,refresh_token:l,token_type:h,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:N,redirectType:t.type},error:null})}catch(n){if(Te(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await co(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:s}=r;if(s&&!l0(s))return this._returnResult({error:s});const l=(n=a.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:d}=await this.admin.signOut(l,t);if(d&&!(BU(d)&&(d.status===404||d.status===401||d.status===403)||l0(d)))return this._returnResult({error:d})}return t!=="others"&&(await this._removeSession(),await Lr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=VU(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:s},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Hl(this.storage,this.storageKey,!0));try{return await Be(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(await Lr(this.storage,`${this.storageKey}-code-verifier`),Te(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async s=>{var l,d,f,h,p;const{data:g,error:y}=s;if(y)throw y;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(d=t.options)===null||d===void 0?void 0:d.scopes,queryParams:(f=t.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await Be(this.fetch,"GET",v,{headers:this.headers,jwt:(p=(h=g.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(a)throw a;return Br()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(Te(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:s}}=r;if(a)throw a;const{options:l,provider:d,token:f,access_token:h,nonce:p}=t,g=await Be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=s==null?void 0:s.access_token)!==null&&n!==void 0?n:void 0,body:{provider:d,id_token:f,access_token:h,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:oa}),{data:y,error:v}=g;return v?this._returnResult({data:{user:null,session:null},error:v}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new Ql}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:v}))}catch(a){if(await Lr(this.storage,`${this.storageKey}-code-verifier`),Te(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:s,error:l}=r;if(l)throw l;return await Be(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await XU(async a=>(a>0&&await WU(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Be(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:oa})),(a,s)=>{const l=200*Math.pow(2,a);return s&&c0(s)&&Date.now()+l-n<tc})}catch(n){if(this._debug(r,"error",n),Te(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Br()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await co(this.storage,this.storageKey);if(a&&this.userStorage){let l=await co(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await rc(this.userStorage,this.storageKey+"-user",l)),a.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:u0()}else if(a&&!a.user&&!a.user){const l=await co(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(a.user=l.user,await Lr(this.storage,this.storageKey+"-user"),await rc(this.storage,this.storageKey,a)):a.user=u0()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const s=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<o0;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${o0}s`),s){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),c0(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:d}=await this._getUser(a.access_token);!d&&(l!=null&&l.user)?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new On;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Rp;const{data:s,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!s.session)throw new On;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const d={data:s.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(s){if(this._debug(a,"error",s),Te(s)){const l={data:null,error:s};return c0(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const s=[],l=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,r)}catch(f){s.push(f)}});if(await Promise.all(l),s.length>0){for(let d=0;d<s.length;d+=1)console.error(s[d]);throw s[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Lr(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await rc(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const s=UE(a);await rc(this.storage,this.storageKey,s)}else{const a=UE(r);await rc(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Lr(this.storage,this.storageKey),await Lr(this.storage,this.storageKey+"-code-verifier"),await Lr(this.storage,this.storageKey+"-user"),this.userStorage&&await Lr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Br()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),tc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/tc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${tc}ms, refresh threshold is ${yx} ticks`),a<=yx&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof iD)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Br()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,l]=await Hl(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(d.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);a.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:s}=r;return s?this._returnResult({data:null,error:s}):await Be(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:s,error:l}=r;if(l)return this._returnResult({data:null,error:l});const d=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:f,error:h}=await Be(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return h?this._returnResult({data:null,error:h}):(t.factorType==="totp"&&f.type==="totp"&&(!((a=f==null?void 0:f.totp)===null||a===void 0)&&a.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:s}=r;if(s)return this._returnResult({data:null,error:s});const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Ez(t.webauthn.credential_response):Az(t.webauthn.credential_response)})}:{code:t.code}),{data:d,error:f}=await Be(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:f}))})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:s}=r;if(s)return this._returnResult({data:null,error:s});const l=await Be(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:d}=l;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:Nz(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:Oz(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(s),s.status==="verified"&&a[s.factor_type].push(s);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,n,a,s;if(t)try{const{payload:v}=Jh(t);let j=null;v.aal&&(j=v.aal);let S=j;const{data:{user:_},error:N}=await this.getUser(t);if(N)return this._returnResult({data:null,error:N});((n=(r=_==null?void 0:_.factors)===null||r===void 0?void 0:r.filter(C=>C.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(S="aal2");const E=v.amr||[];return{data:{currentLevel:j,nextLevel:S,currentAuthenticationMethods:E},error:null}}catch(v){if(Te(v))return this._returnResult({data:null,error:v});throw v}const{data:{session:l},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=Jh(l.access_token);let h=null;f.aal&&(h=f.aal);let p=h;((s=(a=l.user.factors)===null||a===void 0?void 0:a.filter(v=>v.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(p="aal2");const y=f.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await Be(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new On})})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!a)return this._returnResult({data:null,error:new On});const l=await Be(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return l.data&&l.data.redirect_url&&Br()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(n){if(Te(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!a)return this._returnResult({data:null,error:new On});const l=await Be(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return l.data&&l.data.redirect_url&&Br()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(n){if(Te(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await Be(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new On})})}catch(t){if(Te(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?(await Be(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new On})})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(d=>d.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(d=>d.kid===t),n&&this.jwks_cached_at+IU>a)return n;const{data:s,error:l}=await Be(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=a,n=s.keys.find(d=>d.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:v,error:j}=await this.getSession();if(j||!v.session)return this._returnResult({data:null,error:j});n=v.session.access_token}const{header:a,payload:s,signature:l,raw:{header:d,payload:f}}=Jh(n);r!=null&&r.allowExpired||az(s.exp);const h=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!h){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:s,header:a,signature:l},error:null}}const p=iz(a.alg),g=await crypto.subtle.importKey("jwk",h,p,!0,["verify"]);if(!await crypto.subtle.verify(p,g,l,QU(`${d}.${f}`)))throw new xx("Invalid JWT signature");return{data:{claims:s,header:a,signature:l},error:null}}catch(n){if(Te(n))return this._returnResult({data:null,error:n});throw n}}}bd.nextInstanceID={};const Lz=bd,Bz="2.95.3";let id="";typeof Deno<"u"?id="deno":typeof document<"u"?id="web":typeof navigator<"u"&&navigator.product==="ReactNative"?id="react-native":id="node";const $z={"X-Client-Info":`supabase-js-${id}/${Bz}`},Uz={headers:$z},zz={schema:"public"},qz={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Fz={};function xd(e){"@babel/helpers - typeof";return xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xd(e)}function Kz(e,t){if(xd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qz(e){var t=Kz(e,"string");return xd(t)=="symbol"?t:t+""}function Hz(e,t,r){return(t=Qz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VE(Object(r),!0).forEach(function(n){Hz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Vz=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Gz=()=>Headers,Yz=(e,t,r)=>{const n=Vz(r),a=Gz();return async(s,l)=>{var d;const f=(d=await t())!==null&&d!==void 0?d:e;let h=new a(l==null?void 0:l.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${f}`),n(s,Wt(Wt({},l),{},{headers:h}))}};function Wz(e){return e.endsWith("/")?e:e+"/"}function Xz(e,t){var r,n;const{db:a,auth:s,realtime:l,global:d}=e,{db:f,auth:h,realtime:p,global:g}=t,y={db:Wt(Wt({},f),a),auth:Wt(Wt({},h),s),realtime:Wt(Wt({},p),l),storage:{},global:Wt(Wt(Wt({},g),d),{},{headers:Wt(Wt({},(r=g==null?void 0:g.headers)!==null&&r!==void 0?r:{}),(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function Zz(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Wz(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Jz=class extends Lz{constructor(e){super(e)}},e8=class{constructor(e,t,r){var n,a;this.supabaseUrl=e,this.supabaseKey=t;const s=Zz(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const l=`sb-${s.hostname.split(".")[0]}-auth-token`,d={db:zz,realtime:Fz,auth:Wt(Wt({},qz),{},{storageKey:l}),global:Uz},f=Xz(r??{},d);if(this.storageKey=(n=f.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken)this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=f.auth)!==null&&h!==void 0?h:{},this.headers,f.global.fetch)}this.fetch=Yz(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Wt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new B$(new URL("rest/v1",s).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch,timeout:f.db.timeout,urlLengthLimit:f.db.urlLengthLimit}),this.storage=new kU(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new P$(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,storageKey:s,flowType:l,lock:d,debug:f,throwOnError:h},p,g){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Jz({url:this.authUrl.href,headers:Wt(Wt({},y),p),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,flowType:l,lock:d,debug:f,throwOnError:h,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new tU(this.realtimeUrl.href,Wt(Wt({},e),{},{params:Wt(Wt({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const t8=(e,t,r)=>new e8(e,t,r);function r8(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}r8()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const n8="https://ozjddzasadgffjjeqntc.supabase.co",a8="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im96amRkemFzYWRnZmZqamVxbnRjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzOTMwMzEsImV4cCI6MjA4NTk2OTAzMX0._1fbWup_bHYe0PN5QUcptRMuwZRAEFwQOPEPd7Lk3NY",be=t8(n8,a8),i8={company:{name:"BD Hatbela",logo:"",phone:"",email:"",address:""},order:{prefix:"BDH-",nextNumber:1},invoice:{title:"Tax Invoice",logoWidth:60,logoHeight:60,footer:"Thank you for shopping with BD Hatbela!"},defaults:{accountId:"",paymentMethod:"Cash",incomeCategoryId:"",expenseCategoryId:"",recordsPerPage:20},categories:[],paymentMethods:[],courier:{steadfast:{baseUrl:"",apiKey:"",secretKey:""},carryBee:{baseUrl:"",clientId:"",clientSecret:"",clientContext:"",storeId:""}}},lD=e=>{const t=localStorage.getItem(e);return t?JSON.parse(t):null},s8=lD("currentUser"),o8=lD("settings"),Ne={users:[],customers:[],vendors:[],products:[],orders:[],bills:[],accounts:[],transactions:[],currentUser:s8??null,settings:o8??i8},Gu=()=>{try{localStorage.setItem("currentUser",JSON.stringify(Ne.currentUser)),localStorage.setItem("settings",JSON.stringify(Ne.settings))}catch(e){console.warn("[DB] localStorage write failed:",e)}},qt=25,Uc="https://ozjddzasadgffjjeqntc.supabase.co",zc="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im96amRkemFzYWRnZmZqamVxbnRjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzOTMwMzEsImV4cCI6MjA4NTk2OTAzMX0._1fbWup_bHYe0PN5QUcptRMuwZRAEFwQOPEPd7Lk3NY";async function Gr(){if(Ne.currentUser)return{user:Ne.currentUser};const e=localStorage.getItem("currentUserId");if(e)try{const r=await Uw(e);if(r)return Ne.currentUser=r,{user:r}}catch(r){console.warn("[supabaseQueries] Failed to restore user from ID:",r)}const t=localStorage.getItem("userData");if(t)try{const r=JSON.parse(t);return Ne.currentUser=r,{user:r}}catch{}throw new Error("No authenticated session available. Please log in.")}function l8(){const e=Ne.currentUser;if(!e||!e.id)throw new Error("User session not available for mutation");return e.id}async function Di(e,t=1e4){const r=n=>{if(!n)return!1;const a=((n==null?void 0:n.message)||(n==null?void 0:n.toString())||"").toLowerCase(),s=(n==null?void 0:n.code)||"";return a.includes("failed to fetch")||a.includes("connection closed")||a.includes("network")||a.includes("econnrefused")||a.includes("etimedout")||s==="ERR_CONNECTION_CLOSED"||n instanceof TypeError};try{const n=await Promise.race([e,new Promise(l=>{setTimeout(()=>l({data:null,error:{message:"Query timeout"}}),t)})]),{data:a,error:s}=n;return s?r(s)?(console.error("[supabaseQueries] NETWORK ERROR (no retry):",(s==null?void 0:s.message)||s),[]):(console.warn("[supabaseQueries] Query error:",(s==null?void 0:s.message)||s),[]):a||(console.warn("[supabaseQueries] Query returned no data"),[])}catch(n){return r(n)?(console.error("[supabaseQueries] NETWORK ERROR in catch:",(n==null?void 0:n.message)||n),[]):(console.error("[supabaseQueries] Query exception:",n),[])}}async function cD(){return console.log("[supabaseQueries] fetchCustomers called"),(await Di(be.from("customers").select("*").order("created_at",{ascending:!1}))).map(Ec)}async function c8(e){if(!e)return null;if(e.startsWith("temp-"))return console.warn("[supabaseQueries] fetchCustomerById called with temp id, returning null:",e),null;const{data:t,error:r}=await be.from("customers").select("*").eq("id",e).single();return r?(console.error("[supabaseQueries] fetchCustomerById error:",r),null):Ec(t)}async function u8(e){await Gr();const t=crypto.randomUUID(),r=async()=>await be.from("customers").insert([{id:t,name:e.name,phone:e.phone,address:e.address,total_orders:e.totalOrders||0,due_amount:e.dueAmount||0}]).select().single();try{const{data:n,error:a}=await r();if(a)throw console.error("[supabaseQueries] createCustomer error:",a),a;return Ec(n)}catch(n){const a=(n==null?void 0:n.name)||(n==null?void 0:n.code)||"";if(a==="AbortError"||a==="ABORT_ERR"||String(n).toLowerCase().includes("abort")){console.warn("[supabaseQueries] createCustomer aborted - retrying once");try{await new Promise(d=>setTimeout(d,250));const{data:s,error:l}=await r();if(l)throw console.error("[supabaseQueries] createCustomer retry error:",l),l;return Ec(s)}catch(s){throw console.error("[supabaseQueries] createCustomer abort/retry failed:",s),s}}throw console.error("[supabaseQueries] createCustomer error:",n),n}}async function d8(e,t){await Gr();const{data:r,error:n}=await be.from("customers").update({...t.name&&{name:t.name},...t.phone&&{phone:t.phone},...t.address&&{address:t.address},...t.totalOrders!==void 0&&{total_orders:t.totalOrders},...t.dueAmount!==void 0&&{due_amount:t.dueAmount}}).eq("id",e).select().single();if(n)throw console.error("[supabaseQueries] updateCustomer error:",n),n;return Ec(r)}async function f8(e){if(e.startsWith("temp-")){const r=new Error("Cannot delete unsaved customer. Please refresh and try again.");throw console.error("[supabaseQueries] deleteCustomer error:",r),r}const{error:t}=await be.from("customers").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteCustomer error:",t),t}function Ec(e){return{id:e.id,name:e.name,phone:e.phone,address:e.address,totalOrders:e.total_orders??e.totalOrders??0,dueAmount:e.due_amount??e.dueAmount??0,createdBy:e.created_by??e.createdBy}}async function h8(){return(await Di(be.from("orders").select("*").order("created_at",{ascending:!1}))).map(qc)}async function m8(e=1,t=qt,r){const n=(e-1)*t,a=n+t-1;let s=be.from("orders").select("id, order_number, order_date, customer_id, created_by, status, subtotal, discount, shipping, total, paid_amount, notes, history, created_at",{count:"exact"});if(r){if(r.status&&r.status!=="All"&&(s=s.eq("status",r.status)),r.from&&(s=s.gte("order_date",r.from)),r.to&&(s=s.lte("order_date",r.to)),r.search){const l=r.search.trim();l&&(s=s.ilike("order_number",`%${l}%`))}r.createdByIds&&r.createdByIds.length>0&&(s=s.in("created_by",r.createdByIds))}s=s.order("created_at",{ascending:!1}).range(n,a);try{const{data:l,error:d,count:f}=await s;return d?(console.error("[supabaseQueries] fetchOrdersPage error:",d),{data:[],count:0}):{data:(l||[]).map(qc),count:f??0}}catch(l){return console.error("[supabaseQueries] fetchOrdersPage exception:",l),{data:[],count:0}}}async function p8(e){const{data:t,error:r}=await be.from("orders").select("*").eq("id",e).single();return r?(console.error("[supabaseQueries] fetchOrderById error:",r),null):qc(t)}async function g8(e){return(await Di(be.from("orders").select("*").eq("customer_id",e).order("order_date",{ascending:!1}))).map(qc)}async function y8(e){await Gr();const t=crypto.randomUUID(),r=l8(),{data:n,error:a}=await be.from("orders").insert([{id:t,order_number:e.orderNumber,order_date:e.orderDate,customer_id:e.customerId,created_by:r,status:e.status,items:e.items,subtotal:e.subtotal,discount:e.discount,shipping:e.shipping,total:e.total,paid_amount:e.paidAmount,history:e.history}]).select().single();if(a)throw console.error("[supabaseQueries] createOrder error:",a),a;return qc(n)}async function v8(e,t){await Gr();const{data:r,error:n}=await be.from("orders").update({...t.customerId&&{customer_id:t.customerId},...t.orderDate&&{order_date:t.orderDate},...t.orderNumber&&{order_number:t.orderNumber},...t.notes!==void 0&&{notes:t.notes},...t.status&&{status:t.status},...t.items&&{items:t.items},...t.subtotal!==void 0&&{subtotal:t.subtotal},...t.discount!==void 0&&{discount:t.discount},...t.shipping!==void 0&&{shipping:t.shipping},...t.total!==void 0&&{total:t.total},...t.paidAmount!==void 0&&{paid_amount:t.paidAmount},...t.history&&{history:t.history}}).eq("id",e).select();if(n)throw console.error("[supabaseQueries] updateOrder error:",n),n;if(!r||Array.isArray(r)&&r.length===0)return console.warn("[supabaseQueries] updateOrder: update succeeded but no row was returned (possible RLS). Returning null."),null;const a=Array.isArray(r)?r[0]:r;return qc(a)}async function b8(e){await Gr();const{error:t}=await be.from("transactions").delete().eq("reference_id",e).eq("type","Income");if(t)throw console.error("[supabaseQueries] deleteOrder: failed to delete income transactions:",t),t;const{error:r}=await be.from("transactions").delete().eq("reference_id",e).eq("type","Expense").eq("category","expense_shipping");if(r)throw console.error("[supabaseQueries] deleteOrder: failed to delete shipping expense transactions:",r),r;const{error:n}=await be.from("orders").delete().eq("id",e);if(n)throw console.error("[supabaseQueries] deleteOrder error:",n),n}function qc(e){return{id:e.id,orderNumber:e.order_number??e.orderNumber,orderDate:e.order_date??e.orderDate,customerId:e.customer_id??e.customerId,createdBy:e.created_by??e.createdBy,status:e.status,items:e.items??[],subtotal:e.subtotal??0,discount:e.discount??0,shipping:e.shipping??0,total:e.total??0,notes:e.notes,history:e.history??{},paidAmount:e.paid_amount??e.paidAmount??0}}async function x8(){return(await Di(be.from("accounts").select("*").order("created_at",{ascending:!1}))).map($w)}async function w8(e=1,t=qt,r){const n=(e-1)*t,a=n+t-1;let s=be.from("customers").select("id, name, phone, address, total_orders, due_amount, created_at",{count:"exact"});if(r&&r.trim()){const l=r.trim();s=s.or(`name.ilike.%${l}%,phone.ilike.%${l}%,address.ilike.%${l}%`)}s=s.order("created_at",{ascending:!1}).range(n,a);try{const{data:l,error:d,count:f}=await s;return d?(console.error("[supabaseQueries] fetchCustomersPage error:",d),{data:[],count:0}):{data:(l||[]).map(Ec),count:f??0}}catch(l){return console.error("[supabaseQueries] fetchCustomersPage exception:",l),{data:[],count:0}}}async function j8(e){const t=crypto.randomUUID(),{data:r,error:n}=await be.from("accounts").insert([{id:t,name:e.name,type:e.type,opening_balance:e.openingBalance,current_balance:e.currentBalance}]).select().single();if(n)throw console.error("[supabaseQueries] createAccount error:",n),n;return $w(r)}async function S8(e,t){const{data:r,error:n}=await be.from("accounts").update({...t.name&&{name:t.name},...t.type&&{type:t.type},...t.currentBalance!==void 0&&{current_balance:t.currentBalance}}).eq("id",e).select().single();if(n)throw console.error("[supabaseQueries] updateAccount error:",n),n;return $w(r)}async function _8(e){const{error:t}=await be.from("accounts").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteAccount error:",t),t}function $w(e){return{id:e.id,name:e.name,type:e.type,openingBalance:e.opening_balance??e.openingBalance,currentBalance:e.current_balance??e.currentBalance}}async function N8(){return(await Di(be.from("transactions").select("*").order("created_at",{ascending:!1}))).map(uD)}async function O8(e=1,t=qt,r){const n=(e-1)*t,a=n+t-1;let s=be.from("transactions").select("id, date, type, category, account_id, to_account_id, amount, description, reference_id, contact_id, payment_method, attachment_name, attachment_url, created_by, created_at",{count:"exact"});if(r){if(r.type&&(s=s.eq("type",r.type)),r.from&&(s=s.gte("date",r.from)),r.to&&(s=s.lte("date",r.to)),r.search){const l=r.search.trim();l&&(s=s.ilike("description",`%${l}%`))}r.createdByIds&&r.createdByIds.length>0&&(s=s.in("created_by",r.createdByIds))}s=s.order("created_at",{ascending:!1}).range(n,a);try{const{data:l,error:d,count:f}=await s;return d?(console.error("[supabaseQueries] fetchTransactionsPage error:",d),{data:[],count:0}):{data:(l||[]).map(uD),count:f??0}}catch(l){return console.error("[supabaseQueries] fetchTransactionsPage exception:",l),{data:[],count:0}}}async function E8(e){await Gr();const t=crypto.randomUUID(),r={id:t,date:e.date,type:e.type,category:e.category,account_id:e.accountId,amount:e.amount,description:e.description,payment_method:e.paymentMethod,created_by:e.createdBy};e.toAccountId&&(r.to_account_id=e.toAccountId),e.referenceId&&(r.reference_id=e.referenceId),e.contactId&&(r.contact_id=e.contactId),e.attachmentName&&(r.attachment_name=e.attachmentName),e.attachmentUrl&&(r.attachment_url=e.attachmentUrl);const{error:n}=await be.from("transactions").insert([r]);if(n)throw console.error("[supabaseQueries] createTransaction error:",n),n;return{id:t,date:e.date,type:e.type,category:e.category,accountId:e.accountId,toAccountId:e.toAccountId,amount:e.amount,description:e.description,referenceId:e.referenceId,contactId:e.contactId,paymentMethod:e.paymentMethod,attachmentName:e.attachmentName,attachmentUrl:e.attachmentUrl,createdBy:e.createdBy}}async function A8(e){if(e.startsWith("temp-")){const r=new Error("Cannot delete unsaved transactions. Please refresh and try again.");throw console.error("[supabaseQueries] deleteTransaction error:",r),r}const{error:t}=await be.from("transactions").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteTransaction error:",t),t}function uD(e){const t=e.date??e.date_string??null,r=e.created_at??e.createdAt??null,n=t&&t.toString().length>10?t:r||t||"";return{id:e.id,date:n,type:e.type,category:e.category,accountId:e.account_id??e.accountId,toAccountId:e.to_account_id??e.toAccountId,amount:e.amount,description:e.description,referenceId:e.reference_id??e.referenceId,contactId:e.contact_id??e.contactId,paymentMethod:e.payment_method??e.paymentMethod,attachmentName:e.attachment_name??e.attachmentName,attachmentUrl:e.attachment_url??e.attachmentUrl,createdBy:e.created_by??e.createdBy,createdAt:r||null}}async function C8(e=1,t=qt,r,n,a){const s=(e-1)*t,l=s+t-1;let d=be.from("products").select("id, name, image, category, sale_price, purchase_price, created_at",{count:"exact"});if(r&&r.trim()){const f=r.trim();d=d.ilike("name",`%${f}%`)}a&&a.length>0&&(d=d.in("created_by",a)),d=d.order("created_at",{ascending:!1}).range(s,l);try{const{data:f,error:h,count:p}=await d;return h?(console.error("[supabaseQueries] fetchProductsPage error:",h),{data:[],count:0}):{data:(f||[]).map(Gd),count:p??0}}catch(f){return console.error("[supabaseQueries] fetchProductsPage exception:",f),{data:[],count:0}}}async function P8(){return(await Di(be.from("users").select("*").order("created_at",{ascending:!1}))).map(Hd)}async function Uw(e){const{data:t,error:r}=await be.from("users").select("*").eq("id",e).single();if(r)return console.error("[supabaseQueries] fetchUserById error:",r),null;console.log("[supabaseQueries] fetchUserById raw data:",{id:t==null?void 0:t.id,name:t==null?void 0:t.name,password_hash:t!=null&&t.password_hash?`(${t.password_hash.substring(0,20)}...)`:"(NULL/MISSING)",allKeys:Object.keys(t||{})});const n=Hd(t);return console.log("[supabaseQueries] fetchUserById mapped user:",{id:n.id,name:n.name,password:n.password?`(${n.password.substring(0,20)}...)`:"(NULL/MISSING)"}),n}async function k8(e,t){try{console.log("[supabaseQueries] loginUser - fetching user by phone:",e);const{data:r,error:n}=await be.from("users").select("*").eq("phone",e).single();if(n)return console.error("[supabaseQueries] loginUser - user not found:",n==null?void 0:n.message),{user:null,error:"User not found"};if(!r)return{user:null,error:"User not found"};console.log("[supabaseQueries] loginUser - validating password");try{if(!(await Iw(()=>import("./bcrypt-J4qZW9bK.js").then(l=>l.b),[])).compareSync(t,r.password_hash||""))return console.error("[supabaseQueries] loginUser - password mismatch"),{user:null,error:"Invalid password"}}catch(a){return console.error("[supabaseQueries] loginUser - bcrypt error:",a==null?void 0:a.message),{user:null,error:"Password validation failed"}}return console.log("[supabaseQueries] loginUser - success for user:",r.id),{user:Hd(r),error:null}}catch(r){return console.error("[supabaseQueries] loginUser exception:",(r==null?void 0:r.message)||r),{user:null,error:(r==null?void 0:r.message)||"Login failed"}}}async function T8(e){try{const t=e.password;if(!t)throw new Error("Password is required to create a user");const r=crypto.randomUUID();console.log("[supabaseQueries] Creating user with phone:",e.phone,"id:",r);let n;try{n=(await Iw(()=>import("./bcrypt-J4qZW9bK.js").then(f=>f.b),[])).hashSync(t,12),console.log("[supabaseQueries] Password hashed successfully")}catch(l){throw console.error("[supabaseQueries] Password hashing failed:",l==null?void 0:l.message),new Error(`Password hashing failed: ${(l==null?void 0:l.message)||"Unknown error"}`)}console.log("[supabaseQueries] Inserting user row into users table");const{data:a,error:s}=await be.from("users").insert([{id:r,name:e.name,phone:e.phone,role:e.role,image:e.image,password_hash:n}]).select().single();if(s)throw console.error("[supabaseQueries] Create profile error:",s),s;return console.log("[supabaseQueries] User created successfully - can now sign in (frontend-password mode)"),Hd(a)}catch(t){throw console.error("[supabaseQueries] createUser error:",t),t}}async function D8(e,t){const r={...t.name&&{name:t.name},...t.phone&&{phone:t.phone},...t.role&&{role:t.role},...t.image&&{image:t.image}};if(t.password)try{const d=(await Iw(()=>import("./bcrypt-J4qZW9bK.js").then(f=>f.b),[])).hashSync(t.password,12);r.password_hash=d}catch(s){throw console.error("[supabaseQueries] updateUser - password hashing failed:",s==null?void 0:s.message),s}const{data:n,error:a}=await be.from("users").update(r).eq("id",e).select().single();if(a)throw console.error("[supabaseQueries] updateUser error:",a),a;return Hd(n)}async function M8(e){const{error:t}=await be.from("users").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteUser error:",t),t}function GE(e){return e?typeof e=="string"?e:e.message?e.message:e.details?e.details:e.hint?e.hint:JSON.stringify(e):"Unknown error"}function Hd(e){return{id:e.id,name:e.name,phone:e.phone,role:e.role,image:e.image,password:void 0,createdAt:e.created_at}}async function R8(e=1,t=qt,r,n){const a=(e-1)*t,s=a+t-1;let l=be.from("vendors").select("id, name, phone, address, created_at, created_by",{count:"exact"});if(r&&r.trim()){const d=r.trim();l=l.or(`name.ilike.%${d}%,phone.ilike.%${d}%,address.ilike.%${d}%`)}l=l.order("created_at",{ascending:!1}).range(a,s);try{const{data:d,error:f,count:h}=await l;return f?(console.error("[supabaseQueries] fetchVendorsPage error:",f),{data:[],count:0}):{data:d||[],count:h??0}}catch(d){return console.error("[supabaseQueries] fetchVendorsPage exception:",d),{data:[],count:0}}}async function I8(e=1,t=qt,r){const n=(e-1)*t,a=n+t-1;let s=be.from("bills").select("id, bill_number, bill_date, vendor_id, total, paid_amount, status, created_by, created_at",{count:"exact"});if(r){if(r.from&&(s=s.gte("bill_date",r.from)),r.to&&(s=s.lte("bill_date",r.to)),r.search&&r.search.trim()){const l=r.search.trim();s=s.ilike("bill_number",`%${l}%`)}r.createdByIds&&r.createdByIds.length>0&&(s=s.in("created_by",r.createdByIds))}s=s.order("created_at",{ascending:!1}).range(n,a);try{const{data:l,error:d,count:f}=await s;return d?(console.error("[supabaseQueries] fetchBillsPage error:",d),{data:[],count:0}):{data:(l||[]).map(Vd),count:f??0}}catch(l){return console.error("[supabaseQueries] fetchBillsPage exception:",l),{data:[],count:0}}}async function L8(){return(await Di(be.from("bills").select("*").order("created_at",{ascending:!1}))).map(Vd)}async function B8(e){const{data:t,error:r}=await be.from("bills").select("*").eq("id",e).single();return r?(console.error("[supabaseQueries] fetchBillById error:",r),null):Vd(t)}async function $8(e){await Gr();const t=crypto.randomUUID(),{data:r,error:n}=await be.from("bills").insert([{id:t,bill_number:e.billNumber,bill_date:e.billDate,vendor_id:e.vendorId,created_by:e.createdBy,status:e.status,items:e.items,subtotal:e.subtotal,discount:e.discount,shipping:e.shipping,total:e.total,paid_amount:e.paidAmount,history:e.history||{}}]).select().single();if(n)throw console.error("[supabaseQueries] createBill error:",n),n;return Vd(r)}async function U8(e,t){await Gr();const{data:r,error:n}=await be.from("bills").update({...t.vendorId&&{vendor_id:t.vendorId},...t.billDate&&{bill_date:t.billDate},...t.billNumber&&{bill_number:t.billNumber},...t.notes!==void 0&&{notes:t.notes},...t.status&&{status:t.status},...t.items&&{items:t.items},...t.subtotal!==void 0&&{subtotal:t.subtotal},...t.discount!==void 0&&{discount:t.discount},...t.shipping!==void 0&&{shipping:t.shipping},...t.total!==void 0&&{total:t.total},...t.paidAmount!==void 0&&{paid_amount:t.paidAmount},...t.history&&{history:t.history}}).eq("id",e).select().single();if(n)throw console.error("[supabaseQueries] updateBill error:",n),n;return Vd(r)}async function z8(e){await Gr();const{error:t}=await be.from("transactions").delete().eq("reference_id",e).eq("type","Expense");if(t)throw console.error("[supabaseQueries] deleteBill: failed to delete related transactions:",t),t;const{error:r}=await be.from("bills").delete().eq("id",e);if(r)throw console.error("[supabaseQueries] deleteBill error:",r),r}function Vd(e){return{id:e.id,billNumber:e.bill_number??e.billNumber,billDate:e.bill_date??e.billDate,vendorId:e.vendor_id??e.vendorId,createdBy:e.created_by??e.createdBy,status:e.status,items:e.items??[],subtotal:e.subtotal??0,discount:e.discount??0,shipping:e.shipping??0,total:e.total??0,notes:e.notes,paidAmount:e.paid_amount??e.paidAmount??0,history:e.history}}async function q8(){return(await Di(be.from("vendors").select("*").order("created_at",{ascending:!1}))).map(Ip)}async function F8(e){const{data:t,error:r}=await be.from("vendors").select("*").eq("id",e).single();return r?(console.error("[supabaseQueries] fetchVendorById error:",r),null):Ip(t)}async function K8(e){await Gr();const t=crypto.randomUUID(),{data:r,error:n}=await be.from("vendors").insert([{id:t,name:e.name,phone:e.phone,address:e.address,total_purchases:e.totalPurchases||0,due_amount:e.dueAmount||0}]).select().single();if(n)throw console.error("[supabaseQueries] createVendor error:",n),n;return Ip(r)}async function Q8(e,t){await Gr();const{data:r,error:n}=await be.from("vendors").update({...t.name&&{name:t.name},...t.phone&&{phone:t.phone},...t.address&&{address:t.address},...t.totalPurchases!==void 0&&{total_purchases:t.totalPurchases},...t.dueAmount!==void 0&&{due_amount:t.dueAmount}}).eq("id",e).select().single();if(n)throw console.error("[supabaseQueries] updateVendor error:",n),n;return Ip(r)}async function H8(e){const{error:t}=await be.from("vendors").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteVendor error:",t),t}function Ip(e){return{id:e.id,name:e.name,phone:e.phone,address:e.address,totalPurchases:e.total_purchases??e.totalPurchases??0,dueAmount:e.due_amount??e.dueAmount??0,createdBy:e.created_by??e.createdBy}}async function V8(e){console.log("[supabaseQueries] fetchProducts called",e?"for category: "+e:"");try{let t=be.from("products").select("id, name, image, category, sale_price, purchase_price, created_at").order("created_at",{ascending:!1});return e&&(t=t.eq("category",e)),(await Di(t)).map(Gd)}catch(t){return console.error("[supabaseQueries] fetchProducts error:",t),[]}}async function G8(e){const{data:t,error:r}=await be.from("products").select("*").eq("id",e).single();return r?(console.error("[supabaseQueries] fetchProductById error:",r),null):Gd(t)}async function Y8(e){await Gr();const t=crypto.randomUUID(),{data:r,error:n}=await be.from("products").insert([{id:t,name:e.name,image:e.image,category:e.category,sale_price:e.salePrice,purchase_price:e.purchasePrice}]).select().single();if(n)throw console.error("[supabaseQueries] createProduct error:",n),n;return Gd(r)}async function W8(e,t){const{data:r,error:n}=await be.from("products").update({...t.name&&{name:t.name},...t.image&&{image:t.image},...t.category&&{category:t.category},...t.salePrice!==void 0&&{sale_price:t.salePrice},...t.purchasePrice!==void 0&&{purchase_price:t.purchasePrice}}).eq("id",e).select().single();if(n)throw console.error("[supabaseQueries] updateProduct error:",n),n;return Gd(r)}async function X8(e){const{error:t}=await be.from("products").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteProduct error:",t),t}function Gd(e){return{id:e.id,name:e.name,image:e.image,category:e.category,salePrice:e.sale_price??e.salePrice??0,purchasePrice:e.purchase_price??e.purchasePrice??0,createdBy:e.created_by??e.createdBy}}async function Z8(e){console.log("[supabaseQueries] fetchCategories called",e?"for type: "+e:"");try{let t=be.from("categories").select("*").order("name",{ascending:!0});e&&(t=t.eq("type",e));const{data:r,error:n}=await t;if(n)throw console.error("[supabaseQueries] fetchCategories error:",n),new Error(`[${n.code}] ${n.message}`);return r?r.map(dD):[]}catch(t){throw console.error("[supabaseQueries] fetchCategories exception:",t),t}}async function J8(e){await Gr();const t=crypto.randomUUID(),{data:r,error:n}=await be.from("categories").insert([{id:t,name:e.name,type:e.type,color:e.color||"#3B82F6",parent_id:e.parentId||null}]).select().single();if(n)throw console.error("[supabaseQueries] createCategory error:",n),n;return dD(r)}async function eq(e){const{error:t}=await be.from("categories").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteCategory error:",t),t}function dD(e){return{id:e.id,name:e.name,type:e.type,color:e.color,parentId:e.parent_id,createdAt:e.created_at,updatedAt:e.updated_at}}async function tq(e=!0){console.log("[supabaseQueries] fetchPaymentMethods called");try{let t=be.from("payment_methods").select("*").order("name",{ascending:!0});e&&(t=t.eq("is_active",!0));const{data:r,error:n}=await t;if(n)throw console.error("[supabaseQueries] fetchPaymentMethods error:",n),new Error(`[${n.code}] ${n.message}`);return r?r.map(fD):[]}catch(t){throw console.error("[supabaseQueries] fetchPaymentMethods exception:",t),t}}async function rq(e){await Gr();const t=crypto.randomUUID(),{data:r,error:n}=await be.from("payment_methods").insert([{id:t,name:e.name,description:e.description||null,is_active:!0}]).select().single();if(n)throw console.error("[supabaseQueries] createPaymentMethod error:",n),n;return fD(r)}async function nq(e){const{error:t}=await be.from("payment_methods").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deletePaymentMethod error:",t),t}function fD(e){return{id:e.id,name:e.name,description:e.description,isActive:e.is_active,createdAt:e.created_at,updatedAt:e.updated_at}}async function aq(){console.log("[supabaseQueries] fetchUnits called");try{const{data:e,error:t}=await be.from("units").select("*").order("name",{ascending:!0});if(t)throw console.error("[supabaseQueries] fetchUnits error:",t),new Error(`[${t.code}] ${t.message}`);return e?e.map(hD):[]}catch(e){throw console.error("[supabaseQueries] fetchUnits exception:",e),e}}async function iq(e){const t=e.shortName.toLowerCase(),{data:r,error:n}=await be.from("units").insert([{id:t,name:e.name,short_name:e.shortName,description:e.description||null}]).select().single();if(n)throw console.error("[supabaseQueries] createUnit error:",n),n;return hD(r)}async function sq(e){const{error:t}=await be.from("units").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteUnit error:",t),t}function hD(e){return{id:e.id,name:e.name,shortName:e.short_name,description:e.description,createdAt:e.created_at,updatedAt:e.updated_at}}async function Yd(){try{const{data:e,error:t}=await be.from("company_settings").select("*").maybeSingle();return t||!e?(console.error("[supabaseQueries] fetchCompanySettings error:",t),{id:"default",name:"Your Company",phone:"+880",email:"info@company.com",address:"",logo:""}):{id:e.id,name:e.name||"Your Company",phone:e.phone||"+880",email:e.email||"info@company.com",address:e.address||"",logo:e.logo||""}}catch(e){return console.error("[supabaseQueries] fetchCompanySettings exception:",e),{id:"default",name:"Your Company",phone:"+880",email:"info@company.com",address:"",logo:""}}}async function oq(e){await Gr();try{const t=await Yd(),r={name:e.name||t.name,phone:e.phone||t.phone,email:e.email||t.email,address:e.address!==void 0?e.address:t.address,logo:e.logo!==void 0?e.logo:t.logo},{data:n}=await be.from("company_settings").select("id").limit(1).maybeSingle();let a;if(n!=null&&n.id){const{data:s,error:l}=await be.from("company_settings").update(r).eq("id",n.id).select().maybeSingle();if(l)throw l;a=s}else{const{data:s,error:l}=await be.from("company_settings").insert(r).select().single();if(l)throw l;a=s}return a||r}catch(t){throw console.error("[supabaseQueries] updateCompanySettings exception:",t),t}}async function zw(){try{const{data:e,error:t}=await be.from("order_settings").select("*").maybeSingle();return t||!e?(console.error("[supabaseQueries] fetchOrderSettings error:",t),{prefix:"ORD-",nextNumber:1}):{prefix:e.prefix||"ORD-",nextNumber:e.next_number||1}}catch(e){return console.error("[supabaseQueries] fetchOrderSettings exception:",e),{prefix:"ORD-",nextNumber:1}}}async function mD(e){try{const t=await zw(),r={prefix:e.prefix||t.prefix,next_number:e.nextNumber!==void 0?e.nextNumber:t.nextNumber},{data:n}=await be.from("order_settings").select("id").limit(1).maybeSingle();let a;if(n!=null&&n.id){const{data:s,error:l}=await be.from("order_settings").update(r).eq("id",n.id).select().maybeSingle();if(l)throw l;a=s}else{const{data:s,error:l}=await be.from("order_settings").insert(r).select().single();if(l)throw l;a=s}return a?{prefix:a.prefix,nextNumber:a.next_number}:r}catch(t){throw console.error("[supabaseQueries] updateOrderSettings error:",t),t}}async function qw(){try{const{data:e,error:t}=await be.from("invoice_settings").select("*").maybeSingle();return t||!e?(console.error("[supabaseQueries] fetchInvoiceSettings error:",t),{title:"Invoice",logoWidth:120,logoHeight:120,footer:""}):{title:e.title||"Invoice",logoWidth:e.logo_width||120,logoHeight:e.logo_height||120,footer:e.footer||""}}catch(e){return console.error("[supabaseQueries] fetchInvoiceSettings exception:",e),{title:"Invoice",logoWidth:120,logoHeight:120,footer:""}}}async function lq(e){try{const t=await qw(),r={title:e.title||t.title,logo_width:e.logoWidth!==void 0?e.logoWidth:t.logoWidth,logo_height:e.logoHeight!==void 0?e.logoHeight:t.logoHeight,footer:e.footer!==void 0?e.footer:t.footer},{data:n}=await be.from("invoice_settings").select("id").limit(1).maybeSingle();let a;if(n!=null&&n.id){const{data:s,error:l}=await be.from("invoice_settings").update(r).eq("id",n.id).select().maybeSingle();if(l)throw l;a=s}else{const{data:s,error:l}=await be.from("invoice_settings").insert(r).select().single();if(l)throw l;a=s}return a?{title:a.title,logoWidth:a.logo_width,logoHeight:a.logo_height,footer:a.footer}:{title:r.title,logoWidth:r.logo_width,logoHeight:r.logo_height,footer:r.footer}}catch(t){throw console.error("[supabaseQueries] updateInvoiceSettings error:",t),t}}async function Fw(){try{const{data:e,error:t}=await be.from("system_defaults").select("*").maybeSingle();return t||!e?(console.error("[supabaseQueries] fetchSystemDefaults error:",t),{defaultAccountId:"",defaultPaymentMethod:"",incomeCategoryId:"",expenseCategoryId:"",recordsPerPage:10}):{defaultAccountId:e.default_account_id||"",defaultPaymentMethod:e.default_payment_method||"",incomeCategoryId:e.income_category_id||"",expenseCategoryId:e.expense_category_id||"",recordsPerPage:e.records_per_page||10}}catch(e){return console.error("[supabaseQueries] fetchSystemDefaults exception:",e),{defaultAccountId:"",defaultPaymentMethod:"",incomeCategoryId:"",expenseCategoryId:"",recordsPerPage:10}}}async function cq(e){try{const t=await Fw(),r={default_account_id:e.defaultAccountId?e.defaultAccountId:t.defaultAccountId||null,default_payment_method:e.defaultPaymentMethod?e.defaultPaymentMethod:t.defaultPaymentMethod||null,income_category_id:e.incomeCategoryId?e.incomeCategoryId:t.incomeCategoryId||null,expense_category_id:e.expenseCategoryId?e.expenseCategoryId:t.expenseCategoryId||null,records_per_page:e.recordsPerPage!==void 0?e.recordsPerPage:t.recordsPerPage},{data:n}=await be.from("system_defaults").select("id").limit(1).maybeSingle();let a;if(n!=null&&n.id){const{data:s,error:l}=await be.from("system_defaults").update(r).eq("id",n.id).select().maybeSingle();if(l)throw l;a=s}else{const{data:s,error:l}=await be.from("system_defaults").insert(r).select().single();if(l)throw l;a=s}return a?{defaultAccountId:a.default_account_id,defaultPaymentMethod:a.default_payment_method,incomeCategoryId:a.income_category_id,expenseCategoryId:a.expense_category_id,recordsPerPage:a.records_per_page}:t}catch(t){throw console.error("[supabaseQueries] updateSystemDefaults error:",t),t}}async function Kw(){try{const{data:e,error:t}=await be.from("courier_settings").select("*").maybeSingle();return t||!e?(console.error("[supabaseQueries] fetchCourierSettings error:",t),{steadfast:{baseUrl:"",apiKey:"",secretKey:""},carryBee:{baseUrl:"",clientId:"",clientSecret:"",clientContext:"",storeId:""}}):{steadfast:{baseUrl:e.steadfast_base_url||"",apiKey:e.steadfast_api_key||"",secretKey:e.steadfast_secret_key||""},carryBee:{baseUrl:e.carrybee_base_url||"",clientId:e.carrybee_client_id||"",clientSecret:e.carrybee_client_secret||"",clientContext:e.carrybee_client_context||"",storeId:e.carrybee_store_id||""}}}catch(e){return console.error("[supabaseQueries] fetchCourierSettings exception:",e),{steadfast:{baseUrl:"",apiKey:"",secretKey:""},carryBee:{baseUrl:"",clientId:"",clientSecret:"",clientContext:"",storeId:""}}}}async function uq(e){var t,r,n,a,s,l,d,f;try{const h=await Kw(),p={steadfast_base_url:((t=e.steadfast)==null?void 0:t.baseUrl)||h.steadfast.baseUrl,steadfast_api_key:((r=e.steadfast)==null?void 0:r.apiKey)||h.steadfast.apiKey,steadfast_secret_key:((n=e.steadfast)==null?void 0:n.secretKey)||h.steadfast.secretKey,carrybee_base_url:((a=e.carryBee)==null?void 0:a.baseUrl)||h.carryBee.baseUrl,carrybee_client_id:((s=e.carryBee)==null?void 0:s.clientId)||h.carryBee.clientId,carrybee_client_secret:((l=e.carryBee)==null?void 0:l.clientSecret)||h.carryBee.clientSecret,carrybee_client_context:((d=e.carryBee)==null?void 0:d.clientContext)||h.carryBee.clientContext,carrybee_store_id:((f=e.carryBee)==null?void 0:f.storeId)||h.carryBee.storeId},{data:g}=await be.from("courier_settings").select("id").limit(1).maybeSingle();let y;if(g!=null&&g.id){const{data:v,error:j}=await be.from("courier_settings").update(p).eq("id",g.id).select().maybeSingle();if(j)throw j;y=v}else{const{data:v,error:j}=await be.from("courier_settings").insert(p).select().single();if(j)throw j;y=v}return{steadfast:{baseUrl:(y==null?void 0:y.steadfast_base_url)||"",apiKey:(y==null?void 0:y.steadfast_api_key)||"",secretKey:(y==null?void 0:y.steadfast_secret_key)||""},carryBee:{baseUrl:(y==null?void 0:y.carrybee_base_url)||"",clientId:(y==null?void 0:y.carrybee_client_id)||"",clientSecret:(y==null?void 0:y.carrybee_client_secret)||"",clientContext:(y==null?void 0:y.carrybee_client_context)||"",storeId:(y==null?void 0:y.carrybee_store_id)||""}}}catch(h){throw console.error("[supabaseQueries] updateCourierSettings error:",h),h}}async function dq(e){var t,r,n,a,s;try{const l=(t=e.baseUrl)==null?void 0:t.trim(),d=(r=e.clientId)==null?void 0:r.trim(),f=(n=e.clientSecret)==null?void 0:n.trim(),h=(a=e.clientContext)==null?void 0:a.trim();if(!l||!d||!f||!h)return console.warn("[supabaseQueries] CarryBee API parameters incomplete"),[];console.log("[supabaseQueries] Calling Edge Function for CarryBee stores");const p=`${Uc}/functions/v1/carrybee-stores`;console.log("[supabaseQueries] Edge Function URL:",p);const g=await fetch(p,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${zc}`},body:JSON.stringify({baseUrl:l,clientId:d,clientSecret:f,clientContext:h})});if(console.log("[supabaseQueries] Edge Function response status:",g.status),!g.ok)return console.error("[supabaseQueries] Edge Function error:",g.status,g.statusText),[];const y=await g.json();if(console.log("[supabaseQueries] Edge Function response data:",y),y.error)return console.error("[supabaseQueries] Edge Function returned error:",y.error,y.details),[];if(!((s=y.data)!=null&&s.stores))return console.warn("[supabaseQueries] No stores in response"),[];const v=y.data.stores.map(j=>({id:j.id,name:j.name}));return console.log("[supabaseQueries] Successfully fetched",v.length,"stores"),v}catch(l){return console.error("[supabaseQueries] fetchCarryBeeStores exception:",l instanceof Error?l.message:l),[]}}async function fq(e){var t,r,n,a,s;try{const l=(t=e.baseUrl)==null?void 0:t.trim(),d=(r=e.clientId)==null?void 0:r.trim(),f=(n=e.clientSecret)==null?void 0:n.trim(),h=(a=e.clientContext)==null?void 0:a.trim();if(!l||!d||!f||!h)return console.warn("[supabaseQueries] CarryBee API parameters incomplete"),[];const p=`${Uc}/functions/v1/carrybee-cities`,g=await fetch(p,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${zc}`},body:JSON.stringify({baseUrl:l,clientId:d,clientSecret:f,clientContext:h})});if(!g.ok)return console.error("[supabaseQueries] Cities Edge Function error:",g.status),[];const y=await g.json();return y.error||!((s=y.data)!=null&&s.cities)?(console.error("[supabaseQueries] Cities Edge Function returned error:",y.error),[]):y.data.cities.map(v=>({id:v.id,name:v.name}))}catch(l){return console.error("[supabaseQueries] fetchCarryBeeCities exception:",l instanceof Error?l.message:l),[]}}async function hq(e){var t,r,n,a,s,l;try{const d=(t=e.baseUrl)==null?void 0:t.trim(),f=(r=e.clientId)==null?void 0:r.trim(),h=(n=e.clientSecret)==null?void 0:n.trim(),p=(a=e.clientContext)==null?void 0:a.trim(),g=(s=e.cityId)==null?void 0:s.trim();if(!d||!f||!h||!p||!g)return console.warn("[supabaseQueries] CarryBee API parameters incomplete"),[];const y=`${Uc}/functions/v1/carrybee-zones`,v=await fetch(y,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${zc}`},body:JSON.stringify({baseUrl:d,clientId:f,clientSecret:h,clientContext:p,cityId:g})});if(!v.ok)return console.error("[supabaseQueries] Zones Edge Function error:",v.status),[];const j=await v.json();return j.error||!((l=j.data)!=null&&l.zones)?(console.error("[supabaseQueries] Zones Edge Function returned error:",j.error),[]):j.data.zones.map(S=>({id:S.id,name:S.name}))}catch(d){return console.error("[supabaseQueries] fetchCarryBeeZones exception:",d instanceof Error?d.message:d),[]}}async function mq(e){var t,r,n,a,s,l,d;try{const f=(t=e.baseUrl)==null?void 0:t.trim(),h=(r=e.clientId)==null?void 0:r.trim(),p=(n=e.clientSecret)==null?void 0:n.trim(),g=(a=e.clientContext)==null?void 0:a.trim(),y=(s=e.cityId)==null?void 0:s.trim(),v=(l=e.zoneId)==null?void 0:l.trim();if(!f||!h||!p||!g||!y||!v)return console.warn("[supabaseQueries] CarryBee API parameters incomplete"),[];const j=`${Uc}/functions/v1/carrybee-areas`,S=await fetch(j,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${zc}`},body:JSON.stringify({baseUrl:f,clientId:h,clientSecret:p,clientContext:g,cityId:y,zoneId:v})});if(!S.ok)return console.error("[supabaseQueries] Areas Edge Function error:",S.status),[];const _=await S.json();return _.error||!((d=_.data)!=null&&d.areas)?(console.error("[supabaseQueries] Areas Edge Function returned error:",_.error),[]):_.data.areas.map(N=>({id:N.id,name:N.name}))}catch(f){return console.error("[supabaseQueries] fetchCarryBeeAreas exception:",f instanceof Error?f.message:f),[]}}async function pq(e){var t,r,n,a;try{const s=(t=e.baseUrl)==null?void 0:t.trim(),l=(r=e.clientId)==null?void 0:r.trim(),d=(n=e.clientSecret)==null?void 0:n.trim(),f=(a=e.clientContext)==null?void 0:a.trim();if(!s||!l||!d||!f||!e.storeId)return console.warn("[supabaseQueries] CarryBee API parameters incomplete"),{error:"Missing required parameters"};console.log("[supabaseQueries] Calling Edge Function to submit CarryBee order");const h=`${Uc}/functions/v1/carrybee-submit-order`,p=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${zc}`},body:JSON.stringify({baseUrl:s,clientId:l,clientSecret:d,clientContext:f,storeId:e.storeId,deliveryType:e.deliveryType,productType:e.productType,recipientPhone:e.recipientPhone,recipientName:e.recipientName,recipientAddress:e.recipientAddress,cityId:e.cityId,zoneId:e.zoneId,areaId:e.areaId,itemWeight:e.itemWeight,collectableAmount:e.collectableAmount})});if(console.log("[supabaseQueries] Submit Order Edge Function response status:",p.status),!p.ok)return console.error("[supabaseQueries] Submit Order Edge Function error:",p.status),{error:`HTTP ${p.status}`};const g=await p.json();return console.log("[supabaseQueries] Submit Order response:",g),g.error?(console.error("[supabaseQueries] Edge Function returned error:",g.error),{error:g.error}):(console.log("[supabaseQueries] Successfully submitted order to CarryBee"),g.data)}catch(s){return console.error("[supabaseQueries] submitCarryBeeOrder exception:",s instanceof Error?s.message:s),{error:s instanceof Error?s.message:"Unknown error"}}}async function gq(e){var t,r,n,a,s;try{const l=(t=e.baseUrl)==null?void 0:t.trim(),d=(r=e.apiKey)==null?void 0:r.trim(),f=(n=e.secretKey)==null?void 0:n.trim();if(console.log("[supabaseQueries] ======== BEFORE TRIM ========"),console.log("[supabaseQueries] baseUrl (raw):",JSON.stringify(e.baseUrl)),console.log("[supabaseQueries] apiKey (raw):",JSON.stringify((a=e.apiKey)==null?void 0:a.substring(0,5))),console.log("[supabaseQueries] secretKey (raw):",JSON.stringify((s=e.secretKey)==null?void 0:s.substring(0,5))),console.log("[supabaseQueries] ======== AFTER TRIM ========"),console.log("[supabaseQueries] baseUrl (trimmed):",JSON.stringify(l)),console.log("[supabaseQueries] apiKey (trimmed):",JSON.stringify(d==null?void 0:d.substring(0,5))),console.log("[supabaseQueries] secretKey (trimmed):",JSON.stringify(f==null?void 0:f.substring(0,5))),!l||!d||!f||!e.invoice||!e.recipientName||!e.recipientPhone||!e.recipientAddress||e.codAmount===void 0)return console.warn("[supabaseQueries] Steadfast API parameters incomplete"),console.warn("[supabaseQueries] Validation:",{baseUrl:!!l,apiKey:!!d,secretKey:!!f,invoice:!!e.invoice,recipientName:!!e.recipientName,recipientPhone:!!e.recipientPhone,recipientAddress:!!e.recipientAddress,codAmount:e.codAmount!==void 0}),{error:"Missing required parameters"};console.log("[supabaseQueries] ======== CALLING EDGE FUNCTION ========");const h=`${Uc}/functions/v1/steadfast-submit-order`;console.log("[supabaseQueries] Edge Function URL:",h);const p={baseUrl:l,apiKey:d,secretKey:f,invoice:e.invoice,recipientName:e.recipientName,recipientPhone:e.recipientPhone,recipientAddress:e.recipientAddress,codAmount:e.codAmount};console.log("[supabaseQueries] Payload being sent:",{baseUrl:l,apiKey:`${d.substring(0,5)}...`,secretKey:`${f.substring(0,5)}...`,invoice:p.invoice,recipientName:p.recipientName,recipientPhone:p.recipientPhone,recipientAddress:p.recipientAddress,codAmount:p.codAmount});const g=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${zc}`},body:JSON.stringify(p)});if(console.log("[supabaseQueries] Submit Steadfast Order Edge Function response status:",g.status),!g.ok)return console.error("[supabaseQueries] Submit Steadfast Order Edge Function error:",g.status),{error:`HTTP ${g.status}`};const y=await g.json();if(console.log("[supabaseQueries] Submit Steadfast Order response:",y),y.error){const v=y.details?`${y.error}: ${y.details}`:y.error;return console.error("[supabaseQueries] Edge Function returned error:",v),{error:v}}return console.log("[supabaseQueries] Successfully submitted order to Steadfast"),y.data}catch(l){return console.error("[supabaseQueries] submitSteadfastOrder exception:",l instanceof Error?l.message:l),{error:l instanceof Error?l.message:"Unknown error"}}}async function yq(e){await Gr();try{const[t,r,n,a,s]=await Promise.all([e.company?oq(e.company):Yd(),e.order?mD(e.order):zw(),e.invoice?lq(e.invoice):qw(),e.defaults?cq(e.defaults):Fw(),e.courier?uq(e.courier):Kw()]);return{company:t,order:r,invoice:n,defaults:a,courier:s}}catch(t){throw console.error("[supabaseQueries] batchUpdateSettings error:",t),t}}const pD=x.createContext(void 0),vq=({children:e})=>{const[t,r]=x.useState(null),[n,a]=x.useState(!0),s=2500;console.log("[AuthProvider] Mounting - initializing context provider"),x.useEffect(()=>{let f=!0;return(async()=>{try{console.log("[Auth] Initializing - restoring session from localStorage...");const p=localStorage.getItem("currentUserId");if(!p){console.log("[Auth] No saved session - user is logged out"),f&&(r(null),Ne.currentUser=null,Gu(),a(!1));return}console.log("[Auth] Found stored user ID, fetching full profile...");let g=0;const y=5,v=async()=>{try{const S=await Uw(p);if(S)return console.log("[Auth] Fetched user profile:",S.name),S}catch(S){if(console.warn("[Auth] Fetch attempt failed:",S),g<y)return g++,await new Promise(_=>setTimeout(_,s)),v()}return null},j=await v();f&&(j?(r(j),Ne.currentUser=j,Gu(),console.log("[Auth] Session restored:",j.name)):(console.warn("[Auth] Could not restore profile, clearing session"),r(null),Ne.currentUser=null,localStorage.removeItem("currentUserId"),Gu()),a(!1))}catch(p){console.error("[Auth] Init error:",p),f&&(r(null),Ne.currentUser=null,a(!1))}})(),()=>{f=!1}},[]);const l=async(f,h)=>{const p=f.includes("@")?f.split("@")[0]:f;console.log("[Auth] signIn called with phone:",p);try{const{user:g,error:y}=await k8(p,h);return y||!g?(console.error("[Auth] signIn failed:",y),{error:{message:y||"Login failed"}}):(console.log("[Auth] signIn successful for:",g.phone),r(g),Ne.currentUser=g,Gu(),localStorage.setItem("currentUserId",g.id),localStorage.setItem("isLoggedIn","true"),a(!1),window.dispatchEvent(new Event("authChange")),console.log("[Auth] User logged in:",g.name),{data:{user:g},error:null})}catch(g){return console.error("[Auth] signIn exception:",(g==null?void 0:g.message)||g),{error:{message:(g==null?void 0:g.message)||"Login failed"}}}},d=async()=>{console.log("[Auth] signOut called"),r(null),Ne.currentUser=null,Gu(),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("currentUserId"),localStorage.removeItem("userProfile"),localStorage.removeItem("userData"),localStorage.removeItem("currentUser"),window.dispatchEvent(new Event("authChange")),console.log("[Auth] signOut completed")};return console.log("[AuthProvider] Rendering with state:",{userName:t==null?void 0:t.name,isLoading:n}),c.jsx(pD.Provider,{value:{user:t,isLoading:n,signIn:l,signOut:d},children:e})};function ba(){const e=x.useContext(pD);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const gD=x.createContext(void 0),bq=({children:e})=>{const[t,r]=x.useState([]),n=x.useCallback((l,d,f=3500)=>{const h=`toast-${Date.now()}-${Math.random()}`,p={id:h,message:l,type:d,duration:f};return r(g=>[...g,p]),f>0&&setTimeout(()=>{a(h)},f),h},[]),a=x.useCallback(l=>{r(d=>d.filter(f=>f.id!==l))},[]),s=x.useCallback((l,d,f,h=3500)=>{r(p=>{const g=p.map(y=>y.id===l?{...y,message:d,type:f,duration:h}:y);return h>0&&setTimeout(()=>{a(l)},h),g})},[a]);return c.jsx(gD.Provider,{value:{toasts:t,showToast:n,dismissToast:a,updateToast:s},children:e})},yD=()=>{const e=x.useContext(gD);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},zr=()=>{const{showToast:e,updateToast:t}=yD();return{success:r=>e(r,"success",3500),error:r=>e(r,"error",4500),warning:r=>e(r,"warning",3500),info:r=>e(r,"info",3500),loading:r=>e(r,"info",0),update:(r,n,a="success")=>t(r,n,a,3500)}},vD=x.createContext(void 0),xq=({children:e})=>{const[t,r]=x.useState(""),n=()=>r("");return c.jsx(vD.Provider,{value:{searchQuery:t,setSearchQuery:r,clearSearch:n},children:e})},Ka=()=>{const e=x.useContext(vD);if(!e)throw new Error("useSearch must be used within a SearchProvider");return e},wq=x.createContext(void 0),jq=({children:e})=>{const t=Fe(),[r,n]=$t.useState(!1);return x.useEffect(()=>{console.log("[Realtime] Initializing subscriptions for orders, bills, transactions...");const a=be.channel("public:orders",{config:{broadcast:{self:!0},presence:{key:""}}}).on("postgres_changes",{event:"*",schema:"public",table:"orders"},f=>{var h,p;if(console.log("[Realtime] Orders change detected:",f.eventType,(h=f.new)==null?void 0:h.id),f.eventType==="INSERT"){const g=t.getQueryData(["orders"])||[];g.find(y=>y.id===f.new.id)||t.setQueryData(["orders"],[f.new,...g])}else f.eventType==="UPDATE"?t.setQueryData(["orders"],(g=[])=>g.map(y=>y.id===f.new.id?f.new:y)):f.eventType==="DELETE"&&t.setQueryData(["orders"],(g=[])=>g.filter(y=>y.id!==f.new.id));t.invalidateQueries({queryKey:["ordersByCustomerId"]}),(p=f.new)!=null&&p.id&&t.invalidateQueries({queryKey:["order",f.new.id]})}).subscribe((f,h)=>{f==="SUBSCRIBED"?(console.log("[Realtime] Orders channel subscribed"),n(!0)):f==="CHANNEL_ERROR"&&h&&(console.error("[Realtime] Orders channel error:",h),n(!1))}),s=be.channel("public:bills",{config:{broadcast:{self:!0},presence:{key:""}}}).on("postgres_changes",{event:"*",schema:"public",table:"bills"},f=>{var h,p;if(console.log("[Realtime] Bills change detected:",f.eventType,(h=f.new)==null?void 0:h.id),f.eventType==="INSERT"){const g=t.getQueryData(["bills"])||[];g.find(y=>y.id===f.new.id)||t.setQueryData(["bills"],[f.new,...g])}else f.eventType==="UPDATE"?t.setQueryData(["bills"],(g=[])=>g.map(y=>y.id===f.new.id?f.new:y)):f.eventType==="DELETE"&&t.setQueryData(["bills"],(g=[])=>g.filter(y=>y.id!==f.new.id));(p=f.new)!=null&&p.id&&t.invalidateQueries({queryKey:["bill",f.new.id]})}).subscribe((f,h)=>{f==="SUBSCRIBED"?console.log("[Realtime] Bills channel subscribed"):f==="CHANNEL_ERROR"&&h&&console.error("[Realtime] Bills channel error:",h)}),l=be.channel("public:transactions",{config:{broadcast:{self:!0},presence:{key:""}}}).on("postgres_changes",{event:"*",schema:"public",table:"transactions"},f=>{var h,p;if(console.log("[Realtime] Transactions change detected:",f.eventType,(h=f.new)==null?void 0:h.id),f.eventType==="INSERT"){const g=t.getQueryData(["transactions"])||[];if(!g.find(y=>y.id===f.new.id)){const y=[f.new,...g].sort((v,j)=>{const S=new Date(v.date||v.createdAt||0).getTime();return new Date(j.date||j.createdAt||0).getTime()-S});t.setQueryData(["transactions"],y)}}else f.eventType==="UPDATE"?t.setQueryData(["transactions"],(g=[])=>g.map(y=>y.id===f.new.id?f.new:y)):f.eventType==="DELETE"&&t.setQueryData(["transactions"],(g=[])=>g.filter(y=>y.id!==f.new.id));(p=f.new)!=null&&p.id&&t.invalidateQueries({queryKey:["transaction",f.new.id]})}).subscribe((f,h)=>{f==="SUBSCRIBED"?console.log("[Realtime] Transactions channel subscribed"):f==="CHANNEL_ERROR"&&h&&console.error("[Realtime] Transactions channel error:",h)}),d=be.channel("public:accounts",{config:{broadcast:{self:!0},presence:{key:""}}}).on("postgres_changes",{event:"*",schema:"public",table:"accounts"},f=>{var h,p;if(console.log("[Realtime] Accounts change detected:",f.eventType,(h=f.new)==null?void 0:h.id),f.eventType==="INSERT"){const g=t.getQueryData(["accounts"])||[];g.find(y=>y.id===f.new.id)||t.setQueryData(["accounts"],[f.new,...g])}else f.eventType==="UPDATE"?t.setQueryData(["accounts"],(g=[])=>g.map(y=>y.id===f.new.id?f.new:y)):f.eventType==="DELETE"&&t.setQueryData(["accounts"],(g=[])=>g.filter(y=>y.id!==f.new.id));(p=f.new)!=null&&p.id&&t.invalidateQueries({queryKey:["account",f.new.id]})}).subscribe((f,h)=>{f==="SUBSCRIBED"?console.log("[Realtime] Accounts channel subscribed"):f==="CHANNEL_ERROR"&&h&&console.error("[Realtime] Accounts channel error:",h)});return()=>{console.log("[Realtime] Cleaning up all subscriptions"),be.removeChannel(a),be.removeChannel(s),be.removeChannel(l),be.removeChannel(d),n(!1)}},[t]),c.jsx(wq.Provider,{value:{isConnected:r},children:e})},bD=x.createContext(void 0),Sq=({children:e})=>{const t=Fe(),[r,n]=x.useState(navigator.onLine),[a,s]=x.useState(!1);return x.useEffect(()=>{console.log("[Network] Provider initialized - initial online status:",navigator.onLine);const l=()=>{console.log("[Network] Connection restored - refetching all queries"),n(!0),s(!0),t.refetchQueries()},d=()=>{console.log("[Network] Connection lost - offline mode activated"),n(!1)};return window.addEventListener("online",l),window.addEventListener("offline",d),()=>{window.removeEventListener("online",l),window.removeEventListener("offline",d)}},[t]),c.jsx(bD.Provider,{value:{isOnline:r,wasOffline:a},children:e})};function _q(){const e=x.useContext(bD);if(!e)throw new Error("useNetwork must be used within NetworkProvider");return e}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nq=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oq=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=e=>{const t=Oq(e);return t.charAt(0).toUpperCase()+t.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Eq={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aq=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cq=x.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:l,...d},f)=>x.createElement("svg",{ref:f,...Eq,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:xD("lucide",a),...!s&&!Aq(d)&&{"aria-hidden":"true"},...d},[...l.map(([h,p])=>x.createElement(h,p)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=(e,t)=>{const r=x.forwardRef(({className:n,...a},s)=>x.createElement(Cq,{ref:s,iconNode:t,className:xD(`lucide-${Nq(YE(e))}`,`lucide-${e}`,n),...a}));return r.displayName=YE(e),r};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pq=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],kq=Rt("arrow-right-left",Pq);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tq=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],WE=Rt("briefcase",Tq);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dq=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Mq=Rt("chart-column",Dq);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rq=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Iq=Rt("check",Rq);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lq=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Bq=Rt("chevron-right",Lq);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $q=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Uq=Rt("circle-alert",$q);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zq=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],qq=Rt("circle-plus",zq);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fq=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Kq=Rt("copy",Fq);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qq=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Hq=Rt("credit-card",Qq);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vq=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Gq=Rt("download",Vq);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yq=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Wq=Rt("ellipsis-vertical",Yq);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xq=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Zq=Rt("info",Xq);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jq=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],e9=Rt("layout-dashboard",Jq);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],r9=Rt("log-out",t9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=[["path",{d:"M5 12h14",key:"1ays0h"}]],a9=Rt("minus",n9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],s9=Rt("package",i9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],l9=Rt("plus",o9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],u9=Rt("printer",c9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],f9=Rt("search",d9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],m9=Rt("settings",h9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],g9=Rt("shopping-cart",p9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],v9=Rt("square-pen",y9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],x9=Rt("trash-2",b9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w9=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],j9=Rt("truck",w9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],XE=Rt("users",S9),ie={Dashboard:c.jsx(e9,{size:20}),Sales:c.jsx(g9,{size:20}),Products:c.jsx(s9,{size:20}),Customers:c.jsx(XE,{size:20}),Vendors:c.jsx(WE,{size:20}),Users:c.jsx(XE,{size:20}),Briefcase:c.jsx(WE,{size:20}),Banking:c.jsx(Hq,{size:20}),Reports:c.jsx(Mq,{size:20}),Settings:c.jsx(m9,{size:20}),Courier:c.jsx(j9,{size:20}),Plus:c.jsx(l9,{size:20}),Minus:c.jsx(a9,{size:20}),PlusCircle:c.jsx(qq,{size:20}),LogOut:c.jsx(r9,{size:20}),ChevronRight:c.jsx(Bq,{size:20}),Search:c.jsx(f9,{size:18}),More:c.jsx(Wq,{size:18}),Print:c.jsx(u9,{size:18}),Download:c.jsx(Gq,{size:18}),Duplicate:c.jsx(Kq,{size:18}),Edit:c.jsx(v9,{size:18}),Delete:c.jsx(x9,{size:18}),Transfer:c.jsx(kq,{size:18}),Check:c.jsx(Iq,{size:20}),AlertCircle:c.jsx(Uq,{size:20}),Info:c.jsx(Zq,{size:20})},Se=e=>new Intl.NumberFormat("en-BD",{style:"currency",currency:"BDT",minimumFractionDigits:0,maximumFractionDigits:0}).format(e).replace("BDT",""),Lp=e=>({ON_HOLD:"bg-gray-100 text-gray-600",PROCESSING:"bg-blue-100 text-blue-600",PICKED:"bg-purple-100 text-purple-600",COMPLETED:"bg-green-100 text-green-600",CANCELLED:"bg-red-100 text-red-600",RECEIVED:"bg-green-100 text-green-600","On Hold":"bg-gray-100 text-gray-600",Processing:"bg-blue-100 text-blue-600",Picked:"bg-purple-100 text-purple-600",Completed:"bg-green-100 text-green-600",Cancelled:"bg-red-100 text-red-600",Received:"bg-green-100 text-green-600"})[e]||"bg-gray-100 text-gray-600";var qe=(e=>(e.ADMIN="Admin",e.EMPLOYEE="Employee",e))(qe||{}),Ie=(e=>(e.ON_HOLD="On Hold",e.PROCESSING="Processing",e.PICKED="Picked",e.COMPLETED="Completed",e.CANCELLED="Cancelled",e))(Ie||{}),hn=(e=>(e.ON_HOLD="On Hold",e.PROCESSING="Processing",e.RECEIVED="Received",e.PAID="Paid",e))(hn||{});const se={colors:{primary:{50:"bg-[#ebf4ff]",500:"bg-[#3c5a82]",600:"bg-[#0f2f57]",700:"bg-[#0c203b]",text:"text-[#0f2f57]"},secondary:{600:"bg-blue-600",700:"bg-blue-700"},danger:{50:"bg-red-50",600:"bg-red-600",700:"bg-red-700",text:"text-red-600"},bg:{primary:"bg-white",secondary:"bg-gray-50",tertiary:"bg-gray-100"},text:{primary:"text-gray-900",secondary:"text-gray-500",tertiary:"text-gray-400"},border:{primary:"border-gray-100"}},radius:{sm:"rounded-lg",md:"rounded-xl"},transitions:{normal:"transition-all duration-300"},buttons:{base:"inline-flex items-center justify-center gap-2 font-bold rounded-xl transition-all duration-300 cursor-pointer",secondary:"bg-gray-100 text-gray-600 hover:bg-gray-200",outline:"border-2 border-gray-200 text-gray-700 hover:bg-gray-50",sizes:{sm:"px-3 py-2 text-xs",md:"px-4 py-2.5 text-sm",lg:"px-6 py-3.5 text-sm"}},inputs:{base:"w-full px-4 py-2.5 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-[#3c5a82] focus:border-transparent transition-all",label:"block text-sm font-semibold text-gray-700 mb-2",error:"border-red-500 focus:ring-red-500"},table:{header:"bg-gray-50 border-b border-gray-100"},card:{base:"bg-white rounded-2xl shadow-sm border border-gray-100 transition-all",elevated:"bg-white rounded-2xl shadow-md border border-gray-100"}},hs=({to:e,icon:t,label:r,active:n,onClick:a,children:s})=>{const[l,d]=x.useState(n);return s?c.jsxs("div",{className:"space-y-1",children:[c.jsxs("button",{onClick:()=>d(!l),className:`flex items-center justify-between w-full px-4 py-3 ${se.radius.md} ${se.transitions.normal} ${n?`${se.colors.primary[50]} ${se.colors.primary.text}`:`text-gray-500 hover:${se.colors.primary[50]} hover:${se.colors.primary.text}`}`,children:[c.jsxs("div",{className:"flex items-center gap-3",children:[t,c.jsx("span",{className:"font-semibold text-sm",children:r})]}),c.jsx("div",{className:`transition-transform duration-200 ${l?"rotate-90":""}`,children:ie.ChevronRight})]}),l&&c.jsx("div",{className:"pl-11 space-y-1",children:s.map(f=>c.jsx(Oc,{to:f.to,onClick:a,className:`block px-4 py-2 text-sm font-medium ${se.radius.sm} ${se.transitions.normal} ${f.active?`${se.colors.primary[600]} text-white`:`text-gray-400 hover:${se.colors.primary.text} hover:${se.colors.primary[50]}/30`}`,children:f.label},f.to))})]}):c.jsxs(Oc,{to:e||"#",onClick:a,className:`flex items-center gap-3 px-4 py-3 ${se.radius.md} ${se.transitions.normal} ${n?`${se.colors.primary[600]} text-white shadow-lg shadow-emerald-200/50`:`text-gray-500 hover:${se.colors.primary[50]} hover:${se.colors.primary.text}`}`,children:[t,c.jsx("span",{className:"font-semibold text-sm",children:r})]})},at=({children:e})=>{const t=va(),r=vt(),{signOut:n,profile:a}=ba(),{searchQuery:s,setSearchQuery:l}=Ka(),[d,f]=x.useState(!1),[h,p]=x.useState(!1),[g,y]=x.useState(!1),[v,j]=x.useState({name:Ne.settings.company.name,logo:Ne.settings.company.logo}),S=a||Ne.currentUser;if(x.useEffect(()=>{(async()=>{try{const E=await Yd();j(E)}catch(E){console.error("Failed to load company settings:",E)}})()},[]),$t.useEffect(()=>{const O=document.querySelector("main");O&&(O.scrollTop=0);try{window.scrollTo(0,0)}catch{}},[t.pathname]),!S)return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"inline-block p-4",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),c.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading user data..."})]})});const _=async()=>{try{await n(),r("/login",{replace:!0})}catch(O){console.error("Logout failed:",O)}},N=O=>t.pathname===O||t.pathname.startsWith(O+"/");return c.jsxs("div",{className:`${se.colors.bg.secondary} flex overflow-hidden`,style:{minHeight:"100vh"},children:[d&&c.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm z-40 lg:hidden",onClick:()=>f(!1)}),c.jsx("aside",{className:`fixed inset-y-0 left-0 z-50 w-72 ${se.colors.bg.primary} border-r ${se.colors.border.primary} ${se.transitions.normal} transform lg:sticky lg:top-0 lg:h-screen lg:translate-x-0 ${d?"translate-x-0":"-translate-x-full"}`,children:c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsx("div",{className:"p-8",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`p-1 ${se.colors.primary[50]} rounded-[50%]`,children:v.logo&&c.jsx("img",{src:v.logo,alt:"Logo",className:"w-10 h-10 rounded-lg object-cover"})}),c.jsxs("div",{children:[c.jsx("h1",{className:`text-xl font-black ${se.colors.text.primary} tracking-tight leading-none`,children:v.name}),c.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Management"})]})]})}),c.jsxs("nav",{className:"flex-1 px-4 space-y-1 overflow-y-auto",children:[c.jsx(hs,{to:"/dashboard",icon:ie.Dashboard,label:"Dashboard",active:N("/dashboard"),onClick:()=>f(!1)}),c.jsx(hs,{to:"/products",icon:ie.Products,label:"Products",active:N("/products"),onClick:()=>f(!1)}),c.jsx(hs,{icon:ie.Sales,label:"Sales",active:N("/orders")||N("/customers"),children:[{to:"/orders",label:"Orders",active:N("/orders")},{to:"/customers",label:"Customers",active:N("/customers")}],onClick:()=>f(!1)}),S.role===qe.ADMIN&&c.jsxs(c.Fragment,{children:[c.jsx(hs,{icon:ie.Briefcase,label:"Purchases",active:N("/bills")||N("/vendors"),children:[{to:"/bills",label:"Bills",active:N("/bills")},{to:"/vendors",label:"Vendors",active:N("/vendors")}],onClick:()=>f(!1)}),c.jsx(hs,{icon:ie.Banking,label:"Banking",active:N("/banking"),children:[{to:"/banking/accounts",label:"Accounts",active:N("/banking/accounts")},{to:"/banking/transactions",label:"Transactions",active:N("/banking/transactions")},{to:"/banking/transfer",label:"Transfer",active:N("/banking/transfer")}],onClick:()=>f(!1)})]}),S.role===qe.ADMIN&&c.jsxs(c.Fragment,{children:[c.jsx(hs,{to:"/reports",icon:ie.Reports,label:"Reports",active:N("/reports"),onClick:()=>f(!1)}),c.jsx(hs,{to:"/users",icon:ie.Users,label:"Users",active:N("/users"),onClick:()=>f(!1)}),c.jsx(hs,{to:"/settings",icon:ie.Settings,label:"Settings",active:N("/settings"),onClick:()=>f(!1)})]})]})]})}),c.jsxs("div",{className:"flex-1 flex flex-col min-w-0 h-screen overflow-hidden",children:[c.jsxs("header",{className:`flex-shrink-0 sticky top-0 z-40 ${se.colors.bg.primary}/80 backdrop-blur-lg border-b ${se.colors.border.primary} px-6 h-20 flex items-center justify-between`,children:[c.jsx("button",{onClick:()=>f(!0),className:`lg:hidden p-2.5 hover:${se.colors.bg.tertiary} ${se.radius.md} ${se.colors.text.secondary} border ${se.colors.border.primary}`,children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16m-7 6h7"})})}),c.jsxs("div",{className:"flex-1 max-w-xl mx-4 relative group hidden sm:block",children:[c.jsx("div",{className:`absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-300 group-focus-within:${se.colors.primary.text} ${se.transitions.normal}`,children:ie.Search}),c.jsx("input",{type:"text",placeholder:"Search orders, invoices, or customers...",value:s,onChange:O=>l(O.target.value),className:`block w-full pl-11 pr-4 py-2.5 ${se.colors.bg.secondary} border-transparent focus:${se.colors.bg.primary} focus:ring-2 focus:ring-[#3c5a82] focus:border-transparent ${se.radius.md} text-sm ${se.transitions.normal}`})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>p(!h),className:`${se.colors.primary[600]} text-white w-10 h-10 flex items-center justify-center ${se.radius.md} hover:${se.colors.primary[700]} ${se.transitions.normal} shadow-lg shadow-[#0f2f57]/20 active:scale-95`,children:ie.Plus}),h&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>p(!1)}),c.jsxs("div",{className:`absolute right-0 mt-3 w-56 ${se.colors.bg.primary} border ${se.colors.border.primary} rounded-2xl shadow-2xl z-50 py-2 animate-in fade-in zoom-in slide-in-from-top-2 duration-200 origin-top-right`,children:[c.jsx("div",{className:`px-4 py-2 text-[10px] font-bold ${se.colors.text.tertiary} uppercase tracking-widest border-b ${se.colors.border.primary} mb-1`,children:"Quick Actions"}),S.role===qe.EMPLOYEE?[{label:"New Order",to:"/orders/new",icon:ie.Sales},{label:"New Customer",to:"/customers/new",icon:ie.Customers}].map(O=>c.jsxs(Oc,{to:O.to,onClick:()=>p(!1),className:`flex items-center gap-3 px-4 py-3 text-sm font-bold ${se.colors.text.primary} hover:${se.colors.primary[50]} hover:${se.colors.primary.text} ${se.transitions.normal}`,children:[c.jsx("span",{className:"opacity-70",children:O.icon}),O.label]},O.label)):[{label:"New Order",to:"/orders/new",icon:ie.Sales},{label:"New Bill",to:"/bills/new",icon:ie.Briefcase},{label:"New Customer",to:"/customers/new",icon:ie.Customers},{label:"New Vendor",to:"/vendors/new",icon:ie.Vendors},{label:"Add Income",to:"/transactions/new/income",icon:ie.PlusCircle},{label:"Add Expense",to:"/transactions/new/expense",icon:ie.Delete}].map(O=>c.jsxs(Oc,{to:O.to,onClick:()=>p(!1),className:`flex items-center gap-3 px-4 py-3 text-sm font-bold ${se.colors.text.primary} hover:${se.colors.primary[50]} hover:${se.colors.primary.text} ${se.transitions.normal}`,children:[c.jsx("span",{className:"opacity-70",children:O.icon}),O.label]},O.label))]})]})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>y(!g),className:`flex items-center gap-3 pl-4 border-l ${se.colors.border.primary} hover:opacity-70 ${se.transitions.normal}`,children:[c.jsxs("div",{className:"text-right hidden md:block",children:[c.jsx("p",{className:`text-sm font-black ${se.colors.text.primary} leading-none`,children:S.name}),c.jsx("p",{className:`text-[10px] font-bold ${se.colors.primary.text} uppercase tracking-widest mt-1`,children:S.role})]}),c.jsx("img",{src:S.image||`https://ui-avatars.com/api/?name=${S.name}&background=0f2f57&color=fff`,alt:"Profile",className:"w-10 h-10 rounded-[50%] object-cover cursor-pointer"})]}),g&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>y(!1)}),c.jsxs("div",{className:`absolute right-0 mt-3 w-48 ${se.colors.bg.primary} border ${se.colors.border.primary} rounded-xl shadow-2xl z-50 py-2 animate-in fade-in zoom-in slide-in-from-top-2 duration-200 origin-top-right`,children:[c.jsxs("button",{onClick:()=>{r(`/users/${S.id}`),y(!1)},className:`flex items-center gap-3 w-full px-4 py-3 text-sm font-bold ${se.colors.primary.text} hover:${se.colors.primary[50]} ${se.transitions.normal}`,children:[ie.Users,"Profile"]}),c.jsxs("button",{onClick:()=>{_(),y(!1)},className:`flex items-center gap-3 w-full px-4 py-3 text-sm font-bold ${se.colors.danger.text} hover:${se.colors.danger[50]} ${se.transitions.normal}`,children:[ie.LogOut,"Logout"]})]})]})]})]})]}),c.jsxs("main",{className:"flex-1 overflow-y-auto p-6 lg:p-10 animate-in fade-in duration-500 relative",children:[e,c.jsxs("footer",{className:`mt-20 py-8 border-t ${se.colors.border.primary} flex flex-col items-center gap-2`,children:[c.jsxs("p",{className:`text-sm font-medium ${se.colors.text.secondary}`,children:[" ",new Date().getFullYear()," ",v.name,". All rights reserved."]}),c.jsxs("a",{href:"https://sajedurrahmanfiad.me",target:"_blank",rel:"noreferrer",className:`group flex items-center gap-1.5 text-[11px] font-bold ${se.colors.text.secondary} hover:${se.colors.primary.text} ${se.transitions.normal} uppercase tracking-widest`,children:["Developed by ",c.jsx("span",{className:`${se.colors.text.secondary} group-hover:${se.colors.primary.text} underline underline-offset-4 decoration-[#0f2f57]/20`,children:"Md Sajedur Rahman Fiad"})]})]})]})]})]})},_9=()=>{const{toasts:e,dismissToast:t}=yD(),r=n=>{switch(n){case"success":return{icon:ie.Check,bg:"bg-green-50",border:"border-green-200",text:"text-green-800",icon_color:"text-green-600"};case"error":return{icon:ie.AlertCircle,bg:"bg-red-50",border:"border-red-200",text:"text-red-800",icon_color:"text-red-600"};case"warning":return{icon:ie.AlertCircle,bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",icon_color:"text-yellow-600"};case"info":return{icon:ie.Info,bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",icon_color:"text-blue-600"};default:return{icon:ie.Info,bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-800",icon_color:"text-gray-600"}}};return c.jsx("div",{className:"fixed bottom-6 right-6 z-[9999] flex flex-col gap-3",children:e.map(n=>{const{icon:a,bg:s,border:l,text:d,icon_color:f}=r(n.type);return c.jsxs("div",{className:`${s} ${l} border rounded-lg p-4 shadow-md flex items-start gap-3 min-w-[320px] max-w-md animate-in slide-in-from-right-5 fade-in duration-300`,children:[c.jsx("div",{className:`${f} flex-shrink-0 mt-0.5`,children:a}),c.jsx("div",{className:`${d} flex-1 text-sm font-medium`,children:n.message}),c.jsx("button",{onClick:()=>t(n.id),className:`${f} flex-shrink-0 hover:opacity-70 transition-opacity`,children:c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},n.id)})})},N9=()=>{const{isOnline:e}=_q(),[t,r]=x.useState(!1);return x.useEffect(()=>{if(!e)r(!0);else{const n=setTimeout(()=>{r(!1)},2e3);return()=>clearTimeout(n)}},[e]),t?c.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-red-50 border-b-2 shadow-lg transition-all duration-300",style:{borderColor:e?"#10b981":"#ef4444",backgroundColor:e?"#ecfdf5":"#fee2e2"},children:c.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-4 px-4 py-3",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[c.jsx("div",{className:`text-xl ${e?"text-green-600":"text-red-600"}`,children:e?"":""}),c.jsxs("div",{children:[c.jsx("p",{className:`font-bold ${e?"text-green-900":"text-red-900"}`,children:e?"Connection Restored":"No Internet Connection"}),c.jsx("p",{className:`text-sm ${e?"text-green-700":"text-red-700"}`,children:e?"Data is syncing with the server":"Your changes will be saved when connection is restored"})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[!e&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-pulse w-2 h-2 rounded-full bg-red-500"}),c.jsx("span",{className:"text-xs font-medium text-red-600",children:"Waiting for connection..."})]}),e&&c.jsx("span",{className:"text-xs font-medium text-green-600",children:"Syncing..."})]})]})}):null},O9=()=>{const e=vt(),{signIn:t,isLoading:r,user:n,profile:a}=ba(),[s,l]=x.useState(""),[d,f]=x.useState(""),[h,p]=x.useState(!1),[g,y]=x.useState(""),[v,j]=x.useState(!1),[S,_]=x.useState({name:"BD Hatbela",logo:Ne.settings.company.logo});x.useEffect(()=>{console.log("[Login] Checking redirect - isLoading:",r,"authenticated:",!!n),!r&&n&&(console.log("[Login] User authenticated, navigating to dashboard"),e("/dashboard",{replace:!0}))},[n,r,e]),x.useEffect(()=>{(async()=>{try{const E=await Yd();_({name:"BD Hatbela",logo:E.logo||Ne.settings.company.logo})}catch(E){console.error("Failed to load company settings:",E),_({name:"BD Hatbela",logo:Ne.settings.company.logo})}})()},[]);const N=async O=>{var E,C;O.preventDefault(),y(""),j(!0),console.log("[Login] Form submitted with phone:",s);try{console.log("[Login] Calling signIn...");const{error:D,data:T}=await t(s,d);if(D){console.error("[Login] Sign-in error:",D);const M=(D==null?void 0:D.message)||"Authentication failed";y(M),j(!1);return}if(console.log("[Login] Sign-in successful, user:",(E=T==null?void 0:T.user)==null?void 0:E.email),!(T!=null&&T.profileLoaded)){console.error("[Login] Sign-in succeeded but profile not loaded"),y(((C=T==null?void 0:T.error)==null?void 0:C.message)||"Failed to load user profile. Please try again or contact administrator."),j(!1);return}console.log("[Login] Profile loaded, waiting for state to propagate...")}catch(D){console.error("[Login] Sign-in exception:",D),y((D==null?void 0:D.message)||"Failed to sign in"),j(!1)}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:c.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow p-8",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[S.logo&&c.jsx("img",{src:S.logo,alt:"Logo",className:"w-12 h-12 rounded-md object-cover"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-bold",children:S.name}),c.jsx("p",{className:"text-sm text-gray-500",children:"Sign in to continue"})]})]}),c.jsxs("form",{onSubmit:N,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),c.jsx("input",{value:s,onChange:O=>l(O.target.value),type:"tel",placeholder:"017XXXXXXXX",required:!0,disabled:v,className:"mt-1 block w-full border rounded px-3 py-2 focus:outline-none focus:ring disabled:opacity-50"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{value:d,onChange:O=>f(O.target.value),type:h?"text":"password",required:!0,disabled:v,className:"mt-1 block w-full border rounded px-3 py-2 pr-10 focus:outline-none focus:ring disabled:opacity-50"}),c.jsx("button",{type:"button",onClick:()=>p(!h),disabled:v,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 disabled:opacity-50",children:h?c.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:[c.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),c.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-14-14zM10 4C6.687 4 3.89 5.945 2.58 8.808c-.35.915-.35 2.468 0 3.384.74 1.94 2.08 3.61 3.756 4.7l1.83-1.83A3.992 3.992 0 016 10a4 4 0 016.956-3.533l1.416-1.416C14.225 4.523 12.15 4 10 4zm7.42 3.192c.35.915.35 2.468 0 3.384C15.26 13.055 12.463 15 9 15a6.966 6.966 0 01-3.15-.744l2.119-2.119A3.992 3.992 0 0114 10c0-.901-.281-1.735-.743-2.434l2.163-2.174z",clipRule:"evenodd"})})})]})]}),g&&c.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-sm text-red-600 space-y-2",children:[c.jsx("p",{className:"font-semibold",children:"Error"}),c.jsx("p",{children:g instanceof Error?g.message:String(g)}),(g instanceof Error?g.message:String(g)).includes("Email confirmation")&&c.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded text-yellow-700 text-xs",children:[c.jsx("p",{className:"font-semibold mb-1",children:"Quick Fix:"}),c.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[c.jsx("li",{children:"Go to Supabase Dashboard"}),c.jsx("li",{children:"Project  Authentication  Providers"}),c.jsx("li",{children:'Click "Email" tab'}),c.jsx("li",{children:'Toggle OFF "Confirm email"'}),c.jsx("li",{children:"Save settings"}),c.jsx("li",{children:"Try logging in again"})]})]})]}),c.jsx("div",{children:c.jsx("button",{type:"submit",disabled:v,className:"w-full bg-blue-600 text-white py-2 rounded disabled:opacity-50 disabled:cursor-not-allowed font-medium hover:bg-blue-700 transition-colors",children:v?"Signing in...":"Sign In"})})]})]})})},E9={primary:{bg:"bg-gray-50",text:"text-black",icon:"text-black"},secondary:{bg:"bg-gray-50",text:"text-black",icon:"text-black"},danger:{bg:"bg-gray-50",text:"text-black",icon:"text-black"},warning:{bg:"bg-gray-50",text:"text-black",icon:"text-black"},success:{bg:"bg-gray-50",text:"text-black",icon:"text-black"},info:{bg:"bg-gray-50",text:"text-black",icon:"text-black"},neutral:{bg:"bg-gray-50",text:"text-black",icon:"text-black"},profit:{bg:"bg-gray-50",text:"text-black",icon:"text-black"}},sa=({title:e,value:t,icon:r,variant:n="primary",bgColor:a,textColor:s,iconBgColor:l,isProfitCard:d=!1,profitValue:f})=>{const h=E9[n];let p=a||"bg-white",g=s||h.text,y=l||h.bg,v="";return d&&f!==void 0&&!a&&(f>=0?(p="bg-emerald-500",g="text-white",y="bg-emerald-600"):(p="bg-red-500",g="text-white",y="bg-red-600")),c.jsxs("div",{className:`p-6 flex items-center gap-4 ${p} rounded-xl shadow-lg border border-gray-100 ${v}`,children:[c.jsx("div",{className:`${y} p-4 rounded-lg flex items-center justify-center`,children:c.jsx("div",{className:g,children:r})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:`text-xs font-bold uppercase tracking-widest ${g==="text-white"?"text-white/70":"text-gray-400"}`,children:e}),c.jsx("h3",{className:`text-2xl font-black mt-1 ${g}`,children:t})]})]})},We=$t.forwardRef(({variant:e="primary",size:t="md",children:r,icon:n,loading:a=!1,className:s="",...l},d)=>{const f={primary:`${se.colors.primary[600]} text-white hover:${se.colors.primary[700]} shadow-lg shadow-[#0f2f57]/20`,secondary:se.buttons.secondary,danger:`${se.colors.danger[600]} text-white hover:${se.colors.danger[700]} shadow-lg`,outline:se.buttons.outline,ghost:"text-gray-600 hover:bg-gray-50"},h={sm:se.buttons.sizes.sm,md:se.buttons.sizes.md,lg:se.buttons.sizes.lg};return c.jsx("button",{ref:d,className:`${se.buttons.base} ${f[e]} ${h[t]} ${a?"opacity-75 cursor-wait":""} ${s}`,disabled:a||l.disabled,...l,children:c.jsxs("span",{className:"flex items-center gap-2",children:[a&&c.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n&&!a&&c.jsx("span",{children:n}),r]})})});We.displayName="Button";const A9={primary:`p-2.5 text-gray-400 hover:${se.colors.primary[600]} hover:bg-[#ebf4ff] rounded-lg transition-all`,danger:"p-2.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",secondary:`p-2.5 text-gray-400 hover:${se.colors.secondary[600]} hover:bg-[#e6f0ff] rounded-lg transition-all`,neutral:"p-2.5 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-all"},Ds=$t.forwardRef(({variant:e="primary",icon:t,title:r,className:n="",...a},s)=>c.jsx("button",{ref:s,className:`${A9[e]} ${n}`,title:r,...a,children:t}));Ds.displayName="IconButton";const Bp=({columns:e,rows:t=5})=>c.jsx(c.Fragment,{children:Array.from({length:t}).map((r,n)=>c.jsx("tr",{className:"border-b border-gray-50 animate-pulse",children:Array.from({length:e}).map((a,s)=>c.jsx("td",{className:"px-6 py-5",children:c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),c.jsx("div",{className:"h-3 bg-gray-100 rounded w-1/2"})]})},s))},n))}),$p=({columns:e,data:t,emptyMessage:r="No data found",onRowClick:n,rowClassName:a,hover:s=!0,striped:l=!1,size:d="md",loading:f=!1,loadingRows:h=8})=>{const p={sm:"px-4 py-3",md:"px-6 py-5",lg:"px-6 py-6"}[d],g=s?"hover:bg-[#ebf4ff]/50 cursor-pointer transition-all":"",y=l?"odd:bg-gray-50":"";return c.jsx("div",{className:`${se.card.base} overflow-visible`,children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsx("tr",{className:se.table.header,children:e.map(v=>c.jsx("th",{className:`${p} text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] ${v.align==="center"?"text-center":v.align==="right"?"text-right":""}`,style:v.width?{width:v.width}:void 0,children:v.label},v.key))})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:f?c.jsx(Bp,{columns:e.length,rows:h}):t.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:e.length,className:"px-6 py-20 text-center text-gray-400 italic font-medium",children:r})}):t.map((v,j)=>c.jsx("tr",{onClick:()=>n==null?void 0:n(v,j),className:`
                    border-b border-gray-50 transition-all
                    ${g}
                    ${y}
                    ${(a==null?void 0:a(v,j))||""}
                  `,children:e.map(S=>c.jsx("td",{className:`${p} ${S.align==="center"?"text-center":S.align==="right"?"text-right":""}`,children:S.render?S.render(v[S.key],v,j):v[S.key]},S.key))},v.id||j))})]})})})},C9=$t.forwardRef(({label:e,error:t,helperText:r,className:n="",...a},s)=>c.jsxs("div",{className:"w-full",children:[e&&c.jsx("label",{className:se.inputs.label,children:e}),c.jsx("input",{ref:s,className:`${se.inputs.base} ${t?se.inputs.error:""} ${n}`,...a}),(t||r)&&c.jsx("p",{className:`mt-1 text-xs ${t?"text-red-500":"text-gray-500"}`,children:t||r})]}));C9.displayName="Input";const P9=$t.forwardRef(({label:e,error:t,options:r,className:n="",...a},s)=>c.jsxs("div",{className:"w-full",children:[e&&c.jsx("label",{className:se.inputs.label,children:e}),c.jsx("select",{ref:s,className:`${se.inputs.base} ${t?se.inputs.error:""} ${n}`,...a,children:r.map(l=>c.jsx("option",{value:l.value,children:l.label},l.value))}),t&&c.jsx("p",{className:"mt-1 text-xs text-red-500",children:t instanceof Error?t.message:String(t)})]}));P9.displayName="Select";const k9=$t.forwardRef(({label:e,error:t,className:r="",...n},a)=>c.jsxs("div",{className:"w-full",children:[e&&c.jsx("label",{className:se.inputs.label,children:e}),c.jsx("textarea",{ref:a,className:`${se.inputs.base} resize-none ${t?se.inputs.error:""} ${r}`,...n}),t&&c.jsx("p",{className:"mt-1 text-xs text-red-500",children:t instanceof Error?t.message:String(t)})]}));k9.displayName="TextArea";const Wd=({isLoading:e,message:t="Loading..."})=>e?c.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 flex items-center justify-center",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8 flex flex-col items-center gap-4",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),c.jsx("p",{className:"text-gray-600 font-medium",children:t})]})}):null,$o=({filterRange:e,setFilterRange:t,customDates:r,setCustomDates:n,statusTab:a,setStatusTab:s,statusOptions:l=[],title:d})=>{const[f,h]=x.useState(!1),{searchQuery:p,setSearchQuery:g}=Ka(),y=["All Time","Today","This Week","This Month","This Year","Custom"];return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[c.jsxs("div",{className:"hidden sm:flex flex-wrap items-center gap-3",children:[c.jsxs("div",{className:"flex items-center gap-1.5 bg-white p-1.5 rounded-2xl border border-gray-100 shadow-sm",children:[y.map(v=>c.jsx("button",{onClick:()=>t(v),className:`px-4 py-2 rounded-xl text-xs font-bold transition-all ${e===v?`${se.colors.primary[600]} text-white shadow-md`:"text-gray-500 hover:bg-gray-50"}`,children:v},v)),e==="Custom"&&c.jsxs("div",{className:"flex items-center gap-2 px-3 border-l border-gray-100 ml-1",children:[c.jsx("input",{type:"date",value:r.from,onChange:v=>n({...r,from:v.target.value}),className:"px-2 py-1 border rounded-lg text-[10px] font-bold bg-gray-50 outline-none focus:ring-2 focus:ring-[#3c5a82]"}),c.jsx("span",{className:"text-gray-300 text-[10px] font-black tracking-widest uppercase",children:"To"}),c.jsx("input",{type:"date",value:r.to,onChange:v=>n({...r,to:v.target.value}),className:"px-2 py-1 border rounded-lg text-[10px] font-bold bg-gray-50 outline-none focus:ring-2 focus:ring-[#3c5a82]"})]})]}),s&&l.length>0&&c.jsx("div",{className:"flex items-center gap-1 bg-gray-100/50 p-1 rounded-2xl border border-gray-100",children:["All",...l].map(v=>c.jsx("button",{onClick:()=>s(v),className:`px-4 py-2 rounded-xl text-xs font-bold transition-all ${a===v?"bg-white text-gray-900 shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:v},v))})]}),c.jsxs("button",{onClick:()=>h(!0),className:"sm:hidden flex items-center justify-center gap-2 bg-white border border-gray-200 text-gray-600 px-4 py-3 rounded-2xl font-bold shadow-sm w-full",children:[ie.Search,c.jsx("span",{className:"text-sm",children:"Filter & Period"}),e!=="All Time"&&c.jsx("div",{className:`w-2 h-2 rounded-full ${se.colors.primary[500]} ml-1`})]})]}),f&&c.jsxs("div",{className:"fixed inset-0 z-[150] flex items-end justify-center",children:[c.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>h(!1)}),c.jsxs("div",{className:"bg-white w-full rounded-t-2xl p-8 z-[160] animate-in slide-in-from-bottom duration-300 max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("h3",{className:"text-2xl font-black text-gray-900",children:["Filter ",d]}),c.jsx("button",{onClick:()=>h(!1),className:"p-2 text-gray-400",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l18 18"})})})]}),c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-4",children:"Search"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Search...",value:p,onChange:v=>g(v.target.value),className:"w-full px-4 py-3 pl-12 bg-gray-50 border border-gray-100 rounded-xl text-sm font-bold focus:ring-2 focus:ring-[#3c5a82] outline-none"}),c.jsx("span",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:ie.Search})]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-4",children:"Time Period"}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:y.map(v=>c.jsx("button",{onClick:()=>t(v),className:`py-3 rounded-2xl text-xs font-bold transition-all border ${e===v?`${se.colors.primary[600]} text-white border-[#0f2f57] shadow-lg`:"bg-white text-gray-500 border-gray-100 hover:bg-gray-50"}`,children:v},v))}),e==="Custom"&&c.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 animate-in fade-in duration-200",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[9px] font-bold text-gray-400 uppercase ml-2",children:"From"}),c.jsx("input",{type:"date",value:r.from,onChange:v=>n({...r,from:v.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl text-sm font-bold focus:ring-2 focus:ring-[#3c5a82] outline-none"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[9px] font-bold text-gray-400 uppercase ml-2",children:"To"}),c.jsx("input",{type:"date",value:r.to,onChange:v=>n({...r,to:v.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl text-sm font-bold focus:ring-2 focus:ring-[#3c5a82] outline-none"})]})]})]}),s&&l.length>0&&c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-4",children:"Status Filter"}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:["All",...l].map(v=>c.jsx("button",{onClick:()=>s(v),className:`py-3 rounded-2xl text-xs font-bold transition-all border ${a===v?"bg-gray-900 text-white border-gray-900 shadow-lg":"bg-white text-gray-500 border-gray-100"}`,children:v},v))})]}),c.jsx("button",{onClick:()=>h(!1),className:`w-full py-5 ${se.colors.primary[600]} text-white rounded-xl font-black text-lg shadow-xl active:scale-95 transition-all mt-4`,children:"Apply Filters"})]})]})]})]})},Qw=({isOpen:e,onClose:t,onSubmit:r,accounts:n,paymentForm:a,setPaymentForm:s,isLoading:l,title:d="Record Payment",buttonText:f="Add Payment"})=>e?c.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4",children:[c.jsx("div",{className:"fixed inset-0 bg-gray-900/60 backdrop-blur-sm",onClick:t}),c.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] p-10 z-[210] animate-in zoom-in-95 duration-200 border border-[#ebf4ff]",children:[c.jsx("h3",{className:"text-2xl font-black text-gray-900 mb-8",children:d}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Payment Date"}),c.jsx("input",{type:"date",value:a.date,onChange:h=>s({...a,date:h.target.value}),disabled:l,className:"w-full px-6 py-3.5 bg-gray-50 border border-gray-100 rounded-lg font-bold focus:ring-2 focus:ring-emerald-500 outline-none disabled:opacity-50"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Payment Time"}),c.jsx("input",{type:"time",value:a.time,onChange:h=>s({...a,time:h.target.value}),disabled:l,className:"w-full px-6 py-3.5 bg-gray-50 border border-gray-100 rounded-lg font-bold focus:ring-2 focus:ring-emerald-500 outline-none disabled:opacity-50"})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Select Account"}),c.jsxs("select",{value:a.accountId,onChange:h=>s({...a,accountId:h.target.value}),disabled:l,className:"w-full px-6 py-3.5 bg-gray-50 border border-gray-100 rounded-lg font-bold focus:ring-2 focus:ring-emerald-500 outline-none disabled:opacity-50",children:[c.jsx("option",{value:"",children:"Select an account..."}),n.map(h=>c.jsxs("option",{value:h.id,children:[h.name," (",Se(h.currentBalance),")"]},h.id))]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Amount (BDT)"}),c.jsx("input",{type:"number",value:a.amount,onChange:h=>s({...a,amount:parseFloat(h.target.value)||0}),disabled:l,className:`w-full px-6 py-4 bg-[#ebf4ff] border-2 border-[#c7dff5] rounded-lg font-black ${se.colors.primary[600]} text-xl outline-none disabled:opacity-50`})]}),c.jsxs("div",{className:"pt-6 flex gap-4",children:[c.jsx(We,{onClick:t,variant:"ghost",disabled:l,children:"Cancel"}),c.jsx(We,{onClick:r,variant:"primary",size:"md",className:"flex-1",disabled:l,loading:l,children:f})]})]})]})]}):null;function Wo(){return bt({queryKey:["customers"],queryFn:cD,staleTime:300*1e3})}function T9(e=1,t=qt,r){return bt({queryKey:["customers",e,t,r],queryFn:()=>w8(e,t,r),placeholderData:n=>n,staleTime:300*1e3})}function wD(e){return bt({queryKey:["customer",e],queryFn:()=>c8(e||""),enabled:!!e&&!(e||"").startsWith("temp-"),staleTime:300*1e3})}function Xd(){return bt({queryKey:["orders"],queryFn:h8,staleTime:300*1e3})}function D9(e=1,t=qt,r){return bt({queryKey:["orders",e,t,r],queryFn:()=>m8(e,t,r),placeholderData:n=>n,staleTime:300*1e3})}function Hw(e){return bt({queryKey:["order",e],queryFn:()=>p8(e||""),enabled:!!e,staleTime:300*1e3})}function M9(e){return bt({queryKey:["ordersByCustomerId",e],queryFn:()=>g8(e||""),enabled:!!e,staleTime:300*1e3})}function Zd(){return bt({queryKey:["bills"],queryFn:L8,staleTime:300*1e3})}function R9(e=1,t=qt,r){return bt({queryKey:["bills",e,t,r],queryFn:()=>I8(e,t,r),placeholderData:n=>n,staleTime:300*1e3})}function jD(e){return bt({queryKey:["bill",e],queryFn:()=>B8(e||""),enabled:!!e,staleTime:300*1e3})}function Bs(){return bt({queryKey:["accounts"],queryFn:x8,staleTime:300*1e3})}function Jd(){return bt({queryKey:["transactions"],queryFn:N8,staleTime:300*1e3})}function I9(e=1,t=qt,r){return bt({queryKey:["transactions",e,t,r],queryFn:()=>O8(e,t,r),placeholderData:n=>n,staleTime:300*1e3})}function Mi(){return bt({queryKey:["users"],queryFn:P8,staleTime:300*1e3})}function SD(e){return bt({queryKey:["user",e],queryFn:()=>Uw(e||""),enabled:!!e,staleTime:10*1e3,refetchOnWindowFocus:!0,refetchOnReconnect:!0})}function ef(){return bt({queryKey:["vendors"],queryFn:q8,staleTime:300*1e3})}function L9(e=1,t=qt,r){return bt({queryKey:["vendors",e,t,r],queryFn:()=>R8(e,t,r),placeholderData:n=>n,staleTime:300*1e3})}function _D(e){return bt({queryKey:["vendor",e],queryFn:()=>F8(e||""),enabled:!!e,staleTime:300*1e3})}function tf(e){return bt({queryKey:["products",e],queryFn:()=>V8(e),staleTime:300*1e3})}function B9(e=1,t=qt,r,n,a){return bt({queryKey:["products",e,t,n,r,a],queryFn:()=>C8(e,t,r,n,a),placeholderData:s=>s,staleTime:300*1e3})}function $9(e){return bt({queryKey:["product",e],queryFn:()=>G8(e||""),enabled:!!e,staleTime:300*1e3})}function $s(e){return bt({queryKey:["categories",e],queryFn:()=>Z8(e),staleTime:3600*1e3})}function ND(e){return bt({queryKey:["paymentMethods",e],queryFn:()=>tq(e),staleTime:3600*1e3})}function U9(){return bt({queryKey:["units"],queryFn:aq,staleTime:3600*1e3})}function Up(){return bt({queryKey:["settings","company"],queryFn:Yd,staleTime:3600*1e3})}function zp(){return bt({queryKey:["settings","order"],queryFn:zw,staleTime:3600*1e3})}function qp(){return bt({queryKey:["settings","invoice"],queryFn:qw,staleTime:3600*1e3})}function Us(){return bt({queryKey:["settings","defaults"],queryFn:Fw,staleTime:3600*1e3})}function Vw(){return bt({queryKey:["settings","courier"],queryFn:Kw,staleTime:3600*1e3})}const z9=new Map,q9=new Map;function OD(e="item"){return`__temp_${e}_${crypto.randomUUID()}__`}function F9(e,t){console.log(`[optimisticIdMap] Mapping ${e}  ${t}`),z9.set(e,t),q9.set(t,e)}function Gw(e){return typeof e=="string"&&e.startsWith("__temp_")}function K9(){const e=Fe(),t=r=>{const n=e.getQueryData(["customers",1]);n&&Array.isArray(n.data)?e.setQueryData(["customers",1],{...n,data:[r,...n.data].slice(0,qt),count:(n.count||0)+1}):e.invalidateQueries({queryKey:["customers",1]})};return ht({mutationFn:u8,onMutate:async r=>{await e.cancelQueries({queryKey:["customers"]});const n=e.getQueryData(["customers"]);if(n){const a=OD("customer"),s={...r,id:a};e.setQueryData(["customers"],[...n,s])}return{previousCustomers:n}},onError:(r,n,a)=>{a!=null&&a.previousCustomers&&e.setQueryData(["customers"],a.previousCustomers)},onSuccess:async r=>{if(r&&r.id){e.setQueryData(["customer",r.id],r);const a=(e.getQueryData(["customers"])||[]||[]).filter(s=>!Gw(String(s.id)));e.setQueryData(["customers"],[r,...a])}t(r)}})}function Q9(){const e=Fe();return ht({mutationFn:({id:t,updates:r})=>d8(t,r),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["customers"]}),await e.cancelQueries({queryKey:["customer",t]});const n=e.getQueryData(["customers"]),a=e.getQueryData(["customer",t]);return n&&e.setQueryData(["customers"],n.map(s=>s.id===t?{...s,...r}:s)),a&&e.setQueryData(["customer",t],{...a,...r}),{previousCustomers:n,previousCustomer:a}},onError:(t,r,n)=>{n!=null&&n.previousCustomers&&e.setQueryData(["customers"],n.previousCustomers),n!=null&&n.previousCustomer&&e.setQueryData(["customer",r.id],n.previousCustomer)},onSuccess:t=>{e.getQueriesData({queryKey:["customers"]}).forEach(([n,a])=>{try{a&&a.data&&Array.isArray(a.data)&&e.setQueryData(n,{...a,data:a.data.map(s=>s.id===t.id?t:s)})}catch{}}),e.setQueryData(["customer",t.id],t)}})}function H9(){const e=Fe();return ht({mutationFn:f8,onMutate:async t=>{await e.cancelQueries({queryKey:["customers"]});const r=e.getQueryData(["customers"]);return r&&e.setQueryData(["customers"],r.filter(n=>n.id!==t)),{previousCustomers:r}},onError:(t,r,n)=>{n!=null&&n.previousCustomers&&e.setQueryData(["customers"],n.previousCustomers)},onSuccess:(t,r)=>{e.getQueriesData({queryKey:["customers"]}).forEach(([a,s])=>{try{if(s&&s.data&&Array.isArray(s.data)){const l=s.data.filter(d=>d.id!==r);e.setQueryData(a,{...s,data:l,count:Math.max(0,s.count?s.count-1:0)})}}catch{}}),e.invalidateQueries({queryKey:["customers",1]})}})}function Fp(){const e=Fe();return ht({mutationFn:y8,onMutate:async t=>{await e.cancelQueries({queryKey:["orders"]});const r=e.getQueryData(["orders"])||[],n=OD("order"),a={...t,id:n,paidAmount:t.paidAmount||0};return e.setQueryData(["orders"],[a,...r]),{previousOrders:r,optimisticOrder:a,tempId:n}},onError:(t,r,n)=>{n!=null&&n.previousOrders&&e.setQueryData(["orders"],n.previousOrders)},onSuccess:async(t,r,n)=>{n!=null&&n.tempId&&F9(n.tempId,t.id),e.setQueryData(["order",t.id],t);const a=e.getQueryData(["orders",1]);a&&Array.isArray(a.data)?e.setQueryData(["orders",1],{...a,data:[t,...a.data].slice(0,qt),count:(a.count||0)+1}):e.invalidateQueries({queryKey:["orders",1]});try{const s=e.getQueryData(["settings","order"]);s&&s.nextNumber&&(await mD({nextNumber:s.nextNumber+1}),e.invalidateQueries({queryKey:["settings","order"]}))}catch(s){console.error("Failed to update order settings:",s)}}})}function rf(){const e=Fe();return ht({mutationFn:({id:t,updates:r})=>v8(t,r),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["orders"]}),await e.cancelQueries({queryKey:["order",t]}),await e.cancelQueries({queryKey:["ordersByCustomerId"]});const n=e.getQueryData(["orders"]),a=e.getQueryData(["order",t]);if(n&&e.setQueryData(["orders"],n.map(s=>s.id===t?{...s,...r}:s)),a&&e.setQueryData(["order",t],{...a,...r}),a!=null&&a.customerId){const s=e.getQueryData(["ordersByCustomerId",a.customerId]);s&&e.setQueryData(["ordersByCustomerId",a.customerId],s.map(l=>l.id===t?{...l,...r}:l))}return{previousOrders:n,previousOrder:a}},onError:(t,r,n)=>{n!=null&&n.previousOrders&&e.setQueryData(["orders"],n.previousOrders),n!=null&&n.previousOrder&&e.setQueryData(["order",r.id],n.previousOrder)},onSuccess:t=>{e.getQueriesData({queryKey:["orders"]}).forEach(([n,a])=>{try{a&&a.data&&Array.isArray(a.data)&&e.setQueryData(n,{...a,data:a.data.map(s=>s.id===t.id?t:s)})}catch{}}),e.invalidateQueries({queryKey:["order",t.id]})}})}function V9(){const e=Fe();return ht({mutationFn:b8,onMutate:async t=>{await e.cancelQueries({queryKey:["orders"]});const r=e.getQueryData(["orders"]);return r&&e.setQueryData(["orders"],r.filter(n=>n.id!==t)),{previousOrders:r}},onError:(t,r,n)=>{n!=null&&n.previousOrders&&e.setQueryData(["orders"],n.previousOrders)},onSuccess:(t,r)=>{e.getQueriesData({queryKey:["orders"]}).forEach(([a,s])=>{try{if(s&&s.data&&Array.isArray(s.data)){const l=s.data.filter(d=>d.id!==r);e.setQueryData(a,{...s,data:l,count:Math.max(0,s.count?s.count-1:0)})}}catch{}}),e.invalidateQueries({queryKey:["orders",1]})}})}function ED(){const e=Fe();return ht({mutationFn:$8,onMutate:async t=>{await e.cancelQueries({queryKey:["bills"]});const r=e.getQueryData(["bills"])||[],n={...t,id:`temp-${Date.now()}`,paidAmount:t.paidAmount||0};return e.setQueryData(["bills"],[n,...r]),{previousBills:r,optimisticBill:n}},onError:(t,r,n)=>{n!=null&&n.previousBills&&e.setQueryData(["bills"],n.previousBills)},onSuccess:async t=>{e.setQueryData(["bill",t.id],t);const r=e.getQueryData(["bills",1]);r&&Array.isArray(r.data)?e.setQueryData(["bills",1],{...r,data:[t,...r.data].slice(0,qt),count:(r.count||0)+1}):e.invalidateQueries({queryKey:["bills",1]})}})}function AD(){const e=Fe();return ht({mutationFn:({id:t,updates:r})=>U8(t,r),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["bills"]}),await e.cancelQueries({queryKey:["bill",t]});const n=e.getQueryData(["bills"]),a=e.getQueryData(["bill",t]);return n&&e.setQueryData(["bills"],n.map(s=>s.id===t?{...s,...r}:s)),a&&e.setQueryData(["bill",t],{...a,...r}),{previousBills:n,previousBill:a}},onError:(t,r,n)=>{n!=null&&n.previousBills&&e.setQueryData(["bills"],n.previousBills),n!=null&&n.previousBill&&e.setQueryData(["bill",r.id],n.previousBill)},onSuccess:t=>{e.invalidateQueries({queryKey:["bills"]}),e.invalidateQueries({queryKey:["bill",t.id]})}})}function G9(){const e=Fe();return ht({mutationFn:z8,onMutate:async t=>{await e.cancelQueries({queryKey:["bills"]});const r=e.getQueryData(["bills"]);return r&&e.setQueryData(["bills"],r.filter(n=>n.id!==t)),{previousBills:r}},onError:(t,r,n)=>{n!=null&&n.previousBills&&e.setQueryData(["bills"],n.previousBills)},onSuccess:(t,r)=>{e.getQueriesData({queryKey:["bills"]}).forEach(([a,s])=>{try{if(s&&s.data&&Array.isArray(s.data)){const l=s.data.filter(d=>d.id!==r);e.setQueryData(a,{...s,data:l,count:Math.max(0,s.count?s.count-1:0)})}}catch{}}),e.invalidateQueries({queryKey:["bills",1]})}})}function Y9(){const e=Fe();return ht({mutationFn:j8,onMutate:async t=>{await e.cancelQueries({queryKey:["accounts"]});const r=e.getQueryData(["accounts"]);if(r){const n={...t,id:`temp-${Date.now()}`};e.setQueryData(["accounts"],[...r,n])}return{previousAccounts:r}},onError:(t,r,n)=>{n!=null&&n.previousAccounts&&e.setQueryData(["accounts"],n.previousAccounts)},onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["accounts"]})}})}function nf(){const e=Fe();return ht({mutationFn:({id:t,updates:r})=>S8(t,r),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["accounts"]}),await e.cancelQueries({queryKey:["account",t]});const n=e.getQueryData(["accounts"]),a=e.getQueryData(["account",t]);return n&&e.setQueryData(["accounts"],n.map(s=>s.id===t?{...s,...r}:s)),a&&e.setQueryData(["account",t],{...a,...r}),{previousAccounts:n,previousAccount:a}},onError:(t,r,n)=>{n!=null&&n.previousAccounts&&e.setQueryData(["accounts"],n.previousAccounts),n!=null&&n.previousAccount&&e.setQueryData(["account",r.id],n.previousAccount)},onSuccess:t=>{e.invalidateQueries({queryKey:["accounts"]}),e.invalidateQueries({queryKey:["account",t.id]})}})}function W9(){const e=Fe();return ht({mutationFn:_8,onMutate:async t=>{await e.cancelQueries({queryKey:["accounts"]});const r=e.getQueryData(["accounts"]);return r&&e.setQueryData(["accounts"],r.filter(n=>n.id!==t)),{previousAccounts:r}},onError:(t,r,n)=>{n!=null&&n.previousAccounts&&e.setQueryData(["accounts"],n.previousAccounts)},onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["accounts"]})}})}function af(){const e=Fe();return ht({mutationFn:E8,onMutate:async t=>{await e.cancelQueries({queryKey:["transactions"]}),await e.cancelQueries({queryKey:["orders"]});const r=e.getQueryData(["transactions"]),n=e.getQueryData(["orders"]);if(r){const a={...t,id:`temp-${Date.now()}`};e.setQueryData(["transactions"],[...r,a])}return{previousTransactions:r,previousOrders:n}},onError:(t,r,n)=>{n!=null&&n.previousTransactions&&e.setQueryData(["transactions"],n.previousTransactions),n!=null&&n.previousOrders&&e.setQueryData(["orders"],n.previousOrders)},onSuccess:t=>{e.getQueriesData({queryKey:["transactions"]}).forEach(([n,a])=>{try{if(a&&a.data&&Array.isArray(a.data)){const s=[t,...a.data].slice(0,qt);e.setQueryData(n,{...a,data:s,count:a.count?a.count+1:1})}}catch{}}),e.invalidateQueries({queryKey:["orders",1]})}})}function X9(){const e=Fe();return ht({mutationFn:A8,onMutate:async t=>{await e.cancelQueries({queryKey:["transactions"]});const r=e.getQueryData(["transactions"]);return r&&e.setQueryData(["transactions"],r.filter(n=>n.id!==t)),{previousTransactions:r}},onError:(t,r,n)=>{n!=null&&n.previousTransactions&&e.setQueryData(["transactions"],n.previousTransactions)},onSuccess:(t,r)=>{e.getQueriesData({queryKey:["transactions"]}).forEach(([a,s])=>{try{if(s&&s.data&&Array.isArray(s.data)){const l=s.data.filter(d=>d.id!==r);e.setQueryData(a,{...s,data:l,count:Math.max(0,s.count?s.count-1:0)})}}catch{}}),e.invalidateQueries({queryKey:["transactions",1]})}})}function Z9(){const e=Fe();return ht({mutationFn:T8,onMutate:async t=>{await e.cancelQueries({queryKey:["users"]});const r=e.getQueryData(["users"]);if(r){const n={...t,id:`temp-${Date.now()}`};e.setQueryData(["users"],[...r,n])}return{previousUsers:r}},onError:(t,r,n)=>{n!=null&&n.previousUsers&&e.setQueryData(["users"],n.previousUsers)},onSuccess:()=>{e.invalidateQueries({queryKey:["users"]})}})}function CD(){const e=Fe();return ht({mutationFn:({id:t,updates:r})=>D8(t,r),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["users"]}),await e.cancelQueries({queryKey:["user",t]}),await e.cancelQueries({queryKey:["userByPhone"]});const n=e.getQueryData(["users"]),a=e.getQueryData(["user",t]);return n&&e.setQueryData(["users"],n.map(s=>s.id===t?{...s,...r}:s)),a&&e.setQueryData(["user",t],{...a,...r}),{previousUsers:n,previousUser:a}},onError:(t,r,n)=>{n!=null&&n.previousUsers&&e.setQueryData(["users"],n.previousUsers),n!=null&&n.previousUser&&e.setQueryData(["user",r.id],n.previousUser)},onSuccess:t=>{e.invalidateQueries({queryKey:["users"]}),e.invalidateQueries({queryKey:["user",t.id]})}})}function PD(){const e=Fe();return ht({mutationFn:M8,onMutate:async t=>{await e.cancelQueries({queryKey:["users"]});const r=e.getQueryData(["users"]);return r&&e.setQueryData(["users"],r.filter(n=>n.id!==t)),{previousUsers:r}},onError:(t,r,n)=>{n!=null&&n.previousUsers&&e.setQueryData(["users"],n.previousUsers)},onSuccess:()=>{e.invalidateQueries({queryKey:["users"]})}})}function J9(){const e=Fe();return ht({mutationFn:K8,onMutate:async t=>{await e.cancelQueries({queryKey:["vendors"]});const r=e.getQueryData(["vendors"]);if(r){const n={...t,id:`temp-${Date.now()}`};e.setQueryData(["vendors"],[...r,n])}return{previousVendors:r}},onError:(t,r,n)=>{n!=null&&n.previousVendors&&e.setQueryData(["vendors"],n.previousVendors)},onSuccess:t=>{e.getQueriesData({queryKey:["vendors"]}).forEach(([n,a])=>{try{if(a&&a.data&&Array.isArray(a.data)){const s=[t,...a.data].slice(0,qt);e.setQueryData(n,{...a,data:s,count:a.count?a.count+1:1})}}catch{}}),e.invalidateQueries({queryKey:["vendors",1]})}})}function e7(){const e=Fe();return ht({mutationFn:({id:t,updates:r})=>Q8(t,r),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["vendors"]}),await e.cancelQueries({queryKey:["vendor",t]});const n=e.getQueryData(["vendors"]),a=e.getQueryData(["vendor",t]);return n&&e.setQueryData(["vendors"],n.map(s=>s.id===t?{...s,...r}:s)),a&&e.setQueryData(["vendor",t],{...a,...r}),{previousVendors:n,previousVendor:a}},onError:(t,r,n)=>{n!=null&&n.previousVendors&&e.setQueryData(["vendors"],n.previousVendors),n!=null&&n.previousVendor&&e.setQueryData(["vendor",r.id],n.previousVendor)},onSuccess:t=>{e.getQueriesData({queryKey:["vendors"]}).forEach(([n,a])=>{try{a&&a.data&&Array.isArray(a.data)&&e.setQueryData(n,{...a,data:a.data.map(s=>s.id===t.id?t:s)})}catch{}}),e.setQueryData(["vendor",t.id],t)}})}function t7(){const e=Fe();return ht({mutationFn:H8,onMutate:async t=>{await e.cancelQueries({queryKey:["vendors"]});const r=e.getQueryData(["vendors"]);return r&&e.setQueryData(["vendors"],r.filter(n=>n.id!==t)),{previousVendors:r}},onError:(t,r,n)=>{n!=null&&n.previousVendors&&e.setQueryData(["vendors"],n.previousVendors)},onSuccess:(t,r)=>{e.getQueriesData({queryKey:["vendors"]}).forEach(([a,s])=>{try{if(s&&s.data&&Array.isArray(s.data)){const l=s.data.filter(d=>d.id!==r);e.setQueryData(a,{...s,data:l,count:Math.max(0,s.count?s.count-1:0)})}}catch{}}),e.invalidateQueries({queryKey:["vendors",1]})}})}function r7(){const e=Fe();return ht({mutationFn:Y8,onMutate:async t=>{await e.cancelQueries({queryKey:["products"]});const r=e.getQueryData(["products"])||[],n={...t,id:`temp-${Date.now()}`};return e.setQueryData(["products"],[n,...r]),{previousProducts:r,optimisticProduct:n}},onError:(t,r,n)=>{n!=null&&n.previousProducts&&e.setQueryData(["products"],n.previousProducts)},onSuccess:async t=>{e.setQueryData(["product",t.id],t),e.getQueriesData({queryKey:["products"]}).forEach(([s,l])=>{try{if(l&&l.data&&Array.isArray(l.data)){const d=[t,...l.data].slice(0,qt);e.setQueryData(s,{...l,data:d,count:l.count?l.count+1:1})}}catch{}});const a=(e.getQueryData(["products"])||[]||[]).filter(s=>!String(s.id).startsWith("temp-"));e.setQueryData(["products"],[t,...a])}})}function n7(){const e=Fe();return ht({mutationFn:({id:t,updates:r})=>W8(t,r),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["products"]}),await e.cancelQueries({queryKey:["product",t]});const n=e.getQueryData(["products"]),a=e.getQueryData(["product",t]);return n&&e.setQueryData(["products"],n.map(s=>s.id===t?{...s,...r}:s)),a&&e.setQueryData(["product",t],{...a,...r}),{previousProducts:n,previousProduct:a}},onError:(t,r,n)=>{n!=null&&n.previousProducts&&e.setQueryData(["products"],n.previousProducts),n!=null&&n.previousProduct&&e.setQueryData(["product",r.id],n.previousProduct)},onSuccess:t=>{e.getQueriesData({queryKey:["products"]}).forEach(([n,a])=>{try{a&&a.data&&Array.isArray(a.data)&&e.setQueryData(n,{...a,data:a.data.map(s=>s.id===t.id?t:s)})}catch{}}),e.setQueryData(["product",t.id],t)}})}function a7(){const e=Fe();return ht({mutationFn:X8,onMutate:async t=>{await e.cancelQueries({queryKey:["products"]});const r=e.getQueryData(["products"]);return r&&e.setQueryData(["products"],r.filter(n=>n.id!==t)),{previousProducts:r}},onError:(t,r,n)=>{n!=null&&n.previousProducts&&e.setQueryData(["products"],n.previousProducts)},onSuccess:(t,r)=>{e.getQueriesData({queryKey:["products"]}).forEach(([a,s])=>{try{if(s&&s.data&&Array.isArray(s.data)){const l=s.data.filter(d=>d.id!==r);e.setQueryData(a,{...s,data:l,count:Math.max(0,s.count?s.count-1:0)})}}catch{}}),e.invalidateQueries({queryKey:["products",1]})}})}function i7(){const e=Fe();return ht({mutationFn:J8,onMutate:async t=>{await e.cancelQueries({queryKey:["categories"]});const r=e.getQueryData(["categories"]);if(r){const n={...t,id:`temp-${Date.now()}`};e.setQueryData(["categories"],[...r,n])}return{previousCategories:r}},onError:(t,r,n)=>{n!=null&&n.previousCategories&&e.setQueryData(["categories"],n.previousCategories)},onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]})}})}function s7(){const e=Fe();return ht({mutationFn:eq,onMutate:async t=>{await e.cancelQueries({queryKey:["categories"]});const r=e.getQueryData(["categories"]);return r&&e.setQueryData(["categories"],r.filter(n=>n.id!==t)),{previousCategories:r}},onError:(t,r,n)=>{n!=null&&n.previousCategories&&e.setQueryData(["categories"],n.previousCategories)},onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]})}})}function o7(){const e=Fe();return ht({mutationFn:rq,onMutate:async t=>{await e.cancelQueries({queryKey:["paymentMethods"]});const r=e.getQueryData(["paymentMethods"]);if(r){const n={...t,id:`temp-${Date.now()}`};e.setQueryData(["paymentMethods"],[...r,n])}return{previousMethods:r}},onError:(t,r,n)=>{n!=null&&n.previousMethods&&e.setQueryData(["paymentMethods"],n.previousMethods)},onSuccess:()=>{e.invalidateQueries({queryKey:["paymentMethods"]})}})}function l7(){const e=Fe();return ht({mutationFn:nq,onMutate:async t=>{await e.cancelQueries({queryKey:["paymentMethods"]});const r=e.getQueryData(["paymentMethods"]);return r&&e.setQueryData(["paymentMethods"],r.filter(n=>n.id!==t)),{previousMethods:r}},onError:(t,r,n)=>{n!=null&&n.previousMethods&&e.setQueryData(["paymentMethods"],n.previousMethods)},onSuccess:()=>{e.invalidateQueries({queryKey:["paymentMethods"]})}})}function c7(){const e=Fe();return ht({mutationFn:iq,onMutate:async t=>{await e.cancelQueries({queryKey:["units"]});const r=e.getQueryData(["units"]);if(r){const n={...t,id:`temp-${Date.now()}`};e.setQueryData(["units"],[...r,n])}return{previousUnits:r}},onError:(t,r,n)=>{n!=null&&n.previousUnits&&e.setQueryData(["units"],n.previousUnits)},onSuccess:()=>{e.invalidateQueries({queryKey:["units"]})}})}function u7(){const e=Fe();return ht({mutationFn:sq,onMutate:async t=>{await e.cancelQueries({queryKey:["units"]});const r=e.getQueryData(["units"]);return r&&e.setQueryData(["units"],r.filter(n=>n.id!==t)),{previousUnits:r}},onError:(t,r,n)=>{n!=null&&n.previousUnits&&e.setQueryData(["units"],n.previousUnits)},onSuccess:()=>{e.invalidateQueries({queryKey:["units"]})}})}function d7(){const e=Fe();return ht({mutationFn:yq,onMutate:async t=>{await e.cancelQueries({queryKey:["settings"]});const r=e.getQueryData(["settings","company"]),n=e.getQueryData(["settings","order"]),a=e.getQueryData(["settings","invoice"]),s=e.getQueryData(["settings","defaults"]),l=e.getQueryData(["settings","courier"]);return t.company&&r&&e.setQueryData(["settings","company"],{...r,...t.company}),t.order&&n&&e.setQueryData(["settings","order"],{...n,...t.order}),t.invoice&&a&&e.setQueryData(["settings","invoice"],{...a,...t.invoice}),t.defaults&&s&&e.setQueryData(["settings","defaults"],{...s,...t.defaults}),t.courier&&l&&e.setQueryData(["settings","courier"],{...l,...t.courier}),{previousCompany:r,previousOrder:n,previousInvoice:a,previousDefaults:s,previousCourier:l}},onError:(t,r,n)=>{n!=null&&n.previousCompany&&e.setQueryData(["settings","company"],n.previousCompany),n!=null&&n.previousOrder&&e.setQueryData(["settings","order"],n.previousOrder),n!=null&&n.previousInvoice&&e.setQueryData(["settings","invoice"],n.previousInvoice),n!=null&&n.previousDefaults&&e.setQueryData(["settings","defaults"],n.previousDefaults),n!=null&&n.previousCourier&&e.setQueryData(["settings","courier"],n.previousCourier)},onSuccess:()=>{e.invalidateQueries({queryKey:["settings"]})}})}const kD=({isOpen:e,onClose:t,order:r,customer:n})=>{var g;const{data:a}=Vw(),[s,l]=x.useState(!1),[d,f]=x.useState(null),h=rf();if(!e)return null;const p=async()=>{var S;if(f(null),!r||!n){f("Missing order or customer information"),console.error("[SteadfastModal] Missing order, customer information");return}if(!(a!=null&&a.steadfast)){f("No Steadfast credentials configured"),console.error("[SteadfastModal] No Steadfast settings");return}const{baseUrl:y,apiKey:v,secretKey:j}=a.steadfast;if(console.log("[SteadfastModal] ======== SUBMISSION DEBUG ========"),console.log("[SteadfastModal] courierSettings object:",a),console.log("[SteadfastModal] steadfast object:",a.steadfast),console.log("[SteadfastModal] baseUrl:",y),console.log("[SteadfastModal] baseUrl type:",typeof y),console.log("[SteadfastModal] baseUrl empty?:",y===""||!y),console.log("[SteadfastModal] baseUrl trimmed empty?:",(y||"").trim()===""),console.log("[SteadfastModal] apiKey:",v?`${v.substring(0,5)}...`:"EMPTY/NULL"),console.log("[SteadfastModal] apiKey type:",typeof v),console.log("[SteadfastModal] secretKey:",j?`${j.substring(0,5)}...`:"EMPTY/NULL"),console.log("[SteadfastModal] secretKey type:",typeof j),!y||!v||!j){f(`Incomplete Steadfast credentials - baseUrl: ${!!y}, apiKey: ${!!v}, secretKey: ${!!j}`),console.error("[SteadfastModal] Incomplete credentials"),console.error("[SteadfastModal] baseUrl value:",JSON.stringify(y)),console.error("[SteadfastModal] apiKey value:",JSON.stringify(v)),console.error("[SteadfastModal] secretKey value:",JSON.stringify(j));return}l(!0);try{console.log("[SteadfastModal] ======== PREPARING SUBMISSION ========"),console.log("[SteadfastModal] Order Number:",r.orderNumber),console.log("[SteadfastModal] Customer Name:",n.name),console.log("[SteadfastModal] Customer Phone:",n.phone),console.log("[SteadfastModal] Customer Address:",n.address),console.log("[SteadfastModal] Order Total:",r.total);const _=await gq({baseUrl:y,apiKey:v,secretKey:j,invoice:r.orderNumber,recipientName:n.name,recipientPhone:n.phone,recipientAddress:n.address,codAmount:r.total});if(console.log("[SteadfastModal] ======== SUBMISSION RESULT ========"),console.log("[SteadfastModal] Result:",_),_.error){let N=_.error;try{_.error.includes("Account is not active")&&(N="Something went wrong.")}catch{}f(N),console.error("[SteadfastModal] Submission failed:",_.error);return}console.log("[SteadfastModal] Order submitted successfully to Steadfast");try{const N=`Sent to Steadfast by ${((S=Ne.currentUser)==null?void 0:S.name)||"System"} on ${new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}`;await h.mutateAsync({id:r.id,updates:{history:{...r.history,courier:N}}})}catch(N){console.error("[SteadfastModal] Failed to update order sent flag:",N)}t()}catch(_){const N=_ instanceof Error?_.message:"Unknown error";f(N),console.error("[SteadfastModal] Exception during submission:",N)}finally{l(!1)}};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm z-40",onClick:t}),c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:`${se.card.elevated} w-full max-w-2xl animate-in fade-in slide-in-from-bottom-4 duration-300`,children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Add to Steadfast"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),c.jsxs("div",{className:"p-6 space-y-4",children:[d&&c.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[c.jsx("p",{className:"font-semibold",children:"Error:"}),c.jsx("p",{children:d instanceof Error?d.message:String(d)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Order Number"}),c.jsx("p",{className:"text-gray-900",children:(r==null?void 0:r.orderNumber)||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Customer Name"}),c.jsx("p",{className:"text-gray-900",children:(n==null?void 0:n.name)||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Customer Phone"}),c.jsx("p",{className:"text-gray-900",children:(n==null?void 0:n.phone)||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Customer Address"}),c.jsx("p",{className:"text-gray-900",children:(n==null?void 0:n.address)||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"COD Amount"}),c.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[" ",((g=r==null?void 0:r.total)==null?void 0:g.toFixed(2))||"0.00"]})]})]}),c.jsxs("div",{className:"flex gap-3 px-6 py-4 border-t border-gray-100",children:[c.jsx("button",{onClick:t,disabled:s,className:"flex-1 py-2 px-4 rounded-lg border border-gray-200 text-gray-700 font-bold hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),c.jsx("button",{onClick:p,disabled:s||!r||!n,className:"flex-1 py-2 px-4 rounded-lg bg-blue-600 text-white font-bold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Adding...":"Add"})]})]})})]})},TD=({isOpen:e,onClose:t,order:r,customer:n})=>{const{data:a}=Vw(),[s,l]=x.useState(1e3),[d,f]=x.useState("1"),[h,p]=x.useState(""),[g,y]=x.useState(""),[v,j]=x.useState(""),[S,_]=x.useState([]),[N,O]=x.useState([]),[E,C]=x.useState([]),[D,T]=x.useState(!1),[M,R]=x.useState(!1),[U,Y]=x.useState(!1),[K,z]=x.useState(!1),pe=rf(),le=x.useRef(null),ge=x.useRef(!1);return x.useEffect(()=>(e||(ge.current=!0,le.current&&(clearInterval(le.current),le.current=null)),()=>{ge.current=!0,le.current&&(clearInterval(le.current),le.current=null)}),[e]),x.useEffect(()=>{e&&(async()=>{var V,ae,he,Q;if(!((V=a==null?void 0:a.carryBee)!=null&&V.baseUrl)||!((ae=a==null?void 0:a.carryBee)!=null&&ae.clientId)||!((he=a==null?void 0:a.carryBee)!=null&&he.clientSecret)||!((Q=a==null?void 0:a.carryBee)!=null&&Q.clientContext)){_([]);return}T(!0);try{const P=await fq({baseUrl:a.carryBee.baseUrl,clientId:a.carryBee.clientId,clientSecret:a.carryBee.clientSecret,clientContext:a.carryBee.clientContext});_(P)}catch(P){console.error("Failed to fetch cities:",P),_([])}finally{T(!1)}})()},[e,a]),x.useEffect(()=>{(async()=>{var V,ae;if(!h||!((V=a==null?void 0:a.carryBee)!=null&&V.baseUrl)||!((ae=a==null?void 0:a.carryBee)!=null&&ae.clientId)){O([]),y(""),j(""),C([]);return}R(!0);try{const he=await hq({baseUrl:a.carryBee.baseUrl,clientId:a.carryBee.clientId,clientSecret:a.carryBee.clientSecret,clientContext:a.carryBee.clientContext,cityId:h});O(he)}catch(he){console.error("Failed to fetch zones:",he),O([])}finally{R(!1)}})()},[h,a]),x.useEffect(()=>{(async()=>{var V,ae;if(!g||!h||!((V=a==null?void 0:a.carryBee)!=null&&V.baseUrl)||!((ae=a==null?void 0:a.carryBee)!=null&&ae.clientId)){C([]),j("");return}Y(!0);try{const he=await mq({baseUrl:a.carryBee.baseUrl,clientId:a.carryBee.clientId,clientSecret:a.carryBee.clientSecret,clientContext:a.carryBee.clientContext,cityId:h,zoneId:g});C(he)}catch(he){console.error("Failed to fetch areas:",he),C([])}finally{Y(!1)}})()},[g,h,a]),e?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm z-40",onClick:t}),c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:`${se.card.elevated} w-full max-w-2xl animate-in fade-in slide-in-from-bottom-4 duration-300`,children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Add to CarryBee"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-semibold text-gray-700",children:["Weight ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",value:s,onChange:I=>l(Number(I.target.value)),className:"flex-1 px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg",min:"1"}),c.jsx("span",{className:"text-sm font-semibold text-gray-700 whitespace-nowrap",children:"grams"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-semibold text-gray-700",children:["Delivery Type ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{value:d,onChange:I=>f(I.target.value),className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg",children:[c.jsx("option",{value:"1",children:"Normal Delivery (Type 1)"}),c.jsx("option",{value:"2",children:"Express Delivery (Type 2)"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-semibold text-gray-700",children:["City ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{value:h,onChange:I=>p(I.target.value),disabled:D||S.length===0,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("option",{value:"",children:D?"Loading cities...":S.length===0?"No cities available":"Select a city"}),S.map(I=>c.jsx("option",{value:I.id,children:I.name},I.id))]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-semibold text-gray-700",children:["Zone ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{value:g,onChange:I=>y(I.target.value),disabled:!h||M||N.length===0,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("option",{value:"",children:h?M?"Loading zones...":N.length===0?"No zones available":"Select a zone":"Select a city first"}),N.map(I=>c.jsx("option",{value:I.id,children:I.name},I.id))]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Area"}),c.jsxs("select",{value:v,onChange:I=>j(I.target.value),disabled:!g||U,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("option",{value:"",children:g?U?"Loading areas...":E.length===0?"No areas available":"Select an area (optional)":"Select a zone first"}),E.map(I=>c.jsx("option",{value:I.id,children:I.name},I.id))]})]})]}),c.jsxs("div",{className:"flex gap-3 px-6 py-4 border-t border-gray-100",children:[c.jsx("button",{onClick:t,className:"flex-1 py-2 px-4 rounded-lg border border-gray-200 text-gray-700 font-bold hover:bg-gray-50",children:"Cancel"}),c.jsx("button",{onClick:async()=>{var P,B,W;if(!h||!g){alert("Please select both City and Zone");return}if(!r||!n){alert("Missing order or customer information"),console.error("Missing order or customer:",{order:r,customer:n});return}if(!(a!=null&&a.carryBee)){alert("CarryBee settings not configured"),console.error("Missing CarryBee settings:",a);return}const{baseUrl:I,clientId:V,clientSecret:ae,clientContext:he,storeId:Q}=a.carryBee;if(!I||!V||!ae||!he||!Q){alert("CarryBee settings incomplete. Please configure Base URL, Client ID, Client Secret, Client Context, and Store ID in Settings."),console.error("Incomplete CarryBee settings:",{baseUrl:I,clientId:V,clientSecret:ae,clientContext:he,storeId:Q});return}z(!0);try{console.log("[CarryBeeModal] Submitting order:",{storeId:Q,deliveryType:Number(d),recipientPhone:n.phone,recipientName:n.name,cityId:h,zoneId:g,areaId:v||void 0,itemWeight:s,collectableAmount:r.total});const re=await pq({baseUrl:I,clientId:V,clientSecret:ae,clientContext:he,storeId:Q,deliveryType:Number(d),productType:1,recipientPhone:n.phone,recipientName:n.name,recipientAddress:n.address||"",cityId:h,zoneId:g,areaId:v||void 0,itemWeight:s,collectableAmount:r.total||0});if(re.error)alert(`Failed to send order: ${re.error}`);else{try{const G=re&&(((P=re.order)==null?void 0:P.consignment_id)||re.consignment_id)||re.data&&(((B=re.data.order)==null?void 0:B.consignment_id)||re.data.consignment_id)||null,ve=`Sent to CarryBee by ${((W=Ne.currentUser)==null?void 0:W.name)||"System"} on ${new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}`,ye={history:{...r.history,courier:ve}};if(G&&(ye.carrybee_consignment_id=G),await pe.mutateAsync({id:r.id,updates:ye}),G){const xe="At the sorting hub";ge.current=!1;const q=async()=>{var we;if(!ge.current)try{const je=`${a.carryBee.baseUrl.replace(/\/$/,"")}/api/v2/orders/${encodeURIComponent(G)}/details`,ue=await fetch(je,{method:"GET",headers:{"Client-ID":a.carryBee.clientId,"Client-Secret":a.carryBee.clientSecret,"Client-Context":a.carryBee.clientContext,"Content-Type":"application/json"}});if(!ue.ok)return;const Ue=await ue.json();if((((we=Ue==null?void 0:Ue.data)==null?void 0:we.transfer_status)||(Ue==null?void 0:Ue.transfer_status)||null)===xe&&!ge.current){const Me=`Marked picked automatically on ${new Date().toLocaleString()}`;await pe.mutateAsync({id:r.id,updates:{status:Ie.PICKED,history:{...r.history,picked:Me}}}),ge.current=!0,le.current&&(clearInterval(le.current),le.current=null)}}catch(je){console.error("[CarryBeeModal] Polling error:",je)}};le.current=window.setInterval(q,15e3),q()}}catch(G){console.error("[CarryBeeModal] Failed to update order sent flag or consignment id:",G)}alert("Order sent to CarryBee successfully!"),t()}}catch(re){console.error("Error submitting order:",re),alert("Error sending order to CarryBee")}finally{z(!1)}},disabled:!h||!g||K,className:"flex-1 py-2 px-4 rounded-lg bg-blue-600 text-white font-bold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:K?"Adding...":"Add"})]})]})})]}):null},f0=(e,t,r)=>{if(t==="All Time")return!0;const n=new Date(e),a=new Date;if(t==="Today")return n.toDateString()===a.toDateString();if(t==="This Week"){const s=a.getDate()-a.getDay(),l=new Date(new Date().setDate(s)),d=new Date(new Date().setDate(s+6));return n>=l&&n<=d}return t==="This Month"?n.getMonth()===a.getMonth()&&n.getFullYear()===a.getFullYear():t==="This Year"?n.getFullYear()===a.getFullYear():t==="Custom"?!r.from||!r.to?!0:n>=new Date(r.from)&&n<=new Date(r.to):!0};function DD(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=DD(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ot(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=DD(e))&&(n&&(n+=" "),n+=t);return n}var f7=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Yw(e){if(typeof e!="string")return!1;var t=f7;return t.includes(e)}var h7=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],m7=new Set(h7);function MD(e){return typeof e!="string"?!1:m7.has(e)}function RD(e){return typeof e=="string"&&e.startsWith("data-")}function kn(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(MD(r)||RD(r))&&(t[r]=e[r]);return t}function Uo(e){if(e==null)return null;if(x.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return kn(t)}return typeof e=="object"&&!Array.isArray(e)?kn(e):null}function tn(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(MD(r)||RD(r)||Yw(r))&&(t[r]=e[r]);return t}function p7(e){return e==null?null:x.isValidElement(e)?tn(e.props):typeof e=="object"&&!Array.isArray(e)?tn(e):null}var g7=["children","width","height","viewBox","className","style","title","desc"];function wx(){return wx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wx.apply(null,arguments)}function y7(e,t){if(e==null)return{};var r,n,a=v7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function v7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ww=x.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:l,style:d,title:f,desc:h}=e,p=y7(e,g7),g=s||{width:n,height:a,x:0,y:0},y=ot("recharts-surface",l);return x.createElement("svg",wx({},tn(p),{className:y,width:n,height:a,style:d,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:t}),x.createElement("title",null,f),x.createElement("desc",null,h),r)}),b7=["children","className"];function jx(){return jx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jx.apply(null,arguments)}function x7(e,t){if(e==null)return{};var r,n,a=w7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function w7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Er=x.forwardRef((e,t)=>{var{children:r,className:n}=e,a=x7(e,b7),s=ot("recharts-layer",n);return x.createElement("g",jx({className:s},tn(a),{ref:t}),r)}),ID=x.createContext(null),j7=()=>x.useContext(ID);function Pt(e){return function(){return e}}const LD=Math.cos,Tm=Math.sin,xa=Math.sqrt,Dm=Math.PI,Kp=2*Dm,Sx=Math.PI,_x=2*Sx,ho=1e-6,S7=_x-ho;function BD(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function _7(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return BD;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class N7{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?BD:_7(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,l){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+l}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,d=this._y1,f=n-t,h=a-r,p=l-t,g=d-r,y=p*p+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(y>ho)if(!(Math.abs(g*f-h*p)>ho)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let v=n-l,j=a-d,S=f*f+h*h,_=v*v+j*j,N=Math.sqrt(S),O=Math.sqrt(y),E=s*Math.tan((Sx-Math.acos((S+y-_)/(2*N*O)))/2),C=E/O,D=E/N;Math.abs(C-1)>ho&&this._append`L${t+C*p},${r+C*g}`,this._append`A${s},${s},0,0,${+(g*v>p*j)},${this._x1=t+D*f},${this._y1=r+D*h}`}}arc(t,r,n,a,s,l){if(t=+t,r=+r,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let d=n*Math.cos(a),f=n*Math.sin(a),h=t+d,p=r+f,g=1^l,y=l?a-s:s-a;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>ho||Math.abs(this._y1-p)>ho)&&this._append`L${h},${p}`,n&&(y<0&&(y=y%_x+_x),y>S7?this._append`A${n},${n},0,1,${g},${t-d},${r-f}A${n},${n},0,1,${g},${this._x1=h},${this._y1=p}`:y>ho&&this._append`A${n},${n},0,${+(y>=Sx)},${g},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Xw(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new N7(t)}function Zw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function $D(e){this._context=e}$D.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Qp(e){return new $D(e)}function UD(e){return e[0]}function zD(e){return e[1]}function qD(e,t){var r=Pt(!0),n=null,a=Qp,s=null,l=Xw(d);e=typeof e=="function"?e:e===void 0?UD:Pt(e),t=typeof t=="function"?t:t===void 0?zD:Pt(t);function d(f){var h,p=(f=Zw(f)).length,g,y=!1,v;for(n==null&&(s=a(v=l())),h=0;h<=p;++h)!(h<p&&r(g=f[h],h,f))===y&&((y=!y)?s.lineStart():s.lineEnd()),y&&s.point(+e(g,h,f),+t(g,h,f));if(v)return s=null,v+""||null}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:Pt(+f),d):e},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:Pt(+f),d):t},d.defined=function(f){return arguments.length?(r=typeof f=="function"?f:Pt(!!f),d):r},d.curve=function(f){return arguments.length?(a=f,n!=null&&(s=a(n)),d):a},d.context=function(f){return arguments.length?(f==null?n=s=null:s=a(n=f),d):n},d}function em(e,t,r){var n=null,a=Pt(!0),s=null,l=Qp,d=null,f=Xw(h);e=typeof e=="function"?e:e===void 0?UD:Pt(+e),t=typeof t=="function"?t:Pt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?zD:Pt(+r);function h(g){var y,v,j,S=(g=Zw(g)).length,_,N=!1,O,E=new Array(S),C=new Array(S);for(s==null&&(d=l(O=f())),y=0;y<=S;++y){if(!(y<S&&a(_=g[y],y,g))===N)if(N=!N)v=y,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),j=y-1;j>=v;--j)d.point(E[j],C[j]);d.lineEnd(),d.areaEnd()}N&&(E[y]=+e(_,y,g),C[y]=+t(_,y,g),d.point(n?+n(_,y,g):E[y],r?+r(_,y,g):C[y]))}if(O)return d=null,O+""||null}function p(){return qD().defined(a).curve(l).context(s)}return h.x=function(g){return arguments.length?(e=typeof g=="function"?g:Pt(+g),n=null,h):e},h.x0=function(g){return arguments.length?(e=typeof g=="function"?g:Pt(+g),h):e},h.x1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:Pt(+g),h):n},h.y=function(g){return arguments.length?(t=typeof g=="function"?g:Pt(+g),r=null,h):t},h.y0=function(g){return arguments.length?(t=typeof g=="function"?g:Pt(+g),h):t},h.y1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:Pt(+g),h):r},h.lineX0=h.lineY0=function(){return p().x(e).y(t)},h.lineY1=function(){return p().x(e).y(r)},h.lineX1=function(){return p().x(n).y(t)},h.defined=function(g){return arguments.length?(a=typeof g=="function"?g:Pt(!!g),h):a},h.curve=function(g){return arguments.length?(l=g,s!=null&&(d=l(s)),h):l},h.context=function(g){return arguments.length?(g==null?s=d=null:d=l(s=g),h):s},h}class FD{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function O7(e){return new FD(e,!0)}function E7(e){return new FD(e,!1)}const Jw={draw(e,t){const r=xa(t/Dm);e.moveTo(r,0),e.arc(0,0,r,0,Kp)}},A7={draw(e,t){const r=xa(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},KD=xa(1/3),C7=KD*2,P7={draw(e,t){const r=xa(t/C7),n=r*KD;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},k7={draw(e,t){const r=xa(t),n=-r/2;e.rect(n,n,r,r)}},T7=.8908130915292852,QD=Tm(Dm/10)/Tm(7*Dm/10),D7=Tm(Kp/10)*QD,M7=-LD(Kp/10)*QD,R7={draw(e,t){const r=xa(t*T7),n=D7*r,a=M7*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const l=Kp*s/5,d=LD(l),f=Tm(l);e.lineTo(f*r,-d*r),e.lineTo(d*n-f*a,f*n+d*a)}e.closePath()}},h0=xa(3),I7={draw(e,t){const r=-xa(t/(h0*3));e.moveTo(0,r*2),e.lineTo(-h0*r,-r),e.lineTo(h0*r,-r),e.closePath()}},Hn=-.5,Vn=xa(3)/2,Nx=1/xa(12),L7=(Nx/2+1)*3,B7={draw(e,t){const r=xa(t/L7),n=r/2,a=r*Nx,s=n,l=r*Nx+r,d=-s,f=l;e.moveTo(n,a),e.lineTo(s,l),e.lineTo(d,f),e.lineTo(Hn*n-Vn*a,Vn*n+Hn*a),e.lineTo(Hn*s-Vn*l,Vn*s+Hn*l),e.lineTo(Hn*d-Vn*f,Vn*d+Hn*f),e.lineTo(Hn*n+Vn*a,Hn*a-Vn*n),e.lineTo(Hn*s+Vn*l,Hn*l-Vn*s),e.lineTo(Hn*d+Vn*f,Hn*f-Vn*d),e.closePath()}};function $7(e,t){let r=null,n=Xw(a);e=typeof e=="function"?e:Pt(e||Jw),t=typeof t=="function"?t:Pt(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Pt(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Pt(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function Mm(){}function Rm(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function HD(e){this._context=e}HD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Rm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Rm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function U7(e){return new HD(e)}function VD(e){this._context=e}VD.prototype={areaStart:Mm,areaEnd:Mm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Rm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function z7(e){return new VD(e)}function GD(e){this._context=e}GD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Rm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function q7(e){return new GD(e)}function YD(e){this._context=e}YD.prototype={areaStart:Mm,areaEnd:Mm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function F7(e){return new YD(e)}function ZE(e){return e<0?-1:1}function JE(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),l=(r-e._y1)/(a||n<0&&-0),d=(s*a+l*n)/(n+a);return(ZE(s)+ZE(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(d))||0}function eA(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function m0(e,t,r){var n=e._x0,a=e._y0,s=e._x1,l=e._y1,d=(s-n)/3;e._context.bezierCurveTo(n+d,a+d*t,s-d,l-d*r,s,l)}function Im(e){this._context=e}Im.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:m0(this,this._t0,eA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,m0(this,eA(this,r=JE(this,e,t)),r);break;default:m0(this,this._t0,r=JE(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function WD(e){this._context=new XD(e)}(WD.prototype=Object.create(Im.prototype)).point=function(e,t){Im.prototype.point.call(this,t,e)};function XD(e){this._context=e}XD.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function K7(e){return new Im(e)}function Q7(e){return new WD(e)}function ZD(e){this._context=e}ZD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=tA(e),a=tA(t),s=0,l=1;l<r;++s,++l)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function tA(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),l=new Array(r);for(a[0]=0,s[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,l[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,l[t]-=n*l[t-1];for(a[r-1]=l[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(l[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function H7(e){return new ZD(e)}function Hp(e,t){this._context=e,this._t=t}Hp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function V7(e){return new Hp(e,.5)}function G7(e){return new Hp(e,0)}function Y7(e){return new Hp(e,1)}function zo(e,t){if((l=e.length)>1)for(var r=1,n,a,s=e[t[0]],l,d=s.length;r<l;++r)for(a=s,s=e[t[r]],n=0;n<d;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Ox(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function W7(e,t){return e[t]}function X7(e){const t=[];return t.key=e,t}function Z7(){var e=Pt([]),t=Ox,r=zo,n=W7;function a(s){var l=Array.from(e.apply(this,arguments),X7),d,f=l.length,h=-1,p;for(const g of s)for(d=0,++h;d<f;++d)(l[d][h]=[0,+n(g,l[d].key,h,s)]).data=g;for(d=0,p=Zw(t(l));d<f;++d)l[p[d]].index=d;return r(l,p),l}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Pt(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Pt(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?Ox:typeof s=="function"?s:Pt(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??zo,a):r},a}function J7(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,l;a<s;++a){for(l=r=0;r<n;++r)l+=e[r][a][1]||0;if(l)for(r=0;r<n;++r)e[r][a][1]/=l}zo(e,t)}}function eF(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var l=0,d=0;l<a;++l)d+=e[l][r][1]||0;n[r][1]+=n[r][0]=-d/2}zo(e,t)}}function tF(e,t){if(!(!((l=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,l;n<s;++n){for(var d=0,f=0,h=0;d<l;++d){for(var p=e[t[d]],g=p[n][1]||0,y=p[n-1][1]||0,v=(g-y)/2,j=0;j<d;++j){var S=e[t[j]],_=S[n][1]||0,N=S[n-1][1]||0;v+=_-N}f+=g,h+=v*g}a[n-1][1]+=a[n-1][0]=r,f&&(r-=h/f)}a[n-1][1]+=a[n-1][0]=r,zo(e,t)}}var p0={},g0={},rA;function rF(){return rA||(rA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(g0)),g0}var y0={},nA;function JD(){return nA||(nA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(y0)),y0}var v0={},aA;function e1(){return aA||(aA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(v0)),v0}var b0={},x0={},iA;function nF(){return iA||(iA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(x0)),x0}var sA;function t1(){return sA||(sA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nF(),r=e1();function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=t.toString(a);const s=[],l=a.length;if(l===0)return s;let d=0,f="",h="",p=!1;for(a.charCodeAt(0)===46&&(s.push(""),d++);d<l;){const g=a[d];h?g==="\\"&&d+1<l?(d++,f+=a[d]):g===h?h="":f+=g:p?g==='"'||g==="'"?h=g:g==="]"?(p=!1,s.push(f),f=""):f+=g:g==="["?(p=!0,f&&(s.push(f),f="")):g==="."?f&&(s.push(f),f=""):f+=g,d++}return f&&s.push(f),s}e.toPath=n})(b0)),b0}var oA;function r1(){return oA||(oA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rF(),r=JD(),n=e1(),a=t1();function s(d,f,h){if(d==null)return h;switch(typeof f){case"string":{if(t.isUnsafeProperty(f))return h;const p=d[f];return p===void 0?r.isDeepKey(f)?s(d,a.toPath(f),h):h:p}case"number":case"symbol":{typeof f=="number"&&(f=n.toKey(f));const p=d[f];return p===void 0?h:p}default:{if(Array.isArray(f))return l(d,f,h);if(Object.is(f==null?void 0:f.valueOf(),-0)?f="-0":f=String(f),t.isUnsafeProperty(f))return h;const p=d[f];return p===void 0?h:p}}}function l(d,f,h){if(f.length===0)return h;let p=d;for(let g=0;g<f.length;g++){if(p==null||t.isUnsafeProperty(f[g]))return h;p=p[f[g]]}return p===void 0?h:p}e.get=s})(p0)),p0}var w0,lA;function aF(){return lA||(lA=1,w0=r1().get),w0}var iF=aF();const qo=Fa(iF);var sF=4;function Cs(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:sF,r=10**t,n=Math.round(e*r)/r;return Object.is(n,-0)?0:n}function Zt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((a,s,l)=>{var d=r[l-1];return typeof d=="string"?a+d+s:d!==void 0?a+Cs(d)+s:a+s},"")}var Or=e=>e===0?0:e>0?1:-1,$a=e=>typeof e=="number"&&e!=+e,Fo=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Ee=e=>(typeof e=="number"||e instanceof Number)&&!$a(e),Ua=e=>Ee(e)||typeof e=="string",oF=0,wd=e=>{var t=++oF;return"".concat(e||"").concat(t)},Vr=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ee(t)&&typeof t!="string")return n;var s;if(Fo(t)){if(r==null)return n;var l=t.indexOf("%");s=r*parseFloat(t.slice(0,l))/100}else s=+t;return $a(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},eM=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[String(e[n])])r[String(e[n])]=!0;else return!0;return!1};function Bt(e,t,r){return Ee(e)&&Ee(t)?Cs(e+r*(t-e)):t}function tM(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):qo(n,t))===r)}var Qt=e=>e===null||typeof e>"u",sf=e=>Qt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function mn(e){return e!=null}function Xo(){}var lF=["type","size","sizeType"];function Ex(){return Ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ex.apply(null,arguments)}function cA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function uA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cA(Object(r),!0).forEach(function(n){cF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cF(e,t,r){return(t=uF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uF(e){var t=dF(e,"string");return typeof t=="symbol"?t:t+""}function dF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fF(e,t){if(e==null)return{};var r,n,a=hF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function hF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var rM={symbolCircle:Jw,symbolCross:A7,symbolDiamond:P7,symbolSquare:k7,symbolStar:R7,symbolTriangle:I7,symbolWye:B7},mF=Math.PI/180,pF=e=>{var t="symbol".concat(sf(e));return rM[t]||Jw},gF=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*mF;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},yF=(e,t)=>{rM["symbol".concat(sf(e))]=t},n1=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=fF(e,lF),s=uA(uA({},a),{},{type:t,size:r,sizeType:n}),l="circle";typeof t=="string"&&(l=t);var d=()=>{var y=pF(l),v=$7().type(y).size(gF(r,n,l)),j=v();if(j!==null)return j},{className:f,cx:h,cy:p}=s,g=tn(s);return Ee(h)&&Ee(p)&&Ee(r)?x.createElement("path",Ex({},g,{className:ot("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:d()})):null};n1.registerSymbol=yF;var nM=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,a1=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(x.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{Yw(a)&&(n[a]=(s=>r[a](r,s)))}),n},vF=(e,t,r)=>n=>(e(t,r,n),null),of=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];Yw(a)&&typeof s=="function"&&(n||(n={}),n[a]=vF(s,t,r))}),n};function dA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dA(Object(r),!0).forEach(function(n){xF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xF(e,t,r){return(t=wF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wF(e){var t=jF(e,"string");return typeof t=="symbol"?t:t+""}function jF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dr(e,t){var r=bF({},e),n=t,a=Object.keys(t),s=a.reduce((l,d)=>(l[d]===void 0&&n[d]!==void 0&&(l[d]=n[d]),l),r);return s}function Lm(){return Lm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lm.apply(null,arguments)}function fA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function SF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fA(Object(r),!0).forEach(function(n){_F(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _F(e,t,r){return(t=NF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NF(e){var t=OF(e,"string");return typeof t=="symbol"?t:t+""}function OF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yn=32,EF={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function AF(e){var{data:t,iconType:r,inactiveColor:n}=e,a=Yn/2,s=Yn/6,l=Yn/3,d=t.inactive?n:t.color,f=r??t.type;if(f==="none")return null;if(f==="plainline"){var h;return x.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:(h=t.payload)===null||h===void 0?void 0:h.strokeDasharray,x1:0,y1:a,x2:Yn,y2:a,className:"recharts-legend-icon"})}if(f==="line")return x.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(Yn,"M").concat(2*l,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(f==="rect")return x.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(Yn/8,"h").concat(Yn,"v").concat(Yn*3/4,"h").concat(-Yn,"z"),className:"recharts-legend-icon"});if(x.isValidElement(t.legendIcon)){var p=SF({},t);return delete p.legendIcon,x.cloneElement(t.legendIcon,p)}return x.createElement(n1,{fill:d,cx:a,cy:a,size:Yn,sizeType:"diameter",type:f})}function CF(e){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:l}=e,d={x:0,y:0,width:Yn,height:Yn},f={display:n==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((p,g)=>{var y=p.formatter||a,v=ot({"recharts-legend-item":!0,["legend-item-".concat(g)]:!0,inactive:p.inactive});if(p.type==="none")return null;var j=p.inactive?s:p.color,S=y?y(p.value,p,g):p.value;return x.createElement("li",Lm({className:v,style:f,key:"legend-item-".concat(g)},of(e,p,g)),x.createElement(Ww,{width:r,height:r,viewBox:d,style:h,"aria-label":"".concat(S," legend icon")},x.createElement(AF,{data:p,iconType:l,inactiveColor:s})),x.createElement("span",{className:"recharts-legend-item-text",style:{color:j}},S))})}var PF=e=>{var t=dr(e,EF),{payload:r,layout:n,align:a}=t;if(!r||!r.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?a:"left"};return x.createElement("ul",{className:"recharts-default-legend",style:s},x.createElement(CF,Lm({},t,{payload:r})))},j0={},S0={},hA;function kF(){return hA||(hA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let s=0;s<r.length;s++){const l=r[s],d=n(l,s,r);a.has(d)||a.set(d,l)}return Array.from(a.values())}e.uniqBy=t})(S0)),S0}var _0={},mA;function TF(){return mA||(mA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return function(...a){return r.apply(this,a.slice(0,n))}}e.ary=t})(_0)),_0}var N0={},pA;function aM(){return pA||(pA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(N0)),N0}var O0={},E0={},A0={},gA;function DF(){return gA||(gA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(A0)),A0}var yA;function i1(){return yA||(yA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DF();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(E0)),E0}var C0={},vA;function MF(){return vA||(vA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(C0)),C0}var bA;function RF(){return bA||(bA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=i1(),r=MF();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n})(O0)),O0}var P0={},k0={},xA;function IF(){return xA||(xA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=r1();function r(n){return function(a){return t.get(a,n)}}e.property=r})(k0)),k0}var T0={},D0={},M0={},R0={},wA;function iM(){return wA||(wA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(R0)),R0}var I0={},jA;function sM(){return jA||(jA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(I0)),I0}var L0={},SA;function oM(){return SA||(SA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.isEqualsSameValueZero=t})(L0)),L0}var _A;function LF(){return _A||(_A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iM(),r=sM(),n=oM();function a(p,g,y){return typeof y!="function"?a(p,g,()=>{}):s(p,g,function v(j,S,_,N,O,E){const C=y(j,S,_,N,O,E);return C!==void 0?!!C:s(j,S,v,E)},new Map)}function s(p,g,y,v){if(g===p)return!0;switch(typeof g){case"object":return l(p,g,y,v);case"function":return Object.keys(g).length>0?s(p,{...g},y,v):n.isEqualsSameValueZero(p,g);default:return t.isObject(p)?typeof g=="string"?g==="":!0:n.isEqualsSameValueZero(p,g)}}function l(p,g,y,v){if(g==null)return!0;if(Array.isArray(g))return f(p,g,y,v);if(g instanceof Map)return d(p,g,y,v);if(g instanceof Set)return h(p,g,y,v);const j=Object.keys(g);if(p==null||r.isPrimitive(p))return j.length===0;if(j.length===0)return!0;if(v!=null&&v.has(g))return v.get(g)===p;v==null||v.set(g,p);try{for(let S=0;S<j.length;S++){const _=j[S];if(!r.isPrimitive(p)&&!(_ in p)||g[_]===void 0&&p[_]!==void 0||g[_]===null&&p[_]!==null||!y(p[_],g[_],_,p,g,v))return!1}return!0}finally{v==null||v.delete(g)}}function d(p,g,y,v){if(g.size===0)return!0;if(!(p instanceof Map))return!1;for(const[j,S]of g.entries()){const _=p.get(j);if(y(_,S,j,p,g,v)===!1)return!1}return!0}function f(p,g,y,v){if(g.length===0)return!0;if(!Array.isArray(p))return!1;const j=new Set;for(let S=0;S<g.length;S++){const _=g[S];let N=!1;for(let O=0;O<p.length;O++){if(j.has(O))continue;const E=p[O];let C=!1;if(y(E,_,S,p,g,v)&&(C=!0),C){j.add(O),N=!0;break}}if(!N)return!1}return!0}function h(p,g,y,v){return g.size===0?!0:p instanceof Set?f([...p],[...g],y,v):!1}e.isMatchWith=a,e.isSetMatch=h})(M0)),M0}var NA;function lM(){return NA||(NA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LF();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r})(D0)),D0}var B0={},$0={},U0={},OA;function BF(){return OA||(OA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(U0)),U0}var z0={},EA;function s1(){return EA||(EA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(z0)),z0}var q0={},AA;function cM(){return AA||(AA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",l="[object Symbol]",d="[object Date]",f="[object Map]",h="[object Set]",p="[object Array]",g="[object Function]",y="[object ArrayBuffer]",v="[object Object]",j="[object Error]",S="[object DataView]",_="[object Uint8Array]",N="[object Uint8ClampedArray]",O="[object Uint16Array]",E="[object Uint32Array]",C="[object BigUint64Array]",D="[object Int8Array]",T="[object Int16Array]",M="[object Int32Array]",R="[object BigInt64Array]",U="[object Float32Array]",Y="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=y,e.arrayTag=p,e.bigInt64ArrayTag=R,e.bigUint64ArrayTag=C,e.booleanTag=a,e.dataViewTag=S,e.dateTag=d,e.errorTag=j,e.float32ArrayTag=U,e.float64ArrayTag=Y,e.functionTag=g,e.int16ArrayTag=T,e.int32ArrayTag=M,e.int8ArrayTag=D,e.mapTag=f,e.numberTag=n,e.objectTag=v,e.regexpTag=t,e.setTag=h,e.stringTag=r,e.symbolTag=l,e.uint16ArrayTag=O,e.uint32ArrayTag=E,e.uint8ArrayTag=_,e.uint8ClampedArrayTag=N})(q0)),q0}var F0={},CA;function $F(){return CA||(CA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(F0)),F0}var PA;function uM(){return PA||(PA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BF(),r=s1(),n=cM(),a=sM(),s=$F();function l(p,g){return d(p,void 0,p,new Map,g)}function d(p,g,y,v=new Map,j=void 0){const S=j==null?void 0:j(p,g,y,v);if(S!==void 0)return S;if(a.isPrimitive(p))return p;if(v.has(p))return v.get(p);if(Array.isArray(p)){const _=new Array(p.length);v.set(p,_);for(let N=0;N<p.length;N++)_[N]=d(p[N],N,y,v,j);return Object.hasOwn(p,"index")&&(_.index=p.index),Object.hasOwn(p,"input")&&(_.input=p.input),_}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const _=new RegExp(p.source,p.flags);return _.lastIndex=p.lastIndex,_}if(p instanceof Map){const _=new Map;v.set(p,_);for(const[N,O]of p)_.set(N,d(O,N,y,v,j));return _}if(p instanceof Set){const _=new Set;v.set(p,_);for(const N of p)_.add(d(N,void 0,y,v,j));return _}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(s.isTypedArray(p)){const _=new(Object.getPrototypeOf(p)).constructor(p.length);v.set(p,_);for(let N=0;N<p.length;N++)_[N]=d(p[N],N,y,v,j);return _}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const _=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return v.set(p,_),f(_,p,y,v,j),_}if(typeof File<"u"&&p instanceof File){const _=new File([p],p.name,{type:p.type});return v.set(p,_),f(_,p,y,v,j),_}if(typeof Blob<"u"&&p instanceof Blob){const _=new Blob([p],{type:p.type});return v.set(p,_),f(_,p,y,v,j),_}if(p instanceof Error){const _=new p.constructor;return v.set(p,_),_.message=p.message,_.name=p.name,_.stack=p.stack,_.cause=p.cause,f(_,p,y,v,j),_}if(p instanceof Boolean){const _=new Boolean(p.valueOf());return v.set(p,_),f(_,p,y,v,j),_}if(p instanceof Number){const _=new Number(p.valueOf());return v.set(p,_),f(_,p,y,v,j),_}if(p instanceof String){const _=new String(p.valueOf());return v.set(p,_),f(_,p,y,v,j),_}if(typeof p=="object"&&h(p)){const _=Object.create(Object.getPrototypeOf(p));return v.set(p,_),f(_,p,y,v,j),_}return p}function f(p,g,y=p,v,j){const S=[...Object.keys(g),...t.getSymbols(g)];for(let _=0;_<S.length;_++){const N=S[_],O=Object.getOwnPropertyDescriptor(p,N);(O==null||O.writable)&&(p[N]=d(g[N],N,y,v,j))}}function h(p){switch(r.getTag(p)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=d,e.copyProperties=f})($0)),$0}var kA;function UF(){return kA||(kA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uM();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(B0)),B0}var TA;function zF(){return TA||(TA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lM(),r=UF();function n(a){return a=r.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=n})(T0)),T0}var K0={},Q0={},H0={},DA;function qF(){return DA||(DA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uM(),r=s1(),n=cM();function a(s,l){return t.cloneDeepWith(s,(d,f,h,p)=>{const g=l==null?void 0:l(d,f,h,p);if(g!==void 0)return g;if(typeof s=="object"){if(r.getTag(s)===n.objectTag&&typeof s.constructor!="function"){const y={};return p.set(s,y),t.copyProperties(y,s,h,p),y}switch(Object.prototype.toString.call(s)){case n.numberTag:case n.stringTag:case n.booleanTag:{const y=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(y,s),y}case n.argumentsTag:{const y={};return t.copyProperties(y,s),y.length=s.length,y[Symbol.iterator]=s[Symbol.iterator],y}default:return}}})}e.cloneDeepWith=a})(H0)),H0}var MA;function FF(){return MA||(MA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qF();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(Q0)),Q0}var V0={},G0={},RA;function dM(){return RA||(RA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(G0)),G0}var Y0={},IA;function KF(){return IA||(IA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s1();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(Y0)),Y0}var LA;function QF(){return LA||(LA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JD(),r=dM(),n=KF(),a=t1();function s(l,d){let f;if(Array.isArray(d)?f=d:typeof d=="string"&&t.isDeepKey(d)&&(l==null?void 0:l[d])==null?f=a.toPath(d):f=[d],f.length===0)return!1;let h=l;for(let p=0;p<f.length;p++){const g=f[p];if((h==null||!Object.hasOwn(h,g))&&!((Array.isArray(h)||n.isArguments(h))&&r.isIndex(g)&&g<h.length))return!1;h=h[g]}return!0}e.has=s})(V0)),V0}var BA;function HF(){return BA||(BA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lM(),r=e1(),n=FF(),a=r1(),s=QF();function l(d,f){switch(typeof d){case"object":{Object.is(d==null?void 0:d.valueOf(),-0)&&(d="-0");break}case"number":{d=r.toKey(d);break}}return f=n.cloneDeep(f),function(h){const p=a.get(h,d);return p===void 0?s.has(h,d):f===void 0?p===void 0:t.isMatch(p,f)}}e.matchesProperty=l})(K0)),K0}var $A;function VF(){return $A||($A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aM(),r=IF(),n=zF(),a=HF();function s(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?a.matchesProperty(l[0],l[1]):n.matches(l);case"string":case"symbol":case"number":return r.property(l)}}e.iteratee=s})(P0)),P0}var UA;function GF(){return UA||(UA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kF(),r=TF(),n=aM(),a=RF(),s=VF();function l(d,f=n.identity){return a.isArrayLikeObject(d)?t.uniqBy(Array.from(d),r.ary(s.iteratee(f),1)):[]}e.uniqBy=l})(j0)),j0}var W0,zA;function YF(){return zA||(zA=1,W0=GF().uniqBy),W0}var WF=YF();const qA=Fa(WF);function fM(e,t,r){return t===!0?qA(e,r):typeof t=="function"?qA(e,t):e}var X0={exports:{}},Z0={},J0={exports:{}},eb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FA;function XF(){if(FA)return eb;FA=1;var e=Rc();function t(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,s=e.useLayoutEffect,l=e.useDebugValue;function d(g,y){var v=y(),j=n({inst:{value:v,getSnapshot:y}}),S=j[0].inst,_=j[1];return s(function(){S.value=v,S.getSnapshot=y,f(S)&&_({inst:S})},[g,v,y]),a(function(){return f(S)&&_({inst:S}),g(function(){f(S)&&_({inst:S})})},[g]),l(v),v}function f(g){var y=g.getSnapshot;g=g.value;try{var v=y();return!r(g,v)}catch{return!0}}function h(g,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:d;return eb.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,eb}var KA;function ZF(){return KA||(KA=1,J0.exports=XF()),J0.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QA;function JF(){if(QA)return Z0;QA=1;var e=Rc(),t=ZF();function r(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,s=e.useRef,l=e.useEffect,d=e.useMemo,f=e.useDebugValue;return Z0.useSyncExternalStoreWithSelector=function(h,p,g,y,v){var j=s(null);if(j.current===null){var S={hasValue:!1,value:null};j.current=S}else S=j.current;j=d(function(){function N(T){if(!O){if(O=!0,E=T,T=y(T),v!==void 0&&S.hasValue){var M=S.value;if(v(M,T))return C=M}return C=T}if(M=C,n(E,T))return M;var R=y(T);return v!==void 0&&v(M,R)?(E=T,M):(E=T,C=R)}var O=!1,E,C,D=g===void 0?null:g;return[function(){return N(p())},D===null?void 0:function(){return N(D())}]},[p,g,y,v]);var _=a(h,j[0],j[1]);return l(function(){S.hasValue=!0,S.value=_},[_]),f(_),_},Z0}var HA;function eK(){return HA||(HA=1,X0.exports=JF()),X0.exports}var tK=eK(),o1=x.createContext(null),rK=e=>e,kt=()=>{var e=x.useContext(o1);return e?e.store.dispatch:rK},xm=()=>{},nK=()=>xm,aK=(e,t)=>e===t;function Pe(e){var t=x.useContext(o1),r=x.useMemo(()=>t?n=>{if(n!=null)return e(n)}:xm,[t,e]);return tK.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:nK,t?t.store.getState:xm,t?t.store.getState:xm,r,aK)}function iK(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function sK(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function oK(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var VA=e=>Array.isArray(e)?e:[e];function lK(e){const t=Array.isArray(e[0])?e[0]:e;return oK(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function cK(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var uK=class{constructor(e){this.value=e}deref(){return this.value}},dK=typeof WeakRef<"u"?WeakRef:uK,fK=0,GA=1;function tm(){return{s:fK,v:void 0,o:null,p:null}}function hM(e,t={}){let r=tm();const{resultEqualityCheck:n}=t;let a,s=0;function l(){var g;let d=r;const{length:f}=arguments;for(let y=0,v=f;y<v;y++){const j=arguments[y];if(typeof j=="function"||typeof j=="object"&&j!==null){let S=d.o;S===null&&(d.o=S=new WeakMap);const _=S.get(j);_===void 0?(d=tm(),S.set(j,d)):d=_}else{let S=d.p;S===null&&(d.p=S=new Map);const _=S.get(j);_===void 0?(d=tm(),S.set(j,d)):d=_}}const h=d;let p;if(d.s===GA)p=d.v;else if(p=e.apply(null,arguments),s++,n){const y=((g=a==null?void 0:a.deref)==null?void 0:g.call(a))??a;y!=null&&n(y,p)&&(p=y,s!==0&&s--),a=typeof p=="object"&&p!==null||typeof p=="function"?new dK(p):p}return h.s=GA,h.v=p,p}return l.clearCache=()=>{r=tm(),l.resetResultsCount()},l.resultsCount=()=>s,l.resetResultsCount=()=>{s=0},l}function hK(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let s=0,l=0,d,f={},h=a.pop();typeof h=="object"&&(f=h,h=a.pop()),iK(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const p={...r,...f},{memoize:g,memoizeOptions:y=[],argsMemoize:v=hM,argsMemoizeOptions:j=[]}=p,S=VA(y),_=VA(j),N=lK(a),O=g(function(){return s++,h.apply(null,arguments)},...S),E=v(function(){l++;const D=cK(N,arguments);return d=O.apply(null,D),d},..._);return Object.assign(E,{resultFunc:h,memoizedResultFunc:O,dependencies:N,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>d,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:g,argsMemoize:v})};return Object.assign(n,{withTypes:()=>n}),n}var X=hK(hM),mK=Object.assign((e,t=X)=>{sK(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((l,d,f)=>(l[r[f]]=d,l),{}))},{withTypes:()=>mK}),tb={},rb={},nb={},YA;function pK(){return YA||(YA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const l=t(n),d=t(a);if(l===d&&l===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?d-l:l-d}return 0};e.compareValues=r})(nb)),nb}var ab={},ib={},WA;function mM(){return WA||(WA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(ib)),ib}var XA;function gK(){return XA||(XA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mM(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,l){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||l!=null&&Object.hasOwn(l,s)}e.isKey=a})(ab)),ab}var ZA;function yK(){return ZA||(ZA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pK(),r=gK(),n=t1();function a(s,l,d,f){if(s==null)return[];d=f?void 0:d,Array.isArray(s)||(s=Object.values(s)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(d)||(d=d==null?[]:[d]),d=d.map(v=>String(v));const h=(v,j)=>{let S=v;for(let _=0;_<j.length&&S!=null;++_)S=S[j[_]];return S},p=(v,j)=>j==null||v==null?j:typeof v=="object"&&"key"in v?Object.hasOwn(j,v.key)?j[v.key]:h(j,v.path):typeof v=="function"?v(j):Array.isArray(v)?h(j,v):typeof j=="object"?j[v]:j,g=l.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||r.isKey(v)?v:{key:v,path:n.toPath(v)}));return s.map(v=>({original:v,criteria:g.map(j=>p(j,v))})).slice().sort((v,j)=>{for(let S=0;S<g.length;S++){const _=t.compareValues(v.criteria[S],j.criteria[S],d[S]);if(_!==0)return _}return 0}).map(v=>v.original)}e.orderBy=a})(rb)),rb}var sb={},JA;function vK(){return JA||(JA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],s=Math.floor(n),l=(d,f)=>{for(let h=0;h<d.length;h++){const p=d[h];Array.isArray(p)&&f<s?l(p,f+1):a.push(p)}};return l(r,0),a}e.flatten=t})(sb)),sb}var ob={},eC;function pM(){return eC||(eC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dM(),r=i1(),n=iM(),a=oM();function s(l,d,f){return n.isObject(f)&&(typeof d=="number"&&r.isArrayLike(f)&&t.isIndex(d)&&d<f.length||typeof d=="string"&&d in f)?a.isEqualsSameValueZero(f[d],l):!1}e.isIterateeCall=s})(ob)),ob}var tC;function bK(){return tC||(tC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yK(),r=vK(),n=pM();function a(s,...l){const d=l.length;return d>1&&n.isIterateeCall(s,l[0],l[1])?l=[]:d>2&&n.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(s,r.flatten(l),["asc"])}e.sortBy=a})(tb)),tb}var lb,rC;function xK(){return rC||(rC=1,lb=bK().sortBy),lb}var wK=xK();const Vp=Fa(wK);var gM=e=>e.legend.settings,jK=e=>e.legend.size,SK=e=>e.legend.payload,_K=X([SK,gM],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Vp(n,r):n});function NK(){return Pe(_K)}var rm=1;function yM(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=x.useState({height:0,left:0,top:0,width:0}),n=x.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),l={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(l.height-t.height)>rm||Math.abs(l.left-t.left)>rm||Math.abs(l.top-t.top)>rm||Math.abs(l.width-t.width)>rm)&&r({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function $r(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var OK=typeof Symbol=="function"&&Symbol.observable||"@@observable",nC=OK,cb=()=>Math.random().toString(36).substring(7).split("").join("."),EK={INIT:`@@redux/INIT${cb()}`,REPLACE:`@@redux/REPLACE${cb()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${cb()}`},Bm=EK;function l1(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function vM(e,t,r){if(typeof e!="function")throw new Error($r(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error($r(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error($r(1));return r(vM)(e,t)}let n=e,a=t,s=new Map,l=s,d=0,f=!1;function h(){l===s&&(l=new Map,s.forEach((_,N)=>{l.set(N,_)}))}function p(){if(f)throw new Error($r(3));return a}function g(_){if(typeof _!="function")throw new Error($r(4));if(f)throw new Error($r(5));let N=!0;h();const O=d++;return l.set(O,_),function(){if(N){if(f)throw new Error($r(6));N=!1,h(),l.delete(O),s=null}}}function y(_){if(!l1(_))throw new Error($r(7));if(typeof _.type>"u")throw new Error($r(8));if(typeof _.type!="string")throw new Error($r(17));if(f)throw new Error($r(9));try{f=!0,a=n(a,_)}finally{f=!1}return(s=l).forEach(O=>{O()}),_}function v(_){if(typeof _!="function")throw new Error($r(10));n=_,y({type:Bm.REPLACE})}function j(){const _=g;return{subscribe(N){if(typeof N!="object"||N===null)throw new Error($r(11));function O(){const C=N;C.next&&C.next(p())}return O(),{unsubscribe:_(O)}},[nC](){return this}}}return y({type:Bm.INIT}),{dispatch:y,subscribe:g,getState:p,replaceReducer:v,[nC]:j}}function AK(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Bm.INIT})>"u")throw new Error($r(12));if(typeof r(void 0,{type:Bm.PROBE_UNKNOWN_ACTION()})>"u")throw new Error($r(13))})}function bM(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const l=t[s];typeof e[l]=="function"&&(r[l]=e[l])}const n=Object.keys(r);let a;try{AK(r)}catch(s){a=s}return function(l={},d){if(a)throw a;let f=!1;const h={};for(let p=0;p<n.length;p++){const g=n[p],y=r[g],v=l[g],j=y(v,d);if(typeof j>"u")throw d&&d.type,new Error($r(14));h[g]=j,f=f||j!==v}return f=f||n.length!==Object.keys(l).length,f?h:l}}function $m(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function CK(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error($r(15))};const l={getState:a.getState,dispatch:(f,...h)=>s(f,...h)},d=e.map(f=>f(l));return s=$m(...d)(a.dispatch),{...a,dispatch:s}}}function xM(e){return l1(e)&&"type"in e&&typeof e.type=="string"}var wM=Symbol.for("immer-nothing"),aC=Symbol.for("immer-draftable"),rn=Symbol.for("immer-state");function fa(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Cn=Object,Ac=Cn.getPrototypeOf,Um="constructor",Gp="prototype",Ax="configurable",zm="enumerable",wm="writable",jd="value",Ni=e=>!!e&&!!e[rn];function ga(e){var t;return e?jM(e)||Wp(e)||!!e[aC]||!!((t=e[Um])!=null&&t[aC])||Xp(e)||Zp(e):!1}var PK=Cn[Gp][Um].toString(),iC=new WeakMap;function jM(e){if(!e||!c1(e))return!1;const t=Ac(e);if(t===null||t===Cn[Gp])return!0;const r=Cn.hasOwnProperty.call(t,Um)&&t[Um];if(r===Object)return!0;if(!nc(r))return!1;let n=iC.get(r);return n===void 0&&(n=Function.toString.call(r),iC.set(r,n)),n===PK}function Yp(e,t,r=!0){lf(e)===0?(r?Reflect.ownKeys(e):Cn.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function lf(e){const t=e[rn];return t?t.type_:Wp(e)?1:Xp(e)?2:Zp(e)?3:0}var sC=(e,t,r=lf(e))=>r===2?e.has(t):Cn[Gp].hasOwnProperty.call(e,t),Cx=(e,t,r=lf(e))=>r===2?e.get(t):e[t],qm=(e,t,r,n=lf(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function kK(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Wp=Array.isArray,Xp=e=>e instanceof Map,Zp=e=>e instanceof Set,c1=e=>typeof e=="object",nc=e=>typeof e=="function",ub=e=>typeof e=="boolean";function TK(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var di=e=>e.copy_||e.base_,u1=e=>e.modified_?e.copy_:e.base_;function Px(e,t){if(Xp(e))return new Map(e);if(Zp(e))return new Set(e);if(Wp(e))return Array[Gp].slice.call(e);const r=jM(e);if(t===!0||t==="class_only"&&!r){const n=Cn.getOwnPropertyDescriptors(e);delete n[rn];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const l=a[s],d=n[l];d[wm]===!1&&(d[wm]=!0,d[Ax]=!0),(d.get||d.set)&&(n[l]={[Ax]:!0,[wm]:!0,[zm]:d[zm],[jd]:e[l]})}return Cn.create(Ac(e),n)}else{const n=Ac(e);if(n!==null&&r)return{...e};const a=Cn.create(n);return Cn.assign(a,e)}}function d1(e,t=!1){return Jp(e)||Ni(e)||!ga(e)||(lf(e)>1&&Cn.defineProperties(e,{set:nm,add:nm,clear:nm,delete:nm}),Cn.freeze(e),t&&Yp(e,(r,n)=>{d1(n,!0)},!1)),e}function DK(){fa(2)}var nm={[jd]:DK};function Jp(e){return e===null||!c1(e)?!0:Cn.isFrozen(e)}var Fm="MapSet",kx="Patches",oC="ArrayMethods",SM={};function Ko(e){const t=SM[e];return t||fa(0,e),t}var lC=e=>!!SM[e],Sd,_M=()=>Sd,MK=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:lC(Fm)?Ko(Fm):void 0,arrayMethodsPlugin_:lC(oC)?Ko(oC):void 0});function cC(e,t){t&&(e.patchPlugin_=Ko(kx),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Tx(e){Dx(e),e.drafts_.forEach(RK),e.drafts_=null}function Dx(e){e===Sd&&(Sd=e.parent_)}var uC=e=>Sd=MK(Sd,e);function RK(e){const t=e[rn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function dC(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[rn].modified_&&(Tx(t),fa(4)),ga(e)&&(e=fC(t,e));const{patchPlugin_:a}=t;a&&a.generateReplacementPatches_(r[rn].base_,e,t)}else e=fC(t,r);return IK(t,e,!0),Tx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==wM?e:void 0}function fC(e,t){if(Jp(t))return t;const r=t[rn];if(!r)return Km(t,e.handledSet_,e);if(!eg(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);EM(r,e)}return r.copy_}function IK(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&d1(t,r)}function NM(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var eg=(e,t)=>e.scope_===t,LK=[];function OM(e,t,r,n){const a=di(e),s=e.type_;if(n!==void 0&&Cx(a,n,s)===t){qm(a,n,r,s);return}if(!e.draftLocations_){const d=e.draftLocations_=new Map;Yp(a,(f,h)=>{if(Ni(h)){const p=d.get(h)||[];p.push(f),d.set(h,p)}})}const l=e.draftLocations_.get(t)??LK;for(const d of l)qm(a,d,r,s)}function BK(e,t,r){e.callbacks_.push(function(a){var d;const s=t;if(!s||!eg(s,a))return;(d=a.mapSetPlugin_)==null||d.fixSetContents(s);const l=u1(s);OM(e,s.draft_??s,l,r),EM(s,a)})}function EM(e,t){var n;if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(((n=e.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:a}=t;if(a){const s=a.getPath(e);s&&a.generatePatches_(e,s,t)}NM(e)}}function $K(e,t,r){const{scope_:n}=e;if(Ni(r)){const a=r[rn];eg(a,n)&&a.callbacks_.push(function(){jm(e);const l=u1(a);OM(e,r,l,t)})}else ga(r)&&e.callbacks_.push(function(){const s=di(e);e.type_===3?s.has(r)&&Km(r,n.handledSet_,n):Cx(s,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Km(Cx(e.copy_,t,e.type_),n.handledSet_,n)})}function Km(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||Ni(e)||t.has(e)||!ga(e)||Jp(e)||(t.add(e),Yp(e,(n,a)=>{if(Ni(a)){const s=a[rn];if(eg(s,r)){const l=u1(s);qm(e,n,l,e.type_),NM(s)}}else ga(a)&&Km(a,t,r)})),e}function UK(e,t){const r=Wp(e),n={type_:r?1:0,scope_:t?t.scope_:_M(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,s=Qm;r&&(a=[n],s=_d);const{revoke:l,proxy:d}=Proxy.revocable(a,s);return n.draft_=d,n.revoke_=l,[d,n]}var Qm={get(e,t){if(t===rn)return e;let r=e.scope_.arrayMethodsPlugin_;const n=e.type_===1&&typeof t=="string";if(n&&r!=null&&r.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);const a=di(e);if(!sC(a,t,e.type_))return zK(e,a,t);const s=a[t];if(e.finalized_||!ga(s)||n&&e.operationMethod&&(r!=null&&r.isMutatingArrayMethod(e.operationMethod))&&TK(t))return s;if(s===db(e.base_,t)){jm(e);const l=e.type_===1?+t:t,d=Rx(e.scope_,s,e,l);return e.copy_[l]=d}return s},has(e,t){return t in di(e)},ownKeys(e){return Reflect.ownKeys(di(e))},set(e,t,r){const n=AM(di(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=db(di(e),t),s=a==null?void 0:a[rn];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(kK(r,a)&&(r!==void 0||sC(e.base_,t,e.type_)))return!0;jm(e),Mx(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),$K(e,t,r)),!0},deleteProperty(e,t){return jm(e),db(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Mx(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=di(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[wm]:!0,[Ax]:e.type_!==1||t!=="length",[zm]:n[zm],[jd]:r[t]}},defineProperty(){fa(11)},getPrototypeOf(e){return Ac(e.base_)},setPrototypeOf(){fa(12)}},_d={};for(let e in Qm){let t=Qm[e];_d[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}}_d.deleteProperty=function(e,t){return _d.set.call(this,e,t,void 0)};_d.set=function(e,t,r){return Qm.set.call(this,e[0],t,r,e[0])};function db(e,t){const r=e[rn];return(r?di(r):e)[t]}function zK(e,t,r){var a;const n=AM(t,r);return n?jd in n?n[jd]:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function AM(e,t){if(!(t in e))return;let r=Ac(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Ac(r)}}function Mx(e){e.modified_||(e.modified_=!0,e.parent_&&Mx(e.parent_))}function jm(e){e.copy_||(e.assigned_=new Map,e.copy_=Px(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var qK=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,a)=>{if(nc(r)&&!nc(n)){const l=n;n=r;const d=this;return function(h=l,...p){return d.produce(h,g=>n.call(this,g,...p))}}nc(n)||fa(6),a!==void 0&&!nc(a)&&fa(7);let s;if(ga(r)){const l=uC(this),d=Rx(l,r,void 0);let f=!0;try{s=n(d),f=!1}finally{f?Tx(l):Dx(l)}return cC(l,a),dC(s,l)}else if(!r||!c1(r)){if(s=n(r),s===void 0&&(s=r),s===wM&&(s=void 0),this.autoFreeze_&&d1(s,!0),a){const l=[],d=[];Ko(kx).generateReplacementPatches_(r,s,{patches_:l,inversePatches_:d}),a(l,d)}return s}else fa(1,r)},this.produceWithPatches=(r,n)=>{if(nc(r))return(d,...f)=>this.produceWithPatches(d,h=>r(h,...f));let a,s;return[this.produce(r,n,(d,f)=>{a=d,s=f}),a,s]},ub(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),ub(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),ub(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){ga(t)||fa(8),Ni(t)&&(t=pa(t));const r=uC(this),n=Rx(r,t,void 0);return n[rn].isManual_=!0,Dx(r),n}finishDraft(t,r){const n=t&&t[rn];(!n||!n.isManual_)&&fa(9);const{scope_:a}=n;return cC(a,r),dC(void 0,a)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(r=r.slice(n+1));const a=Ko(kx).applyPatches_;return Ni(t)?a(t,r):this.produce(t,s=>a(s,r))}};function Rx(e,t,r,n){const[a,s]=Xp(t)?Ko(Fm).proxyMap_(t,r):Zp(t)?Ko(Fm).proxySet_(t,r):UK(t,r);return((r==null?void 0:r.scope_)??_M()).drafts_.push(a),s.callbacks_=(r==null?void 0:r.callbacks_)??[],s.key_=n,r&&n!==void 0?BK(r,s,n):s.callbacks_.push(function(f){var p;(p=f.mapSetPlugin_)==null||p.fixSetContents(s);const{patchPlugin_:h}=f;s.modified_&&h&&h.generatePatches_(s,[],f)}),a}function pa(e){return Ni(e)||fa(10,e),CM(e)}function CM(e){if(!ga(e)||Jp(e))return e;const t=e[rn];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Px(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Px(e,!0);return Yp(r,(a,s)=>{qm(r,a,CM(s))},n),t&&(t.finalized_=!1),r}var FK=new qK,PM=FK.produce;function kM(e){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,e):a(s)}var KK=kM(),QK=kM,HK=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?$m:$m.apply(null,arguments)};function ea(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(Pn(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>xM(n)&&n.type===e,r}var TM=class sd extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,sd.prototype)}static get[Symbol.species](){return sd}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new sd(...t[0].concat(this)):new sd(...t.concat(this))}};function hC(e){return ga(e)?PM(e,()=>{}):e}function am(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function VK(e){return typeof e=="boolean"}var GK=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let l=new TM;return r&&(VK(r)?l.push(KK):l.push(QK(r.extraArgument))),l},DM="RTK_autoBatch",Lt=()=>e=>({payload:e,meta:{[DM]:!0}}),mC=e=>t=>{setTimeout(t,e)},MM=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,l=!1;const d=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:mC(10):e.type==="callback"?e.queueNotification:mC(e.timeout),h=()=>{l=!1,s&&(s=!1,d.forEach(p=>p()))};return Object.assign({},n,{subscribe(p){const g=()=>a&&p(),y=n.subscribe(g);return d.add(p),()=>{y(),d.delete(p)}},dispatch(p){var g;try{return a=!((g=p==null?void 0:p.meta)!=null&&g[DM]),s=!a,s&&(l||(l=!0,f(h))),n.dispatch(p)}finally{a=!0}}})},YK=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new TM(e);return n&&a.push(MM(typeof n=="object"?n:void 0)),a};function WK(e){const t=GK(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:l=void 0}=e||{};let d;if(typeof r=="function")d=r;else if(l1(r))d=bM(r);else throw new Error(Pn(1));let f;typeof n=="function"?f=n(t):f=t();let h=$m;a&&(h=HK({trace:!1,...typeof a=="object"&&a}));const p=CK(...f),g=YK(p);let y=typeof l=="function"?l(g):g();const v=h(...y);return vM(d,s,v)}function RM(e){const t={},r=[];let n;const a={addCase(s,l){const d=typeof s=="string"?s:s.type;if(!d)throw new Error(Pn(28));if(d in t)throw new Error(Pn(29));return t[d]=l,a},addAsyncThunk(s,l){return l.pending&&(t[s.pending.type]=l.pending),l.rejected&&(t[s.rejected.type]=l.rejected),l.fulfilled&&(t[s.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:s.settled,reducer:l.settled}),a},addMatcher(s,l){return r.push({matcher:s,reducer:l}),a},addDefaultCase(s){return n=s,a}};return e(a),[t,r,n]}function XK(e){return typeof e=="function"}function ZK(e,t){let[r,n,a]=RM(t),s;if(XK(e))s=()=>hC(e());else{const d=hC(e);s=()=>d}function l(d=s(),f){let h=[r[f.type],...n.filter(({matcher:p})=>p(f)).map(({reducer:p})=>p)];return h.filter(p=>!!p).length===0&&(h=[a]),h.reduce((p,g)=>{if(g)if(Ni(p)){const v=g(p,f);return v===void 0?p:v}else{if(ga(p))return PM(p,y=>g(y,f));{const y=g(p,f);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return p},d)}return l.getInitialState=s,l}var JK="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",eQ=(e=21)=>{let t="",r=e;for(;r--;)t+=JK[Math.random()*64|0];return t},tQ=Symbol.for("rtk-slice-createasyncthunk");function rQ(e,t){return`${e}/${t}`}function nQ({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[tQ];return function(a){const{name:s,reducerPath:l=s}=a;if(!s)throw new Error(Pn(11));const d=(typeof a.reducers=="function"?a.reducers(iQ()):a.reducers)||{},f=Object.keys(d),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(C,D){const T=typeof C=="string"?C:C.type;if(!T)throw new Error(Pn(12));if(T in h.sliceCaseReducersByType)throw new Error(Pn(13));return h.sliceCaseReducersByType[T]=D,p},addMatcher(C,D){return h.sliceMatchers.push({matcher:C,reducer:D}),p},exposeAction(C,D){return h.actionCreators[C]=D,p},exposeCaseReducer(C,D){return h.sliceCaseReducersByName[C]=D,p}};f.forEach(C=>{const D=d[C],T={reducerName:C,type:rQ(s,C),createNotation:typeof a.reducers=="function"};oQ(D)?cQ(T,D,p,t):sQ(T,D,p)});function g(){const[C={},D=[],T=void 0]=typeof a.extraReducers=="function"?RM(a.extraReducers):[a.extraReducers],M={...C,...h.sliceCaseReducersByType};return ZK(a.initialState,R=>{for(let U in M)R.addCase(U,M[U]);for(let U of h.sliceMatchers)R.addMatcher(U.matcher,U.reducer);for(let U of D)R.addMatcher(U.matcher,U.reducer);T&&R.addDefaultCase(T)})}const y=C=>C,v=new Map,j=new WeakMap;let S;function _(C,D){return S||(S=g()),S(C,D)}function N(){return S||(S=g()),S.getInitialState()}function O(C,D=!1){function T(R){let U=R[C];return typeof U>"u"&&D&&(U=am(j,T,N)),U}function M(R=y){const U=am(v,D,()=>new WeakMap);return am(U,R,()=>{const Y={};for(const[K,z]of Object.entries(a.selectors??{}))Y[K]=aQ(z,R,()=>am(j,R,N),D);return Y})}return{reducerPath:C,getSelectors:M,get selectors(){return M(T)},selectSlice:T}}const E={name:s,reducer:_,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:N,...O(l),injectInto(C,{reducerPath:D,...T}={}){const M=D??l;return C.inject({reducerPath:M,reducer:_},T),{...E,...O(M,!0)}}};return E}}function aQ(e,t,r,n){function a(s,...l){let d=t(s);return typeof d>"u"&&n&&(d=r()),e(d,...l)}return a.unwrapped=e,a}var gn=nQ();function iQ(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function sQ({type:e,reducerName:t,createNotation:r},n,a){let s,l;if("reducer"in n){if(r&&!lQ(n))throw new Error(Pn(17));s=n.reducer,l=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,l?ea(e,l):ea(e))}function oQ(e){return e._reducerDefinitionType==="asyncThunk"}function lQ(e){return e._reducerDefinitionType==="reducerWithPrepare"}function cQ({type:e,reducerName:t},r,n,a){if(!a)throw new Error(Pn(18));const{payloadCreator:s,fulfilled:l,pending:d,rejected:f,settled:h,options:p}=r,g=a(e,s,p);n.exposeAction(t,g),l&&n.addCase(g.fulfilled,l),d&&n.addCase(g.pending,d),f&&n.addCase(g.rejected,f),h&&n.addMatcher(g.settled,h),n.exposeCaseReducer(t,{fulfilled:l||im,pending:d||im,rejected:f||im,settled:h||im})}function im(){}var uQ="task",IM="listener",LM="completed",f1="cancelled",dQ=`task-${f1}`,fQ=`task-${LM}`,Ix=`${IM}-${f1}`,hQ=`${IM}-${LM}`,tg=class{constructor(e){Gv(this,"name","TaskAbortError");Gv(this,"message");this.code=e,this.message=`${uQ} ${f1} (reason: ${e})`}},h1=(e,t)=>{if(typeof e!="function")throw new TypeError(Pn(32))},Hm=()=>{},BM=(e,t=Hm)=>(e.catch(t),e),$M=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Mo=e=>{if(e.aborted)throw new tg(e.reason)};function UM(e,t){let r=Hm;return new Promise((n,a)=>{const s=()=>a(new tg(e.reason));if(e.aborted){s();return}r=$M(e,s),t.finally(()=>r()).then(n,a)}).finally(()=>{r=Hm})}var mQ=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof tg?"cancelled":"rejected",error:r}}finally{t==null||t()}},Vm=e=>t=>BM(UM(e,t).then(r=>(Mo(e),r))),zM=e=>{const t=Vm(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:lc}=Object,pC={},rg="listenerMiddleware",pQ=(e,t)=>{const r=n=>$M(e,()=>n.abort(e.reason));return(n,a)=>{h1(n);const s=new AbortController;r(s);const l=mQ(async()=>{Mo(e),Mo(s.signal);const d=await n({pause:Vm(s.signal),delay:zM(s.signal),signal:s.signal});return Mo(s.signal),d},()=>s.abort(fQ));return a!=null&&a.autoJoin&&t.push(l.catch(Hm)),{result:Vm(e)(l),cancel(){s.abort(dQ)}}}},gQ=(e,t)=>{const r=async(n,a)=>{Mo(t);let s=()=>{};const d=[new Promise((f,h)=>{let p=e({predicate:n,effect:(g,y)=>{y.unsubscribe(),f([g,y.getState(),y.getOriginalState()])}});s=()=>{p(),h()}})];a!=null&&d.push(new Promise(f=>setTimeout(f,a,null)));try{const f=await UM(t,Promise.race(d));return Mo(t),f}finally{s()}};return(n,a)=>BM(r(n,a))},qM=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=ea(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Pn(21));return h1(s),{predicate:a,type:t,effect:s}},FM=lc(e=>{const{type:t,predicate:r,effect:n}=qM(e);return{id:eQ(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Pn(22))}}},{withTypes:()=>FM}),gC=(e,t)=>{const{type:r,effect:n,predicate:a}=qM(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},Lx=e=>{e.pending.forEach(t=>{t.abort(Ix)})},yQ=(e,t)=>()=>{for(const r of t.keys())Lx(r);e.clear()},yC=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},KM=lc(ea(`${rg}/add`),{withTypes:()=>KM}),vQ=ea(`${rg}/removeAll`),QM=lc(ea(`${rg}/remove`),{withTypes:()=>QM}),bQ=(...e)=>{console.error(`${rg}/error`,...e)},cf=(e={})=>{const t=new Map,r=new Map,n=v=>{const j=r.get(v)??0;r.set(v,j+1)},a=v=>{const j=r.get(v)??1;j===1?r.delete(v):r.set(v,j-1)},{extra:s,onError:l=bQ}=e;h1(l);const d=v=>(v.unsubscribe=()=>t.delete(v.id),t.set(v.id,v),j=>{v.unsubscribe(),j!=null&&j.cancelActive&&Lx(v)}),f=v=>{const j=gC(t,v)??FM(v);return d(j)};lc(f,{withTypes:()=>f});const h=v=>{const j=gC(t,v);return j&&(j.unsubscribe(),v.cancelActive&&Lx(j)),!!j};lc(h,{withTypes:()=>h});const p=async(v,j,S,_)=>{const N=new AbortController,O=gQ(f,N.signal),E=[];try{v.pending.add(N),n(v),await Promise.resolve(v.effect(j,lc({},S,{getOriginalState:_,condition:(C,D)=>O(C,D).then(Boolean),take:O,delay:zM(N.signal),pause:Vm(N.signal),extra:s,signal:N.signal,fork:pQ(N.signal,E),unsubscribe:v.unsubscribe,subscribe:()=>{t.set(v.id,v)},cancelActiveListeners:()=>{v.pending.forEach((C,D,T)=>{C!==N&&(C.abort(Ix),T.delete(C))})},cancel:()=>{N.abort(Ix),v.pending.delete(N)},throwIfCancelled:()=>{Mo(N.signal)}})))}catch(C){C instanceof tg||yC(l,C,{raisedBy:"effect"})}finally{await Promise.all(E),N.abort(hQ),a(v),v.pending.delete(N)}},g=yQ(t,r);return{middleware:v=>j=>S=>{if(!xM(S))return j(S);if(KM.match(S))return f(S.payload);if(vQ.match(S)){g();return}if(QM.match(S))return h(S.payload);let _=v.getState();const N=()=>{if(_===pC)throw new Error(Pn(23));return _};let O;try{if(O=j(S),t.size>0){const E=v.getState(),C=Array.from(t.values());for(const D of C){let T=!1;try{T=D.predicate(S,E,_)}catch(M){T=!1,yC(l,M,{raisedBy:"predicate"})}T&&p(D,S,v,N)}}}finally{_=pC}return O},startListening:f,stopListening:h,clearListeners:g}};function Pn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var xQ={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},HM=gn({name:"chartLayout",initialState:xQ,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,a,s;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(a=t.payload.bottom)!==null&&a!==void 0?a:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:wQ,setLayout:jQ,setChartSize:SQ,setScale:_Q}=HM.actions,NQ=HM.reducer;function VM(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function nt(e){return Number.isFinite(e)}function za(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function vC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ic(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vC(Object(r),!0).forEach(function(n){OQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OQ(e,t,r){return(t=EQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EQ(e){var t=AQ(e,"string");return typeof t=="symbol"?t:t+""}function AQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nt(e,t,r){return Qt(e)||Qt(t)?r:Ua(t)?qo(e,t,r):typeof t=="function"?t(e):r}var CQ=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:l,layout:d}=t;if((d==="vertical"||d==="horizontal"&&l==="middle")&&s!=="center"&&Ee(e[s]))return ic(ic({},e),{},{[s]:e[s]+(n||0)});if((d==="horizontal"||d==="vertical"&&s==="center")&&l!=="middle"&&Ee(e[l]))return ic(ic({},e),{},{[l]:e[l]+(a||0)})}return e},Ri=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",GM=(e,t,r,n)=>{if(n)return e.map(d=>d.coordinate);var a,s,l=e.map(d=>(d.coordinate===t&&(a=!0),d.coordinate===r&&(s=!0),d.coordinate));return a||l.push(t),s||l.push(r),l},YM=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:l,realScaleType:d,isCategorical:f,categoricalDomain:h,tickCount:p,ticks:g,niceTicks:y,axisType:v}=e;if(!l)return null;var j=d==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,S=a==="category"&&l.bandwidth?l.bandwidth()/j:0;if(S=v==="angleAxis"&&s&&s.length>=2?Or(s[0]-s[1])*2*S:S,g||y){var _=(g||y||[]).map((N,O)=>{var E=n?n.indexOf(N):N,C=l.map(E);return nt(C)?{coordinate:C+S,value:N,offset:S,index:O}:null}).filter(mn);return _}return f&&h?h.map((N,O)=>{var E=l.map(N);return nt(E)?{coordinate:E+S,value:N,index:O,offset:S}:null}).filter(mn):l.ticks&&p!=null?l.ticks(p).map((N,O)=>{var E=l.map(N);return nt(E)?{coordinate:E+S,value:N,index:O,offset:S}:null}).filter(mn):l.domain().map((N,O)=>{var E=l.map(N);return nt(E)?{coordinate:E+S,value:n?n[N]:N,index:O,offset:S}:null}).filter(mn)},PQ=(e,t)=>{if(!t||t.length!==2||!Ee(t[0])||!Ee(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!Ee(e[0])||e[0]<r)&&(a[0]=r),(!Ee(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},kQ=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,l=0,d=0;d<r;++d){var f=e[d],h=f==null?void 0:f[a];if(h!=null){var p=h[1],g=h[0],y=$a(p)?g:p;y>=0?(h[0]=s,s+=y,h[1]=s):(h[0]=l,l+=y,h[1]=l)}}}},TQ=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,l=0;l<r;++l){var d=e[l],f=d==null?void 0:d[a];if(f!=null){var h=$a(f[1])?f[0]:f[1];h>=0?(f[0]=s,s+=h,f[1]=s):(f[0]=0,f[1]=0)}}}},DQ={sign:kQ,expand:J7,none:zo,silhouette:eF,wiggle:tF,positive:TQ},MQ=(e,t,r)=>{var n,a=(n=DQ[r])!==null&&n!==void 0?n:zo,s=Z7().keys(t).value((d,f)=>Number(Nt(d,f,0))).order(Ox).offset(a),l=s(e);return l.forEach((d,f)=>{d.forEach((h,p)=>{var g=Nt(e[p],t[f],0);Array.isArray(g)&&g.length===2&&Ee(g[0])&&Ee(g[1])&&(h[0]=g[0],h[1]=g[1])})}),l};function RQ(e){return e==null?void 0:String(e)}function bC(e){var{axis:t,ticks:r,bandSize:n,entry:a,index:s,dataKey:l}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Qt(a[t.dataKey])){var d=tM(r,"value",a[t.dataKey]);if(d)return d.coordinate+n/2}return r!=null&&r[s]?r[s].coordinate+n/2:null}var f=Nt(a,Qt(l)?t.dataKey:l),h=t.scale.map(f);return Ee(h)?h:null}var xC=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:l}=e;if(t.type==="category")return r[l]?r[l].coordinate+n:null;var d=Nt(s,t.dataKey,t.scale.domain()[l]);if(Qt(d))return null;var f=t.scale.map(d);return Ee(f)?f-a/2+n:null},IQ=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},LQ=e=>{var t=e.flat(2).filter(Ee);return[Math.min(...t),Math.max(...t)]},BQ=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],$Q=(e,t,r)=>{if(e!=null)return BQ(Object.keys(e).reduce((n,a)=>{var s=e[a];if(!s)return n;var{stackedData:l}=s,d=l.reduce((f,h)=>{var p=VM(h,t,r),g=LQ(p);return!nt(g[0])||!nt(g[1])?f:[Math.min(f[0],g[0]),Math.max(f[1],g[1])]},[1/0,-1/0]);return[Math.min(d[0],n[0]),Math.max(d[1],n[1])]},[1/0,-1/0]))},wC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,jC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Cc=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=Vp(t,p=>p.coordinate),s=1/0,l=1,d=a.length;l<d;l++){var f=a[l],h=a[l-1];s=Math.min(((f==null?void 0:f.coordinate)||0)-((h==null?void 0:h.coordinate)||0),s)}return s===1/0?0:s}return r?void 0:0};function SC(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return ic(ic({},t),{},{dataKey:r,payload:n,value:a,name:s})}function Fc(e,t){if(e)return String(e);if(typeof t=="string")return t}var UQ=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},zQ=(e,t)=>t==="centric"?e.angle:e.radius,Ii=e=>e.layout.width,Li=e=>e.layout.height,qQ=e=>e.layout.scale,WM=e=>e.layout.margin,ng=X(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),ag=X(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),XM="data-recharts-item-index",ZM="data-recharts-item-id",uf=60;function _C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_C(Object(r),!0).forEach(function(n){FQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_C(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FQ(e,t,r){return(t=KQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KQ(e){var t=QQ(e,"string");return typeof t=="symbol"?t:t+""}function QQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HQ=e=>e.brush.height;function VQ(e){var t=ag(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:uf;return r+a}return r},0)}function GQ(e){var t=ag(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:uf;return r+a}return r},0)}function YQ(e){var t=ng(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function WQ(e){var t=ng(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var yr=X([Ii,Li,WM,HQ,VQ,GQ,YQ,WQ,gM,jK],(e,t,r,n,a,s,l,d,f,h)=>{var p={left:(r.left||0)+a,right:(r.right||0)+s},g={top:(r.top||0)+l,bottom:(r.bottom||0)+d},y=sm(sm({},g),p),v=y.bottom;y.bottom+=n,y=CQ(y,f,h);var j=e-y.left-y.right,S=t-y.top-y.bottom;return sm(sm({brushBottom:v},y),{},{width:Math.max(j,0),height:Math.max(S,0)})}),XQ=X(yr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),m1=X(Ii,Li,(e,t)=>({x:0,y:0,width:e,height:t})),ZQ=x.createContext(null),Yr=()=>x.useContext(ZQ)!=null,ig=e=>e.brush,sg=X([ig,yr,WM],(e,t,r)=>({height:e.height,x:Ee(e.x)?e.x:t.left,y:Ee(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Ee(e.width)?e.width:t.width})),fb={},hb={},mb={},NC;function JQ(){return NC||(NC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:s}={}){let l,d=null;const f=s!=null&&s.includes("leading"),h=s==null||s.includes("trailing"),p=()=>{d!==null&&(r.apply(l,d),l=void 0,d=null)},g=()=>{h&&p(),S()};let y=null;const v=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,g()},n)},j=()=>{y!==null&&(clearTimeout(y),y=null)},S=()=>{j(),l=void 0,d=null},_=()=>{p()},N=function(...O){if(a!=null&&a.aborted)return;l=this,d=O;const E=y==null;v(),f&&E&&p()};return N.schedule=v,N.cancel=S,N.flush=_,a==null||a.addEventListener("abort",S,{once:!0}),N}e.debounce=t})(mb)),mb}var OC;function eH(){return OC||(OC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JQ();function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:l=!1,trailing:d=!0,maxWait:f}=s,h=Array(2);l&&(h[0]="leading"),d&&(h[1]="trailing");let p,g=null;const y=t.debounce(function(...S){p=n.apply(this,S),g=null},a,{edges:h}),v=function(...S){return f!=null&&(g===null&&(g=Date.now()),Date.now()-g>=f)?(p=n.apply(this,S),g=Date.now(),y.cancel(),y.schedule(),p):(y.apply(this,S),p)},j=()=>(y.flush(),p);return v.cancel=y.cancel,v.flush=j,v}e.debounce=r})(hb)),hb}var EC;function tH(){return EC||(EC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eH();function r(n,a=0,s={}){const{leading:l=!0,trailing:d=!0}=s;return t.debounce(n,a,{leading:l,maxWait:a,trailing:d})}e.throttle=r})(fb)),fb}var pb,AC;function rH(){return AC||(AC=1,pb=tH().throttle),pb}var nH=rH();const aH=Fa(nH);var Gm=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=0;console.warn(r.replace(/%s/g,()=>a[l++]))}},Ia={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},JM=(e,t,r)=>{var{width:n=Ia.width,height:a=Ia.height,aspect:s,maxHeight:l}=r,d=Fo(n)?e:Number(n),f=Fo(a)?t:Number(a);return s&&s>0&&(d?f=d/s:f&&(d=f*s),l&&f!=null&&f>l&&(f=l)),{calculatedWidth:d,calculatedHeight:f}},iH={width:0,height:0,overflow:"visible"},sH={width:0,overflowX:"visible"},oH={height:0,overflowY:"visible"},lH={},cH=e=>{var{width:t,height:r}=e,n=Fo(t),a=Fo(r);return n&&a?iH:n?sH:a?oH:lH};function uH(e){var{width:t,height:r,aspect:n}=e,a=t,s=r;return a===void 0&&s===void 0?(a=Ia.width,s=Ia.height):a===void 0?a=n&&n>0?void 0:Ia.width:s===void 0&&(s=n&&n>0?void 0:Ia.height),{width:a,height:s}}function Bx(){return Bx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bx.apply(null,arguments)}function CC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function PC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CC(Object(r),!0).forEach(function(n){dH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dH(e,t,r){return(t=fH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fH(e){var t=hH(e,"string");return typeof t=="symbol"?t:t+""}function hH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eR=x.createContext(Ia.initialDimension);function mH(e){return za(e.width)&&za(e.height)}function tR(e){var{children:t,width:r,height:n}=e,a=x.useMemo(()=>({width:r,height:n}),[r,n]);return mH(a)?x.createElement(eR.Provider,{value:a},t):null}var p1=()=>x.useContext(eR),pH=x.forwardRef((e,t)=>{var{aspect:r,initialDimension:n=Ia.initialDimension,width:a,height:s,minWidth:l=Ia.minWidth,minHeight:d,maxHeight:f,children:h,debounce:p=Ia.debounce,id:g,className:y,onResize:v,style:j={}}=e,S=x.useRef(null),_=x.useRef();_.current=v,x.useImperativeHandle(t,()=>S.current);var[N,O]=x.useState({containerWidth:n.width,containerHeight:n.height}),E=x.useCallback((R,U)=>{O(Y=>{var K=Math.round(R),z=Math.round(U);return Y.containerWidth===K&&Y.containerHeight===z?Y:{containerWidth:K,containerHeight:z}})},[]);x.useEffect(()=>{if(S.current==null||typeof ResizeObserver>"u")return Xo;var R=z=>{var pe,le=z[0];if(le!=null){var{width:ge,height:I}=le.contentRect;E(ge,I),(pe=_.current)===null||pe===void 0||pe.call(_,ge,I)}};p>0&&(R=aH(R,p,{trailing:!0,leading:!1}));var U=new ResizeObserver(R),{width:Y,height:K}=S.current.getBoundingClientRect();return E(Y,K),U.observe(S.current),()=>{U.disconnect()}},[E,p]);var{containerWidth:C,containerHeight:D}=N;Gm(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:T,calculatedHeight:M}=JM(C,D,{width:a,height:s,aspect:r,maxHeight:f});return Gm(T!=null&&T>0||M!=null&&M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,M,a,s,l,d,r),x.createElement("div",{id:g?"".concat(g):void 0,className:ot("recharts-responsive-container",y),style:PC(PC({},j),{},{width:a,height:s,minWidth:l,minHeight:d,maxHeight:f}),ref:S},x.createElement("div",{style:cH({width:a,height:s})},x.createElement(tR,{width:T,height:M},h)))}),cc=x.forwardRef((e,t)=>{var r=p1();if(za(r.width)&&za(r.height))return e.children;var{width:n,height:a}=uH({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:s,calculatedHeight:l}=JM(void 0,void 0,{width:n,height:a,aspect:e.aspect,maxHeight:e.maxHeight});return Ee(s)&&Ee(l)?x.createElement(tR,{width:s,height:l},e.children):x.createElement(pH,Bx({},e,{width:n,height:a,ref:t}))});function g1(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var og=()=>{var e,t=Yr(),r=Pe(XQ),n=Pe(sg),a=(e=Pe(ig))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},gH={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},rR=()=>{var e;return(e=Pe(yr))!==null&&e!==void 0?e:gH},y1=()=>Pe(Ii),v1=()=>Pe(Li),yH=()=>Pe(e=>e.layout.margin),ct=e=>e.layout.layoutType,Zo=()=>Pe(ct),nR=()=>{var e=Zo();if(e==="horizontal"||e==="vertical")return e},aR=e=>{var t=e.layout.layoutType;if(t==="centric"||t==="radial")return t},vH=()=>{var e=Zo();return e!==void 0},df=e=>{var t=kt(),r=Yr(),{width:n,height:a}=e,s=p1(),l=n,d=a;return s&&(l=s.width>0?s.width:n,d=s.height>0?s.height:a),x.useEffect(()=>{!r&&za(l)&&za(d)&&t(SQ({width:l,height:d}))},[t,r,l,d]),null},iR=Symbol.for("immer-nothing"),kC=Symbol.for("immer-draftable"),Tn=Symbol.for("immer-state");function ha(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Nd=Object.getPrototypeOf;function Pc(e){return!!e&&!!e[Tn]}function Qo(e){var t;return e?sR(e)||Array.isArray(e)||!!e[kC]||!!((t=e.constructor)!=null&&t[kC])||ff(e)||cg(e):!1}var bH=Object.prototype.constructor.toString(),TC=new WeakMap;function sR(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=TC.get(r);return n===void 0&&(n=Function.toString.call(r),TC.set(r,n)),n===bH}function Ym(e,t,r=!0){lg(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function lg(e){const t=e[Tn];return t?t.type_:Array.isArray(e)?1:ff(e)?2:cg(e)?3:0}function $x(e,t){return lg(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function oR(e,t,r){const n=lg(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function xH(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function ff(e){return e instanceof Map}function cg(e){return e instanceof Set}function mo(e){return e.copy_||e.base_}function Ux(e,t){if(ff(e))return new Map(e);if(cg(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=sR(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Tn];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const l=a[s],d=n[l];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(n[l]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[l]})}return Object.create(Nd(e),n)}else{const n=Nd(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function b1(e,t=!1){return ug(e)||Pc(e)||!Qo(e)||(lg(e)>1&&Object.defineProperties(e,{set:om,add:om,clear:om,delete:om}),Object.freeze(e),t&&Object.values(e).forEach(r=>b1(r,!0))),e}function wH(){ha(2)}var om={value:wH};function ug(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var jH={};function Ho(e){const t=jH[e];return t||ha(0,e),t}var Od;function lR(){return Od}function SH(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function DC(e,t){t&&(Ho("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function zx(e){qx(e),e.drafts_.forEach(_H),e.drafts_=null}function qx(e){e===Od&&(Od=e.parent_)}function MC(e){return Od=SH(Od,e)}function _H(e){const t=e[Tn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function RC(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Tn].modified_&&(zx(t),ha(4)),Qo(e)&&(e=Wm(t,e),t.parent_||Xm(t,e)),t.patches_&&Ho("Patches").generateReplacementPatches_(r[Tn].base_,e,t.patches_,t.inversePatches_)):e=Wm(t,r,[]),zx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==iR?e:void 0}function Wm(e,t,r){if(ug(t))return t;const n=e.immer_.shouldUseStrictIteration(),a=t[Tn];if(!a)return Ym(t,(s,l)=>IC(e,a,t,s,l,r),n),t;if(a.scope_!==e)return t;if(!a.modified_)return Xm(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let l=s,d=!1;a.type_===3&&(l=new Set(s),s.clear(),d=!0),Ym(l,(f,h)=>IC(e,a,s,f,h,r,d),n),Xm(e,s,!1),r&&e.patches_&&Ho("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function IC(e,t,r,n,a,s,l){if(a==null||typeof a!="object"&&!l)return;const d=ug(a);if(!(d&&!l)){if(Pc(a)){const f=s&&t&&t.type_!==3&&!$x(t.assigned_,n)?s.concat(n):void 0,h=Wm(e,a,f);if(oR(r,n,h),Pc(h))e.canAutoFreeze_=!1;else return}else l&&r.add(a);if(Qo(a)&&!d){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===a&&d)return;Wm(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(ff(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Xm(e,a)}}}function Xm(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&b1(t,r)}function NH(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:lR(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=x1;r&&(a=[n],s=Ed);const{revoke:l,proxy:d}=Proxy.revocable(a,s);return n.draft_=d,n.revoke_=l,d}var x1={get(e,t){if(t===Tn)return e;const r=mo(e);if(!$x(r,t))return OH(e,r,t);const n=r[t];return e.finalized_||!Qo(n)?n:n===gb(e.base_,t)?(yb(e),e.copy_[t]=Kx(n,e)):n},has(e,t){return t in mo(e)},ownKeys(e){return Reflect.ownKeys(mo(e))},set(e,t,r){const n=cR(mo(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=gb(mo(e),t),s=a==null?void 0:a[Tn];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(xH(r,a)&&(r!==void 0||$x(e.base_,t)))return!0;yb(e),Fx(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return gb(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,yb(e),Fx(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=mo(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){ha(11)},getPrototypeOf(e){return Nd(e.base_)},setPrototypeOf(){ha(12)}},Ed={};Ym(x1,(e,t)=>{Ed[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ed.deleteProperty=function(e,t){return Ed.set.call(this,e,t,void 0)};Ed.set=function(e,t,r){return x1.set.call(this,e[0],t,r,e[0])};function gb(e,t){const r=e[Tn];return(r?mo(r):e)[t]}function OH(e,t,r){var a;const n=cR(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function cR(e,t){if(!(t in e))return;let r=Nd(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Nd(r)}}function Fx(e){e.modified_||(e.modified_=!0,e.parent_&&Fx(e.parent_))}function yb(e){e.copy_||(e.copy_=Ux(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var EH=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const l=this;return function(f=s,...h){return l.produce(f,p=>r.call(this,p,...h))}}typeof r!="function"&&ha(6),n!==void 0&&typeof n!="function"&&ha(7);let a;if(Qo(t)){const s=MC(this),l=Kx(t,void 0);let d=!0;try{a=r(l),d=!1}finally{d?zx(s):qx(s)}return DC(s,n),RC(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===iR&&(a=void 0),this.autoFreeze_&&b1(a,!0),n){const s=[],l=[];Ho("Patches").generateReplacementPatches_(t,a,s,l),n(s,l)}return a}else ha(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...d)=>this.produceWithPatches(l,f=>t(f,...d));let n,a;return[this.produce(t,r,(l,d)=>{n=l,a=d}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Qo(e)||ha(8),Pc(e)&&(e=AH(e));const t=MC(this),r=Kx(e,void 0);return r[Tn].isManual_=!0,qx(t),r}finishDraft(e,t){const r=e&&e[Tn];(!r||!r.isManual_)&&ha(9);const{scope_:n}=r;return DC(n,t),RC(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=Ho("Patches").applyPatches_;return Pc(e)?n(e,t):this.produce(e,a=>n(a,t))}};function Kx(e,t){const r=ff(e)?Ho("MapSet").proxyMap_(e,t):cg(e)?Ho("MapSet").proxySet_(e,t):NH(e,t);return(t?t.scope_:lR()).drafts_.push(r),r}function AH(e){return Pc(e)||ha(10,e),uR(e)}function uR(e){if(!Qo(e)||ug(e))return e;const t=e[Tn];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Ux(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Ux(e,!0);return Ym(r,(a,s)=>{oR(r,a,uR(s))},n),t&&(t.finalized_=!1),r}var CH=new EH;CH.produce;var PH={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},dR=gn({name:"legend",initialState:PH,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Lt()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,a=pa(e).payload.indexOf(r);a>-1&&(e.payload[a]=n)},prepare:Lt()},removeLegendPayload:{reducer(e,t){var r=pa(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Lt()}}}),{setLegendSize:LC,setLegendSettings:kH,addLegendPayload:fR,replaceLegendPayload:hR,removeLegendPayload:mR}=dR.actions,TH=dR.reducer,DH=["contextPayload"];function Qx(){return Qx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qx.apply(null,arguments)}function BC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function kc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BC(Object(r),!0).forEach(function(n){MH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MH(e,t,r){return(t=RH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RH(e){var t=IH(e,"string");return typeof t=="symbol"?t:t+""}function IH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LH(e,t){if(e==null)return{};var r,n,a=BH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function BH(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function $H(e){return e.value}function UH(e){var{contextPayload:t}=e,r=LH(e,DH),n=fM(t,e.payloadUniqBy,$H),a=kc(kc({},r),{},{payload:n});return x.isValidElement(e.content)?x.cloneElement(e.content,a):typeof e.content=="function"?x.createElement(e.content,a):x.createElement(PF,a)}function zH(e,t,r,n,a,s){var{layout:l,align:d,verticalAlign:f}=t,h,p;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(d==="center"&&l==="vertical"?h={left:((n||0)-s.width)/2}:h=d==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(f==="middle"?p={top:((a||0)-s.height)/2}:p=f==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),kc(kc({},h),p)}function qH(e){var t=kt();return x.useEffect(()=>{t(kH(e))},[t,e]),null}function FH(e){var t=kt();return x.useEffect(()=>(t(LC(e)),()=>{t(LC({width:0,height:0}))}),[t,e]),null}function KH(e,t,r,n){return e==="vertical"&&t!=null?{height:t}:e==="horizontal"?{width:r||n}:null}var QH={align:"center",iconSize:14,inactiveColor:"#ccc",itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function Ad(e){var t=dr(e,QH),r=NK(),n=j7(),a=yH(),{width:s,height:l,wrapperStyle:d,portal:f}=t,[h,p]=yM([r]),g=y1(),y=v1();if(g==null||y==null)return null;var v=g-((a==null?void 0:a.left)||0)-((a==null?void 0:a.right)||0),j=KH(t.layout,l,s,v),S=f?d:kc(kc({position:"absolute",width:(j==null?void 0:j.width)||s||"auto",height:(j==null?void 0:j.height)||l||"auto"},zH(d,t,a,g,y,h)),d),_=f??n;if(_==null||r==null)return null;var N=x.createElement("div",{className:"recharts-legend-wrapper",style:S,ref:p},x.createElement(qH,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!f&&x.createElement(FH,{width:h.width,height:h.height}),x.createElement(UH,Qx({},t,j,{margin:a,chartWidth:g,chartHeight:y,contextPayload:r})));return kp.createPortal(N,_)}Ad.displayName="Legend";function Hx(){return Hx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hx.apply(null,arguments)}function $C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Yu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$C(Object(r),!0).forEach(function(n){HH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$C(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HH(e,t,r){return(t=VH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VH(e){var t=GH(e,"string");return typeof t=="symbol"?t:t+""}function GH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YH(e){return Array.isArray(e)&&Ua(e[0])&&Ua(e[1])?e.join(" ~ "):e}var Wl={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},WH=e=>{var{separator:t=Wl.separator,contentStyle:r,itemStyle:n,labelStyle:a=Wl.labelStyle,payload:s,formatter:l,itemSorter:d,wrapperClassName:f,labelClassName:h,label:p,labelFormatter:g,accessibilityLayer:y=Wl.accessibilityLayer}=e,v=()=>{if(s&&s.length){var D={padding:0,margin:0},T=(d?Vp(s,d):s).map((M,R)=>{if(M.type==="none")return null;var U=M.formatter||l||YH,{value:Y,name:K}=M,z=Y,pe=K;if(U){var le=U(Y,K,M,R,s);if(Array.isArray(le))[z,pe]=le;else if(le!=null)z=le;else return null}var ge=Yu(Yu({},Wl.itemStyle),{},{color:M.color||Wl.itemStyle.color},n);return x.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:ge},Ua(pe)?x.createElement("span",{className:"recharts-tooltip-item-name"},pe):null,Ua(pe)?x.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,x.createElement("span",{className:"recharts-tooltip-item-value"},z),x.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return x.createElement("ul",{className:"recharts-tooltip-item-list",style:D},T)}return null},j=Yu(Yu({},Wl.contentStyle),r),S=Yu({margin:0},a),_=!Qt(p),N=_?p:"",O=ot("recharts-default-tooltip",f),E=ot("recharts-tooltip-label",h);_&&g&&s!==void 0&&s!==null&&(N=g(p,s));var C=y?{role:"status","aria-live":"assertive"}:{};return x.createElement("div",Hx({className:O,style:j},C),x.createElement("p",{className:E,style:S},x.isValidElement(N)?N:"".concat(N)),v())},Wu="recharts-tooltip-wrapper",XH={visibility:"hidden"};function ZH(e){var{coordinate:t,translateX:r,translateY:n}=e;return ot(Wu,{["".concat(Wu,"-right")]:Ee(r)&&t&&Ee(t.x)&&r>=t.x,["".concat(Wu,"-left")]:Ee(r)&&t&&Ee(t.x)&&r<t.x,["".concat(Wu,"-bottom")]:Ee(n)&&t&&Ee(t.y)&&n>=t.y,["".concat(Wu,"-top")]:Ee(n)&&t&&Ee(t.y)&&n<t.y})}function UC(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offset:a,position:s,reverseDirection:l,tooltipDimension:d,viewBox:f,viewBoxDimension:h}=e;if(s&&Ee(s[n]))return s[n];var p=r[n]-d-(a>0?a:0),g=r[n]+a;if(t[n])return l[n]?p:g;var y=f[n];if(y==null)return 0;if(l[n]){var v=p,j=y;return v<j?Math.max(g,y):Math.max(p,y)}if(h==null)return 0;var S=g+d,_=y+h;return S>_?Math.max(p,y):Math.max(g,y)}function JH(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function eV(e){var{allowEscapeViewBox:t,coordinate:r,offsetTop:n,offsetLeft:a,position:s,reverseDirection:l,tooltipBox:d,useTranslate3d:f,viewBox:h}=e,p,g,y;return d.height>0&&d.width>0&&r?(g=UC({allowEscapeViewBox:t,coordinate:r,key:"x",offset:a,position:s,reverseDirection:l,tooltipDimension:d.width,viewBox:h,viewBoxDimension:h.width}),y=UC({allowEscapeViewBox:t,coordinate:r,key:"y",offset:n,position:s,reverseDirection:l,tooltipDimension:d.height,viewBox:h,viewBoxDimension:h.height}),p=JH({translateX:g,translateY:y,useTranslate3d:f})):p=XH,{cssProperties:p,cssClasses:ZH({translateX:g,translateY:y,coordinate:r})}}function zC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zC(Object(r),!0).forEach(function(n){Vx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vx(e,t,r){return(t=tV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tV(e){var t=rV(e,"string");return typeof t=="symbol"?t:t+""}function rV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class nV extends x.PureComponent{constructor(){super(...arguments),Vx(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Vx(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:l,hasPayload:d,isAnimationActive:f,offset:h,position:p,reverseDirection:g,useTranslate3d:y,viewBox:v,wrapperStyle:j,lastBoundingBox:S,innerRef:_,hasPortalFromProps:N}=this.props,O=typeof h=="number"?h:h.x,E=typeof h=="number"?h:h.y,{cssClasses:C,cssProperties:D}=eV({allowEscapeViewBox:r,coordinate:l,offsetLeft:O,offsetTop:E,position:p,reverseDirection:g,tooltipBox:{height:S.height,width:S.width},useTranslate3d:y,viewBox:v}),T=N?{}:lm(lm({transition:f&&t?"transform ".concat(n,"ms ").concat(a):void 0},D),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&d?"visible":"hidden",position:"absolute",top:0,left:0}),M=lm(lm({},T),{},{visibility:!this.state.dismissed&&t&&d?"visible":"hidden"},j);return x.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:M,ref:_},s)}}var pR=()=>{var e;return(e=Pe(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Gx(){return Gx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gx.apply(null,arguments)}function qC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function FC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qC(Object(r),!0).forEach(function(n){aV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aV(e,t,r){return(t=iV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iV(e){var t=sV(e,"string");return typeof t=="symbol"?t:t+""}function sV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KC={curveBasisClosed:z7,curveBasisOpen:q7,curveBasis:U7,curveBumpX:O7,curveBumpY:E7,curveLinearClosed:F7,curveLinear:Qp,curveMonotoneX:K7,curveMonotoneY:Q7,curveNatural:H7,curveStep:V7,curveStepAfter:Y7,curveStepBefore:G7},Zm=e=>nt(e.x)&&nt(e.y),QC=e=>e.base!=null&&Zm(e.base)&&Zm(e),Xu=e=>e.x,Zu=e=>e.y,oV=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(sf(e));if((r==="curveMonotone"||r==="curveBump")&&t){var n=KC["".concat(r).concat(t==="vertical"?"Y":"X")];if(n)return n}return KC[r]||Qp},HC={connectNulls:!1,type:"linear"},lV=e=>{var{type:t=HC.type,points:r=[],baseLine:n,layout:a,connectNulls:s=HC.connectNulls}=e,l=oV(t,a),d=s?r.filter(Zm):r;if(Array.isArray(n)){var f,h=r.map((j,S)=>FC(FC({},j),{},{base:n[S]}));a==="vertical"?f=em().y(Zu).x1(Xu).x0(j=>j.base.x):f=em().x(Xu).y1(Zu).y0(j=>j.base.y);var p=f.defined(QC).curve(l),g=s?h.filter(QC):h;return p(g)}var y;a==="vertical"&&Ee(n)?y=em().y(Zu).x1(Xu).x0(n):Ee(n)?y=em().x(Xu).y1(Zu).y0(n):y=qD().x(Xu).y(Zu);var v=y.defined(Zm).curve(l);return v(d)},w1=e=>{var{className:t,points:r,path:n,pathRef:a}=e,s=Zo();if((!r||!r.length)&&!n)return null;var l={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||s,connectNulls:e.connectNulls},d=r&&r.length?lV(l):n;return x.createElement("path",Gx({},kn(e),a1(e),{className:ot("recharts-curve",t),d:d===null?void 0:d,ref:a}))},cV=["x","y","top","left","width","height","className"];function Yx(){return Yx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yx.apply(null,arguments)}function VC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function uV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VC(Object(r),!0).forEach(function(n){dV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dV(e,t,r){return(t=fV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fV(e){var t=hV(e,"string");return typeof t=="symbol"?t:t+""}function hV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mV(e,t){if(e==null)return{};var r,n,a=pV(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var gV=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),yV=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:l=0,className:d}=e,f=mV(e,cV),h=uV({x:t,y:r,top:n,left:a,width:s,height:l},f);return!Ee(t)||!Ee(r)||!Ee(s)||!Ee(l)||!Ee(n)||!Ee(a)?null:x.createElement("path",Yx({},tn(h),{className:ot("recharts-cross",d),d:gV(t,r,s,l,n,a)}))};function vV(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function GC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function YC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GC(Object(r),!0).forEach(function(n){bV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bV(e,t,r){return(t=xV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xV(e){var t=wV(e,"string");return typeof t=="symbol"?t:t+""}function wV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jV=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),gR=(e,t,r)=>e.map(n=>"".concat(jV(n)," ").concat(t,"ms ").concat(r)).join(","),SV=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),Cd=(e,t)=>Object.keys(t).reduce((r,n)=>YC(YC({},r),{},{[n]:e(n,t[n])}),{});function WC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WC(Object(r),!0).forEach(function(n){_V(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _V(e,t,r){return(t=NV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NV(e){var t=OV(e,"string");return typeof t=="symbol"?t:t+""}function OV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jm=(e,t,r)=>e+(t-e)*r,Wx=e=>{var{from:t,to:r}=e;return t!==r},yR=(e,t,r)=>{var n=Cd((a,s)=>{if(Wx(s)){var[l,d]=e(s.from,s.to,s.velocity);return pr(pr({},s),{},{from:l,velocity:d})}return s},t);return r<1?Cd((a,s)=>Wx(s)&&n[a]!=null?pr(pr({},s),{},{velocity:Jm(s.velocity,n[a].velocity,r),from:Jm(s.from,n[a].from,r)}):s,t):yR(e,n,r-1)};function EV(e,t,r,n,a,s){var l,d=n.reduce((y,v)=>pr(pr({},y),{},{[v]:{from:e[v],velocity:0,to:t[v]}}),{}),f=()=>Cd((y,v)=>v.from,d),h=()=>!Object.values(d).filter(Wx).length,p=null,g=y=>{l||(l=y);var v=y-l,j=v/r.dt;d=yR(r,d,j),a(pr(pr(pr({},e),t),f())),l=y,h()||(p=s.setTimeout(g))};return()=>(p=s.setTimeout(g),()=>{var y;(y=p)===null||y===void 0||y()})}function AV(e,t,r,n,a,s,l){var d=null,f=a.reduce((g,y)=>{var v=e[y],j=t[y];return v==null||j==null?g:pr(pr({},g),{},{[y]:[v,j]})},{}),h,p=g=>{h||(h=g);var y=(g-h)/n,v=Cd((S,_)=>Jm(..._,r(y)),f);if(s(pr(pr(pr({},e),t),v)),y<1)d=l.setTimeout(p);else{var j=Cd((S,_)=>Jm(..._,r(1)),f);s(pr(pr(pr({},e),t),j))}};return()=>(d=l.setTimeout(p),()=>{var g;(g=d)===null||g===void 0||g()})}const CV=(e,t,r,n,a,s)=>{var l=SV(e,t);return r==null?()=>(a(pr(pr({},e),t)),()=>{}):r.isStepper===!0?EV(e,t,r,l,a,s):AV(e,t,r,n,l,a,s)};var ep=1e-4,vR=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],bR=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),XC=(e,t)=>r=>{var n=vR(e,t);return bR(n,r)},PV=(e,t)=>r=>{var n=vR(e,t),a=[...n.map((s,l)=>s*l).slice(1),0];return bR(a,r)},kV=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(n==null||n.length!==4)return null;var a=n.map(s=>parseFloat(s));return[a[0],a[1],a[2],a[3]]},TV=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a=kV(r[0]);if(a)return a}}return r.length===4?r:[0,0,1,1]},DV=(e,t,r,n)=>{var a=XC(e,r),s=XC(t,n),l=PV(e,r),d=h=>h>1?1:h<0?0:h,f=h=>{for(var p=h>1?1:h,g=p,y=0;y<8;++y){var v=a(g)-p,j=l(g);if(Math.abs(v-p)<ep||j<ep)return s(g);g=d(g-v/j)}return s(g)};return f.isStepper=!1,f},ZC=function(){return DV(...TV(...arguments))},MV=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,s=(l,d,f)=>{var h=-(l-d)*r,p=f*n,g=f+(h-p)*a/1e3,y=f*a/1e3+l;return Math.abs(y-d)<ep&&Math.abs(g)<ep?[d,0]:[y,g]};return s.isStepper=!0,s.dt=a,s},RV=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return ZC(e);case"spring":return MV();default:if(e.split("(")[0]==="cubic-bezier")return ZC(e)}return typeof e=="function"?e:null};function IV(e){var t,r=()=>null,n=!1,a=null,s=l=>{if(!n){if(Array.isArray(l)){if(!l.length)return;var d=l,[f,...h]=d;if(typeof f=="number"){a=e.setTimeout(s.bind(null,h),f);return}s(f),a=e.setTimeout(s.bind(null,h));return}typeof l=="string"&&(t=l,r(t)),typeof l=="object"&&(t=l,r(t)),typeof l=="function"&&l()}};return{stop:()=>{n=!0},start:l=>{n=!1,a&&(a(),a=null),s(l)},subscribe:l=>(r=l,()=>{r=()=>null}),getTimeoutController:()=>e}}class LV{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=l=>{l-n>=r?t(l):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{a!=null&&cancelAnimationFrame(a)}}}function BV(){return IV(new LV)}var $V=x.createContext(BV);function UV(e,t){var r=x.useContext($V);return x.useMemo(()=>t??r(e),[e,t,r])}var zV=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),dg={isSsr:zV()},qV={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},JC={t:0},vb={t:1};function hf(e){var t=dr(e,qV),{isActive:r,canBegin:n,duration:a,easing:s,begin:l,onAnimationEnd:d,onAnimationStart:f,children:h}=t,p=r==="auto"?!dg.isSsr:r,g=UV(t.animationId,t.animationManager),[y,v]=x.useState(p?JC:vb),j=x.useRef(null);return x.useEffect(()=>{p||v(vb)},[p]),x.useEffect(()=>{if(!p||!n)return Xo;var S=CV(JC,vb,RV(s),a,v,g.getTimeoutController()),_=()=>{j.current=S()};return g.start([f,l,_,a,d]),()=>{g.stop(),j.current&&j.current(),d()}},[p,n,a,s,l,f,d,g]),h(y.t)}function mf(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=x.useRef(wd(t)),n=x.useRef(e);return n.current!==e&&(r.current=wd(t),n.current=e),r.current}var FV=["radius"],KV=["radius"],e2,t2,r2,n2,a2,i2,s2,o2,l2,c2;function u2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function d2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u2(Object(r),!0).forEach(function(n){QV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QV(e,t,r){return(t=HV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HV(e){var t=VV(e,"string");return typeof t=="symbol"?t:t+""}function VV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tp(){return tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tp.apply(null,arguments)}function f2(e,t){if(e==null)return{};var r,n,a=GV(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function GV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Aa(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var h2=(e,t,r,n,a)=>{var s=Cs(r),l=Cs(n),d=Math.min(Math.abs(s)/2,Math.abs(l)/2),f=l>=0?1:-1,h=s>=0?1:-1,p=l>=0&&s>=0||l<0&&s<0?1:0,g;if(d>0&&Array.isArray(a)){for(var y=[0,0,0,0],v=0,j=4;v<j;v++){var S,_=(S=a[v])!==null&&S!==void 0?S:0;y[v]=_>d?d:_}g=Zt(e2||(e2=Aa(["M",",",""])),e,t+f*y[0]),y[0]>0&&(g+=Zt(t2||(t2=Aa(["A ",",",",0,0,",",",",",""])),y[0],y[0],p,e+h*y[0],t)),g+=Zt(r2||(r2=Aa(["L ",",",""])),e+r-h*y[1],t),y[1]>0&&(g+=Zt(n2||(n2=Aa(["A ",",",",0,0,",`,
        `,",",""])),y[1],y[1],p,e+r,t+f*y[1])),g+=Zt(a2||(a2=Aa(["L ",",",""])),e+r,t+n-f*y[2]),y[2]>0&&(g+=Zt(i2||(i2=Aa(["A ",",",",0,0,",`,
        `,",",""])),y[2],y[2],p,e+r-h*y[2],t+n)),g+=Zt(s2||(s2=Aa(["L ",",",""])),e+h*y[3],t+n),y[3]>0&&(g+=Zt(o2||(o2=Aa(["A ",",",",0,0,",`,
        `,",",""])),y[3],y[3],p,e,t+n-f*y[3])),g+="Z"}else if(d>0&&a===+a&&a>0){var N=Math.min(d,a);g=Zt(l2||(l2=Aa(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+f*N,N,N,p,e+h*N,t,e+r-h*N,t,N,N,p,e+r,t+f*N,e+r,t+n-f*N,N,N,p,e+r-h*N,t+n,e+h*N,t+n,N,N,p,e,t+n-f*N)}else g=Zt(c2||(c2=Aa(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return g},m2={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},xR=e=>{var t=dr(e,m2),r=x.useRef(null),[n,a]=x.useState(-1);x.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var V=r.current.getTotalLength();V&&a(V)}catch{}},[]);var{x:s,y:l,width:d,height:f,radius:h,className:p}=t,{animationEasing:g,animationDuration:y,animationBegin:v,isAnimationActive:j,isUpdateAnimationActive:S}=t,_=x.useRef(d),N=x.useRef(f),O=x.useRef(s),E=x.useRef(l),C=x.useMemo(()=>({x:s,y:l,width:d,height:f,radius:h}),[s,l,d,f,h]),D=mf(C,"rectangle-");if(s!==+s||l!==+l||d!==+d||f!==+f||d===0||f===0)return null;var T=ot("recharts-rectangle",p);if(!S){var M=tn(t),{radius:R}=M,U=f2(M,FV);return x.createElement("path",tp({},U,{x:Cs(s),y:Cs(l),width:Cs(d),height:Cs(f),radius:typeof h=="number"?h:void 0,className:T,d:h2(s,l,d,f,h)}))}var Y=_.current,K=N.current,z=O.current,pe=E.current,le="0px ".concat(n===-1?1:n,"px"),ge="".concat(n,"px 0px"),I=gR(["strokeDasharray"],y,typeof g=="string"?g:m2.animationEasing);return x.createElement(hf,{animationId:D,key:D,canBegin:n>0,duration:y,easing:g,isActive:S,begin:v},V=>{var ae=Bt(Y,d,V),he=Bt(K,f,V),Q=Bt(z,s,V),P=Bt(pe,l,V);r.current&&(_.current=ae,N.current=he,O.current=Q,E.current=P);var B;j?V>0?B={transition:I,strokeDasharray:ge}:B={strokeDasharray:le}:B={strokeDasharray:ge};var W=tn(t),{radius:re}=W,G=f2(W,KV);return x.createElement("path",tp({},G,{radius:typeof h=="number"?h:void 0,className:T,d:h2(Q,P,ae,he,h),ref:r,style:d2(d2({},B),t.style)}))})};function p2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function g2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p2(Object(r),!0).forEach(function(n){YV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YV(e,t,r){return(t=WV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WV(e){var t=XV(e,"string");return typeof t=="symbol"?t:t+""}function XV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rp=Math.PI/180,ZV=e=>e*180/Math.PI,lr=(e,t,r,n)=>({x:e+Math.cos(-rp*n)*r,y:t+Math.sin(-rp*n)*r}),wR=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},JV=(e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)},eG=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,l=JV({x:r,y:n},{x:a,y:s});if(l<=0)return{radius:l,angle:0};var d=(r-a)/l,f=Math.acos(d);return n>s&&(f=2*Math.PI-f),{radius:l,angle:ZV(f),angleInRadian:f}},tG=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-s*360,endAngle:r-s*360}},rG=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360),l=Math.min(a,s);return e+l*360},nG=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:a,angle:s}=eG({x:r,y:n},t),{innerRadius:l,outerRadius:d}=t;if(a<l||a>d||a===0)return null;var{startAngle:f,endAngle:h}=tG(t),p=s,g;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;g=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;g=p>=h&&p<=f}return g?g2(g2({},t),{},{radius:a,angle:rG(p,t)}):null};function jR(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e,l=lr(t,r,n,a),d=lr(t,r,n,s);return{points:[l,d],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}var y2,v2,b2,x2,w2,j2,S2;function Xx(){return Xx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xx.apply(null,arguments)}function xo(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var aG=(e,t)=>{var r=Or(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},cm=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:l,cornerRadius:d,cornerIsExternal:f}=e,h=d*(l?1:-1)+n,p=Math.asin(d/h)/rp,g=f?a:a+s*p,y=lr(t,r,h,g),v=lr(t,r,n,g),j=f?a-s*p:a,S=lr(t,r,h*Math.cos(p*rp),j);return{center:y,circleTangency:v,lineTangency:S,theta:p}},SR=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:l}=e,d=aG(s,l),f=s+d,h=lr(t,r,a,s),p=lr(t,r,a,f),g=Zt(y2||(y2=xo(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),h.x,h.y,a,a,+(Math.abs(d)>180),+(s>f),p.x,p.y);if(n>0){var y=lr(t,r,n,s),v=lr(t,r,n,f);g+=Zt(v2||(v2=xo(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),v.x,v.y,n,n,+(Math.abs(d)>180),+(s<=f),y.x,y.y)}else g+=Zt(b2||(b2=xo(["L ",","," Z"])),t,r);return g},iG=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:d,startAngle:f,endAngle:h}=e,p=Or(h-f),{circleTangency:g,lineTangency:y,theta:v}=cm({cx:t,cy:r,radius:a,angle:f,sign:p,cornerRadius:s,cornerIsExternal:d}),{circleTangency:j,lineTangency:S,theta:_}=cm({cx:t,cy:r,radius:a,angle:h,sign:-p,cornerRadius:s,cornerIsExternal:d}),N=d?Math.abs(f-h):Math.abs(f-h)-v-_;if(N<0)return l?Zt(x2||(x2=xo(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),y.x,y.y,s,s,s*2,s,s,-s*2):SR({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:f,endAngle:h});var O=Zt(w2||(w2=xo(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),y.x,y.y,s,s,+(p<0),g.x,g.y,a,a,+(N>180),+(p<0),j.x,j.y,s,s,+(p<0),S.x,S.y);if(n>0){var{circleTangency:E,lineTangency:C,theta:D}=cm({cx:t,cy:r,radius:n,angle:f,sign:p,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),{circleTangency:T,lineTangency:M,theta:R}=cm({cx:t,cy:r,radius:n,angle:h,sign:-p,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),U=d?Math.abs(f-h):Math.abs(f-h)-D-R;if(U<0&&s===0)return"".concat(O,"L").concat(t,",").concat(r,"Z");O+=Zt(j2||(j2=xo(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),M.x,M.y,s,s,+(p<0),T.x,T.y,n,n,+(U>180),+(p>0),E.x,E.y,s,s,+(p<0),C.x,C.y)}else O+=Zt(S2||(S2=xo(["L",",","Z"])),t,r);return O},sG={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},_R=e=>{var t=dr(e,sG),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:l,forceCornerRadius:d,cornerIsExternal:f,startAngle:h,endAngle:p,className:g}=t;if(s<a||h===p)return null;var y=ot("recharts-sector",g),v=s-a,j=Vr(l,v,0,!0),S;return j>0&&Math.abs(h-p)<360?S=iG({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(j,v/2),forceCornerRadius:d,cornerIsExternal:f,startAngle:h,endAngle:p}):S=SR({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:h,endAngle:p}),x.createElement("path",Xx({},tn(t),{className:y,d:S}))};function oG(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(nM(t)){if(e==="centric"){var{cx:n,cy:a,innerRadius:s,outerRadius:l,angle:d}=t,f=lr(n,a,s,d),h=lr(n,a,l,d);return[{x:f.x,y:f.y},{x:h.x,y:h.y}]}return jR(t)}}var bb={},xb={},wb={},_2;function lG(){return _2||(_2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mM();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(wb)),wb}var N2;function cG(){return N2||(N2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lG();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(xb)),xb}var O2;function uG(){return O2||(O2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pM(),r=cG();function n(a,s,l){l&&typeof l!="number"&&t.isIterateeCall(a,s,l)&&(s=l=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),l=l===void 0?a<s?1:-1:r.toFinite(l);const d=Math.max(Math.ceil((s-a)/(l||1)),0),f=new Array(d);for(let h=0;h<d;h++)f[h]=a,a+=l;return f}e.range=n})(bb)),bb}var jb,E2;function dG(){return E2||(E2=1,jb=uG().range),jb}var fG=dG();const NR=Fa(fG);function ks(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function hG(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function j1(e){let t,r,n;e.length!==2?(t=ks,r=(d,f)=>ks(e(d),f),n=(d,f)=>e(d)-f):(t=e===ks||e===hG?e:mG,r=e,n=e);function a(d,f,h=0,p=d.length){if(h<p){if(t(f,f)!==0)return p;do{const g=h+p>>>1;r(d[g],f)<0?h=g+1:p=g}while(h<p)}return h}function s(d,f,h=0,p=d.length){if(h<p){if(t(f,f)!==0)return p;do{const g=h+p>>>1;r(d[g],f)<=0?h=g+1:p=g}while(h<p)}return h}function l(d,f,h=0,p=d.length){const g=a(d,f,h,p-1);return g>h&&n(d[g-1],f)>-n(d[g],f)?g-1:g}return{left:a,center:l,right:s}}function mG(){return 0}function OR(e){return e===null?NaN:+e}function*pG(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const gG=j1(ks),pf=gG.right;j1(OR).center;class A2 extends Map{constructor(t,r=bG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(C2(this,t))}has(t){return super.has(C2(this,t))}set(t,r){return super.set(yG(this,t),r)}delete(t){return super.delete(vG(this,t))}}function C2({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function yG({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function vG({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function bG(e){return e!==null&&typeof e=="object"?e.valueOf():e}function xG(e=ks){if(e===ks)return ER;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function ER(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const wG=Math.sqrt(50),jG=Math.sqrt(10),SG=Math.sqrt(2);function np(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),l=s>=wG?10:s>=jG?5:s>=SG?2:1;let d,f,h;return a<0?(h=Math.pow(10,-a)/l,d=Math.round(e*h),f=Math.round(t*h),d/h<e&&++d,f/h>t&&--f,h=-h):(h=Math.pow(10,a)*l,d=Math.round(e/h),f=Math.round(t/h),d*h<e&&++d,f*h>t&&--f),f<d&&.5<=r&&r<2?np(e,t,r*2):[d,f,h]}function Zx(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,l]=n?np(t,e,r):np(e,t,r);if(!(s>=a))return[];const d=s-a+1,f=new Array(d);if(n)if(l<0)for(let h=0;h<d;++h)f[h]=(s-h)/-l;else for(let h=0;h<d;++h)f[h]=(s-h)*l;else if(l<0)for(let h=0;h<d;++h)f[h]=(a+h)/-l;else for(let h=0;h<d;++h)f[h]=(a+h)*l;return f}function Jx(e,t,r){return t=+t,e=+e,r=+r,np(e,t,r)[2]}function ew(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?Jx(t,e,r):Jx(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function P2(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function k2(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function AR(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?ER:xG(a);n>r;){if(n-r>600){const f=n-r+1,h=t-r+1,p=Math.log(f),g=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*g*(f-g)/f)*(h-f/2<0?-1:1),v=Math.max(r,Math.floor(t-h*g/f+y)),j=Math.min(n,Math.floor(t+(f-h)*g/f+y));AR(e,t,v,j,a)}const s=e[t];let l=r,d=n;for(Ju(e,r,t),a(e[n],s)>0&&Ju(e,r,n);l<d;){for(Ju(e,l,d),++l,--d;a(e[l],s)<0;)++l;for(;a(e[d],s)>0;)--d}a(e[r],s)===0?Ju(e,r,d):(++d,Ju(e,d,n)),d<=t&&(r=d+1),t<=d&&(n=d-1)}return e}function Ju(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function _G(e,t,r){if(e=Float64Array.from(pG(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return k2(e);if(t>=1)return P2(e);var n,a=(n-1)*t,s=Math.floor(a),l=P2(AR(e,s).subarray(0,s+1)),d=k2(e.subarray(s+1));return l+(d-l)*(a-s)}}function NG(e,t,r=OR){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),l=+r(e[s],s,e),d=+r(e[s+1],s+1,e);return l+(d-l)*(a-s)}}function OG(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}function ra(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Bi(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const tw=Symbol("implicit");function S1(){var e=new A2,t=[],r=[],n=tw;function a(s){let l=e.get(s);if(l===void 0){if(n!==tw)return n;e.set(s,l=t.push(s)-1)}return r[l%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new A2;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return S1(t,r).unknown(n)},ra.apply(a,arguments),a}function _1(){var e=S1().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,l,d=!1,f=0,h=0,p=.5;delete e.unknown;function g(){var y=t().length,v=a<n,j=v?a:n,S=v?n:a;s=(S-j)/Math.max(1,y-f+h*2),d&&(s=Math.floor(s)),j+=(S-j-s*(y-f))*p,l=s*(1-f),d&&(j=Math.round(j),l=Math.round(l));var _=OG(y).map(function(N){return j+s*N});return r(v?_.reverse():_)}return e.domain=function(y){return arguments.length?(t(y),g()):t()},e.range=function(y){return arguments.length?([n,a]=y,n=+n,a=+a,g()):[n,a]},e.rangeRound=function(y){return[n,a]=y,n=+n,a=+a,d=!0,g()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(y){return arguments.length?(d=!!y,g()):d},e.padding=function(y){return arguments.length?(f=Math.min(1,h=+y),g()):f},e.paddingInner=function(y){return arguments.length?(f=Math.min(1,y),g()):f},e.paddingOuter=function(y){return arguments.length?(h=+y,g()):h},e.align=function(y){return arguments.length?(p=Math.max(0,Math.min(1,y)),g()):p},e.copy=function(){return _1(t(),[n,a]).round(d).paddingInner(f).paddingOuter(h).align(p)},ra.apply(g(),arguments)}function CR(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return CR(t())},e}function EG(){return CR(_1.apply(null,arguments).paddingInner(1))}function N1(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function PR(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function gf(){}var Pd=.7,ap=1/Pd,uc="\\s*([+-]?\\d+)\\s*",kd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ba="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",AG=/^#([0-9a-f]{3,8})$/,CG=new RegExp(`^rgb\\(${uc},${uc},${uc}\\)$`),PG=new RegExp(`^rgb\\(${Ba},${Ba},${Ba}\\)$`),kG=new RegExp(`^rgba\\(${uc},${uc},${uc},${kd}\\)$`),TG=new RegExp(`^rgba\\(${Ba},${Ba},${Ba},${kd}\\)$`),DG=new RegExp(`^hsl\\(${kd},${Ba},${Ba}\\)$`),MG=new RegExp(`^hsla\\(${kd},${Ba},${Ba},${kd}\\)$`),T2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};N1(gf,Td,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:D2,formatHex:D2,formatHex8:RG,formatHsl:IG,formatRgb:M2,toString:M2});function D2(){return this.rgb().formatHex()}function RG(){return this.rgb().formatHex8()}function IG(){return kR(this).formatHsl()}function M2(){return this.rgb().formatRgb()}function Td(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=AG.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?R2(t):r===3?new pn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?um(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?um(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=CG.exec(e))?new pn(t[1],t[2],t[3],1):(t=PG.exec(e))?new pn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=kG.exec(e))?um(t[1],t[2],t[3],t[4]):(t=TG.exec(e))?um(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=DG.exec(e))?B2(t[1],t[2]/100,t[3]/100,1):(t=MG.exec(e))?B2(t[1],t[2]/100,t[3]/100,t[4]):T2.hasOwnProperty(e)?R2(T2[e]):e==="transparent"?new pn(NaN,NaN,NaN,0):null}function R2(e){return new pn(e>>16&255,e>>8&255,e&255,1)}function um(e,t,r,n){return n<=0&&(e=t=r=NaN),new pn(e,t,r,n)}function LG(e){return e instanceof gf||(e=Td(e)),e?(e=e.rgb(),new pn(e.r,e.g,e.b,e.opacity)):new pn}function rw(e,t,r,n){return arguments.length===1?LG(e):new pn(e,t,r,n??1)}function pn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}N1(pn,rw,PR(gf,{brighter(e){return e=e==null?ap:Math.pow(ap,e),new pn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Pd:Math.pow(Pd,e),new pn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new pn(Ro(this.r),Ro(this.g),Ro(this.b),ip(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:I2,formatHex:I2,formatHex8:BG,formatRgb:L2,toString:L2}));function I2(){return`#${wo(this.r)}${wo(this.g)}${wo(this.b)}`}function BG(){return`#${wo(this.r)}${wo(this.g)}${wo(this.b)}${wo((isNaN(this.opacity)?1:this.opacity)*255)}`}function L2(){const e=ip(this.opacity);return`${e===1?"rgb(":"rgba("}${Ro(this.r)}, ${Ro(this.g)}, ${Ro(this.b)}${e===1?")":`, ${e})`}`}function ip(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ro(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function wo(e){return e=Ro(e),(e<16?"0":"")+e.toString(16)}function B2(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ma(e,t,r,n)}function kR(e){if(e instanceof ma)return new ma(e.h,e.s,e.l,e.opacity);if(e instanceof gf||(e=Td(e)),!e)return new ma;if(e instanceof ma)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),l=NaN,d=s-a,f=(s+a)/2;return d?(t===s?l=(r-n)/d+(r<n)*6:r===s?l=(n-t)/d+2:l=(t-r)/d+4,d/=f<.5?s+a:2-s-a,l*=60):d=f>0&&f<1?0:l,new ma(l,d,f,e.opacity)}function $G(e,t,r,n){return arguments.length===1?kR(e):new ma(e,t,r,n??1)}function ma(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}N1(ma,$G,PR(gf,{brighter(e){return e=e==null?ap:Math.pow(ap,e),new ma(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Pd:Math.pow(Pd,e),new ma(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new pn(Sb(e>=240?e-240:e+120,a,n),Sb(e,a,n),Sb(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new ma($2(this.h),dm(this.s),dm(this.l),ip(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ip(this.opacity);return`${e===1?"hsl(":"hsla("}${$2(this.h)}, ${dm(this.s)*100}%, ${dm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function $2(e){return e=(e||0)%360,e<0?e+360:e}function dm(e){return Math.max(0,Math.min(1,e||0))}function Sb(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const O1=e=>()=>e;function UG(e,t){return function(r){return e+r*t}}function zG(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function qG(e){return(e=+e)==1?TR:function(t,r){return r-t?zG(t,r,e):O1(isNaN(t)?r:t)}}function TR(e,t){var r=t-e;return r?UG(e,r):O1(isNaN(e)?t:e)}const U2=(function e(t){var r=qG(t);function n(a,s){var l=r((a=rw(a)).r,(s=rw(s)).r),d=r(a.g,s.g),f=r(a.b,s.b),h=TR(a.opacity,s.opacity);return function(p){return a.r=l(p),a.g=d(p),a.b=f(p),a.opacity=h(p),a+""}}return n.gamma=e,n})(1);function FG(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function KG(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function QG(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),l;for(l=0;l<n;++l)a[l]=Kc(e[l],t[l]);for(;l<r;++l)s[l]=t[l];return function(d){for(l=0;l<n;++l)s[l]=a[l](d);return s}}function HG(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function sp(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function VG(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Kc(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var nw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_b=new RegExp(nw.source,"g");function GG(e){return function(){return e}}function YG(e){return function(t){return e(t)+""}}function WG(e,t){var r=nw.lastIndex=_b.lastIndex=0,n,a,s,l=-1,d=[],f=[];for(e=e+"",t=t+"";(n=nw.exec(e))&&(a=_b.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),d[l]?d[l]+=s:d[++l]=s),(n=n[0])===(a=a[0])?d[l]?d[l]+=a:d[++l]=a:(d[++l]=null,f.push({i:l,x:sp(n,a)})),r=_b.lastIndex;return r<t.length&&(s=t.slice(r),d[l]?d[l]+=s:d[++l]=s),d.length<2?f[0]?YG(f[0].x):GG(t):(t=f.length,function(h){for(var p=0,g;p<t;++p)d[(g=f[p]).i]=g.x(h);return d.join("")})}function Kc(e,t){var r=typeof t,n;return t==null||r==="boolean"?O1(t):(r==="number"?sp:r==="string"?(n=Td(t))?(t=n,U2):WG:t instanceof Td?U2:t instanceof Date?HG:KG(t)?FG:Array.isArray(t)?QG:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?VG:sp)(e,t)}function E1(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function XG(e,t){t===void 0&&(t=e,e=Kc);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(l){var d=Math.max(0,Math.min(n-1,Math.floor(l*=n)));return s[d](l-d)}}function ZG(e){return function(){return e}}function op(e){return+e}var z2=[0,1];function en(e){return e}function aw(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:ZG(isNaN(t)?NaN:.5)}function JG(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function eY(e,t,r){var n=e[0],a=e[1],s=t[0],l=t[1];return a<n?(n=aw(a,n),s=r(l,s)):(n=aw(n,a),s=r(s,l)),function(d){return s(n(d))}}function tY(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),l=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<n;)a[l]=aw(e[l],e[l+1]),s[l]=r(t[l],t[l+1]);return function(d){var f=pf(e,d,1,n)-1;return s[f](a[f](d))}}function yf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function fg(){var e=z2,t=z2,r=Kc,n,a,s,l=en,d,f,h;function p(){var y=Math.min(e.length,t.length);return l!==en&&(l=JG(e[0],e[y-1])),d=y>2?tY:eY,f=h=null,g}function g(y){return y==null||isNaN(y=+y)?s:(f||(f=d(e.map(n),t,r)))(n(l(y)))}return g.invert=function(y){return l(a((h||(h=d(t,e.map(n),sp)))(y)))},g.domain=function(y){return arguments.length?(e=Array.from(y,op),p()):e.slice()},g.range=function(y){return arguments.length?(t=Array.from(y),p()):t.slice()},g.rangeRound=function(y){return t=Array.from(y),r=E1,p()},g.clamp=function(y){return arguments.length?(l=y?!0:en,p()):l!==en},g.interpolate=function(y){return arguments.length?(r=y,p()):r},g.unknown=function(y){return arguments.length?(s=y,g):s},function(y,v){return n=y,a=v,p()}}function A1(){return fg()(en,en)}function rY(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function lp(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Tc(e){return e=lp(Math.abs(e)),e?e[1]:NaN}function nY(e,t){return function(r,n){for(var a=r.length,s=[],l=0,d=e[0],f=0;a>0&&d>0&&(f+d+1>n&&(d=Math.max(1,n-f)),s.push(r.substring(a-=d,a+d)),!((f+=d+1)>n));)d=e[l=(l+1)%e.length];return s.reverse().join(t)}}function aY(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var iY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Dd(e){if(!(t=iY.exec(e)))throw new Error("invalid format: "+e);var t;return new C1({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Dd.prototype=C1.prototype;function C1(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}C1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function sY(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var cp;function oY(e,t){var r=lp(e,t);if(!r)return cp=void 0,e.toPrecision(t);var n=r[0],a=r[1],s=a-(cp=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,l=n.length;return s===l?n:s>l?n+new Array(s-l+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+lp(e,Math.max(0,t+s-1))[0]}function q2(e,t){var r=lp(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const F2={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:rY,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>q2(e*100,t),r:q2,s:oY,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function K2(e){return e}var Q2=Array.prototype.map,H2=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function lY(e){var t=e.grouping===void 0||e.thousands===void 0?K2:nY(Q2.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?K2:aY(Q2.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",f=e.nan===void 0?"NaN":e.nan+"";function h(g,y){g=Dd(g);var v=g.fill,j=g.align,S=g.sign,_=g.symbol,N=g.zero,O=g.width,E=g.comma,C=g.precision,D=g.trim,T=g.type;T==="n"?(E=!0,T="g"):F2[T]||(C===void 0&&(C=12),D=!0,T="g"),(N||v==="0"&&j==="=")&&(N=!0,v="0",j="=");var M=(y&&y.prefix!==void 0?y.prefix:"")+(_==="$"?r:_==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():""),R=(_==="$"?n:/[%p]/.test(T)?l:"")+(y&&y.suffix!==void 0?y.suffix:""),U=F2[T],Y=/[defgprs%]/.test(T);C=C===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function K(z){var pe=M,le=R,ge,I,V;if(T==="c")le=U(z)+le,z="";else{z=+z;var ae=z<0||1/z<0;if(z=isNaN(z)?f:U(Math.abs(z),C),D&&(z=sY(z)),ae&&+z==0&&S!=="+"&&(ae=!1),pe=(ae?S==="("?S:d:S==="-"||S==="("?"":S)+pe,le=(T==="s"&&!isNaN(z)&&cp!==void 0?H2[8+cp/3]:"")+le+(ae&&S==="("?")":""),Y){for(ge=-1,I=z.length;++ge<I;)if(V=z.charCodeAt(ge),48>V||V>57){le=(V===46?a+z.slice(ge+1):z.slice(ge))+le,z=z.slice(0,ge);break}}}E&&!N&&(z=t(z,1/0));var he=pe.length+z.length+le.length,Q=he<O?new Array(O-he+1).join(v):"";switch(E&&N&&(z=t(Q+z,Q.length?O-le.length:1/0),Q=""),j){case"<":z=pe+z+le+Q;break;case"=":z=pe+Q+z+le;break;case"^":z=Q.slice(0,he=Q.length>>1)+pe+z+le+Q.slice(he);break;default:z=Q+pe+z+le;break}return s(z)}return K.toString=function(){return g+""},K}function p(g,y){var v=Math.max(-8,Math.min(8,Math.floor(Tc(y)/3)))*3,j=Math.pow(10,-v),S=h((g=Dd(g),g.type="f",g),{suffix:H2[8+v/3]});return function(_){return S(j*_)}}return{format:h,formatPrefix:p}}var fm,P1,DR;cY({thousands:",",grouping:[3],currency:["$",""]});function cY(e){return fm=lY(e),P1=fm.format,DR=fm.formatPrefix,fm}function uY(e){return Math.max(0,-Tc(Math.abs(e)))}function dY(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Tc(t)/3)))*3-Tc(Math.abs(e)))}function fY(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Tc(t)-Tc(e))+1}function MR(e,t,r,n){var a=ew(e,t,r),s;switch(n=Dd(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=dY(a,l))&&(n.precision=s),DR(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=fY(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=uY(a))&&(n.precision=s-(n.type==="%")*2);break}}return P1(n)}function zs(e){var t=e.domain;return e.ticks=function(r){var n=t();return Zx(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return MR(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,l=n[a],d=n[s],f,h,p=10;for(d<l&&(h=l,l=d,d=h,h=a,a=s,s=h);p-- >0;){if(h=Jx(l,d,r),h===f)return n[a]=l,n[s]=d,t(n);if(h>0)l=Math.floor(l/h)*h,d=Math.ceil(d/h)*h;else if(h<0)l=Math.ceil(l*h)/h,d=Math.floor(d*h)/h;else break;f=h}return e},e}function RR(){var e=A1();return e.copy=function(){return yf(e,RR())},ra.apply(e,arguments),zs(e)}function IR(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,op),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return IR(e).unknown(t)},e=arguments.length?Array.from(e,op):[0,1],zs(r)}function LR(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],l;return s<a&&(l=r,r=n,n=l,l=a,a=s,s=l),e[r]=t.floor(a),e[n]=t.ceil(s),e}function V2(e){return Math.log(e)}function G2(e){return Math.exp(e)}function hY(e){return-Math.log(-e)}function mY(e){return-Math.exp(-e)}function pY(e){return isFinite(e)?+("1e"+e):e<0?0:e}function gY(e){return e===10?pY:e===Math.E?Math.exp:t=>Math.pow(e,t)}function yY(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Y2(e){return(t,r)=>-e(-t,r)}function k1(e){const t=e(V2,G2),r=t.domain;let n=10,a,s;function l(){return a=yY(n),s=gY(n),r()[0]<0?(a=Y2(a),s=Y2(s),e(hY,mY)):e(V2,G2),t}return t.base=function(d){return arguments.length?(n=+d,l()):n},t.domain=function(d){return arguments.length?(r(d),l()):r()},t.ticks=d=>{const f=r();let h=f[0],p=f[f.length-1];const g=p<h;g&&([h,p]=[p,h]);let y=a(h),v=a(p),j,S;const _=d==null?10:+d;let N=[];if(!(n%1)&&v-y<_){if(y=Math.floor(y),v=Math.ceil(v),h>0){for(;y<=v;++y)for(j=1;j<n;++j)if(S=y<0?j/s(-y):j*s(y),!(S<h)){if(S>p)break;N.push(S)}}else for(;y<=v;++y)for(j=n-1;j>=1;--j)if(S=y>0?j/s(-y):j*s(y),!(S<h)){if(S>p)break;N.push(S)}N.length*2<_&&(N=Zx(h,p,_))}else N=Zx(y,v,Math.min(v-y,_)).map(s);return g?N.reverse():N},t.tickFormat=(d,f)=>{if(d==null&&(d=10),f==null&&(f=n===10?"s":","),typeof f!="function"&&(!(n%1)&&(f=Dd(f)).precision==null&&(f.trim=!0),f=P1(f)),d===1/0)return f;const h=Math.max(1,n*d/t.ticks().length);return p=>{let g=p/s(Math.round(a(p)));return g*n<n-.5&&(g*=n),g<=h?f(p):""}},t.nice=()=>r(LR(r(),{floor:d=>s(Math.floor(a(d))),ceil:d=>s(Math.ceil(a(d)))})),t}function BR(){const e=k1(fg()).domain([1,10]);return e.copy=()=>yf(e,BR()).base(e.base()),ra.apply(e,arguments),e}function W2(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function X2(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function T1(e){var t=1,r=e(W2(t),X2(t));return r.constant=function(n){return arguments.length?e(W2(t=+n),X2(t)):t},zs(r)}function $R(){var e=T1(fg());return e.copy=function(){return yf(e,$R()).constant(e.constant())},ra.apply(e,arguments)}function Z2(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function vY(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function bY(e){return e<0?-e*e:e*e}function D1(e){var t=e(en,en),r=1;function n(){return r===1?e(en,en):r===.5?e(vY,bY):e(Z2(r),Z2(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},zs(t)}function M1(){var e=D1(fg());return e.copy=function(){return yf(e,M1()).exponent(e.exponent())},ra.apply(e,arguments),e}function xY(){return M1.apply(null,arguments).exponent(.5)}function J2(e){return Math.sign(e)*e*e}function wY(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function UR(){var e=A1(),t=[0,1],r=!1,n;function a(s){var l=wY(e(s));return isNaN(l)?n:r?Math.round(l):l}return a.invert=function(s){return e.invert(J2(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,op)).map(J2)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return UR(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},ra.apply(a,arguments),zs(a)}function zR(){var e=[],t=[],r=[],n;function a(){var l=0,d=Math.max(1,t.length);for(r=new Array(d-1);++l<d;)r[l-1]=NG(e,l/d);return s}function s(l){return l==null||isNaN(l=+l)?n:t[pf(r,l)]}return s.invertExtent=function(l){var d=t.indexOf(l);return d<0?[NaN,NaN]:[d>0?r[d-1]:e[0],d<r.length?r[d]:e[e.length-1]]},s.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let d of l)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(ks),a()},s.range=function(l){return arguments.length?(t=Array.from(l),a()):t.slice()},s.unknown=function(l){return arguments.length?(n=l,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return zR().domain(e).range(t).unknown(n)},ra.apply(s,arguments)}function qR(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function l(f){return f!=null&&f<=f?a[pf(n,f,0,r)]:s}function d(){var f=-1;for(n=new Array(r);++f<r;)n[f]=((f+1)*t-(f-r)*e)/(r+1);return l}return l.domain=function(f){return arguments.length?([e,t]=f,e=+e,t=+t,d()):[e,t]},l.range=function(f){return arguments.length?(r=(a=Array.from(f)).length-1,d()):a.slice()},l.invertExtent=function(f){var h=a.indexOf(f);return h<0?[NaN,NaN]:h<1?[e,n[0]]:h>=r?[n[r-1],t]:[n[h-1],n[h]]},l.unknown=function(f){return arguments.length&&(s=f),l},l.thresholds=function(){return n.slice()},l.copy=function(){return qR().domain([e,t]).range(a).unknown(s)},ra.apply(zs(l),arguments)}function FR(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[pf(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var l=t.indexOf(s);return[e[l-1],e[l]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return FR().domain(e).range(t).unknown(r)},ra.apply(a,arguments)}const Nb=new Date,Ob=new Date;function vr(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const l=a(s),d=a.ceil(s);return s-l<d-s?l:d},a.offset=(s,l)=>(t(s=new Date(+s),l==null?1:Math.floor(l)),s),a.range=(s,l,d)=>{const f=[];if(s=a.ceil(s),d=d==null?1:Math.floor(d),!(s<l)||!(d>0))return f;let h;do f.push(h=new Date(+s)),t(s,d),e(s);while(h<s&&s<l);return f},a.filter=s=>vr(l=>{if(l>=l)for(;e(l),!s(l);)l.setTime(l-1)},(l,d)=>{if(l>=l)if(d<0)for(;++d<=0;)for(;t(l,-1),!s(l););else for(;--d>=0;)for(;t(l,1),!s(l););}),r&&(a.count=(s,l)=>(Nb.setTime(+s),Ob.setTime(+l),e(Nb),e(Ob),Math.floor(r(Nb,Ob))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?l=>n(l)%s===0:l=>a.count(0,l)%s===0):a)),a}const up=vr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);up.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?vr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):up);up.range;const vi=1e3,Zn=vi*60,bi=Zn*60,Oi=bi*24,R1=Oi*7,eP=Oi*30,Eb=Oi*365,jo=vr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*vi)},(e,t)=>(t-e)/vi,e=>e.getUTCSeconds());jo.range;const I1=vr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*vi)},(e,t)=>{e.setTime(+e+t*Zn)},(e,t)=>(t-e)/Zn,e=>e.getMinutes());I1.range;const L1=vr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Zn)},(e,t)=>(t-e)/Zn,e=>e.getUTCMinutes());L1.range;const B1=vr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*vi-e.getMinutes()*Zn)},(e,t)=>{e.setTime(+e+t*bi)},(e,t)=>(t-e)/bi,e=>e.getHours());B1.range;const $1=vr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*bi)},(e,t)=>(t-e)/bi,e=>e.getUTCHours());$1.range;const vf=vr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Zn)/Oi,e=>e.getDate()-1);vf.range;const hg=vr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Oi,e=>e.getUTCDate()-1);hg.range;const KR=vr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Oi,e=>Math.floor(e/Oi));KR.range;function Jo(e){return vr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Zn)/R1)}const mg=Jo(0),dp=Jo(1),jY=Jo(2),SY=Jo(3),Dc=Jo(4),_Y=Jo(5),NY=Jo(6);mg.range;dp.range;jY.range;SY.range;Dc.range;_Y.range;NY.range;function el(e){return vr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/R1)}const pg=el(0),fp=el(1),OY=el(2),EY=el(3),Mc=el(4),AY=el(5),CY=el(6);pg.range;fp.range;OY.range;EY.range;Mc.range;AY.range;CY.range;const U1=vr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());U1.range;const z1=vr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());z1.range;const Ei=vr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ei.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:vr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Ei.range;const Ai=vr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ai.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:vr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Ai.range;function QR(e,t,r,n,a,s){const l=[[jo,1,vi],[jo,5,5*vi],[jo,15,15*vi],[jo,30,30*vi],[s,1,Zn],[s,5,5*Zn],[s,15,15*Zn],[s,30,30*Zn],[a,1,bi],[a,3,3*bi],[a,6,6*bi],[a,12,12*bi],[n,1,Oi],[n,2,2*Oi],[r,1,R1],[t,1,eP],[t,3,3*eP],[e,1,Eb]];function d(h,p,g){const y=p<h;y&&([h,p]=[p,h]);const v=g&&typeof g.range=="function"?g:f(h,p,g),j=v?v.range(h,+p+1):[];return y?j.reverse():j}function f(h,p,g){const y=Math.abs(p-h)/g,v=j1(([,,_])=>_).right(l,y);if(v===l.length)return e.every(ew(h/Eb,p/Eb,g));if(v===0)return up.every(Math.max(ew(h,p,g),1));const[j,S]=l[y/l[v-1][2]<l[v][2]/y?v-1:v];return j.every(S)}return[d,f]}const[PY,kY]=QR(Ai,z1,pg,KR,$1,L1),[TY,DY]=QR(Ei,U1,mg,vf,B1,I1);function Ab(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Cb(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ed(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function MY(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,l=e.shortDays,d=e.months,f=e.shortMonths,h=td(a),p=rd(a),g=td(s),y=rd(s),v=td(l),j=rd(l),S=td(d),_=rd(d),N=td(f),O=rd(f),E={a:V,A:ae,b:he,B:Q,c:null,d:sP,e:sP,f:nW,g:hW,G:pW,H:eW,I:tW,j:rW,L:HR,m:aW,M:iW,p:P,q:B,Q:cP,s:uP,S:sW,u:oW,U:lW,V:cW,w:uW,W:dW,x:null,X:null,y:fW,Y:mW,Z:gW,"%":lP},C={a:W,A:re,b:G,B:ve,c:null,d:oP,e:oP,f:xW,g:PW,G:TW,H:yW,I:vW,j:bW,L:GR,m:wW,M:jW,p:ye,q:xe,Q:cP,s:uP,S:SW,u:_W,U:NW,V:OW,w:EW,W:AW,x:null,X:null,y:CW,Y:kW,Z:DW,"%":lP},D={a:Y,A:K,b:z,B:pe,c:le,d:aP,e:aP,f:WY,g:nP,G:rP,H:iP,I:iP,j:HY,L:YY,m:QY,M:VY,p:U,q:KY,Q:ZY,s:JY,S:GY,u:$Y,U:UY,V:zY,w:BY,W:qY,x:ge,X:I,y:nP,Y:rP,Z:FY,"%":XY};E.x=T(r,E),E.X=T(n,E),E.c=T(t,E),C.x=T(r,C),C.X=T(n,C),C.c=T(t,C);function T(q,we){return function(je){var ue=[],Ue=-1,fe=0,Me=q.length,ze,At,Ft;for(je instanceof Date||(je=new Date(+je));++Ue<Me;)q.charCodeAt(Ue)===37&&(ue.push(q.slice(fe,Ue)),(At=tP[ze=q.charAt(++Ue)])!=null?ze=q.charAt(++Ue):At=ze==="e"?" ":"0",(Ft=we[ze])&&(ze=Ft(je,At)),ue.push(ze),fe=Ue+1);return ue.push(q.slice(fe,Ue)),ue.join("")}}function M(q,we){return function(je){var ue=ed(1900,void 0,1),Ue=R(ue,q,je+="",0),fe,Me;if(Ue!=je.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(we&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(fe=Cb(ed(ue.y,0,1)),Me=fe.getUTCDay(),fe=Me>4||Me===0?fp.ceil(fe):fp(fe),fe=hg.offset(fe,(ue.V-1)*7),ue.y=fe.getUTCFullYear(),ue.m=fe.getUTCMonth(),ue.d=fe.getUTCDate()+(ue.w+6)%7):(fe=Ab(ed(ue.y,0,1)),Me=fe.getDay(),fe=Me>4||Me===0?dp.ceil(fe):dp(fe),fe=vf.offset(fe,(ue.V-1)*7),ue.y=fe.getFullYear(),ue.m=fe.getMonth(),ue.d=fe.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),Me="Z"in ue?Cb(ed(ue.y,0,1)).getUTCDay():Ab(ed(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(Me+5)%7:ue.w+ue.U*7-(Me+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,Cb(ue)):Ab(ue)}}function R(q,we,je,ue){for(var Ue=0,fe=we.length,Me=je.length,ze,At;Ue<fe;){if(ue>=Me)return-1;if(ze=we.charCodeAt(Ue++),ze===37){if(ze=we.charAt(Ue++),At=D[ze in tP?we.charAt(Ue++):ze],!At||(ue=At(q,je,ue))<0)return-1}else if(ze!=je.charCodeAt(ue++))return-1}return ue}function U(q,we,je){var ue=h.exec(we.slice(je));return ue?(q.p=p.get(ue[0].toLowerCase()),je+ue[0].length):-1}function Y(q,we,je){var ue=v.exec(we.slice(je));return ue?(q.w=j.get(ue[0].toLowerCase()),je+ue[0].length):-1}function K(q,we,je){var ue=g.exec(we.slice(je));return ue?(q.w=y.get(ue[0].toLowerCase()),je+ue[0].length):-1}function z(q,we,je){var ue=N.exec(we.slice(je));return ue?(q.m=O.get(ue[0].toLowerCase()),je+ue[0].length):-1}function pe(q,we,je){var ue=S.exec(we.slice(je));return ue?(q.m=_.get(ue[0].toLowerCase()),je+ue[0].length):-1}function le(q,we,je){return R(q,t,we,je)}function ge(q,we,je){return R(q,r,we,je)}function I(q,we,je){return R(q,n,we,je)}function V(q){return l[q.getDay()]}function ae(q){return s[q.getDay()]}function he(q){return f[q.getMonth()]}function Q(q){return d[q.getMonth()]}function P(q){return a[+(q.getHours()>=12)]}function B(q){return 1+~~(q.getMonth()/3)}function W(q){return l[q.getUTCDay()]}function re(q){return s[q.getUTCDay()]}function G(q){return f[q.getUTCMonth()]}function ve(q){return d[q.getUTCMonth()]}function ye(q){return a[+(q.getUTCHours()>=12)]}function xe(q){return 1+~~(q.getUTCMonth()/3)}return{format:function(q){var we=T(q+="",E);return we.toString=function(){return q},we},parse:function(q){var we=M(q+="",!1);return we.toString=function(){return q},we},utcFormat:function(q){var we=T(q+="",C);return we.toString=function(){return q},we},utcParse:function(q){var we=M(q+="",!0);return we.toString=function(){return q},we}}}var tP={"-":"",_:" ",0:"0"},Ar=/^\s*\d+/,RY=/^%/,IY=/[\\^$*+?|[\]().{}]/g;function lt(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function LY(e){return e.replace(IY,"\\$&")}function td(e){return new RegExp("^(?:"+e.map(LY).join("|")+")","i")}function rd(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function BY(e,t,r){var n=Ar.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function $Y(e,t,r){var n=Ar.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function UY(e,t,r){var n=Ar.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function zY(e,t,r){var n=Ar.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function qY(e,t,r){var n=Ar.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function rP(e,t,r){var n=Ar.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function nP(e,t,r){var n=Ar.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function FY(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function KY(e,t,r){var n=Ar.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function QY(e,t,r){var n=Ar.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function aP(e,t,r){var n=Ar.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function HY(e,t,r){var n=Ar.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function iP(e,t,r){var n=Ar.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function VY(e,t,r){var n=Ar.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function GY(e,t,r){var n=Ar.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function YY(e,t,r){var n=Ar.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function WY(e,t,r){var n=Ar.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function XY(e,t,r){var n=RY.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function ZY(e,t,r){var n=Ar.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function JY(e,t,r){var n=Ar.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function sP(e,t){return lt(e.getDate(),t,2)}function eW(e,t){return lt(e.getHours(),t,2)}function tW(e,t){return lt(e.getHours()%12||12,t,2)}function rW(e,t){return lt(1+vf.count(Ei(e),e),t,3)}function HR(e,t){return lt(e.getMilliseconds(),t,3)}function nW(e,t){return HR(e,t)+"000"}function aW(e,t){return lt(e.getMonth()+1,t,2)}function iW(e,t){return lt(e.getMinutes(),t,2)}function sW(e,t){return lt(e.getSeconds(),t,2)}function oW(e){var t=e.getDay();return t===0?7:t}function lW(e,t){return lt(mg.count(Ei(e)-1,e),t,2)}function VR(e){var t=e.getDay();return t>=4||t===0?Dc(e):Dc.ceil(e)}function cW(e,t){return e=VR(e),lt(Dc.count(Ei(e),e)+(Ei(e).getDay()===4),t,2)}function uW(e){return e.getDay()}function dW(e,t){return lt(dp.count(Ei(e)-1,e),t,2)}function fW(e,t){return lt(e.getFullYear()%100,t,2)}function hW(e,t){return e=VR(e),lt(e.getFullYear()%100,t,2)}function mW(e,t){return lt(e.getFullYear()%1e4,t,4)}function pW(e,t){var r=e.getDay();return e=r>=4||r===0?Dc(e):Dc.ceil(e),lt(e.getFullYear()%1e4,t,4)}function gW(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+lt(t/60|0,"0",2)+lt(t%60,"0",2)}function oP(e,t){return lt(e.getUTCDate(),t,2)}function yW(e,t){return lt(e.getUTCHours(),t,2)}function vW(e,t){return lt(e.getUTCHours()%12||12,t,2)}function bW(e,t){return lt(1+hg.count(Ai(e),e),t,3)}function GR(e,t){return lt(e.getUTCMilliseconds(),t,3)}function xW(e,t){return GR(e,t)+"000"}function wW(e,t){return lt(e.getUTCMonth()+1,t,2)}function jW(e,t){return lt(e.getUTCMinutes(),t,2)}function SW(e,t){return lt(e.getUTCSeconds(),t,2)}function _W(e){var t=e.getUTCDay();return t===0?7:t}function NW(e,t){return lt(pg.count(Ai(e)-1,e),t,2)}function YR(e){var t=e.getUTCDay();return t>=4||t===0?Mc(e):Mc.ceil(e)}function OW(e,t){return e=YR(e),lt(Mc.count(Ai(e),e)+(Ai(e).getUTCDay()===4),t,2)}function EW(e){return e.getUTCDay()}function AW(e,t){return lt(fp.count(Ai(e)-1,e),t,2)}function CW(e,t){return lt(e.getUTCFullYear()%100,t,2)}function PW(e,t){return e=YR(e),lt(e.getUTCFullYear()%100,t,2)}function kW(e,t){return lt(e.getUTCFullYear()%1e4,t,4)}function TW(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Mc(e):Mc.ceil(e),lt(e.getUTCFullYear()%1e4,t,4)}function DW(){return"+0000"}function lP(){return"%"}function cP(e){return+e}function uP(e){return Math.floor(+e/1e3)}var Xl,WR,XR;MW({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function MW(e){return Xl=MY(e),WR=Xl.format,Xl.parse,XR=Xl.utcFormat,Xl.utcParse,Xl}function RW(e){return new Date(e)}function IW(e){return e instanceof Date?+e:+new Date(+e)}function q1(e,t,r,n,a,s,l,d,f,h){var p=A1(),g=p.invert,y=p.domain,v=h(".%L"),j=h(":%S"),S=h("%I:%M"),_=h("%I %p"),N=h("%a %d"),O=h("%b %d"),E=h("%B"),C=h("%Y");function D(T){return(f(T)<T?v:d(T)<T?j:l(T)<T?S:s(T)<T?_:n(T)<T?a(T)<T?N:O:r(T)<T?E:C)(T)}return p.invert=function(T){return new Date(g(T))},p.domain=function(T){return arguments.length?y(Array.from(T,IW)):y().map(RW)},p.ticks=function(T){var M=y();return e(M[0],M[M.length-1],T??10)},p.tickFormat=function(T,M){return M==null?D:h(M)},p.nice=function(T){var M=y();return(!T||typeof T.range!="function")&&(T=t(M[0],M[M.length-1],T??10)),T?y(LR(M,T)):p},p.copy=function(){return yf(p,q1(e,t,r,n,a,s,l,d,f,h))},p}function LW(){return ra.apply(q1(TY,DY,Ei,U1,mg,vf,B1,I1,jo,WR).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function BW(){return ra.apply(q1(PY,kY,Ai,z1,pg,hg,$1,L1,jo,XR).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function gg(){var e=0,t=1,r,n,a,s,l=en,d=!1,f;function h(g){return g==null||isNaN(g=+g)?f:l(a===0?.5:(g=(s(g)-r)*a,d?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t]=g,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),h):[e,t]},h.clamp=function(g){return arguments.length?(d=!!g,h):d},h.interpolator=function(g){return arguments.length?(l=g,h):l};function p(g){return function(y){var v,j;return arguments.length?([v,j]=y,l=g(v,j),h):[l(0),l(1)]}}return h.range=p(Kc),h.rangeRound=p(E1),h.unknown=function(g){return arguments.length?(f=g,h):f},function(g){return s=g,r=g(e),n=g(t),a=r===n?0:1/(n-r),h}}function qs(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ZR(){var e=zs(gg()(en));return e.copy=function(){return qs(e,ZR())},Bi.apply(e,arguments)}function JR(){var e=k1(gg()).domain([1,10]);return e.copy=function(){return qs(e,JR()).base(e.base())},Bi.apply(e,arguments)}function e4(){var e=T1(gg());return e.copy=function(){return qs(e,e4()).constant(e.constant())},Bi.apply(e,arguments)}function F1(){var e=D1(gg());return e.copy=function(){return qs(e,F1()).exponent(e.exponent())},Bi.apply(e,arguments)}function $W(){return F1.apply(null,arguments).exponent(.5)}function t4(){var e=[],t=en;function r(n){if(n!=null&&!isNaN(n=+n))return t((pf(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(ks),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>_G(e,s/n))},r.copy=function(){return t4(t).domain(e)},Bi.apply(r,arguments)}function yg(){var e=0,t=.5,r=1,n=1,a,s,l,d,f,h=en,p,g=!1,y;function v(S){return isNaN(S=+S)?y:(S=.5+((S=+p(S))-s)*(n*S<n*s?d:f),h(g?Math.max(0,Math.min(1,S)):S))}v.domain=function(S){return arguments.length?([e,t,r]=S,a=p(e=+e),s=p(t=+t),l=p(r=+r),d=a===s?0:.5/(s-a),f=s===l?0:.5/(l-s),n=s<a?-1:1,v):[e,t,r]},v.clamp=function(S){return arguments.length?(g=!!S,v):g},v.interpolator=function(S){return arguments.length?(h=S,v):h};function j(S){return function(_){var N,O,E;return arguments.length?([N,O,E]=_,h=XG(S,[N,O,E]),v):[h(0),h(.5),h(1)]}}return v.range=j(Kc),v.rangeRound=j(E1),v.unknown=function(S){return arguments.length?(y=S,v):y},function(S){return p=S,a=S(e),s=S(t),l=S(r),d=a===s?0:.5/(s-a),f=s===l?0:.5/(l-s),n=s<a?-1:1,v}}function r4(){var e=zs(yg()(en));return e.copy=function(){return qs(e,r4())},Bi.apply(e,arguments)}function n4(){var e=k1(yg()).domain([.1,1,10]);return e.copy=function(){return qs(e,n4()).base(e.base())},Bi.apply(e,arguments)}function a4(){var e=T1(yg());return e.copy=function(){return qs(e,a4()).constant(e.constant())},Bi.apply(e,arguments)}function K1(){var e=D1(yg());return e.copy=function(){return qs(e,K1()).exponent(e.exponent())},Bi.apply(e,arguments)}function UW(){return K1.apply(null,arguments).exponent(.5)}const od=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:_1,scaleDiverging:r4,scaleDivergingLog:n4,scaleDivergingPow:K1,scaleDivergingSqrt:UW,scaleDivergingSymlog:a4,scaleIdentity:IR,scaleImplicit:tw,scaleLinear:RR,scaleLog:BR,scaleOrdinal:S1,scalePoint:EG,scalePow:M1,scaleQuantile:zR,scaleQuantize:qR,scaleRadial:UR,scaleSequential:ZR,scaleSequentialLog:JR,scaleSequentialPow:F1,scaleSequentialQuantile:t4,scaleSequentialSqrt:$W,scaleSequentialSymlog:e4,scaleSqrt:xY,scaleSymlog:$R,scaleThreshold:FR,scaleTime:LW,scaleUtc:BW,tickFormat:MR},Symbol.toStringTag,{value:"Module"}));var $i=e=>e.chartData,vg=X([$i],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Q1=(e,t,r,n)=>n?vg(e):$i(e),zW=(e,t,r)=>r?vg(e):$i(e);function Ci(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(nt(t)&&nt(r))return!0}return!1}function dP(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function i4(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,s;if(nt(r))a=r;else if(typeof r=="function")return;if(nt(n))s=n;else if(typeof n=="function")return;var l=[a,s];if(Ci(l))return l}}function qW(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Ci(n))return dP(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,l,d;if(a==="auto")t!=null&&(l=Math.min(...t));else if(Ee(a))l=a;else if(typeof a=="function")try{t!=null&&(l=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&wC.test(a)){var f=wC.exec(a);if(f==null||f[1]==null||t==null)l=void 0;else{var h=+f[1];l=t[0]-h}}else l=t==null?void 0:t[0];if(s==="auto")t!=null&&(d=Math.max(...t));else if(Ee(s))d=s;else if(typeof s=="function")try{t!=null&&(d=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&jC.test(s)){var p=jC.exec(s);if(p==null||p[1]==null||t==null)d=void 0;else{var g=+p[1];d=t[1]+g}}else d=t==null?void 0:t[1];var y=[l,d];if(Ci(y))return t==null?y:dP(y,t,r)}}}var Qc=1e9,FW={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},V1,Ut=!0,ta="[DecimalError] ",Io=ta+"Invalid argument: ",H1=ta+"Exponent out of range: ",Hc=Math.floor,po=Math.pow,KW=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,An,Nr=1e7,Mt=7,s4=9007199254740991,hp=Hc(s4/Mt),Ae={};Ae.absoluteValue=Ae.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ae.comparedTo=Ae.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Ae.decimalPlaces=Ae.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Mt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ae.dividedBy=Ae.div=function(e){return wi(this,new this.constructor(e))};Ae.dividedToIntegerBy=Ae.idiv=function(e){var t=this,r=t.constructor;return Et(wi(t,new r(e),0,1),r.precision)};Ae.equals=Ae.eq=function(e){return!this.cmp(e)};Ae.exponent=function(){return ur(this)};Ae.greaterThan=Ae.gt=function(e){return this.cmp(e)>0};Ae.greaterThanOrEqualTo=Ae.gte=function(e){return this.cmp(e)>=0};Ae.isInteger=Ae.isint=function(){return this.e>this.d.length-2};Ae.isNegative=Ae.isneg=function(){return this.s<0};Ae.isPositive=Ae.ispos=function(){return this.s>0};Ae.isZero=function(){return this.s===0};Ae.lessThan=Ae.lt=function(e){return this.cmp(e)<0};Ae.lessThanOrEqualTo=Ae.lte=function(e){return this.cmp(e)<1};Ae.logarithm=Ae.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(An))throw Error(ta+"NaN");if(r.s<1)throw Error(ta+(r.s?"NaN":"-Infinity"));return r.eq(An)?new n(0):(Ut=!1,t=wi(Md(r,s),Md(e,s),s),Ut=!0,Et(t,a))};Ae.minus=Ae.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?c4(t,e):o4(t,(e.s=-e.s,e))};Ae.modulo=Ae.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(ta+"NaN");return r.s?(Ut=!1,t=wi(r,e,0,1).times(e),Ut=!0,r.minus(t)):Et(new n(r),a)};Ae.naturalExponential=Ae.exp=function(){return l4(this)};Ae.naturalLogarithm=Ae.ln=function(){return Md(this)};Ae.negated=Ae.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ae.plus=Ae.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?o4(t,e):c4(t,(e.s=-e.s,e))};Ae.precision=Ae.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Io+e);if(t=ur(a)+1,n=a.d.length-1,r=n*Mt+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ae.squareRoot=Ae.sqrt=function(){var e,t,r,n,a,s,l,d=this,f=d.constructor;if(d.s<1){if(!d.s)return new f(0);throw Error(ta+"NaN")}for(e=ur(d),Ut=!1,a=Math.sqrt(+d),a==0||a==1/0?(t=La(d.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Hc((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new f(t)):n=new f(a.toString()),r=f.precision,a=l=r+3;;)if(s=n,n=s.plus(wi(d,s,l+2)).times(.5),La(s.d).slice(0,l)===(t=La(n.d)).slice(0,l)){if(t=t.slice(l-3,l+1),a==l&&t=="4999"){if(Et(s,r+1,0),s.times(s).eq(d)){n=s;break}}else if(t!="9999")break;l+=4}return Ut=!0,Et(n,r)};Ae.times=Ae.mul=function(e){var t,r,n,a,s,l,d,f,h,p=this,g=p.constructor,y=p.d,v=(e=new g(e)).d;if(!p.s||!e.s)return new g(0);for(e.s*=p.s,r=p.e+e.e,f=y.length,h=v.length,f<h&&(s=y,y=v,v=s,l=f,f=h,h=l),s=[],l=f+h,n=l;n--;)s.push(0);for(n=h;--n>=0;){for(t=0,a=f+n;a>n;)d=s[a]+v[n]*y[a-n-1]+t,s[a--]=d%Nr|0,t=d/Nr|0;s[a]=(s[a]+t)%Nr|0}for(;!s[--l];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Ut?Et(e,g.precision):e};Ae.toDecimalPlaces=Ae.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(qa(e,0,Qc),t===void 0?t=n.rounding:qa(t,0,8),Et(r,e+ur(r)+1,t))};Ae.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Vo(n,!0):(qa(e,0,Qc),t===void 0?t=a.rounding:qa(t,0,8),n=Et(new a(n),e+1,t),r=Vo(n,!0,e+1)),r};Ae.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?Vo(a):(qa(e,0,Qc),t===void 0?t=s.rounding:qa(t,0,8),n=Et(new s(a),e+ur(a)+1,t),r=Vo(n.abs(),!1,e+ur(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Ae.toInteger=Ae.toint=function(){var e=this,t=e.constructor;return Et(new t(e),ur(e)+1,t.rounding)};Ae.toNumber=function(){return+this};Ae.toPower=Ae.pow=function(e){var t,r,n,a,s,l,d=this,f=d.constructor,h=12,p=+(e=new f(e));if(!e.s)return new f(An);if(d=new f(d),!d.s){if(e.s<1)throw Error(ta+"Infinity");return d}if(d.eq(An))return d;if(n=f.precision,e.eq(An))return Et(d,n);if(t=e.e,r=e.d.length-1,l=t>=r,s=d.s,l){if((r=p<0?-p:p)<=s4){for(a=new f(An),t=Math.ceil(n/Mt+4),Ut=!1;r%2&&(a=a.times(d),hP(a.d,t)),r=Hc(r/2),r!==0;)d=d.times(d),hP(d.d,t);return Ut=!0,e.s<0?new f(An).div(a):Et(a,n)}}else if(s<0)throw Error(ta+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,d.s=1,Ut=!1,a=e.times(Md(d,n+h)),Ut=!0,a=l4(a),a.s=s,a};Ae.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=ur(a),n=Vo(a,r<=s.toExpNeg||r>=s.toExpPos)):(qa(e,1,Qc),t===void 0?t=s.rounding:qa(t,0,8),a=Et(new s(a),e,t),r=ur(a),n=Vo(a,e<=r||r<=s.toExpNeg,e)),n};Ae.toSignificantDigits=Ae.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(qa(e,1,Qc),t===void 0?t=n.rounding:qa(t,0,8)),Et(new n(r),e,t)};Ae.toString=Ae.valueOf=Ae.val=Ae.toJSON=Ae[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ur(e),r=e.constructor;return Vo(e,t<=r.toExpNeg||t>=r.toExpPos)};function o4(e,t){var r,n,a,s,l,d,f,h,p=e.constructor,g=p.precision;if(!e.s||!t.s)return t.s||(t=new p(e)),Ut?Et(t,g):t;if(f=e.d,h=t.d,l=e.e,a=t.e,f=f.slice(),s=l-a,s){for(s<0?(n=f,s=-s,d=h.length):(n=h,a=l,d=f.length),l=Math.ceil(g/Mt),d=l>d?l+1:d+1,s>d&&(s=d,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(d=f.length,s=h.length,d-s<0&&(s=d,n=h,h=f,f=n),r=0;s;)r=(f[--s]=f[s]+h[s]+r)/Nr|0,f[s]%=Nr;for(r&&(f.unshift(r),++a),d=f.length;f[--d]==0;)f.pop();return t.d=f,t.e=a,Ut?Et(t,g):t}function qa(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Io+e)}function La(e){var t,r,n,a=e.length-1,s="",l=e[0];if(a>0){for(s+=l,t=1;t<a;t++)n=e[t]+"",r=Mt-n.length,r&&(s+=gs(r)),s+=n;l=e[t],n=l+"",r=Mt-n.length,r&&(s+=gs(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return s+l}var wi=(function(){function e(n,a){var s,l=0,d=n.length;for(n=n.slice();d--;)s=n[d]*a+l,n[d]=s%Nr|0,l=s/Nr|0;return l&&n.unshift(l),n}function t(n,a,s,l){var d,f;if(s!=l)f=s>l?1:-1;else for(d=f=0;d<s;d++)if(n[d]!=a[d]){f=n[d]>a[d]?1:-1;break}return f}function r(n,a,s){for(var l=0;s--;)n[s]-=l,l=n[s]<a[s]?1:0,n[s]=l*Nr+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,l){var d,f,h,p,g,y,v,j,S,_,N,O,E,C,D,T,M,R,U=n.constructor,Y=n.s==a.s?1:-1,K=n.d,z=a.d;if(!n.s)return new U(n);if(!a.s)throw Error(ta+"Division by zero");for(f=n.e-a.e,M=z.length,D=K.length,v=new U(Y),j=v.d=[],h=0;z[h]==(K[h]||0);)++h;if(z[h]>(K[h]||0)&&--f,s==null?O=s=U.precision:l?O=s+(ur(n)-ur(a))+1:O=s,O<0)return new U(0);if(O=O/Mt+2|0,h=0,M==1)for(p=0,z=z[0],O++;(h<D||p)&&O--;h++)E=p*Nr+(K[h]||0),j[h]=E/z|0,p=E%z|0;else{for(p=Nr/(z[0]+1)|0,p>1&&(z=e(z,p),K=e(K,p),M=z.length,D=K.length),C=M,S=K.slice(0,M),_=S.length;_<M;)S[_++]=0;R=z.slice(),R.unshift(0),T=z[0],z[1]>=Nr/2&&++T;do p=0,d=t(z,S,M,_),d<0?(N=S[0],M!=_&&(N=N*Nr+(S[1]||0)),p=N/T|0,p>1?(p>=Nr&&(p=Nr-1),g=e(z,p),y=g.length,_=S.length,d=t(g,S,y,_),d==1&&(p--,r(g,M<y?R:z,y))):(p==0&&(d=p=1),g=z.slice()),y=g.length,y<_&&g.unshift(0),r(S,g,_),d==-1&&(_=S.length,d=t(z,S,M,_),d<1&&(p++,r(S,M<_?R:z,_))),_=S.length):d===0&&(p++,S=[0]),j[h++]=p,d&&S[0]?S[_++]=K[C]||0:(S=[K[C]],_=1);while((C++<D||S[0]!==void 0)&&O--)}return j[0]||j.shift(),v.e=f,Et(v,l?s+ur(v)+1:s)}})();function l4(e,t){var r,n,a,s,l,d,f=0,h=0,p=e.constructor,g=p.precision;if(ur(e)>16)throw Error(H1+ur(e));if(!e.s)return new p(An);for(Ut=!1,d=g,l=new p(.03125);e.abs().gte(.1);)e=e.times(l),h+=5;for(n=Math.log(po(2,h))/Math.LN10*2+5|0,d+=n,r=a=s=new p(An),p.precision=d;;){if(a=Et(a.times(e),d),r=r.times(++f),l=s.plus(wi(a,r,d)),La(l.d).slice(0,d)===La(s.d).slice(0,d)){for(;h--;)s=Et(s.times(s),d);return p.precision=g,t==null?(Ut=!0,Et(s,g)):s}s=l}}function ur(e){for(var t=e.e*Mt,r=e.d[0];r>=10;r/=10)t++;return t}function Pb(e,t,r){if(t>e.LN10.sd())throw Ut=!0,r&&(e.precision=r),Error(ta+"LN10 precision limit exceeded");return Et(new e(e.LN10),t)}function gs(e){for(var t="";e--;)t+="0";return t}function Md(e,t){var r,n,a,s,l,d,f,h,p,g=1,y=10,v=e,j=v.d,S=v.constructor,_=S.precision;if(v.s<1)throw Error(ta+(v.s?"NaN":"-Infinity"));if(v.eq(An))return new S(0);if(t==null?(Ut=!1,h=_):h=t,v.eq(10))return t==null&&(Ut=!0),Pb(S,h);if(h+=y,S.precision=h,r=La(j),n=r.charAt(0),s=ur(v),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)v=v.times(e),r=La(v.d),n=r.charAt(0),g++;s=ur(v),n>1?(v=new S("0."+r),s++):v=new S(n+"."+r.slice(1))}else return f=Pb(S,h+2,_).times(s+""),v=Md(new S(n+"."+r.slice(1)),h-y).plus(f),S.precision=_,t==null?(Ut=!0,Et(v,_)):v;for(d=l=v=wi(v.minus(An),v.plus(An),h),p=Et(v.times(v),h),a=3;;){if(l=Et(l.times(p),h),f=d.plus(wi(l,new S(a),h)),La(f.d).slice(0,h)===La(d.d).slice(0,h))return d=d.times(2),s!==0&&(d=d.plus(Pb(S,h+2,_).times(s+""))),d=wi(d,new S(g),h),S.precision=_,t==null?(Ut=!0,Et(d,_)):d;d=f,a+=2}}function fP(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Hc(r/Mt),e.d=[],n=(r+1)%Mt,r<0&&(n+=Mt),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Mt;n<a;)e.d.push(+t.slice(n,n+=Mt));t=t.slice(n),n=Mt-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Ut&&(e.e>hp||e.e<-hp))throw Error(H1+r)}else e.s=0,e.e=0,e.d=[0];return e}function Et(e,t,r){var n,a,s,l,d,f,h,p,g=e.d;for(l=1,s=g[0];s>=10;s/=10)l++;if(n=t-l,n<0)n+=Mt,a=t,h=g[p=0];else{if(p=Math.ceil((n+1)/Mt),s=g.length,p>=s)return e;for(h=s=g[p],l=1;s>=10;s/=10)l++;n%=Mt,a=n-Mt+l}if(r!==void 0&&(s=po(10,l-a-1),d=h/s%10|0,f=t<0||g[p+1]!==void 0||h%s,f=r<4?(d||f)&&(r==0||r==(e.s<0?3:2)):d>5||d==5&&(r==4||f||r==6&&(n>0?a>0?h/po(10,l-a):0:g[p-1])%10&1||r==(e.s<0?8:7))),t<1||!g[0])return f?(s=ur(e),g.length=1,t=t-s-1,g[0]=po(10,(Mt-t%Mt)%Mt),e.e=Hc(-t/Mt)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(n==0?(g.length=p,s=1,p--):(g.length=p+1,s=po(10,Mt-n),g[p]=a>0?(h/po(10,l-a)%po(10,a)|0)*s:0),f)for(;;)if(p==0){(g[0]+=s)==Nr&&(g[0]=1,++e.e);break}else{if(g[p]+=s,g[p]!=Nr)break;g[p--]=0,s=1}for(n=g.length;g[--n]===0;)g.pop();if(Ut&&(e.e>hp||e.e<-hp))throw Error(H1+ur(e));return e}function c4(e,t){var r,n,a,s,l,d,f,h,p,g,y=e.constructor,v=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),Ut?Et(t,v):t;if(f=e.d,g=t.d,n=t.e,h=e.e,f=f.slice(),l=h-n,l){for(p=l<0,p?(r=f,l=-l,d=g.length):(r=g,n=h,d=f.length),a=Math.max(Math.ceil(v/Mt),d)+2,l>a&&(l=a,r.length=1),r.reverse(),a=l;a--;)r.push(0);r.reverse()}else{for(a=f.length,d=g.length,p=a<d,p&&(d=a),a=0;a<d;a++)if(f[a]!=g[a]){p=f[a]<g[a];break}l=0}for(p&&(r=f,f=g,g=r,t.s=-t.s),d=f.length,a=g.length-d;a>0;--a)f[d++]=0;for(a=g.length;a>l;){if(f[--a]<g[a]){for(s=a;s&&f[--s]===0;)f[s]=Nr-1;--f[s],f[a]+=Nr}f[a]-=g[a]}for(;f[--d]===0;)f.pop();for(;f[0]===0;f.shift())--n;return f[0]?(t.d=f,t.e=n,Ut?Et(t,v):t):new y(0)}function Vo(e,t,r){var n,a=ur(e),s=La(e.d),l=s.length;return t?(r&&(n=r-l)>0?s=s.charAt(0)+"."+s.slice(1)+gs(n):l>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+gs(-a-1)+s,r&&(n=r-l)>0&&(s+=gs(n))):a>=l?(s+=gs(a+1-l),r&&(n=r-a-1)>0&&(s=s+"."+gs(n))):((n=a+1)<l&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-l)>0&&(a+1===l&&(s+="."),s+=gs(n))),e.s<0?"-"+s:s}function hP(e,t){if(e.length>t)return e.length=t,!0}function u4(e){var t,r,n;function a(s){var l=this;if(!(l instanceof a))return new a(s);if(l.constructor=a,s instanceof a){l.s=s.s,l.e=s.e,l.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Io+s);if(s>0)l.s=1;else if(s<0)s=-s,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(s===~~s&&s<1e7){l.e=0,l.d=[s];return}return fP(l,s.toString())}else if(typeof s!="string")throw Error(Io+s);if(s.charCodeAt(0)===45?(s=s.slice(1),l.s=-1):l.s=1,KW.test(s))fP(l,s);else throw Error(Io+s)}if(a.prototype=Ae,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=u4,a.config=a.set=QW,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function QW(e){if(!e||typeof e!="object")throw Error(ta+"Object expected");var t,r,n,a=["precision",1,Qc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Hc(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Io+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Io+r+": "+n);return this}var V1=u4(FW);An=new V1(1);const yt=V1;function d4(e){var t;return e===0?t=1:t=Math.floor(new yt(e).abs().log(10).toNumber())+1,t}function f4(e,t,r){for(var n=new yt(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}var h4=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},m4=(e,t,r)=>{if(e.lte(0))return new yt(0);var n=d4(e.toNumber()),a=new yt(10).pow(n),s=e.div(a),l=n!==1?.05:.1,d=new yt(Math.ceil(s.div(l).toNumber())).add(r).mul(l),f=d.mul(a);return t?new yt(f.toNumber()):new yt(Math.ceil(f.toNumber()))},HW=(e,t,r)=>{var n=new yt(1),a=new yt(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new yt(10).pow(d4(e)-1),a=new yt(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new yt(Math.floor(e)))}else e===0?a=new yt(Math.floor((t-1)/2)):r||(a=new yt(Math.floor(e)));for(var l=Math.floor((t-1)/2),d=[],f=0;f<t;f++)d.push(a.add(new yt(f-l).mul(n)).toNumber());return d},p4=function(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new yt(0),tickMin:new yt(0),tickMax:new yt(0)};var l=m4(new yt(r).sub(t).div(n-1),a,s),d;t<=0&&r>=0?d=new yt(0):(d=new yt(t).add(r).div(2),d=d.sub(new yt(d).mod(l)));var f=Math.ceil(d.sub(t).div(l).toNumber()),h=Math.ceil(new yt(r).sub(d).div(l).toNumber()),p=f+h+1;return p>n?p4(t,r,n,a,s+1):(p<n&&(h=r>0?h+(n-p):h,f=r>0?f:f+(n-p)),{step:l,tickMin:d.sub(new yt(f).mul(l)),tickMax:d.add(new yt(h).mul(l))})},VW=function(t){var[r,n]=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(a,2),[d,f]=h4([r,n]);if(d===-1/0||f===1/0){var h=f===1/0?[d,...Array(a-1).fill(1/0)]:[...Array(a-1).fill(-1/0),f];return r>n?h.reverse():h}if(d===f)return HW(d,a,s);var{step:p,tickMin:g,tickMax:y}=p4(d,f,l,s,0),v=f4(g,y.add(new yt(.1).mul(p)),p);return r>n?v.reverse():v},GW=function(t,r){var[n,a]=t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[l,d]=h4([n,a]);if(l===-1/0||d===1/0)return[n,a];if(l===d)return[l];var f=Math.max(r,2),h=m4(new yt(d).sub(l).div(f-1),s,0),p=[...f4(new yt(l),new yt(d),h),d];return s===!1&&(p=p.map(g=>Math.round(g))),n>a?p.reverse():p},g4=e=>e.rootProps.maxBarSize,YW=e=>e.rootProps.barGap,y4=e=>e.rootProps.barCategoryGap,WW=e=>e.rootProps.barSize,bf=e=>e.rootProps.stackOffset,v4=e=>e.rootProps.reverseStackOrder,G1=e=>e.options.chartName,Y1=e=>e.rootProps.syncId,b4=e=>e.rootProps.syncMethod,W1=e=>e.options.eventEmitter,cr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},uo={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},Ca={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},bg=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t};function xg(e,t,r){if(r!=="auto")return r;if(e!=null)return Ri(e,t)?"category":"number"}function mP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mP(Object(r),!0).forEach(function(n){XW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XW(e,t,r){return(t=ZW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZW(e){var t=JW(e,"string");return typeof t=="symbol"?t:t+""}function JW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pP={allowDataOverflow:uo.allowDataOverflow,allowDecimals:uo.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:uo.angleAxisId,includeHidden:!1,name:void 0,reversed:uo.reversed,scale:uo.scale,tick:uo.tick,tickCount:void 0,ticks:void 0,type:uo.type,unit:void 0},gP={allowDataOverflow:Ca.allowDataOverflow,allowDecimals:Ca.allowDecimals,allowDuplicatedCategory:Ca.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ca.radiusAxisId,includeHidden:Ca.includeHidden,name:void 0,reversed:Ca.reversed,scale:Ca.scale,tick:Ca.tick,tickCount:Ca.tickCount,ticks:void 0,type:Ca.type,unit:void 0},eX=(e,t)=>{if(t!=null)return e.polarAxis.angleAxis[t]},X1=X([eX,aR],(e,t)=>{var r;if(e!=null)return e;var n=(r=xg(t,"angleAxis",pP.type))!==null&&r!==void 0?r:"category";return mp(mp({},pP),{},{type:n})}),tX=(e,t)=>e.polarAxis.radiusAxis[t],Z1=X([tX,aR],(e,t)=>{var r;if(e!=null)return e;var n=(r=xg(t,"radiusAxis",gP.type))!==null&&r!==void 0?r:"category";return mp(mp({},gP),{},{type:n})}),wg=e=>e.polarOptions,J1=X([Ii,Li,yr],wR),x4=X([wg,J1],(e,t)=>{if(e!=null)return Vr(e.innerRadius,t,0)}),w4=X([wg,J1],(e,t)=>{if(e!=null)return Vr(e.outerRadius,t,t*.8)}),rX=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},j4=X([wg],rX);X([X1,j4],bg);var S4=X([J1,x4,w4],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});X([Z1,S4],bg);var _4=X([ct,wg,x4,w4,Ii,Li],(e,t,r,n,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:l,cy:d,startAngle:f,endAngle:h}=t;return{cx:Vr(l,a,a/2),cy:Vr(d,s,s/2),innerRadius:r,outerRadius:n,startAngle:f,endAngle:h,clockWise:!1}}}),Ht=(e,t)=>t,xf=(e,t,r)=>r;function ej(e){return e==null?void 0:e.id}function N4(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:a,dataKey:s}=r,l=new Map;return e.forEach(d=>{var f,h=(f=d.data)!==null&&f!==void 0?f:n;if(!(h==null||h.length===0)){var p=ej(d);h.forEach((g,y)=>{var v=s==null||a?y:String(Nt(g,s,null)),j=Nt(g,d.dataKey,0),S;l.has(v)?S=l.get(v):S={},Object.assign(S,{[p]:j}),l.set(v,S)})}}),Array.from(l.values())}function jg(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Sg=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function _g(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function nX(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Cr=e=>{var t=ct(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Vc=e=>e.tooltip.settings.axisId;function aX(e){if(e in od)return od[e]();var t="scale".concat(sf(e));if(t in od)return od[t]()}function yP(e){var t=e.ticks,r=e.bandwidth,n=e.range(),a=[Math.min(...n),Math.max(...n)];return{domain:()=>e.domain(),range:(function(s){function l(){return s.apply(this,arguments)}return l.toString=function(){return s.toString()},l})(()=>a),rangeMin:()=>a[0],rangeMax:()=>a[1],isInRange(s){var l=a[0],d=a[1];return l<=d?s>=l&&s<=d:s>=d&&s<=l},bandwidth:r?()=>r.call(e):void 0,ticks:t?s=>t.call(e,s):void 0,map:(s,l)=>{var d=e(s);if(d!=null){if(e.bandwidth&&l!==null&&l!==void 0&&l.position){var f=e.bandwidth();switch(l.position){case"middle":d+=f/2;break;case"end":d+=f;break}}return d}}}}function vP(e,t,r){if(typeof e=="function")return yP(e.copy().domain(t).range(r));if(e!=null){var n=aX(e);if(n!=null)return n.domain(t).range(r),yP(n)}}var O4=(e,t)=>{if(t!=null)switch(e){case"linear":{if(!Ci(t)){for(var r,n,a=0;a<t.length;a++){var s=t[a];nt(s)&&((r===void 0||s<r)&&(r=s),(n===void 0||s>n)&&(n=s))}return r!==void 0&&n!==void 0?[r,n]:void 0}return t}default:return t}};function bP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bP(Object(r),!0).forEach(function(n){iX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iX(e,t,r){return(t=sX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sX(e){var t=oX(e,"string");return typeof t=="symbol"?t:t+""}function oX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iw=[0,"auto"],jr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},E4=(e,t)=>e.cartesianAxis.xAxis[t],Ui=(e,t)=>{var r=E4(e,t);return r??jr},Sr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:iw,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:uf},A4=(e,t)=>e.cartesianAxis.yAxis[t],zi=(e,t)=>{var r=A4(e,t);return r??Sr},lX={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},tj=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??lX},er=(e,t,r)=>{switch(t){case"xAxis":return Ui(e,r);case"yAxis":return zi(e,r);case"zAxis":return tj(e,r);case"angleAxis":return X1(e,r);case"radiusAxis":return Z1(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},cX=(e,t,r)=>{switch(t){case"xAxis":return Ui(e,r);case"yAxis":return zi(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Gc=(e,t,r)=>{switch(t){case"xAxis":return Ui(e,r);case"yAxis":return zi(e,r);case"angleAxis":return X1(e,r);case"radiusAxis":return Z1(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},C4=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function rj(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Ng=e=>e.graphicalItems.cartesianItems,uX=X([Ht,xf],rj),nj=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),wf=X([Ng,er,uX],nj,{memoizeOptions:{resultEqualityCheck:_g}}),P4=X([wf],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(jg)),k4=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),dX=X([wf],k4),aj=e=>e.map(t=>t.data).filter(Boolean).flat(1),fX=X([wf],aj,{memoizeOptions:{resultEqualityCheck:_g}}),ij=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},sj=X([fX,Q1],ij),oj=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Nt(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Nt(a,n)}))):e.map(n=>({value:n})),Og=X([sj,er,wf],oj);function T4(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Sm(e){if(Ua(e)||e instanceof Date){var t=Number(e);if(nt(t))return t}}function xP(e){if(Array.isArray(e)){var t=[Sm(e[0]),Sm(e[1])];return Ci(t)?t:void 0}var r=Sm(e);if(r!=null)return[r,r]}function Pi(e){return e.map(Sm).filter(mn)}function hX(e,t,r){return!r||typeof t!="number"||$a(t)?[]:r.length?Pi(r.flatMap(n=>{var a=Nt(e,n.dataKey),s,l;if(Array.isArray(a)?[s,l]=a:s=l=a,!(!nt(s)||!nt(l)))return[t-s,t+l]})):[]}var br=e=>{var t=Cr(e),r=Vc(e);return Gc(e,t,r)},jf=X([br],e=>e==null?void 0:e.dataKey),mX=X([P4,Q1,br],N4),D4=(e,t,r,n)=>{var a={},s=t.reduce((l,d)=>{if(d.stackId==null)return l;var f=l[d.stackId];return f==null&&(f=[]),f.push(d),l[d.stackId]=f,l},a);return Object.fromEntries(Object.entries(s).map(l=>{var[d,f]=l,h=n?[...f].reverse():f,p=h.map(ej);return[d,{stackedData:MQ(e,p,r),graphicalItems:h}]}))},sw=X([mX,P4,bf,v4],D4),M4=(e,t,r,n)=>{var{dataStartIndex:a,dataEndIndex:s}=t;if(n==null&&r!=="zAxis"){var l=$Q(e,a,s);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},pX=X([er],e=>e.allowDataOverflow),lj=e=>{var t;if(e==null||!("domain"in e))return iw;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=Pi(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:iw},cj=X([er],lj),uj=X([cj,pX],i4),gX=X([sw,$i,Ht,uj],M4,{memoizeOptions:{resultEqualityCheck:Sg}}),Eg=e=>e.errorBars,yX=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>T4(r,n)),gp=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),l=Math.min(...s),d=Math.max(...s);return[l,d]}},dj=(e,t,r,n,a)=>{var s,l;if(r.length>0&&e.forEach(d=>{r.forEach(f=>{var h,p,g=(h=n[f.id])===null||h===void 0?void 0:h.filter(N=>T4(a,N)),y=Nt(d,(p=t.dataKey)!==null&&p!==void 0?p:f.dataKey),v=hX(d,y,g);if(v.length>=2){var j=Math.min(...v),S=Math.max(...v);(s==null||j<s)&&(s=j),(l==null||S>l)&&(l=S)}var _=xP(y);_!=null&&(s=s==null?_[0]:Math.min(s,_[0]),l=l==null?_[1]:Math.max(l,_[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(d=>{var f=xP(Nt(d,t.dataKey));f!=null&&(s=s==null?f[0]:Math.min(s,f[0]),l=l==null?f[1]:Math.max(l,f[1]))}),nt(s)&&nt(l))return[s,l]},vX=X([sj,er,dX,Eg,Ht],dj,{memoizeOptions:{resultEqualityCheck:Sg}});function bX(e){var{value:t}=e;if(Ua(t)||t instanceof Date)return t}var xX=(e,t,r)=>{var n=e.map(bX).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&eM(n))?NR(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},R4=e=>e.referenceElements.dots,Yc=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),wX=X([R4,Ht,xf],Yc),I4=e=>e.referenceElements.areas,jX=X([I4,Ht,xf],Yc),L4=e=>e.referenceElements.lines,SX=X([L4,Ht,xf],Yc),B4=(e,t)=>{if(e!=null){var r=Pi(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},_X=X(wX,Ht,B4),$4=(e,t)=>{if(e!=null){var r=Pi(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},NX=X([jX,Ht],$4);function OX(e){var t;if(e.x!=null)return Pi([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:Pi(r)}function EX(e){var t;if(e.y!=null)return Pi([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:Pi(r)}var U4=(e,t)=>{if(e!=null){var r=e.flatMap(n=>t==="xAxis"?OX(n):EX(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},AX=X([SX,Ht],U4),CX=X(_X,AX,NX,(e,t,r)=>gp(e,r,t)),fj=(e,t,r,n,a,s,l,d)=>{if(r!=null)return r;var f=l==="vertical"&&d==="xAxis"||l==="horizontal"&&d==="yAxis",h=f?gp(n,s,a):gp(s,a);return qW(t,h,e.allowDataOverflow)},PX=X([er,cj,uj,gX,vX,CX,ct,Ht],fj,{memoizeOptions:{resultEqualityCheck:Sg}}),kX=[0,1],hj=(e,t,r,n,a,s,l)=>{if(!((e==null||r==null||r.length===0)&&l===void 0)){var{dataKey:d,type:f}=e,h=Ri(t,s);if(h&&d==null){var p;return NR(0,(p=r==null?void 0:r.length)!==null&&p!==void 0?p:0)}return f==="category"?xX(n,e,h):a==="expand"?kX:l}},mj=X([er,ct,sj,Og,bf,Ht,PX],hj);function TX(e){return e in od}var z4=(e,t,r)=>{if(e!=null){var{scale:n,type:a}=e;if(n==="auto")return a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!t)?"point":a==="category"?"band":"linear";if(typeof n=="string"){var s="scale".concat(sf(n));return TX(s)?s:"point"}}},Fs=X([er,C4,G1],z4);function pj(e,t,r,n){if(!(r==null||n==null))return typeof e.scale=="function"?vP(e.scale,r,n):vP(t,r,n)}var gj=(e,t,r)=>{var n=lj(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Ci(e))return VW(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Ci(e))return GW(e,t.tickCount,t.allowDecimals)}},yj=X([mj,Gc,Fs],gj),vj=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Ci(t)&&Array.isArray(r)&&r.length>0){var a,s,l=t[0],d=(a=r[0])!==null&&a!==void 0?a:0,f=t[1],h=(s=r[r.length-1])!==null&&s!==void 0?s:0;return[Math.min(l,d),Math.max(f,h)]}return t},DX=X([er,mj,yj,Ht],vj),MX=X(Og,er,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Pi(e.map(g=>g.value))).sort((g,y)=>g-y),a=n[0],s=n[n.length-1];if(a==null||s==null)return 1/0;var l=s-a;if(l===0)return 1/0;for(var d=0;d<n.length-1;d++){var f=n[d],h=n[d+1];if(!(f==null||h==null)){var p=h-f;r=Math.min(r,p)}}return r/l}}),q4=X(MX,ct,y4,yr,(e,t,r,n,a)=>a,(e,t,r,n,a)=>{if(!nt(e))return 0;var s=t==="vertical"?n.height:n.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var l=Vr(r,e*s),d=e*s/2;return d-l-(d-l)/s*l}return 0}),RX=(e,t,r)=>{var n=Ui(e,t);return n==null||typeof n.padding!="string"?0:q4(e,"xAxis",t,r,n.padding)},IX=(e,t,r)=>{var n=zi(e,t);return n==null||typeof n.padding!="string"?0:q4(e,"yAxis",t,r,n.padding)},LX=X(Ui,RX,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),BX=X(zi,IX,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),$X=X([yr,LX,sg,ig,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),UX=X([yr,ct,BX,sg,ig,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:l}=a;return s?[n.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Sf=(e,t,r,n)=>{var a;switch(t){case"xAxis":return $X(e,r,n);case"yAxis":return UX(e,r,n);case"zAxis":return(a=tj(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return j4(e);case"radiusAxis":return S4(e,r);default:return}},F4=X([er,Sf],bg),zX=X([Fs,DX],O4),Ag=X([er,Fs,zX,F4],pj);X([wf,Eg,Ht],yX);function K4(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Cg=(e,t)=>t,Pg=(e,t,r)=>r,qX=X(ng,Cg,Pg,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(K4)),FX=X(ag,Cg,Pg,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(K4)),Q4=(e,t)=>({width:e.width,height:t.height}),KX=(e,t)=>{var r=typeof t.width=="number"?t.width:uf;return{width:r,height:e.height}},H4=X(yr,Ui,Q4),QX=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},HX=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},VX=X(Li,yr,qX,Cg,Pg,(e,t,r,n,a)=>{var s={},l;return r.forEach(d=>{var f=Q4(t,d);l==null&&(l=QX(t,n,e));var h=n==="top"&&!a||n==="bottom"&&a;s[d.id]=l-Number(h)*f.height,l+=(h?-1:1)*f.height}),s}),GX=X(Ii,yr,FX,Cg,Pg,(e,t,r,n,a)=>{var s={},l;return r.forEach(d=>{var f=KX(t,d);l==null&&(l=HX(t,n,e));var h=n==="left"&&!a||n==="right"&&a;s[d.id]=l-Number(h)*f.width,l+=(h?-1:1)*f.width}),s}),YX=(e,t)=>{var r=Ui(e,t);if(r!=null)return VX(e,r.orientation,r.mirror)},WX=X([yr,Ui,YX,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:e.left,y:0}:{x:e.left,y:a}}}),XX=(e,t)=>{var r=zi(e,t);if(r!=null)return GX(e,r.orientation,r.mirror)},ZX=X([yr,zi,XX,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:e.top}:{x:a,y:e.top}}}),V4=X(yr,zi,(e,t)=>{var r=typeof t.width=="number"?t.width:uf;return{width:r,height:e.height}}),wP=(e,t,r)=>{switch(t){case"xAxis":return H4(e,r).width;case"yAxis":return V4(e,r).height;default:return}},G4=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:l}=r,d=Ri(e,n),f=t.map(h=>h.value);if(l&&d&&s==="category"&&a&&eM(f))return f}},bj=X([ct,Og,er,Ht],G4),Y4=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,l=Ri(e,n);if(l&&(a==="number"||s!=="auto"))return t.map(d=>d.value)}},xj=X([ct,Og,Gc,Ht],Y4),jP=X([ct,cX,Fs,Ag,bj,xj,Sf,yj,Ht],(e,t,r,n,a,s,l,d,f)=>{if(t!=null){var h=Ri(e,f);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:f,categoricalDomain:s,duplicateDomain:a,isCategorical:h,niceTicks:d,range:l,realScaleType:r,scale:n}}}),JX=(e,t,r,n,a,s,l,d,f)=>{if(!(t==null||n==null)){var h=Ri(e,f),{type:p,ticks:g,tickCount:y}=t,v=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,j=p==="category"&&n.bandwidth?n.bandwidth()/v:0;j=f==="angleAxis"&&s!=null&&s.length>=2?Or(s[0]-s[1])*2*j:j;var S=g||a;return S?S.map((_,N)=>{var O=l?l.indexOf(_):_,E=n.map(O);return nt(E)?{index:N,coordinate:E+j,value:_,offset:j}:null}).filter(mn):h&&d?d.map((_,N)=>{var O=n.map(_);return nt(O)?{coordinate:O+j,value:_,index:N,offset:j}:null}).filter(mn):n.ticks?n.ticks(y).map((_,N)=>{var O=n.map(_);return nt(O)?{coordinate:O+j,value:_,index:N,offset:j}:null}).filter(mn):n.domain().map((_,N)=>{var O=n.map(_);return nt(O)?{coordinate:O+j,value:l?l[_]:_,index:N,offset:j}:null}).filter(mn)}},W4=X([ct,Gc,Fs,Ag,yj,Sf,bj,xj,Ht],JX),eZ=(e,t,r,n,a,s,l)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var d=Ri(e,l),{tickCount:f}=t,h=0;return h=l==="angleAxis"&&(n==null?void 0:n.length)>=2?Or(n[0]-n[1])*2*h:h,d&&s?s.map((p,g)=>{var y=r.map(p);return nt(y)?{coordinate:y+h,value:p,index:g,offset:h}:null}).filter(mn):r.ticks?r.ticks(f).map((p,g)=>{var y=r.map(p);return nt(y)?{coordinate:y+h,value:p,index:g,offset:h}:null}).filter(mn):r.domain().map((p,g)=>{var y=r.map(p);return nt(y)?{coordinate:y+h,value:a?a[p]:p,index:g,offset:h}:null}).filter(mn)}},Ms=X([ct,Gc,Ag,Sf,bj,xj,Ht],eZ),Rs=X(er,Ag,(e,t)=>{if(!(e==null||t==null))return pp(pp({},e),{},{scale:t})}),tZ=X([er,Fs,mj,F4],pj);X((e,t,r)=>tj(e,r),tZ,(e,t)=>{if(!(e==null||t==null))return pp(pp({},e),{},{scale:t})});var rZ=X([ct,ng,ag],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),X4=e=>e.options.defaultTooltipEventType,Z4=e=>e.options.validateTooltipEventTypes;function J4(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function wj(e,t){var r=X4(e),n=Z4(e);return J4(t,r,n)}function nZ(e){return Pe(t=>wj(t,e))}var eI=(e,t)=>{var r,n=Number(t);if(!($a(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},aZ=e=>e.tooltip.settings,bs={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},iZ={itemInteraction:{click:bs,hover:bs},axisInteraction:{click:bs,hover:bs},keyboardInteraction:bs,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},tI=gn({name:"tooltip",initialState:iZ,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Lt()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,a=pa(e).tooltipItemPayloads.indexOf(r);a>-1&&(e.tooltipItemPayloads[a]=n)},prepare:Lt()},removeTooltipEntrySettings:{reducer(e,t){var r=pa(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Lt()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:sZ,replaceTooltipEntrySettings:oZ,removeTooltipEntrySettings:lZ,setTooltipSettingsState:cZ,setActiveMouseOverItemIndex:rI,mouseLeaveItem:uZ,mouseLeaveChart:nI,setActiveClickItemIndex:dZ,setMouseOverAxisIndex:aI,setMouseClickAxisIndex:fZ,setSyncInteraction:ow,setKeyboardInteraction:lw}=tI.actions,hZ=tI.reducer;function SP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SP(Object(r),!0).forEach(function(n){mZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mZ(e,t,r){return(t=pZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pZ(e){var t=gZ(e,"string");return typeof t=="symbol"?t:t+""}function gZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yZ(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function vZ(e){return e.index!=null}var iI=(e,t,r,n)=>{if(t==null)return bs;var a=yZ(e,t,r);if(a==null)return bs;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(vZ(a)){if(s)return hm(hm({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return hm(hm({},bs),{},{coordinate:a.coordinate})};function bZ(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function xZ(e,t){var r=bZ(e),n=t[0],a=t[1];if(r===void 0)return!1;var s=Math.min(n,a),l=Math.max(n,a);return r>=s&&r<=l}function wZ(e,t,r){if(r==null||t==null)return!0;var n=Nt(e,t);return n==null||!Ci(r)?!0:xZ(n,r)}var jj=(e,t,r,n)=>{var a=e==null?void 0:e.index;if(a==null)return null;var s=Number(a);if(!nt(s))return a;var l=0,d=1/0;t.length>0&&(d=t.length-1);var f=Math.max(l,Math.min(s,d)),h=t[f];return h==null||wZ(h,r,n)?String(f):null},sI=(e,t,r,n,a,s,l)=>{if(s!=null){var d=l[0],f=d==null?void 0:d.getPosition(s);if(f!=null)return f;var h=a==null?void 0:a[Number(s)];if(h)switch(r){case"horizontal":return{x:h.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:h.coordinate}}}},oI=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;if(r==="hover"?a=e.itemInteraction.hover.graphicalItemId:a=e.itemInteraction.click.graphicalItemId,a==null&&n!=null){var s=e.tooltipItemPayloads[0];return s!=null?[s]:[]}return e.tooltipItemPayloads.filter(l=>{var d;return((d=l.settings)===null||d===void 0?void 0:d.graphicalItemId)===a})},lI=e=>e.options.tooltipPayloadSearcher,Wc=e=>e.tooltip;function _P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function NP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_P(Object(r),!0).forEach(function(n){jZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_P(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jZ(e,t,r){return(t=SZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SZ(e){var t=_Z(e,"string");return typeof t=="symbol"?t:t+""}function _Z(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NZ(e,t){return e??t}var cI=(e,t,r,n,a,s,l)=>{if(!(t==null||s==null)){var{chartData:d,computedData:f,dataStartIndex:h,dataEndIndex:p}=r,g=[];return e.reduce((y,v)=>{var j,{dataDefinedOnItem:S,settings:_}=v,N=NZ(S,d),O=Array.isArray(N)?VM(N,h,p):N,E=(j=_==null?void 0:_.dataKey)!==null&&j!==void 0?j:n,C=_==null?void 0:_.nameKey,D;if(n&&Array.isArray(O)&&!Array.isArray(O[0])&&l==="axis"?D=tM(O,n,a):D=s(O,t,f,C),Array.isArray(D))D.forEach(M=>{var R=NP(NP({},_),{},{name:M.name,unit:M.unit,color:void 0,fill:void 0});y.push(SC({tooltipEntrySettings:R,dataKey:M.dataKey,payload:M.payload,value:Nt(M.payload,M.dataKey),name:M.name}))});else{var T;y.push(SC({tooltipEntrySettings:_,dataKey:E,payload:D,value:Nt(D,E),name:(T=Nt(D,C))!==null&&T!==void 0?T:_==null?void 0:_.name}))}return y},g)}},Sj=X([br,C4,G1],z4),OZ=X([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),EZ=X([Cr,Vc],rj),Xc=X([OZ,br,EZ],nj,{memoizeOptions:{resultEqualityCheck:_g}}),AZ=X([Xc],e=>e.filter(jg)),CZ=X([Xc],aj,{memoizeOptions:{resultEqualityCheck:_g}}),Zc=X([CZ,$i],ij),PZ=X([AZ,$i,br],N4),_j=X([Zc,br,Xc],oj),uI=X([br],lj),kZ=X([br],e=>e.allowDataOverflow),dI=X([uI,kZ],i4),TZ=X([Xc],e=>e.filter(jg)),DZ=X([PZ,TZ,bf,v4],D4),MZ=X([DZ,$i,Cr,dI],M4),RZ=X([Xc],k4),IZ=X([Zc,br,RZ,Eg,Cr],dj,{memoizeOptions:{resultEqualityCheck:Sg}}),LZ=X([R4,Cr,Vc],Yc),BZ=X([LZ,Cr],B4),$Z=X([I4,Cr,Vc],Yc),UZ=X([$Z,Cr],$4),zZ=X([L4,Cr,Vc],Yc),qZ=X([zZ,Cr],U4),FZ=X([BZ,qZ,UZ],gp),KZ=X([br,uI,dI,MZ,IZ,FZ,ct,Cr],fj),_f=X([br,ct,Zc,_j,bf,Cr,KZ],hj),QZ=X([_f,br,Sj],gj),HZ=X([br,_f,QZ,Cr],vj),fI=e=>{var t=Cr(e),r=Vc(e),n=!1;return Sf(e,t,r,n)},hI=X([br,fI],bg),mI=X([br,Sj,HZ,hI],pj),VZ=X([ct,_j,br,Cr],G4),GZ=X([ct,_j,br,Cr],Y4),YZ=(e,t,r,n,a,s,l,d)=>{if(t){var{type:f}=t,h=Ri(e,d);if(n){var p=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,g=f==="category"&&n.bandwidth?n.bandwidth()/p:0;return g=d==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Or(a[0]-a[1])*2*g:g,h&&l?l.map((y,v)=>{var j=n.map(y);return nt(j)?{coordinate:j+g,value:y,index:v,offset:g}:null}).filter(mn):n.domain().map((y,v)=>{var j=n.map(y);return nt(j)?{coordinate:j+g,value:s?s[y]:y,index:v,offset:g}:null}).filter(mn)}}},qi=X([ct,br,Sj,mI,fI,VZ,GZ,Cr],YZ),Nj=X([X4,Z4,aZ],(e,t,r)=>J4(r.shared,e,t)),pI=e=>e.tooltip.settings.trigger,Oj=e=>e.tooltip.settings.defaultIndex,Nf=X([Wc,Nj,pI,Oj],iI),Is=X([Nf,Zc,jf,_f],jj),gI=X([qi,Is],eI),Ej=X([Nf],e=>{if(e)return e.dataKey}),WZ=X([Nf],e=>{if(e)return e.graphicalItemId}),yI=X([Wc,Nj,pI,Oj],oI),XZ=X([Ii,Li,ct,yr,qi,Oj,yI],sI),ZZ=X([Nf,XZ],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),JZ=X([Nf],e=>{var t;return(t=e==null?void 0:e.active)!==null&&t!==void 0?t:!1}),eJ=X([yI,Is,$i,jf,gI,lI,Nj],cI),tJ=X([eJ],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function OP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function EP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OP(Object(r),!0).forEach(function(n){rJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rJ(e,t,r){return(t=nJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nJ(e){var t=aJ(e,"string");return typeof t=="symbol"?t:t+""}function aJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iJ=()=>Pe(br),sJ=()=>{var e=iJ(),t=Pe(qi),r=Pe(mI);return Cc(!e||!r?void 0:EP(EP({},e),{},{scale:r}),t)};function AP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AP(Object(r),!0).forEach(function(n){oJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oJ(e,t,r){return(t=lJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lJ(e){var t=cJ(e,"string");return typeof t=="symbol"?t:t+""}function cJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uJ=(e,t,r,n)=>{var a=t.find(s=>s&&s.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},dJ=(e,t,r,n)=>{var a=t.find(h=>h&&h.index===r);if(a){if(e==="centric"){var s=a.coordinate,{radius:l}=n;return Zl(Zl(Zl({},n),lr(n.cx,n.cy,l,s)),{},{angle:s,radius:l})}var d=a.coordinate,{angle:f}=n;return Zl(Zl(Zl({},n),lr(n.cx,n.cy,d,f)),{},{angle:f,radius:d})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function fJ(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var vI=(e,t,r,n,a)=>{var s,l=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var d=0;d<l;d++){var f,h,p,g,y,v=d>0?(f=r[d-1])===null||f===void 0?void 0:f.coordinate:(h=r[l-1])===null||h===void 0?void 0:h.coordinate,j=(p=r[d])===null||p===void 0?void 0:p.coordinate,S=d>=l-1?(g=r[0])===null||g===void 0?void 0:g.coordinate:(y=r[d+1])===null||y===void 0?void 0:y.coordinate,_=void 0;if(!(v==null||j==null||S==null))if(Or(j-v)!==Or(S-j)){var N=[];if(Or(S-j)===Or(a[1]-a[0])){_=S;var O=j+a[1]-a[0];N[0]=Math.min(O,(O+v)/2),N[1]=Math.max(O,(O+v)/2)}else{_=v;var E=S+a[1]-a[0];N[0]=Math.min(j,(E+j)/2),N[1]=Math.max(j,(E+j)/2)}var C=[Math.min(j,(_+j)/2),Math.max(j,(_+j)/2)];if(e>C[0]&&e<=C[1]||e>=N[0]&&e<=N[1]){var D;return(D=r[d])===null||D===void 0?void 0:D.index}}else{var T=Math.min(v,S),M=Math.max(v,S);if(e>(T+j)/2&&e<=(M+j)/2){var R;return(R=r[d])===null||R===void 0?void 0:R.index}}}else if(t)for(var U=0;U<l;U++){var Y=t[U];if(Y!=null){var K=t[U+1],z=t[U-1];if(U===0&&K!=null&&e<=(Y.coordinate+K.coordinate)/2||U===l-1&&z!=null&&e>(Y.coordinate+z.coordinate)/2||U>0&&U<l-1&&z!=null&&K!=null&&e>(Y.coordinate+z.coordinate)/2&&e<=(Y.coordinate+K.coordinate)/2)return Y.index}}return-1},hJ=()=>Pe(G1),Aj=(e,t)=>t,bI=(e,t,r)=>r,Cj=(e,t,r,n)=>n,mJ=X(qi,e=>Vp(e,t=>t.coordinate)),Pj=X([Wc,Aj,bI,Cj],iI),kj=X([Pj,Zc,jf,_f],jj),pJ=(e,t,r)=>{if(t!=null){var n=Wc(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},xI=X([Wc,Aj,bI,Cj],oI),yp=X([Ii,Li,ct,yr,qi,Cj,xI],sI),gJ=X([Pj,yp],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),wI=X([qi,kj],eI),yJ=X([xI,kj,$i,jf,wI,lI,Aj],cI),vJ=X([Pj,kj],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),bJ=(e,t,r,n,a,s,l)=>{if(!(!e||!r||!n||!a)&&fJ(e,l)){var d=UQ(e,t),f=vI(d,s,a,r,n),h=uJ(t,a,f,e);return{activeIndex:String(f),activeCoordinate:h}}},xJ=(e,t,r,n,a,s,l)=>{if(!(!e||!n||!a||!s||!r)){var d=nG(e,r);if(d){var f=zQ(d,t),h=vI(f,l,s,n,a),p=dJ(t,s,h,d);return{activeIndex:String(h),activeCoordinate:p}}}},wJ=(e,t,r,n,a,s,l,d)=>{if(!(!e||!t||!n||!a||!s))return t==="horizontal"||t==="vertical"?bJ(e,t,n,a,s,l,d):xJ(e,t,r,n,a,s,l)},jJ=X(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElement:n.element}}),SJ=X(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(cr)),r=Array.from(new Set(t));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:nX}});function CP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function PP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CP(Object(r),!0).forEach(function(n){_J(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _J(e,t,r){return(t=NJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NJ(e){var t=OJ(e,"string");return typeof t=="symbol"?t:t+""}function OJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EJ={},AJ={zIndexMap:Object.values(cr).reduce((e,t)=>PP(PP({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),EJ)},CJ=new Set(Object.values(cr));function PJ(e){return CJ.has(e)}var jI=gn({name:"zIndex",initialState:AJ,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Lt()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!PJ(r)&&delete e.zIndexMap[r])},prepare:Lt()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:a}=t.payload;e.zIndexMap[r]?a?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:a?void 0:n,panoramaElement:a?n:void 0}},prepare:Lt()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:Lt()}}}),{registerZIndexPortal:kJ,unregisterZIndexPortal:TJ,registerZIndexPortalElement:DJ,unregisterZIndexPortalElement:MJ}=jI.actions,RJ=jI.reducer;function yn(e){var{zIndex:t,children:r}=e,n=vH(),a=n&&t!==void 0&&t!==0,s=Yr(),l=kt();x.useLayoutEffect(()=>a?(l(kJ({zIndex:t})),()=>{l(TJ({zIndex:t}))}):Xo,[l,t,a]);var d=Pe(f=>jJ(f,t,s));return a?d?kp.createPortal(r,d):null:r}function cw(){return cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cw.apply(null,arguments)}function kP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kP(Object(r),!0).forEach(function(n){IJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IJ(e,t,r){return(t=LJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LJ(e){var t=BJ(e,"string");return typeof t=="symbol"?t:t+""}function BJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $J(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return x.isValidElement(t)?x.cloneElement(t,n):x.createElement(r,n)}function UJ(e){var t,{coordinate:r,payload:n,index:a,offset:s,tooltipAxisBandSize:l,layout:d,cursor:f,tooltipEventType:h,chartName:p}=e,g=r,y=n,v=a;if(!f||!g||p!=="ScatterChart"&&h!=="axis")return null;var j,S,_;if(p==="ScatterChart")j=g,S=yV,_=cr.cursorLine;else if(p==="BarChart")j=vV(d,g,s,l),S=xR,_=cr.cursorRectangle;else if(d==="radial"&&nM(g)){var{cx:N,cy:O,radius:E,startAngle:C,endAngle:D}=jR(g);j={cx:N,cy:O,startAngle:C,endAngle:D,innerRadius:E,outerRadius:E},S=_R,_=cr.cursorLine}else j={points:oG(d,g,s)},S=w1,_=cr.cursorLine;var T=typeof f=="object"&&"className"in f?f.className:void 0,M=mm(mm(mm(mm({stroke:"#ccc",pointerEvents:"none"},s),j),Uo(f)),{},{payload:y,payloadIndex:v,className:ot("recharts-tooltip-cursor",T)});return x.createElement(yn,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:_},x.createElement($J,{cursor:f,cursorComp:S,cursorProps:M}))}function zJ(e){var t=sJ(),r=rR(),n=Zo(),a=hJ();return t==null||r==null||n==null||a==null?null:x.createElement(UJ,cw({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var SI=x.createContext(null),qJ=()=>x.useContext(SI),kb={exports:{}},TP;function FJ(){return TP||(TP=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(f,h,p){this.fn=f,this.context=h,this.once=p||!1}function s(f,h,p,g,y){if(typeof p!="function")throw new TypeError("The listener must be a function");var v=new a(p,g||f,y),j=r?r+h:h;return f._events[j]?f._events[j].fn?f._events[j]=[f._events[j],v]:f._events[j].push(v):(f._events[j]=v,f._eventsCount++),f}function l(f,h){--f._eventsCount===0?f._events=new n:delete f._events[h]}function d(){this._events=new n,this._eventsCount=0}d.prototype.eventNames=function(){var h=[],p,g;if(this._eventsCount===0)return h;for(g in p=this._events)t.call(p,g)&&h.push(r?g.slice(1):g);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},d.prototype.listeners=function(h){var p=r?r+h:h,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var y=0,v=g.length,j=new Array(v);y<v;y++)j[y]=g[y].fn;return j},d.prototype.listenerCount=function(h){var p=r?r+h:h,g=this._events[p];return g?g.fn?1:g.length:0},d.prototype.emit=function(h,p,g,y,v,j){var S=r?r+h:h;if(!this._events[S])return!1;var _=this._events[S],N=arguments.length,O,E;if(_.fn){switch(_.once&&this.removeListener(h,_.fn,void 0,!0),N){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,p),!0;case 3:return _.fn.call(_.context,p,g),!0;case 4:return _.fn.call(_.context,p,g,y),!0;case 5:return _.fn.call(_.context,p,g,y,v),!0;case 6:return _.fn.call(_.context,p,g,y,v,j),!0}for(E=1,O=new Array(N-1);E<N;E++)O[E-1]=arguments[E];_.fn.apply(_.context,O)}else{var C=_.length,D;for(E=0;E<C;E++)switch(_[E].once&&this.removeListener(h,_[E].fn,void 0,!0),N){case 1:_[E].fn.call(_[E].context);break;case 2:_[E].fn.call(_[E].context,p);break;case 3:_[E].fn.call(_[E].context,p,g);break;case 4:_[E].fn.call(_[E].context,p,g,y);break;default:if(!O)for(D=1,O=new Array(N-1);D<N;D++)O[D-1]=arguments[D];_[E].fn.apply(_[E].context,O)}}return!0},d.prototype.on=function(h,p,g){return s(this,h,p,g,!1)},d.prototype.once=function(h,p,g){return s(this,h,p,g,!0)},d.prototype.removeListener=function(h,p,g,y){var v=r?r+h:h;if(!this._events[v])return this;if(!p)return l(this,v),this;var j=this._events[v];if(j.fn)j.fn===p&&(!y||j.once)&&(!g||j.context===g)&&l(this,v);else{for(var S=0,_=[],N=j.length;S<N;S++)(j[S].fn!==p||y&&!j[S].once||g&&j[S].context!==g)&&_.push(j[S]);_.length?this._events[v]=_.length===1?_[0]:_:l(this,v)}return this},d.prototype.removeAllListeners=function(h){var p;return h?(p=r?r+h:h,this._events[p]&&l(this,p)):(this._events=new n,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=r,d.EventEmitter=d,e.exports=d})(kb)),kb.exports}var KJ=FJ();const QJ=Fa(KJ);var Rd=new QJ,uw="recharts.syncEvent.tooltip",DP="recharts.syncEvent.brush",Tj=(e,t)=>{if(t&&Array.isArray(e)){var r=Number.parseInt(t,10);if(!$a(r))return e[r]}},HJ={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},_I=gn({name:"options",initialState:HJ,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),VJ=_I.reducer,{createEventEmitter:GJ}=_I.actions;function YJ(e){return e.tooltip.syncInteraction}var WJ={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},NI=gn({name:"chartData",initialState:WJ,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:MP,setDataStartEndIndexes:XJ,setComputedData:yle}=NI.actions,ZJ=NI.reducer,JJ=["x","y"];function RP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RP(Object(r),!0).forEach(function(n){eee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eee(e,t,r){return(t=tee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tee(e){var t=ree(e,"string");return typeof t=="symbol"?t:t+""}function ree(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nee(e,t){if(e==null)return{};var r,n,a=aee(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function aee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function iee(){var e=Pe(Y1),t=Pe(W1),r=kt(),n=Pe(b4),a=Pe(qi),s=Zo(),l=og(),d=Pe(f=>f.rootProps.className);x.useEffect(()=>{if(e==null)return Xo;var f=(h,p,g)=>{if(t!==g&&e===h){if(n==="index"){var y;if(l&&p!==null&&p!==void 0&&(y=p.payload)!==null&&y!==void 0&&y.coordinate&&p.payload.sourceViewBox){var v=p.payload.coordinate,{x:j,y:S}=v,_=nee(v,JJ),{x:N,y:O,width:E,height:C}=p.payload.sourceViewBox,D=Jl(Jl({},_),{},{x:l.x+(E?(j-N)/E:0)*l.width,y:l.y+(C?(S-O)/C:0)*l.height});r(Jl(Jl({},p),{},{payload:Jl(Jl({},p.payload),{},{coordinate:D})}))}else r(p);return}if(a!=null){var T;if(typeof n=="function"){var M={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},R=n(a,M);T=a[R]}else n==="value"&&(T=a.find(I=>String(I.value)===p.payload.label));var{coordinate:U}=p.payload;if(T==null||p.payload.active===!1||U==null||l==null){r(ow({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:Y,y:K}=U,z=Math.min(Y,l.x+l.width),pe=Math.min(K,l.y+l.height),le={x:s==="horizontal"?T.coordinate:z,y:s==="horizontal"?pe:T.coordinate},ge=ow({active:p.payload.active,coordinate:le,dataKey:p.payload.dataKey,index:String(T.index),label:p.payload.label,sourceViewBox:p.payload.sourceViewBox,graphicalItemId:p.payload.graphicalItemId});r(ge)}}};return Rd.on(uw,f),()=>{Rd.off(uw,f)}},[d,r,t,e,n,a,s,l])}function see(){var e=Pe(Y1),t=Pe(W1),r=kt();x.useEffect(()=>{if(e==null)return Xo;var n=(a,s,l)=>{t!==l&&e===a&&r(XJ(s))};return Rd.on(DP,n),()=>{Rd.off(DP,n)}},[r,t,e])}function oee(){var e=kt();x.useEffect(()=>{e(GJ())},[e]),iee(),see()}function lee(e,t,r,n,a,s){var l=Pe(v=>pJ(v,e,t)),d=Pe(W1),f=Pe(Y1),h=Pe(b4),p=Pe(YJ),g=p==null?void 0:p.active,y=og();x.useEffect(()=>{if(!g&&f!=null&&d!=null){var v=ow({active:s,coordinate:r,dataKey:l,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:y,graphicalItemId:void 0});Rd.emit(uw,f,v,d)}},[g,r,l,a,n,d,f,h,s,y])}function IP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function LP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IP(Object(r),!0).forEach(function(n){cee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cee(e,t,r){return(t=uee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uee(e){var t=dee(e,"string");return typeof t=="symbol"?t:t+""}function dee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fee(e){return e.dataKey}function hee(e,t){return x.isValidElement(e)?x.cloneElement(e,t):typeof e=="function"?x.createElement(e,t):x.createElement(WH,t)}var BP=[],mee={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function So(e){var t,r,n=dr(e,mee),{active:a,allowEscapeViewBox:s,animationDuration:l,animationEasing:d,content:f,filterNull:h,isAnimationActive:p,offset:g,payloadUniqBy:y,position:v,reverseDirection:j,useTranslate3d:S,wrapperStyle:_,cursor:N,shared:O,trigger:E,defaultIndex:C,portal:D,axisId:T}=n,M=kt(),R=typeof C=="number"?String(C):C;x.useEffect(()=>{M(cZ({shared:O,trigger:E,axisId:T,active:a,defaultIndex:R}))},[M,O,E,T,a,R]);var U=og(),Y=pR(),K=nZ(O),{activeIndex:z,isActive:pe}=(t=Pe(ye=>vJ(ye,K,E,R)))!==null&&t!==void 0?t:{},le=Pe(ye=>yJ(ye,K,E,R)),ge=Pe(ye=>wI(ye,K,E,R)),I=Pe(ye=>gJ(ye,K,E,R)),V=le,ae=qJ(),he=(r=a??pe)!==null&&r!==void 0?r:!1,[Q,P]=yM([V,he]),B=K==="axis"?ge:void 0;lee(K,E,I,B,z,he);var W=D??ae;if(W==null||U==null||K==null)return null;var re=V??BP;he||(re=BP),h&&re.length&&(re=fM(re.filter(ye=>ye.value!=null&&(ye.hide!==!0||n.includeHidden)),y,fee));var G=re.length>0,ve=x.createElement(nV,{allowEscapeViewBox:s,animationDuration:l,animationEasing:d,isAnimationActive:p,active:he,coordinate:I,hasPayload:G,offset:g,position:v,reverseDirection:j,useTranslate3d:S,viewBox:U,wrapperStyle:_,lastBoundingBox:Q,innerRef:P,hasPortalFromProps:!!D},hee(f,LP(LP({},n),{},{payload:re,label:B,active:he,activeIndex:z,coordinate:I,accessibilityLayer:Y})));return x.createElement(x.Fragment,null,kp.createPortal(ve,W),he&&x.createElement(zJ,{cursor:N,tooltipEventType:K,coordinate:I,payload:re,index:z}))}var tl=e=>null;tl.displayName="Cell";function pee(e,t,r){return(t=gee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gee(e){var t=yee(e,"string");return typeof t=="symbol"?t:t+""}function yee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class vee{constructor(t){pee(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function $P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bee(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$P(Object(r),!0).forEach(function(n){xee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$P(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xee(e,t,r){return(t=wee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wee(e){var t=jee(e,"string");return typeof t=="symbol"?t:t+""}function jee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var See={cacheSize:2e3,enableCache:!0},OI=bee({},See),UP=new vee(OI.cacheSize),_ee={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},zP="recharts_measurement_span";function Nee(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",l=t.letterSpacing||"",d=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(l,"|").concat(d)}var qP=(e,t)=>{try{var r=document.getElementById(zP);r||(r=document.createElement("span"),r.setAttribute("id",zP),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,_ee,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},dd=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||dg.isSsr)return{width:0,height:0};if(!OI.enableCache)return qP(t,r);var n=Nee(t,r),a=UP.get(n);if(a)return a;var s=qP(t,r);return UP.set(n,s),s},EI;function Oee(e,t,r){return(t=Eee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Eee(e){var t=Aee(e,"string");return typeof t=="symbol"?t:t+""}function Aee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,KP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Cee=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Pee=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,kee={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Tee=["cm","mm","pt","pc","in","Q","px"];function Dee(e){return Tee.includes(e)}var sc="NaN";function Mee(e,t){return e*kee[t]}class Ur{static parse(t){var r,[,n,a]=(r=Pee.exec(t))!==null&&r!==void 0?r:[];return n==null?Ur.NaN:new Ur(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,$a(t)&&(this.unit=""),r!==""&&!Cee.test(r)&&(this.num=NaN,this.unit=""),Dee(r)&&(this.num=Mee(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Ur(NaN,""):new Ur(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Ur(NaN,""):new Ur(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ur(NaN,""):new Ur(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ur(NaN,""):new Ur(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return $a(this.num)}}EI=Ur;Oee(Ur,"NaN",new EI(NaN,""));function AI(e){if(e==null||e.includes(sc))return sc;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=(r=FP.exec(t))!==null&&r!==void 0?r:[],l=Ur.parse(n??""),d=Ur.parse(s??""),f=a==="*"?l.multiply(d):l.divide(d);if(f.isNaN())return sc;t=t.replace(FP,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,p,g,y]=(h=KP.exec(t))!==null&&h!==void 0?h:[],v=Ur.parse(p??""),j=Ur.parse(y??""),S=g==="+"?v.add(j):v.subtract(j);if(S.isNaN())return sc;t=t.replace(KP,S.toString())}return t}var QP=/\(([^()]*)\)/;function Ree(e){for(var t=e,r;(r=QP.exec(t))!=null;){var[,n]=r;t=t.replace(QP,AI(n))}return t}function Iee(e){var t=e.replace(/\s+/g,"");return t=Ree(t),t=AI(t),t}function Lee(e){try{return Iee(e)}catch{return sc}}function Tb(e){var t=Lee(e.slice(5,-1));return t===sc?"":t}var Bee=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],$ee=["dx","dy","angle","className","breakAll"];function dw(){return dw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dw.apply(null,arguments)}function HP(e,t){if(e==null)return{};var r,n,a=Uee(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Uee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var CI=/[ \f\n\r\t\v\u2028\u2029]+/,PI=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];Qt(t)||(r?a=t.toString().split(""):a=t.toString().split(CI));var s=a.map(d=>({word:d,width:dd(d,n).width})),l=r?0:dd("",n).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}};function zee(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var kI=(e,t,r,n)=>e.reduce((a,s)=>{var{word:l,width:d}=s,f=a[a.length-1];if(f&&d!=null&&(t==null||n||f.width+d+r<Number(t)))f.words.push(l),f.width+=d+r;else{var h={words:[l],width:d};a.push(h)}return a},[]),TI=e=>e.reduce((t,r)=>t.width>r.width?t:r),qee="",VP=(e,t,r,n,a,s,l,d)=>{var f=e.slice(0,t),h=PI({breakAll:r,style:n,children:f+qee});if(!h)return[!1,[]];var p=kI(h.wordsWithComputedWidth,s,l,d),g=p.length>a||TI(p).width>Number(s);return[g,p]},Fee=(e,t,r,n,a)=>{var{maxLines:s,children:l,style:d,breakAll:f}=e,h=Ee(s),p=String(l),g=kI(t,n,r,a);if(!h||a)return g;var y=g.length>s||TI(g).width>Number(n);if(!y)return g;for(var v=0,j=p.length-1,S=0,_;v<=j&&S<=p.length-1;){var N=Math.floor((v+j)/2),O=N-1,[E,C]=VP(p,O,f,d,s,n,r,a),[D]=VP(p,N,f,d,s,n,r,a);if(!E&&!D&&(v=N+1),E&&D&&(j=N-1),!E&&D){_=C;break}S++}return _||g},GP=e=>{var t=Qt(e)?[]:e.toString().split(CI);return[{words:t,width:void 0}]},Kee=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:l}=e;if((t||r)&&!dg.isSsr){var d,f,h=PI({breakAll:s,children:n,style:a});if(h){var{wordsWithComputedWidth:p,spaceWidth:g}=h;d=p,f=g}else return GP(n);return Fee({breakAll:s,children:n,maxLines:l,style:a},d,f,t,!!r)}return GP(n)},DI="#808080",Qee={angle:0,breakAll:!1,capHeight:"0.71em",fill:DI,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},kg=x.forwardRef((e,t)=>{var r=dr(e,Qee),{x:n,y:a,lineHeight:s,capHeight:l,fill:d,scaleToFit:f,textAnchor:h,verticalAnchor:p}=r,g=HP(r,Bee),y=x.useMemo(()=>Kee({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:f,style:g.style,width:g.width}),[g.breakAll,g.children,g.maxLines,f,g.style,g.width]),{dx:v,dy:j,angle:S,className:_,breakAll:N}=g,O=HP(g,$ee);if(!Ua(n)||!Ua(a)||y.length===0)return null;var E=Number(n)+(Ee(v)?v:0),C=Number(a)+(Ee(j)?j:0);if(!nt(E)||!nt(C))return null;var D;switch(p){case"start":D=Tb("calc(".concat(l,")"));break;case"middle":D=Tb("calc(".concat((y.length-1)/2," * -").concat(s," + (").concat(l," / 2))"));break;default:D=Tb("calc(".concat(y.length-1," * -").concat(s,")"));break}var T=[],M=y[0];if(f&&M!=null){var R=M.width,{width:U}=g;T.push("scale(".concat(Ee(U)&&Ee(R)?U/R:1,")"))}return S&&T.push("rotate(".concat(S,", ").concat(E,", ").concat(C,")")),T.length&&(O.transform=T.join(" ")),x.createElement("text",dw({},tn(O),{ref:t,x:E,y:C,className:ot("recharts-text",_),textAnchor:h,fill:d.includes("url")?DI:d}),y.map((Y,K)=>{var z=Y.words.join(N?"":" ");return x.createElement("tspan",{x:E,dy:K===0?D:s,key:"".concat(z,"-").concat(K)},z)}))});kg.displayName="Text";function YP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Pa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YP(Object(r),!0).forEach(function(n){Hee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hee(e,t,r){return(t=Vee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vee(e){var t=Gee(e,"string");return typeof t=="symbol"?t:t+""}function Gee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yee=e=>{var{viewBox:t,position:r,offset:n=0,parentViewBox:a}=e,{x:s,y:l,height:d,upperWidth:f,lowerWidth:h}=g1(t),p=s,g=s+(f-h)/2,y=(p+g)/2,v=(f+h)/2,j=p+f/2,S=d>=0?1:-1,_=S*n,N=S>0?"end":"start",O=S>0?"start":"end",E=f>=0?1:-1,C=E*n,D=E>0?"end":"start",T=E>0?"start":"end",M=a;if(r==="top"){var R={x:p+f/2,y:l-_,horizontalAnchor:"middle",verticalAnchor:N};return M&&(R.height=Math.max(l-M.y,0),R.width=f),R}if(r==="bottom"){var U={x:g+h/2,y:l+d+_,horizontalAnchor:"middle",verticalAnchor:O};return M&&(U.height=Math.max(M.y+M.height-(l+d),0),U.width=h),U}if(r==="left"){var Y={x:y-C,y:l+d/2,horizontalAnchor:D,verticalAnchor:"middle"};return M&&(Y.width=Math.max(Y.x-M.x,0),Y.height=d),Y}if(r==="right"){var K={x:y+v+C,y:l+d/2,horizontalAnchor:T,verticalAnchor:"middle"};return M&&(K.width=Math.max(M.x+M.width-K.x,0),K.height=d),K}var z=M?{width:v,height:d}:{};return r==="insideLeft"?Pa({x:y+C,y:l+d/2,horizontalAnchor:T,verticalAnchor:"middle"},z):r==="insideRight"?Pa({x:y+v-C,y:l+d/2,horizontalAnchor:D,verticalAnchor:"middle"},z):r==="insideTop"?Pa({x:p+f/2,y:l+_,horizontalAnchor:"middle",verticalAnchor:O},z):r==="insideBottom"?Pa({x:g+h/2,y:l+d-_,horizontalAnchor:"middle",verticalAnchor:N},z):r==="insideTopLeft"?Pa({x:p+C,y:l+_,horizontalAnchor:T,verticalAnchor:O},z):r==="insideTopRight"?Pa({x:p+f-C,y:l+_,horizontalAnchor:D,verticalAnchor:O},z):r==="insideBottomLeft"?Pa({x:g+C,y:l+d-_,horizontalAnchor:T,verticalAnchor:N},z):r==="insideBottomRight"?Pa({x:g+h-C,y:l+d-_,horizontalAnchor:D,verticalAnchor:N},z):r&&typeof r=="object"&&(Ee(r.x)||Fo(r.x))&&(Ee(r.y)||Fo(r.y))?Pa({x:s+Vr(r.x,v),y:l+Vr(r.y,d),horizontalAnchor:"end",verticalAnchor:"end"},z):Pa({x:j,y:l+d/2,horizontalAnchor:"middle",verticalAnchor:"middle"},z)},Wee=["labelRef"],Xee=["content"];function WP(e,t){if(e==null)return{};var r,n,a=Zee(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Zee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function XP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ld(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XP(Object(r),!0).forEach(function(n){Jee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jee(e,t,r){return(t=ete(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ete(e){var t=tte(e,"string");return typeof t=="symbol"?t:t+""}function tte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gi(){return gi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gi.apply(null,arguments)}var MI=x.createContext(null),rte=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:a,width:s,height:l,children:d}=e,f=x.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:a,width:s,height:l}),[t,r,n,a,s,l]);return x.createElement(MI.Provider,{value:f},d)},RI=()=>{var e=x.useContext(MI),t=og();return e||(t?g1(t):void 0)},nte=x.createContext(null),ate=()=>{var e=x.useContext(nte),t=Pe(_4);return e||t},ite=e=>{var{value:t,formatter:r}=e,n=Qt(e.children)?t:e.children;return typeof r=="function"?r(n):n},Dj=e=>e!=null&&typeof e=="function",ste=(e,t)=>{var r=Or(t-e),n=Math.min(Math.abs(t-e),360);return r*n},ote=(e,t,r,n,a)=>{var{offset:s,className:l}=e,{cx:d,cy:f,innerRadius:h,outerRadius:p,startAngle:g,endAngle:y,clockWise:v}=a,j=(h+p)/2,S=ste(g,y),_=S>=0?1:-1,N,O;switch(t){case"insideStart":N=g+_*s,O=v;break;case"insideEnd":N=y-_*s,O=!v;break;case"end":N=y+_*s,O=v;break;default:throw new Error("Unsupported position ".concat(t))}O=S<=0?O:!O;var E=lr(d,f,j,N),C=lr(d,f,j,N+(O?1:-1)*359),D="M".concat(E.x,",").concat(E.y,`
    A`).concat(j,",").concat(j,",0,1,").concat(O?0:1,`,
    `).concat(C.x,",").concat(C.y),T=Qt(e.id)?wd("recharts-radial-line-"):e.id;return x.createElement("text",gi({},n,{dominantBaseline:"central",className:ot("recharts-radial-bar-label",l)}),x.createElement("defs",null,x.createElement("path",{id:T,d:D})),x.createElement("textPath",{xlinkHref:"#".concat(T)},r))},lte=(e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:l,startAngle:d,endAngle:f}=e,h=(d+f)/2;if(r==="outside"){var{x:p,y:g}=lr(n,a,l+t,h);return{x:p,y:g,textAnchor:p>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var y=(s+l)/2,{x:v,y:j}=lr(n,a,y,h);return{x:v,y:j,textAnchor:"middle",verticalAnchor:"middle"}},_m=e=>e!=null&&"cx"in e&&Ee(e.cx),cte={angle:0,offset:5,zIndex:cr.label,position:"middle",textBreakAll:!1};function ute(e){if(!_m(e))return e;var{cx:t,cy:r,outerRadius:n}=e,a=n*2;return{x:t-n,y:r-n,width:a,upperWidth:a,lowerWidth:a,height:a}}function ys(e){var t=dr(e,cte),{viewBox:r,parentViewBox:n,position:a,value:s,children:l,content:d,className:f="",textBreakAll:h,labelRef:p}=t,g=ate(),y=RI(),v=a==="center"?y:g??y,j,S,_;r==null?j=v:_m(r)?j=r:j=g1(r);var N=ute(j);if(!j||Qt(s)&&Qt(l)&&!x.isValidElement(d)&&typeof d!="function")return null;var O=ld(ld({},t),{},{viewBox:j});if(x.isValidElement(d)){var{labelRef:E}=O,C=WP(O,Wee);return x.cloneElement(d,C)}if(typeof d=="function"){var{content:D}=O,T=WP(O,Xee);if(S=x.createElement(d,T),x.isValidElement(S))return S}else S=ite(t);var M=tn(t);if(_m(j)){if(a==="insideStart"||a==="insideEnd"||a==="end")return ote(t,a,S,M,j);_=lte(j,t.offset,t.position)}else{if(!N)return null;var R=Yee({viewBox:N,position:a,offset:t.offset,parentViewBox:_m(n)?void 0:n});_=ld(ld({x:R.x,y:R.y,textAnchor:R.horizontalAnchor,verticalAnchor:R.verticalAnchor},R.width!==void 0?{width:R.width}:{}),R.height!==void 0?{height:R.height}:{})}return x.createElement(yn,{zIndex:t.zIndex},x.createElement(kg,gi({ref:p,className:ot("recharts-label",f)},M,_,{textAnchor:zee(M.textAnchor)?M.textAnchor:_.textAnchor,breakAll:h}),S))}ys.displayName="Label";var dte=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?x.createElement(ys,gi({key:"label-implicit"},n)):Ua(e)?x.createElement(ys,gi({key:"label-implicit",value:e},n)):x.isValidElement(e)?e.type===ys?x.cloneElement(e,ld({key:"label-implicit"},n)):x.createElement(ys,gi({key:"label-implicit",content:e},n)):Dj(e)?x.createElement(ys,gi({key:"label-implicit",content:e},n)):e&&typeof e=="object"?x.createElement(ys,gi({},e,{key:"label-implicit"},n)):null};function fte(e){var{label:t,labelRef:r}=e,n=RI();return dte(t,n,r)||null}var Db={},Mb={},ZP;function hte(){return ZP||(ZP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(Mb)),Mb}var Rb={},JP;function mte(){return JP||(JP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(Rb)),Rb}var ek;function pte(){return ek||(ek=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hte(),r=mte(),n=i1();function a(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=a})(Db)),Db}var Ib,tk;function gte(){return tk||(tk=1,Ib=pte().last),Ib}var yte=gte();const vte=Fa(yte);var bte=["valueAccessor"],xte=["dataKey","clockWise","id","textBreakAll","zIndex"];function vp(){return vp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vp.apply(null,arguments)}function rk(e,t){if(e==null)return{};var r,n,a=wte(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var jte=e=>Array.isArray(e.value)?vte(e.value):e.value,II=x.createContext(void 0),LI=II.Provider,BI=x.createContext(void 0),Ste=BI.Provider;function _te(){return x.useContext(II)}function Nte(){return x.useContext(BI)}function Nm(e){var{valueAccessor:t=jte}=e,r=rk(e,bte),{dataKey:n,clockWise:a,id:s,textBreakAll:l,zIndex:d}=r,f=rk(r,xte),h=_te(),p=Nte(),g=h||p;return!g||!g.length?null:x.createElement(yn,{zIndex:d??cr.label},x.createElement(Er,{className:"recharts-label-list"},g.map((y,v)=>{var j,S=Qt(n)?t(y,v):Nt(y.payload,n),_=Qt(s)?{}:{id:"".concat(s,"-").concat(v)};return x.createElement(ys,vp({key:"label-".concat(v)},tn(y),f,_,{fill:(j=r.fill)!==null&&j!==void 0?j:y.fill,parentViewBox:y.parentViewBox,value:S,textBreakAll:l,viewBox:y.viewBox,index:v,zIndex:0}))})))}Nm.displayName="LabelList";function Mj(e){var{label:t}=e;return t?t===!0?x.createElement(Nm,{key:"labelList-implicit"}):x.isValidElement(t)||Dj(t)?x.createElement(Nm,{key:"labelList-implicit",content:t}):typeof t=="object"?x.createElement(Nm,vp({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function fw(){return fw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fw.apply(null,arguments)}var $I=e=>{var{cx:t,cy:r,r:n,className:a}=e,s=ot("recharts-dot",a);return Ee(t)&&Ee(r)&&Ee(n)?x.createElement("circle",fw({},kn(e),a1(e),{className:s,cx:t,cy:r,r:n})):null},UI=e=>e.graphicalItems.polarItems,Ote=X([Ht,xf],rj),Tg=X([UI,er,Ote],nj),Ete=X([Tg],aj),Dg=X([Ete,vg],ij),Ate=X([Dg,er,Tg],oj);X([Dg,er,Tg],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var s,l=Nt(n,(s=t.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Nt(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var nk=()=>{},Cte=X([Dg,er,Tg,Eg,Ht],dj),Pte=X([er,cj,uj,nk,Cte,nk,ct,Ht],fj),zI=X([er,ct,Dg,Ate,bf,Ht,Pte],hj),kte=X([zI,Gc,Fs],gj),Tte=X([er,zI,kte,Ht],vj);X([Fs,Tte],O4);var Dte={radiusAxis:{},angleAxis:{}},qI=gn({name:"polarAxis",initialState:Dte,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:vle,removeRadiusAxis:ble,addAngleAxis:xle,removeAngleAxis:wle}=qI.actions,Mte=qI.reducer;function FI(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}function ak(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ik(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ak(Object(r),!0).forEach(function(n){Rte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ak(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rte(e,t,r){return(t=Ite(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ite(e){var t=Lte(e,"string");return typeof t=="symbol"?t:t+""}function Lte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bte=(e,t)=>t,Rj=X([UI,Bte],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),$te=[],Ij=(e,t,r)=>(r==null?void 0:r.length)===0?$te:r,KI=X([vg,Rj,Ij],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>ik(ik({},t.presentationProps),s.props))),a!=null)return a}}),Ute=X([KI,Rj,Ij],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var s,l=Nt(n,t.nameKey,t.name),d;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?d=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?d=n.fill:d=t.fill,{value:Fc(l,t.dataKey),color:d,payload:n,type:t.legendType}})}),zte=X([KI,Rj,Ij,yr],(e,t,r,n)=>{if(!(t==null||e==null))return qre({offset:n,pieSettings:t,displayedData:e,cells:r})}),Lb={exports:{}},_t={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sk;function qte(){if(sk)return _t;sk=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),v=Symbol.for("react.client.reference");function j(S){if(typeof S=="object"&&S!==null){var _=S.$$typeof;switch(_){case e:switch(S=S.type,S){case r:case a:case n:case f:case h:case y:return S;default:switch(S=S&&S.$$typeof,S){case l:case d:case g:case p:return S;case s:return S;default:return _}}case t:return _}}}return _t.ContextConsumer=s,_t.ContextProvider=l,_t.Element=e,_t.ForwardRef=d,_t.Fragment=r,_t.Lazy=g,_t.Memo=p,_t.Portal=t,_t.Profiler=a,_t.StrictMode=n,_t.Suspense=f,_t.SuspenseList=h,_t.isContextConsumer=function(S){return j(S)===s},_t.isContextProvider=function(S){return j(S)===l},_t.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===e},_t.isForwardRef=function(S){return j(S)===d},_t.isFragment=function(S){return j(S)===r},_t.isLazy=function(S){return j(S)===g},_t.isMemo=function(S){return j(S)===p},_t.isPortal=function(S){return j(S)===t},_t.isProfiler=function(S){return j(S)===a},_t.isStrictMode=function(S){return j(S)===n},_t.isSuspense=function(S){return j(S)===f},_t.isSuspenseList=function(S){return j(S)===h},_t.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===r||S===a||S===n||S===f||S===h||typeof S=="object"&&S!==null&&(S.$$typeof===g||S.$$typeof===p||S.$$typeof===l||S.$$typeof===s||S.$$typeof===d||S.$$typeof===v||S.getModuleId!==void 0)},_t.typeOf=j,_t}var ok;function Fte(){return ok||(ok=1,Lb.exports=qte()),Lb.exports}var Kte=Fte(),lk=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",ck=null,Bb=null,QI=e=>{if(e===ck&&Array.isArray(Bb))return Bb;var t=[];return x.Children.forEach(e,r=>{Qt(r)||(Kte.isFragment(r)?t=t.concat(QI(r.props.children)):t.push(r))}),Bb=t,ck=e,t};function Lj(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>lk(a)):n=[lk(t)],QI(e).forEach(a=>{var s=qo(a,"type.displayName")||qo(a,"type.name");s&&n.indexOf(s)!==-1&&r.push(a)}),r}var HI=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,$b={},uk;function Qte(){return uk||(uk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})($b)),$b}var Ub,dk;function Hte(){return dk||(dk=1,Ub=Qte().isPlainObject),Ub}var Vte=Hte();const Gte=Fa(Vte);var fk,hk,mk,pk,gk;function yk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yk(Object(r),!0).forEach(function(n){Yte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yte(e,t,r){return(t=Wte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wte(e){var t=Xte(e,"string");return typeof t=="symbol"?t:t+""}function Xte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bp(){return bp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bp.apply(null,arguments)}function nd(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var bk=(e,t,r,n,a)=>{var s=r-n,l;return l=Zt(fk||(fk=nd(["M ",",",""])),e,t),l+=Zt(hk||(hk=nd(["L ",",",""])),e+r,t),l+=Zt(mk||(mk=nd(["L ",",",""])),e+r-s/2,t+a),l+=Zt(pk||(pk=nd(["L ",",",""])),e+r-s/2-n,t+a),l+=Zt(gk||(gk=nd(["L ",","," Z"])),e,t),l},Zte={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Jte=e=>{var t=dr(e,Zte),{x:r,y:n,upperWidth:a,lowerWidth:s,height:l,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isUpdateAnimationActive:g}=t,y=x.useRef(null),[v,j]=x.useState(-1),S=x.useRef(a),_=x.useRef(s),N=x.useRef(l),O=x.useRef(r),E=x.useRef(n),C=mf(e,"trapezoid-");if(x.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var le=y.current.getTotalLength();le&&j(le)}catch{}},[]),r!==+r||n!==+n||a!==+a||s!==+s||l!==+l||a===0&&s===0||l===0)return null;var D=ot("recharts-trapezoid",d);if(!g)return x.createElement("g",null,x.createElement("path",bp({},tn(t),{className:D,d:bk(r,n,a,s,l)})));var T=S.current,M=_.current,R=N.current,U=O.current,Y=E.current,K="0px ".concat(v===-1?1:v,"px"),z="".concat(v,"px 0px"),pe=gR(["strokeDasharray"],h,f);return x.createElement(hf,{animationId:C,key:C,canBegin:v>0,duration:h,easing:f,isActive:g,begin:p},le=>{var ge=Bt(T,a,le),I=Bt(M,s,le),V=Bt(R,l,le),ae=Bt(U,r,le),he=Bt(Y,n,le);y.current&&(S.current=ge,_.current=I,N.current=V,O.current=ae,E.current=he);var Q=le>0?{transition:pe,strokeDasharray:z}:{strokeDasharray:K};return x.createElement("path",bp({},tn(t),{className:D,d:bk(ae,he,ge,I,V),ref:y,style:vk(vk({},Q),t.style)}))})},ere=["option","shapeType","activeClassName"];function tre(e,t){if(e==null)return{};var r,n,a=rre(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function rre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function xk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xk(Object(r),!0).forEach(function(n){nre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nre(e,t,r){return(t=are(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function are(e){var t=ire(e,"string");return typeof t=="symbol"?t:t+""}function ire(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sre(e,t){return xp(xp({},t),e)}function ore(e,t){return e==="symbols"}function wk(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return x.createElement(xR,r);case"trapezoid":return x.createElement(Jte,r);case"sector":return x.createElement(_R,r);case"symbols":if(ore(t))return x.createElement(n1,r);break;case"curve":return x.createElement(w1,r);default:return null}}function lre(e){return x.isValidElement(e)?e.props:e}function Bj(e){var{option:t,shapeType:r,activeClassName:n="recharts-active-shape"}=e,a=tre(e,ere),s;if(x.isValidElement(t))s=x.cloneElement(t,xp(xp({},a),lre(t)));else if(typeof t=="function")s=t(a,a.index);else if(Gte(t)&&typeof t!="boolean"){var l=sre(t,a);s=x.createElement(wk,{shapeType:r,elementProps:l})}else{var d=a;s=x.createElement(wk,{shapeType:r,elementProps:d})}return a.isActive?x.createElement(Er,{className:n},s):s}var $j=(e,t,r)=>{var n=kt();return(a,s)=>l=>{e==null||e(a,s,l),n(rI({activeIndex:String(s),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}},Uj=e=>{var t=kt();return(r,n)=>a=>{e==null||e(r,n,a),t(uZ())}},zj=(e,t,r)=>{var n=kt();return(a,s)=>l=>{e==null||e(a,s,l),n(dZ({activeIndex:String(s),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}};function qj(e){var{tooltipEntrySettings:t}=e,r=kt(),n=Yr(),a=x.useRef(null);return x.useLayoutEffect(()=>{n||(a.current===null?r(sZ(t)):a.current!==t&&r(oZ({prev:a.current,next:t})),a.current=t)},[t,r,n]),x.useLayoutEffect(()=>()=>{a.current&&(r(lZ(a.current)),a.current=null)},[r]),null}function VI(e){var{legendPayload:t}=e,r=kt(),n=Yr(),a=x.useRef(null);return x.useLayoutEffect(()=>{n||(a.current===null?r(fR(t)):a.current!==t&&r(hR({prev:a.current,next:t})),a.current=t)},[r,n,t]),x.useLayoutEffect(()=>()=>{a.current&&(r(mR(a.current)),a.current=null)},[r]),null}function cre(e){var{legendPayload:t}=e,r=kt(),n=Pe(ct),a=x.useRef(null);return x.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(a.current===null?r(fR(t)):a.current!==t&&r(hR({prev:a.current,next:t})),a.current=t)},[r,n,t]),x.useLayoutEffect(()=>()=>{a.current&&(r(mR(a.current)),a.current=null)},[r]),null}var zb,ure=()=>{var[e]=x.useState(()=>wd("uid-"));return e},dre=(zb=iB.useId)!==null&&zb!==void 0?zb:ure;function fre(e,t){var r=dre();return t||(e?"".concat(e,"-").concat(r):r)}var hre=x.createContext(void 0),Fj=e=>{var{id:t,type:r,children:n}=e,a=fre("recharts-".concat(r),t);return x.createElement(hre.Provider,{value:a},n(a))},mre={cartesianItems:[],polarItems:[]},GI=gn({name:"graphicalItems",initialState:mre,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Lt()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,a=pa(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},prepare:Lt()},removeCartesianGraphicalItem:{reducer(e,t){var r=pa(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Lt()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Lt()},removePolarGraphicalItem:{reducer(e,t){var r=pa(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Lt()}}}),{addCartesianGraphicalItem:pre,replaceCartesianGraphicalItem:gre,removeCartesianGraphicalItem:yre,addPolarGraphicalItem:vre,removePolarGraphicalItem:bre}=GI.actions,xre=GI.reducer,wre=e=>{var t=kt(),r=x.useRef(null);return x.useLayoutEffect(()=>{r.current===null?t(pre(e)):r.current!==e&&t(gre({prev:r.current,next:e})),r.current=e},[t,e]),x.useLayoutEffect(()=>()=>{r.current&&(t(yre(r.current)),r.current=null)},[t]),null},YI=x.memo(wre);function jre(e){var t=kt();return x.useLayoutEffect(()=>(t(vre(e)),()=>{t(bre(e))}),[t,e]),null}var Sre=["key"],_re=["onMouseEnter","onClick","onMouseLeave"],Nre=["id"],Ore=["id"];function jk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jk(Object(r),!0).forEach(function(n){Ere(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ere(e,t,r){return(t=Are(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Are(e){var t=Cre(e,"string");return typeof t=="symbol"?t:t+""}function Cre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ls(){return Ls=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ls.apply(null,arguments)}function Mg(e,t){if(e==null)return{};var r,n,a=Pre(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Pre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function kre(e){var t=x.useMemo(()=>Lj(e.children,tl),[e.children]),r=Pe(n=>Ute(n,e.id,t));return r==null?null:x.createElement(cre,{legendPayload:r})}var Tre=x.memo(e=>{var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:l,name:d,hide:f,tooltipType:h,id:p}=e,g={dataDefinedOnItem:n.map(y=>y.tooltipPayload),getPosition:y=>{var v;return(v=n[Number(y)])===null||v===void 0?void 0:v.tooltipPosition},settings:{stroke:a,strokeWidth:s,fill:l,dataKey:t,nameKey:r,name:Fc(d,t),hide:f,type:h,color:l,unit:"",graphicalItemId:p}};return x.createElement(qj,{tooltipEntrySettings:g})}),Dre=(e,t)=>e>t?"start":e<t?"end":"middle",Mre=(e,t,r)=>Vr(typeof t=="function"?t(e):t,r,r*.8),Rre=(e,t,r)=>{var{top:n,left:a,width:s,height:l}=t,d=wR(s,l),f=a+Vr(e.cx,s,s/2),h=n+Vr(e.cy,l,l/2),p=Vr(e.innerRadius,d,0),g=Mre(r,e.outerRadius,d),y=e.maxRadius||Math.sqrt(s*s+l*l)/2;return{cx:f,cy:h,innerRadius:p,outerRadius:g,maxRadius:y}},Ire=(e,t)=>{var r=Or(t-e),n=Math.min(Math.abs(t-e),360);return r*n},Lre=(e,t)=>{if(x.isValidElement(e))return x.cloneElement(e,t);if(typeof e=="function")return e(t);var r=ot("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=t,a=Mg(t,Sre);return x.createElement(w1,Ls({},a,{type:"linear",className:r}))},Bre=(e,t,r)=>{if(x.isValidElement(e))return x.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),x.isValidElement(n)))return n;var a=ot("recharts-pie-label-text",FI(e));return x.createElement(kg,Ls({},t,{alignmentBaseline:"middle",className:a}),n)};function $re(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:s,dataKey:l}=r;if(!n||!a||!t)return null;var d=kn(r),f=Uo(a),h=Uo(s),p=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,g=t.map((y,v)=>{var j=(y.startAngle+y.endAngle)/2,S=lr(y.cx,y.cy,y.outerRadius+p,j),_=Jt(Jt(Jt(Jt({},d),y),{},{stroke:"none"},f),{},{index:v,textAnchor:Dre(S.x,y.cx)},S),N=Jt(Jt(Jt(Jt({},d),y),{},{fill:"none",stroke:y.fill},h),{},{index:v,points:[lr(y.cx,y.cy,y.outerRadius,j),S],key:"line"});return x.createElement(yn,{zIndex:cr.label,key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(v)},x.createElement(Er,null,s&&Lre(s,N),Bre(a,_,Nt(y,l))))});return x.createElement(Er,{className:"recharts-pie-labels"},g)}function Ure(e){var{sectors:t,props:r,showLabels:n}=e,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?x.createElement(Mj,{label:a}):x.createElement($re,{sectors:t,props:r,showLabels:n})}function zre(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,shape:s,id:l}=e,d=Pe(Is),f=Pe(Ej),h=Pe(WZ),{onMouseEnter:p,onClick:g,onMouseLeave:y}=a,v=Mg(a,_re),j=$j(p,a.dataKey,l),S=Uj(y),_=zj(g,a.dataKey,l);return t==null||t.length===0?null:x.createElement(x.Fragment,null,t.map((N,O)=>{if((N==null?void 0:N.startAngle)===0&&(N==null?void 0:N.endAngle)===0&&t.length!==1)return null;var E=h==null||h===l,C=String(O)===d&&(f==null||a.dataKey===f)&&E,D=d?n:null,T=r&&C?r:D,M=Jt(Jt({},N),{},{stroke:N.stroke,tabIndex:-1,[XM]:O,[ZM]:l});return x.createElement(Er,Ls({key:"sector-".concat(N==null?void 0:N.startAngle,"-").concat(N==null?void 0:N.endAngle,"-").concat(N.midAngle,"-").concat(O),tabIndex:-1,className:"recharts-pie-sector"},of(v,N,O),{onMouseEnter:j(N,O),onMouseLeave:S(N,O),onClick:_(N,O)}),x.createElement(Bj,Ls({option:s??T,index:O,shapeType:"sector",isActive:C},M)))}))}function qre(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:s}=e,{cornerRadius:l,startAngle:d,endAngle:f,dataKey:h,nameKey:p,tooltipType:g}=r,y=Math.abs(r.minAngle),v=Ire(d,f),j=Math.abs(v),S=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,_=n.filter(T=>Nt(T,h,0)!==0).length,N=(j>=360?_:_-1)*S,O=j-_*y-N,E=n.reduce((T,M)=>{var R=Nt(M,h,0);return T+(Ee(R)?R:0)},0),C;if(E>0){var D;C=n.map((T,M)=>{var R=Nt(T,h,0),U=Nt(T,p,M),Y=Rre(r,s,T),K=(Ee(R)?R:0)/E,z,pe=Jt(Jt({},T),a&&a[M]&&a[M].props);M?z=D.endAngle+Or(v)*S*(R!==0?1:0):z=d;var le=z+Or(v)*((R!==0?y:0)+K*O),ge=(z+le)/2,I=(Y.innerRadius+Y.outerRadius)/2,V=[{name:U,value:R,payload:pe,dataKey:h,type:g,graphicalItemId:r.id}],ae=lr(Y.cx,Y.cy,I,ge);return D=Jt(Jt(Jt(Jt({},r.presentationProps),{},{percent:K,cornerRadius:typeof l=="string"?parseFloat(l):l,name:U,tooltipPayload:V,midAngle:ge,middleRadius:I,tooltipPosition:ae},pe),Y),{},{value:R,dataKey:h,startAngle:z,endAngle:le,payload:pe,paddingAngle:Or(v)*S}),D})}return C}function Fre(e){var{showLabels:t,sectors:r,children:n}=e,a=x.useMemo(()=>!t||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,t]);return x.createElement(Ste,{value:t?a:void 0},n)}function Kre(e){var{props:t,previousSectorsRef:r,id:n}=e,{sectors:a,isAnimationActive:s,animationBegin:l,animationDuration:d,animationEasing:f,activeShape:h,inactiveShape:p,onAnimationStart:g,onAnimationEnd:y}=t,v=mf(t,"recharts-pie-"),j=r.current,[S,_]=x.useState(!1),N=x.useCallback(()=>{typeof y=="function"&&y(),_(!1)},[y]),O=x.useCallback(()=>{typeof g=="function"&&g(),_(!0)},[g]);return x.createElement(Fre,{showLabels:!S,sectors:a},x.createElement(hf,{animationId:v,begin:l,duration:d,isActive:s,easing:f,onAnimationStart:O,onAnimationEnd:N,key:v},E=>{var C,D=[],T=a&&a[0],M=(C=T==null?void 0:T.startAngle)!==null&&C!==void 0?C:0;return a==null||a.forEach((R,U)=>{var Y=j&&j[U],K=U>0?qo(R,"paddingAngle",0):0;if(Y){var z=Bt(Y.endAngle-Y.startAngle,R.endAngle-R.startAngle,E),pe=Jt(Jt({},R),{},{startAngle:M+K,endAngle:M+z+K});D.push(pe),M=pe.endAngle}else{var{endAngle:le,startAngle:ge}=R,I=Bt(0,le-ge,E),V=Jt(Jt({},R),{},{startAngle:M+K,endAngle:M+I+K});D.push(V),M=V.endAngle}}),r.current=D,x.createElement(Er,null,x.createElement(zre,{sectors:D,activeShape:h,inactiveShape:p,allOtherPieProps:t,shape:t.shape,id:n}))}),x.createElement(Ure,{showLabels:!S,sectors:a,props:t}),t.children)}var Qre={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:cr.area};function Hre(e){var{id:t}=e,r=Mg(e,Nre),{hide:n,className:a,rootTabIndex:s}=e,l=x.useMemo(()=>Lj(e.children,tl),[e.children]),d=Pe(p=>zte(p,t,l)),f=x.useRef(null),h=ot("recharts-pie",a);return n||d==null?(f.current=null,x.createElement(Er,{tabIndex:s,className:h})):x.createElement(yn,{zIndex:e.zIndex},x.createElement(Tre,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:d,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),x.createElement(Er,{tabIndex:s,className:h},x.createElement(Kre,{props:Jt(Jt({},r),{},{sectors:d}),previousSectorsRef:f,id:t})))}function Kj(e){var t=dr(e,Qre),{id:r}=t,n=Mg(t,Ore),a=kn(n);return x.createElement(Fj,{id:r,type:"pie"},s=>x.createElement(x.Fragment,null,x.createElement(jre,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:t.maxRadius}),x.createElement(kre,Ls({},n,{id:s})),x.createElement(Hre,Ls({},n,{id:s}))))}Kj.displayName="Pie";var Vre=["points"];function Sk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sk(Object(r),!0).forEach(function(n){Gre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gre(e,t,r){return(t=Yre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yre(e){var t=Wre(e,"string");return typeof t=="symbol"?t:t+""}function Wre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wp(){return wp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wp.apply(null,arguments)}function Xre(e,t){if(e==null)return{};var r,n,a=Zre(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Zre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Jre(e){var{option:t,dotProps:r,className:n}=e;if(x.isValidElement(t))return x.cloneElement(t,r);if(typeof t=="function")return t(r);var a=ot(n,typeof t!="boolean"?t.className:""),s=r??{},{points:l}=s,d=Xre(s,Vre);return x.createElement($I,wp({},d,{className:a}))}function ene(e,t){return e==null?!1:t?!0:e.length===1}function tne(e){var{points:t,dot:r,className:n,dotClassName:a,dataKey:s,baseProps:l,needClip:d,clipPathId:f,zIndex:h=cr.scatter}=e;if(!ene(t,r))return null;var p=HI(r),g=p7(r),y=t.map((j,S)=>{var _,N,O=qb(qb(qb({r:3},l),g),{},{index:S,cx:(_=j.x)!==null&&_!==void 0?_:void 0,cy:(N=j.y)!==null&&N!==void 0?N:void 0,dataKey:s,value:j.value,payload:j.payload,points:t});return x.createElement(Jre,{key:"dot-".concat(S),option:r,dotProps:O,className:a})}),v={};return d&&f!=null&&(v.clipPath="url(#clipPath-".concat(p?"":"dots-").concat(f,")")),x.createElement(yn,{zIndex:h},x.createElement(Er,wp({className:n},v),y))}function _k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Nk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_k(Object(r),!0).forEach(function(n){rne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_k(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rne(e,t,r){return(t=nne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nne(e){var t=ane(e,"string");return typeof t=="symbol"?t:t+""}function ane(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WI=0,ine={xAxis:{},yAxis:{},zAxis:{}},XI=gn({name:"cartesianAxis",initialState:ine,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Lt()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Lt()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Lt()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Lt()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Lt()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Lt()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Lt()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Lt()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Lt()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,a=e.yAxis[r];if(a){var s,l=a.widthHistory||[];if(l.length===3&&l[0]===l[2]&&n===l[1]&&n!==a.width&&Math.abs(n-((s=l[0])!==null&&s!==void 0?s:0))<=1)return;var d=[...l,n].slice(-3);e.yAxis[r]=Nk(Nk({},a),{},{width:n,widthHistory:d})}}}}),{addXAxis:sne,replaceXAxis:one,removeXAxis:lne,addYAxis:cne,replaceYAxis:une,removeYAxis:dne,addZAxis:jle,replaceZAxis:Sle,removeZAxis:_le,updateYAxisWidth:fne}=XI.actions,hne=XI.reducer,mne=X([yr],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),pne=X([mne,Ii,Li],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Qj=()=>Pe(pne),gne=()=>Pe(tJ);function Ok(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ok(Object(r),!0).forEach(function(n){yne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ok(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yne(e,t,r){return(t=vne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vne(e){var t=bne(e,"string");return typeof t=="symbol"?t:t+""}function bne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xne=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:s,clipPath:l}=e;if(a===!1||t.x==null||t.y==null)return null;var d={index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},f=Fb(Fb(Fb({},d),Uo(a)),a1(a)),h;return x.isValidElement(a)?h=x.cloneElement(a,f):typeof a=="function"?h=a(f):h=x.createElement($I,f),x.createElement(Er,{className:"recharts-active-dot",clipPath:l},h)};function wne(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a,clipPath:s,zIndex:l=cr.activeDot}=e,d=Pe(Is),f=gne();if(t==null||f==null)return null;var h=t.find(p=>f.includes(p.payload));return Qt(h)?null:x.createElement(yn,{zIndex:l},x.createElement(xne,{point:h,childIndex:Number(d),mainColor:r,dataKey:a,activeDot:n,clipPath:s}))}var Ek=(e,t,r)=>{var n=r??e;if(!Qt(n))return Vr(n,t,0)},jne=(e,t,r)=>{var n={},a=e.filter(jg),s=e.filter(h=>h.stackId==null),l=a.reduce((h,p)=>{var g=h[p.stackId];return g==null&&(g=[]),g.push(p),h[p.stackId]=g,h},n),d=Object.entries(l).map(h=>{var p,[g,y]=h,v=y.map(S=>S.dataKey),j=Ek(t,r,(p=y[0])===null||p===void 0?void 0:p.barSize);return{stackId:g,dataKeys:v,barSize:j}}),f=s.map(h=>{var p=[h.dataKey].filter(y=>y!=null),g=Ek(t,r,h.barSize);return{stackId:void 0,dataKeys:p,barSize:g}});return[...d,...f]};function Ak(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ak(Object(r),!0).forEach(function(n){Sne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ak(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sne(e,t,r){return(t=_ne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _ne(e){var t=Nne(e,"string");return typeof t=="symbol"?t:t+""}function Nne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function One(e,t,r,n,a){var s,l=n.length;if(!(l<1)){var d=Vr(e,r,0,!0),f,h=[];if(nt((s=n[0])===null||s===void 0?void 0:s.barSize)){var p=!1,g=r/l,y=n.reduce((O,E)=>O+(E.barSize||0),0);y+=(l-1)*d,y>=r&&(y-=(l-1)*d,d=0),y>=r&&g>0&&(p=!0,g*=.9,y=l*g);var v=(r-y)/2>>0,j={offset:v-d,size:0};f=n.reduce((O,E)=>{var C,D={stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:j.offset+j.size+d,size:p?g:(C=E.barSize)!==null&&C!==void 0?C:0}},T=[...O,D];return j=D.position,T},h)}else{var S=Vr(t,r,0,!0);r-2*S-(l-1)*d<=0&&(d=0);var _=(r-2*S-(l-1)*d)/l;_>1&&(_>>=0);var N=nt(a)?Math.min(_,a):_;f=n.reduce((O,E,C)=>[...O,{stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:S+(_+d)*C+(_-N)/2,size:N}}],h)}return f}}var Ene=(e,t,r,n,a,s,l)=>{var d=Qt(l)?t:l,f=One(r,n,a!==s?a:s,e,d);return a!==s&&f!=null&&(f=f.map(h=>pm(pm({},h),{},{position:pm(pm({},h.position),{},{offset:h.position.offset-a/2})}))),f},Ane=(e,t)=>{var r=ej(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(l=>l.key===r)}}}},Cne=(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}};function Pne(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&nt(e.zIndex)?e.zIndex:t}var ZI=e=>{var{chartData:t}=e,r=kt(),n=Yr();return x.useEffect(()=>n?()=>{}:(r(MP(t)),()=>{r(MP(void 0))}),[t,r,n]),null},Ck={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},JI=gn({name:"brush",initialState:Ck,reducers:{setBrushSettings(e,t){return t.payload==null?Ck:t.payload}}}),{setBrushSettings:Nle}=JI.actions,kne=JI.reducer;function Tne(e){return(e%180+180)%180}var Dne=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Tne(a),l=s*Math.PI/180,d=Math.atan(n/r),f=l>d&&l<Math.PI-d?n/Math.sin(l):r/Math.cos(l);return Math.abs(f)},Mne={dots:[],areas:[],lines:[]},e5=gn({name:"referenceElements",initialState:Mne,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=pa(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=pa(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=pa(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Ole,removeDot:Ele,addArea:Ale,removeArea:Cle,addLine:Ple,removeLine:kle}=e5.actions,Rne=e5.reducer,Ine=x.createContext(void 0),Lne=e=>{var{children:t}=e,[r]=x.useState("".concat(wd("recharts"),"-clip")),n=Qj();if(n==null)return null;var{x:a,y:s,width:l,height:d}=n;return x.createElement(Ine.Provider,{value:r},x.createElement("defs",null,x.createElement("clipPath",{id:r},x.createElement("rect",{x:a,y:s,height:d,width:l}))),t)};function t5(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t){var a=e[n];a!==void 0&&r.push(a)}return r}function Bne(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Dne(n,r)}function $ne(e,t,r){var n=r==="width",{x:a,y:s,width:l,height:d}=e;return t===1?{start:n?a:s,end:n?a+l:s+d}:{start:n?a+l:s+d,end:n?a:s}}function Id(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function Une(e,t){return t5(e,t+1)}function zne(e,t,r,n,a){for(var s=(n||[]).slice(),{start:l,end:d}=t,f=0,h=1,p=l,g=function(){var j=n==null?void 0:n[f];if(j===void 0)return{v:t5(n,h)};var S=f,_,N=()=>(_===void 0&&(_=r(j,S)),_),O=j.coordinate,E=f===0||Id(e,O,N,p,d);E||(f=0,p=l,h+=1),E&&(p=O+e*(N()/2+a),f+=h)},y;h<=s.length;)if(y=g(),y)return y.v;return[]}function qne(e,t,r,n,a){var s=(n||[]).slice(),l=s.length;if(l===0)return[];for(var{start:d,end:f}=t,h=1;h<=l;h++){for(var p=(l-1)%h,g=d,y=!0,v=function(){var C=n[S];if(C==null)return 0;var D=S,T,M=()=>(T===void 0&&(T=r(C,D)),T),R=C.coordinate,U=S===p||Id(e,R,M,g,f);if(!U)return y=!1,1;U&&(g=R+e*(M()/2+a))},j,S=p;S<l&&(j=v(),!(j!==0&&j===1));S+=h);if(y){for(var _=[],N=p;N<l;N+=h){var O=n[N];O!=null&&_.push(O)}return _}}return[]}function Pk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pk(Object(r),!0).forEach(function(n){Fne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fne(e,t,r){return(t=Kne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kne(e){var t=Qne(e,"string");return typeof t=="symbol"?t:t+""}function Qne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hne(e,t,r,n,a){for(var s=(n||[]).slice(),l=s.length,{start:d}=t,{end:f}=t,h=function(y){var v=s[y];if(v==null)return 1;var j=v,S,_=()=>(S===void 0&&(S=r(v,y)),S);if(y===l-1){var N=e*(j.coordinate+e*_()/2-f);s[y]=j=Qr(Qr({},j),{},{tickCoord:N>0?j.coordinate-N*e:j.coordinate})}else s[y]=j=Qr(Qr({},j),{},{tickCoord:j.coordinate});if(j.tickCoord!=null){var O=Id(e,j.tickCoord,_,d,f);O&&(f=j.tickCoord-e*(_()/2+a),s[y]=Qr(Qr({},j),{},{isShow:!0}))}},p=l-1;p>=0;p--)h(p);return s}function Vne(e,t,r,n,a,s){var l=(n||[]).slice(),d=l.length,{start:f,end:h}=t;if(s){var p=n[d-1];if(p!=null){var g=r(p,d-1),y=e*(p.coordinate+e*g/2-h);if(l[d-1]=p=Qr(Qr({},p),{},{tickCoord:y>0?p.coordinate-y*e:p.coordinate}),p.tickCoord!=null){var v=Id(e,p.tickCoord,()=>g,f,h);v&&(h=p.tickCoord-e*(g/2+a),l[d-1]=Qr(Qr({},p),{},{isShow:!0}))}}}for(var j=s?d-1:d,S=function(O){var E=l[O];if(E==null)return 1;var C=E,D,T=()=>(D===void 0&&(D=r(E,O)),D);if(O===0){var M=e*(C.coordinate-e*T()/2-f);l[O]=C=Qr(Qr({},C),{},{tickCoord:M<0?C.coordinate-M*e:C.coordinate})}else l[O]=C=Qr(Qr({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var R=Id(e,C.tickCoord,T,f,h);R&&(f=C.tickCoord+e*(T()/2+a),l[O]=Qr(Qr({},C),{},{isShow:!0}))}},_=0;_<j;_++)S(_);return l}function Hj(e,t,r){var{tick:n,ticks:a,viewBox:s,minTickGap:l,orientation:d,interval:f,tickFormatter:h,unit:p,angle:g}=e;if(!a||!a.length||!n)return[];if(Ee(f)||dg.isSsr){var y;return(y=Une(a,Ee(f)?f:0))!==null&&y!==void 0?y:[]}var v=[],j=d==="top"||d==="bottom"?"width":"height",S=p&&j==="width"?dd(p,{fontSize:t,letterSpacing:r}):{width:0,height:0},_=(D,T)=>{var M=typeof h=="function"?h(D.value,T):D.value;return j==="width"?Bne(dd(M,{fontSize:t,letterSpacing:r}),S,g):dd(M,{fontSize:t,letterSpacing:r})[j]},N=a[0],O=a[1],E=a.length>=2&&N!=null&&O!=null?Or(O.coordinate-N.coordinate):1,C=$ne(s,E,j);return f==="equidistantPreserveStart"?zne(E,C,_,a,l):f==="equidistantPreserveEnd"?qne(E,C,_,a,l):(f==="preserveStart"||f==="preserveStartEnd"?v=Vne(E,C,_,a,l,f==="preserveStartEnd"):v=Hne(E,C,_,a,l),v.filter(D=>D.isShow))}var Gne=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,l=0;if(t){Array.from(t).forEach(p=>{if(p){var g=p.getBoundingClientRect();g.width>l&&(l=g.width)}});var d=r?r.getBoundingClientRect().width:0,f=a+s,h=l+f+d+(r?n:0);return Math.round(h)}return 0},Yne=["axisLine","width","height","className","hide","ticks","axisType"];function Wne(e,t){if(e==null)return{};var r,n,a=Xne(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Xne(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Go(){return Go=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Go.apply(null,arguments)}function kk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Xt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kk(Object(r),!0).forEach(function(n){Zne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zne(e,t,r){return(t=Jne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jne(e){var t=eae(e,"string");return typeof t=="symbol"?t:t+""}function eae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ji={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:cr.axis};function tae(e){var{x:t,y:r,width:n,height:a,orientation:s,mirror:l,axisLine:d,otherSvgProps:f}=e;if(!d)return null;var h=Xt(Xt(Xt({},f),kn(d)),{},{fill:"none"});if(s==="top"||s==="bottom"){var p=+(s==="top"&&!l||s==="bottom"&&l);h=Xt(Xt({},h),{},{x1:t,y1:r+p*a,x2:t+n,y2:r+p*a})}else{var g=+(s==="left"&&!l||s==="right"&&l);h=Xt(Xt({},h),{},{x1:t+g*n,y1:r,x2:t+g*n,y2:r+a})}return x.createElement("line",Go({},h,{className:ot("recharts-cartesian-axis-line",qo(d,"className"))}))}function rae(e,t,r,n,a,s,l,d,f){var h,p,g,y,v,j,S=d?-1:1,_=e.tickSize||l,N=Ee(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":h=p=e.coordinate,y=r+ +!d*a,g=y-S*_,j=g-S*f,v=N;break;case"left":g=y=e.coordinate,p=t+ +!d*n,h=p-S*_,v=h-S*f,j=N;break;case"right":g=y=e.coordinate,p=t+ +d*n,h=p+S*_,v=h+S*f,j=N;break;default:h=p=e.coordinate,y=r+ +d*a,g=y+S*_,j=g+S*f,v=N;break}return{line:{x1:h,y1:g,x2:p,y2:y},tick:{x:v,y:j}}}function nae(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function aae(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function iae(e){var{option:t,tickProps:r,value:n}=e,a,s=ot(r.className,"recharts-cartesian-axis-tick-value");if(x.isValidElement(t))a=x.cloneElement(t,Xt(Xt({},r),{},{className:s}));else if(typeof t=="function")a=t(Xt(Xt({},r),{},{className:s}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=ot(l,FI(t))),a=x.createElement(kg,Go({},r,{className:l}),n)}return a}var sae=x.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:s,tickFormatter:l,unit:d,padding:f,tickTextProps:h,orientation:p,mirror:g,x:y,y:v,width:j,height:S,tickSize:_,tickMargin:N,fontSize:O,letterSpacing:E,getTicksConfig:C,events:D,axisType:T}=e,M=Hj(Xt(Xt({},C),{},{ticks:r}),O,E),R=nae(p,g),U=aae(p,g),Y=kn(C),K=Uo(n),z={};typeof a=="object"&&(z=a);var pe=Xt(Xt({},Y),{},{fill:"none"},z),le=M.map(V=>Xt({entry:V},rae(V,y,v,j,S,p,_,g,N))),ge=le.map(V=>{var{entry:ae,line:he}=V;return x.createElement(Er,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ae.value,"-").concat(ae.coordinate,"-").concat(ae.tickCoord)},a&&x.createElement("line",Go({},pe,he,{className:ot("recharts-cartesian-axis-tick-line",qo(a,"className"))})))}),I=le.map((V,ae)=>{var he,Q,{entry:P,tick:B}=V,W=Xt(Xt(Xt(Xt({verticalAnchor:U},Y),{},{textAnchor:R,stroke:"none",fill:s},B),{},{index:ae,payload:P,visibleTicksCount:M.length,tickFormatter:l,padding:f},h),{},{angle:(he=(Q=h==null?void 0:h.angle)!==null&&Q!==void 0?Q:Y.angle)!==null&&he!==void 0?he:0}),re=Xt(Xt({},W),K);return x.createElement(Er,Go({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(P.value,"-").concat(P.coordinate,"-").concat(P.tickCoord)},of(D,P,ae)),n&&x.createElement(iae,{option:n,tickProps:re,value:"".concat(typeof l=="function"?l(P.value,ae):P.value).concat(d||"")}))});return x.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(T,"-ticks")},I.length>0&&x.createElement(yn,{zIndex:cr.label},x.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(T,"-tick-labels"),ref:t},I)),ge.length>0&&x.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(T,"-tick-lines")},ge))}),oae=x.forwardRef((e,t)=>{var{axisLine:r,width:n,height:a,className:s,hide:l,ticks:d,axisType:f}=e,h=Wne(e,Yne),[p,g]=x.useState(""),[y,v]=x.useState(""),j=x.useRef(null);x.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var _;return Gne({ticks:j.current,label:(_=e.labelRef)===null||_===void 0?void 0:_.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var S=x.useCallback(_=>{if(_){var N=_.getElementsByClassName("recharts-cartesian-axis-tick-value");j.current=N;var O=N[0];if(O){var E=window.getComputedStyle(O),C=E.fontSize,D=E.letterSpacing;(C!==p||D!==y)&&(g(C),v(D))}}},[p,y]);return l||n!=null&&n<=0||a!=null&&a<=0?null:x.createElement(yn,{zIndex:e.zIndex},x.createElement(Er,{className:ot("recharts-cartesian-axis",s)},x.createElement(tae,{x:e.x,y:e.y,width:n,height:a,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:kn(e)}),x.createElement(sae,{ref:S,axisType:f,events:h,fontSize:p,getTicksConfig:e,height:e.height,letterSpacing:y,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:d,unit:e.unit,width:e.width,x:e.x,y:e.y}),x.createElement(rte,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},x.createElement(fte,{label:e.label,labelRef:e.labelRef}),e.children)))}),Vj=x.forwardRef((e,t)=>{var r=dr(e,ji);return x.createElement(oae,Go({},r,{ref:t}))});Vj.displayName="CartesianAxis";var lae=["x1","y1","x2","y2","key"],cae=["offset"],uae=["xAxisId","yAxisId"],dae=["xAxisId","yAxisId"];function Tk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Hr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tk(Object(r),!0).forEach(function(n){fae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fae(e,t,r){return(t=hae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hae(e){var t=mae(e,"string");return typeof t=="symbol"?t:t+""}function mae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _o(){return _o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_o.apply(null,arguments)}function jp(e,t){if(e==null)return{};var r,n,a=pae(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pae(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var gae=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:l,ry:d}=e;return x.createElement("rect",{x:n,y:a,ry:d,width:s,height:l,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function r5(e){var{option:t,lineItemProps:r}=e,n;if(x.isValidElement(t))n=x.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var a,{x1:s,y1:l,x2:d,y2:f,key:h}=r,p=jp(r,lae),g=(a=kn(p))!==null&&a!==void 0?a:{},{offset:y}=g,v=jp(g,cae);n=x.createElement("line",_o({},v,{x1:s,y1:l,x2:d,y2:f,fill:"none",key:h}))}return n}function yae(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:l}=e,d=jp(e,uae),f=a.map((h,p)=>{var g=Hr(Hr({},d),{},{x1:t,y1:h,x2:t+r,y2:h,key:"line-".concat(p),index:p});return x.createElement(r5,{key:"line-".concat(p),option:n,lineItemProps:g})});return x.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function vae(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:l}=e,d=jp(e,dae),f=a.map((h,p)=>{var g=Hr(Hr({},d),{},{x1:h,y1:t,x2:h,y2:t+r,key:"line-".concat(p),index:p});return x.createElement(r5,{option:n,lineItemProps:g,key:"line-".concat(p)})});return x.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function bae(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:s,height:l,horizontalPoints:d,horizontal:f=!0}=e;if(!f||!t||!t.length||d==null)return null;var h=d.map(g=>Math.round(g+a-a)).sort((g,y)=>g-y);a!==h[0]&&h.unshift(0);var p=h.map((g,y)=>{var v=h[y+1],j=v==null,S=j?a+l-g:v-g;if(S<=0)return null;var _=y%t.length;return x.createElement("rect",{key:"react-".concat(y),y:g,x:n,height:S,width:s,stroke:"none",fill:t[_],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function xae(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:l,height:d,verticalPoints:f}=e;if(!t||!r||!r.length)return null;var h=f.map(g=>Math.round(g+a-a)).sort((g,y)=>g-y);a!==h[0]&&h.unshift(0);var p=h.map((g,y)=>{var v=h[y+1],j=v==null,S=j?a+l-g:v-g;if(S<=0)return null;var _=y%r.length;return x.createElement("rect",{key:"react-".concat(y),x:g,y:s,width:S,height:d,stroke:"none",fill:r[_],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var wae=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return GM(Hj(Hr(Hr(Hr({},ji),r),{},{ticks:YM(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},jae=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return GM(Hj(Hr(Hr(Hr({},ji),r),{},{ticks:YM(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},Sae={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:cr.grid};function dc(e){var t=y1(),r=v1(),n=rR(),a=Hr(Hr({},dr(e,Sae)),{},{x:Ee(e.x)?e.x:n.left,y:Ee(e.y)?e.y:n.top,width:Ee(e.width)?e.width:n.width,height:Ee(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:l,x:d,y:f,width:h,height:p,syncWithTicks:g,horizontalValues:y,verticalValues:v}=a,j=Yr(),S=Pe(U=>jP(U,"xAxis",s,j)),_=Pe(U=>jP(U,"yAxis",l,j));if(!za(h)||!za(p)||!Ee(d)||!Ee(f))return null;var N=a.verticalCoordinatesGenerator||wae,O=a.horizontalCoordinatesGenerator||jae,{horizontalPoints:E,verticalPoints:C}=a;if((!E||!E.length)&&typeof O=="function"){var D=y&&y.length,T=O({yAxis:_?Hr(Hr({},_),{},{ticks:D?y:_.ticks}):void 0,width:t??h,height:r??p,offset:n},D?!0:g);Gm(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(E=T)}if((!C||!C.length)&&typeof N=="function"){var M=v&&v.length,R=N({xAxis:S?Hr(Hr({},S),{},{ticks:M?v:S.ticks}):void 0,width:t??h,height:r??p,offset:n},M?!0:g);Gm(Array.isArray(R),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(C=R)}return x.createElement(yn,{zIndex:a.zIndex},x.createElement("g",{className:"recharts-cartesian-grid"},x.createElement(gae,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),x.createElement(bae,_o({},a,{horizontalPoints:E})),x.createElement(xae,_o({},a,{verticalPoints:C})),x.createElement(yae,_o({},a,{offset:n,horizontalPoints:E,xAxis:S,yAxis:_})),x.createElement(vae,_o({},a,{offset:n,verticalPoints:C,xAxis:S,yAxis:_}))))}dc.displayName="CartesianGrid";var _ae={},n5=gn({name:"errorBars",initialState:_ae,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:a}=t.payload;e[r]&&(e[r]=e[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?a:s))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:Tle,replaceErrorBar:Dle,removeErrorBar:Mle}=n5.actions,Nae=n5.reducer,Oae=["children"];function Eae(e,t){if(e==null)return{};var r,n,a=Aae(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Aae(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Cae={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Pae=x.createContext(Cae);function a5(e){var{children:t}=e,r=Eae(e,Oae);return x.createElement(Pae.Provider,{value:r},t)}function Gj(e,t){var r,n,a=Pe(h=>Ui(h,e)),s=Pe(h=>zi(h,t)),l=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:jr.allowDataOverflow,d=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:Sr.allowDataOverflow,f=l||d;return{needClip:f,needClipX:l,needClipY:d}}function i5(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=Qj(),{needClipX:s,needClipY:l,needClip:d}=Gj(t,r);if(!d||!a)return null;var{x:f,y:h,width:p,height:g}=a;return x.createElement("clipPath",{id:"clipPath-".concat(n)},x.createElement("rect",{x:s?f:f-p/2,y:l?h:h-g/2,width:s?p:p*2,height:l?g:g*2}))}var s5=(e,t,r,n)=>Rs(e,"xAxis",t,n),o5=(e,t,r,n)=>Ms(e,"xAxis",t,n),l5=(e,t,r,n)=>Rs(e,"yAxis",r,n),c5=(e,t,r,n)=>Ms(e,"yAxis",r,n),kae=X([ct,s5,l5,o5,c5],(e,t,r,n,a)=>Ri(e,"xAxis")?Cc(t,n,!1):Cc(r,a,!1)),Tae=(e,t,r,n,a)=>a;function Dae(e){return e.type==="line"}var Mae=X([Ng,Tae],(e,t)=>e.filter(Dae).find(r=>r.id===t)),Rae=X([ct,s5,l5,o5,c5,Mae,kae,Q1],(e,t,r,n,a,s,l,d)=>{var{chartData:f,dataStartIndex:h,dataEndIndex:p}=d;if(!(s==null||t==null||r==null||n==null||a==null||n.length===0||a.length===0||l==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:g,data:y}=s,v;if(y!=null&&y.length>0?v=y:v=f==null?void 0:f.slice(h,p+1),v!=null)return xie({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataKey:g,bandSize:l,displayedData:v})}});function Iae(e){var t=Uo(e),r=3,n=2;if(t!=null){var{r:a,strokeWidth:s}=t,l=Number(a),d=Number(s);return(Number.isNaN(l)||l<0)&&(l=r),(Number.isNaN(d)||d<0)&&(d=n),{r:l,strokeWidth:d}}return{r,strokeWidth:n}}var Kb={exports:{}},Qb={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dk;function Lae(){if(Dk)return Qb;Dk=1;var e=Rc();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,s=e.useEffect,l=e.useMemo,d=e.useDebugValue;return Qb.useSyncExternalStoreWithSelector=function(f,h,p,g,y){var v=a(null);if(v.current===null){var j={hasValue:!1,value:null};v.current=j}else j=v.current;v=l(function(){function _(D){if(!N){if(N=!0,O=D,D=g(D),y!==void 0&&j.hasValue){var T=j.value;if(y(T,D))return E=T}return E=D}if(T=E,r(O,D))return T;var M=g(D);return y!==void 0&&y(T,M)?(O=D,T):(O=D,E=M)}var N=!1,O,E,C=p===void 0?null:p;return[function(){return _(h())},C===null?void 0:function(){return _(C())}]},[h,p,g,y]);var S=n(f,v[0],v[1]);return s(function(){j.hasValue=!0,j.value=S},[S]),d(S),S},Qb}var Mk;function Bae(){return Mk||(Mk=1,Kb.exports=Lae()),Kb.exports}Bae();function $ae(e){e()}function Uae(){let e=null,t=null;return{clear(){e=null,t=null},notify(){$ae(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var Rk={notify(){},get:()=>[]};function zae(e,t){let r,n=Rk,a=0,s=!1;function l(S){p();const _=n.subscribe(S);let N=!1;return()=>{N||(N=!0,_(),g())}}function d(){n.notify()}function f(){j.onStateChange&&j.onStateChange()}function h(){return s}function p(){a++,r||(r=e.subscribe(f),n=Uae())}function g(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=Rk)}function y(){s||(s=!0,p())}function v(){s&&(s=!1,g())}const j={addNestedSub:l,notifyNestedSubs:d,handleChangeWrapper:f,isSubscribed:h,trySubscribe:y,tryUnsubscribe:v,getListeners:()=>n};return j}var qae=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Fae=qae(),Kae=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Qae=Kae(),Hae=()=>Fae||Qae?x.useLayoutEffect:x.useEffect,Vae=Hae();function Ik(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Gae(e,t){if(Ik(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!Ik(e[r[a]],t[r[a]]))return!1;return!0}var Hb=Symbol.for("react-redux-context"),Vb=typeof globalThis<"u"?globalThis:{};function Yae(){if(!x.createContext)return{};const e=Vb[Hb]??(Vb[Hb]=new Map);let t=e.get(x.createContext);return t||(t=x.createContext(null),e.set(x.createContext,t)),t}var Wae=Yae();function Xae(e){const{children:t,context:r,serverState:n,store:a}=e,s=x.useMemo(()=>{const f=zae(a);return{store:a,subscription:f,getServerState:n?()=>n:void 0}},[a,n]),l=x.useMemo(()=>a.getState(),[a]);Vae(()=>{const{subscription:f}=s;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),l!==a.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[s,l]);const d=r||Wae;return x.createElement(d.Provider,{value:s},t)}var Zae=Xae,Jae=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function eie(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function Rg(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(Jae.has(n)){if(e[n]==null&&t[n]==null)continue;if(!Gae(e[n],t[n]))return!1}else if(!eie(e[n],t[n]))return!1;return!0}var tie=["id"],rie=["type","layout","connectNulls","needClip","shape"],nie=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Ld(){return Ld=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ld.apply(null,arguments)}function Lk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ra(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lk(Object(r),!0).forEach(function(n){aie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aie(e,t,r){return(t=iie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iie(e){var t=sie(e,"string");return typeof t=="symbol"?t:t+""}function sie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yj(e,t){if(e==null)return{};var r,n,a=oie(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function oie(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var lie=e=>{var{dataKey:t,name:r,stroke:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:Fc(r,t),payload:e}]},cie=x.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:s,name:l,hide:d,unit:f,tooltipType:h,id:p}=e,g={dataDefinedOnItem:r,getPosition:Xo,settings:{stroke:n,strokeWidth:a,fill:s,dataKey:t,nameKey:void 0,name:Fc(l,t),hide:d,type:h,color:n,unit:f,graphicalItemId:p}};return x.createElement(qj,{tooltipEntrySettings:g})}),u5=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function uie(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],a=0;a<t;++a)n=[...n,...r];return n}var die=(e,t,r)=>{var n=r.reduce((v,j)=>v+j);if(!n)return u5(t,e);for(var a=Math.floor(e/n),s=e%n,l=t-e,d=[],f=0,h=0;f<r.length;h+=(p=r[f])!==null&&p!==void 0?p:0,++f){var p,g=r[f];if(g!=null&&h+g>s){d=[...r.slice(0,f),s-h];break}}var y=d.length%2===0?[0,l]:[l];return[...uie(r,a),...d,...y].map(v=>"".concat(v,"px")).join(", ")};function fie(e){var{clipPathId:t,points:r,props:n}=e,{dot:a,dataKey:s,needClip:l}=n,{id:d}=n,f=Yj(n,tie),h=kn(f);return x.createElement(tne,{points:r,dot:a,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:h,needClip:l,clipPathId:t})}function hie(e){var{showLabels:t,children:r,points:n}=e,a=x.useMemo(()=>n==null?void 0:n.map(s=>{var l,d,f={x:(l=s.x)!==null&&l!==void 0?l:0,y:(d=s.y)!==null&&d!==void 0?d:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Ra(Ra({},f),{},{value:s.value,payload:s.payload,viewBox:f,parentViewBox:void 0,fill:void 0})}),[n]);return x.createElement(LI,{value:t?a:void 0},r)}function Bk(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:a,props:s}=e,{type:l,layout:d,connectNulls:f,needClip:h,shape:p}=s,g=Yj(s,rie),y=Ra(Ra({},tn(g)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(t,")"):void 0,points:n,type:l,layout:d,connectNulls:f,strokeDasharray:a??s.strokeDasharray});return x.createElement(x.Fragment,null,(n==null?void 0:n.length)>1&&x.createElement(Bj,Ld({shapeType:"curve",option:p},y,{pathRef:r})),x.createElement(fie,{points:n,clipPathId:t,props:s}))}function mie(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function pie(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:a,longestAnimatedLengthRef:s}=e,{points:l,strokeDasharray:d,isAnimationActive:f,animationBegin:h,animationDuration:p,animationEasing:g,animateNewValues:y,width:v,height:j,onAnimationEnd:S,onAnimationStart:_}=r,N=a.current,O=mf(l,"recharts-line-"),E=x.useRef(O),[C,D]=x.useState(!1),T=!C,M=x.useCallback(()=>{typeof S=="function"&&S(),D(!1)},[S]),R=x.useCallback(()=>{typeof _=="function"&&_(),D(!0)},[_]),U=mie(n.current),Y=x.useRef(0);E.current!==O&&(Y.current=s.current,E.current=O);var K=Y.current;return x.createElement(hie,{points:l,showLabels:T},r.children,x.createElement(hf,{animationId:O,begin:h,duration:p,isActive:f,easing:g,onAnimationEnd:M,onAnimationStart:R,key:O},z=>{var pe=Bt(K,U+K,z),le=Math.min(pe,U),ge;if(f)if(d){var I="".concat(d).split(/[,\s]+/gim).map(he=>parseFloat(he));ge=die(le,U,I)}else ge=u5(U,le);else ge=d==null?void 0:String(d);if(z>0&&U>0&&(a.current=l,s.current=Math.max(s.current,le)),N){var V=N.length/l.length,ae=z===1?l:l.map((he,Q)=>{var P=Math.floor(Q*V);if(N[P]){var B=N[P];return Ra(Ra({},he),{},{x:Bt(B.x,he.x,z),y:Bt(B.y,he.y,z)})}return y?Ra(Ra({},he),{},{x:Bt(v*2,he.x,z),y:Bt(j/2,he.y,z)}):Ra(Ra({},he),{},{x:he.x,y:he.y})});return a.current=ae,x.createElement(Bk,{props:r,points:ae,clipPathId:t,pathRef:n,strokeDasharray:ge})}return x.createElement(Bk,{props:r,points:l,clipPathId:t,pathRef:n,strokeDasharray:ge})}),x.createElement(Mj,{label:r.label}))}function gie(e){var{clipPathId:t,props:r}=e,n=x.useRef(null),a=x.useRef(0),s=x.useRef(null);return x.createElement(pie,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:a,pathRef:s})}var yie=(e,t)=>{var r,n;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(n=e.y)!==null&&n!==void 0?n:void 0,value:e.value,errorVal:Nt(e.payload,t)}};class vie extends x.Component{render(){var{hide:t,dot:r,points:n,className:a,xAxisId:s,yAxisId:l,top:d,left:f,width:h,height:p,id:g,needClip:y,zIndex:v}=this.props;if(t)return null;var j=ot("recharts-line",a),S=g,{r:_,strokeWidth:N}=Iae(r),O=HI(r),E=_*2+N,C=y?"url(#clipPath-".concat(O?"":"dots-").concat(S,")"):void 0;return x.createElement(yn,{zIndex:v},x.createElement(Er,{className:j},y&&x.createElement("defs",null,x.createElement(i5,{clipPathId:S,xAxisId:s,yAxisId:l}),!O&&x.createElement("clipPath",{id:"clipPath-dots-".concat(S)},x.createElement("rect",{x:f-E/2,y:d-E/2,width:h+E,height:p+E}))),x.createElement(a5,{xAxisId:s,yAxisId:l,data:n,dataPointFormatter:yie,errorBarOffset:0},x.createElement(gie,{props:this.props,clipPathId:S}))),x.createElement(wne,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:C}))}}var d5={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:cr.line,type:"linear"};function bie(e){var t=dr(e,d5),{activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:s,animationEasing:l,connectNulls:d,dot:f,hide:h,isAnimationActive:p,label:g,legendType:y,xAxisId:v,yAxisId:j,id:S}=t,_=Yj(t,nie),{needClip:N}=Gj(v,j),O=Qj(),E=Zo(),C=Yr(),D=Pe(Y=>Rae(Y,v,j,C,S));if(E!=="horizontal"&&E!=="vertical"||D==null||O==null)return null;var{height:T,width:M,x:R,y:U}=O;return x.createElement(vie,Ld({},_,{id:S,connectNulls:d,dot:f,activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:s,animationEasing:l,isAnimationActive:p,hide:h,label:g,legendType:y,xAxisId:v,yAxisId:j,points:D,layout:E,height:T,width:M,left:R,top:U,needClip:N}))}function xie(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,dataKey:l,bandSize:d,displayedData:f}=e;return f.map((h,p)=>{var g=Nt(h,l);if(t==="horizontal"){var y=bC({axis:r,ticks:a,bandSize:d,entry:h,index:p}),v=Qt(g)?null:n.scale.map(g);return{x:y,y:v??null,value:g,payload:h}}var j=Qt(g)?null:r.scale.map(g),S=bC({axis:n,ticks:s,bandSize:d,entry:h,index:p});return j==null||S==null?null:{x:j,y:S,value:g,payload:h}}).filter(Boolean)}function wie(e){var t=dr(e,d5),r=Yr();return x.createElement(Fj,{id:t.id,type:"line"},n=>x.createElement(x.Fragment,null,x.createElement(VI,{legendPayload:lie(t)}),x.createElement(cie,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:n}),x.createElement(YI,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),x.createElement(bie,Ld({},t,{id:n}))))}var Sp=x.memo(wie,Rg);Sp.displayName="Line";function rl(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(a=>a.id===t))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:WI}function nl(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(a=>a.id===t))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:WI}var jie="Invariant failed";function Sie(e,t){throw new Error(jie)}function hw(){return hw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hw.apply(null,arguments)}function _p(e){return x.createElement(Bj,hw({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var _ie=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(Ee(t))return t;var s=Ee(n)||Qt(n);return s?t(n,a):(s||Sie(),r)}},Nie=(e,t,r)=>r,Oie=(e,t)=>t,Of=X([Ng,Oie],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),Eie=X([Of],e=>e==null?void 0:e.maxBarSize),Aie=(e,t,r,n)=>n,Cie=X([ct,Ng,rl,nl,Nie],(e,t,r,n,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Pie=(e,t,r)=>{var n=ct(e),a=rl(e,t),s=nl(e,t);if(!(a==null||s==null))return n==="horizontal"?sw(e,"yAxis",s,r):sw(e,"xAxis",a,r)},kie=(e,t)=>{var r=ct(e),n=rl(e,t),a=nl(e,t);if(!(n==null||a==null))return r==="horizontal"?wP(e,"xAxis",n):wP(e,"yAxis",a)},Tie=X([Cie,WW,kie],jne),Die=(e,t,r)=>{var n,a,s=Of(e,t);if(s==null)return 0;var l=rl(e,t),d=nl(e,t);if(l==null||d==null)return 0;var f=ct(e),h=g4(e),{maxBarSize:p}=s,g=Qt(p)?h:p,y,v;return f==="horizontal"?(y=Rs(e,"xAxis",l,r),v=Ms(e,"xAxis",l,r)):(y=Rs(e,"yAxis",d,r),v=Ms(e,"yAxis",d,r)),(n=(a=Cc(y,v,!0))!==null&&a!==void 0?a:g)!==null&&n!==void 0?n:0},f5=(e,t,r)=>{var n=ct(e),a=rl(e,t),s=nl(e,t);if(!(a==null||s==null)){var l,d;return n==="horizontal"?(l=Rs(e,"xAxis",a,r),d=Ms(e,"xAxis",a,r)):(l=Rs(e,"yAxis",s,r),d=Ms(e,"yAxis",s,r)),Cc(l,d)}},Mie=X([Tie,g4,YW,y4,Die,f5,Eie],Ene),Rie=(e,t,r)=>{var n=rl(e,t);if(n!=null)return Rs(e,"xAxis",n,r)},Iie=(e,t,r)=>{var n=nl(e,t);if(n!=null)return Rs(e,"yAxis",n,r)},Lie=(e,t,r)=>{var n=rl(e,t);if(n!=null)return Ms(e,"xAxis",n,r)},Bie=(e,t,r)=>{var n=nl(e,t);if(n!=null)return Ms(e,"yAxis",n,r)},$ie=X([Mie,Of],Cne),Uie=X([Pie,Of],Ane),zie=X([yr,m1,Rie,Iie,Lie,Bie,$ie,ct,zW,f5,Uie,Of,Aie],(e,t,r,n,a,s,l,d,f,h,p,g,y)=>{var{chartData:v,dataStartIndex:j,dataEndIndex:S}=f;if(!(g==null||l==null||t==null||d!=="horizontal"&&d!=="vertical"||r==null||n==null||a==null||s==null||h==null)){var{data:_}=g,N;if(_!=null&&_.length>0?N=_:N=v==null?void 0:v.slice(j,S+1),N!=null)return pse({layout:d,barSettings:g,pos:l,parentViewBox:t,bandSize:h,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,stackedData:p,displayedData:N,offset:e,cells:y,dataStartIndex:j})}}),qie=["index"];function mw(){return mw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mw.apply(null,arguments)}function Fie(e,t){if(e==null)return{};var r,n,a=Kie(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Kie(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var h5=x.createContext(void 0),Qie=e=>{var t=x.useContext(h5);if(t!=null)return t.stackId;if(e!=null)return RQ(e)},Hie=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),Vie=e=>{var t=x.useContext(h5);if(t!=null){var{stackId:r}=t;return"url(#".concat(Hie(r,e),")")}},m5=e=>{var{index:t}=e,r=Fie(e,qie),n=Vie(t);return x.createElement(Er,mw({className:"recharts-bar-stack-layer",clipPath:n},r))},Gie=["onMouseEnter","onMouseLeave","onClick"],Yie=["value","background","tooltipPosition"],Wie=["id"],Xie=["onMouseEnter","onClick","onMouseLeave"];function ki(){return ki=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ki.apply(null,arguments)}function $k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$k(Object(r),!0).forEach(function(n){Zie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$k(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zie(e,t,r){return(t=Jie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jie(e){var t=ese(e,"string");return typeof t=="symbol"?t:t+""}function ese(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Np(e,t){if(e==null)return{};var r,n,a=tse(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function tse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var rse=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:Fc(r,t),payload:e}]},nse=x.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:l,unit:d,tooltipType:f,id:h}=e,p={dataDefinedOnItem:void 0,getPosition:Xo,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:Fc(s,t),hide:l,type:f,color:a,unit:d,graphicalItemId:h}};return x.createElement(qj,{tooltipEntrySettings:p})});function ase(e){var t=Pe(Is),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:l,onMouseLeave:d,onClick:f}=s,h=Np(s,Gie),p=$j(l,n,s.id),g=Uj(d),y=zj(f,n,s.id);if(!a||r==null)return null;var v=Uo(a);return x.createElement(yn,{zIndex:Pne(a,cr.barBackground)},r.map((j,S)=>{var{value:_,background:N,tooltipPosition:O}=j,E=Np(j,Yie);if(!N)return null;var C=p(j,S),D=g(j,S),T=y(j,S),M=Jr(Jr(Jr(Jr(Jr({option:a,isActive:String(S)===t},E),{},{fill:"#eee"},N),v),of(h,j,S)),{},{onMouseEnter:C,onMouseLeave:D,onClick:T,dataKey:n,index:S,className:"recharts-bar-background-rectangle"});return x.createElement(_p,ki({key:"background-bar-".concat(S)},M))}))}function ise(e){var{showLabels:t,children:r,rects:n}=e,a=n==null?void 0:n.map(s=>{var l={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return Jr(Jr({},l),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:l,fill:s.fill})});return x.createElement(LI,{value:t?a:void 0},r)}function sse(e){var{shape:t,activeBar:r,baseProps:n,entry:a,index:s,dataKey:l}=e,d=Pe(Is),f=Pe(Ej),h=r&&String(s)===d&&(f==null||l===f),p=h?r:t;return h?x.createElement(yn,{zIndex:cr.activeBar},x.createElement(m5,{index:s},x.createElement(_p,ki({},n,{name:String(n.name)},a,{isActive:h,option:p,index:s,dataKey:l})))):x.createElement(_p,ki({},n,{name:String(n.name)},a,{isActive:h,option:p,index:s,dataKey:l}))}function ose(e){var{shape:t,baseProps:r,entry:n,index:a,dataKey:s}=e;return x.createElement(_p,ki({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:a,dataKey:s}))}function lse(e){var t,{data:r,props:n}=e,a=(t=kn(n))!==null&&t!==void 0?t:{},{id:s}=a,l=Np(a,Wie),{shape:d,dataKey:f,activeBar:h}=n,{onMouseEnter:p,onClick:g,onMouseLeave:y}=n,v=Np(n,Xie),j=$j(p,f,s),S=Uj(y),_=zj(g,f,s);return r?x.createElement(x.Fragment,null,r.map((N,O)=>x.createElement(m5,ki({index:O,key:"rectangle-".concat(N==null?void 0:N.x,"-").concat(N==null?void 0:N.y,"-").concat(N==null?void 0:N.value,"-").concat(O),className:"recharts-bar-rectangle"},of(v,N,O),{onMouseEnter:j(N,O),onMouseLeave:S(N,O),onClick:_(N,O)}),h?x.createElement(sse,{shape:d,activeBar:h,baseProps:l,entry:N,index:O,dataKey:f}):x.createElement(ose,{shape:d,baseProps:l,entry:N,index:O,dataKey:f})))):null}function cse(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:l,animationDuration:d,animationEasing:f,onAnimationEnd:h,onAnimationStart:p}=t,g=r.current,y=mf(t,"recharts-bar-"),[v,j]=x.useState(!1),S=!v,_=x.useCallback(()=>{typeof h=="function"&&h(),j(!1)},[h]),N=x.useCallback(()=>{typeof p=="function"&&p(),j(!0)},[p]);return x.createElement(ise,{showLabels:S,rects:n},x.createElement(hf,{animationId:y,begin:l,duration:d,isActive:s,easing:f,onAnimationEnd:_,onAnimationStart:N,key:y},O=>{var E=O===1?n:n==null?void 0:n.map((C,D)=>{var T=g&&g[D];if(T)return Jr(Jr({},C),{},{x:Bt(T.x,C.x,O),y:Bt(T.y,C.y,O),width:Bt(T.width,C.width,O),height:Bt(T.height,C.height,O)});if(a==="horizontal"){var M=Bt(0,C.height,O),R=Bt(C.stackedBarStart,C.y,O);return Jr(Jr({},C),{},{y:R,height:M})}var U=Bt(0,C.width,O),Y=Bt(C.stackedBarStart,C.x,O);return Jr(Jr({},C),{},{width:U,x:Y})});return O>0&&(r.current=E??null),E==null?null:x.createElement(Er,null,x.createElement(lse,{props:t,data:E}))}),x.createElement(Mj,{label:t.label}),t.children)}function use(e){var t=x.useRef(null);return x.createElement(cse,{previousRectanglesRef:t,props:e})}var p5=0,dse=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Nt(e,t)}};class fse extends x.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:l,needClip:d,background:f,id:h}=this.props;if(t||r==null)return null;var p=ot("recharts-bar",a),g=h;return x.createElement(Er,{className:p,id:h},d&&x.createElement("defs",null,x.createElement(i5,{clipPathId:g,xAxisId:s,yAxisId:l})),x.createElement(Er,{className:"recharts-bar-rectangles",clipPath:d?"url(#clipPath-".concat(g,")"):void 0},x.createElement(ase,{data:r,dataKey:n,background:f,allOtherBarProps:this.props}),x.createElement(use,this.props)))}}var hse={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:p5,xAxisId:0,yAxisId:0,zIndex:cr.bar};function mse(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:l,animationBegin:d,animationDuration:f,animationEasing:h,isAnimationActive:p}=e,{needClip:g}=Gj(t,r),y=Zo(),v=Yr(),j=Lj(e.children,tl),S=Pe(O=>zie(O,e.id,v,j));if(y!=="vertical"&&y!=="horizontal")return null;var _,N=S==null?void 0:S[0];return N==null||N.height==null||N.width==null?_=0:_=y==="vertical"?N.height/2:N.width/2,x.createElement(a5,{xAxisId:t,yAxisId:r,data:S,dataPointFormatter:dse,errorBarOffset:_},x.createElement(fse,ki({},e,{layout:y,needClip:g,data:S,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:l,animationBegin:d,animationDuration:f,animationEasing:h,isAnimationActive:p})))}function pse(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:l,yAxis:d,xAxisTicks:f,yAxisTicks:h,stackedData:p,displayedData:g,offset:y,cells:v,parentViewBox:j,dataStartIndex:S}=e,_=t==="horizontal"?d:l,N=p?_.scale.domain():null,O=IQ({numericAxis:_}),E=_.scale.map(O);return g.map((C,D)=>{var T,M,R,U,Y,K;if(p){var z=p[D+S];if(z==null)return null;T=PQ(z,N)}else T=Nt(C,r),Array.isArray(T)||(T=[O,T]);var pe=_ie(n,p5)(T[1],D);if(t==="horizontal"){var le,ge=d.scale.map(T[0]),I=d.scale.map(T[1]);if(ge==null||I==null)return null;M=xC({axis:l,ticks:f,bandSize:s,offset:a.offset,entry:C,index:D}),R=(le=I??ge)!==null&&le!==void 0?le:void 0,U=a.size;var V=ge-I;if(Y=$a(V)?0:V,K={x:M,y:y.top,width:U,height:y.height},Math.abs(pe)>0&&Math.abs(Y)<Math.abs(pe)){var ae=Or(Y||pe)*(Math.abs(pe)-Math.abs(Y));R-=ae,Y+=ae}}else{var he=l.scale.map(T[0]),Q=l.scale.map(T[1]);if(he==null||Q==null)return null;if(M=he,R=xC({axis:d,ticks:h,bandSize:s,offset:a.offset,entry:C,index:D}),U=Q-he,Y=a.size,K={x:y.left,y:R,width:y.width,height:Y},Math.abs(pe)>0&&Math.abs(U)<Math.abs(pe)){var P=Or(U||pe)*(Math.abs(pe)-Math.abs(U));U+=P}}if(M==null||R==null||U==null||Y==null)return null;var B=Jr(Jr({},C),{},{stackedBarStart:E,x:M,y:R,width:U,height:Y,value:p?T:T[1],payload:C,background:K,tooltipPosition:{x:M+U/2,y:R+Y/2},parentViewBox:j},v&&v[D]&&v[D].props);return B}).filter(Boolean)}function gse(e){var t=dr(e,hse),r=Qie(t.stackId),n=Yr();return x.createElement(Fj,{id:t.id,type:"bar"},a=>x.createElement(x.Fragment,null,x.createElement(VI,{legendPayload:rse(t)}),x.createElement(nse,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:a}),x.createElement(YI,{type:"bar",id:a,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),x.createElement(yn,{zIndex:t.zIndex},x.createElement(mse,ki({},t,{id:a})))))}var yi=x.memo(gse,Rg);yi.displayName="Bar";var yse=["domain","range"],vse=["domain","range"];function Uk(e,t){if(e==null)return{};var r,n,a=bse(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function bse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function zk(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function g5(e,t){if(e===t)return!0;var{domain:r,range:n}=e,a=Uk(e,yse),{domain:s,range:l}=t,d=Uk(t,vse);return!zk(r,s)||!zk(n,l)?!1:Rg(a,d)}var xse=["type"],wse=["dangerouslySetInnerHTML","ticks","scale"],jse=["id","scale"];function pw(){return pw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pw.apply(null,arguments)}function qk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qk(Object(r),!0).forEach(function(n){Sse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sse(e,t,r){return(t=_se(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _se(e){var t=Nse(e,"string");return typeof t=="symbol"?t:t+""}function Nse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gw(e,t){if(e==null)return{};var r,n,a=Ose(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ose(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ese(e){var t=kt(),r=x.useRef(null),n=nR(),{type:a}=e,s=gw(e,xse),l=xg(n,"xAxis",a),d=x.useMemo(()=>{if(l!=null)return Fk(Fk({},s),{},{type:l})},[s,l]);return x.useLayoutEffect(()=>{d!=null&&(r.current===null?t(sne(d)):r.current!==d&&t(one({prev:r.current,next:d})),r.current=d)},[d,t]),x.useLayoutEffect(()=>()=>{r.current&&(t(lne(r.current)),r.current=null)},[t]),null}var Ase=e=>{var{xAxisId:t,className:r}=e,n=Pe(m1),a=Yr(),s="xAxis",l=Pe(N=>W4(N,s,t,a)),d=Pe(N=>H4(N,t)),f=Pe(N=>WX(N,t)),h=Pe(N=>E4(N,t));if(d==null||f==null||h==null)return null;var{dangerouslySetInnerHTML:p,ticks:g,scale:y}=e,v=gw(e,wse),{id:j,scale:S}=h,_=gw(h,jse);return x.createElement(Vj,pw({},v,_,{x:f.x,y:f.y,width:d.width,height:d.height,className:ot("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:l,axisType:s}))},Cse={allowDataOverflow:jr.allowDataOverflow,allowDecimals:jr.allowDecimals,allowDuplicatedCategory:jr.allowDuplicatedCategory,angle:jr.angle,axisLine:ji.axisLine,height:jr.height,hide:!1,includeHidden:jr.includeHidden,interval:jr.interval,label:!1,minTickGap:jr.minTickGap,mirror:jr.mirror,orientation:jr.orientation,padding:jr.padding,reversed:jr.reversed,scale:jr.scale,tick:jr.tick,tickCount:jr.tickCount,tickLine:ji.tickLine,tickSize:ji.tickSize,type:jr.type,xAxisId:0},Pse=e=>{var t=dr(e,Cse);return x.createElement(x.Fragment,null,x.createElement(Ese,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),x.createElement(Ase,t))},fc=x.memo(Pse,g5);fc.displayName="XAxis";var kse=["type"],Tse=["dangerouslySetInnerHTML","ticks","scale"],Dse=["id","scale"];function yw(){return yw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yw.apply(null,arguments)}function Kk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Kk(Object(r),!0).forEach(function(n){Mse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mse(e,t,r){return(t=Rse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rse(e){var t=Ise(e,"string");return typeof t=="symbol"?t:t+""}function Ise(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vw(e,t){if(e==null)return{};var r,n,a=Lse(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Lse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Bse(e){var t=kt(),r=x.useRef(null),n=nR(),{type:a}=e,s=vw(e,kse),l=xg(n,"yAxis",a),d=x.useMemo(()=>{if(l!=null)return Qk(Qk({},s),{},{type:l})},[l,s]);return x.useLayoutEffect(()=>{d!=null&&(r.current===null?t(cne(d)):r.current!==d&&t(une({prev:r.current,next:d})),r.current=d)},[d,t]),x.useLayoutEffect(()=>()=>{r.current&&(t(dne(r.current)),r.current=null)},[t]),null}function $se(e){var{yAxisId:t,className:r,width:n,label:a}=e,s=x.useRef(null),l=x.useRef(null),d=Pe(m1),f=Yr(),h=kt(),p="yAxis",g=Pe(T=>V4(T,t)),y=Pe(T=>ZX(T,t)),v=Pe(T=>W4(T,p,t,f)),j=Pe(T=>A4(T,t));if(x.useLayoutEffect(()=>{if(!(n!=="auto"||!g||Dj(a)||x.isValidElement(a)||j==null)){var T=s.current;if(T){var M=T.getCalculatedWidth();Math.round(g.width)!==Math.round(M)&&h(fne({id:t,width:M}))}}},[v,g,h,a,t,n,j]),g==null||y==null||j==null)return null;var{dangerouslySetInnerHTML:S,ticks:_,scale:N}=e,O=vw(e,Tse),{id:E,scale:C}=j,D=vw(j,Dse);return x.createElement(Vj,yw({},O,D,{ref:s,labelRef:l,x:y.x,y:y.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:g.width,height:g.height,className:ot("recharts-".concat(p," ").concat(p),r),viewBox:d,ticks:v,axisType:p}))}var Use={allowDataOverflow:Sr.allowDataOverflow,allowDecimals:Sr.allowDecimals,allowDuplicatedCategory:Sr.allowDuplicatedCategory,angle:Sr.angle,axisLine:ji.axisLine,hide:!1,includeHidden:Sr.includeHidden,interval:Sr.interval,label:!1,minTickGap:Sr.minTickGap,mirror:Sr.mirror,orientation:Sr.orientation,padding:Sr.padding,reversed:Sr.reversed,scale:Sr.scale,tick:Sr.tick,tickCount:Sr.tickCount,tickLine:ji.tickLine,tickSize:ji.tickSize,type:Sr.type,width:Sr.width,yAxisId:0},zse=e=>{var t=dr(e,Use);return x.createElement(x.Fragment,null,x.createElement(Bse,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),x.createElement($se,t))},hc=x.memo(zse,g5);hc.displayName="YAxis";var qse=(e,t)=>t,Wj=X([qse,ct,_4,Cr,hI,qi,mJ,yr],wJ),Xj=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},y5=ea("mouseClick"),v5=cf();v5.startListening({actionCreator:y5,effect:(e,t)=>{var r=e.payload,n=Wj(t.getState(),Xj(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(fZ({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var bw=ea("mouseMove"),b5=cf(),gm=null;b5.startListening({actionCreator:bw,effect:(e,t)=>{var r=e.payload;gm!==null&&cancelAnimationFrame(gm);var n=Xj(r);gm=requestAnimationFrame(()=>{var a=t.getState(),s=wj(a,a.tooltip.settings.shared);if(s==="axis"){var l=Wj(a,n);(l==null?void 0:l.activeIndex)!=null?t.dispatch(aI({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate})):t.dispatch(nI())}gm=null})}});function Fse(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var Hk={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},x5=gn({name:"rootProps",initialState:Hk,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:Hk.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),Kse=x5.reducer,{updateOptions:Qse}=x5.actions,Hse=null,Vse={updatePolarOptions:(e,t)=>t.payload},w5=gn({name:"polarOptions",initialState:Hse,reducers:Vse}),{updatePolarOptions:Gse}=w5.actions,Yse=w5.reducer,j5=ea("keyDown"),S5=ea("focus"),Zj=cf();Zj.startListening({actionCreator:j5,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var l=jj(a,Zc(r),jf(r),_f(r)),d=l==null?-1:Number(l);if(!(!Number.isFinite(d)||d<0)){var f=qi(r);if(s==="Enter"){var h=yp(r,"axis","hover",String(a.index));t.dispatch(lw({active:!a.active,activeIndex:a.index,activeCoordinate:h}));return}var p=rZ(r),g=p==="left-to-right"?1:-1,y=s==="ArrowRight"?1:-1,v=d+y*g;if(!(f==null||v>=f.length||v<0)){var j=yp(r,"axis","hover",String(v));t.dispatch(lw({active:!0,activeIndex:v.toString(),activeCoordinate:j}))}}}}}});Zj.startListening({actionCreator:S5,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",l=yp(r,"axis","hover",String(s));t.dispatch(lw({active:!0,activeIndex:s,activeCoordinate:l}))}}}});var Gn=ea("externalEvent"),_5=cf(),Gb=new Map;_5.startListening({actionCreator:Gn,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var a=n.type,s=Gb.get(a);s!==void 0&&cancelAnimationFrame(s);var l=requestAnimationFrame(()=>{try{var d=t.getState(),f={activeCoordinate:ZZ(d),activeDataKey:Ej(d),activeIndex:Is(d),activeLabel:gI(d),activeTooltipIndex:Is(d),isTooltipActive:JZ(d)};r(f,n)}finally{Gb.delete(a)}});Gb.set(a,l)}}});var Wse=X([Wc],e=>e.tooltipItemPayloads),Xse=X([Wse,(e,t)=>t,(e,t,r)=>r],(e,t,r)=>{if(t!=null){var n=e.find(s=>s.settings.graphicalItemId===r);if(n!=null){var{getPosition:a}=n;if(a!=null)return a(t)}}}),N5=ea("touchMove"),O5=cf();O5.startListening({actionCreator:N5,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),a=wj(n,n.tooltip.settings.shared);if(a==="axis"){var s=r.touches[0];if(s==null)return;var l=Wj(n,Xj({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));(l==null?void 0:l.activeIndex)!=null&&t.dispatch(aI({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate}))}else if(a==="item"){var d,f=r.touches[0];if(document.elementFromPoint==null||f==null)return;var h=document.elementFromPoint(f.clientX,f.clientY);if(!h||!h.getAttribute)return;var p=h.getAttribute(XM),g=(d=h.getAttribute(ZM))!==null&&d!==void 0?d:void 0,y=Xc(n).find(S=>S.id===g);if(p==null||y==null||g==null)return;var{dataKey:v}=y,j=Xse(n,p,g);t.dispatch(rI({activeDataKey:v,activeIndex:p,activeCoordinate:j,activeGraphicalItemId:g}))}}}});var Zse=bM({brush:kne,cartesianAxis:hne,chartData:ZJ,errorBars:Nae,graphicalItems:xre,layout:NQ,legend:TH,options:VJ,polarAxis:Mte,polarOptions:Yse,referenceElements:Rne,rootProps:Kse,tooltip:hZ,zIndex:RJ}),Jse=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return WK({reducer:Zse,preloadedState:t,middleware:n=>{var a;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([v5.middleware,b5.middleware,Zj.middleware,_5.middleware,O5.middleware])},enhancers:n=>{var a=n;return typeof n=="function"&&(a=n()),a.concat(MM({type:"raf"}))},devTools:{serialize:{replacer:Fse},name:"recharts-".concat(r)}})};function E5(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=Yr(),s=x.useRef(null);if(a)return r;s.current==null&&(s.current=Jse(t,n));var l=o1;return x.createElement(Zae,{context:l,store:s.current},r)}function eoe(e){var{layout:t,margin:r}=e,n=kt(),a=Yr();return x.useEffect(()=>{a||(n(jQ(t)),n(wQ(r)))},[n,a,t,r]),null}var A5=x.memo(eoe,Rg);function C5(e){var t=kt();return x.useEffect(()=>{t(Qse(e))},[t,e]),null}function Vk(e){var{zIndex:t,isPanorama:r}=e,n=x.useRef(null),a=kt();return x.useLayoutEffect(()=>(n.current&&a(DJ({zIndex:t,element:n.current,isPanorama:r})),()=>{a(MJ({zIndex:t,isPanorama:r}))}),[a,t,r]),x.createElement("g",{tabIndex:-1,ref:n})}function Gk(e){var{children:t,isPanorama:r}=e,n=Pe(SJ);if(!n||n.length===0)return t;var a=n.filter(l=>l<0),s=n.filter(l=>l>0);return x.createElement(x.Fragment,null,a.map(l=>x.createElement(Vk,{key:l,zIndex:l,isPanorama:r})),t,s.map(l=>x.createElement(Vk,{key:l,zIndex:l,isPanorama:r})))}var toe=["children"];function roe(e,t){if(e==null)return{};var r,n,a=noe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function noe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Op(){return Op=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Op.apply(null,arguments)}var aoe={width:"100%",height:"100%",display:"block"},ioe=x.forwardRef((e,t)=>{var r=y1(),n=v1(),a=pR();if(!za(r)||!za(n))return null;var{children:s,otherAttributes:l,title:d,desc:f}=e,h,p;return l!=null&&(typeof l.tabIndex=="number"?h=l.tabIndex:h=a?0:void 0,typeof l.role=="string"?p=l.role:p=a?"application":void 0),x.createElement(Ww,Op({},l,{title:d,desc:f,role:p,tabIndex:h,width:r,height:n,style:aoe,ref:t}),s)}),soe=e=>{var{children:t}=e,r=Pe(sg);if(!r)return null;var{width:n,height:a,y:s,x:l}=r;return x.createElement(Ww,{width:n,height:a,x:l,y:s},t)},Yk=x.forwardRef((e,t)=>{var{children:r}=e,n=roe(e,toe),a=Yr();return a?x.createElement(soe,null,x.createElement(Gk,{isPanorama:!0},r)):x.createElement(ioe,Op({ref:t},n),x.createElement(Gk,{isPanorama:!1},r))});function ooe(){var e=kt(),[t,r]=x.useState(null),n=Pe(qQ);return x.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;nt(s)&&s!==n&&e(_Q(s))}},[t,e,n]),r}function Wk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function loe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wk(Object(r),!0).forEach(function(n){coe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function coe(e,t,r){return(t=uoe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uoe(e){var t=doe(e,"string");return typeof t=="symbol"?t:t+""}function doe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ts(){return Ts=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ts.apply(null,arguments)}var foe=()=>(oee(),null);function Ep(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var hoe=x.forwardRef((e,t)=>{var r,n,a=x.useRef(null),[s,l]=x.useState({containerWidth:Ep((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:Ep((n=e.style)===null||n===void 0?void 0:n.height)}),d=x.useCallback((h,p)=>{l(g=>{var y=Math.round(h),v=Math.round(p);return g.containerWidth===y&&g.containerHeight===v?g:{containerWidth:y,containerHeight:v}})},[]),f=x.useCallback(h=>{if(typeof t=="function"&&t(h),h!=null&&typeof ResizeObserver<"u"){var{width:p,height:g}=h.getBoundingClientRect();d(p,g);var y=j=>{var S=j[0];if(S!=null){var{width:_,height:N}=S.contentRect;d(_,N)}},v=new ResizeObserver(y);v.observe(h),a.current=v}},[t,d]);return x.useEffect(()=>()=>{var h=a.current;h!=null&&h.disconnect()},[d]),x.createElement(x.Fragment,null,x.createElement(df,{width:s.containerWidth,height:s.containerHeight}),x.createElement("div",Ts({ref:f},e)))}),moe=x.forwardRef((e,t)=>{var{width:r,height:n}=e,[a,s]=x.useState({containerWidth:Ep(r),containerHeight:Ep(n)}),l=x.useCallback((f,h)=>{s(p=>{var g=Math.round(f),y=Math.round(h);return p.containerWidth===g&&p.containerHeight===y?p:{containerWidth:g,containerHeight:y}})},[]),d=x.useCallback(f=>{if(typeof t=="function"&&t(f),f!=null){var{width:h,height:p}=f.getBoundingClientRect();l(h,p)}},[t,l]);return x.createElement(x.Fragment,null,x.createElement(df,{width:a.containerWidth,height:a.containerHeight}),x.createElement("div",Ts({ref:d},e)))}),poe=x.forwardRef((e,t)=>{var{width:r,height:n}=e;return x.createElement(x.Fragment,null,x.createElement(df,{width:r,height:n}),x.createElement("div",Ts({ref:t},e)))}),goe=x.forwardRef((e,t)=>{var{width:r,height:n}=e;return typeof r=="string"||typeof n=="string"?x.createElement(moe,Ts({},e,{ref:t})):typeof r=="number"&&typeof n=="number"?x.createElement(poe,Ts({},e,{width:r,height:n,ref:t})):x.createElement(x.Fragment,null,x.createElement(df,{width:r,height:n}),x.createElement("div",Ts({ref:t},e)))});function yoe(e){return e?hoe:goe}var voe=x.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:l,onDoubleClick:d,onMouseDown:f,onMouseEnter:h,onMouseLeave:p,onMouseMove:g,onMouseUp:y,onTouchEnd:v,onTouchMove:j,onTouchStart:S,style:_,width:N,responsive:O,dispatchTouchEvents:E=!0}=e,C=x.useRef(null),D=kt(),[T,M]=x.useState(null),[R,U]=x.useState(null),Y=ooe(),K=p1(),z=(K==null?void 0:K.width)>0?K.width:N,pe=(K==null?void 0:K.height)>0?K.height:a,le=x.useCallback(q=>{Y(q),typeof t=="function"&&t(q),M(q),U(q),q!=null&&(C.current=q)},[Y,t,M,U]),ge=x.useCallback(q=>{D(y5(q)),D(Gn({handler:s,reactEvent:q}))},[D,s]),I=x.useCallback(q=>{D(bw(q)),D(Gn({handler:h,reactEvent:q}))},[D,h]),V=x.useCallback(q=>{D(nI()),D(Gn({handler:p,reactEvent:q}))},[D,p]),ae=x.useCallback(q=>{D(bw(q)),D(Gn({handler:g,reactEvent:q}))},[D,g]),he=x.useCallback(()=>{D(S5())},[D]),Q=x.useCallback(q=>{D(j5(q.key))},[D]),P=x.useCallback(q=>{D(Gn({handler:l,reactEvent:q}))},[D,l]),B=x.useCallback(q=>{D(Gn({handler:d,reactEvent:q}))},[D,d]),W=x.useCallback(q=>{D(Gn({handler:f,reactEvent:q}))},[D,f]),re=x.useCallback(q=>{D(Gn({handler:y,reactEvent:q}))},[D,y]),G=x.useCallback(q=>{D(Gn({handler:S,reactEvent:q}))},[D,S]),ve=x.useCallback(q=>{E&&D(N5(q)),D(Gn({handler:j,reactEvent:q}))},[D,E,j]),ye=x.useCallback(q=>{D(Gn({handler:v,reactEvent:q}))},[D,v]),xe=yoe(O);return x.createElement(SI.Provider,{value:T},x.createElement(ID.Provider,{value:R},x.createElement(xe,{width:z??(_==null?void 0:_.width),height:pe??(_==null?void 0:_.height),className:ot("recharts-wrapper",n),style:loe({position:"relative",cursor:"default",width:z,height:pe},_),onClick:ge,onContextMenu:P,onDoubleClick:B,onFocus:he,onKeyDown:Q,onMouseDown:W,onMouseEnter:I,onMouseLeave:V,onMouseMove:ae,onMouseUp:re,onTouchEnd:ye,onTouchMove:ve,onTouchStart:G,ref:le},x.createElement(foe,null),r)))}),boe=["width","height","responsive","children","className","style","compact","title","desc"];function xoe(e,t){if(e==null)return{};var r,n,a=woe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function woe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var P5=x.forwardRef((e,t)=>{var{width:r,height:n,responsive:a,children:s,className:l,style:d,compact:f,title:h,desc:p}=e,g=xoe(e,boe),y=kn(g);return f?x.createElement(x.Fragment,null,x.createElement(df,{width:r,height:n}),x.createElement(Yk,{otherAttributes:y,title:h,desc:p},s)):x.createElement(voe,{className:l,style:d,width:r,height:n,responsive:a??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},x.createElement(Yk,{otherAttributes:y,title:h,desc:p,ref:t},x.createElement(Lne,null,s)))});function xw(){return xw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xw.apply(null,arguments)}var joe={top:5,right:5,bottom:5,left:5},Soe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:joe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},k5=x.forwardRef(function(t,r){var n,a=dr(t.categoricalChartProps,Soe),{chartName:s,defaultTooltipEventType:l,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,p={chartName:s,defaultTooltipEventType:l,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return x.createElement(E5,{preloadedState:{options:p},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:s},x.createElement(ZI,{chartData:h.data}),x.createElement(A5,{layout:a.layout,margin:a.margin}),x.createElement(C5,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),x.createElement(P5,xw({},a,{ref:r})))}),_oe=["axis","item"],T5=x.forwardRef((e,t)=>x.createElement(k5,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:_oe,tooltipPayloadSearcher:Tj,categoricalChartProps:e,ref:t}));function Noe(e){var t=kt();return x.useEffect(()=>{t(Gse(e))},[t,e]),null}var Ooe=["layout"];function ww(){return ww=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ww.apply(null,arguments)}function Eoe(e,t){if(e==null)return{};var r,n,a=Aoe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Aoe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Coe={top:5,right:5,bottom:5,left:5},D5={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Coe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Poe=x.forwardRef(function(t,r){var n,a=dr(t.categoricalChartProps,D5),{layout:s}=a,l=Eoe(a,Ooe),{chartName:d,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:p}=t,g={chartName:d,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:p,eventEmitter:void 0};return x.createElement(E5,{preloadedState:{options:g},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:d},x.createElement(ZI,{chartData:a.data}),x.createElement(A5,{layout:s,margin:a.margin}),x.createElement(C5,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),x.createElement(Noe,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),x.createElement(P5,ww({},l,{ref:r})))});function Xk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xk(Object(r),!0).forEach(function(n){koe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function koe(e,t,r){return(t=Toe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Toe(e){var t=Doe(e,"string");return typeof t=="symbol"?t:t+""}function Doe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Moe=["item"],Roe=Zk(Zk({},D5),{},{layout:"centric",startAngle:0,endAngle:360}),M5=x.forwardRef((e,t)=>{var r=dr(e,Roe);return x.createElement(Poe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Moe,tooltipPayloadSearcher:Tj,categoricalChartProps:r,ref:t})}),Ioe=["axis"],jw=x.forwardRef((e,t)=>x.createElement(k5,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Ioe,tooltipPayloadSearcher:Tj,categoricalChartProps:e,ref:t}));const Loe=()=>{const{user:e,isLoading:t}=ba(),[r,n]=x.useState(window.innerWidth<768);if(x.useEffect(()=>{const Q=()=>n(window.innerWidth<768);return window.addEventListener("resize",Q),()=>window.removeEventListener("resize",Q)},[]),t)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading session..."});if(!e)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Not Authenticated"});const a=e.role===qe.ADMIN,[s,l]=x.useState("All Time"),[d,f]=x.useState({from:"",to:""}),{data:h=[],isPending:p}=Xd(),{data:g=[],isPending:y}=Zd(),{data:v=[],isPending:j}=Jd(),{data:S=[],isPending:_}=Mi(),{data:N=[]}=$s(),O=p||y||j||_,E=x.useMemo(()=>h.filter(Q=>f0(Q.orderDate,s,d)),[h,s,d]),C=x.useMemo(()=>g.filter(Q=>f0(Q.billDate,s,d)),[g,s,d]),D=x.useMemo(()=>v.filter(Q=>f0(Q.date,s,d)),[v,s,d]),T=D.filter(Q=>Q.type==="Income"&&!!Q.referenceId).reduce((Q,P)=>Q+P.amount,0),M=T>0?T:E.filter(Q=>Q.status===Ie.COMPLETED).reduce((Q,P)=>Q+P.total,0),R=D.filter(Q=>Q.type==="Expense"&&Q.category==="expense_purchases").reduce((Q,P)=>Q+P.amount,0),U=R>0?R:C.reduce((Q,P)=>Q+P.total,0),Y=D.filter(Q=>Q.type==="Expense"&&Q.category!=="expense_purchases").reduce((Q,P)=>Q+P.amount,0),K=M-U-Y,z={total:E.length,processing:E.filter(Q=>Q.status===Ie.PROCESSING).length,picked:E.filter(Q=>Q.status===Ie.PICKED).length,completed:E.filter(Q=>Q.status===Ie.COMPLETED).length};E.reduce((Q,P)=>Q+(P.total-P.paidAmount),0),C.reduce((Q,P)=>Q+(P.total-P.paidAmount),0);const pe=h.filter(Q=>Q.createdBy===e.id).length,le=new Date().toISOString().split("T")[0],ge=h.filter(Q=>Q.createdBy===e.id&&Q.orderDate===le).length,I=h.filter(Q=>Q.createdBy===e.id&&Q.status===Ie.ON_HOLD).length,V=x.useMemo(()=>{const Q=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],P=new Date().getFullYear(),B={};return Q.forEach(W=>{B[W]={income:0,expense:0}}),v.forEach(W=>{const re=new Date(W.date);if(re.getFullYear()!==P)return;const G=re.getMonth(),ve=Q[G];W.type==="Income"?B[ve].income+=W.amount:W.type==="Expense"&&(B[ve].expense+=W.amount)}),Q.map(W=>({name:W,income:B[W].income,expense:-B[W].expense,profit:B[W].income-B[W].expense}))},[h,g,v]),ae=x.useMemo(()=>{const Q=new Map(N.map(ye=>[ye.id,ye.name])),P={},B={},W=["#10B981","#3B82F6","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16"];let re=0;U>0&&(P.Purchases=U,B.Purchases=W[re++]),D.filter(ye=>ye.type==="Expense"&&ye.category!=="expense_purchases").forEach(ye=>{const xe=Q.get(ye.category)||ye.category||"Uncategorized";P[xe]=(P[xe]||0)+ye.amount,B[xe]||(B[xe]=W[re%W.length],re++)});const ve=Object.entries(P).map(([ye,xe])=>({name:ye,value:Math.max(xe,1),color:B[ye]}));return ve.length>0?ve:[{name:"No Data",value:1,color:"#D1D5DB"}]},[D,U,N]),he=S.map(Q=>({name:Q.name.split(" ")[0],orders:E.filter(P=>P.createdBy===Q.id).length})).sort((Q,P)=>P.orders-Q.orders);return a?c.jsxs("div",{className:"space-y-6",children:[c.jsx(Wd,{isLoading:O,message:"Loading dashboard data..."}),c.jsx($o,{filterRange:s,setFilterRange:l,customDates:d,setCustomDates:f}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(sa,{title:"Total Sales",value:Se(M),icon:ie.Sales,bgColor:"bg-blue-600",textColor:"text-white",iconBgColor:"bg-blue-700"}),c.jsx(sa,{title:"Total Purchases",value:Se(U),icon:ie.Briefcase,bgColor:"bg-purple-600",textColor:"text-white",iconBgColor:"bg-purple-700"}),c.jsx(sa,{title:"Other Expenses",value:Se(Y),icon:ie.Delete,bgColor:"bg-amber-500",textColor:"text-white",iconBgColor:"bg-amber-600"}),c.jsx(sa,{title:"Total Profit",value:Se(K),icon:ie.Reports,isProfitCard:!0,profitValue:K}),c.jsx(sa,{title:"Total Orders",value:z.total,icon:ie.Dashboard,bgColor:"bg-indigo-700",textColor:"text-white",iconBgColor:"bg-indigo-800"}),c.jsx(sa,{title:"Processing Orders",value:z.processing,icon:ie.More,bgColor:"bg-sky-500",textColor:"text-white",iconBgColor:"bg-sky-600"}),c.jsx(sa,{title:"Picked Orders",value:z.picked,icon:ie.Courier,bgColor:"bg-cyan-500",textColor:"text-white",iconBgColor:"bg-cyan-600"}),c.jsx(sa,{title:"Completed Orders",value:z.completed,icon:ie.PlusCircle,bgColor:"bg-teal-600",textColor:"text-white",iconBgColor:"bg-teal-700"})]}),c.jsxs("div",{className:"bg-white p-8 rounded-xl border border-gray-100 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsx("div",{children:c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Cash Flow"})}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full bg-[#059669]"}),c.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Income"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),c.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Expense"})]})]})]}),c.jsx("div",{className:"h-[250px]",children:c.jsx(cc,{width:"100%",height:"100%",children:r?c.jsxs(jw,{data:V,margin:{top:10,right:0,left:-20,bottom:0},children:[c.jsx(dc,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),c.jsx(fc,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:12,fontWeight:600,fill:"#94a3b8"}}),c.jsx(hc,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fontWeight:600,fill:"#94a3b8"}}),c.jsx(So,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1)"},cursor:{fill:"#f8fafc"}}),c.jsx(yi,{dataKey:"income",fill:"#059669",radius:[4,4,0,0],barSize:40}),c.jsx(yi,{dataKey:"expense",fill:"#EF4444",radius:[4,4,0,0],barSize:40}),c.jsx(Sp,{type:"monotone",dataKey:"profit",stroke:"#8B5CF6",strokeWidth:4,dot:{r:6,fill:"#8B5CF6",strokeWidth:2,stroke:"#fff"}})]}):c.jsxs(jw,{data:V,children:[c.jsx(dc,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),c.jsx(fc,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:12,fontWeight:600,fill:"#94a3b8"}}),c.jsx(hc,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fontWeight:600,fill:"#94a3b8"}}),c.jsx(So,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1)"},cursor:{fill:"#f8fafc"}}),c.jsx(yi,{dataKey:"income",fill:"#059669",radius:[4,4,0,0],barSize:40}),c.jsx(yi,{dataKey:"expense",fill:"#EF4444",radius:[4,4,0,0],barSize:40}),c.jsx(Sp,{type:"monotone",dataKey:"profit",stroke:"#8B5CF6",strokeWidth:4,dot:{r:6,fill:"#8B5CF6",strokeWidth:2,stroke:"#fff"}})]})})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-white p-8 rounded-xl border border-gray-100 shadow-sm",children:[c.jsx("div",{className:"flex items-center justify-between mb-8",children:c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Profit & Loss Summary"})}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center p-4 border border-gray-100 rounded-lg",children:[c.jsx("span",{className:"font-bold text-gray-600 text-sm",children:"Total Incomes"}),c.jsx("span",{className:"font-black text-gray-900 text-sm",children:Se(M)})]}),c.jsxs("div",{className:"flex justify-between items-center p-4 border border-gray-100 rounded-lg",children:[c.jsx("span",{className:"font-bold text-gray-600 text-sm",children:"Total Expenses"}),c.jsx("span",{className:"font-black text-gray-900 text-sm",children:Se(U+Y)})]}),c.jsxs("div",{className:`flex justify-between items-center p-6 rounded-xl shadow-xl text-white
                  ${K>=0?"bg-emerald-600 shadow-emerald-600/20":"bg-red-600 shadow-red-600/20"}
                `,children:[c.jsx("span",{className:"font-black uppercase tracking-widest text-sm",children:"Net Profit"}),c.jsx("span",{className:"font-black text-sm",children:Se(K)})]})]})]}),c.jsxs("div",{className:"bg-white p-8 rounded-xl border border-gray-100 shadow-sm",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-8",children:"Expenses by Category"}),c.jsx("div",{className:"h-[300px]",children:c.jsx(cc,{width:"100%",height:"100%",children:c.jsxs(M5,{children:[c.jsx(Kj,{data:ae,innerRadius:0,outerRadius:100,dataKey:"value",children:ae.map((Q,P)=>c.jsx(tl,{fill:Q.color},`cell-${P}`))}),c.jsx(So,{}),r?c.jsx(Ad,{verticalAlign:"bottom",align:"center",layout:"horizontal",wrapperStyle:{paddingTop:"20px"}}):c.jsx(Ad,{verticalAlign:"middle",align:"right",layout:"vertical"})]})})})]})]})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsx($o,{filterRange:s,setFilterRange:l,customDates:d,setCustomDates:f}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(sa,{title:"Total Created",value:pe,icon:ie.Sales,bgColor:"bg-blue-600",textColor:"text-white",iconBgColor:"bg-blue-700"}),c.jsx(sa,{title:"Created Today",value:ge,icon:ie.Dashboard,bgColor:"bg-teal-500",textColor:"text-white",iconBgColor:"bg-teal-600"}),c.jsx(sa,{title:"Pending (Hold)",value:I,icon:ie.More,bgColor:"bg-orange-500",textColor:"text-white",iconBgColor:"bg-orange-600"})]}),c.jsxs("div",{className:"bg-white p-8 rounded-xl border border-gray-100 shadow-sm",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Team Performance"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Comparing total orders across all employees"})]}),c.jsx("div",{className:"h-[400px]",children:c.jsx(cc,{width:"100%",height:"100%",children:c.jsxs(T5,{data:he,children:[c.jsx(dc,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),c.jsx(fc,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:12,fontWeight:700,fill:"#64748b"}}),c.jsx(hc,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fontWeight:700,fill:"#64748b"}}),c.jsx(So,{cursor:{fill:"#f8fafc"},contentStyle:{borderRadius:"16px",border:"none",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1)"}}),c.jsx(yi,{dataKey:"orders",fill:"#10B981",radius:[12,12,0,0]})]})})})]})]})},R5=({anchorEl:e,open:t,onClose:r,children:n,align:a="right"})=>{const[s,l]=x.useState(null);if(x.useEffect(()=>{if(!t||!e){l(null);return}const f=()=>{const h=e.getBoundingClientRect(),g=a==="right"?h.right-200:h.left,y=h.bottom+8;l({top:y,left:g})};return f(),window.addEventListener("resize",f),window.addEventListener("scroll",f,!0),()=>{window.removeEventListener("resize",f),window.removeEventListener("scroll",f,!0)}},[e,t,a]),x.useEffect(()=>{if(!t)return;const f=h=>{const p=h.target;if(!e||e.contains(p))return;const g=document.getElementById("portal-menu-root");g&&g.contains(p)||r()};return document.addEventListener("click",f),()=>document.removeEventListener("click",f)},[t,e,r]),!t||!s)return null;const d=c.jsx("div",{id:"portal-menu-root",className:"fixed left-0 top-0 z-[2000] pointer-events-none",children:c.jsx("div",{style:{position:"fixed",top:s.top,left:s.left},className:"pointer-events-auto w-48 bg-white border border-gray-100 rounded-lg shadow-2xl py-2",children:n})});return kp.createPortal(d,document.body)},Ap=(e,t)=>{t(`/print-order/${e}`)},Boe=()=>{setTimeout(()=>{window.print()},100)},$oe=()=>{const e=vt(),t=Fe(),r=zr(),{searchQuery:n}=Ka(),{user:a,isLoading:s}=ba(),l=(a==null?void 0:a.role)===qe.ADMIN,d=(a==null?void 0:a.role)===qe.EMPLOYEE,{data:f}=Us(),h=(f==null?void 0:f.recordsPerPage)||qt,[p,g]=x.useState("All Time"),[y,v]=x.useState({from:"",to:""}),[j,S]=x.useState("All"),[_,N]=x.useState("all"),[O,E]=x.useState(null),[C,D]=x.useState(null),[T,M]=x.useState(null),[R,U]=x.useState(null),[Y,K]=x.useState(null),[z,pe]=x.useState(null),[le,ge]=x.useState({date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!1}),accountId:"",amount:0}),[I,V]=x.useState(1),{data:ae=[]}=Mi(),he=x.useMemo(()=>{if(_!=="all")return _==="admins"?ae.filter(te=>te.role===qe.ADMIN).map(te=>te.id):_==="employees"?ae.filter(te=>te.role===qe.EMPLOYEE).map(te=>te.id):[_]},[_,ae]),{data:Q,isFetching:P}=D9(I,h,{status:j==="All"?void 0:j,from:y.from,to:y.to,search:n,createdByIds:he}),B=(Q==null?void 0:Q.data)??[],W=(Q==null?void 0:Q.count)??0,re=Math.max(1,Math.ceil(W/h)),{data:G=[]}=Wo(),{data:ve=[]}=Bs(),{data:ye}=zp();x.useEffect(()=>{V(1)},[n,j,p,y.from,y.to,_]);const xe=te=>{V(1),S(te)},q=te=>{V(1),g(te)},we=te=>{V(1),v(te)},je=te=>{V(1),N(te)};Fp();const ue=V9(),Ue=rf(),fe=af(),Me=nf(),ze=x.useMemo(()=>new Map(ae.map(te=>[te.id,te])),[ae]),At=te=>{if(p==="All Time")return!0;const Oe=new Date(te),xt=new Date;if(p==="Today")return Oe.toDateString()===xt.toDateString();if(p==="This Week"){const mt=xt.getDate()-xt.getDay(),qr=new Date(new Date().setDate(mt)),Pr=new Date(new Date().setDate(mt+6));return Oe>=qr&&Oe<=Pr}return p==="This Month"?Oe.getMonth()===xt.getMonth()&&Oe.getFullYear()===xt.getFullYear():p==="This Year"?Oe.getFullYear()===xt.getFullYear():p==="Custom"?!y.from||!y.to?!0:Oe>=new Date(y.from)&&Oe<=new Date(y.to):!0},Ft=te=>{var Oe,xt;if((Oe=te.createdBy)!=null&&Oe.trim()){const mt=ze.get(te.createdBy);if(mt!=null&&mt.name)return mt.name}if((xt=te.history)!=null&&xt.created){const mt=te.history.created.match(/^(.+?)\s+created this order on/);if(mt&&mt[1])return mt[1]}return null},wa=x.useMemo(()=>{let te=B.filter(Oe=>At(Oe.orderDate)).filter(Oe=>j==="All"||Oe.status===j);if(n.trim()){const Oe=n.toLowerCase();te=te.filter(xt=>{const mt=G.find(Pr=>Pr.id===xt.customerId),qr=Ft(xt);return xt.orderNumber.toLowerCase().includes(Oe)||(mt==null?void 0:mt.name.toLowerCase().includes(Oe))||(mt==null?void 0:mt.phone.includes(Oe))||(qr==null?void 0:qr.toLowerCase().includes(Oe))})}return te},[B,p,y,j,n,G]),oe=async te=>{if(confirm("Are you sure you want to delete this order?"))try{await ue.mutateAsync(te),t.invalidateQueries({queryKey:["orders",I]})}catch(Oe){console.error("Failed to delete order",Oe)}},dt=te=>{ge({date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!1}),accountId:"",amount:te.total-te.paidAmount}),U(te)},Kt=async()=>{if(!R)return;const te=R;try{let Oe=ve.find(fr=>fr.id===le.accountId);if(!Oe){if(!le.accountId){r.error("Please select an account");return}Oe={id:le.accountId,name:"Selected Account",type:"Bank",openingBalance:0,currentBalance:0}}const xt=le.amount<te.total,[mt,qr]=le.time.split(":").map(Number),Pr=new Date(le.date);Pr.setHours(mt,qr,0,0);const ja=Pr.toISOString(),Rn={date:ja,type:"Income",category:Ne.settings.defaults.incomeCategoryId||"income_sales",accountId:le.accountId,amount:te.total,description:`Payment for Order #${te.orderNumber}`,referenceId:te.id,contactId:te.customerId,paymentMethod:Ne.settings.defaults.paymentMethod||"Cash",createdBy:a.id};if(xt){const fr=te.total-le.amount,Sa={date:ja,type:"Expense",category:"expense_shipping",accountId:le.accountId,amount:fr,description:`Shipping costs for Order #${te.orderNumber}`,paymentMethod:Ne.settings.defaults.paymentMethod||"Cash",createdBy:a.id};await Promise.all([fe.mutateAsync(Rn),fe.mutateAsync(Sa)])}else await fe.mutateAsync(Rn);const al=le.amount,il=(te.paidAmount??0)+le.amount,kr=Ie.COMPLETED;await Promise.all([Me.mutateAsync({id:Oe.id,updates:{currentBalance:(Oe.currentBalance??0)+al}}),Ue.mutateAsync({id:te.id,updates:{paidAmount:il,status:kr}})]),U(null),t.invalidateQueries({queryKey:["orders",I]})}catch(Oe){console.error("Failed to add payment:",Oe),r.error("Failed to add payment: "+(Oe instanceof Error?Oe.message:"Unknown error"))}};return c.jsxs("div",{className:"space-y-6 pb-12",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-black text-gray-900 tracking-tight",children:"Orders"})}),c.jsx(We,{onClick:()=>e("/orders/new"),variant:"primary",size:"md",icon:ie.Plus,children:"New Order"})]}),c.jsx($o,{title:"Orders",filterRange:p,setFilterRange:q,customDates:y,setCustomDates:we,statusTab:j,setStatusTab:xe,statusOptions:Object.values(Ie)}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:c.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[c.jsx("label",{className:"text-sm font-bold text-gray-700",children:"Created By:"}),c.jsxs("select",{value:_,onChange:te=>je(te.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"all",children:"All Users"}),ae.some(te=>te.role===qe.ADMIN)&&c.jsx("option",{value:"admins",children:"All Admins"}),ae.some(te=>te.role===qe.EMPLOYEE)&&c.jsx("option",{value:"employees",children:"All Employees"}),c.jsx("optgroup",{label:"Specific Users",children:ae.map(te=>c.jsxs("option",{value:te.id,children:[te.name," ",te.role===qe.ADMIN?"(Admin)":"(Employee)"]},te.id))})]})]})}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-visible",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Order Details"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Customer"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Created By"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Status"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] text-right",children:"Net Amount"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] sm:hidden",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:P?c.jsx(Bp,{columns:5,rows:8}):wa.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:6,className:"px-6 py-20 text-center text-gray-400 italic font-medium",children:"No sales orders found for this period."})}):wa.map(te=>{var xt,mt,qr,Pr,ja,Rn,al,il;const Oe=l||te.status===Ie.ON_HOLD;return te.createdBy,a==null||a.id,c.jsxs("tr",{onMouseEnter:()=>E(te.id),onMouseLeave:()=>E(null),onClick:()=>e(`/orders/${te.id}`),className:"group relative hover:bg-[#ebf4ff]/20 cursor-pointer transition-all",children:[c.jsxs("td",{className:"px-6 py-5",children:[c.jsxs("span",{className:"font-black text-gray-900",children:["#",te.orderNumber]}),c.jsx("p",{className:"text-[10px] text-gray-400 font-bold mt-1 tracking-tight",children:new Date(te.orderDate).toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})})]}),c.jsxs("td",{className:"px-6 py-5",children:[c.jsx("span",{className:"text-sm font-bold text-gray-700",children:((xt=G.find(kr=>kr.id===te.customerId))==null?void 0:xt.name)||"Unknown"}),c.jsx("p",{className:"text-[10px] text-gray-400 font-medium mt-0.5",children:(mt=G.find(kr=>kr.id===te.customerId))==null?void 0:mt.phone})]}),c.jsx("td",{className:"px-6 py-5 text-xs font-bold text-gray-500",children:Ft(te)||""}),c.jsxs("td",{className:"px-6 py-5",children:[c.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest ${Lp(te.status)}`,children:te.status}),te.status!==Ie.COMPLETED&&((Pr=(qr=te.history)==null?void 0:qr.courier)==null?void 0:Pr.includes("Steadfast"))&&c.jsx("img",{src:"/uploads/steadfast.png",alt:"Steadfast",className:"inline-block w-5 h-5 rounded-full ml-2"}),te.status!==Ie.COMPLETED&&((Rn=(ja=te.history)==null?void 0:ja.courier)==null?void 0:Rn.includes("CarryBee"))&&c.jsx("img",{src:"/uploads/carrybee.png",alt:"CarryBee",className:"inline-block w-5 h-5 rounded-full ml-2"})]}),c.jsxs("td",{className:"px-6 py-5 text-right",children:[c.jsx("span",{className:"font-black text-gray-900 text-base",children:Se(te.total)}),te.paidAmount>0&&c.jsx("p",{className:"text-[10px] font-black uppercase tracking-tighter mt-1 text-green-500",children:`Paid: ${Se(te.paidAmount)}`})]}),c.jsx("td",{className:"px-6 py-5 sm:hidden relative z-[999]",onClick:kr=>kr.stopPropagation(),children:c.jsxs("div",{className:"relative z-[999]",children:[c.jsx("button",{onClick:kr=>{const fr=kr.currentTarget;C===te.id?(D(null),M(null)):(D(te.id),M(fr))},className:"p-2 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-lg transition-all",children:ie.More}),c.jsx(R5,{anchorEl:T,open:C===te.id,onClose:()=>{D(null),M(null)},children:d?te.status===Ie.ON_HOLD?c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>{e(`/orders/edit/${te.id}`),D(null),M(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[ie.Edit," Edit"]}),c.jsxs("button",{onClick:()=>{oe(te.id),D(null),M(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-red-50 flex items-center gap-2 font-bold text-red-600",children:[ie.Delete," Delete"]})]}):null:c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>{e(`/orders/edit/${te.id}`),D(null),M(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[ie.Edit," Edit"]}),te.status!==Ie.COMPLETED&&c.jsxs("button",{onClick:()=>{dt(te),D(null),M(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[ie.Banking," Payment"]}),c.jsx("div",{className:"border-t my-1"}),c.jsxs("button",{onClick:()=>{Ap(te.id,e),D(null),M(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[ie.Print," Print"]}),c.jsxs("button",{className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[ie.Download," Download"]}),te.status!==Ie.PICKED&&te.status!==Ie.COMPLETED&&te.status!==Ie.CANCELLED&&te.status!==Ie.ON_HOLD&&!((al=te.history)!=null&&al.courier)&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"border-t my-1"}),c.jsxs("button",{onClick:()=>{K(te.id),D(null),M(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-[#0f2f57]",children:[c.jsx("img",{src:"../uploads/steadfast.png",alt:"Steadfast",className:"w-5 h-5 rounded-full"})," ",c.jsx("span",{children:"Add to Steadfast"})]}),c.jsxs("button",{onClick:()=>{pe(te.id),D(null),M(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-[#0f2f57]",children:[c.jsx("img",{src:"../uploads/carrybee.png",alt:"CarryBee",className:"w-5 h-5 rounded-full"})," ",c.jsx("span",{children:"Add to CarryBee"})]})]}),c.jsx("div",{className:"border-t my-1"}),c.jsxs("button",{onClick:()=>{oe(te.id),D(null),M(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-red-50 flex items-center gap-2 font-bold text-red-600",children:[ie.Delete," Delete"]})]})})]})}),O===te.id&&(l||d&&te.status===Ie.ON_HOLD)&&c.jsx("td",{className:"absolute right-6 top-1/2 -translate-y-1/2 z-10 animate-in fade-in slide-in-from-right-2 duration-200 hidden sm:table-cell",onClick:kr=>kr.stopPropagation(),children:c.jsx("div",{className:"flex items-center gap-1.5 bg-white p-1.5 rounded-2xl shadow-[0_20px_50px_rgba(0,0,0,0.15)] border border-[#ebf4ff]",children:d?te.status===Ie.ON_HOLD?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>e(`/orders/edit/${te.id}`),className:"p-2.5 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-xl transition-all",title:"Edit",children:ie.Edit}),c.jsx("button",{onClick:()=>oe(te.id),className:"p-2.5 text-red-600 hover:bg-red-50 rounded-xl transition-all",title:"Delete",children:ie.Delete})]}):null:c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>e(`/orders/edit/${te.id}`),className:"p-2.5 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-xl transition-all",title:"Edit",children:ie.Edit}),te.status!==Ie.COMPLETED&&c.jsx("button",{onClick:()=>dt(te),className:"p-2.5 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-xl transition-all",title:"Add Payment",children:ie.Banking}),c.jsx("button",{onClick:()=>Ap(te.id,e),className:"p-2.5 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-xl transition-all",title:"Print",children:ie.Print}),c.jsx("button",{className:"p-2.5 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-xl transition-all",title:"Download PDF",children:ie.Download}),te.status!==Ie.PICKED&&te.status!==Ie.COMPLETED&&te.status!==Ie.CANCELLED&&te.status!==Ie.ON_HOLD&&!((il=te.history)!=null&&il.courier)&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"h-5 w-px bg-gray-100 mx-1"}),c.jsx("button",{onClick:()=>K(te.id),className:"px-1 py-1 text-[9px] font-black hover:bg-[#ebf4ff] rounded-lg",title:"Send to Steadfast",children:c.jsx("img",{src:"/uploads/steadfast.png",alt:"Steadfast",className:"w-6 h-6 rounded-full"})}),c.jsx("button",{onClick:()=>pe(te.id),className:"px-1 py-1 text-[9px] font-black hover:bg-orange-50 rounded-lg",title:"Send to CarryBee",children:c.jsx("img",{src:"/uploads/carrybee.png",alt:"CarryBee",className:"w-6 h-6 rounded-full"})}),c.jsx("div",{className:"h-5 w-px bg-gray-100 mx-1"})]}),Oe&&c.jsx("button",{onClick:()=>oe(te.id),className:"p-2.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all",title:"Delete",children:ie.Delete})]})})})]},te.id)})})]})})}),c.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[c.jsx("div",{className:"text-sm text-gray-600",children:`Showing ${Math.min((I-1)*h+1,W||0)} - ${Math.min(I*h,W||0)} of ${W} orders`}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{disabled:I<=1,onClick:()=>V(te=>Math.max(1,te-1)),className:`px-3 py-1 rounded-md font-bold ${I<=1?"bg-gray-100 text-gray-400":"bg-white text-gray-700 border"}`,children:"Prev"}),c.jsxs("div",{className:"px-3 py-1 text-sm",children:["Page ",I," of ",re]}),c.jsx("button",{disabled:I>=re,onClick:()=>V(te=>Math.min(re,te+1)),className:`px-3 py-1 rounded-md font-bold ${I>=re?"bg-gray-100 text-gray-400":"bg-white text-gray-700 border"}`,children:"Next"})]})]}),c.jsx(Qw,{isOpen:!!R,onClose:()=>U(null),onSubmit:Kt,accounts:ve,paymentForm:le,setPaymentForm:ge,isLoading:fe.isPending||Me.isPending||Ue.isPending,title:"Receive Payment",buttonText:"Add Payment"}),c.jsx(kD,{isOpen:!!Y,onClose:()=>K(null),order:Y?B.find(te=>te.id===Y):null,customer:Y?G.find(te=>{var Oe;return te.id===((Oe=B.find(xt=>xt.id===Y))==null?void 0:Oe.customerId)}):null}),c.jsx(TD,{isOpen:!!z,onClose:()=>pe(null),order:z?B.find(te=>te.id===z):null,customer:z?G.find(te=>{var Oe;return te.id===((Oe=B.find(xt=>xt.id===z))==null?void 0:Oe.customerId)}):null})]})},Jk=()=>{const{id:e}=Mn(),t=vt(),{user:r,isLoading:n}=ba();r==null||r.role,qe.ADMIN;const a=(r==null?void 0:r.role)===qe.EMPLOYEE,s=!!e;if(n)return c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Loading..."}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Authenticating session..."})]});if(!r)return c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Not Authenticated"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Please log in first."}),c.jsx(We,{onClick:()=>t("/login"),variant:"primary",children:"Back to Login"})]});const{data:l=[]}=Wo(),{data:d=[]}=tf(),{data:f}=Hw(s?e:void 0),{data:h}=zp(),p=Fp(),g=rf(),y=zr(),[v,j]=x.useState(""),[S,_]=x.useState(new Date().toISOString().split("T")[0]),[N,O]=x.useState(""),[E,C]=x.useState([]),[D,T]=x.useState("0"),[M,R]=x.useState("0"),[U,Y]=x.useState(""),[K,z]=x.useState(!1),[pe,le]=x.useState(""),[ge,I]=x.useState(!1),[V,ae]=x.useState(""),[he,Q]=x.useState(!1),[P,B]=x.useState(null),W=$t.useRef(!1);$t.useEffect(()=>{if(f&&!W.current){if(s&&a&&f.status!==Ie.ON_HOLD){y.warning('Employees can only edit orders that are currently "On Hold".'),t("/orders");return}j(f.customerId),_(f.orderDate),O(f.orderNumber),C(f.items),T(String(f.discount??0)),R(String(f.shipping??0)),Y(f.notes||""),W.current=!0}else!s&&h&&O(`${h.prefix}${h.nextNumber}`)},[f,s,a,h,t,y,r==null?void 0:r.id]),$t.useEffect(()=>{W.current=!1},[e]);const re=va();$t.useEffect(()=>{try{const ze=new URLSearchParams(re.search).get("selectedCustomerId");if(ze){j(ze);const At=window.location.pathname+window.location.hash;window.history.replaceState({},document.title,At);return}}catch{}const fe=re&&re.state||{};if(fe.selectedCustomerId){j(fe.selectedCustomerId);try{window.history.replaceState({},document.title)}catch{}}},[re]);const G=E.reduce((fe,Me)=>fe+Me.amount,0),ve=parseFloat(D)||0,ye=parseFloat(M)||0,xe=G-ve+ye,q=fe=>{const Me=d.find(At=>At.id===fe);if(!Me)return;const ze={productId:Me.id,productName:Me.name,rate:Me.salePrice,quantity:1,amount:Me.salePrice};C([...E,ze]),z(!1),le("")},we=(fe,Me)=>{const ze=[...E];ze[fe].quantity=Math.max(1,Me),ze[fe].amount=ze[fe].rate*ze[fe].quantity,C(ze)},je=fe=>{C(E.filter((Me,ze)=>ze!==fe))},ue=async()=>{if(!v||E.length===0||!N){const fe=v?E.length?"Order number is not set. Please wait for it to load.":"Please add at least one product.":"Please select a customer.";B(fe),y.error(fe);return}if(!(r!=null&&r.id)){y.error("User session expired. Please log in again."),B("User session expired. Please log in again.");return}Q(!0),B(null);try{const fe=E.reduce((Kt,te)=>Kt+te.amount,0),Me=parseFloat(D)||0,ze=parseFloat(M)||0,At=fe-Me+ze,Ft=new Date,wa=Ft.toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"}),oe=Ft.toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"}),dt={orderNumber:N,orderDate:S,customerId:v,createdBy:"",status:s&&f?f.status:Ie.ON_HOLD,items:E,subtotal:fe,discount:Me,shipping:ze,total:At,notes:U,paidAmount:s&&f?f.paidAmount:0,history:s&&f?f.history:{created:`${r.name} created this order on ${wa}, at ${oe}`}};s?(await g.mutateAsync({id:e,updates:dt}),y.success("Order updated successfully"),t("/orders")):p.mutateAsync(dt).then(Kt=>{Q(!1),y.success("Order created successfully"),t(`/orders/${Kt.id}`)},Kt=>{Q(!1);const te=Kt instanceof Error?Kt.message:"Failed to save order";B(te),y.error(te)})}catch(fe){console.error("Failed to save order:",fe);const Me=fe instanceof Error?fe.message:"Failed to save order";B(Me),y.error(Me),Q(!1)}},Ue=l.find(fe=>fe.id===v);return c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 pb-20",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s?"Edit Order":"New Order"}),c.jsx("button",{onClick:()=>t("/orders"),className:"text-gray-500 hover:text-gray-700 font-medium text-sm px-4 py-2 border border-gray-200 rounded-lg bg-white transition-all",children:"Cancel"})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-100 shadow-sm space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"space-y-1 relative md:col-span-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Select Customer"}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>I(!ge),className:"w-full text-left px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl hover:bg-white focus:ring-2 focus:ring-[#3c5a82] transition-all flex justify-between items-center group",children:[Ue?c.jsxs("div",{className:"flex-1 overflow-hidden",children:[c.jsx("span",{className:"font-bold block text-sm text-gray-900",children:Ue.name}),c.jsx("p",{className:"text-[10px] text-gray-500 leading-none mt-0.5",children:Ue.phone}),c.jsx("p",{className:"text-[10px] ${theme.colors.primary[600]} italic truncate mt-1",children:Ue.address})]}):c.jsx("span",{className:"text-gray-400 text-sm",children:"Select Customer..."}),c.jsx("div",{className:`transition-transform duration-200 ${ge?"rotate-90":""}`,children:ie.ChevronRight})]}),ge&&c.jsxs("div",{className:"absolute top-full left-0 mt-2 w-full max-w-xs bg-white border border-gray-200 shadow-2xl rounded-lg z-[110] p-2 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"relative mb-2",children:[c.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none text-gray-300",children:ie.Search}),c.jsx("input",{autoFocus:!0,type:"text",placeholder:"Search name or phone...",className:"w-full pl-9 pr-4 py-2.5 bg-gray-50 border border-gray-100 rounded-xl outline-none focus:ring-2 focus:ring-[#3c5a82] text-sm font-medium",value:V,onChange:fe=>ae(fe.target.value)})]}),c.jsx("div",{className:"max-h-[220px] overflow-y-auto space-y-0.5 custom-scrollbar",children:l.filter(fe=>fe.name.toLowerCase().includes(V.toLowerCase())||fe.phone.includes(V)).map(fe=>c.jsxs("button",{onClick:()=>{j(fe.id),I(!1),ae("")},className:"w-full px-4 py-2.5 text-left hover:bg-[#ebf4ff] rounded-lg group transition-colors",children:[c.jsx("p",{className:"text-sm font-bold text-gray-800 group-hover:${theme.colors.primary[700]}",children:fe.name}),c.jsx("p",{className:"text-[10px] text-gray-400 group-hover:${theme.colors.primary[600]}/60",children:fe.phone})]},fe.id))}),c.jsx("button",{onClick:()=>{I(!1),t("/customers/new",{state:{fromOrderForm:!0,redirectPath:s?`/orders/edit/${e}`:"/orders/new"}})},className:"w-full mt-2 py-3 ${theme.colors.primary[600]} text-[10px] font-black uppercase tracking-widest border-t border-gray-50 hover:bg-[#ebf4ff] transition-colors",children:"+ Add New Customer"})]})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Order Date"}),c.jsx("input",{type:"date",value:S,onChange:fe=>_(fe.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-[#3c5a82] focus:bg-white transition-all cursor-pointer font-bold text-sm"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Order Number"}),c.jsx("input",{type:"text",readOnly:!0,value:N,placeholder:h?"Order number":"Loading...",className:"w-full px-4 py-3 bg-gray-100 border border-gray-100 rounded-xl font-mono ${theme.colors.primary[700]} text-sm font-bold"})]})]}),c.jsx("div",{className:"border border-gray-100 rounded-lg overflow-visible bg-white",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Product Item"}),c.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-center",children:"Rate"}),c.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-center",children:"Qty"}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-right",children:"Amount"}),c.jsx("th",{className:"px-4 py-4"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-50",children:[E.map((fe,Me)=>{var ze,At;return c.jsxs("tr",{className:"group hover:bg-gray-50/50",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex items-center gap-4",children:[((ze=d.find(Ft=>Ft.id===fe.productId))==null?void 0:ze.image)&&c.jsx("img",{src:(At=d.find(Ft=>Ft.id===fe.productId))==null?void 0:At.image,className:"w-12 h-12 rounded-full object-cover border border-gray-100 shadow-sm"}),c.jsx("span",{className:"font-bold text-gray-800 text-sm",children:fe.productName})]})}),c.jsx("td",{className:"px-4 py-4 text-center text-sm font-bold text-gray-600",children:Se(fe.rate)}),c.jsx("td",{className:"px-4 py-4 text-center",children:c.jsx("input",{type:"number",value:fe.quantity,onChange:Ft=>we(Me,parseInt(Ft.target.value)),className:"w-16 text-center py-2 border border-gray-100 rounded-xl focus:ring-2 focus:ring-[#3c5a82] font-bold outline-none"})}),c.jsx("td",{className:"px-6 py-4 text-right font-black text-gray-900 text-sm",children:Se(fe.amount)}),c.jsx("td",{className:"px-4 py-4 text-right",children:c.jsx("button",{onClick:()=>je(Me),className:"p-2 text-red-200 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",children:ie.Delete})})]},Me)}),c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"px-6 py-5 relative",children:c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>z(!K),className:"flex items-center gap-2 ${theme.colors.primary[600]} font-black text-[10px] uppercase tracking-widest hover:bg-[#ebf4ff] px-4 py-2.5 rounded-xl border-2 border-dashed border-[#c7dff5] transition-all",children:[ie.Plus," Add an item"]}),K&&c.jsxs("div",{className:"absolute top-full left-0 mt-3 w-full max-w-md bg-white border border-gray-200 shadow-2xl rounded-lg z-[100] p-2 overflow-hidden animate-in slide-in-from-top-2 duration-200",children:[c.jsxs("div",{className:"relative mb-2",children:[c.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none text-gray-300",children:ie.Search}),c.jsx("input",{autoFocus:!0,type:"text",placeholder:"Search catalog...",className:"w-full pl-9 pr-4 py-2.5 bg-gray-50 border border-gray-100 rounded-xl outline-none focus:ring-2 focus:ring-[#3c5a82] text-sm font-medium",value:pe,onChange:fe=>le(fe.target.value)})]}),c.jsx("div",{className:"max-h-[260px] overflow-y-auto space-y-0.5 custom-scrollbar",children:d.filter(fe=>fe.name.toLowerCase().includes(pe.toLowerCase())).map(fe=>c.jsxs("button",{onClick:()=>q(fe.id),className:"flex items-center gap-4 w-full px-4 py-3 text-left hover:bg-[#ebf4ff] rounded-xl group transition-all",children:[fe.image&&c.jsx("img",{src:fe.image,className:"w-10 h-10 rounded-full object-cover border border-gray-100 shadow-sm"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-bold text-gray-800 group-hover:${theme.colors.primary[700]} truncate",children:fe.name}),c.jsx("p",{className:"text-[10px] font-bold ${theme.colors.primary[600]}/60 uppercase tracking-widest",children:Se(fe.salePrice)})]})]},fe.id))})]})]})})})]})]})}),c.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-12 pt-6",children:[c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Order Notes / Terms"}),c.jsx("textarea",{placeholder:"Internal notes or special instructions for this order...",value:U,onChange:fe=>Y(fe.target.value),className:"w-full px-5 py-4 bg-gray-50 border border-gray-100 rounded-lg h-32 focus:ring-2 focus:ring-[#3c5a82] focus:bg-white outline-none font-medium text-sm transition-all"})]}),c.jsxs("div",{className:"w-full md:w-96 space-y-4 bg-gray-50/50 p-8 rounded-lg border border-gray-100",children:[c.jsxs("div",{className:"flex justify-between items-center text-gray-500 text-[12px] font-bold uppercase tracking-widest",children:[c.jsx("span",{children:"Subtotal"}),c.jsx("span",{className:"text-gray-900 font-black",children:Se(G)})]}),c.jsxs("div",{className:"flex justify-between items-center text-gray-500 text-[12px] font-bold uppercase tracking-widest",children:[c.jsx("span",{children:"Discount"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs text-gray-500 font-black",children:""}),c.jsx("input",{type:"number",value:D,onChange:fe=>T(fe.target.value),className:"w-20 text-right py-1.5 border border-gray-100 rounded-lg focus:ring-2 focus:ring-[#3c5a82] font-black text-gray-900 bg-white"})]})]}),c.jsxs("div",{className:"flex justify-between items-center text-gray-500 text-[12px] font-bold uppercase tracking-widest",children:[c.jsx("span",{children:"Shipping"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs text-gray-500 font-black",children:""}),c.jsx("input",{type:"number",value:M,onChange:fe=>R(fe.target.value),className:"w-20 text-right py-1.5 border border-gray-100 rounded-lg focus:ring-2 focus:ring-[#3c5a82] font-black text-gray-900 bg-white"})]})]}),c.jsxs("div",{className:"pt-6 border-t-4 border-[#c7dff5] flex justify-between items-center",children:[c.jsx("span",{className:"text-sm font-black text-gray-900 uppercase tracking-tighter",children:"Total"}),c.jsx("span",{className:"text-sm font-black text-[#3c5a82]",children:Se(xe)})]}),P&&c.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm font-bold text-red-600",children:P instanceof Error?P.message:String(P)})}),c.jsx(We,{onClick:ue,variant:"primary",size:"lg",className:"w-full mt-4",disabled:he,loading:he,children:s?"Update Order":"Create Order"})]})]})]})]})},Uoe=()=>{var B,W,re,G,ve,ye;const{id:e}=Mn(),t=vt(),r=Fe(),n=zr(),a=Ne.currentUser,s=a.role===qe.ADMIN,{data:l,isPending:d,error:f}=Hw(e||""),{data:h=[]}=Wo(),{data:p=[]}=Mi(),{data:g=[]}=tf(),{data:y=[]}=Bs(),{data:v}=Up(),{data:j}=qp(),S=rf();Fp();const _=af(),N=nf(),[O,E]=x.useState(!1),[C,D]=x.useState(!1),[T,M]=x.useState(!1),[R,U]=x.useState({date:new Date().toISOString().split("T")[0],accountId:Ne.settings.defaults.accountId||"",amount:0}),[Y,K]=x.useState(!1),z=l?h.find(xe=>xe.id===l.customerId):void 0,pe=l?p.find(xe=>xe.id===l.createdBy):void 0,le=a.role===qe.EMPLOYEE,ge=l?l.createdBy===a.id:!1,I=d;if(I)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading order..."});if(f||!l)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:(f==null?void 0:f.message)||"Order not found."});const V=async(xe,q,we)=>{if(l)try{const je={...l,status:xe,history:q?{...l.history,[q]:we}:l.history};await S.mutateAsync({id:e,updates:je}),r.invalidateQueries({queryKey:["order",e]}),K(!1)}catch(je){console.error("Failed to update order status:",je),n.error("Failed to update order status")}},ae=async()=>{const xe=`Marked as processing by ${a.name}, on ${new Date().toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"})}`;await V(Ie.PROCESSING,"processing",xe)},he=async()=>{const xe=`Marked as picked by courier, on ${new Date().toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"})}`;await V(Ie.PICKED,"picked",xe)},Q=async()=>{let xe=y.find(fe=>fe.id===R.accountId);if(!xe){if(!R.accountId){n.error("Please select an account");return}xe={id:R.accountId,name:"Selected Account",type:"Bank",openingBalance:0,currentBalance:0}}const q=l.paidAmount+R.amount;new Date(R.date);const we=`Payment of ${Se(R.amount)} received by ${a.name} on ${new Date().toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"})}`,je=R.amount<l.total,ue=Ie.COMPLETED,Ue={...l,paidAmount:q,status:ue,history:{...l.history,payment:we}};try{const fe={id:Math.random().toString(36).substr(2,9),date:R.date,type:"Income",category:Ne.settings.defaults.incomeCategoryId||"income_sales",accountId:R.accountId,amount:l.total,description:`Payment for Order #${l.orderNumber}`,referenceId:l.id,contactId:l.customerId,paymentMethod:Ne.settings.defaults.paymentMethod||"Cash",createdBy:a.id};if(await _.mutateAsync(fe),je){const At=l.total-R.amount,Ft={id:Math.random().toString(36).substr(2,9),date:R.date,type:"Expense",category:"expense_shipping",accountId:R.accountId,amount:At,description:`Shipping costs for Order #${l.orderNumber}`,paymentMethod:Ne.settings.defaults.paymentMethod||"Cash",createdBy:a.id};await _.mutateAsync(Ft)}const Me=R.amount,ze=await Promise.allSettled([S.mutateAsync({id:e,updates:Ue}),N.mutateAsync({id:R.accountId,updates:{currentBalance:xe.currentBalance+Me}})]);if(ze[0].status==="rejected"||ze[1].status==="rejected"){const At=ze[0].status==="rejected"?"failed":"succeeded",Ft=ze[1].status==="rejected"?"failed":"succeeded";throw new Error(`Payment update failed: Order update ${At}, Account update ${Ft}`)}r.invalidateQueries({queryKey:["order",e]}),r.invalidateQueries({queryKey:["orders"]}),E(!1),n.success("Payment recorded successfully")}catch(fe){console.error("Failed to record payment:",fe),n.error("Failed to record payment")}},P=()=>{U({date:new Date().toISOString().split("T")[0],accountId:"",amount:l.total-l.paidAmount}),E(!0)};return c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsx(Wd,{isLoading:I&&!l,message:"Loading order details..."}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>t("/orders"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500 transition-all",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-md md:text-2xl font-bold text-gray-900",children:l.orderNumber}),c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide ${Lp(l.status)}`,children:l.status}),l.status!==Ie.COMPLETED&&((W=(B=l.history)==null?void 0:B.courier)==null?void 0:W.includes("Steadfast"))&&c.jsx("img",{src:"/uploads/steadfast.png",alt:"Steadfast",className:"w-6 h-6 rounded-full"}),l.status!==Ie.COMPLETED&&((G=(re=l.history)==null?void 0:re.courier)==null?void 0:G.includes("CarryBee"))&&c.jsx("img",{src:"/uploads/carrybee.png",alt:"CarryBee",className:"w-6 h-6 rounded-full"})]}),c.jsxs("div",{className:"flex items-center gap-2 relative",children:[c.jsxs("button",{onClick:()=>Ap(e,t),className:"hidden md:flex items-center gap-2 px-4 py-2 text-sm font-semibold border rounded-lg bg-white hover:bg-gray-50 transition-all shadow-sm",children:[ie.Print," Print"]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>K(!Y),className:`flex items-center gap-2 px-4 py-2 text-sm font-semibold border rounded-lg ${se.colors.primary[600]} text-white hover:${se.colors.primary[700]} transition-all shadow-md`,children:[ie.More," ",c.jsx("span",{className:"hidden md:inline",children:"Actions"})]}),Y&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>K(!1)}),c.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-100 rounded-xl shadow-2xl z-50 py-2 animate-in fade-in zoom-in duration-150 origin-top-right",children:[c.jsxs("button",{onClick:()=>{Ap(e,t),K(!1)},className:"md:hidden w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[ie.Print," Print"]}),c.jsx("div",{className:"md:hidden border-t my-1"}),(s||ge||le&&l.status===Ie.ON_HOLD)&&c.jsxs("button",{onClick:()=>t(`/orders/edit/${l.id}`),className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[ie.Edit," Edit Order"]}),s&&l.status!==Ie.COMPLETED&&c.jsxs("button",{className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",onClick:P,children:[ie.Banking," Add Payment"]}),c.jsx("div",{className:"border-t my-1"}),s&&c.jsxs("button",{onClick:()=>V(Ie.CANCELLED),disabled:l.status===Ie.COMPLETED,className:"w-full text-left px-4 py-2.5 text-sm hover:bg-red-50 disabled:hover:bg-gray-50 flex items-center gap-2 text-red-500 font-bold disabled:text-gray-300 disabled:cursor-not-allowed",children:[ie.Delete," Cancel Order"]})]})]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8",children:[c.jsx("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-xl border border-gray-100 overflow-hidden",children:c.jsxs("div",{className:"p-3 sm:p-4 md:p-6 lg:p-10 space-y-3 sm:space-y-4 lg:space-y-5",children:[c.jsxs("div",{className:"flex flex-row justify-between items-start gap-3 sm:gap-4 lg:gap-6",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[((v==null?void 0:v.logo)||Ne.settings.company.logo)&&c.jsx("img",{src:(v==null?void 0:v.logo)||Ne.settings.company.logo,className:"rounded-lg object-cover mb-2 sm:mb-3 lg:mb-4 w-auto h-auto",style:{maxWidth:"min(100px, 20%)",maxHeight:"auto"}}),c.jsx("h1",{className:"text-sm sm:text-base lg:text-xl font-black text-blue-600 uppercase tracking-tighter break-words",children:(v==null?void 0:v.name)||Ne.settings.company.name}),c.jsxs("div",{className:"mt-1 sm:mt-2 text-[9px] sm:text-[10px] lg:text-xs text-gray-400 font-medium space-y-0.5 sm:space-y-1",children:[c.jsx("p",{className:"break-words",children:(v==null?void 0:v.address)||Ne.settings.company.address}),c.jsxs("p",{className:"text-[8px] sm:text-[9px] break-words",children:[(v==null?void 0:v.phone)||Ne.settings.company.phone,"  ",(v==null?void 0:v.email)||Ne.settings.company.email]})]})]}),c.jsxs("div",{className:"text-right flex-shrink-0",children:[c.jsx("h2",{className:"text-sm sm:text-2xl lg:text-3xl font-black text-gray-300 uppercase leading-none mb-1 sm:mb-2 break-words",children:(j==null?void 0:j.title)||Ne.settings.invoice.title}),c.jsxs("div",{className:"space-y-0.5 sm:space-y-1 lg:space-y-1.5 text-[9px] sm:text-sm",children:[c.jsxs("p",{className:"text-[9px] sm:text-xs lg:text-sm font-bold text-gray-900",children:[c.jsx("span",{className:"text-gray-400 font-medium",children:"Order No:"})," ",c.jsx("span",{className:"break-all",children:l.orderNumber})]}),c.jsxs("p",{className:"text-[9px] sm:text-xs lg:text-sm font-bold text-gray-900",children:[c.jsx("span",{className:"text-gray-400 font-medium",children:"Date:"})," ",l.orderDate]})]})]})]}),c.jsxs("div",{className:"border-t border-gray-100 py-2 sm:py-3 lg:py-4",children:[c.jsx("p",{className:"text-[8px] sm:text-[9px] lg:text-[10px] font-black text-gray-400 uppercase tracking-[0.15em] sm:tracking-[0.2em] mb-2 sm:mb-3 lg:mb-4",children:"Billed To"}),c.jsx("h3",{className:"text-sm sm:text-base lg:text-lg font-black text-gray-900 break-words",children:z==null?void 0:z.name}),c.jsx("p",{className:"text-[10px] sm:text-xs lg:text-sm text-gray-500 leading-relaxed break-words",children:z==null?void 0:z.address}),c.jsx("p",{className:"text-[10px] sm:text-xs lg:text-sm font-bold text-cyan-600 mt-1 sm:mt-1.5 lg:mt-2 break-words",children:z==null?void 0:z.phone})]}),c.jsx("div",{className:"overflow-x-auto -mx-3 sm:-mx-4 md:-mx-6 lg:-mx-10",children:c.jsx("div",{className:"px-3 sm:px-4 md:px-6 lg:px-10",children:c.jsxs("table",{className:"w-full text-left text-[10px] sm:text-xs lg:text-sm",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b-2 border-gray-100",children:[c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 font-black text-gray-400 uppercase",children:"Item Description"}),c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 text-center font-black text-gray-400 uppercase whitespace-nowrap px-1",children:"Rate"}),c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 text-center font-black text-gray-400 uppercase whitespace-nowrap px-1",children:"Qty"}),c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 text-right font-black text-gray-400 uppercase whitespace-nowrap px-1",children:"Total"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:l.items.map((xe,q)=>{const we=g.find(je=>je.id===xe.productId);return c.jsxs("tr",{className:"group",children:[c.jsx("td",{className:"py-3 sm:py-4 lg:py-6",children:c.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 lg:gap-4 min-w-0",children:[c.jsx("img",{src:we==null?void 0:we.image,className:"w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 rounded-full object-cover border border-gray-100 shadow-sm flex-shrink-0"}),c.jsx("span",{className:"font-bold text-gray-900 text-[10px] sm:text-xs lg:text-base break-words",children:xe.productName})]})}),c.jsx("td",{className:"py-3 sm:py-4 lg:py-6 text-center text-gray-500 font-bold px-1 whitespace-nowrap",children:Se(xe.rate)}),c.jsx("td",{className:"py-3 sm:py-4 lg:py-6 text-center text-gray-500 font-bold px-1 whitespace-nowrap",children:xe.quantity}),c.jsx("td",{className:"py-3 sm:py-4 lg:py-6 text-right font-black text-gray-900 px-1 whitespace-nowrap",children:Se(xe.amount)})]},q)})})]})})}),c.jsx("div",{className:"flex flex-col items-end pt-2 sm:pt-3 lg:pt-6 px-0",children:c.jsxs("div",{className:"w-full sm:w-full md:w-98 lg:max-w-xs space-y-2 sm:space-y-3 lg:space-y-4",children:[c.jsxs("div",{className:"flex justify-between text-[10px] sm:text-xs lg:text-sm gap-2",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase flex-shrink-0",children:"Subtotal"}),c.jsx("span",{className:"font-bold text-gray-900 flex-shrink-0",children:Se(l.subtotal)})]}),l.discount>0&&c.jsxs("div",{className:"flex justify-between text-[10px] sm:text-xs lg:text-sm gap-2",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase flex-shrink-0",children:"Discount"}),c.jsxs("span",{className:"font-bold text-red-500 flex-shrink-0",children:["-",Se(l.discount)]})]}),l.shipping>0&&c.jsxs("div",{className:"flex justify-between text-[10px] sm:text-xs lg:text-sm gap-2",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase flex-shrink-0",children:"Shipping"}),c.jsx("span",{className:"font-bold text-gray-900 flex-shrink-0",children:Se(l.shipping)})]}),c.jsxs("div",{className:"flex justify-between items-center py-2 sm:py-3 lg:py-4 border-t-2 border-[#0f2f57] gap-2",children:[c.jsx("span",{className:"font-black text-gray-900 uppercase tracking-tighter text-[11px] sm:text-xs lg:text-sm flex-shrink-0",children:"Net Total"}),c.jsx("span",{className:"font-black text-sm sm:text-base lg:text-lg flex-shrink-0",children:Se(l.total)})]})]})}),l.notes&&c.jsxs("div",{className:"bg-gray-50 p-3 sm:p-4 rounded-[10px] border border-gray-100",children:[c.jsx("p",{className:"text-[8px] sm:text-[9px] lg:text-[10px] font-black text-gray-300 uppercase tracking-widest mb-1 sm:mb-2",children:"Terms & Notes"}),c.jsx("p",{className:"text-[9px] sm:text-[10px] lg:text-xs text-gray-600 font-medium italic leading-relaxed",children:l.notes})]})]})}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"1. Creation"}),c.jsx("div",{className:"p-1 bg-[#ebf4ff]0 text-white rounded-full",children:ie.Plus})]}),c.jsx("div",{className:"p-5",children:c.jsx("p",{className:"text-xs text-gray-500 leading-relaxed font-medium",children:l.history.created||`Created by ${(pe==null?void 0:pe.name)||"Unknown"} on ${l.orderDate}`})})]}),(ve=l.history)!=null&&ve.processing||!le?c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"2. Processing"}),c.jsx("div",{className:`p-1 rounded-full ${l.history.processing?"bg-[#ebf4ff]0 text-white":"bg-gray-200 text-gray-400"}`,children:ie.ChevronRight})]}),c.jsxs("div",{className:"p-5 space-y-4",children:[l.history.processing?c.jsx("p",{className:"text-xs ${theme.colors.primary[600]} leading-relaxed font-bold bg-[#ebf4ff] p-3 rounded-xl",children:l.history.processing}):!le&&c.jsx("button",{disabled:l.status!==Ie.ON_HOLD,onClick:ae,className:`w-full py-3 ${se.colors.secondary[600]} hover:${se.colors.secondary[700]} disabled:bg-gray-100 disabled:text-gray-400 text-white font-bold rounded-xl shadow-md transition-all active:scale-95`,children:"Mark as Processing"}),l.history.courier?c.jsx("p",{className:"text-xs text-gray-700 leading-relaxed font-bold bg-gray-50 p-3 rounded-xl",children:l.history.courier}):!le&&l.status!==Ie.PICKED&&l.status!==Ie.COMPLETED&&l.status!==Ie.CANCELLED&&l.status!==Ie.ON_HOLD&&!((ye=l.history)!=null&&ye.courier)&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>D(!0),className:"w-full py-3 bg-[#0f2f57] hover:bg-[#0a1f38] text-white font-bold rounded-xl shadow-md transition-all active:scale-95 flex items-center justify-center gap-2",children:[c.jsx("img",{src:"/uploads/steadfast.png",alt:"Steadfast",className:"w-5 h-5 rounded-full"})," Add to Steadfast"]}),c.jsxs("button",{onClick:()=>M(!0),className:"w-full py-3 bg-[#0f2f57] hover:bg-[#0a1f38] text-white font-bold rounded-xl shadow-md transition-all active:scale-95 flex items-center justify-center gap-2",children:[c.jsx("img",{src:"/uploads/carrybee.png",alt:"CarryBee",className:"w-5 h-5 rounded-full"})," Add to CarryBee"]})]})]})]}):null,l.history.picked||!le?c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"3. Courier Picked"}),c.jsx("div",{className:`p-1 rounded-full ${l.history.picked?"bg-[#ebf4ff]0 text-white":"bg-gray-200 text-gray-400"}`,children:ie.Courier})]}),c.jsx("div",{className:"p-5",children:l.history.picked?c.jsx("p",{className:"text-xs text-purple-600 leading-relaxed font-bold bg-purple-50 p-3 rounded-xl",children:l.history.picked}):!le&&c.jsx("button",{disabled:l.status!==Ie.PROCESSING,onClick:he,className:"w-full py-3 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-100 disabled:text-gray-400 text-white font-bold rounded-xl shadow-md transition-all active:scale-95",children:"Mark as Picked"})})]}):null,l.history.payment||!le?c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"4. Payment"}),c.jsx("div",{className:`p-1 rounded-full ${l.paidAmount>=l.total?"bg-[#ebf4ff]0 text-white":"bg-gray-200 text-gray-400"}`,children:ie.Banking})]}),c.jsx("div",{className:"p-5 space-y-3",children:l.history.payment?c.jsx("div",{className:"space-y-2",children:c.jsx("p",{className:"text-xs ${theme.colors.primary[600]} leading-relaxed font-bold bg-[#ebf4ff] p-3 rounded-xl",children:l.history.payment})}):!le&&c.jsxs("div",{className:"space-y-4 text-center",children:[c.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[c.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase",children:"Amount Due"}),c.jsx("p",{className:"text-2xl font-black text-gray-900",children:Se(l.total-l.paidAmount)})]}),c.jsx("button",{onClick:P,className:`w-full py-3 ${se.colors.primary[600]} hover:${se.colors.primary[700]} text-white font-bold rounded-xl shadow-md transition-all active:scale-95`,children:"Add Payment"})]})})]}):null]})]}),c.jsx(Qw,{isOpen:O,onClose:()=>E(!1),onSubmit:Q,accounts:y,paymentForm:R,setPaymentForm:U,isLoading:S.isPending||_.isPending||N.isPending,title:"Record Payment",buttonText:"Add Payment"}),c.jsx(kD,{isOpen:C,onClose:()=>D(!1),order:l,customer:z}),c.jsx(TD,{isOpen:T,onClose:()=>M(!1),order:l,customer:z})]})},Ef=({page:e,totalPages:t,onPageChange:r,disabled:n})=>c.jsxs("div",{className:"flex items-center justify-between mt-4",children:[c.jsx("div",{className:"text-sm text-gray-600",children:`Page ${e} of ${t}`}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{disabled:n||e<=1,onClick:()=>r(Math.max(1,e-1)),className:`px-3 py-1 rounded-md font-bold ${e<=1?"bg-gray-100 text-gray-400":"bg-white text-gray-700 border"}`,children:"Prev"}),c.jsxs("div",{className:"px-3 py-1 text-sm",children:[e," / ",t]}),c.jsx("button",{disabled:n||e>=t,onClick:()=>r(Math.min(t,e+1)),className:`px-3 py-1 rounded-md font-bold ${e>=t?"bg-gray-100 text-gray-400":"bg-white text-gray-700 border"}`,children:"Next"})]})]}),zoe=()=>{const e=vt(),t=Fe(),r=zr(),{searchQuery:n}=Ka(),a=Ne.currentUser,{data:s}=Us(),l=(s==null?void 0:s.recordsPerPage)||qt,[d,f]=x.useState(1),[h,p]=x.useState("All Time"),[g,y]=x.useState({from:"",to:""}),[v,j]=x.useState("All"),[S,_]=x.useState("all"),{data:N=[]}=Mi(),O=x.useMemo(()=>{if(S!=="all")return S==="admins"?N.filter(G=>G.role===qe.ADMIN).map(G=>G.id):S==="employees"?N.filter(G=>G.role===qe.EMPLOYEE).map(G=>G.id):[S]},[S,N]),{data:E,isPending:C}=R9(d,l,{from:g.from,to:g.to,search:n,createdByIds:O}),D=(E==null?void 0:E.data)??[],T=(E==null?void 0:E.count)??0,M=Math.max(1,Math.ceil(T/l)),{data:R=[]}=ef();x.useEffect(()=>{f(1)},[n,h,g.from,g.to,S]);const U=G=>{f(1),p(G)},Y=G=>{f(1),y(G)},K=G=>{f(1),_(G)},[z,pe]=x.useState(null),[le,ge]=x.useState(null),[I,V]=x.useState(null),ae=ED(),he=G9(),Q=x.useMemo(()=>new Map(N.map(G=>[G.id,G])),[N]),P=G=>{var ve,ye;if((ve=G.createdBy)!=null&&ve.trim()){const xe=Q.get(G.createdBy);if(xe!=null&&xe.name)return xe.name}if((ye=G.history)!=null&&ye.created){const xe=G.history.created.match(/Created by\s+(.+?)\s+on/);if(xe&&xe[1])return xe[1]}return null},B=D.filter(G=>v==="All"||G.status===v),W=async G=>{try{const ve=new Date,ye=ve.toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"}),xe=ve.toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"}),q={billNumber:`PUR-${Math.floor(1e3+Math.random()*9e3)}`,billDate:new Date().toISOString().split("T")[0],vendorId:G.vendorId,createdBy:(a==null?void 0:a.id)||G.createdBy,status:hn.ON_HOLD,items:G.items,subtotal:G.subtotal,discount:G.discount,shipping:G.shipping,total:G.total,paidAmount:0,notes:G.notes,history:{created:`Created as duplicate on ${ye}, at ${xe}`}};await ae.mutateAsync(q),t.invalidateQueries({queryKey:["bills",1]})}catch(ve){console.error("Failed to duplicate bill:",ve),r.error("Failed to duplicate bill")}},re=async G=>{if(confirm("Are you sure you want to delete this bill?"))try{await he.mutateAsync(G),t.invalidateQueries({queryKey:["bills",d]})}catch(ve){console.error("Failed to delete bill:",ve),r.error("Failed to delete bill")}};return c.jsxs("div",{className:"space-y-6 pb-12",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-black text-gray-900 tracking-tight",children:"Purchase Bills"})}),c.jsx(We,{onClick:()=>e("/bills/new"),variant:"primary",size:"md",icon:ie.Plus,children:"New Bill"})]}),c.jsx($o,{title:"Bills",filterRange:h,setFilterRange:U,customDates:g,setCustomDates:Y,statusTab:v,setStatusTab:j,statusOptions:Object.values(hn)}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:c.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[c.jsx("label",{className:"text-sm font-bold text-gray-700",children:"Created By:"}),c.jsxs("select",{value:S,onChange:G=>K(G.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"all",children:"All Users"}),N.some(G=>G.role===qe.ADMIN)&&c.jsx("option",{value:"admins",children:"All Admins"}),N.some(G=>G.role===qe.EMPLOYEE)&&c.jsx("option",{value:"employees",children:"All Employees"}),c.jsx("optgroup",{label:"Specific Users",children:N.map(G=>c.jsxs("option",{value:G.id,children:[G.name," ",G.role===qe.ADMIN?"(Admin)":"(Employee)"]},G.id))})]})]})}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-visible",children:c.jsx("div",{className:"overflow-x-auto overflow-y-visible",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Bill Details"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Vendor"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Created By"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Status"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] text-right",children:"Net Amount"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] sm:hidden",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:C?c.jsx(Bp,{columns:5,rows:8}):B.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:6,className:"px-6 py-20 text-center text-gray-400 italic font-medium",children:"No purchase bills found for this period."})}):B.map(G=>{var ve;return c.jsxs("tr",{onMouseEnter:()=>pe(G.id),onMouseLeave:()=>pe(null),onClick:()=>e(`/bills/${G.id}`),className:"group relative hover:bg-[#ebf4ff]/20 cursor-pointer transition-all",children:[c.jsxs("td",{className:"px-6 py-5",children:[c.jsxs("span",{className:"font-black text-gray-900",children:["#",G.billNumber]}),c.jsx("p",{className:"text-[10px] text-gray-400 font-bold mt-1 tracking-tight",children:G.billDate})]}),c.jsx("td",{className:"px-6 py-5",children:c.jsx("span",{className:"text-sm font-bold text-gray-700",children:((ve=R.find(ye=>ye.id===G.vendorId))==null?void 0:ve.name)||"Unknown Vendor"})}),c.jsx("td",{className:"px-6 py-5 text-xs font-bold text-gray-500",children:P(G)||""}),c.jsx("td",{className:"px-6 py-5",children:c.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest ${Lp(G.status)}`,children:G.status})}),c.jsx("td",{className:"px-6 py-5 text-right",children:c.jsx("span",{className:"font-black text-gray-900 text-base",children:Se(G.total)})}),c.jsx("td",{className:"px-6 py-5 sm:hidden relative z-[999]",onClick:ye=>ye.stopPropagation(),children:c.jsxs("div",{className:"relative z-[999]",children:[c.jsx("button",{onClick:ye=>{const xe=ye.currentTarget;le===G.id?(ge(null),V(null)):(ge(G.id),V(xe))},className:"p-2 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-lg transition-all",children:ie.More}),c.jsxs(R5,{anchorEl:I,open:le===G.id,onClose:()=>{ge(null),V(null)},children:[c.jsxs("button",{onClick:()=>{e(`/bills/edit/${G.id}`),ge(null),V(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[ie.Edit," Edit"]}),c.jsxs("button",{onClick:()=>{W(G),ge(null),V(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[ie.Duplicate," Duplicate"]}),c.jsx("div",{className:"border-t my-1"}),c.jsxs("button",{onClick:()=>{re(G.id),ge(null),V(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-red-50 flex items-center gap-2 font-bold text-red-600",children:[ie.Delete," Delete"]})]})]})}),z===G.id&&c.jsx("td",{className:"absolute right-6 top-1/2 -translate-y-1/2 z-10 animate-in fade-in slide-in-from-right-2 duration-200 hidden sm:table-cell",onClick:ye=>ye.stopPropagation(),children:c.jsxs("div",{className:"flex items-center gap-1.5 bg-white p-1.5 rounded-2xl shadow-[0_20px_50px_rgba(0,0,0,0.15)] border border-[#ebf4ff]",children:[c.jsx("button",{onClick:()=>e(`/bills/edit/${G.id}`),className:"p-2.5 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-xl transition-all",title:"Edit",children:ie.Edit}),c.jsx("button",{onClick:()=>W(G),className:"p-2.5 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-xl transition-all",title:"Duplicate",children:ie.Duplicate}),c.jsx("div",{className:"h-5 w-px bg-gray-100 mx-1"}),c.jsx("button",{onClick:()=>re(G.id),className:"p-2.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all",title:"Delete",children:ie.Delete})]})})]},G.id)})})]})})}),c.jsx(Ef,{page:d,totalPages:M,onPageChange:G=>f(G),disabled:C})]})},eT=()=>{const{id:e}=Mn(),t=vt(),r=Ne.currentUser,n=!!e;if(!r)return c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Not Authenticated"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Please log in first."}),c.jsx(We,{onClick:()=>t("/login"),variant:"primary",children:"Back to Login"})]});const{data:a=[]}=ef(),{data:s=[]}=tf(),{data:l,isPending:d,error:f}=jD(e),h=ED(),p=AD(),g=zr(),[y,v]=x.useState(""),[j,S]=x.useState(new Date().toISOString().split("T")[0]),[_,N]=x.useState(""),[O,E]=x.useState([]),[C,D]=x.useState(0),[T,M]=x.useState(0),[R,U]=x.useState(""),[Y,K]=x.useState(!1),[z,pe]=x.useState(""),[le,ge]=x.useState(!1),[I,V]=x.useState(""),[ae,he]=x.useState(!1),[Q,P]=x.useState(null);$t.useEffect(()=>{l?(v(l.vendorId),S(l.billDate),N(l.billNumber),E(l.items),D(l.discount),M(l.shipping),U(l.notes||"")):n||N(`PUR-${Math.floor(1e3+Math.random()*9e3)}`)},[l,n]);const B=O.reduce((q,we)=>q+we.amount,0),W=B-C+T,re=q=>{const we=s.find(ue=>ue.id===q);if(!we)return;const je={productId:we.id,productName:we.name,rate:we.purchasePrice,quantity:1,amount:we.purchasePrice};E([...O,je]),K(!1),pe("")},G=(q,we)=>{const je=[...O];je[q].quantity=Math.max(1,we),je[q].amount=je[q].rate*je[q].quantity,E(je)},ve=q=>{E(O.filter((we,je)=>je!==q))},ye=async()=>{if(!y||O.length===0){P("Please select a vendor and add at least one product.");return}if(!(r!=null&&r.id)){P("User session expired. Please log in again.");return}he(!0),P(null);try{const q=O.reduce((fe,Me)=>fe+Me.amount,0),we=q-C+T,je=new Date().toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"}),ue=new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"}),Ue={billNumber:_,billDate:j,vendorId:y,createdBy:r.id,status:n&&l?l.status:hn.ON_HOLD,items:O,subtotal:q,discount:C,shipping:T,total:we,notes:R,paidAmount:n&&l?l.paidAmount:0,history:n&&l?l.history:{created:`Created by ${r.name} on ${je}, at ${ue}`}};n?(await p.mutateAsync({id:e,updates:Ue}),g.success("Bill updated successfully"),he(!1),t("/bills")):h.mutateAsync(Ue).then(fe=>{he(!1),g.success("Bill created successfully"),t(`/bills/${fe.id}`)},fe=>{he(!1);const Me=fe instanceof Error?fe.message:"Failed to save bill";P(Me),g.error(Me)})}catch(q){console.error("Failed to save bill:",q);const we=q instanceof Error?q.message:"Failed to save bill";P(we),g.error(we),he(!1)}},xe=a.find(q=>q.id===y);return c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 pb-20",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:n?"Edit Bill":"New Purchase Bill"}),c.jsx("button",{onClick:()=>t("/bills"),className:"text-gray-500 hover:text-gray-700 font-medium text-sm px-4 py-2 border border-gray-200 rounded-lg bg-white transition-all",children:"Cancel"})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-100 shadow-sm space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"space-y-1 relative md:col-span-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Select Vendor"}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>ge(!le),className:"w-full text-left px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl hover:bg-white focus:ring-2 focus:ring-[#3c5a82] transition-all flex justify-between items-center group",children:[xe?c.jsxs("div",{className:"flex-1 overflow-hidden",children:[c.jsx("span",{className:"font-bold block text-sm text-gray-900",children:xe.name}),c.jsx("p",{className:"text-[10px] text-gray-500 leading-none mt-0.5",children:xe.phone}),c.jsx("p",{className:"text-[10px] ${theme.colors.secondary[600]} italic truncate mt-1",children:xe.address})]}):c.jsx("span",{className:"text-gray-400 text-sm",children:"Select Vendor..."}),c.jsx("div",{className:`transition-transform duration-200 ${le?"rotate-90":""}`,children:ie.ChevronRight})]}),le&&c.jsxs("div",{className:"absolute top-full left-0 mt-2 w-full max-w-xs bg-white border border-gray-200 shadow-2xl rounded-lg z-[110] p-2 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"relative mb-2",children:[c.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none text-gray-300",children:ie.Search}),c.jsx("input",{autoFocus:!0,type:"text",placeholder:"Search business...",className:"w-full pl-9 pr-4 py-2.5 bg-gray-50 border border-gray-100 rounded-xl outline-none focus:ring-2 focus:ring-[#3c5a82] text-sm font-medium",value:I,onChange:q=>V(q.target.value)})]}),c.jsx("div",{className:"max-h-[220px] overflow-y-auto space-y-0.5 custom-scrollbar",children:a.filter(q=>q.name.toLowerCase().includes(I.toLowerCase())||q.phone.includes(I)).map(q=>c.jsxs("button",{onClick:()=>{v(q.id),ge(!1),V("")},className:"w-full px-4 py-2.5 text-left hover:bg-[#e6f0ff] rounded-lg group transition-colors",children:[c.jsx("p",{className:"text-sm font-bold text-gray-800 group-hover:${theme.colors.secondary[700]}",children:q.name}),c.jsx("p",{className:"text-[10px] text-gray-400 group-hover:${theme.colors.secondary[600]}/60",children:q.phone})]},q.id))}),c.jsx(We,{onClick:()=>{ge(!1),t("/vendors/new")},variant:"secondary",size:"sm",className:"w-full mt-2 text-[10px]",icon:ie.Plus,children:"Add New Vendor"})]})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Bill Date"}),c.jsx("input",{type:"date",value:j,onChange:q=>S(q.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-[#3c5a82] focus:bg-white transition-all cursor-pointer font-bold text-sm"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Bill Number"}),c.jsx("input",{type:"text",value:_,onChange:q=>N(q.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl font-mono ${theme.colors.secondary[700]} text-sm font-bold"})]})]}),c.jsx("div",{className:"border border-gray-100 rounded-lg overflow-visible bg-white",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Product Item"}),c.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-center",children:"Cost Rate"}),c.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-center",children:"Qty"}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-right",children:"Amount"}),c.jsx("th",{className:"px-4 py-4"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-50",children:[O.map((q,we)=>{var je,ue;return c.jsxs("tr",{className:"group hover:bg-gray-50/50",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex items-center gap-4",children:[((je=s.find(Ue=>Ue.id===q.productId))==null?void 0:je.image)&&c.jsx("img",{src:(ue=s.find(Ue=>Ue.id===q.productId))==null?void 0:ue.image,className:"w-12 h-12 rounded-full object-cover border border-gray-100 shadow-sm"}),c.jsx("span",{className:"font-bold text-gray-800 text-sm",children:q.productName})]})}),c.jsx("td",{className:"px-4 py-4 text-center text-sm font-bold text-gray-600",children:Se(q.rate)}),c.jsx("td",{className:"px-4 py-4 text-center",children:c.jsx("input",{type:"number",value:q.quantity,onChange:Ue=>G(we,parseInt(Ue.target.value)),className:"w-16 text-center py-2 border border-gray-100 rounded-xl focus:ring-2 focus:ring-[#3c5a82] font-bold outline-none"})}),c.jsx("td",{className:"px-6 py-4 text-right font-black text-gray-900 text-sm",children:Se(q.amount)}),c.jsx("td",{className:"px-4 py-4 text-right",children:c.jsx("button",{onClick:()=>ve(we),className:"p-2 text-red-200 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",children:ie.Delete})})]},we)}),c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"px-6 py-5 relative",children:c.jsxs("div",{className:"relative",children:[c.jsx(We,{onClick:()=>K(!Y),variant:"secondary",size:"sm",icon:ie.Plus,className:"border-2 border-dashed border-[#c7e0f5]",children:"Add an item"}),Y&&c.jsxs("div",{className:"absolute top-full left-0 mt-3 w-full max-w-md bg-white border border-gray-200 shadow-2xl rounded-lg z-[100] p-2 overflow-hidden animate-in slide-in-from-top-2 duration-200",children:[c.jsxs("div",{className:"relative mb-2",children:[c.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none text-gray-300",children:ie.Search}),c.jsx("input",{autoFocus:!0,type:"text",placeholder:"Search product...",className:"w-full pl-9 pr-4 py-2.5 bg-gray-50 border border-gray-100 rounded-xl outline-none focus:ring-2 focus:ring-[#3c5a82] text-sm font-medium",value:z,onChange:q=>pe(q.target.value)})]}),c.jsx("div",{className:"max-h-[260px] overflow-y-auto space-y-0.5 custom-scrollbar",children:s.filter(q=>q.name.toLowerCase().includes(z.toLowerCase())).map(q=>c.jsxs("button",{onClick:()=>re(q.id),className:"flex items-center gap-4 w-full px-4 py-3 text-left hover:bg-[#e6f0ff] rounded-xl group transition-all",children:[q.image&&c.jsx("img",{src:q.image,className:"w-10 h-10 rounded-full object-cover border border-gray-100 shadow-sm"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-bold text-gray-800 group-hover:${theme.colors.secondary[700]} truncate",children:q.name}),c.jsxs("p",{className:"text-[10px] font-bold ${theme.colors.secondary[600]}/60 uppercase tracking-widest",children:["Cost: ",Se(q.purchasePrice)]})]})]},q.id))})]})]})})})]})]})}),c.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-12 pt-6",children:[c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Purchase Memo"}),c.jsx("textarea",{placeholder:"Bill details, vendor instructions, or delivery notes...",value:R,onChange:q=>U(q.target.value),className:"w-full px-5 py-4 bg-gray-50 border border-gray-100 rounded-lg h-32 focus:ring-2 focus:ring-[#3c5a82] focus:bg-white outline-none font-medium text-sm transition-all"})]}),c.jsxs("div",{className:"w-full md:w-96 space-y-4 bg-gray-50/50 p-8 rounded-[2rem] border border-gray-100",children:[c.jsxs("div",{className:"flex justify-between items-center text-gray-500 text-sm font-bold uppercase tracking-widest",children:[c.jsx("span",{children:"Subtotal"}),c.jsx("span",{className:"text-gray-900 font-black",children:Se(B)})]}),c.jsxs("div",{className:"flex justify-between items-center text-gray-500 text-sm font-bold uppercase tracking-widest",children:[c.jsx("span",{children:"Discount"}),c.jsx("input",{type:"number",value:C,onChange:q=>D(parseFloat(q.target.value)||0),className:"w-24 text-right px-3 py-1.5 border border-gray-100 rounded-lg focus:ring-2 focus:ring-[#3c5a82] font-black text-gray-900 bg-white"})]}),c.jsxs("div",{className:"flex justify-between items-center text-gray-500 text-sm font-bold uppercase tracking-widest",children:[c.jsx("span",{children:"Shipping"}),c.jsx("input",{type:"number",value:T,onChange:q=>M(parseFloat(q.target.value)||0),className:"w-24 text-right px-3 py-1.5 border border-gray-100 rounded-lg focus:ring-2 focus:ring-[#3c5a82] font-black text-gray-900 bg-white"})]}),c.jsxs("div",{className:"pt-6 border-t-4 border-[#c7e0f5] flex justify-between items-center",children:[c.jsx("span",{className:"text-lg font-bold text-gray-900 uppercase tracking-tighter",children:"Total Bill"}),c.jsx("span",{className:"text-3xl font-black",children:Se(W)})]}),c.jsx(We,{onClick:ye,variant:"primary",size:"lg",className:"w-full mt-4",loading:ae,disabled:ae,children:"Save Purchase Bill"})]})]})]})]})},qoe=()=>{var I,V,ae,he;const{id:e}=Mn(),t=vt(),r=Fe(),n=Ne.currentUser,{data:a,isPending:s,error:l}=jD(e||""),{data:d=[]}=ef(),{data:f=[]}=Mi(),{data:h=[]}=Bs(),{data:p=[]}=tf(),{data:g}=Up(),{data:y}=qp(),v=AD(),j=af(),S=nf(),_=zr(),N=v.isPending||j.isPending||S.isPending,O=a?d.find(Q=>Q.id===a.vendorId):void 0,E=a?f.find(Q=>Q.id===a.createdBy):void 0,C=s,[D,T]=x.useState(!1),[M,R]=x.useState(!1),[U,Y]=x.useState({date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!1}),accountId:Ne.settings.defaults.accountId||"",amount:0});if(C)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading bill..."});if(l||!a)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:(l==null?void 0:l.message)||"Bill not found."});const K=async(Q,P,B)=>{if(a)try{const W={...a,status:Q,history:P?{...a.history,[P]:B}:a.history};await v.mutateAsync({id:e,updates:W}),r.invalidateQueries({queryKey:["bill",e]}),r.invalidateQueries({queryKey:["bills"]}),T(!1)}catch(W){console.error("Failed to update bill status:",W),_.error("Failed to update bill status")}},z=async()=>{const Q=`Marked as processing by ${n.name}, on ${new Date().toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"})}`;await K(hn.PROCESSING,"processing",Q)},pe=async()=>{const Q=`Marked as received by ${n.name}, on ${new Date().toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"})}`;await K(hn.RECEIVED,"received",Q)},le=async()=>{if(a)try{let Q=h.find(ue=>ue.id===U.accountId);if(!Q){if(!U.accountId){_.error("Please select an account");return}Q={id:U.accountId,name:"Selected Account",type:"Bank",openingBalance:0,currentBalance:0}}const P=a.paidAmount+U.amount,B=`Payment of ${Se(U.amount)} received by ${n.name} on ${new Date(U.date).toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"})}`,re=P>=a.total?hn.PAID:a.status,[G,ve]=U.time.split(":").map(Number),ye=new Date(U.date);ye.setHours(G,ve,0,0);const xe=ye.toISOString(),q={...a,paidAmount:P,status:re,history:{...a.history,paid:B},paidAt:U.date};try{const ue={id:Math.random().toString(36).substr(2,9),date:xe,type:"Expense",category:Ne.settings.defaults.expenseCategoryId||"expense_purchases",accountId:U.accountId,amount:U.amount,description:`Payment for Bill #${a.billNumber}`,referenceId:a.id,contactId:a.vendorId,paymentMethod:Ne.settings.defaults.paymentMethod||"Cash",createdBy:n.id};await j.mutateAsync(ue)}catch(ue){console.error("Failed to create transaction:",ue)}const we=U.amount,je=await Promise.allSettled([v.mutateAsync({id:e,updates:q}),S.mutateAsync({id:U.accountId,updates:{currentBalance:Q.currentBalance-we}})]);if(je[0].status==="rejected"||je[1].status==="rejected"){const ue=je[0].status==="rejected"?"failed":"succeeded",Ue=je[1].status==="rejected"?"failed":"succeeded";throw new Error(`Payment update failed: Bill update ${ue}, Account update ${Ue}`)}r.invalidateQueries({queryKey:["bill",e]}),r.invalidateQueries({queryKey:["bills"]}),R(!1),_.success("Payment recorded successfully")}catch(Q){console.error("Failed to record payment:",Q),_.error("Failed to record payment")}},ge=()=>{a&&(Y({date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!1}),accountId:"",amount:a.total-a.paidAmount}),R(!0))};return c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsx(Wd,{isLoading:C&&!a,message:"Loading bill details..."}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>t("/bills"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500 transition-all",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsxs("h2",{className:"text-md md:text-2xl font-bold text-gray-900",children:["#",a.billNumber]}),c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide ${Lp(a.status)}`,children:a.status})]}),c.jsxs("div",{className:"flex items-center gap-2 relative",children:[c.jsxs("button",{className:"hidden md:flex items-center gap-2 px-4 py-2 text-sm font-semibold border rounded-lg bg-white hover:bg-gray-50 transition-all",children:[ie.Print," Print Bill"]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>T(!D),className:`flex items-center gap-2 px-4 py-2 text-sm font-semibold border rounded-lg ${se.colors.primary[600]} text-white hover:${se.colors.primary[700]} transition-all shadow-md`,children:[ie.More," ",c.jsx("span",{className:"hidden md:inline",children:"Actions"})]}),D&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>T(!1)}),c.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white border rounded-xl shadow-xl z-50 py-2",children:[c.jsx("button",{onClick:()=>{window.print(),T(!1)},className:"md:hidden w-full text-left px-4 py-2 text-sm hover:bg-gray-50",children:"Print Bill"}),c.jsx("button",{onClick:()=>{window.print(),T(!1)},className:"md:hidden border-t w-full text-left px-4 py-2 text-sm hover:bg-gray-50"}),c.jsx("button",{onClick:()=>{z(),T(!1)},className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50",children:"Mark Processing"}),c.jsx("button",{onClick:()=>{pe(),T(!1)},className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50",children:"Mark Received"}),c.jsx("div",{className:"border-t my-1"}),c.jsx("button",{onClick:()=>{ge(),T(!1)},disabled:a.paidAmount>=a.total,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 text-red-600 font-bold disabled:text-gray-300 disabled:cursor-not-allowed",children:"Record Payment"}),c.jsx("button",{onClick:()=>t(`/bills/edit/${a.id}`),className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50",children:"Edit Bill"})]})]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[c.jsx("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:c.jsxs("div",{className:"p-3 sm:p-4 md:p-6 lg:p-8 space-y-6 sm:space-y-8",children:[c.jsxs("div",{className:"flex flex-row justify-between items-start gap-3 sm:gap-4",children:[c.jsxs("div",{className:"min-w-0",children:[((g==null?void 0:g.logo)||Ne.settings.company.logo)&&c.jsx("img",{src:(g==null?void 0:g.logo)||Ne.settings.company.logo,className:"rounded-lg object-cover mb-2 sm:mb-3 lg:mb-4 w-auto h-auto",style:{maxWidth:"min(100px, 20%)",maxHeight:"auto"}}),c.jsx("h1",{className:"text-sm sm:text-base lg:text-xl font-black text-blue-600 uppercase tracking-tighter break-words",children:(g==null?void 0:g.name)||Ne.settings.company.name}),c.jsxs("div",{className:"mt-1 sm:mt-2 text-[9px] sm:text-[10px] lg:text-xs text-gray-400 font-medium space-y-0.5 sm:space-y-1",children:[c.jsx("p",{className:"break-words",children:(g==null?void 0:g.address)||Ne.settings.company.address}),c.jsxs("p",{className:"text-[8px] sm:text-[9px] break-words",children:[(g==null?void 0:g.phone)||Ne.settings.company.phone,"  ",(g==null?void 0:g.email)||Ne.settings.company.email]})]})]}),c.jsxs("div",{className:"text-right flex-shrink-0",children:[c.jsx("h2",{className:"text-sm sm:text-2xl lg:text-3xl font-black text-gray-300 uppercase leading-none mb-1 sm:mb-2 break-words",children:(y==null?void 0:y.title)||Ne.settings.invoice.title}),c.jsxs("div",{className:"space-y-0.5 sm:space-y-1 lg:space-y-1.5 text-[9px] sm:text-sm",children:[c.jsxs("p",{className:"text-[9px] sm:text-sm font-bold text-gray-900 break-words",children:["Bill No: #",a.billNumber]}),c.jsx("p",{className:"text-[9px] sm:text-sm text-gray-500",children:a.billDate})]})]})]}),c.jsxs("div",{className:"border-t border-gray-100 py-2 sm:py-3 lg:py-4",children:[c.jsx("p",{className:"text-[8px] sm:text-[9px] lg:text-[10px] font-black text-gray-400 uppercase tracking-[0.15em] sm:tracking-[0.2em] mb-2 sm:mb-3 lg:mb-4",children:"Bill From (Vendor)"}),c.jsx("h3",{className:"text-sm sm:text-base lg:text-lg font-black text-gray-900 break-words",children:O==null?void 0:O.name}),c.jsx("p",{className:"text-[10px] sm:text-xs lg:text-sm text-gray-500 leading-relaxed break-words",children:O==null?void 0:O.address}),c.jsx("p",{className:"text-[10px] sm:text-xs lg:text-sm font-bold text-cyan-600 mt-1 sm:mt-1.5 lg:mt-2 break-words",children:O==null?void 0:O.phone})]}),c.jsx("div",{className:"overflow-x-auto -mx-3 sm:-mx-4 md:-mx-6 lg:-mx-10",children:c.jsx("div",{className:"px-3 sm:px-4 md:px-6 lg:px-10",children:c.jsxs("table",{className:"w-full text-left text-[10px] sm:text-xs lg:text-sm",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b-2 border-gray-100",children:[c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 font-black text-gray-400 uppercase",children:"Description"}),c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 text-center font-black text-gray-400 uppercase whitespace-nowrap px-1",children:"Cost"}),c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 text-center font-black text-gray-400 uppercase whitespace-nowrap px-1",children:"Qty"}),c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 text-right font-black text-gray-400 uppercase whitespace-nowrap px-1",children:"Total"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:a.items.map((Q,P)=>{const B=p.find(W=>W.id===Q.productId);return c.jsxs("tr",{className:"group",children:[c.jsx("td",{className:"py-3 sm:py-4 lg:py-6",children:c.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 lg:gap-4 min-w-0",children:[c.jsx("img",{src:B==null?void 0:B.image,className:"w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 rounded-full object-cover border border-gray-100 shadow-sm flex-shrink-0"}),c.jsx("span",{className:"font-bold text-gray-900 text-[10px] sm:text-xs lg:text-base break-words",children:Q.productName})]})}),c.jsx("td",{className:"py-3 sm:py-4 lg:py-6 text-center text-gray-500 font-bold px-1 whitespace-nowrap",children:Se(Q.rate)}),c.jsx("td",{className:"py-3 sm:py-4 lg:py-6 text-center text-gray-500 font-bold px-1 whitespace-nowrap",children:Q.quantity}),c.jsx("td",{className:"py-3 sm:py-4 lg:py-6 text-right font-black text-gray-900 px-1 whitespace-nowrap",children:Se(Q.amount)})]},P)})})]})})}),c.jsx("div",{className:"flex flex-col items-end pt-2 sm:pt-3 lg:pt-6 px-0",children:c.jsxs("div",{className:"w-full sm:w-full md:w-98 lg:max-w-xs space-y-2 sm:space-y-3 lg:space-y-4",children:[c.jsxs("div",{className:"flex justify-between text-[10px] sm:text-xs lg:text-sm gap-2",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase flex-shrink-0",children:"Subtotal"}),c.jsx("span",{className:"font-bold text-gray-900 flex-shrink-0",children:Se(a.subtotal)})]}),a.discount>0&&c.jsxs("div",{className:"flex justify-between text-[10px] sm:text-xs lg:text-sm gap-2",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase flex-shrink-0",children:"Discount"}),c.jsxs("span",{className:"font-bold text-red-500 flex-shrink-0",children:["-",Se(a.discount)]})]}),a.shipping>0&&c.jsxs("div",{className:"flex justify-between text-[10px] sm:text-xs lg:text-sm gap-2",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase flex-shrink-0",children:"Shipping"}),c.jsx("span",{className:"font-bold text-gray-900 flex-shrink-0",children:Se(a.shipping)})]}),c.jsxs("div",{className:"flex justify-between items-center py-2 sm:py-3 lg:py-4 border-t-2 border-[#0f2f57] gap-2",children:[c.jsx("span",{className:"font-black text-gray-900 uppercase tracking-tighter text-[11px] sm:text-xs lg:text-sm flex-shrink-0",children:"Total Payable"}),c.jsx("span",{className:"font-black text-sm sm:text-base lg:text-lg flex-shrink-0",children:Se(a.total)})]})]})})]})}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"1. Creation"}),c.jsx("div",{className:"p-1 bg-[#ebf4ff] text-white rounded-full",children:ie.Plus})]}),c.jsx("div",{className:"p-5",children:c.jsx("p",{className:"text-xs text-gray-500 leading-relaxed font-medium",children:E!=null&&E.name?`${a.history.created} `:((I=a.history)==null?void 0:I.created)||"Creation information unavailable"})})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"2. Processing"}),c.jsx("div",{className:`p-1 rounded-full ${a.status===hn.PROCESSING?"bg-[#ebf4ff] text-white":"bg-gray-200 text-gray-400"}`,children:ie.ChevronRight})]}),c.jsx("div",{className:"p-5",children:(V=a.history)!=null&&V.processing?c.jsx("p",{className:"text-xs text-blue-600 leading-relaxed font-bold bg-[#ebf4ff] p-3 rounded-xl",children:a.history.processing}):c.jsx("button",{disabled:a.status===hn.RECEIVED,onClick:z,className:`w-full py-3 ${se.colors.secondary[600]} hover:${se.colors.secondary[700]} disabled:bg-gray-100 disabled:text-gray-400 text-white font-bold rounded-xl shadow-md transition-all active:scale-95`,children:"Mark as Processing"})})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"3. Received"}),c.jsx("div",{className:`p-1 rounded-full ${a.status===hn.RECEIVED?"bg-green-100 text-green-600":"bg-gray-200 text-gray-400"}`,children:ie.ChevronRight})]}),c.jsx("div",{className:"p-5",children:(ae=a.history)!=null&&ae.received?c.jsx("p",{className:"text-xs text-green-600 leading-relaxed font-bold bg-green-50 p-3 rounded-xl",children:a.history.received}):c.jsx("button",{disabled:a.status===hn.ON_HOLD,onClick:pe,className:"w-full py-3 bg-green-600 hover:bg-green-700 disabled:bg-gray-100 disabled:text-gray-400 text-white font-bold rounded-xl shadow-md transition-all active:scale-95",children:"Mark as Received"})})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"4. Payment"}),c.jsx("div",{className:`p-1 rounded-full ${a.paidAmount>0?"bg-[#ebf4ff] text-white":"bg-gray-200 text-gray-400"}`,children:ie.Banking})]}),c.jsx("div",{className:"p-5 space-y-3",children:a.paidAmount>0?c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-xs text-blue-600 leading-relaxed font-bold bg-[#ebf4ff] p-3 rounded-xl",children:(he=a.history)==null?void 0:he.paid}),a.paidAt&&c.jsxs("p",{className:"text-xs text-gray-500 leading-relaxed font-medium",children:["Payment Date: ",new Date(a.paidAt).toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})]}),a.paidAmount<a.total&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"p-3 bg-yellow-50 rounded-lg border border-yellow-100 mt-2",children:[c.jsx("p",{className:"text-[10px] font-black text-yellow-600 uppercase",children:"Remaining Amount"}),c.jsx("p",{className:"text-lg font-black text-yellow-700",children:Se(a.total-a.paidAmount)})]}),c.jsx("button",{onClick:ge,className:`w-full py-3 ${se.colors.primary[600]} hover:${se.colors.primary[700]} text-white font-bold rounded-xl shadow-md transition-all active:scale-95`,children:"Add Balance Payment"})]})]}):c.jsxs("div",{className:"space-y-4 text-center",children:[c.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[c.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase",children:"Amount Due"}),c.jsx("p",{className:"text-2xl font-black text-gray-900",children:Se(a.total-a.paidAmount)})]}),c.jsx("button",{onClick:ge,className:`w-full py-3 ${se.colors.primary[600]} hover:${se.colors.primary[700]} text-white font-bold rounded-xl shadow-md transition-all active:scale-95`,children:"Record Payment"})]})})]})]})]}),c.jsx(Qw,{isOpen:M,onClose:()=>R(!1),onSubmit:le,accounts:h,paymentForm:U,setPaymentForm:Y,isLoading:N,title:"Record Payment",buttonText:"Add Payment"})]})},Foe=()=>{const{data:e=[],isLoading:t}=Bs(),{searchQuery:r}=Ka(),n=Y9(),a=W9(),s=zr(),l=x.useMemo(()=>{if(!r.trim())return e;const _=r.toLowerCase();return e.filter(N=>N.name.toLowerCase().includes(_)||N.type.toLowerCase().includes(_))},[e,r]),[d,f]=x.useState(!1),[h,p]=x.useState(null),[g,y]=x.useState({name:"",type:"Bank",openingBalance:0}),v=async()=>{if(g.name)try{await n.mutateAsync({name:g.name,type:g.type,openingBalance:g.openingBalance,currentBalance:g.openingBalance}),f(!1),y({name:"",type:"Bank",openingBalance:0})}catch(_){console.error("Failed to create account:",_),s.error("Failed to create account. Please try again.")}},j=async _=>{const N=e.find(O=>O.id===_);if(N){if(N.currentBalance!==0){s.warning(`Cannot delete account "${N.name}" because it has a balance of ${N.currentBalance}. Please transfer the balance to another account first.`);return}if(confirm(`Are you sure you want to delete the account "${N.name}"?`))try{await a.mutateAsync(_),p(null)}catch(O){console.error("Failed to delete account:",O),s.error("Failed to delete account. Please try again.")}}},S=l.reduce((_,N)=>_+N.currentBalance,0);return c.jsxs("div",{className:"space-y-6",children:[c.jsx(Wd,{isLoading:t,message:"Loading accounts..."}),c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-bold text-gray-900",children:"Banking & Accounts"})}),c.jsx(We,{onClick:()=>f(!0),variant:"primary",size:"md",icon:ie.Plus,disabled:n.isPending,children:"Add Account"})]}),c.jsxs("div",{className:`${se.colors.primary[600]} rounded-xl p-8 text-white shadow-xl shadow-[#0f2f57]/20 relative overflow-hidden`,children:[c.jsxs("div",{className:"relative z-10",children:[c.jsx("p",{className:"text-[#c7dff5] font-medium text-sm mb-1 uppercase tracking-wider",children:"Total Combined Balance"}),c.jsx("h1",{className:"text-4xl font-black",children:Se(S)}),c.jsxs("div",{className:"mt-8 flex gap-6",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-[#a8c5e8] text-xs font-bold uppercase",children:"Bank Accounts"}),c.jsx("p",{className:"text-xl font-bold",children:e.filter(_=>_.type==="Bank").length})]}),c.jsx("div",{className:"w-px bg-[#0f2f57]/50 h-10"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-[#a8c5e8] text-xs font-bold uppercase",children:"Cash Accounts"}),c.jsx("p",{className:"text-xl font-bold",children:e.filter(_=>_.type==="Cash").length})]})]})]}),c.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 pointer-events-none",children:c.jsx("div",{className:"w-48 h-48 border-[24px] border-white rounded-full"})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(_=>c.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow group relative",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("div",{className:`p-3 rounded-xl ${_.type==="Bank"?`bg-[#e6f0ff] ${se.colors.secondary[600]}`:"bg-orange-50 text-orange-600"}`,children:(_.type==="Bank",ie.Banking)}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>p(h===_.id?null:_.id),className:"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-lg transition-all",children:ie.More}),h===_.id&&c.jsx("div",{className:"absolute right-0 mt-1 w-40 bg-white border border-gray-100 rounded-lg shadow-lg z-50 py-1",children:c.jsxs("button",{onClick:()=>j(_.id),disabled:_.currentBalance!==0||a.isPending,className:`w-full text-left px-4 py-2.5 text-sm flex items-center gap-2 font-bold ${_.currentBalance!==0||a.isPending?"text-gray-400 cursor-not-allowed":"text-red-600 hover:bg-red-50"}`,title:_.currentBalance!==0?"Account must have zero balance to delete":"Delete account",children:[ie.Delete," Delete"]})})]})]}),c.jsx("h3",{className:"text-lg font-bold text-gray-900",children:_.name}),c.jsxs("p",{className:"text-xs text-gray-400 font-medium uppercase tracking-tight mb-4",children:[_.type," Account"]}),c.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-50",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-gray-500",children:"Opening Balance"}),c.jsx("span",{className:"font-semibold text-gray-700",children:Se(_.openingBalance)})]}),c.jsxs("div",{className:"flex justify-between items-center pt-2",children:[c.jsx("span",{className:"text-sm font-bold text-gray-900",children:"Current Balance"}),c.jsx("span",{className:"text-xl font-black",children:Se(_.currentBalance)})]})]})]},_.id))}),d&&c.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[c.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm",onClick:()=>f(!1)}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md relative z-10 animate-in fade-in zoom-in duration-200",children:[c.jsx("div",{className:"p-6 border-b",children:c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Add New Account"})}),c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Account Name"}),c.jsx("input",{type:"text",placeholder:"e.g. City Bank - 0987",className:"w-full px-4 py-2 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-emerald-500",value:g.name,onChange:_=>y({...g,name:_.target.value})})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Account Type"}),c.jsxs("select",{className:"w-full px-4 py-2 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-emerald-500",value:g.type,onChange:_=>y({...g,type:_.target.value}),children:[c.jsx("option",{value:"Bank",children:"Bank"}),c.jsx("option",{value:"Cash",children:"Cash"})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Opening Balance"}),c.jsx("input",{type:"number",placeholder:"0.00",className:"w-full px-4 py-2 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-emerald-500",value:g.openingBalance,onChange:_=>y({...g,openingBalance:parseFloat(_.target.value)||0})})]})]}),c.jsxs("div",{className:"p-6 bg-gray-50 rounded-b-2xl flex gap-3",children:[c.jsx(We,{onClick:()=>f(!1),variant:"ghost",disabled:n.isPending,children:"Cancel"}),c.jsx(We,{onClick:v,variant:"primary",size:"md",className:"flex-1",disabled:n.isPending||!g.name,children:n.isPending?"Creating...":"Create Account"})]})]})]})]})},Koe=()=>{const e=vt();Fe(),zr();const{searchQuery:t}=Ka(),{data:r}=Us(),n=(r==null?void 0:r.recordsPerPage)||qt,[a,s]=x.useState("All Time"),[l,d]=x.useState({from:"",to:""}),[f,h]=x.useState("All"),[p,g]=x.useState("all"),[y,v]=x.useState(1),{data:j=[]}=Mi(),S=x.useMemo(()=>{if(p!=="all")return p==="admins"?j.filter(P=>P.role===qe.ADMIN).map(P=>P.id):p==="employees"?j.filter(P=>P.role===qe.EMPLOYEE).map(P=>P.id):[p]},[p,j]),{data:_,isPending:N}=I9(y,n,{type:f==="All"?void 0:f,from:l.from,to:l.to,search:t,createdByIds:S}),O=(_==null?void 0:_.data)??[],E=(_==null?void 0:_.count)??0,C=Math.max(1,Math.ceil(E/n)),{data:D=[]}=Wo(),{data:T=[]}=ef(),{data:M=[]}=Xd(),{data:R=[]}=Zd(),{data:U=[]}=$s();X9(),x.useEffect(()=>{v(1)},[t,f,a,l.from,l.to,p]);const Y=P=>{v(1),h(P)},K=P=>{v(1),s(P)},z=P=>{v(1),d(P)},pe=P=>{v(1),g(P)},le=x.useMemo(()=>new Map(j.map(P=>[P.id,P])),[j]),ge=P=>{if(a==="All Time")return!0;const B=new Date(P),W=new Date;if(a==="Today")return B.toDateString()===W.toDateString();if(a==="This Week"){const re=W.getDate()-W.getDay(),G=re+6,ve=new Date(new Date().setDate(re)),ye=new Date(new Date().setDate(G));return B>=ve&&B<=ye}return a==="This Month"?B.getMonth()===W.getMonth()&&B.getFullYear()===W.getFullYear():a==="This Year"?B.getFullYear()===W.getFullYear():a==="Custom"?!l.from||!l.to?!0:B>=new Date(l.from)&&B<=new Date(l.to):!0},I=P=>{var W,re;if(!((W=P.createdBy)!=null&&W.trim()))return null;const B=le.get(P.createdBy);if(B!=null&&B.name)return B.name;if((re=P.history)!=null&&re.created){const G=P.history.created.match(/Created by (.+?) on/);if(G)return G[1]}return null},V=P=>{const B=D.find(re=>re.id===P);if(B)return{name:B.name,type:"Customer"};const W=T.find(re=>re.id===P);return W?{name:W.name,type:"Vendor"}:null},ae=x.useMemo(()=>{let P=O.filter(B=>ge(B.date)).filter(B=>f==="All"||B.type===f);if(t.trim()){const B=t.toLowerCase();P=P.filter(W=>{var ye,xe;const re=W.contactId?V(W.contactId):null,G=I(W),ve=((ye=U.find(q=>q.id===W.category))==null?void 0:ye.name)||W.category||"";return W.description.toLowerCase().includes(B)||ve.toLowerCase().includes(B)||W.type.toLowerCase().includes(B)||(re==null?void 0:re.name.toLowerCase().includes(B))||((xe=G==null?void 0:G.toLowerCase)==null?void 0:xe.call(G).includes(B))||Se(W.amount).includes(B)})}return P},[O,a,l,f,t,D,T,U,j]),he=(P,B)=>{try{const W=P&&P.toString().length>10?P:B||P||"",re=new Date(W),G="Asia/Dhaka",ve=re.toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric",timeZone:G}),ye=re.toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:G});return{date:ve,time:ye}}catch{return{date:P||B||"",time:""}}},Q=P=>{if(P.referenceId){if(M.some(re=>re.id===P.referenceId)){e(`/orders/${P.referenceId}`);return}if(R.some(re=>re.id===P.referenceId)){e(`/bills/${P.referenceId}`);return}}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-bold text-gray-900 tracking-tight",children:"Financial Transactions"})}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx(We,{onClick:()=>e("/transactions/new/income"),variant:"primary",size:"md",icon:ie.Plus,children:"Income"}),c.jsx(We,{onClick:()=>e("/transactions/new/expense"),variant:"danger",size:"md",icon:ie.Minus,children:"Expense"})]})]}),c.jsx($o,{title:"Transactions",filterRange:a,setFilterRange:K,customDates:l,setCustomDates:z,statusTab:f,setStatusTab:Y,statusOptions:["Income","Expense","Transfer"]}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:c.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[c.jsx("label",{className:"text-sm font-bold text-gray-700",children:"Created By:"}),c.jsxs("select",{value:p,onChange:P=>pe(P.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"all",children:"All Users"}),j.some(P=>P.role===qe.ADMIN)&&c.jsx("option",{value:"admins",children:"All Admins"}),j.some(P=>P.role===qe.EMPLOYEE)&&c.jsx("option",{value:"employees",children:"All Employees"}),c.jsx("optgroup",{label:"Specific Users",children:j.map(P=>c.jsxs("option",{value:P.id,children:[P.name," ",P.role===qe.ADMIN?"(Admin)":"(Employee)"]},P.id))})]})]})}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Date"}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Type"}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Contact"}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:c.jsxs(c.Fragment,{children:["Category ",c.jsx("br",{})," Notes"]})}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-right",children:"Amount"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:N?c.jsx(Bp,{columns:5,rows:8}):ae.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-6 py-16 text-center text-gray-400 italic font-medium",children:"No transactions found."})}):ae.map(P=>{var xe;const B=P.contactId?V(P.contactId):null,W=I(P),re=P.referenceId&&(M.some(q=>q.id===P.referenceId)||R.some(q=>q.id===P.referenceId)),G=!!P.referenceId,{date:ve,time:ye}=he(P.date,P.createdAt);return c.jsxs("tr",{onClick:()=>Q(P),className:`hover:bg-gray-50 transition-all group ${re?"cursor-pointer":""}`,children:[c.jsx("td",{className:"px-6 py-5 text-sm font-bold text-gray-700",children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-bold text-gray-900",children:ve}),c.jsx("span",{className:"text-[11px] text-gray-400 font-medium",children:ye})]})}),c.jsx("td",{className:"px-6 py-5",children:c.jsx("span",{className:`px-2.5 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest ${P.type==="Income"?"bg-[#ebf4ff]":P.type==="Expense"?"bg-red-50 text-red-600":"bg-[#e6f0ff]"}`,children:P.type})}),c.jsx("td",{className:"px-6 py-5",children:G?B?c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-sm font-bold text-gray-900",children:B.name}),c.jsx("span",{className:"text-[9px] text-gray-400 uppercase font-bold tracking-widest",children:B.type})]}):c.jsx("span",{className:"text-gray-300 font-bold text-xs",children:""}):W?c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-sm font-bold text-gray-900",children:W}),c.jsx("span",{className:"text-[9px] text-gray-400 uppercase font-bold tracking-widest",children:"Created By"})]}):c.jsx("span",{className:"text-gray-300 font-bold text-xs",children:""})}),c.jsx("td",{className:"px-6 py-5",children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("p",{className:"text-sm font-bold text-gray-800",children:((xe=U.find(q=>q.id===P.category))==null?void 0:xe.name)||P.category}),c.jsx("p",{className:"text-xs text-gray-400 italic max-w-xs truncate",children:P.description})]})}),c.jsx("td",{className:"px-6 py-5 text-right",children:c.jsxs("span",{className:`font-black text-base ${P.type==="Income"?"text-emerald-600":P.type==="Expense"?"text-red-600":"text-black"}`,children:[P.type==="Income"?"+":P.type==="Expense"?"-":"",Se(P.amount)]})})]},P.id)})})]})})}),c.jsx(Ef,{page:y,totalPages:C,onPageChange:P=>v(P),disabled:N})]})},Qoe=()=>{var N;const{type:e}=Mn(),t=vt(),r=Ne.currentUser,n=e==="income",{data:a=[]}=Bs(),{data:s}=Us(),{data:l=[]}=ND(),{data:d=[]}=$s(),f=af(),h=nf(),p=zr(),g=x.useMemo(()=>d.filter(O=>O.type===(n?"Income":"Expense")),[d,n]),[y,v]=x.useState({date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!1}),paymentMethod:(s==null?void 0:s.paymentMethod)||"Cash",accountId:(s==null?void 0:s.accountId)||((N=a[0])==null?void 0:N.id)||"",amount:0,description:"",category:n?(s==null?void 0:s.incomeCategoryId)||"":(s==null?void 0:s.expenseCategoryId)||"",attachmentName:"",attachmentUrl:""}),j=O=>{var C;const E=(C=O.target.files)==null?void 0:C[0];if(E){const D=new FileReader;D.onload=()=>{v({...y,attachmentName:E.name,attachmentUrl:D.result})},D.readAsDataURL(E)}},S=f.isPending||h.isPending,_=async()=>{if(y.amount<=0){p.warning("Amount must be greater than 0");return}if(!y.accountId){p.warning("Please select an account");return}if(!y.category){p.warning("Please select a category");return}if(!(r!=null&&r.id)){p.warning("User session expired. Please log in again.");return}try{if(!n){const K=a.find(z=>z.id===y.accountId);if(K&&K.currentBalance<y.amount){p.error(`Insufficient balance. Account has ${Se(K.currentBalance)} but transaction requires ${Se(y.amount)}`);return}}const E=new Date(y.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),C=y.time,[D,T]=y.time.split(":").map(Number),M=new Date(y.date);M.setHours(D,T,0,0);const R=M.toISOString(),U={type:n?"Income":"Expense",date:R,paymentMethod:y.paymentMethod,accountId:y.accountId,amount:y.amount,description:y.description,category:y.category,attachmentName:y.attachmentName,attachmentUrl:y.attachmentUrl,createdBy:r.id,history:{created:`Created by ${r.name} on ${E}, at ${C}`}};await f.mutateAsync(U);const Y=a.find(K=>K.id===y.accountId);if(Y){const K=n?Y.currentBalance+y.amount:Y.currentBalance-y.amount;await h.mutateAsync({id:y.accountId,updates:{currentBalance:K}})}t("/transactions")}catch(O){console.error("Failed to save transaction:",O),p.error("Failed to save transaction: "+(O instanceof Error?O.message:"Unknown error"))}};return c.jsxs("div",{className:"max-w-3xl mx-auto animate-in slide-in-from-bottom-4 duration-500",children:[c.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[c.jsx("div",{children:c.jsxs("h2",{className:"md:text-2xl text-xl font-black text-gray-900 tracking-tight",children:["Record ",n?"Income":"Expense"]})}),c.jsx("button",{onClick:()=>t(-1),className:"p-3 text-gray-400 hover:text-gray-600 bg-white border border-gray-100 rounded-lg shadow-sm",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l18 18"})})})]}),c.jsxs("div",{className:"bg-white p-8 lg:p-12 rounded-lg border border-gray-100 shadow-xl shadow-gray-200/20 space-y-10",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Amount (BDT)"}),c.jsx("input",{type:"number",className:`w-full text-xl font-black px-6 py-4 bg-gray-50 border-2 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-xl transition-all outline-none ${n?"${theme.colors.primary[600]}":"text-red-600"}`,value:y.amount,onChange:O=>v({...y,amount:parseFloat(O.target.value)||0}),placeholder:"0.00"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Date"}),c.jsx("input",{type:"date",className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg text-lg font-bold",value:y.date,onChange:O=>v({...y,date:O.target.value})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Time"}),c.jsx("input",{type:"time",className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg text-lg font-bold",value:y.time,onChange:O=>v({...y,time:O.target.value})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Connected Account"}),c.jsx("select",{className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-xl font-bold",value:y.accountId,onChange:O=>v({...y,accountId:O.target.value}),children:a.map(O=>c.jsx("option",{value:O.id,children:O.name},O.id))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Category"}),c.jsxs("select",{className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-xl font-bold",value:y.category,onChange:O=>v({...y,category:O.target.value}),children:[c.jsx("option",{value:"",children:"Select a category"}),g.map(O=>c.jsx("option",{value:O.id,children:O.name},O.id))]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Payment Method"}),c.jsx("select",{className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-xl font-bold",value:y.paymentMethod,onChange:O=>v({...y,paymentMethod:O.target.value}),children:l.map(O=>c.jsx("option",{value:O.name,children:O.name},O.id))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Attachment"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"file",className:"hidden",id:"file-upload",onChange:j}),c.jsx("label",{htmlFor:"file-upload",className:"w-full px-6 py-4 bg-gray-50 border-transparent hover:bg-gray-100 rounded-lg font-bold pl-14 flex items-center cursor-pointer transition-colors",children:y.attachmentName||"Choose file to upload"}),c.jsx("div",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-gray-400",children:ie.Print})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Description"}),c.jsx("textarea",{className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg font-medium h-32 outline-none",placeholder:"What was this transaction for?",value:y.description,onChange:O=>v({...y,description:O.target.value})})]}),c.jsxs(We,{onClick:_,variant:n?"primary":"danger",size:"lg",className:"w-full",disabled:S,loading:S,children:["Finalize ",n?"Income":"Expense"]})]})]})},Hoe=()=>{vt();const e=Fe(),t=Ne.currentUser,{data:r=[]}=Bs(),n=af(),a=nf(),s=zr(),[l,d]=x.useState({date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!1}),fromAccountId:"",toAccountId:"",amount:0,description:""}),f=async()=>{if(!l.amount||!l.fromAccountId||!l.toAccountId){s.warning("Please fill in all fields.");return}if(l.fromAccountId===l.toAccountId){s.warning("Cannot transfer to the same account.");return}const h=r.find(g=>g.id===l.fromAccountId),p=r.find(g=>g.id===l.toAccountId);if(h&&p){if(h.currentBalance<l.amount){s.warning("Insufficient balance in source account.");return}try{const[g,y]=l.time.split(":").map(Number),v=new Date(l.date);v.setHours(g,y,0,0);const j=v.toISOString();await Promise.all([n.mutateAsync({type:"Transfer",date:j,accountId:l.fromAccountId,toAccountId:l.toAccountId,amount:l.amount,description:l.description||`Transfer from ${h.name} to ${p.name}`,category:"Transfer",paymentMethod:"Internal Transfer",createdBy:t.id}),Promise.all([a.mutateAsync({id:l.fromAccountId,updates:{currentBalance:h.currentBalance-l.amount}}),a.mutateAsync({id:l.toAccountId,updates:{currentBalance:p.currentBalance+l.amount}})])]),s.success("Transfer completed successfully"),e.invalidateQueries({queryKey:["accounts"]}),d({date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!1}),fromAccountId:"",toAccountId:"",amount:0,description:""})}catch(g){console.error("Transfer failed:",g),s.error("Failed to complete transfer: "+(g instanceof Error?g.message:"Unknown error"))}}};return c.jsxs("div",{className:"max-w-3xl mx-auto animate-in slide-in-from-bottom-4 duration-500",children:[c.jsx("div",{className:"mb-8 flex items-center justify-between",children:c.jsxs("div",{children:[c.jsx("h2",{className:"md:text-2xl text-xl font-black text-gray-900 tracking-tight",children:"Fund Transfer"}),c.jsx("p",{className:"text-gray-500 font-medium",children:"Move balances between your business accounts"})]})}),c.jsxs("div",{className:"bg-white p-8 lg:p-12 rounded-lg border border-gray-100 shadow-xl space-y-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Amount to Transfer (BDT)"}),c.jsx("input",{type:"number",className:`w-full text-xl font-black px-6 py-4 bg-[#ebf4ff] border-2 border-transparent focus:border-[#3c5a82] rounded-xl transition-all outline-none ${se.colors.primary[600]}`,value:l.amount,onChange:h=>d({...l,amount:parseFloat(h.target.value)||0}),placeholder:"0.00"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"From Account (Source)"}),c.jsxs("select",{className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg font-bold",value:l.fromAccountId,onChange:h=>d({...l,fromAccountId:h.target.value}),children:[c.jsx("option",{value:"",children:"Select an account"}),r.map(h=>c.jsxs("option",{value:h.id,children:[h.name," (",Se(h.currentBalance),")"]},h.id))]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"To Account (Destination)"}),c.jsxs("select",{className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg font-bold",value:l.toAccountId,onChange:h=>d({...l,toAccountId:h.target.value}),children:[c.jsx("option",{value:"",children:"Select an account"}),r.map(h=>c.jsxs("option",{value:h.id,children:[h.name," (",Se(h.currentBalance),")"]},h.id))]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Transfer Date"}),c.jsx("input",{type:"date",className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg text-lg font-bold",value:l.date,onChange:h=>d({...l,date:h.target.value})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Transfer Time"}),c.jsx("input",{type:"time",className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg text-lg font-bold",value:l.time,onChange:h=>d({...l,time:h.target.value})})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Memo / Description"}),c.jsx("textarea",{className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg font-medium h-32 outline-none",placeholder:"Reason for transfer...",value:l.description,onChange:h=>d({...l,description:h.target.value})})]}),c.jsx(We,{onClick:f,variant:"primary",size:"lg",className:"w-full",disabled:n.isPending||a.isPending,children:n.isPending||a.isPending?"Processing Transfer...":"Execute Transfer"})]})]})},Voe=()=>{const e=vt(),t=Fe(),r=zr(),{searchQuery:n}=Ka(),{user:a}=ba(),{data:s}=Us(),l=(s==null?void 0:s.recordsPerPage)||qt,[d,f]=x.useState(1),{data:h=[]}=Mi(),[p,g]=x.useState("all"),y=x.useMemo(()=>{if(p!=="all")return p==="admins"?h.filter(K=>K.role===qe.ADMIN).map(K=>K.id):p==="employees"?h.filter(K=>K.role===qe.EMPLOYEE).map(K=>K.id):[p]},[p,h]),{data:v,isPending:j}=B9(d,l,n,void 0,y),S=(v==null?void 0:v.data)??[],_=(v==null?void 0:v.count)??0,N=Math.max(1,Math.ceil(_/l)),O=a7(),E=(a==null?void 0:a.role)===qe.ADMIN,[C,D]=x.useState("All Time"),[T,M]=x.useState({from:"",to:""});x.useEffect(()=>{f(1)},[n,p]);const R=K=>{f(1),g(K)},U=S,Y=async K=>{if(confirm("Are you sure you want to delete this product?"))try{await O.mutateAsync(K),t.invalidateQueries({queryKey:["products",d]}),r.success("Product deleted successfully")}catch(z){console.error("Failed to delete product:",z),r.error("Failed to delete product")}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-bold text-gray-900",children:"Products Catalog"})}),E&&c.jsx(We,{onClick:()=>e("/products/new"),variant:"primary",size:"md",icon:ie.Plus,children:"Add Product"})]}),c.jsx($o,{title:"Products",filterRange:C,setFilterRange:D,customDates:T,setCustomDates:M}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:c.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[c.jsx("label",{className:"text-sm font-bold text-gray-700",children:"Created By:"}),c.jsxs("select",{value:p,onChange:K=>R(K.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"all",children:"All Users"}),h.some(K=>K.role===qe.ADMIN)&&c.jsx("option",{value:"admins",children:"All Admins"}),h.some(K=>K.role===qe.EMPLOYEE)&&c.jsx("option",{value:"employees",children:"All Employees"}),c.jsx("optgroup",{label:"Specific Users",children:h.map(K=>c.jsxs("option",{value:K.id,children:[K.name," ",K.role===qe.ADMIN?"(Admin)":"(Employee)"]},K.id))})]})]})}),c.jsx($p,{columns:[{key:"name",label:"Name",render:(K,z)=>c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("img",{src:z.image||"https://via.placeholder.com/100",alt:z.name,className:"w-12 h-12 rounded-full object-cover border border-gray-100 shadow-sm"}),c.jsx("div",{children:c.jsx("p",{className:"font-bold text-gray-900",children:z.name})})]})},{key:"category",label:"Category",render:K=>c.jsx("span",{className:"px-2.5 py-1 bg-[#ebf4ff] rounded-lg text-[10px] font-black uppercase tracking-widest",children:K})},{key:"salePrice",label:E?c.jsxs(c.Fragment,{children:["Sale Price",c.jsx("br",{}),"Purchase Price"]}):c.jsx(c.Fragment,{children:"Sale Price"}),render:(K,z)=>c.jsxs("div",{className:"flex flex-col gap-0.5",children:[c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("span",{className:"text-sm font-bold",children:Se(z.salePrice)})}),E&&c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("span",{className:"text-[11px] font-bold text-gray-600",children:Se(z.purchasePrice)})})]})},...E?[{key:"id",label:"Actions",align:"right",render:K=>c.jsxs("div",{className:"justify-end flex items-center gap-2",children:[c.jsx(Ds,{icon:ie.Edit,variant:"primary",title:"Edit",onClick:z=>{z.stopPropagation(),e(`/products/edit/${K}`)}}),c.jsx(Ds,{icon:ie.Delete,variant:"danger",title:"Delete",onClick:z=>{z.stopPropagation(),Y(K)}})]})}]:[]],data:U,loading:j,emptyMessage:"No products found"}),c.jsx(Ef,{page:d,totalPages:N,onPageChange:K=>f(K),disabled:j})]})},tT=()=>{const{id:e}=Mn(),t=vt(),r=!!e,n=Ne.currentUser;if(!n)return c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Not Authenticated"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Please log in first."}),c.jsx(We,{onClick:()=>t("/login"),variant:"primary",children:"Back to Login"})]});if(r&&n.role===qe.EMPLOYEE)return c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Employees cannot edit products. Contact an administrator for assistance."}),c.jsx(We,{onClick:()=>t("/products"),variant:"primary",children:"Back to Products"})]});const{data:a}=$9(r?e:void 0),{data:s=[],isPending:l}=$s("Product"),d=r7(),f=n7(),[h,p]=x.useState({name:"",category:"",image:"",salePrice:0,purchasePrice:0}),[g,y]=x.useState(!1),[v,j]=x.useState(null);$t.useEffect(()=>{a&&p(a)},[a]);const S=N=>{var E;const O=(E=N.target.files)==null?void 0:E[0];if(O){const C=new FileReader;C.onload=()=>{p({...h,image:C.result})},C.readAsDataURL(O)}},_=async()=>{if(!h.name||!h.category){j("Name and category are required");return}y(!0),j(null);try{const N={name:h.name||"",category:h.category||"",image:h.image||"https://picsum.photos/200/200?random="+Math.random(),salePrice:h.salePrice||0,purchasePrice:h.purchasePrice||0};r?(await f.mutateAsync({id:e,updates:N}),t("/products")):d.mutateAsync(N).then(()=>{t("/products")},O=>{y(!1),j(O instanceof Error?O.message:"Failed to create product")})}catch(N){console.error("Failed to save product:",N),j(N instanceof Error?N.message:"Failed to save product"),y(!1)}};return c.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:r?"Edit Product":"Add Product"}),c.jsx("button",{onClick:()=>t("/products"),className:"px-4 py-2 border rounded-xl text-gray-500 font-bold bg-white hover:bg-gray-50",children:"Cancel"})]}),c.jsxs("div",{className:"bg-white p-8 rounded-lg border border-gray-100 shadow-sm space-y-6",children:[c.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[c.jsxs("div",{className:"flex-1 space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Product Name"}),c.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-[#3c5a82]",value:h.name,onChange:N=>p({...h,name:N.target.value}),placeholder:"e.g. Cotton Polo T-Shirt"})]}),c.jsxs("div",{className:"flex-1 space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Category"}),c.jsxs("select",{className:"w-full px-4 py-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-emerald-500",value:h.category,onChange:N=>p({...h,category:N.target.value}),disabled:l,children:[c.jsx("option",{value:"",children:l?"Loading...":"Select Category..."}),s.map(N=>c.jsx("option",{value:N.name,children:N.name},N.id))]})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Product Image"}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsx("div",{className:"w-24 h-24 rounded-lg border border-dashed border-gray-300 flex items-center justify-center overflow-hidden bg-gray-50",children:h.image?c.jsx("img",{src:h.image,className:"w-full h-full object-cover"}):c.jsx("span",{className:"text-gray-300 text-xs text-center p-2",children:"No image"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("input",{type:"file",id:"product-image",className:"hidden",onChange:S}),c.jsx("label",{htmlFor:"product-image",className:"inline-block px-6 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold rounded-xl cursor-pointer transition-all",children:"Upload File"}),c.jsx("p",{className:"text-[10px] text-gray-400 mt-2 font-medium",children:"Recommended size: 500x500px. JPG, PNG supported."})]})]})]}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[c.jsxs("div",{className:"flex-1 space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Sale Price (BDT)"}),c.jsx("input",{type:"number",className:"w-full px-4 py-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-[#3c5a82] font-bold",value:h.salePrice,onChange:N=>p({...h,salePrice:parseFloat(N.target.value)||0})})]}),c.jsxs("div",{className:"flex-1 space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Purchase Price (BDT)"}),c.jsx("input",{type:"number",className:"w-full px-4 py-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-[#3c5a82] text-gray-600 font-bold",value:h.purchasePrice,onChange:N=>p({...h,purchasePrice:parseFloat(N.target.value)||0})})]})]}),c.jsxs("div",{className:"pt-6 space-y-4",children:[v&&c.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm font-bold text-red-600",children:v instanceof Error?v.message:String(v)})}),c.jsx(We,{onClick:_,variant:"primary",size:"lg",className:"w-full",disabled:g,children:g?"Saving...":r?"Update Product Item":"Create Product Item"})]})]})]})},Goe=()=>{const e=vt(),{user:t}=ba(),{searchQuery:r}=Ka(),{data:n=[],isPending:a}=Mi(),s=(t==null?void 0:t.role)===qe.ADMIN,l=x.useMemo(()=>{if(!r.trim())return n;const d=r.toLowerCase();return n.filter(f=>f.name.toLowerCase().includes(d)||f.phone.includes(d)||f.role.toLowerCase().includes(d))},[n,r]);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Application Users"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Manage staff accounts and system permissions"})]}),s&&c.jsx(We,{onClick:()=>e("/users/new"),variant:"primary",size:"md",icon:ie.Plus,children:"Add User"})]}),c.jsx($p,{columns:[{key:"name",label:"User",render:(d,f)=>c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("img",{src:f.image||"https://picsum.photos/100/100?random="+f.id,className:"w-10 h-10 rounded-full object-cover border"}),c.jsx("span",{className:"font-bold text-gray-900",children:f.name})]})},{key:"role",label:"Role",render:d=>c.jsx("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase tracking-widest ${d===qe.ADMIN?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:d})},{key:"phone",label:"Contact",render:d=>c.jsx("span",{className:"text-sm text-gray-600",children:d})},{key:"id",label:"Actions",align:"right",render:d=>c.jsx(Ds,{icon:ie.Edit,variant:"primary",title:"Edit",onClick:f=>{f.stopPropagation(),e(`/users/edit/${d}`)}})}],data:l,onRowClick:d=>e(`/users/${d.id}`),emptyMessage:"No users found",loading:a})]})},rT=()=>{const{id:e}=Mn(),t=vt(),r=!!e,{data:n,isPending:a,error:s}=SD(r?e:void 0),l=Z9(),d=CD(),f=PD(),h=zr(),[p,g]=x.useState(!1),[y,v]=x.useState(!1),[j,S]=x.useState(!1),[_,N]=x.useState({name:"",phone:"",password:"",role:qe.EMPLOYEE,image:""});$t.useEffect(()=>{n&&N(n)},[n]);const O=localStorage.getItem("currentUser"),E=O?JSON.parse(O):null,C=(E==null?void 0:E.role)===qe.ADMIN,D=(E==null?void 0:E.id)===e,T=a,M=Y=>{var z;const K=(z=Y.target.files)==null?void 0:z[0];if(K){const pe=new FileReader;pe.onload=()=>{N({..._,image:pe.result})},pe.readAsDataURL(K)}},R=async()=>{if(!_.name||!_.phone||C&&!r&&!_.password){h.warning("Please fill mandatory fields (Name, Phone, Password)");return}g(!0);try{if(r&&e){const Y={name:_.name,phone:_.phone,image:_.image};if(C&&(_.password&&(Y.password=_.password),_.role&&(Y.role=_.role)),await d.mutateAsync({id:e,updates:Y}),D&&E){const K={...E,...Y};localStorage.setItem("currentUser",JSON.stringify(K))}}else{if(!C){h.error("Only admins can add users"),g(!1);return}await l.mutateAsync({name:_.name||"",phone:_.phone||"",password:_.password||"",role:_.role||qe.EMPLOYEE,image:_.image||""})}h.success(r?"User updated successfully!":"User created successfully!"),t("/users")}catch(Y){console.error("Failed to save user:",Y);const K=GE(Y);h.error("Failed to save user: "+K)}finally{g(!1)}},U=async()=>{if(e){g(!0);try{await f.mutateAsync(e),h.success("User deleted successfully!"),t("/users")}catch(Y){console.error("Failed to delete user:",Y);const K=GE(Y);h.error("Failed to delete user: "+K)}finally{g(!1),S(!1)}}};return c.jsxs("div",{className:"max-w-2xl mx-auto space-y-6 pb-20",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"md:text-2xl text-xl font-bold text-gray-900",children:r?"Edit Profile":"Add User"}),c.jsx("button",{onClick:()=>t("/users"),className:"px-4 py-2 border rounded-xl font-bold bg-white text-gray-500 hover:bg-gray-50",children:"Cancel"})]}),r&&T&&c.jsx("div",{className:"bg-white p-8 rounded-lg border border-gray-100 shadow-sm text-center text-gray-500",children:"Loading user details..."}),s&&c.jsx("div",{className:"bg-red-50 p-4 rounded-lg border border-red-100 text-red-700",children:s.message||"User not found"}),(!r||!T)&&c.jsxs("div",{className:"bg-white p-8 rounded-lg border border-gray-100 shadow-sm space-y-6",children:[c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-6 p-6 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"w-20 h-20 rounded-[50%] overflow-hidden bg-white border",children:c.jsx("img",{src:_.image||`https://ui-avatars.com/api/?name=${_.name||"User"}&background=10b981&color=fff`,className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase mb-2",children:"Profile Photo"}),c.jsx("input",{type:"file",id:"user-pfp",className:"hidden",onChange:M}),c.jsx("label",{htmlFor:"user-pfp",className:`cursor-pointer px-4 py-2 ${se.colors.primary[600]} text-white text-xs font-bold rounded-lg hover:${se.colors.primary[700]}`,children:"Upload Picture"})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Full Name"}),c.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-[#3c5a82]",value:_.name,onChange:Y=>N({..._,name:Y.target.value})})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Phone Number"}),c.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-[#3c5a82]",value:_.phone,onChange:Y=>N({..._,phone:Y.target.value})})]}),C&&c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Password (Admin Only Access)"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:y?"text":"password",className:"w-full px-4 py-3 pr-10 bg-purple-50 border border-purple-100 rounded-xl focus:ring-2 focus:ring-purple-500",value:_.password,onChange:Y=>N({..._,password:Y.target.value}),placeholder:r?"Leave blank to keep current password":"Secure system password"}),c.jsx("button",{type:"button",onClick:()=>v(!y),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-purple-500 hover:text-purple-700",children:y?c.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:[c.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),c.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-14-14zM10 4C6.687 4 3.89 5.945 2.58 8.808c-.35.915-.35 2.468 0 3.384.74 1.94 2.08 3.61 3.756 4.7l1.83-1.83A3.992 3.992 0 016 10a4 4 0 016.956-3.533l1.416-1.416C14.225 4.523 12.15 4 10 4zm7.42 3.192c.35.915.35 2.468 0 3.384C15.26 13.055 12.463 15 9 15a6.966 6.966 0 01-3.15-.744l2.119-2.119A3.992 3.992 0 0114 10c0-.901-.281-1.735-.743-2.434l2.163-2.174z",clipRule:"evenodd"})})})]}),c.jsx("p",{className:"text-[10px] text-purple-400 font-medium",children:"Only administrators can set or change passwords."})]}),C&&c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"System Role"}),c.jsxs("select",{className:"w-full px-4 py-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-[#3c5a82]",value:_.role,onChange:Y=>N({..._,role:Y.target.value}),children:[c.jsx("option",{value:qe.EMPLOYEE,children:"Employee"}),c.jsx("option",{value:qe.ADMIN,children:"Administrator"})]})]})]}),c.jsxs("div",{className:"pt-6 space-y-3",children:[c.jsx(We,{onClick:R,variant:"primary",size:"lg",className:"w-full",disabled:p,children:p?"Saving...":"Save Details"}),r&&C&&c.jsx("button",{onClick:()=>S(!0),disabled:p,className:"w-full px-4 py-3 bg-red-50 border border-red-200 text-red-600 rounded-xl font-bold hover:bg-red-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Delete User"})]})]}),j&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-sm w-full p-6 space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Delete User?"}),c.jsxs("p",{className:"text-gray-600 text-sm",children:["Are you sure you want to delete ",c.jsx("strong",{children:_.name}),"? This action cannot be undone."]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>S(!1),disabled:p,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg font-bold text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),c.jsx("button",{onClick:U,disabled:p,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 disabled:opacity-50 flex items-center justify-center gap-2",children:p?"Deleting...":"Delete"})]})]})})]})},Yoe=()=>{const{id:e}=Mn(),t=vt(),r=Ne.currentUser,{data:n,isPending:a,error:s}=SD(e),l=PD(),d=CD(),f=zr(),[h,p]=x.useState(!1),[g,y]=x.useState(!0),[v,j]=x.useState("");if($t.useEffect(()=>{console.log("[UserDetails] User data loaded:",{id:n==null?void 0:n.id,name:n==null?void 0:n.name,password:n!=null&&n.password?"(exists)":"(missing)"}),n&&n.password?(console.log("[UserDetails] Setting editedPassword from user.password"),j(n.password)):n&&(console.log("[UserDetails] WARNING: user loaded but password is missing/empty!"),j(""))},[n==null?void 0:n.id,n==null?void 0:n.password]),a)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading user..."});if(s||!n)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:(s==null?void 0:s.message)||"User not found."});const S=r.role===qe.ADMIN||r.id===e,_=r.role===qe.ADMIN,N=async()=>{if(e)try{await l.mutateAsync(e),f.success("User deleted successfully!"),t("/users")}catch(E){console.error("Failed to delete user:",E),f.error("Failed to delete user: "+(E instanceof Error?E.message:"Unknown error"))}finally{p(!1)}},O=async()=>{if(!e||!v.trim()){f.warning("Please enter a password");return}try{await d.mutateAsync({id:e,updates:{password:v}}),f.success("Password updated successfully!")}catch(E){console.error("Failed to update password:",E),f.error("Failed to update password: "+(E instanceof Error?E.message:"Unknown error"))}};return c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>t("/users"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"User Profile"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[S&&c.jsxs("button",{onClick:()=>t(`/users/edit/${n.id}`),className:`px-6 py-2 ${se.colors.primary[600]} text-white rounded-xl font-bold hover:${se.colors.primary[700]} shadow-md flex items-center gap-2`,children:[ie.Edit," Edit Profile"]}),_&&c.jsx("button",{onClick:()=>p(!0),disabled:l.isPending,className:"px-6 py-2 bg-red-50 border border-red-200 text-red-600 rounded-xl font-bold hover:bg-red-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Delete User"})]})]}),c.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsx("div",{className:"h-32 bg-gradient-to-r from-[#0f2f57] to-[#1a3a6e]"}),c.jsxs("div",{className:"px-8 pb-8",children:[c.jsxs("div",{className:"relative flex justify-between items-end -mt-12 mb-8",children:[c.jsx("div",{className:"p-1 bg-white rounded-full shadow-xl",children:c.jsx("img",{src:n.image||"https://picsum.photos/200/200?random="+n.id,className:"w-24 h-24 rounded-full object-cover border-1 border-black"})}),c.jsx("span",{className:`px-4 py-1 rounded-full text-xs font-black uppercase tracking-widest ${n.role===qe.ADMIN?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:n.role})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1",children:"Full Name"}),c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:n.name})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1",children:"Phone Number"}),c.jsx("p",{className:"text-lg font-medium text-gray-700",children:n.phone})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1",children:"Joining Date"}),c.jsx("p",{className:"text-lg font-medium text-gray-700",children:n.createdAt?new Date(n.createdAt).toLocaleDateString("en-BD",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]})]}),c.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg space-y-4",children:[c.jsx("h4",{className:"font-bold text-gray-900",children:"Account Security"}),_?c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:g?"text":"password",value:v,onChange:E=>j(E.target.value),className:"w-full px-4 py-3 pr-10 bg-white border border-purple-300 rounded-lg font-mono text-sm text-gray-700 focus:ring-2 focus:ring-purple-500"}),c.jsx("button",{type:"button",onClick:()=>y(!g),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-purple-600 hover:text-purple-800",children:g?c.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:[c.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),c.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-14-14zM10 4C6.687 4 3.89 5.945 2.58 8.808c-.35.915-.35 2.468 0 3.384.74 1.94 2.08 3.61 3.756 4.7l1.83-1.83A3.992 3.992 0 016 10a4 4 0 016.956-3.533l1.416-1.416C14.225 4.523 12.15 4 10 4zm7.42 3.192c.35.915.35 2.468 0 3.384C15.26 13.055 12.463 15 9 15a6.966 6.966 0 01-3.15-.744l2.119-2.119A3.992 3.992 0 0114 10c0-.901-.281-1.735-.743-2.434l2.163-2.174z",clipRule:"evenodd"})})})]}),c.jsx("button",{onClick:O,disabled:d.isPending||v===n.password,className:"mt-3 w-full px-3 py-2 bg-purple-600 text-white rounded-lg text-sm font-bold hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d.isPending?"Updating...":"Update Password"}),c.jsx("p",{className:"text-[10px] text-purple-600 font-medium mt-2",children:"Admin access only. Edit and save password here."})]})}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Passwords are managed by system administrators. If you need to reset your password, please contact the IT department."}),c.jsxs("div",{className:"flex items-center gap-2 text-emerald-700 text-sm font-bold",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"Active Status Verified"]})]})]})]})]})]}),h&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-sm w-full p-6 space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Delete User?"}),c.jsxs("p",{className:"text-gray-600 text-sm",children:["Are you sure you want to delete ",c.jsx("strong",{children:n.name}),"? This action cannot be undone."]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>p(!1),disabled:l.isPending,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg font-bold text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),c.jsx("button",{onClick:N,disabled:l.isPending,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 disabled:opacity-50 flex items-center justify-center gap-2",children:l.isPending?"Deleting...":"Delete"})]})]})})]})},Woe=()=>{const[e,t]=x.useState("company"),[r,n]=x.useState(null),a=Fe(),{data:s,isPending:l}=Up(),{data:d,isPending:f}=zp(),{data:h,isPending:p}=qp(),{data:g,isPending:y}=Us(),{data:v,isPending:j}=Vw(),{data:S=[],isPending:_}=$s(),{data:N=[],isPending:O}=ND(),{data:E=[],isPending:C}=U9(),{data:D=[]}=Bs(),T=i7(),M=s7(),R=o7(),U=l7();c7(),u7();const Y=d7(),K=zr(),[z,pe]=x.useState({name:"",phone:"",email:"",address:"",logo:""}),[le,ge]=x.useState({prefix:"ORD-",nextNumber:1}),[I,V]=x.useState({steadfast:{baseUrl:"",apiKey:"",secretKey:""},carryBee:{baseUrl:"",clientId:"",clientSecret:"",clientContext:"",storeId:""}}),[ae,he]=x.useState({title:"Invoice",logoWidth:120,logoHeight:120,footer:""}),[Q,P]=x.useState({defaultAccountId:"",defaultPaymentMethod:"",incomeCategoryId:"",expenseCategoryId:"",recordsPerPage:10}),[B,W]=x.useState({name:"",type:"Income",color:"#10B981",parentId:""}),[re,G]=x.useState({name:"",description:""}),[ve,ye]=x.useState({name:"",shortName:"",description:""}),[xe,q]=x.useState([]),[we,je]=x.useState(!1);$t.useEffect(()=>{s&&pe(s)},[s]),$t.useEffect(()=>{d&&ge(d)},[d]),$t.useEffect(()=>{h&&he(h)},[h]),$t.useEffect(()=>{g&&P(g)},[g]),$t.useEffect(()=>{v&&V(v)},[v]),x.useEffect(()=>{let oe=null;const dt=async()=>{const{baseUrl:Kt,clientId:te,clientSecret:Oe,clientContext:xt}=I.carryBee,mt=Kt==null?void 0:Kt.trim(),qr=te==null?void 0:te.trim(),Pr=Oe==null?void 0:Oe.trim(),ja=xt==null?void 0:xt.trim();if(!mt||!qr||!Pr||!ja){q([]);return}je(!0);try{const Rn=await dq({baseUrl:mt,clientId:qr,clientSecret:Pr,clientContext:ja});q(Rn)}catch(Rn){console.error("Failed to fetch CarryBee stores:",Rn),q([])}finally{je(!1)}};return oe=setTimeout(()=>{dt()},700),()=>{oe&&clearTimeout(oe)}},[I.carryBee.baseUrl,I.carryBee.clientId,I.carryBee.clientSecret,I.carryBee.clientContext]);const ue=l||f||p||y||j||_||O||C,Ue=async()=>{try{const oe=K.loading("Saving all settings...");Y.mutateAsync({company:z,order:le,invoice:ae,defaults:Q,courier:I}).then(()=>{Ne.settings.company=z,Ne.settings.order=le,Ne.settings.invoice=ae,Ne.settings.defaults=Q,Ne.settings.courier=I,K.update(oe,"Settings saved successfully!","success")}).catch(dt=>{console.error("Failed to save settings:",dt),K.update(oe,"Failed to save settings: "+(dt instanceof Error?dt.message:"Unknown error"),"error")})}catch(oe){console.error("Failed to initiate settings save:",oe),K.error("Failed to save settings: "+(oe instanceof Error?oe.message:"Unknown error"))}},fe=oe=>{var Kt;const dt=(Kt=oe.target.files)==null?void 0:Kt[0];if(dt){const te=new FileReader;te.onload=()=>{pe({...z,logo:te.result})},te.readAsDataURL(dt)}},Me=async()=>{if(!B.name.trim()){K.warning("Please enter a category name");return}const oe={id:crypto.randomUUID(),name:B.name,type:B.type,color:B.color,parentId:B.parentId||void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},dt=a.getQueryData(["categories"]);a.setQueryData(["categories"],(Oe=[])=>[...Oe,oe]);const Kt=K.loading("Adding category..."),te={...B};W({name:"",type:"Income",color:"#10B981",parentId:""}),n(null);try{await T.mutateAsync({name:te.name,type:te.type,color:te.color,parentId:te.parentId||void 0}),K.update(Kt,"Category added successfully!","success")}catch(Oe){console.error("Failed to add category:",Oe),a.setQueryData(["categories"],dt),K.update(Kt,"Failed to add category: "+(Oe instanceof Error?Oe.message:"Unknown error"),"error"),n("category"),W(te)}},ze=async oe=>{if(confirm("Are you sure you want to delete this category?"))try{await M.mutateAsync(oe),K.success("Category deleted successfully!")}catch(dt){console.error("Failed to delete category:",dt),K.error("Failed to delete category: "+(dt instanceof Error?dt.message:"Unknown error"))}},At=async()=>{if(!re.name.trim()){K.warning("Please enter a payment method name");return}const oe={id:crypto.randomUUID(),name:re.name,description:re.description||"",is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},dt=a.getQueryData(["paymentMethods"]);a.setQueryData(["paymentMethods"],(Oe=[])=>[...Oe,oe]);const Kt=K.loading("Adding payment method..."),te={...re};G({name:"",description:""}),n(null);try{await R.mutateAsync({name:te.name,description:te.description||void 0}),K.update(Kt,"Payment method added successfully!","success")}catch(Oe){console.error("Failed to add payment method:",Oe),a.setQueryData(["paymentMethods"],dt),K.update(Kt,"Failed to add payment method: "+(Oe instanceof Error?Oe.message:"Unknown error"),"error"),n("payment"),G(te)}},Ft=async oe=>{if(confirm("Are you sure you want to delete this payment method?"))try{await U.mutateAsync(oe),K.success("Payment method deleted successfully!")}catch(dt){console.error("Failed to delete payment method:",dt),K.error("Failed to delete payment method: "+(dt instanceof Error?dt.message:"Unknown error"))}},wa=[{id:"company",label:"Company",icon:ie.Dashboard},{id:"order",label:"Order & Invoice",icon:ie.Sales},{id:"defaults",label:"Defaults",icon:ie.Settings},{id:"categories",label:"Categories",icon:ie.More},{id:"payments",label:"Payment Methods",icon:ie.Banking},{id:"courier",label:"Courier",icon:ie.Courier}];return c.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[c.jsx(Wd,{isLoading:ue,message:"Loading settings..."}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-bold text-gray-900",children:"Settings"})}),c.jsx(We,{onClick:Ue,variant:"primary",size:"md",children:"Save Changes"})]}),c.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[c.jsx("div",{className:"w-full lg:w-64 space-y-1",children:wa.map(oe=>c.jsxs("button",{onClick:()=>t(oe.id),className:`flex items-center gap-3 w-full px-4 py-3 rounded-xl font-medium transition-all ${e===oe.id?`bg-white ${se.colors.primary[600]} shadow-sm border border-gray-100 ring-1 ring-[#ebf4ff]`:"text-gray-500 hover:bg-gray-100"}`,children:[oe.icon,oe.label]},oe.id))}),c.jsxs("div",{className:"flex-1 bg-white p-8 rounded-xl border border-gray-100 shadow-sm min-h-[500px]",children:[e==="company"&&c.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 border-b pb-4",children:"Company Profile"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"md:col-span-2 flex items-center gap-6 p-6 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"w-20 h-20 rounded-xl overflow-hidden bg-white border",children:z.logo&&c.jsx("img",{src:z.logo,className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase",children:"Company Logo"}),c.jsx("input",{type:"file",id:"logo-input",className:"hidden",onChange:fe}),c.jsx(We,{variant:"primary",size:"sm",onClick:()=>{var oe;return(oe=document.getElementById("logo-input"))==null?void 0:oe.click()},children:"Change Logo"})]})]}),c.jsxs("div",{className:"md:col-span-2 space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Company Name"}),c.jsx("input",{type:"text",value:z.name,onChange:oe=>pe({...z,name:oe.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-[#3c5a82] transition-all"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Phone"}),c.jsx("input",{type:"text",value:z.phone,onChange:oe=>pe({...z,phone:oe.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-[#3c5a82] transition-all"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Email"}),c.jsx("input",{type:"email",value:z.email,onChange:oe=>pe({...z,email:oe.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-[#3c5a82] transition-all"})]}),c.jsxs("div",{className:"md:col-span-2 space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Office Address"}),c.jsx("textarea",{value:z.address,onChange:oe=>pe({...z,address:oe.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl h-24 focus:ring-2 focus:ring-[#3c5a82] transition-all"})]})]})]}),e==="order"&&c.jsxs("div",{className:"space-y-10 animate-in fade-in duration-300",children:[c.jsxs("section",{className:"space-y-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 border-b pb-4",children:"Order Logic"}),c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Order Prefix"}),c.jsx("input",{type:"text",value:le.prefix,onChange:oe=>ge({...le,prefix:oe.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl font-mono"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Next Number"}),c.jsx("input",{type:"number",value:le.nextNumber,onChange:oe=>ge({...le,nextNumber:parseInt(oe.target.value)}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]})]})]}),c.jsxs("section",{className:"space-y-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 border-b pb-4",children:"Invoice Settings"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-1 space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Invoice Title"}),c.jsx("input",{type:"text",value:ae.title,onChange:oe=>he({...ae,title:oe.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Logo Width (px)"}),c.jsx("input",{type:"number",value:ae.logoWidth,onChange:oe=>he({...ae,logoWidth:parseInt(oe.target.value)}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Logo Height (px)"}),c.jsx("input",{type:"number",value:ae.logoHeight,onChange:oe=>he({...ae,logoHeight:parseInt(oe.target.value)}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"md:col-span-3 space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Invoice Footer"}),c.jsx("textarea",{value:ae.footer,onChange:oe=>he({...ae,footer:oe.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl h-24"})]})]})]})]}),e==="defaults"&&c.jsxs("div",{className:"space-y-10 animate-in fade-in duration-300",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 border-b pb-4",children:"System Defaults"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Default Account"}),c.jsxs("select",{value:Q.defaultAccountId,onChange:oe=>P({...Q,defaultAccountId:oe.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl",children:[c.jsx("option",{value:"",children:"Select an account..."}),D.map(oe=>c.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Default Payment Method"}),c.jsxs("select",{value:Q.defaultPaymentMethod,onChange:oe=>P({...Q,defaultPaymentMethod:oe.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl",children:[c.jsx("option",{value:"",children:"Select a payment method..."}),N.map(oe=>c.jsx("option",{value:oe.name,children:oe.name},oe.id))]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Default Income Category"}),c.jsxs("select",{value:Q.incomeCategoryId,onChange:oe=>P({...Q,incomeCategoryId:oe.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl",children:[c.jsx("option",{value:"",children:"Select a category..."}),S.filter(oe=>oe.type==="Income").map(oe=>c.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Default Expense Category"}),c.jsxs("select",{value:Q.expenseCategoryId,onChange:oe=>P({...Q,expenseCategoryId:oe.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl",children:[c.jsx("option",{value:"",children:"Select a category..."}),S.filter(oe=>oe.type==="Expense").map(oe=>c.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Records Per Page"}),c.jsx("input",{type:"number",value:Q.recordsPerPage,onChange:oe=>P({...Q,recordsPerPage:parseInt(oe.target.value)}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]})]})]}),e==="categories"&&c.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[c.jsxs("div",{className:"flex items-center justify-between border-b pb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Categories"}),c.jsxs(We,{onClick:()=>n("category"),variant:"primary",size:"md",children:[ie.Plus," Add"]})]}),_?c.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading categories..."}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.map(oe=>c.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg bg-gray-50/50 hover:shadow-sm transition-all",children:[c.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:oe.color}}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-bold text-gray-800",children:oe.name}),c.jsx("p",{className:"text-[10px] text-gray-400 font-black uppercase tracking-widest",children:oe.type})]}),c.jsx("button",{onClick:()=>ze(oe.id),className:"text-red-500 hover:text-red-700 px-2",children:ie.Delete})]},oe.id)),S.length===0&&c.jsx("div",{className:"col-span-2 text-center py-8 text-gray-500",children:'No categories yet. Click "Add Category" to create one.'})]})]}),e==="payments"&&c.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[c.jsxs("div",{className:"flex items-center justify-between border-b pb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Payment Methods"}),c.jsxs(We,{onClick:()=>n("payment"),variant:"primary",size:"md",children:[ie.Plus," Add"]})]}),O?c.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading payment methods..."}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[N.map(oe=>c.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50/50 hover:shadow-sm transition-all flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-bold text-gray-800",children:oe.name}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:oe.description||"No description"})]}),c.jsx("button",{onClick:()=>Ft(oe.id),className:"text-red-500 hover:text-red-700 px-2",children:ie.Delete})]},oe.id)),N.length===0&&c.jsx("div",{className:"col-span-2 text-center py-8 text-gray-500",children:'No payment methods yet. Click "Add Method" to create one.'})]})]}),e==="courier"&&c.jsxs("div",{className:"space-y-10 animate-in fade-in duration-300",children:[c.jsxs("section",{className:"space-y-6",children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-800 border-b pb-4 flex items-center gap-2",children:[c.jsx("img",{src:"/uploads/steadfast.png",alt:"Steadfast",className:"w-6 h-6 rounded-full"}),c.jsx("span",{className:"",children:"Steadfast"})," Secrets"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Base URL"}),c.jsx("input",{type:"text",value:I.steadfast.baseUrl,onChange:oe=>V({...I,steadfast:{...I.steadfast,baseUrl:oe.target.value}}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"API Key"}),c.jsx("input",{type:"text",value:I.steadfast.apiKey,onChange:oe=>V({...I,steadfast:{...I.steadfast,apiKey:oe.target.value}}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Secret Key"}),c.jsx("input",{type:"text",value:I.steadfast.secretKey,onChange:oe=>V({...I,steadfast:{...I.steadfast,secretKey:oe.target.value}}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]})]})]})]}),c.jsxs("section",{className:"space-y-6",children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-800 border-b pb-4 flex items-center gap-2",children:[c.jsx("img",{src:"/uploads/carrybee.png",alt:"CarryBee",className:"w-6 h-6 rounded-full"}),c.jsx("span",{className:"",children:"CarryBee"})," Secrets"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Base URL"}),c.jsx("input",{type:"text",value:I.carryBee.baseUrl,onChange:oe=>V({...I,carryBee:{...I.carryBee,baseUrl:oe.target.value}}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Client ID"}),c.jsx("input",{type:"text",value:I.carryBee.clientId,onChange:oe=>V({...I,carryBee:{...I.carryBee,clientId:oe.target.value}}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Client Secret"}),c.jsx("input",{type:"text",value:I.carryBee.clientSecret,onChange:oe=>V({...I,carryBee:{...I.carryBee,clientSecret:oe.target.value}}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Client Context"}),c.jsx("input",{type:"text",value:I.carryBee.clientContext,onChange:oe=>V({...I,carryBee:{...I.carryBee,clientContext:oe.target.value}}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Store ID"}),c.jsxs("select",{value:I.carryBee.storeId,onChange:oe=>V({...I,carryBee:{...I.carryBee,storeId:oe.target.value}}),disabled:we||xe.length===0,className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("option",{value:"",children:we?"Loading stores...":xe.length===0?"Fill CarryBee credentials first":"Select Store"}),xe.map(oe=>c.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]})]})]})]})]})]})]}),r==="category"&&c.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[c.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm",onClick:()=>n(null)}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md relative z-10 p-8 space-y-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Add Category"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Name"}),c.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-50 border rounded-xl",value:B.name,onChange:oe=>W({...B,name:oe.target.value})})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Type"}),c.jsxs("select",{className:"w-full px-4 py-3 bg-gray-50 border rounded-xl",value:B.type,onChange:oe=>W({...B,type:oe.target.value}),children:[c.jsx("option",{value:"Income",children:"Income"}),c.jsx("option",{value:"Expense",children:"Expense"}),c.jsx("option",{value:"Product",children:"Product"})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Color"}),c.jsx("input",{type:"color",className:"w-full h-12 bg-gray-50 border rounded-xl cursor-pointer",value:B.color,onChange:oe=>W({...B,color:oe.target.value})})]})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx(We,{onClick:()=>n(null),variant:"ghost",className:"flex-1",children:"Cancel"}),c.jsx(We,{onClick:Me,variant:"primary",size:"md",className:"flex-1",children:"Add Category"})]})]})]}),r==="payment"&&c.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[c.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm",onClick:()=>n(null)}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md relative z-10 p-8 space-y-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Add Payment Method"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Method Name"}),c.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-50 border rounded-xl",value:re.name,onChange:oe=>G({...re,name:oe.target.value})})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Description"}),c.jsx("textarea",{className:"w-full px-4 py-3 bg-gray-50 border rounded-xl h-24",value:re.description,onChange:oe=>G({...re,description:oe.target.value})})]})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx(We,{onClick:()=>n(null),variant:"ghost",className:"flex-1",children:"Cancel"}),c.jsx(We,{onClick:At,variant:"primary",size:"md",className:"flex-1",children:"Add Method"})]})]})]})]})},Xoe=()=>{const e=vt(),t=Fe(),r=zr(),{searchQuery:n}=Ka(),{user:a}=ba(),{data:s}=Us(),l=(s==null?void 0:s.recordsPerPage)||qt,[d,f]=$t.useState(1),{data:h,isPending:p,error:g}=T9(d,l,n),y=(h==null?void 0:h.data)??[],v=(h==null?void 0:h.count)??0,j=Math.max(1,Math.ceil(v/l)),S=H9(),_=(a==null?void 0:a.role)===qe.ADMIN;x.useEffect(()=>{f(1)},[n]);const N=y,O=async E=>{if(confirm("Are you sure you want to delete this customer?")){if(Gw(E)){t.setQueryData(["customers"],C=>C&&C.filter(D=>D.id!==E)),r.success("Customer deleted");return}try{await S.mutateAsync(E),t.invalidateQueries({queryKey:["customers",d]}),r.success("Customer deleted successfully")}catch(C){console.error("Failed to delete customer:",C),r.error("Failed to delete customer")}}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-bold text-gray-900",children:"Customers"})}),c.jsx(We,{onClick:()=>e("/customers/new"),variant:"primary",size:"md",icon:ie.Plus,children:"New Customer"})]}),c.jsx($o,{title:"Customers",filterRange:"All Time",setFilterRange:()=>{},customDates:{from:"",to:""},setCustomDates:()=>{}}),g&&c.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("p",{className:"text-red-800",children:[c.jsx("strong",{children:"Error loading customers:"})," ",g instanceof Error?g.message:String(g)]})}),c.jsx($p,{columns:[{key:"name",label:"Customer Name",render:(E,C)=>c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-10 h-10 rounded-full bg-green-100 ${se.colors.primary[600]} flex items-center justify-center font-bold text-white`,children:C.name.charAt(0)}),c.jsxs("div",{children:[c.jsx("span",{className:"font-bold text-gray-900 block",children:C.name}),c.jsx("p",{className:"text-xs text-gray-400 truncate max-w-[200px]",children:C.address})]})]})},{key:"phone",label:"Contact",render:E=>c.jsx("span",{className:"text-sm font-medium text-gray-700",children:E})},{key:"totalOrders",label:"Total Orders",align:"center",render:E=>c.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded-lg text-xs font-bold text-gray-600",children:E})},{key:"dueAmount",label:"Due Amount",align:"right",render:E=>c.jsx("span",{className:`font-bold ${E>0?"text-red-500":"text-green-500"}`,children:Se(E)})},{key:"id",label:"Actions",align:"right",render:E=>c.jsxs("div",{className:"justify-end flex items-center gap-2",children:[c.jsx(Ds,{icon:ie.Edit,variant:"primary",title:"Edit",onClick:C=>{C.stopPropagation(),e(`/customers/edit/${E}`)}}),_&&c.jsx(Ds,{icon:ie.Delete,variant:"danger",title:"Delete",onClick:C=>{C.stopPropagation(),O(E)}})]})}],data:N,loading:p,onRowClick:E=>e(`/customers/${E.id}`),emptyMessage:"No customers found"}),c.jsx(Ef,{page:d,totalPages:j,onPageChange:E=>f(E),disabled:p})]})},nT=()=>{const{id:e}=Mn(),t=vt(),{isLoading:r}=ba(),n=!!e,[a,s]=x.useState({name:"",phone:"",address:""}),[l,d]=x.useState(null);if(r)return c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Loading..."}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Authenticating session..."})]});const{data:f,isPending:h,error:p}=wD(n?e:void 0),{data:g=[]}=Wo(),y=K9(),v=Q9(),j=va(),S=Fe();x.useEffect(()=>{if(f){s({name:f.name,phone:f.phone,address:f.address});return}if(e&&Gw(e)){const N=(g||[]).find(O=>O.id===e);N&&s({name:N.name,phone:N.phone,address:N.address})}},[f,g,e]);const _=async()=>{if(!a.name||!a.phone){d("Name and phone are required");return}d(null);try{if(n){const N={name:a.name,phone:a.phone,address:a.address};await v.mutateAsync({id:e,updates:N}),t("/customers")}else{const N={name:a.name,phone:a.phone,address:a.address,totalOrders:0,dueAmount:0};try{const O=await y.mutateAsync(N);try{S.setQueryData(["customers"],C=>C?Array.isArray(C)&&C.some(D=>D.id===O.id)?C:[...C,O]:[O])}catch{}const E=j&&j.state||{};if(E.fromOrderForm&&E.redirectPath){const C=`${E.redirectPath}${E.redirectPath.includes("?")?"&":"?"}selectedCustomerId=${O.id}`;t(C)}else t("/customers")}catch(O){console.error("Create customer failed:",O),d(O instanceof Error?O.message:"Failed to create customer")}}}catch(N){console.error(`Failed to ${n?"update":"create"} customer:`,N),d(N instanceof Error?N.message:`Failed to ${n?"update":"create"} customer`)}};return c.jsxs("div",{className:"max-w-2xl mx-auto space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"md:text-2xl text-xl font-black text-gray-900 tracking-tight",children:n?"Edit Customer":"New Customer"}),c.jsx("button",{onClick:()=>t(-1),className:"px-4 py-2 text-gray-500 font-bold hover:bg-gray-100 rounded-xl transition-all",children:"Cancel"})]}),c.jsx("div",{className:"bg-white p-10 rounded-xl border border-gray-100 shadow-xl space-y-8",children:n&&h?c.jsx("div",{className:"text-center text-gray-500",children:"Loading customer..."}):c.jsxs(c.Fragment,{children:[l&&c.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm font-bold text-red-600",children:l instanceof Error?l.message:String(l)})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Full Name"}),c.jsx("input",{type:"text",className:"w-full px-6 py-4 bg-gray-50 border border-gray-200 focus:border-[#3c5a82] focus:bg-white rounded-2xl font-bold transition-all outline-none",value:a.name,onChange:N=>s({...a,name:N.target.value})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Phone Number"}),c.jsx("input",{type:"text",className:"w-full px-6 py-4 bg-gray-50 border border-gray-200 focus:border-[#3c5a82] focus:bg-white rounded-2xl font-bold transition-all outline-none",value:a.phone,onChange:N=>s({...a,phone:N.target.value})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Address"}),c.jsx("textarea",{className:"w-full px-6 py-4 bg-gray-50 border border-gray-200 focus:border-[#3c5a82] focus:bg-white rounded-lg font-medium h-32 transition-all outline-none",value:a.address,onChange:N=>s({...a,address:N.target.value})})]}),c.jsx(We,{onClick:_,variant:"primary",size:"lg",className:"w-full",disabled:y.isPending||v.isPending,children:y.isPending||v.isPending?n?"Updating...":"Adding...":n?"Update Customer":"Add Customer"})]})})]})},Zoe=()=>{const{id:e}=Mn(),t=vt(),[r,n]=x.useState(null),a=Ne.currentUser,s=(a==null?void 0:a.role)||null,{data:l}=wD(e||""),{data:d=[]}=M9(e||""),{data:f}=zp(),h=Fp(),p=zr(),{totalRevenue:g,dueAmount:y}=x.useMemo(()=>{const S=d.filter(E=>E.status===Ie.COMPLETED),_=d.filter(E=>E.status===Ie.PROCESSING||E.status===Ie.PICKED),N=S.reduce((E,C)=>E+C.total,0),O=_.reduce((E,C)=>E+(C.total-C.paidAmount),0);return{totalRevenue:N,dueAmount:O}},[d]),v=S=>{switch(S){case Ie.ON_HOLD:return"bg-gray-100 text-gray-600";case Ie.PROCESSING:return"bg-[#e6f0ff] ${theme.colors.secondary[600]}";case Ie.PICKED:return"bg-purple-100 text-purple-600";case Ie.COMPLETED:return"bg-green-100 ${theme.colors.primary[600]}";case Ie.CANCELLED:return"bg-red-100 text-red-600";default:return"bg-gray-100 text-gray-600"}},j=async S=>{try{if(!l)return;if(!f){p.error("Unable to generate new order number. Please try again.");return}const _=`${f.prefix}${f.nextNumber}`,N=new Date,O=N.toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"}),E=N.toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"}),C={orderNumber:_,orderDate:new Date().toISOString().split("T")[0],customerId:l.id,createdBy:S.createdBy,status:Ie.ON_HOLD,items:S.items,subtotal:S.subtotal,discount:S.discount,shipping:S.shipping,total:S.total,paidAmount:0,history:{created:`Duplicated from order #${S.orderNumber} on ${O}, at ${E}`}};await h.mutateAsync(C),p.success("Order duplicated successfully"),t("/orders")}catch(_){console.error("Failed to duplicate order",_),p.error("Failed to duplicate order: "+(_ instanceof Error?_.message:"Unknown error"))}};return s===qe.EMPLOYEE?c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Employees cannot view customer details. Contact an administrator for assistance."}),c.jsx(We,{onClick:()=>t("/customers"),variant:"primary",children:"Back to Customers"})]}):l?c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>t("/customers"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Customer Profile"})]}),c.jsx("div",{className:"flex gap-2",children:c.jsx("button",{onClick:()=>t(`/customers/edit/${e}`),className:"px-4 py-2 border rounded-xl font-bold bg-white text-gray-700 hover:bg-gray-50",children:"Edit Profile"})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[c.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100 text-center",children:[c.jsx("div",{className:"w-24 h-24 rounded-full bg-[#ebf4ff] ${theme.colors.primary[600]} flex items-center justify-center font-black text-4xl mx-auto mb-4 border-2 border-[#c7dff5]",children:l.name.charAt(0)}),c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:l.name}),c.jsx("p",{className:"text-sm text-gray-400 mt-1",children:l.phone}),c.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-50 space-y-4 text-left",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Address"}),c.jsx("p",{className:"text-sm text-gray-700 font-medium leading-relaxed",children:l.address})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Total Revenue"}),c.jsx("p",{className:"text-lg font-black text-gray-900",children:Se(g)})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg shadow-[#0f2f57]/20/50 border border-gray-100 text-white",children:[c.jsx("p",{className:"text-gray-400 text-[10px] font-bold uppercase tracking-wider mb-1",children:"Due Amount"}),c.jsx("h4",{className:"text-lg font-black text-green-600",children:Se(y)})]})]}),c.jsx("div",{className:"lg:col-span-3",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[c.jsxs("div",{className:"p-6 border-b border-gray-50 flex items-center justify-between",children:[c.jsx("h3",{className:"font-bold text-gray-900",children:"Order History"}),c.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[d.length," Records found"]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 text-xs font-bold text-gray-500 uppercase tracking-wider",children:[c.jsx("th",{className:"px-6 py-4",children:"Order Number"}),c.jsx("th",{className:"px-6 py-4",children:"Order Date"}),c.jsx("th",{className:"px-6 py-4",children:"Status"}),c.jsx("th",{className:"px-6 py-4 text-right",children:"Amount"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:d.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"px-6 py-12 text-center text-gray-400 italic",children:"No orders found for this customer."})}):d.map(S=>c.jsxs("tr",{onMouseEnter:()=>n(S.id),onMouseLeave:()=>n(null),onClick:()=>t(`/orders/${S.id}`),className:"group relative hover:bg-[#ebf4ff]/30 cursor-pointer transition-colors",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("span",{className:"font-bold text-gray-900",children:["#",S.orderNumber]})}),c.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:S.orderDate}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase tracking-tighter ${v(S.status)}`,children:S.status})}),c.jsx("td",{className:"px-6 py-4 text-right",children:c.jsx("span",{className:"font-black text-gray-900",children:Se(S.total)})}),r===S.id&&c.jsx("td",{className:"absolute inset-y-0 right-0 flex items-center pr-6 bg-gradient-to-l from-emerald-50 via-emerald-50 to-transparent",children:c.jsxs("div",{className:"flex items-center gap-1 bg-white p-1 rounded-lg shadow-lg border border-[#c7dff5] animate-in fade-in slide-in-from-right-2 duration-200",onClick:_=>_.stopPropagation(),children:[c.jsx("button",{title:"Edit",onClick:()=>t(`/orders/edit/${S.id}`),className:"p-2 text-gray-500 hover:${theme.colors.primary[600]} hover:bg-[#ebf4ff] rounded-md transition-colors",children:ie.Edit}),c.jsx("button",{title:"Duplicate",onClick:()=>j(S),className:"p-2 text-gray-500 hover:${theme.colors.primary[600]} hover:bg-[#ebf4ff] rounded-md transition-colors",children:ie.Duplicate})]})})]},S.id))})]})})]})})]})]}):c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Customer not found."})},Joe=()=>{const e=vt(),t=Fe(),r=zr(),{searchQuery:n}=Ka(),{data:a}=Us(),s=(a==null?void 0:a.recordsPerPage)||qt,[l,d]=$t.useState(1),{data:f={data:[],count:0},isPending:h}=L9(l,s,n),p=f.data||[],g=f.count||0,y=Math.max(1,Math.ceil(g/s)),v=t7();x.useEffect(()=>{d(1)},[n]);const j=p,S=async _=>{if(confirm("Are you sure you want to delete this vendor?"))try{await v.mutateAsync(_),t.invalidateQueries({queryKey:["vendors",l]}),r.success("Vendor deleted successfully")}catch(N){console.error("Failed to delete vendor:",N),r.error("Failed to delete vendor")}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-bold text-gray-900",children:"Vendors"})}),c.jsx(We,{onClick:()=>e("/vendors/new"),variant:"primary",size:"md",icon:ie.Plus,children:"New Vendor"})]}),c.jsx($p,{columns:[{key:"name",label:"Vendor Name",render:(_,N)=>c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold",children:N.name.charAt(0)}),c.jsxs("div",{children:[c.jsx("span",{className:"font-bold text-gray-900 block",children:N.name}),c.jsx("p",{className:"text-xs text-gray-400 truncate max-w-[200px]",children:N.address})]})]})},{key:"phone",label:"Contact",render:_=>c.jsx("span",{className:"text-sm font-medium text-gray-700",children:_})},{key:"totalPurchases",label:"Purchases",align:"center",render:_=>c.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded-lg text-xs font-bold text-gray-600",children:_})},{key:"dueAmount",label:"Balance Payable",align:"right",render:_=>c.jsx("span",{className:`font-bold ${_>0?"text-red-500":"text-green-500"}`,children:Se(_)})},{key:"id",label:"Actions",align:"right",render:_=>c.jsxs("div",{className:"justify-end flex items-center gap-2",children:[c.jsx(Ds,{icon:ie.Edit,variant:"primary",title:"Edit",onClick:N=>{N.stopPropagation(),e(`/vendors/edit/${_}`)}}),c.jsx(Ds,{icon:ie.Delete,variant:"danger",title:"Delete",onClick:N=>{N.stopPropagation(),S(_)}})]})}],data:j,loading:h,onRowClick:_=>e(`/vendors/${_.id}`),emptyMessage:"No vendors found"}),c.jsx(Ef,{page:l,totalPages:y,onPageChange:_=>d(_),disabled:h})]})},aT=()=>{const{id:e}=Mn(),t=vt(),{isLoading:r}=ba(),n=!!e,[a,s]=x.useState({name:"",phone:"",address:""}),[l,d]=x.useState(null),{data:f,isPending:h,error:p}=_D(n?e:void 0),g=J9(),y=e7();x.useEffect(()=>{f&&s({name:f.name,phone:f.phone,address:f.address})},[f]);const v=async()=>{if(r){d("Authenticating... Please wait");return}if(!a.name||!a.phone){d("Business name and phone are required");return}d(null);try{if(n){const j={name:a.name,phone:a.phone,address:a.address};await y.mutateAsync({id:e,updates:j}),t("/vendors")}else{const j={name:a.name,phone:a.phone,address:a.address,totalPurchases:0,dueAmount:0};g.mutateAsync(j).then(()=>{t("/vendors")},S=>{d(S instanceof Error?S.message:"Failed to create vendor")})}}catch(j){console.error(`Failed to ${n?"update":"create"} vendor:`,j),d(j instanceof Error?j.message:`Failed to ${n?"update":"create"} vendor`)}};return c.jsxs("div",{className:"max-w-2xl mx-auto space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"md:text-2xl text-xl font-black text-gray-900 tracking-tight",children:n?"Edit Vendor":"New Vendor"}),c.jsx("button",{onClick:()=>t(-1),className:"px-4 py-2 text-gray-500 font-bold hover:bg-gray-100 rounded-xl transition-all",children:"Cancel"})]}),c.jsx("div",{className:"bg-white p-10 rounded-xl border border-gray-100 shadow-xl space-y-8",children:n&&h?c.jsx("div",{className:"text-center text-gray-500",children:"Loading vendor..."}):c.jsxs(c.Fragment,{children:[l&&c.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm font-bold text-red-600",children:l instanceof Error?l.message:String(l)})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Vendor/Business Name"}),c.jsx("input",{type:"text",className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-blue-500 focus:bg-white rounded-lg font-bold transition-all outline-none",value:a.name,onChange:j=>s({...a,name:j.target.value})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Contact Person / Phone"}),c.jsx("input",{type:"text",className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-blue-500 focus:bg-white rounded-lg font-bold transition-all outline-none",value:a.phone,onChange:j=>s({...a,phone:j.target.value})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Office Address"}),c.jsx("textarea",{className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-blue-500 focus:bg-white rounded-lg font-medium h-32 transition-all outline-none",value:a.address,onChange:j=>s({...a,address:j.target.value})})]}),c.jsx(We,{onClick:v,variant:"primary",size:"lg",className:"w-full",disabled:g.isPending||y.isPending,children:g.isPending||y.isPending?n?"Updating...":"Adding...":n?"Update Vendor":"Add Vendor"})]})})]})},ele=()=>{const{id:e}=Mn(),t=vt(),{data:r,isPending:n}=_D(e||""),{data:a=[]}=Zd(),[s,l]=x.useState(null);if(n)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading vendor details..."});if(!r)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Vendor not found."});const d=a.filter(h=>h.vendorId===r.id),f=h=>{switch(h){case hn.ON_HOLD:return"bg-gray-100 text-gray-600";case hn.PROCESSING:return"bg-blue-100 text-blue-600";case hn.RECEIVED:return"bg-green-100 text-green-600";default:return"bg-gray-100 text-gray-600"}};return c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>t("/vendors"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Vendor Profile"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{className:"px-4 py-2 border rounded-xl font-bold bg-white text-gray-700 hover:bg-gray-50",children:"Edit Profile"}),c.jsx("button",{className:`px-4 py-2 ${se.colors.primary[600]} text-white rounded-xl font-bold hover:${se.colors.primary[700]} shadow-md`,children:"Purchase Statement"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[c.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100 text-center",children:[c.jsx("div",{className:`w-24 h-24 rounded-full bg-[#e6f0ff] ${se.colors.primary.text} flex items-center justify-center font-black text-4xl mx-auto mb-4 border-2 border-[#c7dff5]`,children:r.name.charAt(0)}),c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:r.name}),c.jsx("p",{className:"text-sm text-gray-400 mt-1",children:r.phone}),c.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-50 space-y-4 text-left",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Office Address"}),c.jsx("p",{className:"text-sm text-gray-700 font-medium leading-relaxed",children:r.address})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Total Procurement"}),c.jsx("p",{className:"text-lg font-black text-gray-900",children:Se(d.reduce((h,p)=>h+p.total,0))})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg shadow-[#0f2f57]/20 text-white",children:[c.jsx("p",{className:"text-gray-400 text-[10px] font-bold uppercase tracking-wider mb-1",children:"Total Payable"}),c.jsx("h4",{className:"text-lg font-black text-red-600",children:Se(r.dueAmount)})]})]}),c.jsx("div",{className:"lg:col-span-3",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[c.jsxs("div",{className:"p-6 border-b border-gray-50 flex items-center justify-between",children:[c.jsx("h3",{className:"font-bold text-gray-900",children:"Purchase Bills"}),c.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[d.length," Invoices"]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 text-xs font-bold text-gray-500 uppercase tracking-wider",children:[c.jsx("th",{className:"px-6 py-4",children:"Bill Number"}),c.jsx("th",{className:"px-6 py-4",children:"Bill Date"}),c.jsx("th",{className:"px-6 py-4",children:"Status"}),c.jsx("th",{className:"px-6 py-4 text-right",children:"Amount"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:d.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"px-6 py-12 text-center text-gray-400 italic",children:"No purchase bills found for this vendor."})}):d.map(h=>c.jsxs("tr",{onMouseEnter:()=>l(h.id),onMouseLeave:()=>l(null),onClick:()=>t(`/bills/${h.id}`),className:"group relative hover:bg-blue-50/30 cursor-pointer transition-colors",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("span",{className:"font-bold text-gray-900",children:["#",h.billNumber]})}),c.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:h.billDate}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase tracking-tighter ${f(h.status)}`,children:h.status})}),c.jsx("td",{className:"px-6 py-4 text-right",children:c.jsx("span",{className:"font-black text-gray-900",children:Se(h.total)})}),s===h.id&&c.jsx("td",{className:"absolute inset-y-0 right-0 flex items-center pr-6 bg-gradient-to-l from-blue-50 via-blue-50 to-transparent",children:c.jsx("div",{className:"flex items-center gap-1 bg-white p-1 rounded-lg shadow-lg border border-[#c7dff5] animate-in fade-in slide-in-from-right-2 duration-200",onClick:p=>p.stopPropagation(),children:c.jsx("button",{title:"Edit",onClick:()=>t(`/bills/edit/${h.id}`),className:`p-2 text-gray-500 hover:${se.colors.primary[600]} hover:bg-[#ebf4ff] rounded-md transition-colors`,children:ie.Edit})})})]},h.id))})]})})]})})]})]})},tle=({title:e,description:t,icon:r,color:n,to:a})=>{const s=vt();return c.jsxs("button",{onClick:()=>s(a),className:"flex items-start gap-4 p-6 bg-white rounded-lg border border-gray-100 shadow-sm hover:shadow-md hover:border-[#c7dff5] transition-all text-left w-full group",children:[c.jsx("div",{className:`p-4 rounded-[50%] ${n} transition-transform group-hover:scale-110 duration-300`,children:r}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:e}),c.jsx("p",{className:"text-sm text-gray-500 mt-1 leading-relaxed",children:t}),c.jsxs("div",{className:"mt-4 flex items-center gap-1 text-xs font-bold uppercase tracking-widest opacity-40 group-hover:opacity-100 transition-opacity",children:["View Report ",ie.ChevronRight]})]})]})},rle=()=>{const e=[{title:"Expense Summary",description:"Breakdown of your business spending by category and vendor.",icon:ie.Delete,color:"bg-red-50 text-red-600",to:"/reports/expense"},{title:"Income Summary",description:"Analysis of your revenue streams and payment collections.",icon:ie.PlusCircle,color:`bg-[#ebf4ff] ${se.colors.primary[600]}`,to:"/reports/income"},{title:"Income vs Expense",description:"Visual comparison of cash inflows and outflows over time.",icon:ie.Transfer,color:`bg-[#e6f0ff] ${se.colors.secondary[600]}`,to:"/reports/income-vs-expense"},{title:"Profit and Loss",description:"Standard P&L statement to track net business profitability.",icon:ie.Reports,color:"bg-purple-50 text-purple-600",to:"/reports/profit-loss"}];return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Financial Reports"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Deep dive into your business metrics and performance."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map((t,r)=>c.jsx(tle,{...t},r))})]})},nle=()=>{const e=vt(),{data:t=[]}=Jd(),{data:r=[]}=ef(),{data:n=[]}=Bs(),{data:a=[]}=$s(),s=new Map(a.map(g=>[g.id,g.name])),l=t.filter(g=>g.type==="Expense"),d={};l.forEach(g=>{const y=s.get(g.category)||g.category||"Uncategorized";d[y]=(d[y]||0)+g.amount});const f=Object.entries(d).map(([g,y])=>({name:g,value:y})),h=["#EF4444","#F97316","#F59E0B","#8B5CF6","#EC4899","#3B82F6"],p=()=>{const g=`Date,Category,Contact,Account,Amount,Description
`,y=l.map(_=>{var C,D;const N=((C=r.find(T=>T.id===_.contactId))==null?void 0:C.name)||"N/A",O=((D=n.find(T=>T.id===_.accountId))==null?void 0:D.name)||"N/A",E=s.get(_.category)||_.category||"Uncategorized";return`${_.date},"${E}","${N}","${O}",${_.amount},"${_.description}"`}).join(`
`),v=new Blob([g+y],{type:"text/csv"}),j=window.URL.createObjectURL(v),S=document.createElement("a");S.setAttribute("hidden",""),S.setAttribute("href",j),S.setAttribute("download","expense_summary.csv"),document.body.appendChild(S),S.click(),document.body.removeChild(S)};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>e("/reports"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Expense Summary"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 bg-white border rounded-xl font-bold text-sm text-gray-700 hover:bg-gray-50",children:[ie.Download," Export CSV"]}),c.jsx(We,{variant:"primary",size:"sm",icon:ie.Print,children:"Export Image"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-2 bg-white p-6 rounded-lg border border-gray-100 shadow-sm",children:[c.jsx("h3",{className:"font-bold text-gray-800 mb-6",children:"Expenses by Category"}),c.jsx("div",{className:"h-[350px]",children:c.jsx(cc,{width:"100%",height:"100%",children:c.jsxs(T5,{data:f,layout:"vertical",margin:{left:40,right:40},children:[c.jsx(dc,{strokeDasharray:"3 3",horizontal:!1,stroke:"#f1f5f9"}),c.jsx(fc,{type:"number",axisLine:!1,tickLine:!1,tick:{fontSize:10}}),c.jsx(hc,{dataKey:"name",type:"category",axisLine:!1,tickLine:!1,tick:{fontSize:10,fontWeight:"bold"}}),c.jsx(So,{formatter:g=>Se(g),contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1)"}}),c.jsx(yi,{dataKey:"value",radius:[0,4,4,0],barSize:30,children:f.map((g,y)=>c.jsx(tl,{fill:h[y%h.length]},`cell-${y}`))})]})})})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-100 shadow-sm space-y-6",children:[c.jsx("h3",{className:"font-bold text-gray-800",children:"Key Statistics"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-red-50 rounded-lg",children:[c.jsx("p",{className:"text-[10px] font-bold text-red-400 uppercase tracking-widest",children:"Total Outflow"}),c.jsx("h4",{className:"text-3xl font-black text-red-600",children:Se(l.reduce((g,y)=>g+y.amount,0))})]}),c.jsx("div",{className:"divide-y divide-gray-50",children:f.sort((g,y)=>y.value-g.value).slice(0,5).map((g,y)=>c.jsxs("div",{className:"py-3 flex justify-between items-center",children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:g.name}),c.jsx("span",{className:"text-sm font-bold text-gray-900",children:Se(g.value)})]},y))})]})]})]}),c.jsxs("div",{className:"bg-white rounded-lg border border-gray-100 shadow-sm overflow-hidden",children:[c.jsx("div",{className:"p-6 border-b border-gray-50",children:c.jsx("h3",{className:"font-bold text-gray-900",children:"Recent Expense Log"})}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 text-xs font-bold text-gray-500 uppercase",children:[c.jsx("th",{className:"px-6 py-4",children:"Date"}),c.jsx("th",{className:"px-6 py-4",children:"Category"}),c.jsx("th",{className:"px-6 py-4 text-right",children:"Amount"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:l.slice(0,10).map(g=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:g.date}),c.jsx("td",{className:"px-6 py-4 text-sm font-bold text-gray-800",children:s.get(g.category)||g.category||"Uncategorized"}),c.jsx("td",{className:"px-6 py-4 text-right font-black text-red-600",children:Se(g.amount)})]},g.id))})]})})]})]})},ale=()=>{const e=vt(),{data:t=[]}=Jd(),{data:r=[]}=Wo(),{data:n=[]}=Xd(),{data:a=[]}=$s(),s=new Map(a.map(v=>[v.id,v.name])),l=t.filter(v=>v.type==="Income"),d={};l.forEach(v=>{d[v.category]=(d[v.category]||0)+v.amount});const f=Object.entries(d).map(([v,j])=>({name:s.get(v)||v||"Uncategorized",value:j})),h=["#10B981","#34D399","#6EE7B7","#A7F3D0","#D1FAE5"],p=n.filter(v=>v.status===Ie.COMPLETED),g={};p.forEach(v=>{g[v.customerId]=(g[v.customerId]||0)+v.total});const y=r.map(v=>({...v,revenue:g[v.id]||0})).filter(v=>v.revenue>0).sort((v,j)=>j.revenue-v.revenue).slice(0,3);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>e("/reports"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Income Summary"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white border rounded-xl font-bold text-sm text-gray-700 hover:bg-gray-50",children:[ie.Download," Export CSV"]}),c.jsx(We,{variant:"primary",size:"sm",icon:ie.Print,children:"Export Image"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-white p-8 rounded-lg border border-gray-100 shadow-sm flex flex-col items-center",children:[c.jsx("h3",{className:"font-bold text-gray-800 self-start mb-6",children:"Revenue Mix"}),c.jsx("div",{className:"w-full h-[300px]",children:c.jsx(cc,{width:"100%",height:"100%",children:c.jsxs(M5,{children:[c.jsx(Kj,{data:f,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:f.map((v,j)=>c.jsx(tl,{fill:h[j%h.length]},`cell-${j}`))}),c.jsx(So,{formatter:v=>Se(v)}),c.jsx(Ad,{verticalAlign:"bottom",align:"center"})]})})})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:`${se.colors.primary[600]} p-8 rounded-lg text-white shadow-lg shadow-[#0f2f57]/20`,children:[c.jsx("p",{className:"text-[#c7dff5] text-xs font-bold uppercase tracking-widest mb-1",children:"Total Revenue Collected"}),c.jsx("h4",{className:"text-4xl font-black",children:Se(l.reduce((v,j)=>v+j.amount,0))}),c.jsxs("div",{className:"mt-6 p-4 bg-white/10 rounded-xl flex items-center justify-between",children:[c.jsx("span",{className:"text-sm font-medium",children:"Avg Transaction Size"}),c.jsx("span",{className:"font-bold",children:Se(l.length?l.reduce((v,j)=>v+j.amount,0)/l.length:0)})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-100 shadow-sm",children:[c.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:"Top Customers"}),c.jsx("div",{className:"space-y-4",children:y.map((v,j)=>c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center font-bold text-xs",children:v.name.charAt(0)}),c.jsx("span",{className:"text-sm font-semibold text-gray-700",children:v.name})]}),c.jsx("span",{className:"text-sm font-black",children:Se(v.revenue)})]},j))})]})]})]})]})},ile=()=>{const e=vt(),{data:t=[]}=Xd(),{data:r=[]}=Zd(),{data:n=[]}=Jd(),a=x.useMemo(()=>{const s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],l=new Date().getFullYear(),d={};return s.forEach(f=>{d[f]={income:0,expense:0}}),t.forEach(f=>{const h=new Date(f.orderDate);if(h.getFullYear()===l){const p=h.getMonth(),g=s[p];d[g].income+=f.total}}),r.forEach(f=>{const h=new Date(f.billDate);if(h.getFullYear()===l){const p=h.getMonth(),g=s[p];d[g].expense+=f.total}}),n.filter(f=>f.type==="Expense"&&f.category!=="expense_purchases").forEach(f=>{const h=new Date(f.date);if(h.getFullYear()===l){const p=h.getMonth(),g=s[p];d[g].expense+=f.amount}}),s.map(f=>({name:f,income:d[f].income,expense:d[f].expense,profit:d[f].income-d[f].expense}))},[t,r,n]);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>e("/reports"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Income vs Expense Trend"})]}),c.jsx("div",{className:"flex gap-2",children:c.jsx(We,{variant:"primary",size:"sm",icon:ie.Print,children:"Export Full Report"})})]}),c.jsxs("div",{className:"bg-white p-8 rounded-lg border border-gray-100 shadow-sm",children:[c.jsx("h3",{className:"font-bold text-gray-800 mb-8",children:"Cash Flow Dynamics (Last 6 Months)"}),c.jsx("div",{className:"h-[400px]",children:c.jsx(cc,{width:"100%",height:"100%",children:c.jsxs(jw,{data:a,children:[c.jsx(dc,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),c.jsx(fc,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:12}}),c.jsx(hc,{axisLine:!1,tickLine:!1,tick:{fontSize:12}}),c.jsx(So,{formatter:s=>Se(s),contentStyle:{borderRadius:"16px",border:"none",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1)"}}),c.jsx(Ad,{verticalAlign:"top",align:"right",height:36}),c.jsx(yi,{dataKey:"income",fill:"#10B981",radius:[4,4,0,0],name:"Total Income",barSize:40}),c.jsx(yi,{dataKey:"expense",fill:"#EF4444",radius:[4,4,0,0],name:"Total Expense",barSize:40}),c.jsx(Sp,{type:"monotone",dataKey:"profit",stroke:"#8B5CF6",strokeWidth:4,dot:{r:6,fill:"#8B5CF6",strokeWidth:2,stroke:"#fff"},name:"Net Cash Flow"})]})})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:(()=>{var p,g,y,v;const s=a.reduce((j,S)=>j+S.income,0),l=a.reduce((j,S)=>j+S.expense,0),d=a.length>0?(s-l)/a.length:0,f=a.reduce((j,S,_)=>S.income>a[j].income?_:j,0),h=a.reduce((j,S,_)=>S.expense<a[j].expense?_:j,0);return[{label:"Highest Revenue Month",value:((p=a[f])==null?void 0:p.name)||"",amount:((g=a[f])==null?void 0:g.income)||0},{label:"Least Expense Month",value:((y=a[h])==null?void 0:y.name)||"",amount:((v=a[h])==null?void 0:v.expense)||0},{label:"Average Monthly Profit",value:"Monthly Avg",amount:d,color:"text-purple-600"}].map((j,S)=>c.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-100 shadow-sm",children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:j.label}),c.jsx("h4",{className:"text-xl font-bold text-gray-900 mt-1",children:j.value}),c.jsx("p",{className:`text-lg font-black mt-2 ${j.color}`,children:Se(j.amount)})]},S))})()})]})},ka=({label:e,amount:t,isBold:r,isTotal:n,indent:a})=>c.jsxs("div",{className:`flex justify-between py-2 ${r?"font-bold text-gray-900":"text-gray-600"} ${n?"border-t-2 border-gray-100 pt-4 mt-2":""} ${a?"pl-6":""}`,children:[c.jsx("span",{className:"text-sm",children:e}),c.jsx("span",{className:"text-sm font-black",children:Se(t)})]}),sle=()=>{const e=vt(),{data:t=[]}=Xd(),{data:r=[]}=Zd(),{data:n=[]}=Jd(),{data:a=[]}=$s(),s=new Map(a.map(j=>[j.id,j.name])),[l,d]=x.useState("currentYear"),[f,h]=x.useState(""),[p,g]=x.useState(""),y=j=>{const S=new Date(j),_=new Date;return l==="currentYear"?S.getFullYear()===_.getFullYear():l==="currentMonth"?S.getFullYear()===_.getFullYear()&&S.getMonth()===_.getMonth():l==="custom"?!f||!p?!0:S>=new Date(f)&&S<=new Date(p):!0},v=x.useMemo(()=>{const j=n.filter(R=>R.type==="Income"&&!!R.referenceId&&y(R.date)).reduce((R,U)=>R+U.amount,0),S=j>0?j:t.filter(R=>R.status===Ie.COMPLETED&&y(R.orderDate)).reduce((R,U)=>R+U.total,0),_=n.filter(R=>R.type==="Expense"&&R.category==="expense_purchases"&&y(R.date)).reduce((R,U)=>R+U.amount,0),N=_>0?_:r.filter(R=>y(R.billDate)).reduce((R,U)=>R+U.total,0),O=S-N,E={};n.filter(R=>R.type==="Expense"&&R.category!=="expense_purchases"&&y(R.date)).forEach(R=>{const U=s.get(R.category)||R.category||"Uncategorized";E[U]=(E[U]||0)+R.amount});const D=Object.entries(E).map(([R,U])=>({categoryName:R,amount:U})).sort((R,U)=>U.amount-R.amount),T=Object.values(E).reduce((R,U)=>R+U,0),M=O-T;return{grossSales:S,costOfPurchases:N,grossProfit:O,expenses:D,totalOperatingExpenses:T,netProfit:M}},[t,r,n,l,f,p,s]);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>e("/reports"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Profit and Loss Statement"})]}),c.jsxs("button",{onClick:()=>window.print(),className:`flex items-center gap-2 px-4 py-2 ${se.colors.primary[600]} hover:${se.colors.primary[700]} text-white font-bold rounded-xl transition-colors`,children:[ie.Print," Print Statement"]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-4",children:"Period"}),c.jsxs("div",{className:"flex gap-4 items-end",children:[c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"radio",name:"dateRange",value:"currentYear",checked:l==="currentYear",onChange:j=>d(j.target.value),className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Current Year"})]}),c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"radio",name:"dateRange",value:"currentMonth",checked:l==="currentMonth",onChange:j=>d(j.target.value),className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Current Month"})]}),c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"radio",name:"dateRange",value:"custom",checked:l==="custom",onChange:j=>d(j.target.value),className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Custom Range"})]})]}),l==="custom"&&c.jsxs("div",{className:"flex gap-3 ml-auto",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-600",children:"From:"}),c.jsx("input",{type:"date",value:f,onChange:j=>h(j.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-600",children:"To:"}),c.jsx("input",{type:"date",value:p,onChange:j=>g(j.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm"})]})]})]})]}),c.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"p-8 bg-gray-50 border-b border-gray-100 text-center",children:[Ne.settings.company.logo&&c.jsx("img",{src:Ne.settings.company.logo,className:"w-16 h-16 rounded-xl mx-auto mb-4"}),c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:Ne.settings.company.name})]}),c.jsxs("div",{className:"p-8 space-y-2",children:[c.jsx("h4",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mb-4",children:"Revenue"}),c.jsx(ka,{label:"Gross Sales (Completed Orders)",amount:v.grossSales}),c.jsx(ka,{label:"Other Operating Income",amount:0}),c.jsx(ka,{label:"Total Revenue",amount:v.grossSales,isBold:!0,isTotal:!0}),c.jsxs("div",{className:"pt-8",children:[c.jsx("h4",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mb-4",children:"Cost of Goods Sold"}),c.jsx(ka,{label:"Purchases",amount:v.costOfPurchases}),c.jsx(ka,{label:"Total COGS",amount:v.costOfPurchases,isBold:!0,isTotal:!0})]}),c.jsx("div",{className:"pt-8",children:c.jsx(ka,{label:"Gross Profit",amount:v.grossProfit,isBold:!0})}),c.jsxs("div",{className:"pt-8",children:[c.jsx("h4",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mb-4",children:"Operating Expenses"}),v.expenses.length>0?c.jsxs(c.Fragment,{children:[v.expenses.slice(0,5).map((j,S)=>c.jsx(ka,{label:j.categoryName,amount:j.amount,indent:!0},S)),v.expenses.length>5&&c.jsx(ka,{label:"Other Expenses",amount:v.expenses.slice(5).reduce((j,S)=>j+S.amount,0),indent:!0})]}):c.jsx(ka,{label:"None",amount:0,indent:!0}),c.jsx(ka,{label:"Total Operating Expenses",amount:v.totalOperatingExpenses,isBold:!0,isTotal:!0})]}),c.jsx("div",{className:"pt-12",children:c.jsxs("div",{className:`p-6 rounded-lg flex justify-between items-center ${v.netProfit>=0?se.colors.primary[600]:"bg-red-600"} text-white shadow-xl`,children:[c.jsx("span",{className:"text-lg font-black uppercase tracking-widest",children:"Net Profit / Loss"}),c.jsx("span",{className:"text-3xl font-black",children:Se(v.netProfit)})]})})]}),c.jsx("div",{className:"p-8 text-center text-[10px] text-gray-300 italic border-t border-gray-50",children:"This report is generated automatically by BD Hatbela Financial Management System."})]})]})},iT=({order:e,customer:t,products:r,companySettings:n,invoiceSettings:a})=>c.jsxs("div",{className:"space-y-5 print:space-y-4 text-gray-900",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[((n==null?void 0:n.logo)||Ne.settings.company.logo)&&c.jsx("img",{src:(n==null?void 0:n.logo)||Ne.settings.company.logo,className:"rounded-lg object-cover mb-4",style:{width:(a==null?void 0:a.logoWidth)||Ne.settings.invoice.logoWidth,height:(a==null?void 0:a.logoHeight)||Ne.settings.invoice.logoHeight},alt:"Company Logo"}),c.jsx("h1",{className:"text-xl font-black uppercase tracking-tighter",children:(n==null?void 0:n.name)||Ne.settings.company.name}),c.jsxs("div",{className:"mt-2 text-xs text-gray-400 font-medium space-y-1 print:text-gray-600",children:[c.jsx("p",{children:(n==null?void 0:n.address)||Ne.settings.company.address}),c.jsxs("p",{children:[(n==null?void 0:n.phone)||Ne.settings.company.phone," "," ",(n==null?void 0:n.email)||Ne.settings.company.email]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("h2",{className:"text-3xl font-black text-gray-300 uppercase leading-none mb-2 print:text-gray-400",children:(a==null?void 0:a.title)||Ne.settings.invoice.title}),c.jsxs("div",{className:"space-y-1.5 print:space-y-1",children:[c.jsxs("p",{className:"text-sm font-bold text-gray-900 print:text-gray-800",children:[c.jsx("span",{className:"text-gray-400 font-medium",children:"Order No:"}),e.orderNumber]}),c.jsxs("p",{className:"text-sm font-bold text-gray-900 print:text-gray-800",children:[c.jsx("span",{className:"text-gray-400 font-medium",children:"Date:"}),new Date(e.orderDate).toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})]})]})]})]}),c.jsx("div",{className:"grid grid-cols-2 gap-12 border-t border-gray-100 py-4 print:border-gray-300 print:py-3",children:c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-4 print:mb-2",children:"Billed To"}),c.jsx("h3",{className:"text-md font-black text-gray-900 print:text-gray-800",children:t==null?void 0:t.name}),c.jsx("p",{className:"text-sm text-gray-500 leading-relaxed print:text-gray-600",children:t==null?void 0:t.address}),c.jsx("p",{className:"text-sm font-bold mt-2 print:mt-1",children:t==null?void 0:t.phone})]})}),c.jsxs("table",{className:"w-full text-left print:text-gray-800",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b-2 border-gray-100 print:border-gray-300",children:[c.jsx("th",{className:"py-4 text-sm font-black text-gray-400 uppercase print:text-xs print:py-2",children:"Item Description"}),c.jsx("th",{className:"py-4 text-sm text-center font-black text-gray-400 uppercase print:text-xs print:py-2",children:"Rate"}),c.jsx("th",{className:"py-4 text-sm text-center font-black text-gray-400 uppercase print:text-xs print:py-2",children:"Qty"}),c.jsx("th",{className:"py-4 text-sm text-right font-black text-gray-400 uppercase print:text-xs print:py-2",children:"Total"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50 print:divide-gray-300",children:e.items.map((s,l)=>{const d=r.find(f=>f.id===s.productId);return c.jsxs("tr",{className:"group",children:[c.jsx("td",{className:"py-6 print:py-3",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("img",{src:d==null?void 0:d.image,className:"w-12 h-12 rounded-full object-cover border border-gray-100 shadow-sm print:w-10 print:h-10 print:rounded-full print:border-gray-300 print:shadow-none",alt:s.productName}),c.jsx("span",{className:"font-bold text-gray-900 print:text-sm",children:s.productName})]})}),c.jsx("td",{className:"py-6 text-center text-gray-500 font-bold print:py-3 print:text-sm",children:Se(s.rate)}),c.jsx("td",{className:"py-6 text-center text-gray-500 font-bold print:py-3 print:text-sm",children:s.quantity}),c.jsx("td",{className:"py-6 text-right font-black text-gray-900 print:py-3 print:text-sm",children:Se(s.amount)})]},l)})})]}),c.jsx("div",{className:"flex justify-end pt-6 print:pt-4",children:c.jsxs("div",{className:"w-full max-w-xs space-y-4 print:space-y-2 print:text-sm",children:[c.jsxs("div",{className:"flex justify-between text-sm print:text-xs",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase print:text-gray-600",children:"Subtotal"}),c.jsx("span",{className:"font-bold text-gray-900 print:text-gray-800",children:Se(e.subtotal)})]}),e.discount>0&&c.jsxs("div",{className:"flex justify-between text-sm print:text-xs",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase print:text-gray-600",children:"Discount"}),c.jsxs("span",{className:"font-bold text-red-500 print:text-red-600",children:["-",Se(e.discount)]})]}),e.shipping>0&&c.jsxs("div",{className:"flex justify-between text-sm print:text-xs",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase print:text-gray-600",children:"Shipping"}),c.jsx("span",{className:"font-bold text-gray-900 print:text-gray-800",children:Se(e.shipping)})]}),c.jsxs("div",{className:"flex justify-between items-center py-6 border-t-2 border-[#0f2f57] print:py-3 print:border-t print:border-gray-400",children:[c.jsx("span",{className:"font-black text-gray-900 uppercase tracking-tighter print:text-gray-800",children:"Net Total"}),c.jsx("span",{className:"font-black text-gray-900 print:text-gray-800",children:Se(e.total)})]})]})}),e.notes&&c.jsxs("div",{className:"bg-gray-50 p-4 rounded-[10px] border border-gray-100 print:bg-white print:p-3 print:rounded-lg print:border-gray-300",children:[c.jsx("p",{className:"text-[10px] font-black text-gray-300 uppercase tracking-widest mb-2 print:text-gray-500 print:mb-1",children:"Terms & Notes"}),c.jsx("p",{className:"text-xs text-gray-600 font-medium italic leading-relaxed print:text-gray-700",children:e.notes})]})]}),ole=()=>{const{id:e}=Mn(),{data:t,isPending:r}=Hw(e||""),{data:n=[]}=Wo(),{data:a=[]}=Mi(),{data:s=[]}=tf(),{data:l}=Up(),{data:d}=qp(),f=x.useRef(!1),h=t?n.find(p=>p.id===t.customerId):void 0;return t&&a.find(p=>p.id===t.createdBy),x.useEffect(()=>{t&&!r&&!f.current&&(f.current=!0,Boe())},[t,r]),r||!t?c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading details..."}):c.jsxs("div",{className:"min-h-screen bg-white print:bg-white",children:[c.jsxs("div",{className:"space-y-0 print:space-y-0",children:[c.jsx("div",{className:"bg-white p-6 lg:p-10 print:p-6 min-h-screen print:min-h-fit",children:c.jsx(iT,{order:t,customer:h,products:s,companySettings:l,invoiceSettings:d})}),c.jsx("div",{className:"bg-white p-6 lg:p-10 print:p-6 min-h-screen print:min-h-fit",style:{pageBreakBefore:"always"},children:c.jsx(iT,{order:t,customer:h,products:s,companySettings:l,invoiceSettings:d})})]}),c.jsx("style",{children:`
        @media print {
          body {
            margin: 0;
            padding: 0;
            background: white;
          }
          .no-print {
            display: none !important;
          }
          table {
            page-break-inside: avoid;
          }
          tr {
            page-break-inside: avoid;
          }
          @page {
            margin: 0.25in;
            size: A4;
          }
          .print:page-break-avoid {
            page-break-inside: avoid;
          }
          .grid {
            page-break-inside: avoid;
          }
        }
      `})]})},lle=new f$({defaultOptions:{queries:{staleTime:300*1e3,gcTime:1800*1e3,retry:2,retryDelay:e=>Math.min(1e3*2**e,1e4),refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1},mutations:{retry:1,retryDelay:1e3}}}),cle=({user:e,profile:t,isLoading:r})=>{const n=!!e;return c.jsxs(c6,{children:[c.jsx(Ye,{path:"/login",element:n?c.jsx(He,{to:"/dashboard",replace:!0}):c.jsx(O9,{})}),c.jsx(Ye,{path:"/",element:n?c.jsx(He,{to:"/dashboard",replace:!0}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/dashboard",element:n?c.jsx(at,{children:c.jsx(Loe,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/orders",element:n?c.jsx(at,{children:c.jsx($oe,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/orders/new",element:n?c.jsx(at,{children:c.jsx(Jk,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/orders/edit/:id",element:n?c.jsx(at,{children:c.jsx(Jk,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/orders/:id",element:n?c.jsx(at,{children:c.jsx(Uoe,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/print-order/:id",element:n?c.jsx(ole,{}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/bills",element:n?c.jsx(at,{children:c.jsx(zoe,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/bills/new",element:n?c.jsx(at,{children:c.jsx(eT,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/bills/edit/:id",element:n?c.jsx(at,{children:c.jsx(eT,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/bills/:id",element:n?c.jsx(at,{children:c.jsx(qoe,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/banking/accounts",element:n?c.jsx(at,{children:c.jsx(Foe,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/banking/transfer",element:n?c.jsx(at,{children:c.jsx(Hoe,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/banking/transactions",element:n?c.jsx(at,{children:c.jsx(Koe,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/transactions",element:n?c.jsx(He,{to:"/banking/transactions",replace:!0}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/transactions/new/:type",element:n?c.jsx(at,{children:c.jsx(Qoe,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/customers",element:n?c.jsx(at,{children:c.jsx(Xoe,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/customers/new",element:n?c.jsx(at,{children:c.jsx(nT,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/customers/edit/:id",element:n?c.jsx(at,{children:c.jsx(nT,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/customers/:id",element:n?c.jsx(at,{children:c.jsx(Zoe,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/vendors",element:n?c.jsx(at,{children:c.jsx(Joe,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/vendors/new",element:n?c.jsx(at,{children:c.jsx(aT,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/vendors/edit/:id",element:n?c.jsx(at,{children:c.jsx(aT,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/vendors/:id",element:n?c.jsx(at,{children:c.jsx(ele,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/products",element:n?c.jsx(at,{children:c.jsx(Voe,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/products/new",element:n?c.jsx(at,{children:c.jsx(tT,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/products/edit/:id",element:n?c.jsx(at,{children:c.jsx(tT,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/users",element:n?c.jsx(at,{children:c.jsx(Goe,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/users/new",element:n?c.jsx(at,{children:c.jsx(rT,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/users/edit/:id",element:n?c.jsx(at,{children:c.jsx(rT,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/users/:id",element:n?c.jsx(at,{children:c.jsx(Yoe,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/reports",element:n?c.jsx(at,{children:c.jsx(rle,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/reports/expense",element:n?c.jsx(at,{children:c.jsx(nle,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/reports/income",element:n?c.jsx(at,{children:c.jsx(ale,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/reports/income-vs-expense",element:n?c.jsx(at,{children:c.jsx(ile,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/reports/profit-loss",element:n?c.jsx(at,{children:c.jsx(sle,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/settings",element:n?c.jsx(at,{children:c.jsx(Woe,{})}):c.jsx(He,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"*",element:n?c.jsx(He,{to:"/dashboard",replace:!0}):c.jsx(He,{to:"/login",replace:!0})})]})},ule=()=>{const{user:e,profile:t,isLoading:r}=ba();return console.log("[App] Render - user:",!!e,"profile:",!!t,"isLoading:",r),r?(console.log("[App] Rendering loading screen"),c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"inline-block p-4",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),c.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading..."})]})})):c.jsx(cle,{user:e,profile:t,isLoading:r})},dle=()=>(console.log("[App] Root component rendering - setting up providers"),c.jsx(h$,{client:lle,children:c.jsx(vq,{children:c.jsx(Sq,{children:c.jsx(bq,{children:c.jsx(xq,{children:c.jsx(jq,{children:c.jsxs(D6,{children:[c.jsx(ule,{}),c.jsx(N9,{}),c.jsx(_9,{})]})})})})})})})),I5=document.getElementById("root");if(!I5)throw new Error("Could not find root element to mount to");const fle=fB.createRoot(I5);fle.render(c.jsx($t.StrictMode,{children:c.jsx(dle,{})}));window.__testSupabase={async testCustomers(){console.log(" Testing customer fetch...");try{const e=await cD();return console.log(" Success! Customers:",e),e}catch(e){throw console.error(" Error:",e),e}},async testConnection(){console.log(" Testing session (direct table auth)...");try{const e=localStorage.getItem("userData");if(e){const t=JSON.parse(e);return console.log(" User session active:",t),t}return console.log(" No active session - user not logged in"),null}catch(e){throw console.error(" Session check error:",e),e}},help(){console.log("Available test functions:"),console.log("  __testSupabase.testCustomers() - Fetch customers from DB"),console.log("  __testSupabase.testConnection() - Check auth session"),console.log("  __testSupabase.help() - Show this help")}};console.log(" Tip: Type __testSupabase.help() in console for test commands");export{Fa as a,mle as g};
