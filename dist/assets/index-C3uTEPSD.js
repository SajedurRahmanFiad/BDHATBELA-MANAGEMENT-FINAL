var tB=Object.defineProperty;var WE=e=>{throw TypeError(e)};var rB=(e,t,r)=>t in e?tB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Gv=(e,t,r)=>rB(e,typeof t!="symbol"?t+"":t,r),Yv=(e,t,r)=>t.has(e)||WE("Cannot "+r);var $=(e,t,r)=>(Yv(e,t,"read from private field"),r?r.call(e):t.get(e)),Me=(e,t,r)=>t.has(e)?WE("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),_e=(e,t,r,n)=>(Yv(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Ge=(e,t,r)=>(Yv(e,t,"access private method"),r);var Kh=(e,t,r,n)=>({set _(a){_e(e,t,a,r)},get _(){return $(e,t,n)}});function nB(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();function Ka(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function gle(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var Wv={exports:{}},Qu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XE;function aB(){if(XE)return Qu;XE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,s){var l=null;if(s!==void 0&&(l=""+s),a.key!==void 0&&(l=""+a.key),"key"in a){s={};for(var d in a)d!=="key"&&(s[d]=a[d])}else s=a;return a=s.ref,{$$typeof:e,type:n,key:l,ref:a!==void 0?a:null,props:s}}return Qu.Fragment=t,Qu.jsx=r,Qu.jsxs=r,Qu}var ZE;function iB(){return ZE||(ZE=1,Wv.exports=aB()),Wv.exports}var c=iB(),Xv={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JE;function sB(){if(JE)return Fe;JE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),y=Symbol.iterator;function v(P){return P===null||typeof P!="object"?null:(P=y&&P[y]||P["@@iterator"],typeof P=="function"?P:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,S={};function N(P,B,Y){this.props=P,this.context=B,this.refs=S,this.updater=Y||j}N.prototype.isReactComponent={},N.prototype.setState=function(P,B){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,B,"setState")},N.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function E(){}E.prototype=N.prototype;function O(P,B,Y){this.props=P,this.context=B,this.refs=S,this.updater=Y||j}var C=O.prototype=new E;C.constructor=O,_(C,N.prototype),C.isPureReactComponent=!0;var D=Array.isArray;function T(){}var M={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function U(P,B,Y){var ne=Y.ref;return{$$typeof:e,type:P,key:B,ref:ne!==void 0?ne:null,props:Y}}function W(P,B){return U(P.type,B,P.props)}function F(P){return typeof P=="object"&&P!==null&&P.$$typeof===e}function z(P){var B={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(Y){return B[Y]})}var pe=/\/+/g;function oe(P,B){return typeof P=="object"&&P!==null&&P.key!=null?z(""+P.key):B.toString(36)}function me(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(T,T):(P.status="pending",P.then(function(B){P.status==="pending"&&(P.status="fulfilled",P.value=B)},function(B){P.status==="pending"&&(P.status="rejected",P.reason=B)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function I(P,B,Y,ne,G){var be=typeof P;(be==="undefined"||be==="boolean")&&(P=null);var ge=!1;if(P===null)ge=!0;else switch(be){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(P.$$typeof){case e:case t:ge=!0;break;case p:return ge=P._init,I(ge(P._payload),B,Y,ne,G)}}if(ge)return G=G(P),ge=ne===""?"."+oe(P,0):ne,D(G)?(Y="",ge!=null&&(Y=ge.replace(pe,"$&/")+"/"),I(G,B,Y,"",function(Ee){return Ee})):G!=null&&(F(G)&&(G=W(G,Y+(G.key==null||P&&P.key===G.key?"":(""+G.key).replace(pe,"$&/")+"/")+ge)),B.push(G)),1;ge=0;var je=ne===""?".":ne+":";if(D(P))for(var J=0;J<P.length;J++)ne=P[J],be=je+oe(ne,J),ge+=I(ne,B,Y,be,G);else if(J=v(P),typeof J=="function")for(P=J.call(P),J=0;!(ne=P.next()).done;)ne=ne.value,be=je+oe(ne,J++),ge+=I(ne,B,Y,be,G);else if(be==="object"){if(typeof P.then=="function")return I(me(P),B,Y,ne,G);throw B=String(P),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return ge}function H(P,B,Y){if(P==null)return P;var ne=[],G=0;return I(P,ne,"","",function(be){return B.call(Y,be,G++)}),ne}function ie(P){if(P._status===-1){var B=P._result;B=B(),B.then(function(Y){(P._status===0||P._status===-1)&&(P._status=1,P._result=Y)},function(Y){(P._status===0||P._status===-1)&&(P._status=2,P._result=Y)}),P._status===-1&&(P._status=0,P._result=B)}if(P._status===1)return P._result.default;throw P._result}var he=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},K={map:H,forEach:function(P,B,Y){H(P,function(){B.apply(this,arguments)},Y)},count:function(P){var B=0;return H(P,function(){B++}),B},toArray:function(P){return H(P,function(B){return B})||[]},only:function(P){if(!F(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Fe.Activity=g,Fe.Children=K,Fe.Component=N,Fe.Fragment=r,Fe.Profiler=a,Fe.PureComponent=O,Fe.StrictMode=n,Fe.Suspense=f,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(P){return M.H.useMemoCache(P)}},Fe.cache=function(P){return function(){return P.apply(null,arguments)}},Fe.cacheSignal=function(){return null},Fe.cloneElement=function(P,B,Y){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ne=_({},P.props),G=P.key;if(B!=null)for(be in B.key!==void 0&&(G=""+B.key),B)!R.call(B,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&B.ref===void 0||(ne[be]=B[be]);var be=arguments.length-2;if(be===1)ne.children=Y;else if(1<be){for(var ge=Array(be),je=0;je<be;je++)ge[je]=arguments[je+2];ne.children=ge}return U(P.type,G,ne)},Fe.createContext=function(P){return P={$$typeof:l,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:s,_context:P},P},Fe.createElement=function(P,B,Y){var ne,G={},be=null;if(B!=null)for(ne in B.key!==void 0&&(be=""+B.key),B)R.call(B,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(G[ne]=B[ne]);var ge=arguments.length-2;if(ge===1)G.children=Y;else if(1<ge){for(var je=Array(ge),J=0;J<ge;J++)je[J]=arguments[J+2];G.children=je}if(P&&P.defaultProps)for(ne in ge=P.defaultProps,ge)G[ne]===void 0&&(G[ne]=ge[ne]);return U(P,be,G)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(P){return{$$typeof:d,render:P}},Fe.isValidElement=F,Fe.lazy=function(P){return{$$typeof:p,_payload:{_status:-1,_result:P},_init:ie}},Fe.memo=function(P,B){return{$$typeof:h,type:P,compare:B===void 0?null:B}},Fe.startTransition=function(P){var B=M.T,Y={};M.T=Y;try{var ne=P(),G=M.S;G!==null&&G(Y,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(T,he)}catch(be){he(be)}finally{B!==null&&Y.types!==null&&(B.types=Y.types),M.T=B}},Fe.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Fe.use=function(P){return M.H.use(P)},Fe.useActionState=function(P,B,Y){return M.H.useActionState(P,B,Y)},Fe.useCallback=function(P,B){return M.H.useCallback(P,B)},Fe.useContext=function(P){return M.H.useContext(P)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(P,B){return M.H.useDeferredValue(P,B)},Fe.useEffect=function(P,B){return M.H.useEffect(P,B)},Fe.useEffectEvent=function(P){return M.H.useEffectEvent(P)},Fe.useId=function(){return M.H.useId()},Fe.useImperativeHandle=function(P,B,Y){return M.H.useImperativeHandle(P,B,Y)},Fe.useInsertionEffect=function(P,B){return M.H.useInsertionEffect(P,B)},Fe.useLayoutEffect=function(P,B){return M.H.useLayoutEffect(P,B)},Fe.useMemo=function(P,B){return M.H.useMemo(P,B)},Fe.useOptimistic=function(P,B){return M.H.useOptimistic(P,B)},Fe.useReducer=function(P,B,Y){return M.H.useReducer(P,B,Y)},Fe.useRef=function(P){return M.H.useRef(P)},Fe.useState=function(P){return M.H.useState(P)},Fe.useSyncExternalStore=function(P,B,Y){return M.H.useSyncExternalStore(P,B,Y)},Fe.useTransition=function(){return M.H.useTransition()},Fe.version="19.2.4",Fe}var eO;function Ic(){return eO||(eO=1,Xv.exports=sB()),Xv.exports}var x=Ic();const yt=Ka(x),oB=nB({__proto__:null,default:yt},[x]);var Zv={exports:{}},Hu={},Jv={exports:{}},e0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tO;function lB(){return tO||(tO=1,(function(e){function t(I,H){var ie=I.length;I.push(H);e:for(;0<ie;){var he=ie-1>>>1,K=I[he];if(0<a(K,H))I[he]=H,I[ie]=K,ie=he;else break e}}function r(I){return I.length===0?null:I[0]}function n(I){if(I.length===0)return null;var H=I[0],ie=I.pop();if(ie!==H){I[0]=ie;e:for(var he=0,K=I.length,P=K>>>1;he<P;){var B=2*(he+1)-1,Y=I[B],ne=B+1,G=I[ne];if(0>a(Y,ie))ne<K&&0>a(G,Y)?(I[he]=G,I[ne]=ie,he=ne):(I[he]=Y,I[B]=ie,he=B);else if(ne<K&&0>a(G,ie))I[he]=G,I[ne]=ie,he=ne;else break e}}return H}function a(I,H){var ie=I.sortIndex-H.sortIndex;return ie!==0?ie:I.id-H.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,d=l.now();e.unstable_now=function(){return l.now()-d}}var f=[],h=[],p=1,g=null,y=3,v=!1,j=!1,_=!1,S=!1,N=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function C(I){for(var H=r(h);H!==null;){if(H.callback===null)n(h);else if(H.startTime<=I)n(h),H.sortIndex=H.expirationTime,t(f,H);else break;H=r(h)}}function D(I){if(_=!1,C(I),!j)if(r(f)!==null)j=!0,T||(T=!0,z());else{var H=r(h);H!==null&&me(D,H.startTime-I)}}var T=!1,M=-1,R=5,U=-1;function W(){return S?!0:!(e.unstable_now()-U<R)}function F(){if(S=!1,T){var I=e.unstable_now();U=I;var H=!0;try{e:{j=!1,_&&(_=!1,E(M),M=-1),v=!0;var ie=y;try{t:{for(C(I),g=r(f);g!==null&&!(g.expirationTime>I&&W());){var he=g.callback;if(typeof he=="function"){g.callback=null,y=g.priorityLevel;var K=he(g.expirationTime<=I);if(I=e.unstable_now(),typeof K=="function"){g.callback=K,C(I),H=!0;break t}g===r(f)&&n(f),C(I)}else n(f);g=r(f)}if(g!==null)H=!0;else{var P=r(h);P!==null&&me(D,P.startTime-I),H=!1}}break e}finally{g=null,y=ie,v=!1}H=void 0}}finally{H?z():T=!1}}}var z;if(typeof O=="function")z=function(){O(F)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,oe=pe.port2;pe.port1.onmessage=F,z=function(){oe.postMessage(null)}}else z=function(){N(F,0)};function me(I,H){M=N(function(){I(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(I){switch(y){case 1:case 2:case 3:var H=3;break;default:H=y}var ie=y;y=H;try{return I()}finally{y=ie}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(I,H){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var ie=y;y=I;try{return H()}finally{y=ie}},e.unstable_scheduleCallback=function(I,H,ie){var he=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?he+ie:he):ie=he,I){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=ie+K,I={id:p++,callback:H,priorityLevel:I,startTime:ie,expirationTime:K,sortIndex:-1},ie>he?(I.sortIndex=ie,t(h,I),r(f)===null&&I===r(h)&&(_?(E(M),M=-1):_=!0,me(D,ie-he))):(I.sortIndex=K,t(f,I),j||v||(j=!0,T||(T=!0,z()))),I},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(I){var H=y;return function(){var ie=y;y=H;try{return I.apply(this,arguments)}finally{y=ie}}}})(e0)),e0}var rO;function cB(){return rO||(rO=1,Jv.exports=lB()),Jv.exports}var t0={exports:{}},Qr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nO;function uB(){if(nO)return Qr;nO=1;var e=Ic();function t(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(f,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:g==null?null:""+g,children:f,containerInfo:h,implementation:p}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Qr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Qr.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return s(f,h,null,p)},Qr.flushSync=function(f){var h=l.T,p=n.p;try{if(l.T=null,n.p=2,f)return f()}finally{l.T=h,n.p=p,n.d.f()}},Qr.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(f,h))},Qr.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},Qr.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,g=d(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?n.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:v}):p==="script"&&n.d.X(f,{crossOrigin:g,integrity:y,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Qr.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=d(h.as,h.crossOrigin);n.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(f)},Qr.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=d(p,h.crossOrigin);n.d.L(f,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Qr.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=d(h.as,h.crossOrigin);n.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(f)},Qr.requestFormReset=function(f){n.d.r(f)},Qr.unstable_batchedUpdates=function(f,h){return f(h)},Qr.useFormState=function(f,h,p){return l.H.useFormState(f,h,p)},Qr.useFormStatus=function(){return l.H.useHostTransitionStatus()},Qr.version="19.2.4",Qr}var aO;function vT(){if(aO)return t0.exports;aO=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),t0.exports=uB(),t0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iO;function dB(){if(iO)return Hu;iO=1;var e=cB(),t=Ic(),r=vT();function n(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function s(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function l(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function d(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function f(i){if(s(i)!==i)throw Error(n(188))}function h(i){var o=i.alternate;if(!o){if(o=s(i),o===null)throw Error(n(188));return o!==i?null:i}for(var u=i,m=o;;){var b=u.return;if(b===null)break;var w=b.alternate;if(w===null){if(m=b.return,m!==null){u=m;continue}break}if(b.child===w.child){for(w=b.child;w;){if(w===u)return f(b),i;if(w===m)return f(b),o;w=w.sibling}throw Error(n(188))}if(u.return!==m.return)u=b,m=w;else{for(var A=!1,k=b.child;k;){if(k===u){A=!0,u=b,m=w;break}if(k===m){A=!0,m=b,u=w;break}k=k.sibling}if(!A){for(k=w.child;k;){if(k===u){A=!0,u=w,m=b;break}if(k===m){A=!0,m=w,u=b;break}k=k.sibling}if(!A)throw Error(n(189))}}if(u.alternate!==m)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?i:o}function p(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=p(i),o!==null)return o;i=i.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),O=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function z(i){return i===null||typeof i!="object"?null:(i=F&&i[F]||i["@@iterator"],typeof i=="function"?i:null)}var pe=Symbol.for("react.client.reference");function oe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===pe?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case _:return"Fragment";case N:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case T:return"SuspenseList";case U:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case j:return"Portal";case O:return i.displayName||"Context";case E:return(i._context.displayName||"Context")+".Consumer";case C:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return o=i.displayName||null,o!==null?o:oe(i.type)||"Memo";case R:o=i._payload,i=i._init;try{return oe(i(o))}catch{}}return null}var me=Array.isArray,I=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},he=[],K=-1;function P(i){return{current:i}}function B(i){0>K||(i.current=he[K],he[K]=null,K--)}function Y(i,o){K++,he[K]=i.current,i.current=o}var ne=P(null),G=P(null),be=P(null),ge=P(null);function je(i,o){switch(Y(be,o),Y(G,i),Y(ne,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?bE(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=bE(o),i=xE(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}B(ne),Y(ne,i)}function J(){B(ne),B(G),B(be)}function Ee(i){i.memoizedState!==null&&Y(ge,i);var o=ne.current,u=xE(o,i.type);o!==u&&(Y(G,i),Y(ne,u))}function Ce(i){G.current===i&&(B(ne),B(G)),ge.current===i&&(B(ge),zu._currentValue=ie)}var de,Xe;function Le(i){if(de===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);de=o&&o[1]||"",Xe=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+de+i+Xe}var vt=!1;function lt(i,o){if(!i||vt)return"";vt=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ae){var te=ae}Reflect.construct(i,[],fe)}else{try{fe.call()}catch(ae){te=ae}i.call(fe.prototype)}}else{try{throw Error()}catch(ae){te=ae}(fe=i())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ae){if(ae&&te&&typeof ae.stack=="string")return[ae.stack,te.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=m.DetermineComponentFrameRoot(),A=w[0],k=w[1];if(A&&k){var L=A.split(`
`),ee=k.split(`
`);for(b=m=0;m<L.length&&!L[m].includes("DetermineComponentFrameRoot");)m++;for(;b<ee.length&&!ee[b].includes("DetermineComponentFrameRoot");)b++;if(m===L.length||b===ee.length)for(m=L.length-1,b=ee.length-1;1<=m&&0<=b&&L[m]!==ee[b];)b--;for(;1<=m&&0<=b;m--,b--)if(L[m]!==ee[b]){if(m!==1||b!==1)do if(m--,b--,0>b||L[m]!==ee[b]){var ce=`
`+L[m].replace(" at new "," at ");return i.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",i.displayName)),ce}while(1<=m&&0<=b);break}}}finally{vt=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?Le(u):""}function $t(i,o){switch(i.tag){case 26:case 27:case 5:return Le(i.type);case 16:return Le("Lazy");case 13:return i.child!==o&&o!==null?Le("Suspense Fallback"):Le("Suspense");case 19:return Le("SuspenseList");case 0:case 15:return lt(i.type,!1);case 11:return lt(i.type.render,!1);case 1:return lt(i.type,!0);case 31:return Le("Activity");default:return""}}function we(i){try{var o="",u=null;do o+=$t(i,u),u=i,i=i.return;while(i);return o}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var ct=Object.prototype.hasOwnProperty,re=e.unstable_scheduleCallback,He=e.unstable_cancelCallback,ve=e.unstable_shouldYield,V=e.unstable_requestPaint,ye=e.unstable_now,Je=e.unstable_getCurrentPriorityLevel,Ze=e.unstable_ImmediatePriority,Sr=e.unstable_UserBlockingPriority,hr=e.unstable_NormalPriority,xn=e.unstable_LowPriority,mr=e.unstable_IdlePriority,sa=e.log,sl=e.unstable_setDisableYieldValue,Mr=null,pr=null;function _a(i){if(typeof sa=="function"&&sl(i),pr&&typeof pr.setStrictMode=="function")try{pr.setStrictMode(Mr,i)}catch{}}var wn=Math.clz32?Math.clz32:z5,$5=Math.log,U5=Math.LN2;function z5(i){return i>>>=0,i===0?32:31-($5(i)/U5|0)|0}var Af=256,Cf=262144,Pf=4194304;function Qs(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function kf(i,o,u){var m=i.pendingLanes;if(m===0)return 0;var b=0,w=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var k=m&134217727;return k!==0?(m=k&~w,m!==0?b=Qs(m):(A&=k,A!==0?b=Qs(A):u||(u=k&~i,u!==0&&(b=Qs(u))))):(k=m&~w,k!==0?b=Qs(k):A!==0?b=Qs(A):u||(u=m&~i,u!==0&&(b=Qs(u)))),b===0?0:o!==0&&o!==b&&(o&w)===0&&(w=b&-b,u=o&-o,w>=u||w===32&&(u&4194048)!==0)?o:b}function eu(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function q5(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eS(){var i=Pf;return Pf<<=1,(Pf&62914560)===0&&(Pf=4194304),i}function Ig(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function tu(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function F5(i,o,u,m,b,w){var A=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var k=i.entanglements,L=i.expirationTimes,ee=i.hiddenUpdates;for(u=A&~u;0<u;){var ce=31-wn(u),fe=1<<ce;k[ce]=0,L[ce]=-1;var te=ee[ce];if(te!==null)for(ee[ce]=null,ce=0;ce<te.length;ce++){var ae=te[ce];ae!==null&&(ae.lane&=-536870913)}u&=~fe}m!==0&&tS(i,m,0),w!==0&&b===0&&i.tag!==0&&(i.suspendedLanes|=w&~(A&~o))}function tS(i,o,u){i.pendingLanes|=o,i.suspendedLanes&=~o;var m=31-wn(o);i.entangledLanes|=o,i.entanglements[m]=i.entanglements[m]|1073741824|u&261930}function rS(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var m=31-wn(u),b=1<<m;b&o|i[m]&o&&(i[m]|=o),u&=~b}}function nS(i,o){var u=o&-o;return u=(u&42)!==0?1:Lg(u),(u&(i.suspendedLanes|o))!==0?0:u}function Lg(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Bg(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function aS(){var i=H.p;return i!==0?i:(i=window.event,i===void 0?32:FE(i.type))}function iS(i,o){var u=H.p;try{return H.p=i,o()}finally{H.p=u}}var Ki=Math.random().toString(36).slice(2),Rr="__reactFiber$"+Ki,sn="__reactProps$"+Ki,ol="__reactContainer$"+Ki,$g="__reactEvents$"+Ki,K5="__reactListeners$"+Ki,Q5="__reactHandles$"+Ki,sS="__reactResources$"+Ki,ru="__reactMarker$"+Ki;function Ug(i){delete i[Rr],delete i[sn],delete i[$g],delete i[K5],delete i[Q5]}function ll(i){var o=i[Rr];if(o)return o;for(var u=i.parentNode;u;){if(o=u[ol]||u[Rr]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=OE(i);i!==null;){if(u=i[Rr])return u;i=OE(i)}return o}i=u,u=i.parentNode}return null}function cl(i){if(i=i[Rr]||i[ol]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function nu(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(n(33))}function ul(i){var o=i[sS];return o||(o=i[sS]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function _r(i){i[ru]=!0}var oS=new Set,lS={};function Hs(i,o){dl(i,o),dl(i+"Capture",o)}function dl(i,o){for(lS[i]=o,i=0;i<o.length;i++)oS.add(o[i])}var H5=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cS={},uS={};function V5(i){return ct.call(uS,i)?!0:ct.call(cS,i)?!1:H5.test(i)?uS[i]=!0:(cS[i]=!0,!1)}function Tf(i,o,u){if(V5(o))if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+u)}}function Df(i,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+u)}}function Ha(i,o,u,m){if(m===null)i.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(o,u,""+m)}}function $n(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function dS(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function G5(i,o,u){var m=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var b=m.get,w=m.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return b.call(this)},set:function(A){u=""+A,w.call(this,A)}}),Object.defineProperty(i,o,{enumerable:m.enumerable}),{getValue:function(){return u},setValue:function(A){u=""+A},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function zg(i){if(!i._valueTracker){var o=dS(i)?"checked":"value";i._valueTracker=G5(i,o,""+i[o])}}function fS(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),m="";return i&&(m=dS(i)?i.checked?"true":"false":i.value),i=m,i!==u?(o.setValue(i),!0):!1}function Mf(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Y5=/[\n"\\]/g;function Un(i){return i.replace(Y5,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function qg(i,o,u,m,b,w,A,k){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),o!=null?A==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+$n(o)):i.value!==""+$n(o)&&(i.value=""+$n(o)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),o!=null?Fg(i,A,$n(o)):u!=null?Fg(i,A,$n(u)):m!=null&&i.removeAttribute("value"),b==null&&w!=null&&(i.defaultChecked=!!w),b!=null&&(i.checked=b&&typeof b!="function"&&typeof b!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?i.name=""+$n(k):i.removeAttribute("name")}function hS(i,o,u,m,b,w,A,k){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.type=w),o!=null||u!=null){if(!(w!=="submit"&&w!=="reset"||o!=null)){zg(i);return}u=u!=null?""+$n(u):"",o=o!=null?""+$n(o):u,k||o===i.value||(i.value=o),i.defaultValue=o}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,i.checked=k?i.checked:!!m,i.defaultChecked=!!m,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),zg(i)}function Fg(i,o,u){o==="number"&&Mf(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function fl(i,o,u,m){if(i=i.options,o){o={};for(var b=0;b<u.length;b++)o["$"+u[b]]=!0;for(u=0;u<i.length;u++)b=o.hasOwnProperty("$"+i[u].value),i[u].selected!==b&&(i[u].selected=b),b&&m&&(i[u].defaultSelected=!0)}else{for(u=""+$n(u),o=null,b=0;b<i.length;b++){if(i[b].value===u){i[b].selected=!0,m&&(i[b].defaultSelected=!0);return}o!==null||i[b].disabled||(o=i[b])}o!==null&&(o.selected=!0)}}function mS(i,o,u){if(o!=null&&(o=""+$n(o),o!==i.value&&(i.value=o),u==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=u!=null?""+$n(u):""}function pS(i,o,u,m){if(o==null){if(m!=null){if(u!=null)throw Error(n(92));if(me(m)){if(1<m.length)throw Error(n(93));m=m[0]}u=m}u==null&&(u=""),o=u}u=$n(o),i.defaultValue=u,m=i.textContent,m===u&&m!==""&&m!==null&&(i.value=m),zg(i)}function hl(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var W5=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gS(i,o,u){var m=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?m?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":m?i.setProperty(o,u):typeof u!="number"||u===0||W5.has(o)?o==="float"?i.cssFloat=u:i[o]=(""+u).trim():i[o]=u+"px"}function yS(i,o,u){if(o!=null&&typeof o!="object")throw Error(n(62));if(i=i.style,u!=null){for(var m in u)!u.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?i.setProperty(m,""):m==="float"?i.cssFloat="":i[m]="");for(var b in o)m=o[b],o.hasOwnProperty(b)&&u[b]!==m&&gS(i,b,m)}else for(var w in o)o.hasOwnProperty(w)&&gS(i,w,o[w])}function Kg(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var X5=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Z5=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rf(i){return Z5.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Va(){}var Qg=null;function Hg(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ml=null,pl=null;function vS(i){var o=cl(i);if(o&&(i=o.stateNode)){var u=i[sn]||null;e:switch(i=o.stateNode,o.type){case"input":if(qg(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Un(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var m=u[o];if(m!==i&&m.form===i.form){var b=m[sn]||null;if(!b)throw Error(n(90));qg(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(o=0;o<u.length;o++)m=u[o],m.form===i.form&&fS(m)}break e;case"textarea":mS(i,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&fl(i,!!u.multiple,o,!1)}}}var Vg=!1;function bS(i,o,u){if(Vg)return i(o,u);Vg=!0;try{var m=i(o);return m}finally{if(Vg=!1,(ml!==null||pl!==null)&&(jh(),ml&&(o=ml,i=pl,pl=ml=null,vS(o),i)))for(o=0;o<i.length;o++)vS(i[o])}}function au(i,o){var u=i.stateNode;if(u===null)return null;var m=u[sn]||null;if(m===null)return null;u=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(n(231,o,typeof u));return u}var Ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gg=!1;if(Ga)try{var iu={};Object.defineProperty(iu,"passive",{get:function(){Gg=!0}}),window.addEventListener("test",iu,iu),window.removeEventListener("test",iu,iu)}catch{Gg=!1}var Qi=null,Yg=null,If=null;function xS(){if(If)return If;var i,o=Yg,u=o.length,m,b="value"in Qi?Qi.value:Qi.textContent,w=b.length;for(i=0;i<u&&o[i]===b[i];i++);var A=u-i;for(m=1;m<=A&&o[u-m]===b[w-m];m++);return If=b.slice(i,1<m?1-m:void 0)}function Lf(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Bf(){return!0}function wS(){return!1}function on(i){function o(u,m,b,w,A){this._reactName=u,this._targetInst=b,this.type=m,this.nativeEvent=w,this.target=A,this.currentTarget=null;for(var k in i)i.hasOwnProperty(k)&&(u=i[k],this[k]=u?u(w):w[k]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Bf:wS,this.isPropagationStopped=wS,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Bf)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Bf)},persist:function(){},isPersistent:Bf}),o}var Vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$f=on(Vs),su=g({},Vs,{view:0,detail:0}),J5=on(su),Wg,Xg,ou,Uf=g({},su,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jg,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ou&&(ou&&i.type==="mousemove"?(Wg=i.screenX-ou.screenX,Xg=i.screenY-ou.screenY):Xg=Wg=0,ou=i),Wg)},movementY:function(i){return"movementY"in i?i.movementY:Xg}}),jS=on(Uf),e3=g({},Uf,{dataTransfer:0}),t3=on(e3),r3=g({},su,{relatedTarget:0}),Zg=on(r3),n3=g({},Vs,{animationName:0,elapsedTime:0,pseudoElement:0}),a3=on(n3),i3=g({},Vs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),s3=on(i3),o3=g({},Vs,{data:0}),SS=on(o3),l3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},c3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},u3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function d3(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=u3[i])?!!o[i]:!1}function Jg(){return d3}var f3=g({},su,{key:function(i){if(i.key){var o=l3[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Lf(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?c3[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jg,charCode:function(i){return i.type==="keypress"?Lf(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Lf(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),h3=on(f3),m3=g({},Uf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_S=on(m3),p3=g({},su,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jg}),g3=on(p3),y3=g({},Vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),v3=on(y3),b3=g({},Uf,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),x3=on(b3),w3=g({},Vs,{newState:0,oldState:0}),j3=on(w3),S3=[9,13,27,32],ey=Ga&&"CompositionEvent"in window,lu=null;Ga&&"documentMode"in document&&(lu=document.documentMode);var _3=Ga&&"TextEvent"in window&&!lu,NS=Ga&&(!ey||lu&&8<lu&&11>=lu),ES=" ",OS=!1;function AS(i,o){switch(i){case"keyup":return S3.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function CS(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var gl=!1;function N3(i,o){switch(i){case"compositionend":return CS(o);case"keypress":return o.which!==32?null:(OS=!0,ES);case"textInput":return i=o.data,i===ES&&OS?null:i;default:return null}}function E3(i,o){if(gl)return i==="compositionend"||!ey&&AS(i,o)?(i=xS(),If=Yg=Qi=null,gl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return NS&&o.locale!=="ko"?null:o.data;default:return null}}var O3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function PS(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!O3[i.type]:o==="textarea"}function kS(i,o,u,m){ml?pl?pl.push(m):pl=[m]:ml=m,o=Ch(o,"onChange"),0<o.length&&(u=new $f("onChange","change",null,u,m),i.push({event:u,listeners:o}))}var cu=null,uu=null;function A3(i){hE(i,0)}function zf(i){var o=nu(i);if(fS(o))return i}function TS(i,o){if(i==="change")return o}var DS=!1;if(Ga){var ty;if(Ga){var ry="oninput"in document;if(!ry){var MS=document.createElement("div");MS.setAttribute("oninput","return;"),ry=typeof MS.oninput=="function"}ty=ry}else ty=!1;DS=ty&&(!document.documentMode||9<document.documentMode)}function RS(){cu&&(cu.detachEvent("onpropertychange",IS),uu=cu=null)}function IS(i){if(i.propertyName==="value"&&zf(uu)){var o=[];kS(o,uu,i,Hg(i)),bS(A3,o)}}function C3(i,o,u){i==="focusin"?(RS(),cu=o,uu=u,cu.attachEvent("onpropertychange",IS)):i==="focusout"&&RS()}function P3(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return zf(uu)}function k3(i,o){if(i==="click")return zf(o)}function T3(i,o){if(i==="input"||i==="change")return zf(o)}function D3(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var jn=typeof Object.is=="function"?Object.is:D3;function du(i,o){if(jn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),m=Object.keys(o);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var b=u[m];if(!ct.call(o,b)||!jn(i[b],o[b]))return!1}return!0}function LS(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function BS(i,o){var u=LS(i);i=0;for(var m;u;){if(u.nodeType===3){if(m=i+u.textContent.length,i<=o&&m>=o)return{node:u,offset:o-i};i=m}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=LS(u)}}function $S(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?$S(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function US(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Mf(i.document);o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=Mf(i.document)}return o}function ny(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var M3=Ga&&"documentMode"in document&&11>=document.documentMode,yl=null,ay=null,fu=null,iy=!1;function zS(i,o,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;iy||yl==null||yl!==Mf(m)||(m=yl,"selectionStart"in m&&ny(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),fu&&du(fu,m)||(fu=m,m=Ch(ay,"onSelect"),0<m.length&&(o=new $f("onSelect","select",null,o,u),i.push({event:o,listeners:m}),o.target=yl)))}function Gs(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var vl={animationend:Gs("Animation","AnimationEnd"),animationiteration:Gs("Animation","AnimationIteration"),animationstart:Gs("Animation","AnimationStart"),transitionrun:Gs("Transition","TransitionRun"),transitionstart:Gs("Transition","TransitionStart"),transitioncancel:Gs("Transition","TransitionCancel"),transitionend:Gs("Transition","TransitionEnd")},sy={},qS={};Ga&&(qS=document.createElement("div").style,"AnimationEvent"in window||(delete vl.animationend.animation,delete vl.animationiteration.animation,delete vl.animationstart.animation),"TransitionEvent"in window||delete vl.transitionend.transition);function Ys(i){if(sy[i])return sy[i];if(!vl[i])return i;var o=vl[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in qS)return sy[i]=o[u];return i}var FS=Ys("animationend"),KS=Ys("animationiteration"),QS=Ys("animationstart"),R3=Ys("transitionrun"),I3=Ys("transitionstart"),L3=Ys("transitioncancel"),HS=Ys("transitionend"),VS=new Map,oy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");oy.push("scrollEnd");function oa(i,o){VS.set(i,o),Hs(o,[i])}var qf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},zn=[],bl=0,ly=0;function Ff(){for(var i=bl,o=ly=bl=0;o<i;){var u=zn[o];zn[o++]=null;var m=zn[o];zn[o++]=null;var b=zn[o];zn[o++]=null;var w=zn[o];if(zn[o++]=null,m!==null&&b!==null){var A=m.pending;A===null?b.next=b:(b.next=A.next,A.next=b),m.pending=b}w!==0&&GS(u,b,w)}}function Kf(i,o,u,m){zn[bl++]=i,zn[bl++]=o,zn[bl++]=u,zn[bl++]=m,ly|=m,i.lanes|=m,i=i.alternate,i!==null&&(i.lanes|=m)}function cy(i,o,u,m){return Kf(i,o,u,m),Qf(i)}function Ws(i,o){return Kf(i,null,null,o),Qf(i)}function GS(i,o,u){i.lanes|=u;var m=i.alternate;m!==null&&(m.lanes|=u);for(var b=!1,w=i.return;w!==null;)w.childLanes|=u,m=w.alternate,m!==null&&(m.childLanes|=u),w.tag===22&&(i=w.stateNode,i===null||i._visibility&1||(b=!0)),i=w,w=w.return;return i.tag===3?(w=i.stateNode,b&&o!==null&&(b=31-wn(u),i=w.hiddenUpdates,m=i[b],m===null?i[b]=[o]:m.push(o),o.lane=u|536870912),w):null}function Qf(i){if(50<Mu)throw Mu=0,vv=null,Error(n(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var xl={};function B3(i,o,u,m){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(i,o,u,m){return new B3(i,o,u,m)}function uy(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ya(i,o){var u=i.alternate;return u===null?(u=Sn(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function YS(i,o){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,o=u.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function Hf(i,o,u,m,b,w){var A=0;if(m=i,typeof i=="function")uy(i)&&(A=1);else if(typeof i=="string")A=FL(i,u,ne.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case U:return i=Sn(31,u,o,b),i.elementType=U,i.lanes=w,i;case _:return Xs(u.children,b,w,o);case S:A=8,b|=24;break;case N:return i=Sn(12,u,o,b|2),i.elementType=N,i.lanes=w,i;case D:return i=Sn(13,u,o,b),i.elementType=D,i.lanes=w,i;case T:return i=Sn(19,u,o,b),i.elementType=T,i.lanes=w,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case O:A=10;break e;case E:A=9;break e;case C:A=11;break e;case M:A=14;break e;case R:A=16,m=null;break e}A=29,u=Error(n(130,i===null?"null":typeof i,"")),m=null}return o=Sn(A,u,o,b),o.elementType=i,o.type=m,o.lanes=w,o}function Xs(i,o,u,m){return i=Sn(7,i,m,o),i.lanes=u,i}function dy(i,o,u){return i=Sn(6,i,null,o),i.lanes=u,i}function WS(i){var o=Sn(18,null,null,0);return o.stateNode=i,o}function fy(i,o,u){return o=Sn(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var XS=new WeakMap;function qn(i,o){if(typeof i=="object"&&i!==null){var u=XS.get(i);return u!==void 0?u:(o={value:i,source:o,stack:we(o)},XS.set(i,o),o)}return{value:i,source:o,stack:we(o)}}var wl=[],jl=0,Vf=null,hu=0,Fn=[],Kn=0,Hi=null,Na=1,Ea="";function Wa(i,o){wl[jl++]=hu,wl[jl++]=Vf,Vf=i,hu=o}function ZS(i,o,u){Fn[Kn++]=Na,Fn[Kn++]=Ea,Fn[Kn++]=Hi,Hi=i;var m=Na;i=Ea;var b=32-wn(m)-1;m&=~(1<<b),u+=1;var w=32-wn(o)+b;if(30<w){var A=b-b%5;w=(m&(1<<A)-1).toString(32),m>>=A,b-=A,Na=1<<32-wn(o)+b|u<<b|m,Ea=w+i}else Na=1<<w|u<<b|m,Ea=i}function hy(i){i.return!==null&&(Wa(i,1),ZS(i,1,0))}function my(i){for(;i===Vf;)Vf=wl[--jl],wl[jl]=null,hu=wl[--jl],wl[jl]=null;for(;i===Hi;)Hi=Fn[--Kn],Fn[Kn]=null,Ea=Fn[--Kn],Fn[Kn]=null,Na=Fn[--Kn],Fn[Kn]=null}function JS(i,o){Fn[Kn++]=Na,Fn[Kn++]=Ea,Fn[Kn++]=Hi,Na=o.id,Ea=o.overflow,Hi=i}var Ir=null,Rt=null,at=!1,Vi=null,Qn=!1,py=Error(n(519));function Gi(i){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw mu(qn(o,i)),py}function e_(i){var o=i.stateNode,u=i.type,m=i.memoizedProps;switch(o[Rr]=i,o[sn]=m,u){case"dialog":tt("cancel",o),tt("close",o);break;case"iframe":case"object":case"embed":tt("load",o);break;case"video":case"audio":for(u=0;u<Iu.length;u++)tt(Iu[u],o);break;case"source":tt("error",o);break;case"img":case"image":case"link":tt("error",o),tt("load",o);break;case"details":tt("toggle",o);break;case"input":tt("invalid",o),hS(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":tt("invalid",o);break;case"textarea":tt("invalid",o),pS(o,m.value,m.defaultValue,m.children)}u=m.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||m.suppressHydrationWarning===!0||yE(o.textContent,u)?(m.popover!=null&&(tt("beforetoggle",o),tt("toggle",o)),m.onScroll!=null&&tt("scroll",o),m.onScrollEnd!=null&&tt("scrollend",o),m.onClick!=null&&(o.onclick=Va),o=!0):o=!1,o||Gi(i,!0)}function t_(i){for(Ir=i.return;Ir;)switch(Ir.tag){case 5:case 31:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:Ir=Ir.return}}function Sl(i){if(i!==Ir)return!1;if(!at)return t_(i),at=!0,!1;var o=i.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||Dv(i.type,i.memoizedProps)),u=!u),u&&Rt&&Gi(i),t_(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Rt=EE(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Rt=EE(i)}else o===27?(o=Rt,ls(i.type)?(i=Bv,Bv=null,Rt=i):Rt=o):Rt=Ir?Vn(i.stateNode.nextSibling):null;return!0}function Zs(){Rt=Ir=null,at=!1}function gy(){var i=Vi;return i!==null&&(dn===null?dn=i:dn.push.apply(dn,i),Vi=null),i}function mu(i){Vi===null?Vi=[i]:Vi.push(i)}var yy=P(null),Js=null,Xa=null;function Yi(i,o,u){Y(yy,o._currentValue),o._currentValue=u}function Za(i){i._currentValue=yy.current,B(yy)}function vy(i,o,u){for(;i!==null;){var m=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),i===u)break;i=i.return}}function by(i,o,u,m){var b=i.child;for(b!==null&&(b.return=i);b!==null;){var w=b.dependencies;if(w!==null){var A=b.child;w=w.firstContext;e:for(;w!==null;){var k=w;w=b;for(var L=0;L<o.length;L++)if(k.context===o[L]){w.lanes|=u,k=w.alternate,k!==null&&(k.lanes|=u),vy(w.return,u,i),m||(A=null);break e}w=k.next}}else if(b.tag===18){if(A=b.return,A===null)throw Error(n(341));A.lanes|=u,w=A.alternate,w!==null&&(w.lanes|=u),vy(A,u,i),A=null}else A=b.child;if(A!==null)A.return=b;else for(A=b;A!==null;){if(A===i){A=null;break}if(b=A.sibling,b!==null){b.return=A.return,A=b;break}A=A.return}b=A}}function _l(i,o,u,m){i=null;for(var b=o,w=!1;b!==null;){if(!w){if((b.flags&524288)!==0)w=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var A=b.alternate;if(A===null)throw Error(n(387));if(A=A.memoizedProps,A!==null){var k=b.type;jn(b.pendingProps.value,A.value)||(i!==null?i.push(k):i=[k])}}else if(b===ge.current){if(A=b.alternate,A===null)throw Error(n(387));A.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(i!==null?i.push(zu):i=[zu])}b=b.return}i!==null&&by(o,i,u,m),o.flags|=262144}function Gf(i){for(i=i.firstContext;i!==null;){if(!jn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function eo(i){Js=i,Xa=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Lr(i){return r_(Js,i)}function Yf(i,o){return Js===null&&eo(i),r_(i,o)}function r_(i,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Xa===null){if(i===null)throw Error(n(308));Xa=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Xa=Xa.next=o;return u}var $3=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(u,m){i.push(m)}};this.abort=function(){o.aborted=!0,i.forEach(function(u){return u()})}},U3=e.unstable_scheduleCallback,z3=e.unstable_NormalPriority,ar={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xy(){return{controller:new $3,data:new Map,refCount:0}}function pu(i){i.refCount--,i.refCount===0&&U3(z3,function(){i.controller.abort()})}var gu=null,wy=0,Nl=0,El=null;function q3(i,o){if(gu===null){var u=gu=[];wy=0,Nl=_v(),El={status:"pending",value:void 0,then:function(m){u.push(m)}}}return wy++,o.then(n_,n_),o}function n_(){if(--wy===0&&gu!==null){El!==null&&(El.status="fulfilled");var i=gu;gu=null,Nl=0,El=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function F3(i,o){var u=[],m={status:"pending",value:null,reason:null,then:function(b){u.push(b)}};return i.then(function(){m.status="fulfilled",m.value=o;for(var b=0;b<u.length;b++)(0,u[b])(o)},function(b){for(m.status="rejected",m.reason=b,b=0;b<u.length;b++)(0,u[b])(void 0)}),m}var a_=I.S;I.S=function(i,o){zN=ye(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&q3(i,o),a_!==null&&a_(i,o)};var to=P(null);function jy(){var i=to.current;return i!==null?i:Pt.pooledCache}function Wf(i,o){o===null?Y(to,to.current):Y(to,o.pool)}function i_(){var i=jy();return i===null?null:{parent:ar._currentValue,pool:i}}var Ol=Error(n(460)),Sy=Error(n(474)),Xf=Error(n(542)),Zf={then:function(){}};function s_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function o_(i,o,u){switch(u=i[u],u===void 0?i.push(o):u!==o&&(o.then(Va,Va),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,c_(i),i;default:if(typeof o.status=="string")o.then(Va,Va);else{if(i=Pt,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=o,i.status="pending",i.then(function(m){if(o.status==="pending"){var b=o;b.status="fulfilled",b.value=m}},function(m){if(o.status==="pending"){var b=o;b.status="rejected",b.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,c_(i),i}throw no=o,Ol}}function ro(i){try{var o=i._init;return o(i._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(no=u,Ol):u}}var no=null;function l_(){if(no===null)throw Error(n(459));var i=no;return no=null,i}function c_(i){if(i===Ol||i===Xf)throw Error(n(483))}var Al=null,yu=0;function Jf(i){var o=yu;return yu+=1,Al===null&&(Al=[]),o_(Al,i,o)}function vu(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function eh(i,o){throw o.$$typeof===y?Error(n(525)):(i=Object.prototype.toString.call(o),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function u_(i){function o(Q,q){if(i){var Z=Q.deletions;Z===null?(Q.deletions=[q],Q.flags|=16):Z.push(q)}}function u(Q,q){if(!i)return null;for(;q!==null;)o(Q,q),q=q.sibling;return null}function m(Q){for(var q=new Map;Q!==null;)Q.key!==null?q.set(Q.key,Q):q.set(Q.index,Q),Q=Q.sibling;return q}function b(Q,q){return Q=Ya(Q,q),Q.index=0,Q.sibling=null,Q}function w(Q,q,Z){return Q.index=Z,i?(Z=Q.alternate,Z!==null?(Z=Z.index,Z<q?(Q.flags|=67108866,q):Z):(Q.flags|=67108866,q)):(Q.flags|=1048576,q)}function A(Q){return i&&Q.alternate===null&&(Q.flags|=67108866),Q}function k(Q,q,Z,ue){return q===null||q.tag!==6?(q=dy(Z,Q.mode,ue),q.return=Q,q):(q=b(q,Z),q.return=Q,q)}function L(Q,q,Z,ue){var Re=Z.type;return Re===_?ce(Q,q,Z.props.children,ue,Z.key):q!==null&&(q.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===R&&ro(Re)===q.type)?(q=b(q,Z.props),vu(q,Z),q.return=Q,q):(q=Hf(Z.type,Z.key,Z.props,null,Q.mode,ue),vu(q,Z),q.return=Q,q)}function ee(Q,q,Z,ue){return q===null||q.tag!==4||q.stateNode.containerInfo!==Z.containerInfo||q.stateNode.implementation!==Z.implementation?(q=fy(Z,Q.mode,ue),q.return=Q,q):(q=b(q,Z.children||[]),q.return=Q,q)}function ce(Q,q,Z,ue,Re){return q===null||q.tag!==7?(q=Xs(Z,Q.mode,ue,Re),q.return=Q,q):(q=b(q,Z),q.return=Q,q)}function fe(Q,q,Z){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=dy(""+q,Q.mode,Z),q.return=Q,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case v:return Z=Hf(q.type,q.key,q.props,null,Q.mode,Z),vu(Z,q),Z.return=Q,Z;case j:return q=fy(q,Q.mode,Z),q.return=Q,q;case R:return q=ro(q),fe(Q,q,Z)}if(me(q)||z(q))return q=Xs(q,Q.mode,Z,null),q.return=Q,q;if(typeof q.then=="function")return fe(Q,Jf(q),Z);if(q.$$typeof===O)return fe(Q,Yf(Q,q),Z);eh(Q,q)}return null}function te(Q,q,Z,ue){var Re=q!==null?q.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Re!==null?null:k(Q,q,""+Z,ue);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case v:return Z.key===Re?L(Q,q,Z,ue):null;case j:return Z.key===Re?ee(Q,q,Z,ue):null;case R:return Z=ro(Z),te(Q,q,Z,ue)}if(me(Z)||z(Z))return Re!==null?null:ce(Q,q,Z,ue,null);if(typeof Z.then=="function")return te(Q,q,Jf(Z),ue);if(Z.$$typeof===O)return te(Q,q,Yf(Q,Z),ue);eh(Q,Z)}return null}function ae(Q,q,Z,ue,Re){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return Q=Q.get(Z)||null,k(q,Q,""+ue,Re);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case v:return Q=Q.get(ue.key===null?Z:ue.key)||null,L(q,Q,ue,Re);case j:return Q=Q.get(ue.key===null?Z:ue.key)||null,ee(q,Q,ue,Re);case R:return ue=ro(ue),ae(Q,q,Z,ue,Re)}if(me(ue)||z(ue))return Q=Q.get(Z)||null,ce(q,Q,ue,Re,null);if(typeof ue.then=="function")return ae(Q,q,Z,Jf(ue),Re);if(ue.$$typeof===O)return ae(Q,q,Z,Yf(q,ue),Re);eh(q,ue)}return null}function Pe(Q,q,Z,ue){for(var Re=null,dt=null,Te=q,Ve=q=0,nt=null;Te!==null&&Ve<Z.length;Ve++){Te.index>Ve?(nt=Te,Te=null):nt=Te.sibling;var ft=te(Q,Te,Z[Ve],ue);if(ft===null){Te===null&&(Te=nt);break}i&&Te&&ft.alternate===null&&o(Q,Te),q=w(ft,q,Ve),dt===null?Re=ft:dt.sibling=ft,dt=ft,Te=nt}if(Ve===Z.length)return u(Q,Te),at&&Wa(Q,Ve),Re;if(Te===null){for(;Ve<Z.length;Ve++)Te=fe(Q,Z[Ve],ue),Te!==null&&(q=w(Te,q,Ve),dt===null?Re=Te:dt.sibling=Te,dt=Te);return at&&Wa(Q,Ve),Re}for(Te=m(Te);Ve<Z.length;Ve++)nt=ae(Te,Q,Ve,Z[Ve],ue),nt!==null&&(i&&nt.alternate!==null&&Te.delete(nt.key===null?Ve:nt.key),q=w(nt,q,Ve),dt===null?Re=nt:dt.sibling=nt,dt=nt);return i&&Te.forEach(function(hs){return o(Q,hs)}),at&&Wa(Q,Ve),Re}function Be(Q,q,Z,ue){if(Z==null)throw Error(n(151));for(var Re=null,dt=null,Te=q,Ve=q=0,nt=null,ft=Z.next();Te!==null&&!ft.done;Ve++,ft=Z.next()){Te.index>Ve?(nt=Te,Te=null):nt=Te.sibling;var hs=te(Q,Te,ft.value,ue);if(hs===null){Te===null&&(Te=nt);break}i&&Te&&hs.alternate===null&&o(Q,Te),q=w(hs,q,Ve),dt===null?Re=hs:dt.sibling=hs,dt=hs,Te=nt}if(ft.done)return u(Q,Te),at&&Wa(Q,Ve),Re;if(Te===null){for(;!ft.done;Ve++,ft=Z.next())ft=fe(Q,ft.value,ue),ft!==null&&(q=w(ft,q,Ve),dt===null?Re=ft:dt.sibling=ft,dt=ft);return at&&Wa(Q,Ve),Re}for(Te=m(Te);!ft.done;Ve++,ft=Z.next())ft=ae(Te,Q,Ve,ft.value,ue),ft!==null&&(i&&ft.alternate!==null&&Te.delete(ft.key===null?Ve:ft.key),q=w(ft,q,Ve),dt===null?Re=ft:dt.sibling=ft,dt=ft);return i&&Te.forEach(function(eB){return o(Q,eB)}),at&&Wa(Q,Ve),Re}function Ot(Q,q,Z,ue){if(typeof Z=="object"&&Z!==null&&Z.type===_&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case v:e:{for(var Re=Z.key;q!==null;){if(q.key===Re){if(Re=Z.type,Re===_){if(q.tag===7){u(Q,q.sibling),ue=b(q,Z.props.children),ue.return=Q,Q=ue;break e}}else if(q.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===R&&ro(Re)===q.type){u(Q,q.sibling),ue=b(q,Z.props),vu(ue,Z),ue.return=Q,Q=ue;break e}u(Q,q);break}else o(Q,q);q=q.sibling}Z.type===_?(ue=Xs(Z.props.children,Q.mode,ue,Z.key),ue.return=Q,Q=ue):(ue=Hf(Z.type,Z.key,Z.props,null,Q.mode,ue),vu(ue,Z),ue.return=Q,Q=ue)}return A(Q);case j:e:{for(Re=Z.key;q!==null;){if(q.key===Re)if(q.tag===4&&q.stateNode.containerInfo===Z.containerInfo&&q.stateNode.implementation===Z.implementation){u(Q,q.sibling),ue=b(q,Z.children||[]),ue.return=Q,Q=ue;break e}else{u(Q,q);break}else o(Q,q);q=q.sibling}ue=fy(Z,Q.mode,ue),ue.return=Q,Q=ue}return A(Q);case R:return Z=ro(Z),Ot(Q,q,Z,ue)}if(me(Z))return Pe(Q,q,Z,ue);if(z(Z)){if(Re=z(Z),typeof Re!="function")throw Error(n(150));return Z=Re.call(Z),Be(Q,q,Z,ue)}if(typeof Z.then=="function")return Ot(Q,q,Jf(Z),ue);if(Z.$$typeof===O)return Ot(Q,q,Yf(Q,Z),ue);eh(Q,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,q!==null&&q.tag===6?(u(Q,q.sibling),ue=b(q,Z),ue.return=Q,Q=ue):(u(Q,q),ue=dy(Z,Q.mode,ue),ue.return=Q,Q=ue),A(Q)):u(Q,q)}return function(Q,q,Z,ue){try{yu=0;var Re=Ot(Q,q,Z,ue);return Al=null,Re}catch(Te){if(Te===Ol||Te===Xf)throw Te;var dt=Sn(29,Te,null,Q.mode);return dt.lanes=ue,dt.return=Q,dt}finally{}}}var ao=u_(!0),d_=u_(!1),Wi=!1;function _y(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ny(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Xi(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Zi(i,o,u){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(gt&2)!==0){var b=m.pending;return b===null?o.next=o:(o.next=b.next,b.next=o),m.pending=o,o=Qf(i),GS(i,null,u),o}return Kf(i,m,o,u),Qf(i)}function bu(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var m=o.lanes;m&=i.pendingLanes,u|=m,o.lanes=u,rS(i,u)}}function Ey(i,o){var u=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var b=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var A={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};w===null?b=w=A:w=w.next=A,u=u.next}while(u!==null);w===null?b=w=o:w=w.next=o}else b=w=o;u={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:w,shared:m.shared,callbacks:m.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}var Oy=!1;function xu(){if(Oy){var i=El;if(i!==null)throw i}}function wu(i,o,u,m){Oy=!1;var b=i.updateQueue;Wi=!1;var w=b.firstBaseUpdate,A=b.lastBaseUpdate,k=b.shared.pending;if(k!==null){b.shared.pending=null;var L=k,ee=L.next;L.next=null,A===null?w=ee:A.next=ee,A=L;var ce=i.alternate;ce!==null&&(ce=ce.updateQueue,k=ce.lastBaseUpdate,k!==A&&(k===null?ce.firstBaseUpdate=ee:k.next=ee,ce.lastBaseUpdate=L))}if(w!==null){var fe=b.baseState;A=0,ce=ee=L=null,k=w;do{var te=k.lane&-536870913,ae=te!==k.lane;if(ae?(rt&te)===te:(m&te)===te){te!==0&&te===Nl&&(Oy=!0),ce!==null&&(ce=ce.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Pe=i,Be=k;te=o;var Ot=u;switch(Be.tag){case 1:if(Pe=Be.payload,typeof Pe=="function"){fe=Pe.call(Ot,fe,te);break e}fe=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Be.payload,te=typeof Pe=="function"?Pe.call(Ot,fe,te):Pe,te==null)break e;fe=g({},fe,te);break e;case 2:Wi=!0}}te=k.callback,te!==null&&(i.flags|=64,ae&&(i.flags|=8192),ae=b.callbacks,ae===null?b.callbacks=[te]:ae.push(te))}else ae={lane:te,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ce===null?(ee=ce=ae,L=fe):ce=ce.next=ae,A|=te;if(k=k.next,k===null){if(k=b.shared.pending,k===null)break;ae=k,k=ae.next,ae.next=null,b.lastBaseUpdate=ae,b.shared.pending=null}}while(!0);ce===null&&(L=fe),b.baseState=L,b.firstBaseUpdate=ee,b.lastBaseUpdate=ce,w===null&&(b.shared.lanes=0),ns|=A,i.lanes=A,i.memoizedState=fe}}function f_(i,o){if(typeof i!="function")throw Error(n(191,i));i.call(o)}function h_(i,o){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)f_(u[i],o)}var Cl=P(null),th=P(0);function m_(i,o){i=oi,Y(th,i),Y(Cl,o),oi=i|o.baseLanes}function Ay(){Y(th,oi),Y(Cl,Cl.current)}function Cy(){oi=th.current,B(Cl),B(th)}var _n=P(null),Hn=null;function Ji(i){var o=i.alternate;Y(rr,rr.current&1),Y(_n,i),Hn===null&&(o===null||Cl.current!==null||o.memoizedState!==null)&&(Hn=i)}function Py(i){Y(rr,rr.current),Y(_n,i),Hn===null&&(Hn=i)}function p_(i){i.tag===22?(Y(rr,rr.current),Y(_n,i),Hn===null&&(Hn=i)):es()}function es(){Y(rr,rr.current),Y(_n,_n.current)}function Nn(i){B(_n),Hn===i&&(Hn=null),B(rr)}var rr=P(0);function rh(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Iv(u)||Lv(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ja=0,Ke=null,Nt=null,ir=null,nh=!1,Pl=!1,io=!1,ah=0,ju=0,kl=null,K3=0;function Gt(){throw Error(n(321))}function ky(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!jn(i[u],o[u]))return!1;return!0}function Ty(i,o,u,m,b,w){return Ja=w,Ke=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,I.H=i===null||i.memoizedState===null?Z_:Vy,io=!1,w=u(m,b),io=!1,Pl&&(w=y_(o,u,m,b)),g_(i),w}function g_(i){I.H=Nu;var o=Nt!==null&&Nt.next!==null;if(Ja=0,ir=Nt=Ke=null,nh=!1,ju=0,kl=null,o)throw Error(n(300));i===null||sr||(i=i.dependencies,i!==null&&Gf(i)&&(sr=!0))}function y_(i,o,u,m){Ke=i;var b=0;do{if(Pl&&(kl=null),ju=0,Pl=!1,25<=b)throw Error(n(301));if(b+=1,ir=Nt=null,i.updateQueue!=null){var w=i.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}I.H=J_,w=o(u,m)}while(Pl);return w}function Q3(){var i=I.H,o=i.useState()[0];return o=typeof o.then=="function"?Su(o):o,i=i.useState()[0],(Nt!==null?Nt.memoizedState:null)!==i&&(Ke.flags|=1024),o}function Dy(){var i=ah!==0;return ah=0,i}function My(i,o,u){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~u}function Ry(i){if(nh){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}nh=!1}Ja=0,ir=Nt=Ke=null,Pl=!1,ju=ah=0,kl=null}function Zr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ir===null?Ke.memoizedState=ir=i:ir=ir.next=i,ir}function nr(){if(Nt===null){var i=Ke.alternate;i=i!==null?i.memoizedState:null}else i=Nt.next;var o=ir===null?Ke.memoizedState:ir.next;if(o!==null)ir=o,Nt=i;else{if(i===null)throw Ke.alternate===null?Error(n(467)):Error(n(310));Nt=i,i={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},ir===null?Ke.memoizedState=ir=i:ir=ir.next=i}return ir}function ih(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Su(i){var o=ju;return ju+=1,kl===null&&(kl=[]),i=o_(kl,i,o),o=Ke,(ir===null?o.memoizedState:ir.next)===null&&(o=o.alternate,I.H=o===null||o.memoizedState===null?Z_:Vy),i}function sh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Su(i);if(i.$$typeof===O)return Lr(i)}throw Error(n(438,String(i)))}function Iy(i){var o=null,u=Ke.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var m=Ke.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(b){return b.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=ih(),Ke.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(i),m=0;m<i;m++)u[m]=W;return o.index++,u}function ei(i,o){return typeof o=="function"?o(i):o}function oh(i){var o=nr();return Ly(o,Nt,i)}function Ly(i,o,u){var m=i.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=u;var b=i.baseQueue,w=m.pending;if(w!==null){if(b!==null){var A=b.next;b.next=w.next,w.next=A}o.baseQueue=b=w,m.pending=null}if(w=i.baseState,b===null)i.memoizedState=w;else{o=b.next;var k=A=null,L=null,ee=o,ce=!1;do{var fe=ee.lane&-536870913;if(fe!==ee.lane?(rt&fe)===fe:(Ja&fe)===fe){var te=ee.revertLane;if(te===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),fe===Nl&&(ce=!0);else if((Ja&te)===te){ee=ee.next,te===Nl&&(ce=!0);continue}else fe={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},L===null?(k=L=fe,A=w):L=L.next=fe,Ke.lanes|=te,ns|=te;fe=ee.action,io&&u(w,fe),w=ee.hasEagerState?ee.eagerState:u(w,fe)}else te={lane:fe,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},L===null?(k=L=te,A=w):L=L.next=te,Ke.lanes|=fe,ns|=fe;ee=ee.next}while(ee!==null&&ee!==o);if(L===null?A=w:L.next=k,!jn(w,i.memoizedState)&&(sr=!0,ce&&(u=El,u!==null)))throw u;i.memoizedState=w,i.baseState=A,i.baseQueue=L,m.lastRenderedState=w}return b===null&&(m.lanes=0),[i.memoizedState,m.dispatch]}function By(i){var o=nr(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=i;var m=u.dispatch,b=u.pending,w=o.memoizedState;if(b!==null){u.pending=null;var A=b=b.next;do w=i(w,A.action),A=A.next;while(A!==b);jn(w,o.memoizedState)||(sr=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),u.lastRenderedState=w}return[w,m]}function v_(i,o,u){var m=Ke,b=nr(),w=at;if(w){if(u===void 0)throw Error(n(407));u=u()}else u=o();var A=!jn((Nt||b).memoizedState,u);if(A&&(b.memoizedState=u,sr=!0),b=b.queue,zy(w_.bind(null,m,b,i),[i]),b.getSnapshot!==o||A||ir!==null&&ir.memoizedState.tag&1){if(m.flags|=2048,Tl(9,{destroy:void 0},x_.bind(null,m,b,u,o),null),Pt===null)throw Error(n(349));w||(Ja&127)!==0||b_(m,o,u)}return u}function b_(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=Ke.updateQueue,o===null?(o=ih(),Ke.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function x_(i,o,u,m){o.value=u,o.getSnapshot=m,j_(o)&&S_(i)}function w_(i,o,u){return u(function(){j_(o)&&S_(i)})}function j_(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!jn(i,u)}catch{return!0}}function S_(i){var o=Ws(i,2);o!==null&&fn(o,i,2)}function $y(i){var o=Zr();if(typeof i=="function"){var u=i;if(i=u(),io){_a(!0);try{u()}finally{_a(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:i},o}function __(i,o,u,m){return i.baseState=u,Ly(i,Nt,typeof m=="function"?m:ei)}function H3(i,o,u,m,b){if(uh(i))throw Error(n(485));if(i=o.action,i!==null){var w={payload:b,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){w.listeners.push(A)}};I.T!==null?u(!0):w.isTransition=!1,m(w),u=o.pending,u===null?(w.next=o.pending=w,N_(o,w)):(w.next=u.next,o.pending=u.next=w)}}function N_(i,o){var u=o.action,m=o.payload,b=i.state;if(o.isTransition){var w=I.T,A={};I.T=A;try{var k=u(b,m),L=I.S;L!==null&&L(A,k),E_(i,o,k)}catch(ee){Uy(i,o,ee)}finally{w!==null&&A.types!==null&&(w.types=A.types),I.T=w}}else try{w=u(b,m),E_(i,o,w)}catch(ee){Uy(i,o,ee)}}function E_(i,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(m){O_(i,o,m)},function(m){return Uy(i,o,m)}):O_(i,o,u)}function O_(i,o,u){o.status="fulfilled",o.value=u,A_(o),i.state=u,o=i.pending,o!==null&&(u=o.next,u===o?i.pending=null:(u=u.next,o.next=u,N_(i,u)))}function Uy(i,o,u){var m=i.pending;if(i.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=u,A_(o),o=o.next;while(o!==m)}i.action=null}function A_(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function C_(i,o){return o}function P_(i,o){if(at){var u=Pt.formState;if(u!==null){e:{var m=Ke;if(at){if(Rt){t:{for(var b=Rt,w=Qn;b.nodeType!==8;){if(!w){b=null;break t}if(b=Vn(b.nextSibling),b===null){b=null;break t}}w=b.data,b=w==="F!"||w==="F"?b:null}if(b){Rt=Vn(b.nextSibling),m=b.data==="F!";break e}}Gi(m)}m=!1}m&&(o=u[0])}}return u=Zr(),u.memoizedState=u.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:C_,lastRenderedState:o},u.queue=m,u=Y_.bind(null,Ke,m),m.dispatch=u,m=$y(!1),w=Hy.bind(null,Ke,!1,m.queue),m=Zr(),b={state:o,dispatch:null,action:i,pending:null},m.queue=b,u=H3.bind(null,Ke,b,w,u),b.dispatch=u,m.memoizedState=i,[o,u,!1]}function k_(i){var o=nr();return T_(o,Nt,i)}function T_(i,o,u){if(o=Ly(i,o,C_)[0],i=oh(ei)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=Su(o)}catch(A){throw A===Ol?Xf:A}else m=o;o=nr();var b=o.queue,w=b.dispatch;return u!==o.memoizedState&&(Ke.flags|=2048,Tl(9,{destroy:void 0},V3.bind(null,b,u),null)),[m,w,i]}function V3(i,o){i.action=o}function D_(i){var o=nr(),u=Nt;if(u!==null)return T_(o,u,i);nr(),o=o.memoizedState,u=nr();var m=u.queue.dispatch;return u.memoizedState=i,[o,m,!1]}function Tl(i,o,u,m){return i={tag:i,create:u,deps:m,inst:o,next:null},o=Ke.updateQueue,o===null&&(o=ih(),Ke.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=i.next=i:(m=u.next,u.next=i,i.next=m,o.lastEffect=i),i}function M_(){return nr().memoizedState}function lh(i,o,u,m){var b=Zr();Ke.flags|=i,b.memoizedState=Tl(1|o,{destroy:void 0},u,m===void 0?null:m)}function ch(i,o,u,m){var b=nr();m=m===void 0?null:m;var w=b.memoizedState.inst;Nt!==null&&m!==null&&ky(m,Nt.memoizedState.deps)?b.memoizedState=Tl(o,w,u,m):(Ke.flags|=i,b.memoizedState=Tl(1|o,w,u,m))}function R_(i,o){lh(8390656,8,i,o)}function zy(i,o){ch(2048,8,i,o)}function G3(i){Ke.flags|=4;var o=Ke.updateQueue;if(o===null)o=ih(),Ke.updateQueue=o,o.events=[i];else{var u=o.events;u===null?o.events=[i]:u.push(i)}}function I_(i){var o=nr().memoizedState;return G3({ref:o,nextImpl:i}),function(){if((gt&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function L_(i,o){return ch(4,2,i,o)}function B_(i,o){return ch(4,4,i,o)}function $_(i,o){if(typeof o=="function"){i=i();var u=o(i);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function U_(i,o,u){u=u!=null?u.concat([i]):null,ch(4,4,$_.bind(null,o,i),u)}function qy(){}function z_(i,o){var u=nr();o=o===void 0?null:o;var m=u.memoizedState;return o!==null&&ky(o,m[1])?m[0]:(u.memoizedState=[i,o],i)}function q_(i,o){var u=nr();o=o===void 0?null:o;var m=u.memoizedState;if(o!==null&&ky(o,m[1]))return m[0];if(m=i(),io){_a(!0);try{i()}finally{_a(!1)}}return u.memoizedState=[m,o],m}function Fy(i,o,u){return u===void 0||(Ja&1073741824)!==0&&(rt&261930)===0?i.memoizedState=o:(i.memoizedState=u,i=FN(),Ke.lanes|=i,ns|=i,u)}function F_(i,o,u,m){return jn(u,o)?u:Cl.current!==null?(i=Fy(i,u,m),jn(i,o)||(sr=!0),i):(Ja&42)===0||(Ja&1073741824)!==0&&(rt&261930)===0?(sr=!0,i.memoizedState=u):(i=FN(),Ke.lanes|=i,ns|=i,o)}function K_(i,o,u,m,b){var w=H.p;H.p=w!==0&&8>w?w:8;var A=I.T,k={};I.T=k,Hy(i,!1,o,u);try{var L=b(),ee=I.S;if(ee!==null&&ee(k,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ce=F3(L,m);_u(i,o,ce,An(i))}else _u(i,o,m,An(i))}catch(fe){_u(i,o,{then:function(){},status:"rejected",reason:fe},An())}finally{H.p=w,A!==null&&k.types!==null&&(A.types=k.types),I.T=A}}function Y3(){}function Ky(i,o,u,m){if(i.tag!==5)throw Error(n(476));var b=Q_(i).queue;K_(i,b,o,ie,u===null?Y3:function(){return H_(i),u(m)})}function Q_(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:ie},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:u},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function H_(i){var o=Q_(i);o.next===null&&(o=i.alternate.memoizedState),_u(i,o.next.queue,{},An())}function Qy(){return Lr(zu)}function V_(){return nr().memoizedState}function G_(){return nr().memoizedState}function W3(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var u=An();i=Xi(u);var m=Zi(o,i,u);m!==null&&(fn(m,o,u),bu(m,o,u)),o={cache:xy()},i.payload=o;return}o=o.return}}function X3(i,o,u){var m=An();u={lane:m,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},uh(i)?W_(o,u):(u=cy(i,o,u,m),u!==null&&(fn(u,i,m),X_(u,o,m)))}function Y_(i,o,u){var m=An();_u(i,o,u,m)}function _u(i,o,u,m){var b={lane:m,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(uh(i))W_(o,b);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var A=o.lastRenderedState,k=w(A,u);if(b.hasEagerState=!0,b.eagerState=k,jn(k,A))return Kf(i,o,b,0),Pt===null&&Ff(),!1}catch{}finally{}if(u=cy(i,o,b,m),u!==null)return fn(u,i,m),X_(u,o,m),!0}return!1}function Hy(i,o,u,m){if(m={lane:2,revertLane:_v(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},uh(i)){if(o)throw Error(n(479))}else o=cy(i,u,m,2),o!==null&&fn(o,i,2)}function uh(i){var o=i.alternate;return i===Ke||o!==null&&o===Ke}function W_(i,o){Pl=nh=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function X_(i,o,u){if((u&4194048)!==0){var m=o.lanes;m&=i.pendingLanes,u|=m,o.lanes=u,rS(i,u)}}var Nu={readContext:Lr,use:sh,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useLayoutEffect:Gt,useInsertionEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useSyncExternalStore:Gt,useId:Gt,useHostTransitionStatus:Gt,useFormState:Gt,useActionState:Gt,useOptimistic:Gt,useMemoCache:Gt,useCacheRefresh:Gt};Nu.useEffectEvent=Gt;var Z_={readContext:Lr,use:sh,useCallback:function(i,o){return Zr().memoizedState=[i,o===void 0?null:o],i},useContext:Lr,useEffect:R_,useImperativeHandle:function(i,o,u){u=u!=null?u.concat([i]):null,lh(4194308,4,$_.bind(null,o,i),u)},useLayoutEffect:function(i,o){return lh(4194308,4,i,o)},useInsertionEffect:function(i,o){lh(4,2,i,o)},useMemo:function(i,o){var u=Zr();o=o===void 0?null:o;var m=i();if(io){_a(!0);try{i()}finally{_a(!1)}}return u.memoizedState=[m,o],m},useReducer:function(i,o,u){var m=Zr();if(u!==void 0){var b=u(o);if(io){_a(!0);try{u(o)}finally{_a(!1)}}}else b=o;return m.memoizedState=m.baseState=b,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:b},m.queue=i,i=i.dispatch=X3.bind(null,Ke,i),[m.memoizedState,i]},useRef:function(i){var o=Zr();return i={current:i},o.memoizedState=i},useState:function(i){i=$y(i);var o=i.queue,u=Y_.bind(null,Ke,o);return o.dispatch=u,[i.memoizedState,u]},useDebugValue:qy,useDeferredValue:function(i,o){var u=Zr();return Fy(u,i,o)},useTransition:function(){var i=$y(!1);return i=K_.bind(null,Ke,i.queue,!0,!1),Zr().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,u){var m=Ke,b=Zr();if(at){if(u===void 0)throw Error(n(407));u=u()}else{if(u=o(),Pt===null)throw Error(n(349));(rt&127)!==0||b_(m,o,u)}b.memoizedState=u;var w={value:u,getSnapshot:o};return b.queue=w,R_(w_.bind(null,m,w,i),[i]),m.flags|=2048,Tl(9,{destroy:void 0},x_.bind(null,m,w,u,o),null),u},useId:function(){var i=Zr(),o=Pt.identifierPrefix;if(at){var u=Ea,m=Na;u=(m&~(1<<32-wn(m)-1)).toString(32)+u,o="_"+o+"R_"+u,u=ah++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=K3++,o="_"+o+"r_"+u.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:Qy,useFormState:P_,useActionState:P_,useOptimistic:function(i){var o=Zr();o.memoizedState=o.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Hy.bind(null,Ke,!0,u),u.dispatch=o,[i,o]},useMemoCache:Iy,useCacheRefresh:function(){return Zr().memoizedState=W3.bind(null,Ke)},useEffectEvent:function(i){var o=Zr(),u={impl:i};return o.memoizedState=u,function(){if((gt&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}},Vy={readContext:Lr,use:sh,useCallback:z_,useContext:Lr,useEffect:zy,useImperativeHandle:U_,useInsertionEffect:L_,useLayoutEffect:B_,useMemo:q_,useReducer:oh,useRef:M_,useState:function(){return oh(ei)},useDebugValue:qy,useDeferredValue:function(i,o){var u=nr();return F_(u,Nt.memoizedState,i,o)},useTransition:function(){var i=oh(ei)[0],o=nr().memoizedState;return[typeof i=="boolean"?i:Su(i),o]},useSyncExternalStore:v_,useId:V_,useHostTransitionStatus:Qy,useFormState:k_,useActionState:k_,useOptimistic:function(i,o){var u=nr();return __(u,Nt,i,o)},useMemoCache:Iy,useCacheRefresh:G_};Vy.useEffectEvent=I_;var J_={readContext:Lr,use:sh,useCallback:z_,useContext:Lr,useEffect:zy,useImperativeHandle:U_,useInsertionEffect:L_,useLayoutEffect:B_,useMemo:q_,useReducer:By,useRef:M_,useState:function(){return By(ei)},useDebugValue:qy,useDeferredValue:function(i,o){var u=nr();return Nt===null?Fy(u,i,o):F_(u,Nt.memoizedState,i,o)},useTransition:function(){var i=By(ei)[0],o=nr().memoizedState;return[typeof i=="boolean"?i:Su(i),o]},useSyncExternalStore:v_,useId:V_,useHostTransitionStatus:Qy,useFormState:D_,useActionState:D_,useOptimistic:function(i,o){var u=nr();return Nt!==null?__(u,Nt,i,o):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:Iy,useCacheRefresh:G_};J_.useEffectEvent=I_;function Gy(i,o,u,m){o=i.memoizedState,u=u(m,o),u=u==null?o:g({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Yy={enqueueSetState:function(i,o,u){i=i._reactInternals;var m=An(),b=Xi(m);b.payload=o,u!=null&&(b.callback=u),o=Zi(i,b,m),o!==null&&(fn(o,i,m),bu(o,i,m))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var m=An(),b=Xi(m);b.tag=1,b.payload=o,u!=null&&(b.callback=u),o=Zi(i,b,m),o!==null&&(fn(o,i,m),bu(o,i,m))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=An(),m=Xi(u);m.tag=2,o!=null&&(m.callback=o),o=Zi(i,m,u),o!==null&&(fn(o,i,u),bu(o,i,u))}};function eN(i,o,u,m,b,w,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,w,A):o.prototype&&o.prototype.isPureReactComponent?!du(u,m)||!du(b,w):!0}function tN(i,o,u,m){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,m),o.state!==i&&Yy.enqueueReplaceState(o,o.state,null)}function so(i,o){var u=o;if("ref"in o){u={};for(var m in o)m!=="ref"&&(u[m]=o[m])}if(i=i.defaultProps){u===o&&(u=g({},u));for(var b in i)u[b]===void 0&&(u[b]=i[b])}return u}function rN(i){qf(i)}function nN(i){console.error(i)}function aN(i){qf(i)}function dh(i,o){try{var u=i.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function iN(i,o,u){try{var m=i.onCaughtError;m(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Wy(i,o,u){return u=Xi(u),u.tag=3,u.payload={element:null},u.callback=function(){dh(i,o)},u}function sN(i){return i=Xi(i),i.tag=3,i}function oN(i,o,u,m){var b=u.type.getDerivedStateFromError;if(typeof b=="function"){var w=m.value;i.payload=function(){return b(w)},i.callback=function(){iN(o,u,m)}}var A=u.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){iN(o,u,m),typeof b!="function"&&(as===null?as=new Set([this]):as.add(this));var k=m.stack;this.componentDidCatch(m.value,{componentStack:k!==null?k:""})})}function Z3(i,o,u,m,b){if(u.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=u.alternate,o!==null&&_l(o,u,b,!0),u=_n.current,u!==null){switch(u.tag){case 31:case 13:return Hn===null?Sh():u.alternate===null&&Yt===0&&(Yt=3),u.flags&=-257,u.flags|=65536,u.lanes=b,m===Zf?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([m]):o.add(m),wv(i,m,b)),!1;case 22:return u.flags|=65536,m===Zf?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([m]):u.add(m)),wv(i,m,b)),!1}throw Error(n(435,u.tag))}return wv(i,m,b),Sh(),!1}if(at)return o=_n.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=b,m!==py&&(i=Error(n(422),{cause:m}),mu(qn(i,u)))):(m!==py&&(o=Error(n(423),{cause:m}),mu(qn(o,u))),i=i.current.alternate,i.flags|=65536,b&=-b,i.lanes|=b,m=qn(m,u),b=Wy(i.stateNode,m,b),Ey(i,b),Yt!==4&&(Yt=2)),!1;var w=Error(n(520),{cause:m});if(w=qn(w,u),Du===null?Du=[w]:Du.push(w),Yt!==4&&(Yt=2),o===null)return!0;m=qn(m,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,i=b&-b,u.lanes|=i,i=Wy(u.stateNode,m,i),Ey(u,i),!1;case 1:if(o=u.type,w=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(as===null||!as.has(w))))return u.flags|=65536,b&=-b,u.lanes|=b,b=sN(b),oN(b,i,u,m),Ey(u,b),!1}u=u.return}while(u!==null);return!1}var Xy=Error(n(461)),sr=!1;function Br(i,o,u,m){o.child=i===null?d_(o,null,u,m):ao(o,i.child,u,m)}function lN(i,o,u,m,b){u=u.render;var w=o.ref;if("ref"in m){var A={};for(var k in m)k!=="ref"&&(A[k]=m[k])}else A=m;return eo(o),m=Ty(i,o,u,A,w,b),k=Dy(),i!==null&&!sr?(My(i,o,b),ti(i,o,b)):(at&&k&&hy(o),o.flags|=1,Br(i,o,m,b),o.child)}function cN(i,o,u,m,b){if(i===null){var w=u.type;return typeof w=="function"&&!uy(w)&&w.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=w,uN(i,o,w,m,b)):(i=Hf(u.type,null,m,o,o.mode,b),i.ref=o.ref,i.return=o,o.child=i)}if(w=i.child,!iv(i,b)){var A=w.memoizedProps;if(u=u.compare,u=u!==null?u:du,u(A,m)&&i.ref===o.ref)return ti(i,o,b)}return o.flags|=1,i=Ya(w,m),i.ref=o.ref,i.return=o,o.child=i}function uN(i,o,u,m,b){if(i!==null){var w=i.memoizedProps;if(du(w,m)&&i.ref===o.ref)if(sr=!1,o.pendingProps=m=w,iv(i,b))(i.flags&131072)!==0&&(sr=!0);else return o.lanes=i.lanes,ti(i,o,b)}return Zy(i,o,u,m,b)}function dN(i,o,u,m){var b=m.children,w=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((o.flags&128)!==0){if(w=w!==null?w.baseLanes|u:u,i!==null){for(m=o.child=i.child,b=0;m!==null;)b=b|m.lanes|m.childLanes,m=m.sibling;m=b&~w}else m=0,o.child=null;return fN(i,o,w,u,m)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Wf(o,w!==null?w.cachePool:null),w!==null?m_(o,w):Ay(),p_(o);else return m=o.lanes=536870912,fN(i,o,w!==null?w.baseLanes|u:u,u,m)}else w!==null?(Wf(o,w.cachePool),m_(o,w),es(),o.memoizedState=null):(i!==null&&Wf(o,null),Ay(),es());return Br(i,o,b,u),o.child}function Eu(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function fN(i,o,u,m,b){var w=jy();return w=w===null?null:{parent:ar._currentValue,pool:w},o.memoizedState={baseLanes:u,cachePool:w},i!==null&&Wf(o,null),Ay(),p_(o),i!==null&&_l(i,o,m,!0),o.childLanes=b,null}function fh(i,o){return o=mh({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function hN(i,o,u){return ao(o,i.child,null,u),i=fh(o,o.pendingProps),i.flags|=2,Nn(o),o.memoizedState=null,i}function J3(i,o,u){var m=o.pendingProps,b=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(at){if(m.mode==="hidden")return i=fh(o,m),o.lanes=536870912,Eu(null,i);if(Py(o),(i=Rt)?(i=NE(i,Qn),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Hi!==null?{id:Na,overflow:Ea}:null,retryLane:536870912,hydrationErrors:null},u=WS(i),u.return=o,o.child=u,Ir=o,Rt=null)):i=null,i===null)throw Gi(o);return o.lanes=536870912,null}return fh(o,m)}var w=i.memoizedState;if(w!==null){var A=w.dehydrated;if(Py(o),b)if(o.flags&256)o.flags&=-257,o=hN(i,o,u);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(n(558));else if(sr||_l(i,o,u,!1),b=(u&i.childLanes)!==0,sr||b){if(m=Pt,m!==null&&(A=nS(m,u),A!==0&&A!==w.retryLane))throw w.retryLane=A,Ws(i,A),fn(m,i,A),Xy;Sh(),o=hN(i,o,u)}else i=w.treeContext,Rt=Vn(A.nextSibling),Ir=o,at=!0,Vi=null,Qn=!1,i!==null&&JS(o,i),o=fh(o,m),o.flags|=4096;return o}return i=Ya(i.child,{mode:m.mode,children:m.children}),i.ref=o.ref,o.child=i,i.return=o,i}function hh(i,o){var u=o.ref;if(u===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(n(284));(i===null||i.ref!==u)&&(o.flags|=4194816)}}function Zy(i,o,u,m,b){return eo(o),u=Ty(i,o,u,m,void 0,b),m=Dy(),i!==null&&!sr?(My(i,o,b),ti(i,o,b)):(at&&m&&hy(o),o.flags|=1,Br(i,o,u,b),o.child)}function mN(i,o,u,m,b,w){return eo(o),o.updateQueue=null,u=y_(o,m,u,b),g_(i),m=Dy(),i!==null&&!sr?(My(i,o,w),ti(i,o,w)):(at&&m&&hy(o),o.flags|=1,Br(i,o,u,w),o.child)}function pN(i,o,u,m,b){if(eo(o),o.stateNode===null){var w=xl,A=u.contextType;typeof A=="object"&&A!==null&&(w=Lr(A)),w=new u(m,w),o.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Yy,o.stateNode=w,w._reactInternals=o,w=o.stateNode,w.props=m,w.state=o.memoizedState,w.refs={},_y(o),A=u.contextType,w.context=typeof A=="object"&&A!==null?Lr(A):xl,w.state=o.memoizedState,A=u.getDerivedStateFromProps,typeof A=="function"&&(Gy(o,u,A,m),w.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(A=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),A!==w.state&&Yy.enqueueReplaceState(w,w.state,null),wu(o,m,w,b),xu(),w.state=o.memoizedState),typeof w.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(i===null){w=o.stateNode;var k=o.memoizedProps,L=so(u,k);w.props=L;var ee=w.context,ce=u.contextType;A=xl,typeof ce=="object"&&ce!==null&&(A=Lr(ce));var fe=u.getDerivedStateFromProps;ce=typeof fe=="function"||typeof w.getSnapshotBeforeUpdate=="function",k=o.pendingProps!==k,ce||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k||ee!==A)&&tN(o,w,m,A),Wi=!1;var te=o.memoizedState;w.state=te,wu(o,m,w,b),xu(),ee=o.memoizedState,k||te!==ee||Wi?(typeof fe=="function"&&(Gy(o,u,fe,m),ee=o.memoizedState),(L=Wi||eN(o,u,L,m,te,ee,A))?(ce||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(o.flags|=4194308)):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=ee),w.props=m,w.state=ee,w.context=A,m=L):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{w=o.stateNode,Ny(i,o),A=o.memoizedProps,ce=so(u,A),w.props=ce,fe=o.pendingProps,te=w.context,ee=u.contextType,L=xl,typeof ee=="object"&&ee!==null&&(L=Lr(ee)),k=u.getDerivedStateFromProps,(ee=typeof k=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==fe||te!==L)&&tN(o,w,m,L),Wi=!1,te=o.memoizedState,w.state=te,wu(o,m,w,b),xu();var ae=o.memoizedState;A!==fe||te!==ae||Wi||i!==null&&i.dependencies!==null&&Gf(i.dependencies)?(typeof k=="function"&&(Gy(o,u,k,m),ae=o.memoizedState),(ce=Wi||eN(o,u,ce,m,te,ae,L)||i!==null&&i.dependencies!==null&&Gf(i.dependencies))?(ee||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(m,ae,L),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(m,ae,L)),typeof w.componentDidUpdate=="function"&&(o.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=ae),w.props=m,w.state=ae,w.context=L,m=ce):(typeof w.componentDidUpdate!="function"||A===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),m=!1)}return w=m,hh(i,o),m=(o.flags&128)!==0,w||m?(w=o.stateNode,u=m&&typeof u.getDerivedStateFromError!="function"?null:w.render(),o.flags|=1,i!==null&&m?(o.child=ao(o,i.child,null,b),o.child=ao(o,null,u,b)):Br(i,o,u,b),o.memoizedState=w.state,i=o.child):i=ti(i,o,b),i}function gN(i,o,u,m){return Zs(),o.flags|=256,Br(i,o,u,m),o.child}var Jy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ev(i){return{baseLanes:i,cachePool:i_()}}function tv(i,o,u){return i=i!==null?i.childLanes&~u:0,o&&(i|=On),i}function yN(i,o,u){var m=o.pendingProps,b=!1,w=(o.flags&128)!==0,A;if((A=w)||(A=i!==null&&i.memoizedState===null?!1:(rr.current&2)!==0),A&&(b=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,i===null){if(at){if(b?Ji(o):es(),(i=Rt)?(i=NE(i,Qn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Hi!==null?{id:Na,overflow:Ea}:null,retryLane:536870912,hydrationErrors:null},u=WS(i),u.return=o,o.child=u,Ir=o,Rt=null)):i=null,i===null)throw Gi(o);return Lv(i)?o.lanes=32:o.lanes=536870912,null}var k=m.children;return m=m.fallback,b?(es(),b=o.mode,k=mh({mode:"hidden",children:k},b),m=Xs(m,b,u,null),k.return=o,m.return=o,k.sibling=m,o.child=k,m=o.child,m.memoizedState=ev(u),m.childLanes=tv(i,A,u),o.memoizedState=Jy,Eu(null,m)):(Ji(o),rv(o,k))}var L=i.memoizedState;if(L!==null&&(k=L.dehydrated,k!==null)){if(w)o.flags&256?(Ji(o),o.flags&=-257,o=nv(i,o,u)):o.memoizedState!==null?(es(),o.child=i.child,o.flags|=128,o=null):(es(),k=m.fallback,b=o.mode,m=mh({mode:"visible",children:m.children},b),k=Xs(k,b,u,null),k.flags|=2,m.return=o,k.return=o,m.sibling=k,o.child=m,ao(o,i.child,null,u),m=o.child,m.memoizedState=ev(u),m.childLanes=tv(i,A,u),o.memoizedState=Jy,o=Eu(null,m));else if(Ji(o),Lv(k)){if(A=k.nextSibling&&k.nextSibling.dataset,A)var ee=A.dgst;A=ee,m=Error(n(419)),m.stack="",m.digest=A,mu({value:m,source:null,stack:null}),o=nv(i,o,u)}else if(sr||_l(i,o,u,!1),A=(u&i.childLanes)!==0,sr||A){if(A=Pt,A!==null&&(m=nS(A,u),m!==0&&m!==L.retryLane))throw L.retryLane=m,Ws(i,m),fn(A,i,m),Xy;Iv(k)||Sh(),o=nv(i,o,u)}else Iv(k)?(o.flags|=192,o.child=i.child,o=null):(i=L.treeContext,Rt=Vn(k.nextSibling),Ir=o,at=!0,Vi=null,Qn=!1,i!==null&&JS(o,i),o=rv(o,m.children),o.flags|=4096);return o}return b?(es(),k=m.fallback,b=o.mode,L=i.child,ee=L.sibling,m=Ya(L,{mode:"hidden",children:m.children}),m.subtreeFlags=L.subtreeFlags&65011712,ee!==null?k=Ya(ee,k):(k=Xs(k,b,u,null),k.flags|=2),k.return=o,m.return=o,m.sibling=k,o.child=m,Eu(null,m),m=o.child,k=i.child.memoizedState,k===null?k=ev(u):(b=k.cachePool,b!==null?(L=ar._currentValue,b=b.parent!==L?{parent:L,pool:L}:b):b=i_(),k={baseLanes:k.baseLanes|u,cachePool:b}),m.memoizedState=k,m.childLanes=tv(i,A,u),o.memoizedState=Jy,Eu(i.child,m)):(Ji(o),u=i.child,i=u.sibling,u=Ya(u,{mode:"visible",children:m.children}),u.return=o,u.sibling=null,i!==null&&(A=o.deletions,A===null?(o.deletions=[i],o.flags|=16):A.push(i)),o.child=u,o.memoizedState=null,u)}function rv(i,o){return o=mh({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function mh(i,o){return i=Sn(22,i,null,o),i.lanes=0,i}function nv(i,o,u){return ao(o,i.child,null,u),i=rv(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function vN(i,o,u){i.lanes|=o;var m=i.alternate;m!==null&&(m.lanes|=o),vy(i.return,o,u)}function av(i,o,u,m,b,w){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:b,treeForkCount:w}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=m,A.tail=u,A.tailMode=b,A.treeForkCount=w)}function bN(i,o,u){var m=o.pendingProps,b=m.revealOrder,w=m.tail;m=m.children;var A=rr.current,k=(A&2)!==0;if(k?(A=A&1|2,o.flags|=128):A&=1,Y(rr,A),Br(i,o,m,u),m=at?hu:0,!k&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&vN(i,u,o);else if(i.tag===19)vN(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(b){case"forwards":for(u=o.child,b=null;u!==null;)i=u.alternate,i!==null&&rh(i)===null&&(b=u),u=u.sibling;u=b,u===null?(b=o.child,o.child=null):(b=u.sibling,u.sibling=null),av(o,!1,b,u,w,m);break;case"backwards":case"unstable_legacy-backwards":for(u=null,b=o.child,o.child=null;b!==null;){if(i=b.alternate,i!==null&&rh(i)===null){o.child=b;break}i=b.sibling,b.sibling=u,u=b,b=i}av(o,!0,u,null,w,m);break;case"together":av(o,!1,null,null,void 0,m);break;default:o.memoizedState=null}return o.child}function ti(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),ns|=o.lanes,(u&o.childLanes)===0)if(i!==null){if(_l(i,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(n(153));if(o.child!==null){for(i=o.child,u=Ya(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=Ya(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function iv(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Gf(i)))}function eL(i,o,u){switch(o.tag){case 3:je(o,o.stateNode.containerInfo),Yi(o,ar,i.memoizedState.cache),Zs();break;case 27:case 5:Ee(o);break;case 4:je(o,o.stateNode.containerInfo);break;case 10:Yi(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Py(o),null;break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(Ji(o),o.flags|=128,null):(u&o.child.childLanes)!==0?yN(i,o,u):(Ji(o),i=ti(i,o,u),i!==null?i.sibling:null);Ji(o);break;case 19:var b=(i.flags&128)!==0;if(m=(u&o.childLanes)!==0,m||(_l(i,o,u,!1),m=(u&o.childLanes)!==0),b){if(m)return bN(i,o,u);o.flags|=128}if(b=o.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Y(rr,rr.current),m)break;return null;case 22:return o.lanes=0,dN(i,o,u,o.pendingProps);case 24:Yi(o,ar,i.memoizedState.cache)}return ti(i,o,u)}function xN(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps)sr=!0;else{if(!iv(i,u)&&(o.flags&128)===0)return sr=!1,eL(i,o,u);sr=(i.flags&131072)!==0}else sr=!1,at&&(o.flags&1048576)!==0&&ZS(o,hu,o.index);switch(o.lanes=0,o.tag){case 16:e:{var m=o.pendingProps;if(i=ro(o.elementType),o.type=i,typeof i=="function")uy(i)?(m=so(i,m),o.tag=1,o=pN(null,o,i,m,u)):(o.tag=0,o=Zy(null,o,i,m,u));else{if(i!=null){var b=i.$$typeof;if(b===C){o.tag=11,o=lN(null,o,i,m,u);break e}else if(b===M){o.tag=14,o=cN(null,o,i,m,u);break e}}throw o=oe(i)||i,Error(n(306,o,""))}}return o;case 0:return Zy(i,o,o.type,o.pendingProps,u);case 1:return m=o.type,b=so(m,o.pendingProps),pN(i,o,m,b,u);case 3:e:{if(je(o,o.stateNode.containerInfo),i===null)throw Error(n(387));m=o.pendingProps;var w=o.memoizedState;b=w.element,Ny(i,o),wu(o,m,null,u);var A=o.memoizedState;if(m=A.cache,Yi(o,ar,m),m!==w.cache&&by(o,[ar],u,!0),xu(),m=A.element,w.isDehydrated)if(w={element:m,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){o=gN(i,o,m,u);break e}else if(m!==b){b=qn(Error(n(424)),o),mu(b),o=gN(i,o,m,u);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Rt=Vn(i.firstChild),Ir=o,at=!0,Vi=null,Qn=!0,u=d_(o,null,m,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Zs(),m===b){o=ti(i,o,u);break e}Br(i,o,m,u)}o=o.child}return o;case 26:return hh(i,o),i===null?(u=kE(o.type,null,o.pendingProps,null))?o.memoizedState=u:at||(u=o.type,i=o.pendingProps,m=Ph(be.current).createElement(u),m[Rr]=o,m[sn]=i,$r(m,u,i),_r(m),o.stateNode=m):o.memoizedState=kE(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Ee(o),i===null&&at&&(m=o.stateNode=AE(o.type,o.pendingProps,be.current),Ir=o,Qn=!0,b=Rt,ls(o.type)?(Bv=b,Rt=Vn(m.firstChild)):Rt=b),Br(i,o,o.pendingProps.children,u),hh(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&at&&((b=m=Rt)&&(m=PL(m,o.type,o.pendingProps,Qn),m!==null?(o.stateNode=m,Ir=o,Rt=Vn(m.firstChild),Qn=!1,b=!0):b=!1),b||Gi(o)),Ee(o),b=o.type,w=o.pendingProps,A=i!==null?i.memoizedProps:null,m=w.children,Dv(b,w)?m=null:A!==null&&Dv(b,A)&&(o.flags|=32),o.memoizedState!==null&&(b=Ty(i,o,Q3,null,null,u),zu._currentValue=b),hh(i,o),Br(i,o,m,u),o.child;case 6:return i===null&&at&&((i=u=Rt)&&(u=kL(u,o.pendingProps,Qn),u!==null?(o.stateNode=u,Ir=o,Rt=null,i=!0):i=!1),i||Gi(o)),null;case 13:return yN(i,o,u);case 4:return je(o,o.stateNode.containerInfo),m=o.pendingProps,i===null?o.child=ao(o,null,m,u):Br(i,o,m,u),o.child;case 11:return lN(i,o,o.type,o.pendingProps,u);case 7:return Br(i,o,o.pendingProps,u),o.child;case 8:return Br(i,o,o.pendingProps.children,u),o.child;case 12:return Br(i,o,o.pendingProps.children,u),o.child;case 10:return m=o.pendingProps,Yi(o,o.type,m.value),Br(i,o,m.children,u),o.child;case 9:return b=o.type._context,m=o.pendingProps.children,eo(o),b=Lr(b),m=m(b),o.flags|=1,Br(i,o,m,u),o.child;case 14:return cN(i,o,o.type,o.pendingProps,u);case 15:return uN(i,o,o.type,o.pendingProps,u);case 19:return bN(i,o,u);case 31:return J3(i,o,u);case 22:return dN(i,o,u,o.pendingProps);case 24:return eo(o),m=Lr(ar),i===null?(b=jy(),b===null&&(b=Pt,w=xy(),b.pooledCache=w,w.refCount++,w!==null&&(b.pooledCacheLanes|=u),b=w),o.memoizedState={parent:m,cache:b},_y(o),Yi(o,ar,b)):((i.lanes&u)!==0&&(Ny(i,o),wu(o,null,null,u),xu()),b=i.memoizedState,w=o.memoizedState,b.parent!==m?(b={parent:m,cache:m},o.memoizedState=b,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=b),Yi(o,ar,m)):(m=w.cache,Yi(o,ar,m),m!==b.cache&&by(o,[ar],u,!0))),Br(i,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function ri(i){i.flags|=4}function sv(i,o,u,m,b){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(b&335544128)===b)if(i.stateNode.complete)i.flags|=8192;else if(VN())i.flags|=8192;else throw no=Zf,Sy}else i.flags&=-16777217}function wN(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!IE(o))if(VN())i.flags|=8192;else throw no=Zf,Sy}function ph(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?eS():536870912,i.lanes|=o,Il|=o)}function Ou(i,o){if(!at)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function It(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,m=0;if(o)for(var b=i.child;b!==null;)u|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=i,b=b.sibling;else for(b=i.child;b!==null;)u|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=i,b=b.sibling;return i.subtreeFlags|=m,i.childLanes=u,o}function tL(i,o,u){var m=o.pendingProps;switch(my(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(o),null;case 1:return It(o),null;case 3:return u=o.stateNode,m=null,i!==null&&(m=i.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),Za(ar),J(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(Sl(o)?ri(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,gy())),It(o),null;case 26:var b=o.type,w=o.memoizedState;return i===null?(ri(o),w!==null?(It(o),wN(o,w)):(It(o),sv(o,b,null,m,u))):w?w!==i.memoizedState?(ri(o),It(o),wN(o,w)):(It(o),o.flags&=-16777217):(i=i.memoizedProps,i!==m&&ri(o),It(o),sv(o,b,i,m,u)),null;case 27:if(Ce(o),u=be.current,b=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==m&&ri(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return It(o),null}i=ne.current,Sl(o)?e_(o):(i=AE(b,m,u),o.stateNode=i,ri(o))}return It(o),null;case 5:if(Ce(o),b=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==m&&ri(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return It(o),null}if(w=ne.current,Sl(o))e_(o);else{var A=Ph(be.current);switch(w){case 1:w=A.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:w=A.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":w=A.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":w=A.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":w=A.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof m.is=="string"?A.createElement("select",{is:m.is}):A.createElement("select"),m.multiple?w.multiple=!0:m.size&&(w.size=m.size);break;default:w=typeof m.is=="string"?A.createElement(b,{is:m.is}):A.createElement(b)}}w[Rr]=o,w[sn]=m;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)w.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=w;e:switch($r(w,b,m),b){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&ri(o)}}return It(o),sv(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,u),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==m&&ri(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(n(166));if(i=be.current,Sl(o)){if(i=o.stateNode,u=o.memoizedProps,m=null,b=Ir,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}i[Rr]=o,i=!!(i.nodeValue===u||m!==null&&m.suppressHydrationWarning===!0||yE(i.nodeValue,u)),i||Gi(o,!0)}else i=Ph(i).createTextNode(m),i[Rr]=o,o.stateNode=i}return It(o),null;case 31:if(u=o.memoizedState,i===null||i.memoizedState!==null){if(m=Sl(o),u!==null){if(i===null){if(!m)throw Error(n(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[Rr]=o}else Zs(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;It(o),i=!1}else u=gy(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=u),i=!0;if(!i)return o.flags&256?(Nn(o),o):(Nn(o),null);if((o.flags&128)!==0)throw Error(n(558))}return It(o),null;case 13:if(m=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(b=Sl(o),m!==null&&m.dehydrated!==null){if(i===null){if(!b)throw Error(n(318));if(b=o.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[Rr]=o}else Zs(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;It(o),b=!1}else b=gy(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=b),b=!0;if(!b)return o.flags&256?(Nn(o),o):(Nn(o),null)}return Nn(o),(o.flags&128)!==0?(o.lanes=u,o):(u=m!==null,i=i!==null&&i.memoizedState!==null,u&&(m=o.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool),w=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(w=m.memoizedState.cachePool.pool),w!==b&&(m.flags|=2048)),u!==i&&u&&(o.child.flags|=8192),ph(o,o.updateQueue),It(o),null);case 4:return J(),i===null&&Av(o.stateNode.containerInfo),It(o),null;case 10:return Za(o.type),It(o),null;case 19:if(B(rr),m=o.memoizedState,m===null)return It(o),null;if(b=(o.flags&128)!==0,w=m.rendering,w===null)if(b)Ou(m,!1);else{if(Yt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(w=rh(i),w!==null){for(o.flags|=128,Ou(m,!1),i=w.updateQueue,o.updateQueue=i,ph(o,i),o.subtreeFlags=0,i=u,u=o.child;u!==null;)YS(u,i),u=u.sibling;return Y(rr,rr.current&1|2),at&&Wa(o,m.treeForkCount),o.child}i=i.sibling}m.tail!==null&&ye()>xh&&(o.flags|=128,b=!0,Ou(m,!1),o.lanes=4194304)}else{if(!b)if(i=rh(w),i!==null){if(o.flags|=128,b=!0,i=i.updateQueue,o.updateQueue=i,ph(o,i),Ou(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!at)return It(o),null}else 2*ye()-m.renderingStartTime>xh&&u!==536870912&&(o.flags|=128,b=!0,Ou(m,!1),o.lanes=4194304);m.isBackwards?(w.sibling=o.child,o.child=w):(i=m.last,i!==null?i.sibling=w:o.child=w,m.last=w)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=ye(),i.sibling=null,u=rr.current,Y(rr,b?u&1|2:u&1),at&&Wa(o,m.treeForkCount),i):(It(o),null);case 22:case 23:return Nn(o),Cy(),m=o.memoizedState!==null,i!==null?i.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(u&536870912)!==0&&(o.flags&128)===0&&(It(o),o.subtreeFlags&6&&(o.flags|=8192)):It(o),u=o.updateQueue,u!==null&&ph(o,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==u&&(o.flags|=2048),i!==null&&B(to),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Za(ar),It(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function rL(i,o){switch(my(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Za(ar),J(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return Ce(o),null;case 31:if(o.memoizedState!==null){if(Nn(o),o.alternate===null)throw Error(n(340));Zs()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(Nn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Zs()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return B(rr),null;case 4:return J(),null;case 10:return Za(o.type),null;case 22:case 23:return Nn(o),Cy(),i!==null&&B(to),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Za(ar),null;case 25:return null;default:return null}}function jN(i,o){switch(my(o),o.tag){case 3:Za(ar),J();break;case 26:case 27:case 5:Ce(o);break;case 4:J();break;case 31:o.memoizedState!==null&&Nn(o);break;case 13:Nn(o);break;case 19:B(rr);break;case 10:Za(o.type);break;case 22:case 23:Nn(o),Cy(),i!==null&&B(to);break;case 24:Za(ar)}}function Au(i,o){try{var u=o.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var b=m.next;u=b;do{if((u.tag&i)===i){m=void 0;var w=u.create,A=u.inst;m=w(),A.destroy=m}u=u.next}while(u!==b)}}catch(k){jt(o,o.return,k)}}function ts(i,o,u){try{var m=o.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var w=b.next;m=w;do{if((m.tag&i)===i){var A=m.inst,k=A.destroy;if(k!==void 0){A.destroy=void 0,b=o;var L=u,ee=k;try{ee()}catch(ce){jt(b,L,ce)}}}m=m.next}while(m!==w)}}catch(ce){jt(o,o.return,ce)}}function SN(i){var o=i.updateQueue;if(o!==null){var u=i.stateNode;try{h_(o,u)}catch(m){jt(i,i.return,m)}}}function _N(i,o,u){u.props=so(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(m){jt(i,o,m)}}function Cu(i,o){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var m=i.stateNode;break;case 30:m=i.stateNode;break;default:m=i.stateNode}typeof u=="function"?i.refCleanup=u(m):u.current=m}}catch(b){jt(i,o,b)}}function Oa(i,o){var u=i.ref,m=i.refCleanup;if(u!==null)if(typeof m=="function")try{m()}catch(b){jt(i,o,b)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(b){jt(i,o,b)}else u.current=null}function NN(i){var o=i.type,u=i.memoizedProps,m=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&m.focus();break e;case"img":u.src?m.src=u.src:u.srcSet&&(m.srcset=u.srcSet)}}catch(b){jt(i,i.return,b)}}function ov(i,o,u){try{var m=i.stateNode;_L(m,i.type,u,o),m[sn]=o}catch(b){jt(i,i.return,b)}}function EN(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ls(i.type)||i.tag===4}function lv(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||EN(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ls(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function cv(i,o,u){var m=i.tag;if(m===5||m===6)i=i.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(i),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Va));else if(m!==4&&(m===27&&ls(i.type)&&(u=i.stateNode,o=null),i=i.child,i!==null))for(cv(i,o,u),i=i.sibling;i!==null;)cv(i,o,u),i=i.sibling}function gh(i,o,u){var m=i.tag;if(m===5||m===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(m!==4&&(m===27&&ls(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(gh(i,o,u),i=i.sibling;i!==null;)gh(i,o,u),i=i.sibling}function ON(i){var o=i.stateNode,u=i.memoizedProps;try{for(var m=i.type,b=o.attributes;b.length;)o.removeAttributeNode(b[0]);$r(o,m,u),o[Rr]=i,o[sn]=u}catch(w){jt(i,i.return,w)}}var ni=!1,or=!1,uv=!1,AN=typeof WeakSet=="function"?WeakSet:Set,Nr=null;function nL(i,o){if(i=i.containerInfo,kv=Lh,i=US(i),ny(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var b=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var A=0,k=-1,L=-1,ee=0,ce=0,fe=i,te=null;t:for(;;){for(var ae;fe!==u||b!==0&&fe.nodeType!==3||(k=A+b),fe!==w||m!==0&&fe.nodeType!==3||(L=A+m),fe.nodeType===3&&(A+=fe.nodeValue.length),(ae=fe.firstChild)!==null;)te=fe,fe=ae;for(;;){if(fe===i)break t;if(te===u&&++ee===b&&(k=A),te===w&&++ce===m&&(L=A),(ae=fe.nextSibling)!==null)break;fe=te,te=fe.parentNode}fe=ae}u=k===-1||L===-1?null:{start:k,end:L}}else u=null}u=u||{start:0,end:0}}else u=null;for(Tv={focusedElem:i,selectionRange:u},Lh=!1,Nr=o;Nr!==null;)if(o=Nr,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Nr=i;else for(;Nr!==null;){switch(o=Nr,w=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(u=0;u<i.length;u++)b=i[u],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&w!==null){i=void 0,u=o,b=w.memoizedProps,w=w.memoizedState,m=u.stateNode;try{var Pe=so(u.type,b);i=m.getSnapshotBeforeUpdate(Pe,w),m.__reactInternalSnapshotBeforeUpdate=i}catch(Be){jt(u,u.return,Be)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,u=i.nodeType,u===9)Rv(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Rv(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=o.sibling,i!==null){i.return=o.return,Nr=i;break}Nr=o.return}}function CN(i,o,u){var m=u.flags;switch(u.tag){case 0:case 11:case 15:ii(i,u),m&4&&Au(5,u);break;case 1:if(ii(i,u),m&4)if(i=u.stateNode,o===null)try{i.componentDidMount()}catch(A){jt(u,u.return,A)}else{var b=so(u.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(b,o,i.__reactInternalSnapshotBeforeUpdate)}catch(A){jt(u,u.return,A)}}m&64&&SN(u),m&512&&Cu(u,u.return);break;case 3:if(ii(i,u),m&64&&(i=u.updateQueue,i!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{h_(i,o)}catch(A){jt(u,u.return,A)}}break;case 27:o===null&&m&4&&ON(u);case 26:case 5:ii(i,u),o===null&&m&4&&NN(u),m&512&&Cu(u,u.return);break;case 12:ii(i,u);break;case 31:ii(i,u),m&4&&TN(i,u);break;case 13:ii(i,u),m&4&&DN(i,u),m&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=fL.bind(null,u),TL(i,u))));break;case 22:if(m=u.memoizedState!==null||ni,!m){o=o!==null&&o.memoizedState!==null||or,b=ni;var w=or;ni=m,(or=o)&&!w?si(i,u,(u.subtreeFlags&8772)!==0):ii(i,u),ni=b,or=w}break;case 30:break;default:ii(i,u)}}function PN(i){var o=i.alternate;o!==null&&(i.alternate=null,PN(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Ug(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Ut=null,ln=!1;function ai(i,o,u){for(u=u.child;u!==null;)kN(i,o,u),u=u.sibling}function kN(i,o,u){if(pr&&typeof pr.onCommitFiberUnmount=="function")try{pr.onCommitFiberUnmount(Mr,u)}catch{}switch(u.tag){case 26:or||Oa(u,o),ai(i,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:or||Oa(u,o);var m=Ut,b=ln;ls(u.type)&&(Ut=u.stateNode,ln=!1),ai(i,o,u),Bu(u.stateNode),Ut=m,ln=b;break;case 5:or||Oa(u,o);case 6:if(m=Ut,b=ln,Ut=null,ai(i,o,u),Ut=m,ln=b,Ut!==null)if(ln)try{(Ut.nodeType===9?Ut.body:Ut.nodeName==="HTML"?Ut.ownerDocument.body:Ut).removeChild(u.stateNode)}catch(w){jt(u,o,w)}else try{Ut.removeChild(u.stateNode)}catch(w){jt(u,o,w)}break;case 18:Ut!==null&&(ln?(i=Ut,SE(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),Kl(i)):SE(Ut,u.stateNode));break;case 4:m=Ut,b=ln,Ut=u.stateNode.containerInfo,ln=!0,ai(i,o,u),Ut=m,ln=b;break;case 0:case 11:case 14:case 15:ts(2,u,o),or||ts(4,u,o),ai(i,o,u);break;case 1:or||(Oa(u,o),m=u.stateNode,typeof m.componentWillUnmount=="function"&&_N(u,o,m)),ai(i,o,u);break;case 21:ai(i,o,u);break;case 22:or=(m=or)||u.memoizedState!==null,ai(i,o,u),or=m;break;default:ai(i,o,u)}}function TN(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Kl(i)}catch(u){jt(o,o.return,u)}}}function DN(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Kl(i)}catch(u){jt(o,o.return,u)}}function aL(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new AN),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new AN),o;default:throw Error(n(435,i.tag))}}function yh(i,o){var u=aL(i);o.forEach(function(m){if(!u.has(m)){u.add(m);var b=hL.bind(null,i,m);m.then(b,b)}})}function cn(i,o){var u=o.deletions;if(u!==null)for(var m=0;m<u.length;m++){var b=u[m],w=i,A=o,k=A;e:for(;k!==null;){switch(k.tag){case 27:if(ls(k.type)){Ut=k.stateNode,ln=!1;break e}break;case 5:Ut=k.stateNode,ln=!1;break e;case 3:case 4:Ut=k.stateNode.containerInfo,ln=!0;break e}k=k.return}if(Ut===null)throw Error(n(160));kN(w,A,b),Ut=null,ln=!1,w=b.alternate,w!==null&&(w.return=null),b.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)MN(o,i),o=o.sibling}var la=null;function MN(i,o){var u=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:cn(o,i),un(i),m&4&&(ts(3,i,i.return),Au(3,i),ts(5,i,i.return));break;case 1:cn(o,i),un(i),m&512&&(or||u===null||Oa(u,u.return)),m&64&&ni&&(i=i.updateQueue,i!==null&&(m=i.callbacks,m!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?m:u.concat(m))));break;case 26:var b=la;if(cn(o,i),un(i),m&512&&(or||u===null||Oa(u,u.return)),m&4){var w=u!==null?u.memoizedState:null;if(m=i.memoizedState,u===null)if(m===null)if(i.stateNode===null){e:{m=i.type,u=i.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":w=b.getElementsByTagName("title")[0],(!w||w[ru]||w[Rr]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=b.createElement(m),b.head.insertBefore(w,b.querySelector("head > title"))),$r(w,m,u),w[Rr]=i,_r(w),m=w;break e;case"link":var A=ME("link","href",b).get(m+(u.href||""));if(A){for(var k=0;k<A.length;k++)if(w=A[k],w.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&w.getAttribute("rel")===(u.rel==null?null:u.rel)&&w.getAttribute("title")===(u.title==null?null:u.title)&&w.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){A.splice(k,1);break t}}w=b.createElement(m),$r(w,m,u),b.head.appendChild(w);break;case"meta":if(A=ME("meta","content",b).get(m+(u.content||""))){for(k=0;k<A.length;k++)if(w=A[k],w.getAttribute("content")===(u.content==null?null:""+u.content)&&w.getAttribute("name")===(u.name==null?null:u.name)&&w.getAttribute("property")===(u.property==null?null:u.property)&&w.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&w.getAttribute("charset")===(u.charSet==null?null:u.charSet)){A.splice(k,1);break t}}w=b.createElement(m),$r(w,m,u),b.head.appendChild(w);break;default:throw Error(n(468,m))}w[Rr]=i,_r(w),m=w}i.stateNode=m}else RE(b,i.type,i.stateNode);else i.stateNode=DE(b,m,i.memoizedProps);else w!==m?(w===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):w.count--,m===null?RE(b,i.type,i.stateNode):DE(b,m,i.memoizedProps)):m===null&&i.stateNode!==null&&ov(i,i.memoizedProps,u.memoizedProps)}break;case 27:cn(o,i),un(i),m&512&&(or||u===null||Oa(u,u.return)),u!==null&&m&4&&ov(i,i.memoizedProps,u.memoizedProps);break;case 5:if(cn(o,i),un(i),m&512&&(or||u===null||Oa(u,u.return)),i.flags&32){b=i.stateNode;try{hl(b,"")}catch(Pe){jt(i,i.return,Pe)}}m&4&&i.stateNode!=null&&(b=i.memoizedProps,ov(i,b,u!==null?u.memoizedProps:b)),m&1024&&(uv=!0);break;case 6:if(cn(o,i),un(i),m&4){if(i.stateNode===null)throw Error(n(162));m=i.memoizedProps,u=i.stateNode;try{u.nodeValue=m}catch(Pe){jt(i,i.return,Pe)}}break;case 3:if(Dh=null,b=la,la=kh(o.containerInfo),cn(o,i),la=b,un(i),m&4&&u!==null&&u.memoizedState.isDehydrated)try{Kl(o.containerInfo)}catch(Pe){jt(i,i.return,Pe)}uv&&(uv=!1,RN(i));break;case 4:m=la,la=kh(i.stateNode.containerInfo),cn(o,i),un(i),la=m;break;case 12:cn(o,i),un(i);break;case 31:cn(o,i),un(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,yh(i,m)));break;case 13:cn(o,i),un(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(bh=ye()),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,yh(i,m)));break;case 22:b=i.memoizedState!==null;var L=u!==null&&u.memoizedState!==null,ee=ni,ce=or;if(ni=ee||b,or=ce||L,cn(o,i),or=ce,ni=ee,un(i),m&8192)e:for(o=i.stateNode,o._visibility=b?o._visibility&-2:o._visibility|1,b&&(u===null||L||ni||or||oo(i)),u=null,o=i;;){if(o.tag===5||o.tag===26){if(u===null){L=u=o;try{if(w=L.stateNode,b)A=w.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{k=L.stateNode;var fe=L.memoizedProps.style,te=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;k.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Pe){jt(L,L.return,Pe)}}}else if(o.tag===6){if(u===null){L=o;try{L.stateNode.nodeValue=b?"":L.memoizedProps}catch(Pe){jt(L,L.return,Pe)}}}else if(o.tag===18){if(u===null){L=o;try{var ae=L.stateNode;b?_E(ae,!0):_E(L.stateNode,!1)}catch(Pe){jt(L,L.return,Pe)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=i.updateQueue,m!==null&&(u=m.retryQueue,u!==null&&(m.retryQueue=null,yh(i,u))));break;case 19:cn(o,i),un(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,yh(i,m)));break;case 30:break;case 21:break;default:cn(o,i),un(i)}}function un(i){var o=i.flags;if(o&2){try{for(var u,m=i.return;m!==null;){if(EN(m)){u=m;break}m=m.return}if(u==null)throw Error(n(160));switch(u.tag){case 27:var b=u.stateNode,w=lv(i);gh(i,w,b);break;case 5:var A=u.stateNode;u.flags&32&&(hl(A,""),u.flags&=-33);var k=lv(i);gh(i,k,A);break;case 3:case 4:var L=u.stateNode.containerInfo,ee=lv(i);cv(i,ee,L);break;default:throw Error(n(161))}}catch(ce){jt(i,i.return,ce)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function RN(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;RN(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function ii(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)CN(i,o.alternate,o),o=o.sibling}function oo(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:ts(4,o,o.return),oo(o);break;case 1:Oa(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&_N(o,o.return,u),oo(o);break;case 27:Bu(o.stateNode);case 26:case 5:Oa(o,o.return),oo(o);break;case 22:o.memoizedState===null&&oo(o);break;case 30:oo(o);break;default:oo(o)}i=i.sibling}}function si(i,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,b=i,w=o,A=w.flags;switch(w.tag){case 0:case 11:case 15:si(b,w,u),Au(4,w);break;case 1:if(si(b,w,u),m=w,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(ee){jt(m,m.return,ee)}if(m=w,b=m.updateQueue,b!==null){var k=m.stateNode;try{var L=b.shared.hiddenCallbacks;if(L!==null)for(b.shared.hiddenCallbacks=null,b=0;b<L.length;b++)f_(L[b],k)}catch(ee){jt(m,m.return,ee)}}u&&A&64&&SN(w),Cu(w,w.return);break;case 27:ON(w);case 26:case 5:si(b,w,u),u&&m===null&&A&4&&NN(w),Cu(w,w.return);break;case 12:si(b,w,u);break;case 31:si(b,w,u),u&&A&4&&TN(b,w);break;case 13:si(b,w,u),u&&A&4&&DN(b,w);break;case 22:w.memoizedState===null&&si(b,w,u),Cu(w,w.return);break;case 30:break;default:si(b,w,u)}o=o.sibling}}function dv(i,o){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&pu(u))}function fv(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&pu(i))}function ca(i,o,u,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)IN(i,o,u,m),o=o.sibling}function IN(i,o,u,m){var b=o.flags;switch(o.tag){case 0:case 11:case 15:ca(i,o,u,m),b&2048&&Au(9,o);break;case 1:ca(i,o,u,m);break;case 3:ca(i,o,u,m),b&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&pu(i)));break;case 12:if(b&2048){ca(i,o,u,m),i=o.stateNode;try{var w=o.memoizedProps,A=w.id,k=w.onPostCommit;typeof k=="function"&&k(A,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(L){jt(o,o.return,L)}}else ca(i,o,u,m);break;case 31:ca(i,o,u,m);break;case 13:ca(i,o,u,m);break;case 23:break;case 22:w=o.stateNode,A=o.alternate,o.memoizedState!==null?w._visibility&2?ca(i,o,u,m):Pu(i,o):w._visibility&2?ca(i,o,u,m):(w._visibility|=2,Dl(i,o,u,m,(o.subtreeFlags&10256)!==0||!1)),b&2048&&dv(A,o);break;case 24:ca(i,o,u,m),b&2048&&fv(o.alternate,o);break;default:ca(i,o,u,m)}}function Dl(i,o,u,m,b){for(b=b&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var w=i,A=o,k=u,L=m,ee=A.flags;switch(A.tag){case 0:case 11:case 15:Dl(w,A,k,L,b),Au(8,A);break;case 23:break;case 22:var ce=A.stateNode;A.memoizedState!==null?ce._visibility&2?Dl(w,A,k,L,b):Pu(w,A):(ce._visibility|=2,Dl(w,A,k,L,b)),b&&ee&2048&&dv(A.alternate,A);break;case 24:Dl(w,A,k,L,b),b&&ee&2048&&fv(A.alternate,A);break;default:Dl(w,A,k,L,b)}o=o.sibling}}function Pu(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=i,m=o,b=m.flags;switch(m.tag){case 22:Pu(u,m),b&2048&&dv(m.alternate,m);break;case 24:Pu(u,m),b&2048&&fv(m.alternate,m);break;default:Pu(u,m)}o=o.sibling}}var ku=8192;function Ml(i,o,u){if(i.subtreeFlags&ku)for(i=i.child;i!==null;)LN(i,o,u),i=i.sibling}function LN(i,o,u){switch(i.tag){case 26:Ml(i,o,u),i.flags&ku&&i.memoizedState!==null&&KL(u,la,i.memoizedState,i.memoizedProps);break;case 5:Ml(i,o,u);break;case 3:case 4:var m=la;la=kh(i.stateNode.containerInfo),Ml(i,o,u),la=m;break;case 22:i.memoizedState===null&&(m=i.alternate,m!==null&&m.memoizedState!==null?(m=ku,ku=16777216,Ml(i,o,u),ku=m):Ml(i,o,u));break;default:Ml(i,o,u)}}function BN(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function Tu(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var m=o[u];Nr=m,UN(m,i)}BN(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)$N(i),i=i.sibling}function $N(i){switch(i.tag){case 0:case 11:case 15:Tu(i),i.flags&2048&&ts(9,i,i.return);break;case 3:Tu(i);break;case 12:Tu(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,vh(i)):Tu(i);break;default:Tu(i)}}function vh(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var m=o[u];Nr=m,UN(m,i)}BN(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:ts(8,o,o.return),vh(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,vh(o));break;default:vh(o)}i=i.sibling}}function UN(i,o){for(;Nr!==null;){var u=Nr;switch(u.tag){case 0:case 11:case 15:ts(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var m=u.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:pu(u.memoizedState.cache)}if(m=u.child,m!==null)m.return=u,Nr=m;else e:for(u=i;Nr!==null;){m=Nr;var b=m.sibling,w=m.return;if(PN(m),m===u){Nr=null;break e}if(b!==null){b.return=w,Nr=b;break e}Nr=w}}}var iL={getCacheForType:function(i){var o=Lr(ar),u=o.data.get(i);return u===void 0&&(u=i(),o.data.set(i,u)),u},cacheSignal:function(){return Lr(ar).controller.signal}},sL=typeof WeakMap=="function"?WeakMap:Map,gt=0,Pt=null,et=null,rt=0,wt=0,En=null,rs=!1,Rl=!1,hv=!1,oi=0,Yt=0,ns=0,lo=0,mv=0,On=0,Il=0,Du=null,dn=null,pv=!1,bh=0,zN=0,xh=1/0,wh=null,as=null,gr=0,is=null,Ll=null,li=0,gv=0,yv=null,qN=null,Mu=0,vv=null;function An(){return(gt&2)!==0&&rt!==0?rt&-rt:I.T!==null?_v():aS()}function FN(){if(On===0)if((rt&536870912)===0||at){var i=Cf;Cf<<=1,(Cf&3932160)===0&&(Cf=262144),On=i}else On=536870912;return i=_n.current,i!==null&&(i.flags|=32),On}function fn(i,o,u){(i===Pt&&(wt===2||wt===9)||i.cancelPendingCommit!==null)&&(Bl(i,0),ss(i,rt,On,!1)),tu(i,u),((gt&2)===0||i!==Pt)&&(i===Pt&&((gt&2)===0&&(lo|=u),Yt===4&&ss(i,rt,On,!1)),Aa(i))}function KN(i,o,u){if((gt&6)!==0)throw Error(n(327));var m=!u&&(o&127)===0&&(o&i.expiredLanes)===0||eu(i,o),b=m?cL(i,o):xv(i,o,!0),w=m;do{if(b===0){Rl&&!m&&ss(i,o,0,!1);break}else{if(u=i.current.alternate,w&&!oL(u)){b=xv(i,o,!1),w=!1;continue}if(b===2){if(w=o,i.errorRecoveryDisabledLanes&w)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var k=i;b=Du;var L=k.current.memoizedState.isDehydrated;if(L&&(Bl(k,A).flags|=256),A=xv(k,A,!1),A!==2){if(hv&&!L){k.errorRecoveryDisabledLanes|=w,lo|=w,b=4;break e}w=dn,dn=b,w!==null&&(dn===null?dn=w:dn.push.apply(dn,w))}b=A}if(w=!1,b!==2)continue}}if(b===1){Bl(i,0),ss(i,o,0,!0);break}e:{switch(m=i,w=b,w){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:ss(m,o,On,!rs);break e;case 2:dn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(b=bh+300-ye(),10<b)){if(ss(m,o,On,!rs),kf(m,0,!0)!==0)break e;li=o,m.timeoutHandle=wE(QN.bind(null,m,u,dn,wh,pv,o,On,lo,Il,rs,w,"Throttled",-0,0),b);break e}QN(m,u,dn,wh,pv,o,On,lo,Il,rs,w,null,-0,0)}}break}while(!0);Aa(i)}function QN(i,o,u,m,b,w,A,k,L,ee,ce,fe,te,ae){if(i.timeoutHandle=-1,fe=o.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Va},LN(o,w,fe);var Pe=(w&62914560)===w?bh-ye():(w&4194048)===w?zN-ye():0;if(Pe=QL(fe,Pe),Pe!==null){li=w,i.cancelPendingCommit=Pe(JN.bind(null,i,o,w,u,m,b,A,k,L,ce,fe,null,te,ae)),ss(i,w,A,!ee);return}}JN(i,o,w,u,m,b,A,k,L)}function oL(i){for(var o=i;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var m=0;m<u.length;m++){var b=u[m],w=b.getSnapshot;b=b.value;try{if(!jn(w(),b))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ss(i,o,u,m){o&=~mv,o&=~lo,i.suspendedLanes|=o,i.pingedLanes&=~o,m&&(i.warmLanes|=o),m=i.expirationTimes;for(var b=o;0<b;){var w=31-wn(b),A=1<<w;m[w]=-1,b&=~A}u!==0&&tS(i,u,o)}function jh(){return(gt&6)===0?(Ru(0),!1):!0}function bv(){if(et!==null){if(wt===0)var i=et.return;else i=et,Xa=Js=null,Ry(i),Al=null,yu=0,i=et;for(;i!==null;)jN(i.alternate,i),i=i.return;et=null}}function Bl(i,o){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,OL(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),li=0,bv(),Pt=i,et=u=Ya(i.current,null),rt=o,wt=0,En=null,rs=!1,Rl=eu(i,o),hv=!1,Il=On=mv=lo=ns=Yt=0,dn=Du=null,pv=!1,(o&8)!==0&&(o|=o&32);var m=i.entangledLanes;if(m!==0)for(i=i.entanglements,m&=o;0<m;){var b=31-wn(m),w=1<<b;o|=i[b],m&=~w}return oi=o,Ff(),u}function HN(i,o){Ke=null,I.H=Nu,o===Ol||o===Xf?(o=l_(),wt=3):o===Sy?(o=l_(),wt=4):wt=o===Xy?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,En=o,et===null&&(Yt=1,dh(i,qn(o,i.current)))}function VN(){var i=_n.current;return i===null?!0:(rt&4194048)===rt?Hn===null:(rt&62914560)===rt||(rt&536870912)!==0?i===Hn:!1}function GN(){var i=I.H;return I.H=Nu,i===null?Nu:i}function YN(){var i=I.A;return I.A=iL,i}function Sh(){Yt=4,rs||(rt&4194048)!==rt&&_n.current!==null||(Rl=!0),(ns&134217727)===0&&(lo&134217727)===0||Pt===null||ss(Pt,rt,On,!1)}function xv(i,o,u){var m=gt;gt|=2;var b=GN(),w=YN();(Pt!==i||rt!==o)&&(wh=null,Bl(i,o)),o=!1;var A=Yt;e:do try{if(wt!==0&&et!==null){var k=et,L=En;switch(wt){case 8:bv(),A=6;break e;case 3:case 2:case 9:case 6:_n.current===null&&(o=!0);var ee=wt;if(wt=0,En=null,$l(i,k,L,ee),u&&Rl){A=0;break e}break;default:ee=wt,wt=0,En=null,$l(i,k,L,ee)}}lL(),A=Yt;break}catch(ce){HN(i,ce)}while(!0);return o&&i.shellSuspendCounter++,Xa=Js=null,gt=m,I.H=b,I.A=w,et===null&&(Pt=null,rt=0,Ff()),A}function lL(){for(;et!==null;)WN(et)}function cL(i,o){var u=gt;gt|=2;var m=GN(),b=YN();Pt!==i||rt!==o?(wh=null,xh=ye()+500,Bl(i,o)):Rl=eu(i,o);e:do try{if(wt!==0&&et!==null){o=et;var w=En;t:switch(wt){case 1:wt=0,En=null,$l(i,o,w,1);break;case 2:case 9:if(s_(w)){wt=0,En=null,XN(o);break}o=function(){wt!==2&&wt!==9||Pt!==i||(wt=7),Aa(i)},w.then(o,o);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:s_(w)?(wt=0,En=null,XN(o)):(wt=0,En=null,$l(i,o,w,7));break;case 5:var A=null;switch(et.tag){case 26:A=et.memoizedState;case 5:case 27:var k=et;if(A?IE(A):k.stateNode.complete){wt=0,En=null;var L=k.sibling;if(L!==null)et=L;else{var ee=k.return;ee!==null?(et=ee,_h(ee)):et=null}break t}}wt=0,En=null,$l(i,o,w,5);break;case 6:wt=0,En=null,$l(i,o,w,6);break;case 8:bv(),Yt=6;break e;default:throw Error(n(462))}}uL();break}catch(ce){HN(i,ce)}while(!0);return Xa=Js=null,I.H=m,I.A=b,gt=u,et!==null?0:(Pt=null,rt=0,Ff(),Yt)}function uL(){for(;et!==null&&!ve();)WN(et)}function WN(i){var o=xN(i.alternate,i,oi);i.memoizedProps=i.pendingProps,o===null?_h(i):et=o}function XN(i){var o=i,u=o.alternate;switch(o.tag){case 15:case 0:o=mN(u,o,o.pendingProps,o.type,void 0,rt);break;case 11:o=mN(u,o,o.pendingProps,o.type.render,o.ref,rt);break;case 5:Ry(o);default:jN(u,o),o=et=YS(o,oi),o=xN(u,o,oi)}i.memoizedProps=i.pendingProps,o===null?_h(i):et=o}function $l(i,o,u,m){Xa=Js=null,Ry(o),Al=null,yu=0;var b=o.return;try{if(Z3(i,b,o,u,rt)){Yt=1,dh(i,qn(u,i.current)),et=null;return}}catch(w){if(b!==null)throw et=b,w;Yt=1,dh(i,qn(u,i.current)),et=null;return}o.flags&32768?(at||m===1?i=!0:Rl||(rt&536870912)!==0?i=!1:(rs=i=!0,(m===2||m===9||m===3||m===6)&&(m=_n.current,m!==null&&m.tag===13&&(m.flags|=16384))),ZN(o,i)):_h(o)}function _h(i){var o=i;do{if((o.flags&32768)!==0){ZN(o,rs);return}i=o.return;var u=tL(o.alternate,o,oi);if(u!==null){et=u;return}if(o=o.sibling,o!==null){et=o;return}et=o=i}while(o!==null);Yt===0&&(Yt=5)}function ZN(i,o){do{var u=rL(i.alternate,i);if(u!==null){u.flags&=32767,et=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(i=i.sibling,i!==null)){et=i;return}et=i=u}while(i!==null);Yt=6,et=null}function JN(i,o,u,m,b,w,A,k,L){i.cancelPendingCommit=null;do Nh();while(gr!==0);if((gt&6)!==0)throw Error(n(327));if(o!==null){if(o===i.current)throw Error(n(177));if(w=o.lanes|o.childLanes,w|=ly,F5(i,u,w,A,k,L),i===Pt&&(et=Pt=null,rt=0),Ll=o,is=i,li=u,gv=w,yv=b,qN=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,mL(hr,function(){return aE(),null})):(i.callbackNode=null,i.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=I.T,I.T=null,b=H.p,H.p=2,A=gt,gt|=4;try{nL(i,o,u)}finally{gt=A,H.p=b,I.T=m}}gr=1,eE(),tE(),rE()}}function eE(){if(gr===1){gr=0;var i=is,o=Ll,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=I.T,I.T=null;var m=H.p;H.p=2;var b=gt;gt|=4;try{MN(o,i);var w=Tv,A=US(i.containerInfo),k=w.focusedElem,L=w.selectionRange;if(A!==k&&k&&k.ownerDocument&&$S(k.ownerDocument.documentElement,k)){if(L!==null&&ny(k)){var ee=L.start,ce=L.end;if(ce===void 0&&(ce=ee),"selectionStart"in k)k.selectionStart=ee,k.selectionEnd=Math.min(ce,k.value.length);else{var fe=k.ownerDocument||document,te=fe&&fe.defaultView||window;if(te.getSelection){var ae=te.getSelection(),Pe=k.textContent.length,Be=Math.min(L.start,Pe),Ot=L.end===void 0?Be:Math.min(L.end,Pe);!ae.extend&&Be>Ot&&(A=Ot,Ot=Be,Be=A);var Q=BS(k,Be),q=BS(k,Ot);if(Q&&q&&(ae.rangeCount!==1||ae.anchorNode!==Q.node||ae.anchorOffset!==Q.offset||ae.focusNode!==q.node||ae.focusOffset!==q.offset)){var Z=fe.createRange();Z.setStart(Q.node,Q.offset),ae.removeAllRanges(),Be>Ot?(ae.addRange(Z),ae.extend(q.node,q.offset)):(Z.setEnd(q.node,q.offset),ae.addRange(Z))}}}}for(fe=[],ae=k;ae=ae.parentNode;)ae.nodeType===1&&fe.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<fe.length;k++){var ue=fe[k];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Lh=!!kv,Tv=kv=null}finally{gt=b,H.p=m,I.T=u}}i.current=o,gr=2}}function tE(){if(gr===2){gr=0;var i=is,o=Ll,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=I.T,I.T=null;var m=H.p;H.p=2;var b=gt;gt|=4;try{CN(i,o.alternate,o)}finally{gt=b,H.p=m,I.T=u}}gr=3}}function rE(){if(gr===4||gr===3){gr=0,V();var i=is,o=Ll,u=li,m=qN;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?gr=5:(gr=0,Ll=is=null,nE(i,i.pendingLanes));var b=i.pendingLanes;if(b===0&&(as=null),Bg(u),o=o.stateNode,pr&&typeof pr.onCommitFiberRoot=="function")try{pr.onCommitFiberRoot(Mr,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=I.T,b=H.p,H.p=2,I.T=null;try{for(var w=i.onRecoverableError,A=0;A<m.length;A++){var k=m[A];w(k.value,{componentStack:k.stack})}}finally{I.T=o,H.p=b}}(li&3)!==0&&Nh(),Aa(i),b=i.pendingLanes,(u&261930)!==0&&(b&42)!==0?i===vv?Mu++:(Mu=0,vv=i):Mu=0,Ru(0)}}function nE(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,pu(o)))}function Nh(){return eE(),tE(),rE(),aE()}function aE(){if(gr!==5)return!1;var i=is,o=gv;gv=0;var u=Bg(li),m=I.T,b=H.p;try{H.p=32>u?32:u,I.T=null,u=yv,yv=null;var w=is,A=li;if(gr=0,Ll=is=null,li=0,(gt&6)!==0)throw Error(n(331));var k=gt;if(gt|=4,$N(w.current),IN(w,w.current,A,u),gt=k,Ru(0,!1),pr&&typeof pr.onPostCommitFiberRoot=="function")try{pr.onPostCommitFiberRoot(Mr,w)}catch{}return!0}finally{H.p=b,I.T=m,nE(i,o)}}function iE(i,o,u){o=qn(u,o),o=Wy(i.stateNode,o,2),i=Zi(i,o,2),i!==null&&(tu(i,2),Aa(i))}function jt(i,o,u){if(i.tag===3)iE(i,i,u);else for(;o!==null;){if(o.tag===3){iE(o,i,u);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(as===null||!as.has(m))){i=qn(u,i),u=sN(2),m=Zi(o,u,2),m!==null&&(oN(u,m,o,i),tu(m,2),Aa(m));break}}o=o.return}}function wv(i,o,u){var m=i.pingCache;if(m===null){m=i.pingCache=new sL;var b=new Set;m.set(o,b)}else b=m.get(o),b===void 0&&(b=new Set,m.set(o,b));b.has(u)||(hv=!0,b.add(u),i=dL.bind(null,i,o,u),o.then(i,i))}function dL(i,o,u){var m=i.pingCache;m!==null&&m.delete(o),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,Pt===i&&(rt&u)===u&&(Yt===4||Yt===3&&(rt&62914560)===rt&&300>ye()-bh?(gt&2)===0&&Bl(i,0):mv|=u,Il===rt&&(Il=0)),Aa(i)}function sE(i,o){o===0&&(o=eS()),i=Ws(i,o),i!==null&&(tu(i,o),Aa(i))}function fL(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),sE(i,u)}function hL(i,o){var u=0;switch(i.tag){case 31:case 13:var m=i.stateNode,b=i.memoizedState;b!==null&&(u=b.retryLane);break;case 19:m=i.stateNode;break;case 22:m=i.stateNode._retryCache;break;default:throw Error(n(314))}m!==null&&m.delete(o),sE(i,u)}function mL(i,o){return re(i,o)}var Eh=null,Ul=null,jv=!1,Oh=!1,Sv=!1,os=0;function Aa(i){i!==Ul&&i.next===null&&(Ul===null?Eh=Ul=i:Ul=Ul.next=i),Oh=!0,jv||(jv=!0,gL())}function Ru(i,o){if(!Sv&&Oh){Sv=!0;do for(var u=!1,m=Eh;m!==null;){if(i!==0){var b=m.pendingLanes;if(b===0)var w=0;else{var A=m.suspendedLanes,k=m.pingedLanes;w=(1<<31-wn(42|i)+1)-1,w&=b&~(A&~k),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(u=!0,uE(m,w))}else w=rt,w=kf(m,m===Pt?w:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(w&3)===0||eu(m,w)||(u=!0,uE(m,w));m=m.next}while(u);Sv=!1}}function pL(){oE()}function oE(){Oh=jv=!1;var i=0;os!==0&&EL()&&(i=os);for(var o=ye(),u=null,m=Eh;m!==null;){var b=m.next,w=lE(m,o);w===0?(m.next=null,u===null?Eh=b:u.next=b,b===null&&(Ul=u)):(u=m,(i!==0||(w&3)!==0)&&(Oh=!0)),m=b}gr!==0&&gr!==5||Ru(i),os!==0&&(os=0)}function lE(i,o){for(var u=i.suspendedLanes,m=i.pingedLanes,b=i.expirationTimes,w=i.pendingLanes&-62914561;0<w;){var A=31-wn(w),k=1<<A,L=b[A];L===-1?((k&u)===0||(k&m)!==0)&&(b[A]=q5(k,o)):L<=o&&(i.expiredLanes|=k),w&=~k}if(o=Pt,u=rt,u=kf(i,i===o?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m=i.callbackNode,u===0||i===o&&(wt===2||wt===9)||i.cancelPendingCommit!==null)return m!==null&&m!==null&&He(m),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||eu(i,u)){if(o=u&-u,o===i.callbackPriority)return o;switch(m!==null&&He(m),Bg(u)){case 2:case 8:u=Sr;break;case 32:u=hr;break;case 268435456:u=mr;break;default:u=hr}return m=cE.bind(null,i),u=re(u,m),i.callbackPriority=o,i.callbackNode=u,o}return m!==null&&m!==null&&He(m),i.callbackPriority=2,i.callbackNode=null,2}function cE(i,o){if(gr!==0&&gr!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(Nh()&&i.callbackNode!==u)return null;var m=rt;return m=kf(i,i===Pt?m:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m===0?null:(KN(i,m,o),lE(i,ye()),i.callbackNode!=null&&i.callbackNode===u?cE.bind(null,i):null)}function uE(i,o){if(Nh())return null;KN(i,o,!0)}function gL(){AL(function(){(gt&6)!==0?re(Ze,pL):oE()})}function _v(){if(os===0){var i=Nl;i===0&&(i=Af,Af<<=1,(Af&261888)===0&&(Af=256)),os=i}return os}function dE(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Rf(""+i)}function fE(i,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,i.id&&u.setAttribute("form",i.id),o.parentNode.insertBefore(u,o),i=new FormData(i),u.parentNode.removeChild(u),i}function yL(i,o,u,m,b){if(o==="submit"&&u&&u.stateNode===b){var w=dE((b[sn]||null).action),A=m.submitter;A&&(o=(o=A[sn]||null)?dE(o.formAction):A.getAttribute("formAction"),o!==null&&(w=o,A=null));var k=new $f("action","action",null,m,b);i.push({event:k,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(os!==0){var L=A?fE(b,A):new FormData(b);Ky(u,{pending:!0,data:L,method:b.method,action:w},null,L)}}else typeof w=="function"&&(k.preventDefault(),L=A?fE(b,A):new FormData(b),Ky(u,{pending:!0,data:L,method:b.method,action:w},w,L))},currentTarget:b}]})}}for(var Nv=0;Nv<oy.length;Nv++){var Ev=oy[Nv],vL=Ev.toLowerCase(),bL=Ev[0].toUpperCase()+Ev.slice(1);oa(vL,"on"+bL)}oa(FS,"onAnimationEnd"),oa(KS,"onAnimationIteration"),oa(QS,"onAnimationStart"),oa("dblclick","onDoubleClick"),oa("focusin","onFocus"),oa("focusout","onBlur"),oa(R3,"onTransitionRun"),oa(I3,"onTransitionStart"),oa(L3,"onTransitionCancel"),oa(HS,"onTransitionEnd"),dl("onMouseEnter",["mouseout","mouseover"]),dl("onMouseLeave",["mouseout","mouseover"]),dl("onPointerEnter",["pointerout","pointerover"]),dl("onPointerLeave",["pointerout","pointerover"]),Hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Iu));function hE(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var m=i[u],b=m.event;m=m.listeners;e:{var w=void 0;if(o)for(var A=m.length-1;0<=A;A--){var k=m[A],L=k.instance,ee=k.currentTarget;if(k=k.listener,L!==w&&b.isPropagationStopped())break e;w=k,b.currentTarget=ee;try{w(b)}catch(ce){qf(ce)}b.currentTarget=null,w=L}else for(A=0;A<m.length;A++){if(k=m[A],L=k.instance,ee=k.currentTarget,k=k.listener,L!==w&&b.isPropagationStopped())break e;w=k,b.currentTarget=ee;try{w(b)}catch(ce){qf(ce)}b.currentTarget=null,w=L}}}}function tt(i,o){var u=o[$g];u===void 0&&(u=o[$g]=new Set);var m=i+"__bubble";u.has(m)||(mE(o,i,2,!1),u.add(m))}function Ov(i,o,u){var m=0;o&&(m|=4),mE(u,i,m,o)}var Ah="_reactListening"+Math.random().toString(36).slice(2);function Av(i){if(!i[Ah]){i[Ah]=!0,oS.forEach(function(u){u!=="selectionchange"&&(xL.has(u)||Ov(u,!1,i),Ov(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Ah]||(o[Ah]=!0,Ov("selectionchange",!1,o))}}function mE(i,o,u,m){switch(FE(o)){case 2:var b=GL;break;case 8:b=YL;break;default:b=Fv}u=b.bind(null,o,u,i),b=void 0,!Gg||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(b=!0),m?b!==void 0?i.addEventListener(o,u,{capture:!0,passive:b}):i.addEventListener(o,u,!0):b!==void 0?i.addEventListener(o,u,{passive:b}):i.addEventListener(o,u,!1)}function Cv(i,o,u,m,b){var w=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var A=m.tag;if(A===3||A===4){var k=m.stateNode.containerInfo;if(k===b)break;if(A===4)for(A=m.return;A!==null;){var L=A.tag;if((L===3||L===4)&&A.stateNode.containerInfo===b)return;A=A.return}for(;k!==null;){if(A=ll(k),A===null)return;if(L=A.tag,L===5||L===6||L===26||L===27){m=w=A;continue e}k=k.parentNode}}m=m.return}bS(function(){var ee=w,ce=Hg(u),fe=[];e:{var te=VS.get(i);if(te!==void 0){var ae=$f,Pe=i;switch(i){case"keypress":if(Lf(u)===0)break e;case"keydown":case"keyup":ae=h3;break;case"focusin":Pe="focus",ae=Zg;break;case"focusout":Pe="blur",ae=Zg;break;case"beforeblur":case"afterblur":ae=Zg;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=jS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=t3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=g3;break;case FS:case KS:case QS:ae=a3;break;case HS:ae=v3;break;case"scroll":case"scrollend":ae=J5;break;case"wheel":ae=x3;break;case"copy":case"cut":case"paste":ae=s3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=_S;break;case"toggle":case"beforetoggle":ae=j3}var Be=(o&4)!==0,Ot=!Be&&(i==="scroll"||i==="scrollend"),Q=Be?te!==null?te+"Capture":null:te;Be=[];for(var q=ee,Z;q!==null;){var ue=q;if(Z=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||Z===null||Q===null||(ue=au(q,Q),ue!=null&&Be.push(Lu(q,ue,Z))),Ot)break;q=q.return}0<Be.length&&(te=new ae(te,Pe,null,u,ce),fe.push({event:te,listeners:Be}))}}if((o&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",ae=i==="mouseout"||i==="pointerout",te&&u!==Qg&&(Pe=u.relatedTarget||u.fromElement)&&(ll(Pe)||Pe[ol]))break e;if((ae||te)&&(te=ce.window===ce?ce:(te=ce.ownerDocument)?te.defaultView||te.parentWindow:window,ae?(Pe=u.relatedTarget||u.toElement,ae=ee,Pe=Pe?ll(Pe):null,Pe!==null&&(Ot=s(Pe),Be=Pe.tag,Pe!==Ot||Be!==5&&Be!==27&&Be!==6)&&(Pe=null)):(ae=null,Pe=ee),ae!==Pe)){if(Be=jS,ue="onMouseLeave",Q="onMouseEnter",q="mouse",(i==="pointerout"||i==="pointerover")&&(Be=_S,ue="onPointerLeave",Q="onPointerEnter",q="pointer"),Ot=ae==null?te:nu(ae),Z=Pe==null?te:nu(Pe),te=new Be(ue,q+"leave",ae,u,ce),te.target=Ot,te.relatedTarget=Z,ue=null,ll(ce)===ee&&(Be=new Be(Q,q+"enter",Pe,u,ce),Be.target=Z,Be.relatedTarget=Ot,ue=Be),Ot=ue,ae&&Pe)t:{for(Be=wL,Q=ae,q=Pe,Z=0,ue=Q;ue;ue=Be(ue))Z++;ue=0;for(var Re=q;Re;Re=Be(Re))ue++;for(;0<Z-ue;)Q=Be(Q),Z--;for(;0<ue-Z;)q=Be(q),ue--;for(;Z--;){if(Q===q||q!==null&&Q===q.alternate){Be=Q;break t}Q=Be(Q),q=Be(q)}Be=null}else Be=null;ae!==null&&pE(fe,te,ae,Be,!1),Pe!==null&&Ot!==null&&pE(fe,Ot,Pe,Be,!0)}}e:{if(te=ee?nu(ee):window,ae=te.nodeName&&te.nodeName.toLowerCase(),ae==="select"||ae==="input"&&te.type==="file")var dt=TS;else if(PS(te))if(DS)dt=T3;else{dt=P3;var Te=C3}else ae=te.nodeName,!ae||ae.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?ee&&Kg(ee.elementType)&&(dt=TS):dt=k3;if(dt&&(dt=dt(i,ee))){kS(fe,dt,u,ce);break e}Te&&Te(i,te,ee),i==="focusout"&&ee&&te.type==="number"&&ee.memoizedProps.value!=null&&Fg(te,"number",te.value)}switch(Te=ee?nu(ee):window,i){case"focusin":(PS(Te)||Te.contentEditable==="true")&&(yl=Te,ay=ee,fu=null);break;case"focusout":fu=ay=yl=null;break;case"mousedown":iy=!0;break;case"contextmenu":case"mouseup":case"dragend":iy=!1,zS(fe,u,ce);break;case"selectionchange":if(M3)break;case"keydown":case"keyup":zS(fe,u,ce)}var Ve;if(ey)e:{switch(i){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else gl?AS(i,u)&&(nt="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(nt="onCompositionStart");nt&&(NS&&u.locale!=="ko"&&(gl||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&gl&&(Ve=xS()):(Qi=ce,Yg="value"in Qi?Qi.value:Qi.textContent,gl=!0)),Te=Ch(ee,nt),0<Te.length&&(nt=new SS(nt,i,null,u,ce),fe.push({event:nt,listeners:Te}),Ve?nt.data=Ve:(Ve=CS(u),Ve!==null&&(nt.data=Ve)))),(Ve=_3?N3(i,u):E3(i,u))&&(nt=Ch(ee,"onBeforeInput"),0<nt.length&&(Te=new SS("onBeforeInput","beforeinput",null,u,ce),fe.push({event:Te,listeners:nt}),Te.data=Ve)),yL(fe,i,ee,u,ce)}hE(fe,o)})}function Lu(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Ch(i,o){for(var u=o+"Capture",m=[];i!==null;){var b=i,w=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||w===null||(b=au(i,u),b!=null&&m.unshift(Lu(i,b,w)),b=au(i,o),b!=null&&m.push(Lu(i,b,w))),i.tag===3)return m;i=i.return}return[]}function wL(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function pE(i,o,u,m,b){for(var w=o._reactName,A=[];u!==null&&u!==m;){var k=u,L=k.alternate,ee=k.stateNode;if(k=k.tag,L!==null&&L===m)break;k!==5&&k!==26&&k!==27||ee===null||(L=ee,b?(ee=au(u,w),ee!=null&&A.unshift(Lu(u,ee,L))):b||(ee=au(u,w),ee!=null&&A.push(Lu(u,ee,L)))),u=u.return}A.length!==0&&i.push({event:o,listeners:A})}var jL=/\r\n?/g,SL=/\u0000|\uFFFD/g;function gE(i){return(typeof i=="string"?i:""+i).replace(jL,`
`).replace(SL,"")}function yE(i,o){return o=gE(o),gE(i)===o}function Et(i,o,u,m,b,w){switch(u){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||hl(i,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&hl(i,""+m);break;case"className":Df(i,"class",m);break;case"tabIndex":Df(i,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Df(i,u,m);break;case"style":yS(i,m,w);break;case"data":if(o!=="object"){Df(i,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||u!=="href")){i.removeAttribute(u);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(u);break}m=Rf(""+m),i.setAttribute(u,m);break;case"action":case"formAction":if(typeof m=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(u==="formAction"?(o!=="input"&&Et(i,o,"name",b.name,b,null),Et(i,o,"formEncType",b.formEncType,b,null),Et(i,o,"formMethod",b.formMethod,b,null),Et(i,o,"formTarget",b.formTarget,b,null)):(Et(i,o,"encType",b.encType,b,null),Et(i,o,"method",b.method,b,null),Et(i,o,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(u);break}m=Rf(""+m),i.setAttribute(u,m);break;case"onClick":m!=null&&(i.onclick=Va);break;case"onScroll":m!=null&&tt("scroll",i);break;case"onScrollEnd":m!=null&&tt("scrollend",i);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(u=m.__html,u!=null){if(b.children!=null)throw Error(n(60));i.innerHTML=u}}break;case"multiple":i.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":i.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){i.removeAttribute("xlink:href");break}u=Rf(""+m),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(u,""+m):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":m===!0?i.setAttribute(u,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(u,m):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?i.setAttribute(u,m):i.removeAttribute(u);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?i.removeAttribute(u):i.setAttribute(u,m);break;case"popover":tt("beforetoggle",i),tt("toggle",i),Tf(i,"popover",m);break;case"xlinkActuate":Ha(i,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Ha(i,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Ha(i,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Ha(i,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Ha(i,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Ha(i,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Ha(i,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Ha(i,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Ha(i,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Tf(i,"is",m);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=X5.get(u)||u,Tf(i,u,m))}}function Pv(i,o,u,m,b,w){switch(u){case"style":yS(i,m,w);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(u=m.__html,u!=null){if(b.children!=null)throw Error(n(60));i.innerHTML=u}}break;case"children":typeof m=="string"?hl(i,m):(typeof m=="number"||typeof m=="bigint")&&hl(i,""+m);break;case"onScroll":m!=null&&tt("scroll",i);break;case"onScrollEnd":m!=null&&tt("scrollend",i);break;case"onClick":m!=null&&(i.onclick=Va);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lS.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(b=u.endsWith("Capture"),o=u.slice(2,b?u.length-7:void 0),w=i[sn]||null,w=w!=null?w[u]:null,typeof w=="function"&&i.removeEventListener(o,w,b),typeof m=="function")){typeof w!="function"&&w!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(o,m,b);break e}u in i?i[u]=m:m===!0?i.setAttribute(u,""):Tf(i,u,m)}}}function $r(i,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",i),tt("load",i);var m=!1,b=!1,w;for(w in u)if(u.hasOwnProperty(w)){var A=u[w];if(A!=null)switch(w){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:Et(i,o,w,A,u,null)}}b&&Et(i,o,"srcSet",u.srcSet,u,null),m&&Et(i,o,"src",u.src,u,null);return;case"input":tt("invalid",i);var k=w=A=b=null,L=null,ee=null;for(m in u)if(u.hasOwnProperty(m)){var ce=u[m];if(ce!=null)switch(m){case"name":b=ce;break;case"type":A=ce;break;case"checked":L=ce;break;case"defaultChecked":ee=ce;break;case"value":w=ce;break;case"defaultValue":k=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(n(137,o));break;default:Et(i,o,m,ce,u,null)}}hS(i,w,k,L,ee,A,b,!1);return;case"select":tt("invalid",i),m=A=w=null;for(b in u)if(u.hasOwnProperty(b)&&(k=u[b],k!=null))switch(b){case"value":w=k;break;case"defaultValue":A=k;break;case"multiple":m=k;default:Et(i,o,b,k,u,null)}o=w,u=A,i.multiple=!!m,o!=null?fl(i,!!m,o,!1):u!=null&&fl(i,!!m,u,!0);return;case"textarea":tt("invalid",i),w=b=m=null;for(A in u)if(u.hasOwnProperty(A)&&(k=u[A],k!=null))switch(A){case"value":m=k;break;case"defaultValue":b=k;break;case"children":w=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(n(91));break;default:Et(i,o,A,k,u,null)}pS(i,m,b,w);return;case"option":for(L in u)if(u.hasOwnProperty(L)&&(m=u[L],m!=null))switch(L){case"selected":i.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Et(i,o,L,m,u,null)}return;case"dialog":tt("beforetoggle",i),tt("toggle",i),tt("cancel",i),tt("close",i);break;case"iframe":case"object":tt("load",i);break;case"video":case"audio":for(m=0;m<Iu.length;m++)tt(Iu[m],i);break;case"image":tt("error",i),tt("load",i);break;case"details":tt("toggle",i);break;case"embed":case"source":case"link":tt("error",i),tt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in u)if(u.hasOwnProperty(ee)&&(m=u[ee],m!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:Et(i,o,ee,m,u,null)}return;default:if(Kg(o)){for(ce in u)u.hasOwnProperty(ce)&&(m=u[ce],m!==void 0&&Pv(i,o,ce,m,u,void 0));return}}for(k in u)u.hasOwnProperty(k)&&(m=u[k],m!=null&&Et(i,o,k,m,u,null))}function _L(i,o,u,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,w=null,A=null,k=null,L=null,ee=null,ce=null;for(ae in u){var fe=u[ae];if(u.hasOwnProperty(ae)&&fe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":L=fe;default:m.hasOwnProperty(ae)||Et(i,o,ae,null,m,fe)}}for(var te in m){var ae=m[te];if(fe=u[te],m.hasOwnProperty(te)&&(ae!=null||fe!=null))switch(te){case"type":w=ae;break;case"name":b=ae;break;case"checked":ee=ae;break;case"defaultChecked":ce=ae;break;case"value":A=ae;break;case"defaultValue":k=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(n(137,o));break;default:ae!==fe&&Et(i,o,te,ae,m,fe)}}qg(i,A,k,L,ee,ce,w,b);return;case"select":ae=A=k=te=null;for(w in u)if(L=u[w],u.hasOwnProperty(w)&&L!=null)switch(w){case"value":break;case"multiple":ae=L;default:m.hasOwnProperty(w)||Et(i,o,w,null,m,L)}for(b in m)if(w=m[b],L=u[b],m.hasOwnProperty(b)&&(w!=null||L!=null))switch(b){case"value":te=w;break;case"defaultValue":k=w;break;case"multiple":A=w;default:w!==L&&Et(i,o,b,w,m,L)}o=k,u=A,m=ae,te!=null?fl(i,!!u,te,!1):!!m!=!!u&&(o!=null?fl(i,!!u,o,!0):fl(i,!!u,u?[]:"",!1));return;case"textarea":ae=te=null;for(k in u)if(b=u[k],u.hasOwnProperty(k)&&b!=null&&!m.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:Et(i,o,k,null,m,b)}for(A in m)if(b=m[A],w=u[A],m.hasOwnProperty(A)&&(b!=null||w!=null))switch(A){case"value":te=b;break;case"defaultValue":ae=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(n(91));break;default:b!==w&&Et(i,o,A,b,m,w)}mS(i,te,ae);return;case"option":for(var Pe in u)if(te=u[Pe],u.hasOwnProperty(Pe)&&te!=null&&!m.hasOwnProperty(Pe))switch(Pe){case"selected":i.selected=!1;break;default:Et(i,o,Pe,null,m,te)}for(L in m)if(te=m[L],ae=u[L],m.hasOwnProperty(L)&&te!==ae&&(te!=null||ae!=null))switch(L){case"selected":i.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Et(i,o,L,te,m,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in u)te=u[Be],u.hasOwnProperty(Be)&&te!=null&&!m.hasOwnProperty(Be)&&Et(i,o,Be,null,m,te);for(ee in m)if(te=m[ee],ae=u[ee],m.hasOwnProperty(ee)&&te!==ae&&(te!=null||ae!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(n(137,o));break;default:Et(i,o,ee,te,m,ae)}return;default:if(Kg(o)){for(var Ot in u)te=u[Ot],u.hasOwnProperty(Ot)&&te!==void 0&&!m.hasOwnProperty(Ot)&&Pv(i,o,Ot,void 0,m,te);for(ce in m)te=m[ce],ae=u[ce],!m.hasOwnProperty(ce)||te===ae||te===void 0&&ae===void 0||Pv(i,o,ce,te,m,ae);return}}for(var Q in u)te=u[Q],u.hasOwnProperty(Q)&&te!=null&&!m.hasOwnProperty(Q)&&Et(i,o,Q,null,m,te);for(fe in m)te=m[fe],ae=u[fe],!m.hasOwnProperty(fe)||te===ae||te==null&&ae==null||Et(i,o,fe,te,m,ae)}function vE(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function NL(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,u=performance.getEntriesByType("resource"),m=0;m<u.length;m++){var b=u[m],w=b.transferSize,A=b.initiatorType,k=b.duration;if(w&&k&&vE(A)){for(A=0,k=b.responseEnd,m+=1;m<u.length;m++){var L=u[m],ee=L.startTime;if(ee>k)break;var ce=L.transferSize,fe=L.initiatorType;ce&&vE(fe)&&(L=L.responseEnd,A+=ce*(L<k?1:(k-ee)/(L-ee)))}if(--m,o+=8*(w+A)/(b.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var kv=null,Tv=null;function Ph(i){return i.nodeType===9?i:i.ownerDocument}function bE(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xE(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Dv(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Mv=null;function EL(){var i=window.event;return i&&i.type==="popstate"?i===Mv?!1:(Mv=i,!0):(Mv=null,!1)}var wE=typeof setTimeout=="function"?setTimeout:void 0,OL=typeof clearTimeout=="function"?clearTimeout:void 0,jE=typeof Promise=="function"?Promise:void 0,AL=typeof queueMicrotask=="function"?queueMicrotask:typeof jE<"u"?function(i){return jE.resolve(null).then(i).catch(CL)}:wE;function CL(i){setTimeout(function(){throw i})}function ls(i){return i==="head"}function SE(i,o){var u=o,m=0;do{var b=u.nextSibling;if(i.removeChild(u),b&&b.nodeType===8)if(u=b.data,u==="/$"||u==="/&"){if(m===0){i.removeChild(b),Kl(o);return}m--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")m++;else if(u==="html")Bu(i.ownerDocument.documentElement);else if(u==="head"){u=i.ownerDocument.head,Bu(u);for(var w=u.firstChild;w;){var A=w.nextSibling,k=w.nodeName;w[ru]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&w.rel.toLowerCase()==="stylesheet"||u.removeChild(w),w=A}}else u==="body"&&Bu(i.ownerDocument.body);u=b}while(u);Kl(o)}function _E(i,o){var u=i;i=0;do{var m=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(i===0)break;i--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||i++;u=m}while(u)}function Rv(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Rv(u),Ug(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function PL(i,o,u,m){for(;i.nodeType===1;){var b=u;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(m){if(!i[ru])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(w=i.getAttribute("rel"),w==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(w!==b.rel||i.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||i.getAttribute("title")!==(b.title==null?null:b.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(w=i.getAttribute("src"),(w!==(b.src==null?null:b.src)||i.getAttribute("type")!==(b.type==null?null:b.type)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&w&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var w=b.name==null?null:""+b.name;if(b.type==="hidden"&&i.getAttribute("name")===w)return i}else return i;if(i=Vn(i.nextSibling),i===null)break}return null}function kL(i,o,u){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=Vn(i.nextSibling),i===null))return null;return i}function NE(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Vn(i.nextSibling),i===null))return null;return i}function Iv(i){return i.data==="$?"||i.data==="$~"}function Lv(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function TL(i,o){var u=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||u.readyState!=="loading")o();else{var m=function(){o(),u.removeEventListener("DOMContentLoaded",m)};u.addEventListener("DOMContentLoaded",m),i._reactRetry=m}}function Vn(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var Bv=null;function EE(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"||u==="/&"){if(o===0)return Vn(i.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}i=i.nextSibling}return null}function OE(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return i;o--}else u!=="/$"&&u!=="/&"||o++}i=i.previousSibling}return null}function AE(i,o,u){switch(o=Ph(u),i){case"html":if(i=o.documentElement,!i)throw Error(n(452));return i;case"head":if(i=o.head,!i)throw Error(n(453));return i;case"body":if(i=o.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function Bu(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Ug(i)}var Gn=new Map,CE=new Set;function kh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ci=H.d;H.d={f:DL,r:ML,D:RL,C:IL,L:LL,m:BL,X:UL,S:$L,M:zL};function DL(){var i=ci.f(),o=jh();return i||o}function ML(i){var o=cl(i);o!==null&&o.tag===5&&o.type==="form"?H_(o):ci.r(i)}var zl=typeof document>"u"?null:document;function PE(i,o,u){var m=zl;if(m&&typeof o=="string"&&o){var b=Un(o);b='link[rel="'+i+'"][href="'+b+'"]',typeof u=="string"&&(b+='[crossorigin="'+u+'"]'),CE.has(b)||(CE.add(b),i={rel:i,crossOrigin:u,href:o},m.querySelector(b)===null&&(o=m.createElement("link"),$r(o,"link",i),_r(o),m.head.appendChild(o)))}}function RL(i){ci.D(i),PE("dns-prefetch",i,null)}function IL(i,o){ci.C(i,o),PE("preconnect",i,o)}function LL(i,o,u){ci.L(i,o,u);var m=zl;if(m&&i&&o){var b='link[rel="preload"][as="'+Un(o)+'"]';o==="image"&&u&&u.imageSrcSet?(b+='[imagesrcset="'+Un(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(b+='[imagesizes="'+Un(u.imageSizes)+'"]')):b+='[href="'+Un(i)+'"]';var w=b;switch(o){case"style":w=ql(i);break;case"script":w=Fl(i)}Gn.has(w)||(i=g({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:i,as:o},u),Gn.set(w,i),m.querySelector(b)!==null||o==="style"&&m.querySelector($u(w))||o==="script"&&m.querySelector(Uu(w))||(o=m.createElement("link"),$r(o,"link",i),_r(o),m.head.appendChild(o)))}}function BL(i,o){ci.m(i,o);var u=zl;if(u&&i){var m=o&&typeof o.as=="string"?o.as:"script",b='link[rel="modulepreload"][as="'+Un(m)+'"][href="'+Un(i)+'"]',w=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Fl(i)}if(!Gn.has(w)&&(i=g({rel:"modulepreload",href:i},o),Gn.set(w,i),u.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Uu(w)))return}m=u.createElement("link"),$r(m,"link",i),_r(m),u.head.appendChild(m)}}}function $L(i,o,u){ci.S(i,o,u);var m=zl;if(m&&i){var b=ul(m).hoistableStyles,w=ql(i);o=o||"default";var A=b.get(w);if(!A){var k={loading:0,preload:null};if(A=m.querySelector($u(w)))k.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":o},u),(u=Gn.get(w))&&$v(i,u);var L=A=m.createElement("link");_r(L),$r(L,"link",i),L._p=new Promise(function(ee,ce){L.onload=ee,L.onerror=ce}),L.addEventListener("load",function(){k.loading|=1}),L.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Th(A,o,m)}A={type:"stylesheet",instance:A,count:1,state:k},b.set(w,A)}}}function UL(i,o){ci.X(i,o);var u=zl;if(u&&i){var m=ul(u).hoistableScripts,b=Fl(i),w=m.get(b);w||(w=u.querySelector(Uu(b)),w||(i=g({src:i,async:!0},o),(o=Gn.get(b))&&Uv(i,o),w=u.createElement("script"),_r(w),$r(w,"link",i),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(b,w))}}function zL(i,o){ci.M(i,o);var u=zl;if(u&&i){var m=ul(u).hoistableScripts,b=Fl(i),w=m.get(b);w||(w=u.querySelector(Uu(b)),w||(i=g({src:i,async:!0,type:"module"},o),(o=Gn.get(b))&&Uv(i,o),w=u.createElement("script"),_r(w),$r(w,"link",i),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(b,w))}}function kE(i,o,u,m){var b=(b=be.current)?kh(b):null;if(!b)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=ql(u.href),u=ul(b).hoistableStyles,m=u.get(o),m||(m={type:"style",instance:null,count:0,state:null},u.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=ql(u.href);var w=ul(b).hoistableStyles,A=w.get(i);if(A||(b=b.ownerDocument||b,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(i,A),(w=b.querySelector($u(i)))&&!w._p&&(A.instance=w,A.state.loading=5),Gn.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Gn.set(i,u),w||qL(b,i,u,A.state))),o&&m===null)throw Error(n(528,""));return A}if(o&&m!==null)throw Error(n(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Fl(u),u=ul(b).hoistableScripts,m=u.get(o),m||(m={type:"script",instance:null,count:0,state:null},u.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function ql(i){return'href="'+Un(i)+'"'}function $u(i){return'link[rel="stylesheet"]['+i+"]"}function TE(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function qL(i,o,u,m){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=i.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),$r(o,"link",u),_r(o),i.head.appendChild(o))}function Fl(i){return'[src="'+Un(i)+'"]'}function Uu(i){return"script[async]"+i}function DE(i,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var m=i.querySelector('style[data-href~="'+Un(u.href)+'"]');if(m)return o.instance=m,_r(m),m;var b=g({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return m=(i.ownerDocument||i).createElement("style"),_r(m),$r(m,"style",b),Th(m,u.precedence,i),o.instance=m;case"stylesheet":b=ql(u.href);var w=i.querySelector($u(b));if(w)return o.state.loading|=4,o.instance=w,_r(w),w;m=TE(u),(b=Gn.get(b))&&$v(m,b),w=(i.ownerDocument||i).createElement("link"),_r(w);var A=w;return A._p=new Promise(function(k,L){A.onload=k,A.onerror=L}),$r(w,"link",m),o.state.loading|=4,Th(w,u.precedence,i),o.instance=w;case"script":return w=Fl(u.src),(b=i.querySelector(Uu(w)))?(o.instance=b,_r(b),b):(m=u,(b=Gn.get(w))&&(m=g({},u),Uv(m,b)),i=i.ownerDocument||i,b=i.createElement("script"),_r(b),$r(b,"link",m),i.head.appendChild(b),o.instance=b);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,Th(m,u.precedence,i));return o.instance}function Th(i,o,u){for(var m=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,w=b,A=0;A<m.length;A++){var k=m[A];if(k.dataset.precedence===o)w=k;else if(w!==b)break}w?w.parentNode.insertBefore(i,w.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(i,o.firstChild))}function $v(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Uv(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Dh=null;function ME(i,o,u){if(Dh===null){var m=new Map,b=Dh=new Map;b.set(u,m)}else b=Dh,m=b.get(u),m||(m=new Map,b.set(u,m));if(m.has(i))return m;for(m.set(i,null),u=u.getElementsByTagName(i),b=0;b<u.length;b++){var w=u[b];if(!(w[ru]||w[Rr]||i==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var A=w.getAttribute(o)||"";A=i+A;var k=m.get(A);k?k.push(w):m.set(A,[w])}}return m}function RE(i,o,u){i=i.ownerDocument||i,i.head.insertBefore(u,o==="title"?i.querySelector("head > title"):null)}function FL(i,o,u){if(u===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function IE(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function KL(i,o,u,m){if(u.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var b=ql(m.href),w=o.querySelector($u(b));if(w){o=w._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=Mh.bind(i),o.then(i,i)),u.state.loading|=4,u.instance=w,_r(w);return}w=o.ownerDocument||o,m=TE(m),(b=Gn.get(b))&&$v(m,b),w=w.createElement("link"),_r(w);var A=w;A._p=new Promise(function(k,L){A.onload=k,A.onerror=L}),$r(w,"link",m),u.instance=w}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(i.count++,u=Mh.bind(i),o.addEventListener("load",u),o.addEventListener("error",u))}}var zv=0;function QL(i,o){return i.stylesheets&&i.count===0&&Ih(i,i.stylesheets),0<i.count||0<i.imgCount?function(u){var m=setTimeout(function(){if(i.stylesheets&&Ih(i,i.stylesheets),i.unsuspend){var w=i.unsuspend;i.unsuspend=null,w()}},6e4+o);0<i.imgBytes&&zv===0&&(zv=62500*NL());var b=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Ih(i,i.stylesheets),i.unsuspend)){var w=i.unsuspend;i.unsuspend=null,w()}},(i.imgBytes>zv?50:800)+o);return i.unsuspend=u,function(){i.unsuspend=null,clearTimeout(m),clearTimeout(b)}}:null}function Mh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ih(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Rh=null;function Ih(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Rh=new Map,o.forEach(HL,i),Rh=null,Mh.call(i))}function HL(i,o){if(!(o.state.loading&4)){var u=Rh.get(i);if(u)var m=u.get(null);else{u=new Map,Rh.set(i,u);for(var b=i.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<b.length;w++){var A=b[w];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(u.set(A.dataset.precedence,A),m=A)}m&&u.set(null,m)}b=o.instance,A=b.getAttribute("data-precedence"),w=u.get(A)||m,w===m&&u.set(null,b),u.set(A,b),this.count++,m=Mh.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),w?w.parentNode.insertBefore(b,w.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(b,i.firstChild)),o.state.loading|=4}}var zu={$$typeof:O,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function VL(i,o,u,m,b,w,A,k,L){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ig(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ig(0),this.hiddenUpdates=Ig(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=w,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function LE(i,o,u,m,b,w,A,k,L,ee,ce,fe){return i=new VL(i,o,u,A,L,ee,ce,fe,k),o=1,w===!0&&(o|=24),w=Sn(3,null,null,o),i.current=w,w.stateNode=i,o=xy(),o.refCount++,i.pooledCache=o,o.refCount++,w.memoizedState={element:m,isDehydrated:u,cache:o},_y(w),i}function BE(i){return i?(i=xl,i):xl}function $E(i,o,u,m,b,w){b=BE(b),m.context===null?m.context=b:m.pendingContext=b,m=Xi(o),m.payload={element:u},w=w===void 0?null:w,w!==null&&(m.callback=w),u=Zi(i,m,o),u!==null&&(fn(u,i,o),bu(u,i,o))}function UE(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function qv(i,o){UE(i,o),(i=i.alternate)&&UE(i,o)}function zE(i){if(i.tag===13||i.tag===31){var o=Ws(i,67108864);o!==null&&fn(o,i,67108864),qv(i,67108864)}}function qE(i){if(i.tag===13||i.tag===31){var o=An();o=Lg(o);var u=Ws(i,o);u!==null&&fn(u,i,o),qv(i,o)}}var Lh=!0;function GL(i,o,u,m){var b=I.T;I.T=null;var w=H.p;try{H.p=2,Fv(i,o,u,m)}finally{H.p=w,I.T=b}}function YL(i,o,u,m){var b=I.T;I.T=null;var w=H.p;try{H.p=8,Fv(i,o,u,m)}finally{H.p=w,I.T=b}}function Fv(i,o,u,m){if(Lh){var b=Kv(m);if(b===null)Cv(i,o,m,Bh,u),KE(i,m);else if(XL(b,i,o,u,m))m.stopPropagation();else if(KE(i,m),o&4&&-1<WL.indexOf(i)){for(;b!==null;){var w=cl(b);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var A=Qs(w.pendingLanes);if(A!==0){var k=w;for(k.pendingLanes|=2,k.entangledLanes|=2;A;){var L=1<<31-wn(A);k.entanglements[1]|=L,A&=~L}Aa(w),(gt&6)===0&&(xh=ye()+500,Ru(0))}}break;case 31:case 13:k=Ws(w,2),k!==null&&fn(k,w,2),jh(),qv(w,2)}if(w=Kv(m),w===null&&Cv(i,o,m,Bh,u),w===b)break;b=w}b!==null&&m.stopPropagation()}else Cv(i,o,m,null,u)}}function Kv(i){return i=Hg(i),Qv(i)}var Bh=null;function Qv(i){if(Bh=null,i=ll(i),i!==null){var o=s(i);if(o===null)i=null;else{var u=o.tag;if(u===13){if(i=l(o),i!==null)return i;i=null}else if(u===31){if(i=d(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Bh=i,null}function FE(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Je()){case Ze:return 2;case Sr:return 8;case hr:case xn:return 32;case mr:return 268435456;default:return 32}default:return 32}}var Hv=!1,cs=null,us=null,ds=null,qu=new Map,Fu=new Map,fs=[],WL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function KE(i,o){switch(i){case"focusin":case"focusout":cs=null;break;case"dragenter":case"dragleave":us=null;break;case"mouseover":case"mouseout":ds=null;break;case"pointerover":case"pointerout":qu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fu.delete(o.pointerId)}}function Ku(i,o,u,m,b,w){return i===null||i.nativeEvent!==w?(i={blockedOn:o,domEventName:u,eventSystemFlags:m,nativeEvent:w,targetContainers:[b]},o!==null&&(o=cl(o),o!==null&&zE(o)),i):(i.eventSystemFlags|=m,o=i.targetContainers,b!==null&&o.indexOf(b)===-1&&o.push(b),i)}function XL(i,o,u,m,b){switch(o){case"focusin":return cs=Ku(cs,i,o,u,m,b),!0;case"dragenter":return us=Ku(us,i,o,u,m,b),!0;case"mouseover":return ds=Ku(ds,i,o,u,m,b),!0;case"pointerover":var w=b.pointerId;return qu.set(w,Ku(qu.get(w)||null,i,o,u,m,b)),!0;case"gotpointercapture":return w=b.pointerId,Fu.set(w,Ku(Fu.get(w)||null,i,o,u,m,b)),!0}return!1}function QE(i){var o=ll(i.target);if(o!==null){var u=s(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){i.blockedOn=o,iS(i.priority,function(){qE(u)});return}}else if(o===31){if(o=d(u),o!==null){i.blockedOn=o,iS(i.priority,function(){qE(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function $h(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=Kv(i.nativeEvent);if(u===null){u=i.nativeEvent;var m=new u.constructor(u.type,u);Qg=m,u.target.dispatchEvent(m),Qg=null}else return o=cl(u),o!==null&&zE(o),i.blockedOn=u,!1;o.shift()}return!0}function HE(i,o,u){$h(i)&&u.delete(o)}function ZL(){Hv=!1,cs!==null&&$h(cs)&&(cs=null),us!==null&&$h(us)&&(us=null),ds!==null&&$h(ds)&&(ds=null),qu.forEach(HE),Fu.forEach(HE)}function Uh(i,o){i.blockedOn===o&&(i.blockedOn=null,Hv||(Hv=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ZL)))}var zh=null;function VE(i){zh!==i&&(zh=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){zh===i&&(zh=null);for(var o=0;o<i.length;o+=3){var u=i[o],m=i[o+1],b=i[o+2];if(typeof m!="function"){if(Qv(m||u)===null)continue;break}var w=cl(u);w!==null&&(i.splice(o,3),o-=3,Ky(w,{pending:!0,data:b,method:u.method,action:m},m,b))}}))}function Kl(i){function o(L){return Uh(L,i)}cs!==null&&Uh(cs,i),us!==null&&Uh(us,i),ds!==null&&Uh(ds,i),qu.forEach(o),Fu.forEach(o);for(var u=0;u<fs.length;u++){var m=fs[u];m.blockedOn===i&&(m.blockedOn=null)}for(;0<fs.length&&(u=fs[0],u.blockedOn===null);)QE(u),u.blockedOn===null&&fs.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(m=0;m<u.length;m+=3){var b=u[m],w=u[m+1],A=b[sn]||null;if(typeof w=="function")A||VE(u);else if(A){var k=null;if(w&&w.hasAttribute("formAction")){if(b=w,A=w[sn]||null)k=A.formAction;else if(Qv(b)!==null)continue}else k=A.action;typeof k=="function"?u[m+1]=k:(u.splice(m,3),m-=3),VE(u)}}}function GE(){function i(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(A){return b=A})},focusReset:"manual",scroll:"manual"})}function o(){b!==null&&(b(),b=null),m||setTimeout(u,20)}function u(){if(!m&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,b=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){m=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),b!==null&&(b(),b=null)}}}function Vv(i){this._internalRoot=i}qh.prototype.render=Vv.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(n(409));var u=o.current,m=An();$E(u,m,i,o,null,null)},qh.prototype.unmount=Vv.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;$E(i.current,2,null,i,null,null),jh(),o[ol]=null}};function qh(i){this._internalRoot=i}qh.prototype.unstable_scheduleHydration=function(i){if(i){var o=aS();i={blockedOn:null,target:i,priority:o};for(var u=0;u<fs.length&&o!==0&&o<fs[u].priority;u++);fs.splice(u,0,i),u===0&&QE(i)}};var YE=t.version;if(YE!=="19.2.4")throw Error(n(527,YE,"19.2.4"));H.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=h(o),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var JL={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fh.isDisabled&&Fh.supportsFiber)try{Mr=Fh.inject(JL),pr=Fh}catch{}}return Hu.createRoot=function(i,o){if(!a(i))throw Error(n(299));var u=!1,m="",b=rN,w=nN,A=aN;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(b=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=LE(i,1,!1,null,null,u,m,null,b,w,A,GE),i[ol]=o.current,Av(i),new Vv(o)},Hu.hydrateRoot=function(i,o,u){if(!a(i))throw Error(n(299));var m=!1,b="",w=rN,A=nN,k=aN,L=null;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onUncaughtError!==void 0&&(w=u.onUncaughtError),u.onCaughtError!==void 0&&(A=u.onCaughtError),u.onRecoverableError!==void 0&&(k=u.onRecoverableError),u.formState!==void 0&&(L=u.formState)),o=LE(i,1,!0,o,u??null,m,b,L,w,A,k,GE),o.context=BE(null),u=o.current,m=An(),m=Lg(m),b=Xi(m),b.callback=null,Zi(u,b,m),u=m,o.current.lanes=u,tu(o,u),Aa(o),i[ol]=o.current,Av(i),new qh(o)},Hu.version="19.2.4",Hu}var sO;function fB(){if(sO)return Zv.exports;sO=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Zv.exports=dB(),Zv.exports}var hB=fB();const mB=Ka(hB);/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var oO="popstate";function pB(e={}){function t(a,s){let{pathname:l="/",search:d="",hash:f=""}=Wo(a.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Yb("",{pathname:l,search:d,hash:f},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(a,s){let l=a.document.querySelector("base"),d="";if(l&&l.getAttribute("href")){let f=a.location.href,h=f.indexOf("#");d=h===-1?f:f.slice(0,h)}return d+"#"+(typeof s=="string"?s:hd(s))}function n(a,s){ra(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return yB(t,r,n,e)}function Kt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ra(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function gB(){return Math.random().toString(36).substring(2,10)}function lO(e,t){return{usr:e.state,key:e.key,idx:t}}function Yb(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Wo(t):t,state:r,key:t&&t.key||n||gB()}}function hd({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Wo(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function yB(e,t,r,n={}){let{window:a=document.defaultView,v5Compat:s=!1}=n,l=a.history,d="POP",f=null,h=p();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function p(){return(l.state||{idx:null}).idx}function g(){d="POP";let S=p(),N=S==null?null:S-h;h=S,f&&f({action:d,location:_.location,delta:N})}function y(S,N){d="PUSH";let E=Yb(_.location,S,N);r&&r(E,S),h=p()+1;let O=lO(E,h),C=_.createHref(E);try{l.pushState(O,"",C)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;a.location.assign(C)}s&&f&&f({action:d,location:_.location,delta:1})}function v(S,N){d="REPLACE";let E=Yb(_.location,S,N);r&&r(E,S),h=p();let O=lO(E,h),C=_.createHref(E);l.replaceState(O,"",C),s&&f&&f({action:d,location:_.location,delta:0})}function j(S){return vB(S)}let _={get action(){return d},get location(){return e(a,l)},listen(S){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(oO,g),f=S,()=>{a.removeEventListener(oO,g),f=null}},createHref(S){return t(a,S)},createURL:j,encodeLocation(S){let N=j(S);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:y,replace:v,go(S){return l.go(S)}};return _}function vB(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Kt(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:hd(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function bT(e,t,r="/"){return bB(e,t,r,!1)}function bB(e,t,r,n){let a=typeof t=="string"?Wo(t):t,s=Ni(a.pathname||"/",r);if(s==null)return null;let l=xT(e);xB(l);let d=null;for(let f=0;d==null&&f<l.length;++f){let h=kB(s);d=CB(l[f],h,n)}return d}function xT(e,t=[],r=[],n="",a=!1){let s=(l,d,f=a,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&f)return;Kt(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let g=wi([n,p.relativePath]),y=r.concat(p);l.children&&l.children.length>0&&(Kt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),xT(l.children,t,y,g,f)),!(l.path==null&&!l.index)&&t.push({path:g,score:OB(g,l.index),routesMeta:y})};return e.forEach((l,d)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))s(l,d);else for(let h of wT(l.path))s(l,d,!0,h)}),t}function wT(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let l=wT(n.join("/")),d=[];return d.push(...l.map(f=>f===""?s:[s,f].join("/"))),a&&d.push(...l),d.map(f=>e.startsWith("/")&&f===""?"/":f)}function xB(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:AB(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var wB=/^:[\w-]+$/,jB=3,SB=2,_B=1,NB=10,EB=-2,cO=e=>e==="*";function OB(e,t){let r=e.split("/"),n=r.length;return r.some(cO)&&(n+=EB),t&&(n+=SB),r.filter(a=>!cO(a)).reduce((a,s)=>a+(wB.test(s)?jB:s===""?_B:NB),n)}function AB(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function CB(e,t,r=!1){let{routesMeta:n}=e,a={},s="/",l=[];for(let d=0;d<n.length;++d){let f=n[d],h=d===n.length-1,p=s==="/"?t:t.slice(s.length)||"/",g=Em({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},p),y=f.route;if(!g&&h&&r&&!n[n.length-1].route.index&&(g=Em({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},p)),!g)return null;Object.assign(a,g.params),l.push({params:a,pathname:wi([s,g.pathname]),pathnameBase:RB(wi([s,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(s=wi([s,g.pathnameBase]))}return l}function Em(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=PB(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let s=a[0],l=s.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:n.reduce((h,{paramName:p,isOptional:g},y)=>{if(p==="*"){let j=d[y]||"";l=s.slice(0,s.length-j.length).replace(/(.)\/+$/,"$1")}const v=d[y];return g&&!v?h[p]=void 0:h[p]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:l,pattern:e}}function PB(e,t=!1,r=!0){ra(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,f)=>(n.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function kB(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ra(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ni(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var TB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function DB(e,t="/"){let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Wo(e):e,s;return r?(r=r.replace(/\/\/+/g,"/"),r.startsWith("/")?s=uO(r.substring(1),"/"):s=uO(r,t)):s=t,{pathname:s,search:IB(n),hash:LB(a)}}function uO(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function r0(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function MB(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function _w(e){let t=MB(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function Nw(e,t,r,n=!1){let a;typeof e=="string"?a=Wo(e):(a={...e},Kt(!a.pathname||!a.pathname.includes("?"),r0("?","pathname","search",a)),Kt(!a.pathname||!a.pathname.includes("#"),r0("#","pathname","hash",a)),Kt(!a.search||!a.search.includes("#"),r0("#","search","hash",a)));let s=e===""||a.pathname==="",l=s?"/":a.pathname,d;if(l==null)d=r;else{let g=t.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),g-=1;a.pathname=y.join("/")}d=g>=0?t[g]:"/"}let f=DB(a,d),h=l&&l!=="/"&&l.endsWith("/"),p=(s||l===".")&&r.endsWith("/");return!f.pathname.endsWith("/")&&(h||p)&&(f.pathname+="/"),f}var wi=e=>e.join("/").replace(/\/\/+/g,"/"),RB=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),IB=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,LB=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,BB=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function $B(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function UB(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var jT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ST(e,t){let r=e;if(typeof r!="string"||!TB.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,a=!1;if(jT)try{let s=new URL(window.location.href),l=r.startsWith("//")?new URL(s.protocol+r):new URL(r),d=Ni(l.pathname,t);l.origin===s.origin&&d!=null?r=d+l.search+l.hash:a=!0}catch{ra(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:a,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var _T=["POST","PUT","PATCH","DELETE"];new Set(_T);var zB=["GET",..._T];new Set(zB);var Lc=x.createContext(null);Lc.displayName="DataRouter";var Pp=x.createContext(null);Pp.displayName="DataRouterState";var qB=x.createContext(!1),NT=x.createContext({isTransitioning:!1});NT.displayName="ViewTransition";var FB=x.createContext(new Map);FB.displayName="Fetchers";var KB=x.createContext(null);KB.displayName="Await";var In=x.createContext(null);In.displayName="Navigation";var Kd=x.createContext(null);Kd.displayName="Location";var wa=x.createContext({outlet:null,matches:[],isDataRoute:!1});wa.displayName="Route";var Ew=x.createContext(null);Ew.displayName="RouteError";var ET="REACT_ROUTER_ERROR",QB="REDIRECT",HB="ROUTE_ERROR_RESPONSE";function VB(e){if(e.startsWith(`${ET}:${QB}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function GB(e){if(e.startsWith(`${ET}:${HB}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new BB(t.status,t.statusText,t.data)}catch{}}function YB(e,{relative:t}={}){Kt(Bc(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=x.useContext(In),{hash:a,pathname:s,search:l}=Qd(e,{relative:t}),d=s;return r!=="/"&&(d=s==="/"?r:wi([r,s])),n.createHref({pathname:d,search:l,hash:a})}function Bc(){return x.useContext(Kd)!=null}function Ln(){return Kt(Bc(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(Kd).location}var OT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function AT(e){x.useContext(In).static||x.useLayoutEffect(e)}function _t(){let{isDataRoute:e}=x.useContext(wa);return e?l6():WB()}function WB(){Kt(Bc(),"useNavigate() may be used only in the context of a <Router> component.");let e=x.useContext(Lc),{basename:t,navigator:r}=x.useContext(In),{matches:n}=x.useContext(wa),{pathname:a}=Ln(),s=JSON.stringify(_w(n)),l=x.useRef(!1);return AT(()=>{l.current=!0}),x.useCallback((f,h={})=>{if(ra(l.current,OT),!l.current)return;if(typeof f=="number"){r.go(f);return}let p=Nw(f,JSON.parse(s),a,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:wi([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,s,a,e])}x.createContext(null);function Bn(){let{matches:e}=x.useContext(wa),t=e[e.length-1];return t?t.params:{}}function Qd(e,{relative:t}={}){let{matches:r}=x.useContext(wa),{pathname:n}=Ln(),a=JSON.stringify(_w(r));return x.useMemo(()=>Nw(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function XB(e,t){return CT(e,t)}function CT(e,t,r,n,a){var E;Kt(Bc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=x.useContext(In),{matches:l}=x.useContext(wa),d=l[l.length-1],f=d?d.params:{},h=d?d.pathname:"/",p=d?d.pathnameBase:"/",g=d&&d.route;{let O=g&&g.path||"";kT(h,!g||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let y=Ln(),v;if(t){let O=typeof t=="string"?Wo(t):t;Kt(p==="/"||((E=O.pathname)==null?void 0:E.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${O.pathname}" was given in the \`location\` prop.`),v=O}else v=y;let j=v.pathname||"/",_=j;if(p!=="/"){let O=p.replace(/^\//,"").split("/");_="/"+j.replace(/^\//,"").split("/").slice(O.length).join("/")}let S=bT(e,{pathname:_});ra(g||S!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),ra(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=r6(S&&S.map(O=>Object.assign({},O,{params:Object.assign({},f,O.params),pathname:wi([p,s.encodeLocation?s.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?p:wi([p,s.encodeLocation?s.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),l,r,n,a);return t&&N?x.createElement(Kd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},N):N}function ZB(){let e=o6(),t=$B(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:s},"ErrorBoundary")," or"," ",x.createElement("code",{style:s},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),r?x.createElement("pre",{style:a},r):null,l)}var JB=x.createElement(ZB,null),PT=class extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const r=GB(e.digest);r&&(e=r)}let t=e!==void 0?x.createElement(wa.Provider,{value:this.props.routeContext},x.createElement(Ew.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?x.createElement(e6,{error:e},t):t}};PT.contextType=qB;var n0=new WeakMap;function e6({children:e,error:t}){let{basename:r}=x.useContext(In);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=VB(t.digest);if(n){let a=n0.get(t);if(a)throw a;let s=ST(n.location,r);if(jT&&!n0.get(t))if(s.isExternal||n.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:n.replace}));throw n0.set(t,l),l}return x.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return e}function t6({routeContext:e,match:t,children:r}){let n=x.useContext(Lc);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),x.createElement(wa.Provider,{value:e},r)}function r6(e,t=[],r=null,n=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,l=r==null?void 0:r.errors;if(l!=null){let p=s.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);Kt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,p+1))}let d=!1,f=-1;if(r)for(let p=0;p<s.length;p++){let g=s[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=p),g.route.id){let{loaderData:y,errors:v}=r,j=g.route.loader&&!y.hasOwnProperty(g.route.id)&&(!v||v[g.route.id]===void 0);if(g.route.lazy||j){d=!0,f>=0?s=s.slice(0,f+1):s=[s[0]];break}}}let h=r&&n?(p,g)=>{var y,v;n(p,{location:r.location,params:((v=(y=r.matches)==null?void 0:y[0])==null?void 0:v.params)??{},unstable_pattern:UB(r.matches),errorInfo:g})}:void 0;return s.reduceRight((p,g,y)=>{let v,j=!1,_=null,S=null;r&&(v=l&&g.route.id?l[g.route.id]:void 0,_=g.route.errorElement||JB,d&&(f<0&&y===0?(kT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,S=null):f===y&&(j=!0,S=g.route.hydrateFallbackElement||null)));let N=t.concat(s.slice(0,y+1)),E=()=>{let O;return v?O=_:j?O=S:g.route.Component?O=x.createElement(g.route.Component,null):g.route.element?O=g.route.element:O=p,x.createElement(t6,{match:g,routeContext:{outlet:p,matches:N,isDataRoute:r!=null},children:O})};return r&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?x.createElement(PT,{location:r.location,revalidation:r.revalidation,component:_,error:v,children:E(),routeContext:{outlet:null,matches:N,isDataRoute:!0},onError:h}):E()},null)}function Ow(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function n6(e){let t=x.useContext(Lc);return Kt(t,Ow(e)),t}function a6(e){let t=x.useContext(Pp);return Kt(t,Ow(e)),t}function i6(e){let t=x.useContext(wa);return Kt(t,Ow(e)),t}function Aw(e){let t=i6(e),r=t.matches[t.matches.length-1];return Kt(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function s6(){return Aw("useRouteId")}function o6(){var n;let e=x.useContext(Ew),t=a6("useRouteError"),r=Aw("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function l6(){let{router:e}=n6("useNavigate"),t=Aw("useNavigate"),r=x.useRef(!1);return AT(()=>{r.current=!0}),x.useCallback(async(a,s={})=>{ra(r.current,OT),r.current&&(typeof a=="number"?await e.navigate(a):await e.navigate(a,{fromRouteId:t,...s}))},[e,t])}var dO={};function kT(e,t,r){!t&&!dO[e]&&(dO[e]=!0,ra(!1,r))}x.memo(c6);function c6({routes:e,future:t,state:r,onError:n}){return CT(e,void 0,r,n,t)}function Qe({to:e,replace:t,state:r,relative:n}){Kt(Bc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=x.useContext(In);ra(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=x.useContext(wa),{pathname:l}=Ln(),d=_t(),f=Nw(e,_w(s),l,n==="path"),h=JSON.stringify(f);return x.useEffect(()=>{d(JSON.parse(h),{replace:t,state:r,relative:n})},[d,h,n,t,r]),null}function Ye(e){Kt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function u6({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:a,static:s=!1,unstable_useTransitions:l}){Kt(!Bc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=e.replace(/^\/*/,"/"),f=x.useMemo(()=>({basename:d,navigator:a,static:s,unstable_useTransitions:l,future:{}}),[d,a,s,l]);typeof r=="string"&&(r=Wo(r));let{pathname:h="/",search:p="",hash:g="",state:y=null,key:v="default"}=r,j=x.useMemo(()=>{let _=Ni(h,d);return _==null?null:{location:{pathname:_,search:p,hash:g,state:y,key:v},navigationType:n}},[d,h,p,g,y,v,n]);return ra(j!=null,`<Router basename="${d}"> is not able to match the URL "${h}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:x.createElement(In.Provider,{value:f},x.createElement(Kd.Provider,{children:t,value:j}))}function d6({children:e,location:t}){return XB(Wb(e),t)}function Wb(e,t=[]){let r=[];return x.Children.forEach(e,(n,a)=>{if(!x.isValidElement(n))return;let s=[...t,a];if(n.type===x.Fragment){r.push.apply(r,Wb(n.props.children,s));return}Kt(n.type===Ye,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Kt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Wb(n.props.children,s)),r.push(l)}),r}var ym="get",vm="application/x-www-form-urlencoded";function kp(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function f6(e){return kp(e)&&e.tagName.toLowerCase()==="button"}function h6(e){return kp(e)&&e.tagName.toLowerCase()==="form"}function m6(e){return kp(e)&&e.tagName.toLowerCase()==="input"}function p6(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function g6(e,t){return e.button===0&&(!t||t==="_self")&&!p6(e)}var Qh=null;function y6(){if(Qh===null)try{new FormData(document.createElement("form"),0),Qh=!1}catch{Qh=!0}return Qh}var v6=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function a0(e){return e!=null&&!v6.has(e)?(ra(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vm}"`),null):e}function b6(e,t){let r,n,a,s,l;if(h6(e)){let d=e.getAttribute("action");n=d?Ni(d,t):null,r=e.getAttribute("method")||ym,a=a0(e.getAttribute("enctype"))||vm,s=new FormData(e)}else if(f6(e)||m6(e)&&(e.type==="submit"||e.type==="image")){let d=e.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=e.getAttribute("formaction")||d.getAttribute("action");if(n=f?Ni(f,t):null,r=e.getAttribute("formmethod")||d.getAttribute("method")||ym,a=a0(e.getAttribute("formenctype"))||a0(d.getAttribute("enctype"))||vm,s=new FormData(d,e),!y6()){let{name:h,type:p,value:g}=e;if(p==="image"){let y=h?`${h}.`:"";s.append(`${y}x`,"0"),s.append(`${y}y`,"0")}else h&&s.append(h,g)}}else{if(kp(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ym,n=null,a=vm,l=e}return s&&a==="text/plain"&&(l=s,s=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:s,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Cw(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function x6(e,t,r,n){let a=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${n}`:a.pathname=`${a.pathname}.${n}`:a.pathname==="/"?a.pathname=`_root.${n}`:t&&Ni(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${n}`,a}async function w6(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function j6(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function S6(e,t,r){let n=await Promise.all(e.map(async a=>{let s=t.routes[a.route.id];if(s){let l=await w6(s,r);return l.links?l.links():[]}return[]}));return O6(n.flat(1).filter(j6).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function fO(e,t,r,n,a,s){let l=(f,h)=>r[h]?f.route.id!==r[h].route.id:!0,d=(f,h)=>{var p;return r[h].pathname!==f.pathname||((p=r[h].route.path)==null?void 0:p.endsWith("*"))&&r[h].params["*"]!==f.params["*"]};return s==="assets"?t.filter((f,h)=>l(f,h)||d(f,h)):s==="data"?t.filter((f,h)=>{var g;let p=n.routes[f.route.id];if(!p||!p.hasLoader)return!1;if(l(f,h)||d(f,h))return!0;if(f.route.shouldRevalidate){let y=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((g=r[0])==null?void 0:g.params)||{},nextUrl:new URL(e,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function _6(e,t,{includeHydrateFallback:r}={}){return N6(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function N6(e){return[...new Set(e)]}function E6(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function O6(e,t){let r=new Set;return new Set(t),e.reduce((n,a)=>{let s=JSON.stringify(E6(a));return r.has(s)||(r.add(s),n.push({key:s,link:a})),n},[])}function TT(){let e=x.useContext(Lc);return Cw(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function A6(){let e=x.useContext(Pp);return Cw(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Pw=x.createContext(void 0);Pw.displayName="FrameworkContext";function DT(){let e=x.useContext(Pw);return Cw(e,"You must render this element inside a <HydratedRouter> element"),e}function C6(e,t){let r=x.useContext(Pw),[n,a]=x.useState(!1),[s,l]=x.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:h,onMouseLeave:p,onTouchStart:g}=t,y=x.useRef(null);x.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let _=N=>{N.forEach(E=>{l(E.isIntersecting)})},S=new IntersectionObserver(_,{threshold:.5});return y.current&&S.observe(y.current),()=>{S.disconnect()}}},[e]),x.useEffect(()=>{if(n){let _=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(_)}}},[n]);let v=()=>{a(!0)},j=()=>{a(!1),l(!1)};return r?e!=="intent"?[s,y,{}]:[s,y,{onFocus:Vu(d,v),onBlur:Vu(f,j),onMouseEnter:Vu(h,v),onMouseLeave:Vu(p,j),onTouchStart:Vu(g,v)}]:[!1,y,{}]}function Vu(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function P6({page:e,...t}){let{router:r}=TT(),n=x.useMemo(()=>bT(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?x.createElement(T6,{page:e,matches:n,...t}):null}function k6(e){let{manifest:t,routeModules:r}=DT(),[n,a]=x.useState([]);return x.useEffect(()=>{let s=!1;return S6(e,t,r).then(l=>{s||a(l)}),()=>{s=!0}},[e,t,r]),n}function T6({page:e,matches:t,...r}){let n=Ln(),{future:a,manifest:s,routeModules:l}=DT(),{basename:d}=TT(),{loaderData:f,matches:h}=A6(),p=x.useMemo(()=>fO(e,t,h,s,n,"data"),[e,t,h,s,n]),g=x.useMemo(()=>fO(e,t,h,s,n,"assets"),[e,t,h,s,n]),y=x.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let _=new Set,S=!1;if(t.forEach(E=>{var C;let O=s.routes[E.route.id];!O||!O.hasLoader||(!p.some(D=>D.route.id===E.route.id)&&E.route.id in f&&((C=l[E.route.id])!=null&&C.shouldRevalidate)||O.hasClientLoader?S=!0:_.add(E.route.id))}),_.size===0)return[];let N=x6(e,d,a.unstable_trailingSlashAwareDataRequests,"data");return S&&_.size>0&&N.searchParams.set("_routes",t.filter(E=>_.has(E.route.id)).map(E=>E.route.id).join(",")),[N.pathname+N.search]},[d,a.unstable_trailingSlashAwareDataRequests,f,n,s,p,t,e,l]),v=x.useMemo(()=>_6(g,s),[g,s]),j=k6(g);return x.createElement(x.Fragment,null,y.map(_=>x.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...r})),v.map(_=>x.createElement("link",{key:_,rel:"modulepreload",href:_,...r})),j.map(({key:_,link:S})=>x.createElement("link",{key:_,nonce:r.nonce,...S,crossOrigin:S.crossOrigin??r.crossOrigin})))}function D6(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var M6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{M6&&(window.__reactRouterVersion="7.13.0")}catch{}function R6({basename:e,children:t,unstable_useTransitions:r,window:n}){let a=x.useRef();a.current==null&&(a.current=pB({window:n,v5Compat:!0}));let s=a.current,[l,d]=x.useState({action:s.action,location:s.location}),f=x.useCallback(h=>{r===!1?d(h):x.startTransition(()=>d(h))},[r]);return x.useLayoutEffect(()=>s.listen(f),[s,f]),x.createElement(u6,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:s,unstable_useTransitions:r})}var MT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oc=x.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:a,reloadDocument:s,replace:l,state:d,target:f,to:h,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:y,...v},j){let{basename:_,unstable_useTransitions:S}=x.useContext(In),N=typeof h=="string"&&MT.test(h),E=ST(h,_);h=E.to;let O=YB(h,{relative:a}),[C,D,T]=C6(n,v),M=$6(h,{replace:l,state:d,target:f,preventScrollReset:p,relative:a,viewTransition:g,unstable_defaultShouldRevalidate:y,unstable_useTransitions:S});function R(W){t&&t(W),W.defaultPrevented||M(W)}let U=x.createElement("a",{...v,...T,href:E.absoluteURL||O,onClick:E.isExternal||s?t:R,ref:D6(j,D),target:f,"data-discover":!N&&r==="render"?"true":void 0});return C&&!N?x.createElement(x.Fragment,null,U,x.createElement(P6,{page:O})):U});Oc.displayName="Link";var I6=x.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:a=!1,style:s,to:l,viewTransition:d,children:f,...h},p){let g=Qd(l,{relative:h.relative}),y=Ln(),v=x.useContext(Pp),{navigator:j,basename:_}=x.useContext(In),S=v!=null&&K6(g)&&d===!0,N=j.encodeLocation?j.encodeLocation(g).pathname:g.pathname,E=y.pathname,O=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;r||(E=E.toLowerCase(),O=O?O.toLowerCase():null,N=N.toLowerCase()),O&&_&&(O=Ni(O,_)||O);const C=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let D=E===N||!a&&E.startsWith(N)&&E.charAt(C)==="/",T=O!=null&&(O===N||!a&&O.startsWith(N)&&O.charAt(N.length)==="/"),M={isActive:D,isPending:T,isTransitioning:S},R=D?t:void 0,U;typeof n=="function"?U=n(M):U=[n,D?"active":null,T?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let W=typeof s=="function"?s(M):s;return x.createElement(Oc,{...h,"aria-current":R,className:U,ref:p,style:W,to:l,viewTransition:d},typeof f=="function"?f(M):f)});I6.displayName="NavLink";var L6=x.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:a,state:s,method:l=ym,action:d,onSubmit:f,relative:h,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:y,...v},j)=>{let{unstable_useTransitions:_}=x.useContext(In),S=q6(),N=F6(d,{relative:h}),E=l.toLowerCase()==="get"?"get":"post",O=typeof d=="string"&&MT.test(d),C=D=>{if(f&&f(D),D.defaultPrevented)return;D.preventDefault();let T=D.nativeEvent.submitter,M=(T==null?void 0:T.getAttribute("formmethod"))||l,R=()=>S(T||D.currentTarget,{fetcherKey:t,method:M,navigate:r,replace:a,state:s,relative:h,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:y});_&&r!==!1?x.startTransition(()=>R()):R()};return x.createElement("form",{ref:j,method:E,action:N,onSubmit:n?f:C,...v,"data-discover":!O&&e==="render"?"true":void 0})});L6.displayName="Form";function B6(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RT(e){let t=x.useContext(Lc);return Kt(t,B6(e)),t}function $6(e,{target:t,replace:r,state:n,preventScrollReset:a,relative:s,viewTransition:l,unstable_defaultShouldRevalidate:d,unstable_useTransitions:f}={}){let h=_t(),p=Ln(),g=Qd(e,{relative:s});return x.useCallback(y=>{if(g6(y,t)){y.preventDefault();let v=r!==void 0?r:hd(p)===hd(g),j=()=>h(e,{replace:v,state:n,preventScrollReset:a,relative:s,viewTransition:l,unstable_defaultShouldRevalidate:d});f?x.startTransition(()=>j()):j()}},[p,h,g,r,n,t,e,a,s,l,d,f])}var U6=0,z6=()=>`__${String(++U6)}__`;function q6(){let{router:e}=RT("useSubmit"),{basename:t}=x.useContext(In),r=s6(),n=e.fetch,a=e.navigate;return x.useCallback(async(s,l={})=>{let{action:d,method:f,encType:h,formData:p,body:g}=b6(s,t);if(l.navigate===!1){let y=l.fetcherKey||z6();await n(y,r,l.action||d,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:g,formMethod:l.method||f,formEncType:l.encType||h,flushSync:l.flushSync})}else await a(l.action||d,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:g,formMethod:l.method||f,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[n,a,t,r])}function F6(e,{relative:t}={}){let{basename:r}=x.useContext(In),n=x.useContext(wa);Kt(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),s={...Qd(e||".",{relative:t})},l=Ln();if(e==null){s.search=l.search;let d=new URLSearchParams(s.search),f=d.getAll("index");if(f.some(p=>p==="")){d.delete("index"),f.filter(g=>g).forEach(g=>d.append("index",g));let p=d.toString();s.search=p?`?${p}`:""}}return(!e||e===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:wi([r,s.pathname])),hd(s)}function K6(e,{relative:t}={}){let r=x.useContext(NT);Kt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=RT("useViewTransitionState"),a=Qd(e,{relative:t});if(!r.isTransitioning)return!1;let s=Ni(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=Ni(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Em(a.pathname,l)!=null||Em(a.pathname,s)!=null}var Tp=vT(),$c=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Q6={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},ws,Sw,oT,H6=(oT=class{constructor(){Me(this,ws,Q6);Me(this,Sw,!1)}setTimeoutProvider(e){_e(this,ws,e)}setTimeout(e,t){return $(this,ws).setTimeout(e,t)}clearTimeout(e){$(this,ws).clearTimeout(e)}setInterval(e,t){return $(this,ws).setInterval(e,t)}clearInterval(e){$(this,ws).clearInterval(e)}},ws=new WeakMap,Sw=new WeakMap,oT),bo=new H6;function V6(e){setTimeout(e,0)}var Bo=typeof window>"u"||"Deno"in globalThis;function en(){}function G6(e,t){return typeof e=="function"?e(t):e}function Xb(e){return typeof e=="number"&&e>=0&&e!==1/0}function IT(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ks(e,t){return typeof e=="function"?e(t):e}function ea(e,t){return typeof e=="function"?e(t):e}function hO(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:s,queryKey:l,stale:d}=e;if(l){if(n){if(t.queryHash!==kw(l,t.options))return!1}else if(!md(t.queryKey,l))return!1}if(r!=="all"){const f=t.isActive();if(r==="active"&&!f||r==="inactive"&&f)return!1}return!(typeof d=="boolean"&&t.isStale()!==d||a&&a!==t.state.fetchStatus||s&&!s(t))}function mO(e,t){const{exact:r,status:n,predicate:a,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(r){if($o(t.options.mutationKey)!==$o(s))return!1}else if(!md(t.options.mutationKey,s))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function kw(e,t){return((t==null?void 0:t.queryKeyHashFn)||$o)(e)}function $o(e){return JSON.stringify(e,(t,r)=>Zb(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function md(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>md(e[r],t[r])):!1}var Y6=Object.prototype.hasOwnProperty;function LT(e,t,r=0){if(e===t)return e;if(r>500)return t;const n=pO(e)&&pO(t);if(!n&&!(Zb(e)&&Zb(t)))return t;const s=(n?e:Object.keys(e)).length,l=n?t:Object.keys(t),d=l.length,f=n?new Array(d):{};let h=0;for(let p=0;p<d;p++){const g=n?p:l[p],y=e[g],v=t[g];if(y===v){f[g]=y,(n?p<s:Y6.call(e,g))&&h++;continue}if(y===null||v===null||typeof y!="object"||typeof v!="object"){f[g]=v;continue}const j=LT(y,v,r+1);f[g]=j,j===y&&h++}return s===d&&h===s?e:f}function Om(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function pO(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Zb(e){if(!gO(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!gO(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function gO(e){return Object.prototype.toString.call(e)==="[object Object]"}function W6(e){return new Promise(t=>{bo.setTimeout(t,e)})}function Jb(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?LT(e,t):t}function X6(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function Z6(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Tw=Symbol();function BT(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Tw?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Dw(e,t){return typeof e=="function"?e(...t):!!e}function J6(e,t,r){let n=!1,a;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(a??(a=t()),n||(n=!0,a.aborted?r():a.addEventListener("abort",r,{once:!0})),a)}),e}var Eo,js,pc,lT,e$=(lT=class extends $c{constructor(){super();Me(this,Eo);Me(this,js);Me(this,pc);_e(this,pc,t=>{if(!Bo&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){$(this,js)||this.setEventListener($(this,pc))}onUnsubscribe(){var t;this.hasListeners()||((t=$(this,js))==null||t.call(this),_e(this,js,void 0))}setEventListener(t){var r;_e(this,pc,t),(r=$(this,js))==null||r.call(this),_e(this,js,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){$(this,Eo)!==t&&(_e(this,Eo,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof $(this,Eo)=="boolean"?$(this,Eo):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Eo=new WeakMap,js=new WeakMap,pc=new WeakMap,lT),Mw=new e$;function ex(){let e,t;const r=new Promise((a,s)=>{e=a,t=s});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var t$=V6;function r$(){let e=[],t=0,r=d=>{d()},n=d=>{d()},a=t$;const s=d=>{t?e.push(d):a(()=>{r(d)})},l=()=>{const d=e;e=[],d.length&&a(()=>{n(()=>{d.forEach(f=>{r(f)})})})};return{batch:d=>{let f;t++;try{f=d()}finally{t--,t||l()}return f},batchCalls:d=>(...f)=>{s(()=>{d(...f)})},schedule:s,setNotifyFunction:d=>{r=d},setBatchNotifyFunction:d=>{n=d},setScheduler:d=>{a=d}}}var br=r$(),gc,Ss,yc,cT,n$=(cT=class extends $c{constructor(){super();Me(this,gc,!0);Me(this,Ss);Me(this,yc);_e(this,yc,t=>{if(!Bo&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){$(this,Ss)||this.setEventListener($(this,yc))}onUnsubscribe(){var t;this.hasListeners()||((t=$(this,Ss))==null||t.call(this),_e(this,Ss,void 0))}setEventListener(t){var r;_e(this,yc,t),(r=$(this,Ss))==null||r.call(this),_e(this,Ss,t(this.setOnline.bind(this)))}setOnline(t){$(this,gc)!==t&&(_e(this,gc,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return $(this,gc)}},gc=new WeakMap,Ss=new WeakMap,yc=new WeakMap,cT),Am=new n$;function a$(e){return Math.min(1e3*2**e,3e4)}function $T(e){return(e??"online")==="online"?Am.isOnline():!0}var tx=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function UT(e){let t=!1,r=0,n;const a=ex(),s=()=>a.status!=="pending",l=_=>{var S;if(!s()){const N=new tx(_);y(N),(S=e.onCancel)==null||S.call(e,N)}},d=()=>{t=!0},f=()=>{t=!1},h=()=>Mw.isFocused()&&(e.networkMode==="always"||Am.isOnline())&&e.canRun(),p=()=>$T(e.networkMode)&&e.canRun(),g=_=>{s()||(n==null||n(),a.resolve(_))},y=_=>{s()||(n==null||n(),a.reject(_))},v=()=>new Promise(_=>{var S;n=N=>{(s()||h())&&_(N)},(S=e.onPause)==null||S.call(e)}).then(()=>{var _;n=void 0,s()||(_=e.onContinue)==null||_.call(e)}),j=()=>{if(s())return;let _;const S=r===0?e.initialPromise:void 0;try{_=S??e.fn()}catch(N){_=Promise.reject(N)}Promise.resolve(_).then(g).catch(N=>{var T;if(s())return;const E=e.retry??(Bo?0:3),O=e.retryDelay??a$,C=typeof O=="function"?O(r,N):O,D=E===!0||typeof E=="number"&&r<E||typeof E=="function"&&E(r,N);if(t||!D){y(N);return}r++,(T=e.onFail)==null||T.call(e,r,N),W6(C).then(()=>h()?void 0:v()).then(()=>{t?y(N):j()})})};return{promise:a,status:()=>a.status,cancel:l,continue:()=>(n==null||n(),a),cancelRetry:d,continueRetry:f,canStart:p,start:()=>(p()?j():v().then(j),a)}}var Oo,uT,zT=(uT=class{constructor(){Me(this,Oo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Xb(this.gcTime)&&_e(this,Oo,bo.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Bo?1/0:300*1e3))}clearGcTimeout(){$(this,Oo)&&(bo.clearTimeout($(this,Oo)),_e(this,Oo,void 0))}},Oo=new WeakMap,uT),Ao,vc,Jn,Co,Ar,$d,Po,ha,ui,dT,i$=(dT=class extends zT{constructor(t){super();Me(this,ha);Me(this,Ao);Me(this,vc);Me(this,Jn);Me(this,Co);Me(this,Ar);Me(this,$d);Me(this,Po);_e(this,Po,!1),_e(this,$d,t.defaultOptions),this.setOptions(t.options),this.observers=[],_e(this,Co,t.client),_e(this,Jn,$(this,Co).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,_e(this,Ao,vO(this.options)),this.state=t.state??$(this,Ao),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=$(this,Ar))==null?void 0:t.promise}setOptions(t){if(this.options={...$(this,$d),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=vO(this.options);r.data!==void 0&&(this.setState(yO(r.data,r.dataUpdatedAt)),_e(this,Ao,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&$(this,Jn).remove(this)}setData(t,r){const n=Jb(this.state.data,t,this.options);return Ge(this,ha,ui).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Ge(this,ha,ui).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=$(this,Ar))==null?void 0:n.promise;return(a=$(this,Ar))==null||a.cancel(t),r?r.then(en).catch(en):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState($(this,Ao))}isActive(){return this.observers.some(t=>ea(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Tw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ks(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!IT(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=$(this,Ar))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=$(this,Ar))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),$(this,Jn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||($(this,Ar)&&($(this,Po)?$(this,Ar).cancel({revert:!0}):$(this,Ar).cancelRetry()),this.scheduleGc()),$(this,Jn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ge(this,ha,ui).call(this,{type:"invalidate"})}async fetch(t,r){var f,h,p,g,y,v,j,_,S,N,E,O;if(this.state.fetchStatus!=="idle"&&((f=$(this,Ar))==null?void 0:f.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if($(this,Ar))return $(this,Ar).continueRetry(),$(this,Ar).promise}if(t&&this.setOptions(t),!this.options.queryFn){const C=this.observers.find(D=>D.options.queryFn);C&&this.setOptions(C.options)}const n=new AbortController,a=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(_e(this,Po,!0),n.signal)})},s=()=>{const C=BT(this.options,r),T=(()=>{const M={client:$(this,Co),queryKey:this.queryKey,meta:this.meta};return a(M),M})();return _e(this,Po,!1),this.options.persister?this.options.persister(C,T,this):C(T)},d=(()=>{const C={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:$(this,Co),state:this.state,fetchFn:s};return a(C),C})();(h=this.options.behavior)==null||h.onFetch(d,this),_e(this,vc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=d.fetchOptions)==null?void 0:p.meta))&&Ge(this,ha,ui).call(this,{type:"fetch",meta:(g=d.fetchOptions)==null?void 0:g.meta}),_e(this,Ar,UT({initialPromise:r==null?void 0:r.initialPromise,fn:d.fetchFn,onCancel:C=>{C instanceof tx&&C.revert&&this.setState({...$(this,vc),fetchStatus:"idle"}),n.abort()},onFail:(C,D)=>{Ge(this,ha,ui).call(this,{type:"failed",failureCount:C,error:D})},onPause:()=>{Ge(this,ha,ui).call(this,{type:"pause"})},onContinue:()=>{Ge(this,ha,ui).call(this,{type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0}));try{const C=await $(this,Ar).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(v=(y=$(this,Jn).config).onSuccess)==null||v.call(y,C,this),(_=(j=$(this,Jn).config).onSettled)==null||_.call(j,C,this.state.error,this),C}catch(C){if(C instanceof tx){if(C.silent)return $(this,Ar).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw Ge(this,ha,ui).call(this,{type:"error",error:C}),(N=(S=$(this,Jn).config).onError)==null||N.call(S,C,this),(O=(E=$(this,Jn).config).onSettled)==null||O.call(E,this.state.data,C,this),C}finally{this.scheduleGc()}}},Ao=new WeakMap,vc=new WeakMap,Jn=new WeakMap,Co=new WeakMap,Ar=new WeakMap,$d=new WeakMap,Po=new WeakMap,ha=new WeakSet,ui=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...qT(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,...yO(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return _e(this,vc,t.manual?a:void 0),a;case"error":const s=t.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),br.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),$(this,Jn).notify({query:this,type:"updated",action:t})})},dT);function qT(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:$T(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function yO(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function vO(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var hn,it,Ud,Jr,ko,bc,hi,_s,zd,xc,wc,To,Do,Ns,jc,bt,id,rx,nx,ax,ix,sx,ox,lx,FT,fT,s$=(fT=class extends $c{constructor(t,r){super();Me(this,bt);Me(this,hn);Me(this,it);Me(this,Ud);Me(this,Jr);Me(this,ko);Me(this,bc);Me(this,hi);Me(this,_s);Me(this,zd);Me(this,xc);Me(this,wc);Me(this,To);Me(this,Do);Me(this,Ns);Me(this,jc,new Set);this.options=r,_e(this,hn,t),_e(this,_s,null),_e(this,hi,ex()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&($(this,it).addObserver(this),bO($(this,it),this.options)?Ge(this,bt,id).call(this):this.updateResult(),Ge(this,bt,ix).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return cx($(this,it),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return cx($(this,it),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ge(this,bt,sx).call(this),Ge(this,bt,ox).call(this),$(this,it).removeObserver(this)}setOptions(t){const r=this.options,n=$(this,it);if(this.options=$(this,hn).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ea(this.options.enabled,$(this,it))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ge(this,bt,lx).call(this),$(this,it).setOptions(this.options),r._defaulted&&!Om(this.options,r)&&$(this,hn).getQueryCache().notify({type:"observerOptionsUpdated",query:$(this,it),observer:this});const a=this.hasListeners();a&&xO($(this,it),n,this.options,r)&&Ge(this,bt,id).call(this),this.updateResult(),a&&($(this,it)!==n||ea(this.options.enabled,$(this,it))!==ea(r.enabled,$(this,it))||ks(this.options.staleTime,$(this,it))!==ks(r.staleTime,$(this,it)))&&Ge(this,bt,rx).call(this);const s=Ge(this,bt,nx).call(this);a&&($(this,it)!==n||ea(this.options.enabled,$(this,it))!==ea(r.enabled,$(this,it))||s!==$(this,Ns))&&Ge(this,bt,ax).call(this,s)}getOptimisticResult(t){const r=$(this,hn).getQueryCache().build($(this,hn),t),n=this.createResult(r,t);return l$(this,n)&&(_e(this,Jr,n),_e(this,bc,this.options),_e(this,ko,$(this,it).state)),n}getCurrentResult(){return $(this,Jr)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&$(this,hi).status==="pending"&&$(this,hi).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(t){$(this,jc).add(t)}getCurrentQuery(){return $(this,it)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=$(this,hn).defaultQueryOptions(t),n=$(this,hn).getQueryCache().build($(this,hn),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return Ge(this,bt,id).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),$(this,Jr)))}createResult(t,r){var U;const n=$(this,it),a=this.options,s=$(this,Jr),l=$(this,ko),d=$(this,bc),h=t!==n?t.state:$(this,Ud),{state:p}=t;let g={...p},y=!1,v;if(r._optimisticResults){const W=this.hasListeners(),F=!W&&bO(t,r),z=W&&xO(t,n,r,a);(F||z)&&(g={...g,...qT(p.data,t.options)}),r._optimisticResults==="isRestoring"&&(g.fetchStatus="idle")}let{error:j,errorUpdatedAt:_,status:S}=g;v=g.data;let N=!1;if(r.placeholderData!==void 0&&v===void 0&&S==="pending"){let W;s!=null&&s.isPlaceholderData&&r.placeholderData===(d==null?void 0:d.placeholderData)?(W=s.data,N=!0):W=typeof r.placeholderData=="function"?r.placeholderData((U=$(this,wc))==null?void 0:U.state.data,$(this,wc)):r.placeholderData,W!==void 0&&(S="success",v=Jb(s==null?void 0:s.data,W,r),y=!0)}if(r.select&&v!==void 0&&!N)if(s&&v===(l==null?void 0:l.data)&&r.select===$(this,zd))v=$(this,xc);else try{_e(this,zd,r.select),v=r.select(v),v=Jb(s==null?void 0:s.data,v,r),_e(this,xc,v),_e(this,_s,null)}catch(W){_e(this,_s,W)}$(this,_s)&&(j=$(this,_s),v=$(this,xc),_=Date.now(),S="error");const E=g.fetchStatus==="fetching",O=S==="pending",C=S==="error",D=O&&E,T=v!==void 0,R={status:S,fetchStatus:g.fetchStatus,isPending:O,isSuccess:S==="success",isError:C,isInitialLoading:D,isLoading:D,data:v,dataUpdatedAt:g.dataUpdatedAt,error:j,errorUpdatedAt:_,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>h.dataUpdateCount||g.errorUpdateCount>h.errorUpdateCount,isFetching:E,isRefetching:E&&!O,isLoadingError:C&&!T,isPaused:g.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:C&&T,isStale:Rw(t,r),refetch:this.refetch,promise:$(this,hi),isEnabled:ea(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const W=R.data!==void 0,F=R.status==="error"&&!W,z=me=>{F?me.reject(R.error):W&&me.resolve(R.data)},pe=()=>{const me=_e(this,hi,R.promise=ex());z(me)},oe=$(this,hi);switch(oe.status){case"pending":t.queryHash===n.queryHash&&z(oe);break;case"fulfilled":(F||R.data!==oe.value)&&pe();break;case"rejected":(!F||R.error!==oe.reason)&&pe();break}}return R}updateResult(){const t=$(this,Jr),r=this.createResult($(this,it),this.options);if(_e(this,ko,$(this,it).state),_e(this,bc,this.options),$(this,ko).data!==void 0&&_e(this,wc,$(this,it)),Om(r,t))return;_e(this,Jr,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,s=typeof a=="function"?a():a;if(s==="all"||!s&&!$(this,jc).size)return!0;const l=new Set(s??$(this,jc));return this.options.throwOnError&&l.add("error"),Object.keys($(this,Jr)).some(d=>{const f=d;return $(this,Jr)[f]!==t[f]&&l.has(f)})};Ge(this,bt,FT).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ge(this,bt,ix).call(this)}},hn=new WeakMap,it=new WeakMap,Ud=new WeakMap,Jr=new WeakMap,ko=new WeakMap,bc=new WeakMap,hi=new WeakMap,_s=new WeakMap,zd=new WeakMap,xc=new WeakMap,wc=new WeakMap,To=new WeakMap,Do=new WeakMap,Ns=new WeakMap,jc=new WeakMap,bt=new WeakSet,id=function(t){Ge(this,bt,lx).call(this);let r=$(this,it).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(en)),r},rx=function(){Ge(this,bt,sx).call(this);const t=ks(this.options.staleTime,$(this,it));if(Bo||$(this,Jr).isStale||!Xb(t))return;const n=IT($(this,Jr).dataUpdatedAt,t)+1;_e(this,To,bo.setTimeout(()=>{$(this,Jr).isStale||this.updateResult()},n))},nx=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval($(this,it)):this.options.refetchInterval)??!1},ax=function(t){Ge(this,bt,ox).call(this),_e(this,Ns,t),!(Bo||ea(this.options.enabled,$(this,it))===!1||!Xb($(this,Ns))||$(this,Ns)===0)&&_e(this,Do,bo.setInterval(()=>{(this.options.refetchIntervalInBackground||Mw.isFocused())&&Ge(this,bt,id).call(this)},$(this,Ns)))},ix=function(){Ge(this,bt,rx).call(this),Ge(this,bt,ax).call(this,Ge(this,bt,nx).call(this))},sx=function(){$(this,To)&&(bo.clearTimeout($(this,To)),_e(this,To,void 0))},ox=function(){$(this,Do)&&(bo.clearInterval($(this,Do)),_e(this,Do,void 0))},lx=function(){const t=$(this,hn).getQueryCache().build($(this,hn),this.options);if(t===$(this,it))return;const r=$(this,it);_e(this,it,t),_e(this,Ud,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},FT=function(t){br.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r($(this,Jr))}),$(this,hn).getQueryCache().notify({query:$(this,it),type:"observerResultsUpdated"})})},fT);function o$(e,t){return ea(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function bO(e,t){return o$(e,t)||e.state.data!==void 0&&cx(e,t,t.refetchOnMount)}function cx(e,t,r){if(ea(t.enabled,e)!==!1&&ks(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&Rw(e,t)}return!1}function xO(e,t,r,n){return(e!==t||ea(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Rw(e,r)}function Rw(e,t){return ea(t.enabled,e)!==!1&&e.isStaleByTime(ks(t.staleTime,e))}function l$(e,t){return!Om(e.getCurrentResult(),t)}function wO(e){return{onFetch:(t,r)=>{var p,g,y,v,j;const n=t.options,a=(y=(g=(p=t.fetchOptions)==null?void 0:p.meta)==null?void 0:g.fetchMore)==null?void 0:y.direction,s=((v=t.state.data)==null?void 0:v.pages)||[],l=((j=t.state.data)==null?void 0:j.pageParams)||[];let d={pages:[],pageParams:[]},f=0;const h=async()=>{let _=!1;const S=O=>{J6(O,()=>t.signal,()=>_=!0)},N=BT(t.options,t.fetchOptions),E=async(O,C,D)=>{if(_)return Promise.reject();if(C==null&&O.pages.length)return Promise.resolve(O);const M=(()=>{const F={client:t.client,queryKey:t.queryKey,pageParam:C,direction:D?"backward":"forward",meta:t.options.meta};return S(F),F})(),R=await N(M),{maxPages:U}=t.options,W=D?Z6:X6;return{pages:W(O.pages,R,U),pageParams:W(O.pageParams,C,U)}};if(a&&s.length){const O=a==="backward",C=O?c$:jO,D={pages:s,pageParams:l},T=C(n,D);d=await E(D,T,O)}else{const O=e??s.length;do{const C=f===0?l[0]??n.initialPageParam:jO(n,d);if(f>0&&C==null)break;d=await E(d,C),f++}while(f<O)}return d};t.options.persister?t.fetchFn=()=>{var _,S;return(S=(_=t.options).persister)==null?void 0:S.call(_,h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=h}}}function jO(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function c$(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var qd,Da,Hr,Mo,Ma,ps,hT,u$=(hT=class extends zT{constructor(t){super();Me(this,Ma);Me(this,qd);Me(this,Da);Me(this,Hr);Me(this,Mo);_e(this,qd,t.client),this.mutationId=t.mutationId,_e(this,Hr,t.mutationCache),_e(this,Da,[]),this.state=t.state||KT(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){$(this,Da).includes(t)||($(this,Da).push(t),this.clearGcTimeout(),$(this,Hr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){_e(this,Da,$(this,Da).filter(r=>r!==t)),this.scheduleGc(),$(this,Hr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){$(this,Da).length||(this.state.status==="pending"?this.scheduleGc():$(this,Hr).remove(this))}continue(){var t;return((t=$(this,Mo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var l,d,f,h,p,g,y,v,j,_,S,N,E,O,C,D,T,M;const r=()=>{Ge(this,Ma,ps).call(this,{type:"continue"})},n={client:$(this,qd),meta:this.options.meta,mutationKey:this.options.mutationKey};_e(this,Mo,UT({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(R,U)=>{Ge(this,Ma,ps).call(this,{type:"failed",failureCount:R,error:U})},onPause:()=>{Ge(this,Ma,ps).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>$(this,Hr).canRun(this)}));const a=this.state.status==="pending",s=!$(this,Mo).canStart();try{if(a)r();else{Ge(this,Ma,ps).call(this,{type:"pending",variables:t,isPaused:s}),$(this,Hr).config.onMutate&&await $(this,Hr).config.onMutate(t,this,n);const U=await((d=(l=this.options).onMutate)==null?void 0:d.call(l,t,n));U!==this.state.context&&Ge(this,Ma,ps).call(this,{type:"pending",context:U,variables:t,isPaused:s})}const R=await $(this,Mo).start();return await((h=(f=$(this,Hr).config).onSuccess)==null?void 0:h.call(f,R,t,this.state.context,this,n)),await((g=(p=this.options).onSuccess)==null?void 0:g.call(p,R,t,this.state.context,n)),await((v=(y=$(this,Hr).config).onSettled)==null?void 0:v.call(y,R,null,this.state.variables,this.state.context,this,n)),await((_=(j=this.options).onSettled)==null?void 0:_.call(j,R,null,t,this.state.context,n)),Ge(this,Ma,ps).call(this,{type:"success",data:R}),R}catch(R){try{await((N=(S=$(this,Hr).config).onError)==null?void 0:N.call(S,R,t,this.state.context,this,n))}catch(U){Promise.reject(U)}try{await((O=(E=this.options).onError)==null?void 0:O.call(E,R,t,this.state.context,n))}catch(U){Promise.reject(U)}try{await((D=(C=$(this,Hr).config).onSettled)==null?void 0:D.call(C,void 0,R,this.state.variables,this.state.context,this,n))}catch(U){Promise.reject(U)}try{await((M=(T=this.options).onSettled)==null?void 0:M.call(T,void 0,R,t,this.state.context,n))}catch(U){Promise.reject(U)}throw Ge(this,Ma,ps).call(this,{type:"error",error:R}),R}finally{$(this,Hr).runNext(this)}}},qd=new WeakMap,Da=new WeakMap,Hr=new WeakMap,Mo=new WeakMap,Ma=new WeakSet,ps=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),br.batch(()=>{$(this,Da).forEach(n=>{n.onMutationUpdate(t)}),$(this,Hr).notify({mutation:this,type:"updated",action:t})})},hT);function KT(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var mi,ma,Fd,mT,d$=(mT=class extends $c{constructor(t={}){super();Me(this,mi);Me(this,ma);Me(this,Fd);this.config=t,_e(this,mi,new Set),_e(this,ma,new Map),_e(this,Fd,0)}build(t,r,n){const a=new u$({client:t,mutationCache:this,mutationId:++Kh(this,Fd)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){$(this,mi).add(t);const r=Hh(t);if(typeof r=="string"){const n=$(this,ma).get(r);n?n.push(t):$(this,ma).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if($(this,mi).delete(t)){const r=Hh(t);if(typeof r=="string"){const n=$(this,ma).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&$(this,ma).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Hh(t);if(typeof r=="string"){const n=$(this,ma).get(r),a=n==null?void 0:n.find(s=>s.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=Hh(t);if(typeof r=="string"){const a=(n=$(this,ma).get(r))==null?void 0:n.find(s=>s!==t&&s.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){br.batch(()=>{$(this,mi).forEach(t=>{this.notify({type:"removed",mutation:t})}),$(this,mi).clear(),$(this,ma).clear()})}getAll(){return Array.from($(this,mi))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>mO(r,n))}findAll(t={}){return this.getAll().filter(r=>mO(t,r))}notify(t){br.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return br.batch(()=>Promise.all(t.map(r=>r.continue().catch(en))))}},mi=new WeakMap,ma=new WeakMap,Fd=new WeakMap,mT);function Hh(e){var t;return(t=e.options.scope)==null?void 0:t.id}var pi,Es,mn,gi,_i,bm,ux,pT,f$=(pT=class extends $c{constructor(r,n){super();Me(this,_i);Me(this,pi);Me(this,Es);Me(this,mn);Me(this,gi);_e(this,pi,r),this.setOptions(n),this.bindMethods(),Ge(this,_i,bm).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=$(this,pi).defaultMutationOptions(r),Om(this.options,n)||$(this,pi).getMutationCache().notify({type:"observerOptionsUpdated",mutation:$(this,mn),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&$o(n.mutationKey)!==$o(this.options.mutationKey)?this.reset():((a=$(this,mn))==null?void 0:a.state.status)==="pending"&&$(this,mn).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=$(this,mn))==null||r.removeObserver(this)}onMutationUpdate(r){Ge(this,_i,bm).call(this),Ge(this,_i,ux).call(this,r)}getCurrentResult(){return $(this,Es)}reset(){var r;(r=$(this,mn))==null||r.removeObserver(this),_e(this,mn,void 0),Ge(this,_i,bm).call(this),Ge(this,_i,ux).call(this)}mutate(r,n){var a;return _e(this,gi,n),(a=$(this,mn))==null||a.removeObserver(this),_e(this,mn,$(this,pi).getMutationCache().build($(this,pi),this.options)),$(this,mn).addObserver(this),$(this,mn).execute(r)}},pi=new WeakMap,Es=new WeakMap,mn=new WeakMap,gi=new WeakMap,_i=new WeakSet,bm=function(){var n;const r=((n=$(this,mn))==null?void 0:n.state)??KT();_e(this,Es,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},ux=function(r){br.batch(()=>{var n,a,s,l,d,f,h,p;if($(this,gi)&&this.hasListeners()){const g=$(this,Es).variables,y=$(this,Es).context,v={client:$(this,pi),meta:this.options.meta,mutationKey:this.options.mutationKey};if((r==null?void 0:r.type)==="success"){try{(a=(n=$(this,gi)).onSuccess)==null||a.call(n,r.data,g,y,v)}catch(j){Promise.reject(j)}try{(l=(s=$(this,gi)).onSettled)==null||l.call(s,r.data,null,g,y,v)}catch(j){Promise.reject(j)}}else if((r==null?void 0:r.type)==="error"){try{(f=(d=$(this,gi)).onError)==null||f.call(d,r.error,g,y,v)}catch(j){Promise.reject(j)}try{(p=(h=$(this,gi)).onSettled)==null||p.call(h,void 0,r.error,g,y,v)}catch(j){Promise.reject(j)}}}this.listeners.forEach(g=>{g($(this,Es))})})},pT),Ra,gT,h$=(gT=class extends $c{constructor(t={}){super();Me(this,Ra);this.config=t,_e(this,Ra,new Map)}build(t,r,n){const a=r.queryKey,s=r.queryHash??kw(a,r);let l=this.get(s);return l||(l=new i$({client:t,queryKey:a,queryHash:s,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(l)),l}add(t){$(this,Ra).has(t.queryHash)||($(this,Ra).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=$(this,Ra).get(t.queryHash);r&&(t.destroy(),r===t&&$(this,Ra).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){br.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return $(this,Ra).get(t)}getAll(){return[...$(this,Ra).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>hO(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>hO(t,n)):r}notify(t){br.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){br.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){br.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ra=new WeakMap,gT),Wt,Os,As,Sc,_c,Cs,Nc,Ec,yT,m$=(yT=class{constructor(e={}){Me(this,Wt);Me(this,Os);Me(this,As);Me(this,Sc);Me(this,_c);Me(this,Cs);Me(this,Nc);Me(this,Ec);_e(this,Wt,e.queryCache||new h$),_e(this,Os,e.mutationCache||new d$),_e(this,As,e.defaultOptions||{}),_e(this,Sc,new Map),_e(this,_c,new Map),_e(this,Cs,0)}mount(){Kh(this,Cs)._++,$(this,Cs)===1&&(_e(this,Nc,Mw.subscribe(async e=>{e&&(await this.resumePausedMutations(),$(this,Wt).onFocus())})),_e(this,Ec,Am.subscribe(async e=>{e&&(await this.resumePausedMutations(),$(this,Wt).onOnline())})))}unmount(){var e,t;Kh(this,Cs)._--,$(this,Cs)===0&&((e=$(this,Nc))==null||e.call(this),_e(this,Nc,void 0),(t=$(this,Ec))==null||t.call(this),_e(this,Ec,void 0))}isFetching(e){return $(this,Wt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return $(this,Os).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=$(this,Wt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=$(this,Wt).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(ks(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return $(this,Wt).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=$(this,Wt).get(n.queryHash),s=a==null?void 0:a.state.data,l=G6(t,s);if(l!==void 0)return $(this,Wt).build(this,n).setData(l,{...r,manual:!0})}setQueriesData(e,t,r){return br.batch(()=>$(this,Wt).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=$(this,Wt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=$(this,Wt);br.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=$(this,Wt);return br.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=br.batch(()=>$(this,Wt).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(en).catch(en)}invalidateQueries(e,t={}){return br.batch(()=>($(this,Wt).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=br.batch(()=>$(this,Wt).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let s=a.fetch(void 0,r);return r.throwOnError||(s=s.catch(en)),a.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(en)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=$(this,Wt).build(this,t);return r.isStaleByTime(ks(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(en).catch(en)}fetchInfiniteQuery(e){return e.behavior=wO(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(en).catch(en)}ensureInfiniteQueryData(e){return e.behavior=wO(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Am.isOnline()?$(this,Os).resumePausedMutations():Promise.resolve()}getQueryCache(){return $(this,Wt)}getMutationCache(){return $(this,Os)}getDefaultOptions(){return $(this,As)}setDefaultOptions(e){_e(this,As,e)}setQueryDefaults(e,t){$(this,Sc).set($o(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...$(this,Sc).values()],r={};return t.forEach(n=>{md(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){$(this,_c).set($o(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...$(this,_c).values()],r={};return t.forEach(n=>{md(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...$(this,As).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=kw(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Tw&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...$(this,As).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){$(this,Wt).clear(),$(this,Os).clear()}},Wt=new WeakMap,Os=new WeakMap,As=new WeakMap,Sc=new WeakMap,_c=new WeakMap,Cs=new WeakMap,Nc=new WeakMap,Ec=new WeakMap,yT),QT=x.createContext(void 0),ze=e=>{const t=x.useContext(QT);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},p$=({client:e,children:t})=>(x.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),c.jsx(QT.Provider,{value:e,children:t})),HT=x.createContext(!1),g$=()=>x.useContext(HT);HT.Provider;function y$(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var v$=x.createContext(y$()),b$=()=>x.useContext(v$),x$=(e,t,r)=>{const n=r!=null&&r.state.error&&typeof e.throwOnError=="function"?Dw(e.throwOnError,[r.state.error,r]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||n)&&(t.isReset()||(e.retryOnMount=!1))},w$=e=>{x.useEffect(()=>{e.clearReset()},[e])},j$=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||Dw(r,[e.error,n])),S$=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},_$=(e,t)=>e.isLoading&&e.isFetching&&!t,N$=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,SO=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function E$(e,t,r){var y,v,j,_;const n=g$(),a=b$(),s=ze(),l=s.defaultQueryOptions(e);(v=(y=s.getDefaultOptions().queries)==null?void 0:y._experimental_beforeQuery)==null||v.call(y,l);const d=s.getQueryCache().get(l.queryHash);l._optimisticResults=n?"isRestoring":"optimistic",S$(l),x$(l,a,d),w$(a);const f=!s.getQueryCache().get(l.queryHash),[h]=x.useState(()=>new t(s,l)),p=h.getOptimisticResult(l),g=!n&&e.subscribed!==!1;if(x.useSyncExternalStore(x.useCallback(S=>{const N=g?h.subscribe(br.batchCalls(S)):en;return h.updateResult(),N},[h,g]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),x.useEffect(()=>{h.setOptions(l)},[l,h]),N$(l,p))throw SO(l,h,a);if(j$({result:p,errorResetBoundary:a,throwOnError:l.throwOnError,query:d,suspense:l.suspense}))throw p.error;if((_=(j=s.getDefaultOptions().queries)==null?void 0:j._experimental_afterQuery)==null||_.call(j,l,p),l.experimental_prefetchInRender&&!Bo&&_$(p,n)){const S=f?SO(l,h,a):d==null?void 0:d.promise;S==null||S.catch(en).finally(()=>{h.updateResult()})}return l.notifyOnChangeProps?p:h.trackResult(p)}function ut(e,t){return E$(e,s$)}function xt(e,t){const r=ze(),[n]=x.useState(()=>new f$(r,e));x.useEffect(()=>{n.setOptions(e)},[n,e]);const a=x.useSyncExternalStore(x.useCallback(l=>n.subscribe(br.batchCalls(l)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=x.useCallback((l,d)=>{n.mutate(l,d).catch(en)},[n]);if(a.error&&Dw(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:s,mutateAsync:a.mutate}}const O$="modulepreload",A$=function(e){return"/"+e},_O={},Iw=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let l=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));a=l(r.map(h=>{if(h=A$(h),h in _O)return;_O[h]=!0;const p=h.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":O$,p||(y.as="script"),y.crossOrigin="",y.href=h,f&&y.setAttribute("nonce",f),document.head.appendChild(y),p)return new Promise((v,j)=>{y.addEventListener("load",v),y.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return a.then(l=>{for(const d of l||[])d.status==="rejected"&&s(d.reason);return t().catch(s)})};function Dp(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function C$(e,t,r,n){function a(s){return s instanceof r?s:new r(function(l){l(s)})}return new(r||(r=Promise))(function(s,l){function d(p){try{h(n.next(p))}catch(g){l(g)}}function f(p){try{h(n.throw(p))}catch(g){l(g)}}function h(p){p.done?s(p.value):a(p.value).then(d,f)}h((n=n.apply(e,t||[])).next())})}const P$=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Lw extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class k$ extends Lw{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class NO extends Lw{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class EO extends Lw{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var dx;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(dx||(dx={}));class T${constructor(t,{headers:r={},customFetch:n,region:a=dx.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=P$(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return C$(this,arguments,void 0,function*(r,n={}){var a;let s,l;try{const{headers:d,method:f,body:h,signal:p,timeout:g}=n;let y={},{region:v}=n;v||(v=this.region);const j=new URL(`${this.url}/${r}`);v&&v!=="any"&&(y["x-region"]=v,j.searchParams.set("forceFunctionRegion",v));let _;h&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",_=h):typeof h=="string"?(y["Content-Type"]="text/plain",_=h):typeof FormData<"u"&&h instanceof FormData?_=h:(y["Content-Type"]="application/json",_=JSON.stringify(h)):h&&typeof h!="string"&&!(typeof Blob<"u"&&h instanceof Blob)&&!(h instanceof ArrayBuffer)&&!(typeof FormData<"u"&&h instanceof FormData)?_=JSON.stringify(h):_=h;let S=p;g&&(l=new AbortController,s=setTimeout(()=>l.abort(),g),p?(S=l.signal,p.addEventListener("abort",()=>l.abort())):S=l.signal);const N=yield this.fetch(j.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),d),body:_,signal:S}).catch(D=>{throw new k$(D)}),E=N.headers.get("x-relay-error");if(E&&E==="true")throw new NO(N);if(!N.ok)throw new EO(N);let O=((a=N.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),C;return O==="application/json"?C=yield N.json():O==="application/octet-stream"||O==="application/pdf"?C=yield N.blob():O==="text/event-stream"?C=N:O==="multipart/form-data"?C=yield N.formData():C=yield N.text(),{data:C,error:null,response:N}}catch(d){return{data:null,error:d,response:d instanceof EO||d instanceof NO?d.context:void 0}}finally{s&&clearTimeout(s)}})}}var D$=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},M$=class{constructor(e){var t,r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(n=e.urlLengthLimit)!==null&&n!==void 0?n:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let l=null,d=null,f=null,h=s.status,p=s.statusText;if(s.ok){var g,y;if(r.method!=="HEAD"){var v;const N=await s.text();N===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((v=r.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?d=N:d=JSON.parse(N))}const _=(g=r.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),S=(y=s.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");_&&S&&S.length>1&&(f=parseInt(S[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(d)&&(d.length>1?(l={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var j;const _=await s.text();try{l=JSON.parse(_),Array.isArray(l)&&s.status===404&&(d=[],l=null,h=200,p="OK")}catch{s.status===404&&_===""?(h=204,p="No Content"):l={message:_}}if(l&&r.isMaybeSingle&&(!(l==null||(j=l.details)===null||j===void 0)&&j.includes("0 rows"))&&(l=null,h=200,p="OK"),l&&r.shouldThrowOnError)throw new D$(l)}return{error:l,data:d,count:f,status:h,statusText:p}});return this.shouldThrowOnError||(a=a.catch(s=>{var l;let d="",f="",h="";const p=s==null?void 0:s.cause;if(p){var g,y,v,j;const N=(g=p==null?void 0:p.message)!==null&&g!==void 0?g:"",E=(y=p==null?void 0:p.code)!==null&&y!==void 0?y:"";d=`${(v=s==null?void 0:s.name)!==null&&v!==void 0?v:"FetchError"}: ${s==null?void 0:s.message}`,d+=`

Caused by: ${(j=p==null?void 0:p.name)!==null&&j!==void 0?j:"Error"}: ${N}`,E&&(d+=` (${E})`),p!=null&&p.stack&&(d+=`
${p.stack}`)}else{var _;d=(_=s==null?void 0:s.stack)!==null&&_!==void 0?_:""}const S=this.url.toString().length;return(s==null?void 0:s.name)==="AbortError"||(s==null?void 0:s.code)==="ABORT_ERR"?(h="",f="Request was aborted (timeout or manual cancellation)",S>this.urlLengthLimit&&(f+=`. Note: Your request URL is ${S} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((p==null?void 0:p.name)==="HeadersOverflowError"||(p==null?void 0:p.code)==="UND_ERR_HEADERS_OVERFLOW")&&(h="",f="HTTP headers exceeded server limits (typically 16KB)",S>this.urlLengthLimit&&(f+=`. Your request URL is ${S} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(l=s==null?void 0:s.name)!==null&&l!==void 0?l:"FetchError"}: ${s==null?void 0:s.message}`,details:d,hint:f,code:h},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},R$=class extends M${select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:a=n}={}){const s=a?`${a}.order`:"order",l=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"offset":`${n}.offset`,s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(s,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:a=!1,format:s="text"}={}){var l;const d=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),f=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${f}"; options=${d};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const OO=new RegExp("[,()]");var tc=class extends R${eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&OO.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&OO.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const s=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},I$=class{constructor(e,{headers:t={},schema:r,fetch:n,urlLengthLimit:a=8e3}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n,this.urlLengthLimit=a}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},a=r?"HEAD":"GET";let s=!1;const l=(e??"*").split("").map(h=>/\s/.test(h)&&!s?"":(h==='"'&&(s=!s),h)).join(""),{url:d,headers:f}=this.cloneRequestState();return d.searchParams.set("select",l),n&&f.append("Prefer",`count=${n}`),new tc({method:a,url:d,headers:f,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const a="POST",{url:s,headers:l}=this.cloneRequestState();if(t&&l.append("Prefer",`count=${t}`),r||l.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((f,h)=>f.concat(Object.keys(h)),[]);if(d.length>0){const f=[...new Set(d)].map(h=>`"${h}"`);s.searchParams.set("columns",f.join(","))}}return new tc({method:a,url:s,headers:l,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:a=!0}={}){var s;const l="POST",{url:d,headers:f}=this.cloneRequestState();if(f.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&d.searchParams.set("on_conflict",t),n&&f.append("Prefer",`count=${n}`),a||f.append("Prefer","missing=default"),Array.isArray(e)){const h=e.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(h.length>0){const p=[...new Set(h)].map(g=>`"${g}"`);d.searchParams.set("columns",p.join(","))}}return new tc({method:l,url:d,headers:f,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var r;const n="PATCH",{url:a,headers:s}=this.cloneRequestState();return t&&s.append("Prefer",`count=${t}`),new tc({method:n,url:a,headers:s,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new tc({method:r,url:n,headers:a,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function pd(e){"@babel/helpers - typeof";return pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pd(e)}function L$(e,t){if(pd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B$(e){var t=L$(e,"string");return pd(t)=="symbol"?t:t+""}function $$(e,t,r){return(t=B$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AO(Object(r),!0).forEach(function(n){$$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var U$=class VT{constructor(t,{headers:r={},schema:n,fetch:a,timeout:s,urlLengthLimit:l=8e3}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.urlLengthLimit=l;const d=a??globalThis.fetch;s!==void 0&&s>0?this.fetch=(f,h)=>{const p=new AbortController,g=setTimeout(()=>p.abort(),s),y=h==null?void 0:h.signal;if(y){if(y.aborted)return clearTimeout(g),d(f,h);const v=()=>{clearTimeout(g),p.abort()};return y.addEventListener("abort",v,{once:!0}),d(f,Vh(Vh({},h),{},{signal:p.signal})).finally(()=>{clearTimeout(g),y.removeEventListener("abort",v)})}return d(f,Vh(Vh({},h),{},{signal:p.signal})).finally(()=>clearTimeout(g))}:this.fetch=d}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new I$(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new VT(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,r={},{head:n=!1,get:a=!1,count:s}={}){var l;let d;const f=new URL(`${this.url}/rpc/${t}`);let h;const p=v=>v!==null&&typeof v=="object"&&(!Array.isArray(v)||v.some(p)),g=n&&Object.values(r).some(p);g?(d="POST",h=r):n||a?(d=n?"HEAD":"GET",Object.entries(r).filter(([v,j])=>j!==void 0).map(([v,j])=>[v,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([v,j])=>{f.searchParams.append(v,j)})):(d="POST",h=r);const y=new Headers(this.headers);return g?y.set("Prefer",s?`count=${s},return=minimal`:"return=minimal"):s&&y.set("Prefer",`count=${s}`),new tc({method:d,url:f,headers:y,schema:this.schemaName,body:h,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}};class z${constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const a=n.node,s=parseInt(a.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const q$="2.95.3",F$=`realtime-js/${q$}`,K$="1.0.0",GT="2.0.0",CO=GT,fx=1e4,Q$=1e3,H$=100;var gs;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(gs||(gs={}));var yr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(yr||(yr={}));var pa;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(pa||(pa={}));var hx;(function(e){e.websocket="websocket"})(hx||(hx={}));var yo;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(yo||(yo={}));class V${constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},l=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(t,r,n){var a,s;const l=t.topic,d=(a=t.ref)!==null&&a!==void 0?a:"",f=(s=t.join_ref)!==null&&s!==void 0?s:"",h=t.payload.event,p=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},g=Object.keys(p).length===0?"":JSON.stringify(p);if(f.length>255)throw new Error(`joinRef length ${f.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`metadata length ${g.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+d.length+l.length+h.length+g.length,v=new ArrayBuffer(this.HEADER_LENGTH+y);let j=new DataView(v),_=0;j.setUint8(_++,this.KINDS.userBroadcastPush),j.setUint8(_++,f.length),j.setUint8(_++,d.length),j.setUint8(_++,l.length),j.setUint8(_++,h.length),j.setUint8(_++,g.length),j.setUint8(_++,r),Array.from(f,N=>j.setUint8(_++,N.charCodeAt(0))),Array.from(d,N=>j.setUint8(_++,N.charCodeAt(0))),Array.from(l,N=>j.setUint8(_++,N.charCodeAt(0))),Array.from(h,N=>j.setUint8(_++,N.charCodeAt(0))),Array.from(g,N=>j.setUint8(_++,N.charCodeAt(0)));var S=new Uint8Array(v.byteLength+n.byteLength);return S.set(new Uint8Array(v),0),S.set(new Uint8Array(n),v.byteLength),S.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,s,l,d,f]=n;return r({join_ref:a,ref:s,topic:l,event:d,payload:f})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),s=r.getUint8(2),l=r.getUint8(3),d=r.getUint8(4);let f=this.HEADER_LENGTH+4;const h=n.decode(t.slice(f,f+a));f=f+a;const p=n.decode(t.slice(f,f+s));f=f+s;const g=n.decode(t.slice(f,f+l));f=f+l;const y=t.slice(f,t.byteLength),v=d===this.JSON_ENCODING?JSON.parse(n.decode(y)):y,j={type:this.BROADCAST_EVENT,event:p,payload:v};return l>0&&(j.meta=JSON.parse(g)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:j}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class YT{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Tt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Tt||(Tt={}));const PO=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((s,l)=>(s[l]=G$(l,e,t,a),s),{}):{}},G$=(e,t,r,n)=>{const a=t.find(d=>d.name===e),s=a==null?void 0:a.type,l=r[e];return s&&!n.includes(s)?WT(s,l):mx(l)},WT=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Z$(t,r)}switch(e){case Tt.bool:return Y$(t);case Tt.float4:case Tt.float8:case Tt.int2:case Tt.int4:case Tt.int8:case Tt.numeric:case Tt.oid:return W$(t);case Tt.json:case Tt.jsonb:return X$(t);case Tt.timestamp:return J$(t);case Tt.abstime:case Tt.date:case Tt.daterange:case Tt.int4range:case Tt.int8range:case Tt.money:case Tt.reltime:case Tt.text:case Tt.time:case Tt.timestamptz:case Tt.timetz:case Tt.tsrange:case Tt.tstzrange:return mx(t);default:return mx(t)}},mx=e=>e,Y$=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},W$=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},X$=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},Z$=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let s;const l=e.slice(1,r);try{s=JSON.parse("["+l+"]")}catch{s=l?l.split(","):[]}return s.map(d=>WT(t,d))}return e},J$=e=>typeof e=="string"?e.replace(" ","T"):e,XT=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class i0{constructor(t,r,n={},a=fx){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var kO;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(kO||(kO={}));class ud{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:s,onLeave:l,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ud.syncState(this.state,a,s,l),this.pendingDiffs.forEach(f=>{this.state=ud.syncDiff(this.state,f,s,l)}),this.pendingDiffs=[],d()}),this.channel._on(n.diff,{},a=>{const{onJoin:s,onLeave:l,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=ud.syncDiff(this.state,a,s,l),d())}),this.onJoin((a,s,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:s,newPresences:l})}),this.onLeave((a,s,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:s,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const s=this.cloneDeep(t),l=this.transformState(r),d={},f={};return this.map(s,(h,p)=>{l[h]||(f[h]=p)}),this.map(l,(h,p)=>{const g=s[h];if(g){const y=p.map(S=>S.presence_ref),v=g.map(S=>S.presence_ref),j=p.filter(S=>v.indexOf(S.presence_ref)<0),_=g.filter(S=>y.indexOf(S.presence_ref)<0);j.length>0&&(d[h]=j),_.length>0&&(f[h]=_)}else d[h]=p}),this.syncDiff(s,{joins:d,leaves:f},n,a)}static syncDiff(t,r,n,a){const{joins:s,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(s,(d,f)=>{var h;const p=(h=t[d])!==null&&h!==void 0?h:[];if(t[d]=this.cloneDeep(f),p.length>0){const g=t[d].map(v=>v.presence_ref),y=p.filter(v=>g.indexOf(v.presence_ref)<0);t[d].unshift(...y)}n(d,p,f)}),this.map(l,(d,f)=>{let h=t[d];if(!h)return;const p=f.map(g=>g.presence_ref);h=h.filter(g=>p.indexOf(g.presence_ref)<0),t[d]=h,a(d,h,f),h.length===0&&delete t[d]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var TO;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(TO||(TO={}));var dd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(dd||(dd={}));var di;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(di||(di={}));class ic{constructor(t,r={config:{}},n){var a,s;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=yr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new i0(this,pa.join,this.params,this.timeout),this.rejoinTimer=new YT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=yr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=yr.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=yr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=yr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=yr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pa.reply,{},(l,d)=>{this._trigger(this._replyEventName(d),l)}),this.presence=new ud(this),this.broadcastEndpointURL=XT(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,s;if(this.socket.isConnected()||this.socket.connect(),this.state==yr.closed){const{config:{broadcast:l,presence:d,private:f}}=this.params,h=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(v=>v.filter))!==null&&a!==void 0?a:[],p=!!this.bindings[dd.PRESENCE]&&this.bindings[dd.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,g={},y={broadcast:l,presence:Object.assign(Object.assign({},d),{enabled:p}),postgres_changes:h,private:f};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(v=>t==null?void 0:t(di.CHANNEL_ERROR,v)),this._onClose(()=>t==null?void 0:t(di.CLOSED)),this.updateJoinPayload(Object.assign({config:y},g)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:v})=>{var j;if(this.socket._isManualToken()||this.socket.setAuth(),v===void 0){t==null||t(di.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,S=(j=_==null?void 0:_.length)!==null&&j!==void 0?j:0,N=[];for(let E=0;E<S;E++){const O=_[E],{filter:{event:C,schema:D,table:T,filter:M}}=O,R=v&&v[E];if(R&&R.event===C&&ic.isFilterValueEqual(R.schema,D)&&ic.isFilterValueEqual(R.table,T)&&ic.isFilterValueEqual(R.filter,M))N.push(Object.assign(Object.assign({},O),{id:R.id}));else{this.unsubscribe(),this.state=yr.errored,t==null||t(di.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,t&&t(di.SUBSCRIBED);return}}).receive("error",v=>{this.state=yr.errored,t==null||t(di.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(di.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===yr.joined&&t===dd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;if(r==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(d.status===202)return{success:!0};let f=d.statusText;try{const h=await d.json();f=h.error||h.message||f}catch{}return Promise.reject(new Error(f))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:l}=t,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=h.body)===null||a===void 0?void 0:a.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var l,d,f;const h=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((f=(d=(l=this.params)===null||l===void 0?void 0:l.config)===null||d===void 0?void 0:d.broadcast)===null||f===void 0)&&f.ack)&&s("ok"),h.receive("ok",()=>s("ok")),h.receive("error",()=>s("error")),h.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=yr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pa.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new i0(this,pa.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=yr.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,s=setTimeout(()=>a.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(s),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new i0(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>H$){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,s;const l=t.toLocaleLowerCase(),{close:d,error:f,leave:h,join:p}=pa;if(n&&[d,f,h,p].indexOf(l)>=0&&n!==this._joinRef())return;let y=this._onMessage(l,r,n);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(v=>{var j,_,S;return((j=v.filter)===null||j===void 0?void 0:j.event)==="*"||((S=(_=v.filter)===null||_===void 0?void 0:_.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===l}).map(v=>v.callback(y,n)):(s=this.bindings[l])===null||s===void 0||s.filter(v=>{var j,_,S,N,E,O;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in v){const C=v.id,D=(j=v.filter)===null||j===void 0?void 0:j.event;return C&&((_=r.ids)===null||_===void 0?void 0:_.includes(C))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((S=r.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const C=(E=(N=v==null?void 0:v.filter)===null||N===void 0?void 0:N.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return C==="*"||C===((O=r==null?void 0:r.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===l}).map(v=>{if(typeof y=="object"&&"ids"in y){const j=y.data,{schema:_,table:S,commit_timestamp:N,type:E,errors:O}=j;y=Object.assign(Object.assign({},{schema:_,table:S,commit_timestamp:N,eventType:E,new:{},old:{},errors:O}),this._getPayloadRecords(j))}v.callback(y,n)})}_isClosed(){return this.state===yr.closed}_isJoined(){return this.state===yr.joined}_isJoining(){return this.state===yr.joining}_isLeaving(){return this.state===yr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),s={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(s):this.bindings[a]=[s],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var s;return!(((s=a.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&ic.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(pa.close,{},t)}_onError(t){this._on(pa.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=yr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=PO(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=PO(t.columns,t.old_record)),r}}const s0=()=>{},Gh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},eU=[1e3,2e3,5e3,1e4],tU=1e4,rU=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class nU{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=fx,this.transport=null,this.heartbeatIntervalMs=Gh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=s0,this.ref=0,this.reconnectTimer=null,this.vsn=CO,this.logger=s0,this.conn=null,this.sendBuffer=[],this.serializer=new V$,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...s)=>a(...s):(...s)=>fetch(...s),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${hx.websocket}`,this.httpEndpoint=XT(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=z$.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return r==="ok"&&this._remove(t),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case gs.connecting:return yo.Connecting;case gs.open:return yo.Open;case gs.closing:return yo.Closing;default:return yo.Closed}}isConnected(){return this.connectionState()===yo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(s=>s.topic===n);if(a)return a;{const s=new ic(`realtime:${t}`,r,this);return this.channels.push(s),s}}push(t){const{topic:r,event:n,payload:a,ref:s}=t,l=()=>{this.encode(t,d=>{var f;(f=this.conn)===null||f===void 0||f.send(d)})};this.log("push",`${r} ${n} (${s})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Q$,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Gh.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const h=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",h)}catch(p){this.log("error","error in heartbeat callback",p)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:a,payload:s,ref:l}=r,d=l?`(${l})`:"",f=s.status||"";this.log("receive",`${f} ${n} ${a} ${d}`.trim(),s),this.channels.filter(h=>h._isMember(n)).forEach(h=>h._trigger(a,s,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===gs.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===gs.open||this.conn.readyState===gs.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(pa.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([rU],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const s={access_token:r,version:F$};r&&a.updateJoinPayload(s),a.joinedOnce&&a._isJoined()&&a._push(pa.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new YT(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Gh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,s,l,d,f,h,p,g,y,v;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:fx,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Gh.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(d=t==null?void 0:t.heartbeatCallback)!==null&&d!==void 0?d:s0,this.vsn=(f=t==null?void 0:t.vsn)!==null&&f!==void 0?f:CO,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=t==null?void 0:t.reconnectAfterMs)!==null&&h!==void 0?h:(j=>eU[j-1]||tU),this.vsn){case K$:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:((j,_)=>_(JSON.stringify(j))),this.decode=(g=t==null?void 0:t.decode)!==null&&g!==void 0?g:((j,_)=>_(JSON.parse(j)));break;case GT:this.encode=(y=t==null?void 0:t.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(v=t==null?void 0:t.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var gd=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function aU(e,t,r){const n=new URL(t,e);if(r)for(const[a,s]of Object.entries(r))s!==void 0&&n.searchParams.set(a,s);return n.toString()}async function iU(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function sU(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:a,body:s,headers:l}){const d=aU(e.baseUrl,n,a),f=await iU(e.auth),h=await t(d,{method:r,headers:{...s?{"Content-Type":"application/json"}:{},...f,...l},body:s?JSON.stringify(s):void 0}),p=await h.text(),g=(h.headers.get("content-type")||"").includes("application/json"),y=g&&p?JSON.parse(p):p;if(!h.ok){const v=g?y:void 0,j=v==null?void 0:v.error;throw new gd((j==null?void 0:j.message)??`Request failed with status ${h.status}`,{status:h.status,icebergType:j==null?void 0:j.type,icebergCode:j==null?void 0:j.code,details:v})}return{status:h.status,headers:h.headers,data:y}}}}function Yh(e){return e.join("")}var oU=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Yh(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Yh(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Yh(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Yh(e.namespace)}`}),!0}catch(t){if(t instanceof gd&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof gd&&r.status===409)return;throw r}}};function Ql(e){return e.join("")}var lU=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ql(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ql(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ql(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ql(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ql(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ql(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof gd&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof gd&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},cU=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=sU({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new oU(this.client,t),this.tableOps=new lU(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Mp=class extends Error{constructor(e,t="storage",r,n){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function Rp(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Wh=class extends Mp{constructor(e,t,r,n="storage"){super(e,n,t,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ZT=class extends Mp{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const uU=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),dU=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},px=e=>{if(Array.isArray(e))return e.map(r=>px(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[a]=px(n)}),t},fU=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function yd(e){"@babel/helpers - typeof";return yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yd(e)}function hU(e,t){if(yd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mU(e){var t=hU(e,"string");return yd(t)=="symbol"?t:t+""}function pU(e,t,r){return(t=mU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ue(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DO(Object(r),!0).forEach(function(n){pU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const MO=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},gU=async(e,t,r,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e,s=a.status||500;if(typeof a.json=="function")a.json().then(l=>{const d=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||s+"";t(new Wh(MO(l),s,d,n))}).catch(()=>{if(n==="vectors"){const l=s+"";t(new Wh(a.statusText||`HTTP ${s} error`,s,l,n))}else{const l=s+"";t(new Wh(a.statusText||`HTTP ${s} error`,s,l,n))}});else{const l=s+"";t(new Wh(a.statusText||`HTTP ${s} error`,s,l,n))}}else t(new ZT(MO(e),e,n))},yU=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!n?Ue(Ue({},a),r):(dU(n)?(a.headers=Ue({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Ue(Ue({},a),r))};async function Gu(e,t,r,n,a,s,l){return new Promise((d,f)=>{e(r,yU(t,n,a,s)).then(h=>{if(!h.ok)throw h;if(n!=null&&n.noResolveJson)return h;if(l==="vectors"){const p=h.headers.get("content-type");if(h.headers.get("content-length")==="0"||h.status===204)return{};if(!p||!p.includes("application/json"))return{}}return h.json()}).then(h=>d(h)).catch(h=>gU(h,f,n,l))})}function JT(e="storage"){return{get:async(t,r,n,a)=>Gu(t,"GET",r,n,a,void 0,e),post:async(t,r,n,a,s)=>Gu(t,"POST",r,a,s,n,e),put:async(t,r,n,a,s)=>Gu(t,"PUT",r,a,s,n,e),head:async(t,r,n,a)=>Gu(t,"HEAD",r,Ue(Ue({},n),{},{noResolveJson:!0}),a,void 0,e),remove:async(t,r,n,a,s)=>Gu(t,"DELETE",r,a,s,n,e)}}const vU=JT("storage"),{get:vd,post:fa,put:gx,head:bU,remove:Bw}=vU,Pn=JT("vectors");var Uc=class{constructor(e,t={},r,n="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=uU(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Rp(r))return{data:null,error:r};throw r}}},xU=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Rp(t))return{data:null,error:t};throw t}}};let eD;eD=Symbol.toStringTag;var wU=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[eD]="BlobDownloadBuilder",this.promise=null}asStream(){return new xU(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Rp(t))return{data:null,error:t};throw t}}};const jU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},RO={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var SU=class extends Uc{constructor(e,t={},r,n){super(e,t,n,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,n){var a=this;return a.handleOperation(async()=>{let s;const l=Ue(Ue({},RO),n);let d=Ue(Ue({},a.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const f=l.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",l.cacheControl),f&&s.append("metadata",a.encodeMetadata(f)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.has("cacheControl")||s.append("cacheControl",l.cacheControl),f&&!s.has("metadata")&&s.append("metadata",a.encodeMetadata(f))):(s=r,d["cache-control"]=`max-age=${l.cacheControl}`,d["content-type"]=l.contentType,f&&(d["x-metadata"]=a.toBase64(a.encodeMetadata(f))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!l.duplex&&(l.duplex="half")),n!=null&&n.headers&&(d=Ue(Ue({},d),n.headers));const h=a._removeEmptyFolders(t),p=a._getFinalPath(h),g=await(e=="PUT"?gx:fa)(a.fetch,`${a.url}/object/${p}`,s,Ue({headers:d},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{path:h,id:g.Id,fullPath:g.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var a=this;const s=a._removeEmptyFolders(e),l=a._getFinalPath(s),d=new URL(a.url+`/object/upload/sign/${l}`);return d.searchParams.set("token",t),a.handleOperation(async()=>{let f;const h=Ue({upsert:RO.upsert},n),p=Ue(Ue({},a.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&r instanceof Blob?(f=new FormData,f.append("cacheControl",h.cacheControl),f.append("",r)):typeof FormData<"u"&&r instanceof FormData?(f=r,f.append("cacheControl",h.cacheControl)):(f=r,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType),{path:s,fullPath:(await gx(a.fetch,d.toString(),f,{headers:p})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(e);const a=Ue({},r.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const s=await fa(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:a}),l=new URL(r.url+s.url),d=l.searchParams.get("token");if(!d)throw new Mp("No token returned by API");return{signedUrl:l.toString(),path:e,token:d}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;return n.handleOperation(async()=>await fa(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}))}async copy(e,t,r){var n=this;return n.handleOperation(async()=>({path:(await fa(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(e,t,r){var n=this;return n.handleOperation(async()=>{let a=n._getFinalPath(e),s=await fa(n.fetch,`${n.url}/object/sign/${a}`,Ue({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${s.signedURL}${l}`)}})}async createSignedUrls(e,t,r){var n=this;return n.handleOperation(async()=>{const a=await fa(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a.map(l=>Ue(Ue({},l),{},{signedUrl:l.signedURL?encodeURI(`${n.url}${l.signedURL}${s}`):null}))})}download(e,t,r){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=a?`?${a}`:"",l=this._getFinalPath(e),d=()=>vd(this.fetch,`${this.url}/${n}/${l}${s}`,{headers:this.headers,noResolveJson:!0},r);return new wU(d,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>px(await vd(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await bU(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Rp(n)&&n instanceof ZT){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&n.push(a);const s=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&n.push(l);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${r}${d}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await Bw(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var n=this;return n.handleOperation(async()=>{const a=Ue(Ue(Ue({},jU),t),{},{prefix:e||""});return await fa(n.fetch,`${n.url}/object/list/${n.bucketId}`,a,{headers:n.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const n=Ue({},e);return await fa(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const _U="2.95.3",Hd={"X-Client-Info":`storage-js/${_U}`};var NU=class extends Uc{constructor(e,t={},r,n){const a=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."));const s=a.href.replace(/\/$/,""),l=Ue(Ue({},Hd),t);super(s,l,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await vd(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await vd(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await fa(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await gx(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await fa(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Bw(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},EU=class extends Uc{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=Ue(Ue({},Hd),t);super(n,a,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await fa(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),a=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return await vd(t.fetch,a,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Bw(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!fU(e))throw new Mp("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new cU({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(a,s){const l=a[s];return typeof l!="function"?l:async(...d)=>{try{return{data:await l.apply(a,d),error:null}}catch(f){if(n)throw f;return{data:null,error:f}}}}})}},OU=class extends Uc{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=Ue(Ue({},Hd),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await Pn.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await Pn.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await Pn.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await Pn.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},AU=class extends Uc{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=Ue(Ue({},Hd),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Pn.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await Pn.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await Pn.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await Pn.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Pn.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},CU=class extends Uc{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=Ue(Ue({},Hd),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Pn.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Pn.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await Pn.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Pn.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},PU=class extends CU{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new kU(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},kU=class extends OU{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,Ue(Ue({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,Ue(Ue({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new TU(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},TU=class extends AU{constructor(e,t,r,n,a){super(e,t,a),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,Ue(Ue({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,Ue(Ue({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,Ue(Ue({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,Ue(Ue({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,Ue(Ue({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},DU=class extends NU{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new SU(this.url,this.headers,e,this.fetch)}get vectors(){return new PU(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new EU(this.url+"/iceberg",this.headers,this.fetch)}};const tD="2.95.3",rc=30*1e3,yx=3,o0=yx*rc,MU="http://localhost:9999",RU="supabase.auth.token",IU={"X-Client-Info":`gotrue-js/${tD}`},vx="X-Supabase-Api-Version",rD={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},LU=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,BU=600*1e3;class bd extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function De(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class $U extends bd{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function UU(e){return De(e)&&e.name==="AuthApiError"}class vo extends bd{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Di extends bd{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Cn extends Di{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function l0(e){return De(e)&&e.name==="AuthSessionMissingError"}class Hl extends Di{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xh extends Di{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Zh extends Di{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function zU(e){return De(e)&&e.name==="AuthImplicitGrantRedirectError"}class IO extends Di{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class qU extends Di{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class bx extends Di{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function c0(e){return De(e)&&e.name==="AuthRetryableFetchError"}class LO extends Di{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class xx extends Di{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Cm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),BO=` 	
\r=`.split(""),FU=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<BO.length;t+=1)e[BO[t].charCodeAt(0)]=-2;for(let t=0;t<Cm.length;t+=1)e[Cm[t].charCodeAt(0)]=t;return e})();function $O(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Cm[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Cm[n]),t.queuedBits-=6}}function nD(e,t,r){const n=FU[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function UO(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=l=>{HU(l,n,r)};for(let l=0;l<e.length;l+=1)nD(e.charCodeAt(l),a,s);return t.join("")}function KU(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function QU(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}KU(n,t)}}function HU(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function lc(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)nD(e.charCodeAt(a),r,n);return new Uint8Array(t)}function VU(e){const t=[];return QU(e,r=>t.push(r)),new Uint8Array(t)}function xo(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>$O(a,r,n)),$O(null,r,n),t.join("")}function GU(e){return Math.round(Date.now()/1e3)+e}function YU(){return Symbol("auth-callback")}const zr=()=>typeof window<"u"&&typeof document<"u",co={tested:!1,writable:!1},aD=()=>{if(!zr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(co.tested)return co.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),co.tested=!0,co.writable=!0}catch{co.tested=!0,co.writable=!1}return co.writable};function WU(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,s)=>{t[s]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const iD=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),XU=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",nc=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},uo=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ur=async(e,t)=>{await e.removeItem(t)};class Ip{constructor(){this.promise=new Ip.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Ip.promiseConstructor=Promise;function Jh(e){const t=e.split(".");if(t.length!==3)throw new xx("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!LU.test(t[n]))throw new xx("JWT not in base64url format");return{header:JSON.parse(UO(t[0])),payload:JSON.parse(UO(t[1])),signature:lc(t[2]),raw:{header:t[0],payload:t[1]}}}async function ZU(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function JU(e,t){return new Promise((n,a)=>{(async()=>{for(let s=0;s<1/0;s++)try{const l=await e(s);if(!t(s,null,l)){n(l);return}}catch(l){if(!t(s,l)){a(l);return}}})()})}function ez(e){return("0"+e.toString(16)).substr(-2)}function tz(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let s=0;s<56;s++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,ez).join("")}async function rz(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(s=>String.fromCharCode(s)).join("")}async function nz(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await rz(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vl(e,t,r=!1){const n=tz();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await nc(e,`${t}-code-verifier`,a);const s=await nz(n);return[s,n===s?"plain":"s256"]}const az=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function iz(e){const t=e.headers.get(vx);if(!t||!t.match(az))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function sz(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function oz(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const lz=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Gl(e){if(!lz.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function u0(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function cz(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function zO(e){return JSON.parse(JSON.stringify(e))}const ho=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),uz=[502,503,504];async function qO(e){var t;if(!XU(e))throw new bx(ho(e),0);if(uz.includes(e.status))throw new bx(ho(e),e.status);let r;try{r=await e.json()}catch(s){throw new vo(ho(s),s)}let n;const a=iz(e);if(a&&a.getTime()>=rD["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new LO(ho(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Cn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,l)=>s&&typeof l=="string",!0))throw new LO(ho(r),e.status,r.weak_password.reasons);throw new $U(ho(r),e.status||500,n)}const dz=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function $e(e,t,r,n){var a;const s=Object.assign({},n==null?void 0:n.headers);s[vx]||(s[vx]=rD["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const l=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const d=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",f=await fz(e,t,r+d,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(f):{data:Object.assign({},f),error:null}}async function fz(e,t,r,n,a,s){const l=dz(t,n,a,s);let d;try{d=await e(r,Object.assign({},l))}catch(f){throw console.error(f),new bx(ho(f),0)}if(d.ok||await qO(d),n!=null&&n.noResolveJson)return d;try{return await d.json()}catch(f){await qO(f)}}function da(e){var t;let r=null;pz(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=GU(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function FO(e){const t=da(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function bs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function hz(e){return{data:e,error:null}}function mz(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s}=e,l=Dp(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s},f=Object.assign({},l);return{data:{properties:d,user:f},error:null}}function KO(e){return e}function pz(e){return e.access_token&&e.refresh_token&&e.expires_in}const d0=["global","local","others"];class gz{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=iD(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=d0[0]){if(d0.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${d0.join(", ")}`);try{return await $e(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(De(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await $e(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:bs})}catch(n){if(De(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Dp(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await $e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:mz,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(De(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await $e(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:bs})}catch(r){if(De(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,s,l,d,f;try{const h={nextPage:null,lastPage:0,total:0},p=await $e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:KO});if(p.error)throw p.error;const g=await p.json(),y=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(f=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return v.length>0&&(v.forEach(j=>{const _=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(j.split(";")[1].split("=")[1]);h[`${S}Page`]=_}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(De(h))return{data:{users:[]},error:h};throw h}}async getUserById(t){Gl(t);try{return await $e(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:bs})}catch(r){if(De(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Gl(t);try{return await $e(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:bs})}catch(n){if(De(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Gl(t);try{return await $e(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:bs})}catch(n){if(De(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Gl(t.userId);try{const{data:r,error:n}=await $e(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(De(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Gl(t.userId),Gl(t.id);try{return{data:await $e(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(De(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,s,l,d,f;try{const h={nextPage:null,lastPage:0,total:0},p=await $e(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:KO});if(p.error)throw p.error;const g=await p.json(),y=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(f=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return v.length>0&&(v.forEach(j=>{const _=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(j.split(";")[1].split("=")[1]);h[`${S}Page`]=_}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(De(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(t){try{return await $e(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(De(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await $e(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(De(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await $e(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(De(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await $e(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(De(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await $e(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(De(r))return{data:null,error:r};throw r}}}function QO(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Yl={debug:!!(globalThis&&aD()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sD extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class yz extends sD{}async function vz(e,t,r){Yl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Yl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Yl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Yl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Yl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new yz(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Yl.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function bz(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function oD(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function xz(e){return parseInt(e,16)}function wz(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function jz(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:s=new Date,nonce:l,notBefore:d,requestId:f,resources:h,scheme:p,uri:g,version:y}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const v=oD(e.address),j=p?`${p}://${n}`:n,_=e.statement?`${e.statement}
`:"",S=`${j} wants you to sign in with your Ethereum account:
${v}

${_}`;let N=`URI: ${g}
Version: ${y}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${s.toISOString()}`;if(a&&(N+=`
Expiration Time: ${a.toISOString()}`),d&&(N+=`
Not Before: ${d.toISOString()}`),f&&(N+=`
Request ID: ${f}`),h){let E=`
Resources:`;for(const O of h){if(!O||typeof O!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${O}`);E+=`
- ${O}`}N+=E}return`${S}
${N}`}class lr extends Error{constructor({message:t,code:r,cause:n,name:a}){var s;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(s=a??(n instanceof Error?n.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=r}}class Pm extends lr{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function Sz({error:e,options:t}){var r,n,a;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new lr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=s.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new lr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=s.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new lr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=s.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new lr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new lr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new lr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new lr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new lr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(lD(l)){if(s.rp.id!==l)return new lr({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new lr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new lr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new lr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new lr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function _z({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new lr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new lr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(lD(n)){if(r.rpId!==n)return new lr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new lr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new lr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new lr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Nz{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Ez=new Nz;function Oz(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=Dp(e,["challenge","user","excludeCredentials"]),s=lc(t).buffer,l=Object.assign(Object.assign({},r),{id:lc(r.id).buffer}),d=Object.assign(Object.assign({},a),{challenge:s,user:l});if(n&&n.length>0){d.excludeCredentials=new Array(n.length);for(let f=0;f<n.length;f++){const h=n[f];d.excludeCredentials[f]=Object.assign(Object.assign({},h),{id:lc(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return d}function Az(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Dp(e,["challenge","allowCredentials"]),a=lc(t).buffer,s=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){s.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const d=r[l];s.allowCredentials[l]=Object.assign(Object.assign({},d),{id:lc(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return s}function Cz(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:xo(new Uint8Array(e.response.attestationObject)),clientDataJSON:xo(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Pz(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:xo(new Uint8Array(a.authenticatorData)),clientDataJSON:xo(new Uint8Array(a.clientDataJSON)),signature:xo(new Uint8Array(a.signature)),userHandle:a.userHandle?xo(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function lD(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function HO(){var e,t;return!!(zr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function kz(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Pm("Browser returned unexpected credential type",t)}:{data:null,error:new Pm("Empty credential response",t)}}catch(t){return{data:null,error:Sz({error:t,options:e})}}}async function Tz(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Pm("Browser returned unexpected credential type",t)}:{data:null,error:new Pm("Empty credential response",t)}}catch(t){return{data:null,error:_z({error:t,options:e})}}}const Dz={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Mz={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function km(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const s in a){const l=a[s];if(l!==void 0)if(Array.isArray(l))n[s]=l;else if(r(l))n[s]=l;else if(t(l)){const d=n[s];t(d)?n[s]=km(d,l):n[s]=km(l)}else n[s]=l}return n}function Rz(e,t){return km(Dz,e,t||{})}function Iz(e,t){return km(Mz,e,t||{})}class Lz{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},s){var l;try{const{data:d,error:f}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!d)return{data:null,error:f};const h=a??Ez.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:p}=d.webauthn.credential_options.publicKey;if(!p.name){const g=n;if(g)p.name=`${p.id}:${g}`;else{const v=(await this.client.getUser()).data.user,j=((l=v==null?void 0:v.user_metadata)===null||l===void 0?void 0:l.name)||(v==null?void 0:v.email)||(v==null?void 0:v.id)||"User";p.name=`${p.id}:${j}`}}p.displayName||(p.displayName=p.name)}switch(d.webauthn.type){case"create":{const p=Rz(d.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:g,error:y}=await kz({publicKey:p,signal:h});return g?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}case"request":{const p=Iz(d.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:g,error:y}=await Tz(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:p,signal:h}));return g?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}}}catch(d){return De(d)?{data:null,error:d}:{data:null,error:new vo("Unexpected error in challenge",d)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},s){if(!r)return{data:null,error:new bd("rpId is required for WebAuthn authentication")};try{if(!HO())return{data:null,error:new vo("Browser does not support WebAuthn",null)};const{data:l,error:d}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:s});if(!l)return{data:null,error:d};const{webauthn:f}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:f.type,rpId:r,rpOrigins:n,credential_response:f.credential_response}})}catch(l){return De(l)?{data:null,error:l}:{data:null,error:new vo("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},s){if(!r)return{data:null,error:new bd("rpId is required for WebAuthn registration")};try{if(!HO())return{data:null,error:new vo("Browser does not support WebAuthn",null)};const{data:l,error:d}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(p=>{var g;return(g=p.data)===null||g===void 0?void 0:g.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===t&&y.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p==null?void 0:p.id}):void 0),{data:null,error:d};const{data:f,error:h}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:s});return f?this._verify({factorId:l.id,challengeId:f.challengeId,webauthn:{rpId:r,rpOrigins:n,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:h}}catch(l){return De(l)?{data:null,error:l}:{data:null,error:new vo("Unexpected error in register",l)}}}}bz();const Bz={url:MU,storageKey:RU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:IU,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function VO(e,t,r){return await r()}const Wl={};class xd{get jwks(){var t,r;return(r=(t=Wl[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Wl[this.storageKey]=Object.assign(Object.assign({},Wl[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Wl[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Wl[this.storageKey]=Object.assign(Object.assign({},Wl[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},Bz),t);if(this.storageKey=s.storageKey,this.instanceID=(r=xd.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,xd.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&zr()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new gz({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=iD(s.fetch),this.lock=s.lock||VO,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&zr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=vz:this.lock=VO,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Lz(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:aD()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=QO(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=QO(this.memoryStorage)),zr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l);try{await this._notifyAllSubscribers(l.data.event,l.data.session,!1)}catch(d){this._debug("#broadcastChannel","error",d)}})}this.initialize().catch(l=>{this._debug("#initialize()","error",l)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${tD}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(zr()&&(r=WU(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),zr()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:s}=await this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),zU(s)){const f=(t=s.details)===null||t===void 0?void 0:t.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:s}}return{error:s}}const{session:l,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",d),await this._saveSession(l),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return De(r)?this._returnResult({error:r}):this._returnResult({error:new vo("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const s=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:da}),{data:l,error:d}=s;if(d||!l)return this._returnResult({data:{user:null,session:null},error:d});const f=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(s){if(De(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(t){var r,n,a;try{let s;if("email"in t){const{email:p,password:g,options:y}=t;let v=null,j=null;this.flowType==="pkce"&&([v,j]=await Vl(this.storage,this.storageKey)),s=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:p,password:g,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:v,code_challenge_method:j},xform:da})}else if("phone"in t){const{phone:p,password:g,options:y}=t;s=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:g,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},channel:(a=y==null?void 0:y.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:da})}else throw new Xh("You must provide either an email or phone number and a password");const{data:l,error:d}=s;if(d||!l)return await Ur(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const f=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(s){if(await Ur(this.storage,`${this.storageKey}-code-verifier`),De(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(t){try{let r;if("email"in t){const{email:s,password:l,options:d}=t;r=await $e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:l,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:FO})}else if("phone"in t){const{phone:s,password:l,options:d}=t;r=await $e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:l,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:FO})}else throw new Xh("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const s=new Hl;return this._returnResult({data:{user:null,session:null},error:s})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(De(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,s,l,d,f,h,p,g,y;let v,j;if("message"in t)v=t.message,j=t.signature;else{const{chain:_,wallet:S,statement:N,options:E}=t;let O;if(zr())if(typeof S=="object")O=S;else{const U=window;if("ethereum"in U&&typeof U.ethereum=="object"&&"request"in U.ethereum&&typeof U.ethereum.request=="function")O=U.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=S}const C=new URL((r=E==null?void 0:E.url)!==null&&r!==void 0?r:window.location.href),D=await O.request({method:"eth_requestAccounts"}).then(U=>U).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const T=oD(D[0]);let M=(n=E==null?void 0:E.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!M){const U=await O.request({method:"eth_chainId"});M=xz(U)}const R={domain:C.host,address:T,statement:N,uri:C.href,version:"1",chainId:M,nonce:(a=E==null?void 0:E.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(l=(s=E==null?void 0:E.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(d=E==null?void 0:E.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(f=E==null?void 0:E.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(h=E==null?void 0:E.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(p=E==null?void 0:E.signInWithEthereum)===null||p===void 0?void 0:p.resources};v=jz(R),j=await O.request({method:"personal_sign",params:[wz(v),T]})}try{const{data:_,error:S}=await $e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:j},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:da});if(S)throw S;if(!_||!_.session||!_.user){const N=new Hl;return this._returnResult({data:{user:null,session:null},error:N})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:S})}catch(_){if(De(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(t){var r,n,a,s,l,d,f,h,p,g,y,v;let j,_;if("message"in t)j=t.message,_=t.signature;else{const{chain:S,wallet:N,statement:E,options:O}=t;let C;if(zr())if(typeof N=="object")C=N;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))C=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=N}const D=new URL((r=O==null?void 0:O.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in C&&C.signIn){const T=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O==null?void 0:O.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),E?{statement:E}:null));let M;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")M=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)M=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)j=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),_=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${D.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(a=(n=O==null?void 0:O.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((s=O==null?void 0:O.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((l=O==null?void 0:O.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((d=O==null?void 0:O.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((f=O==null?void 0:O.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((h=O==null?void 0:O.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((g=(p=O==null?void 0:O.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||g===void 0)&&g.length?["Resources",...O.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const T=await C.signMessage(new TextEncoder().encode(j),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=T}}try{const{data:S,error:N}=await $e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:xo(_)},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:da});if(N)throw N;if(!S||!S.session||!S.user){const E=new Hl;return this._returnResult({data:{user:null,session:null},error:E})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:N})}catch(S){if(De(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async _exchangeCodeForSession(t){const r=await uo(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new qU;const{data:s,error:l}=await $e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:da});if(await Ur(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!s||!s.session||!s.user){const d=new Hl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:a??null}),error:l})}catch(s){if(await Ur(this.storage,`${this.storageKey}-code-verifier`),De(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:s,nonce:l}=t,d=await $e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:s,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:da}),{data:f,error:h}=d;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!f||!f.session||!f.user){const p=new Hl;return this._returnResult({data:{user:null,session:null},error:p})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:h})}catch(r){if(De(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,s,l;try{if("email"in t){const{email:d,options:f}=t;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await Vl(this.storage,this.storageKey));const{error:g}=await $e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},create_user:(n=f==null?void 0:f.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:f==null?void 0:f.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:g})}if("phone"in t){const{phone:d,options:f}=t,{data:h,error:p}=await $e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=f==null?void 0:f.data)!==null&&a!==void 0?a:{},create_user:(s=f==null?void 0:f.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(l=f==null?void 0:f.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:p})}throw new Xh("You must provide either an email or phone number.")}catch(d){if(await Ur(this.storage,`${this.storageKey}-code-verifier`),De(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(t){var r,n;try{let a,s;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,s=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:d}=await $e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:a,xform:da});if(d)throw d;if(!l)throw new Error("An error occurred on token verification.");const f=l.session,h=l.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(a){if(De(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a,s,l;try{let d=null,f=null;this.flowType==="pkce"&&([d,f]=await Vl(this.storage,this.storageKey));const h=await $e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:f}),headers:this.headers,xform:hz});return!((s=h.data)===null||s===void 0)&&s.url&&zr()&&!(!((l=t.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(d){if(await Ur(this.storage,`${this.storageKey}-code-verifier`),De(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Cn;const{error:a}=await $e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(De(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:s}=t,{error:l}=await $e(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in t){const{phone:n,type:a,options:s}=t,{data:l,error:d}=await $e(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:d})}throw new Xh("You must provide either an email or phone number and a type")}catch(r){if(De(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await uo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<o0:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await uo(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=u0()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};t.user=cz(t.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await $e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:bs}):await this._useSession(async r=>{var n,a,s;const{data:l,error:d}=r;if(d)throw d;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Cn}:await $e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&s!==void 0?s:void 0,xform:bs})})}catch(r){if(De(r))return l0(r)&&(await this._removeSession(),await Ur(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:s}=n;if(s)throw s;if(!a.session)throw new Cn;const l=a.session;let d=null,f=null;this.flowType==="pkce"&&t.email!=null&&([d,f]=await Vl(this.storage,this.storageKey));const{data:h,error:p}=await $e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:f}),jwt:l.access_token,xform:bs});if(p)throw p;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(n){if(await Ur(this.storage,`${this.storageKey}-code-verifier`),De(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Cn;const r=Date.now()/1e3;let n=r,a=!0,s=null;const{payload:l}=Jh(t.access_token);if(l.exp&&(n=l.exp,a=n<=r),a){const{data:d,error:f}=await this._callRefreshToken(t.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!d)return{data:{user:null,session:null},error:null};s=d}else{const{data:d,error:f}=await this._getUser(t.access_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});s={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(De(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:d}=r;if(d)throw d;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Cn;const{data:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(De(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!zr())throw new Zh("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Zh(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new IO("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Zh("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new IO("No code detected.");const{data:E,error:O}=await this._exchangeCodeForSession(t.code);if(O)throw O;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:s,refresh_token:l,expires_in:d,expires_at:f,token_type:h}=t;if(!s||!d||!l||!h)throw new Zh("No session defined in URL");const p=Math.round(Date.now()/1e3),g=parseInt(d);let y=p+g;f&&(y=parseInt(f));const v=y-p;v*1e3<=rc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${g}s`);const j=y-g;p-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,y,p):p-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,y,p);const{data:_,error:S}=await this._getUser(s);if(S)throw S;const N={provider_token:n,provider_refresh_token:a,access_token:s,expires_in:g,expires_at:y,refresh_token:l,token_type:h,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:N,redirectType:t.type},error:null})}catch(n){if(De(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await uo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:s}=r;if(s&&!l0(s))return this._returnResult({error:s});const l=(n=a.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:d}=await this.admin.signOut(l,t);if(d&&!(UU(d)&&(d.status===404||d.status===401||d.status===403)||l0(d)))return this._returnResult({error:d})}return t!=="others"&&(await this._removeSession(),await Ur(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=YU(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:s},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Vl(this.storage,this.storageKey,!0));try{return await $e(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(await Ur(this.storage,`${this.storageKey}-code-verifier`),De(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(De(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async s=>{var l,d,f,h,p;const{data:g,error:y}=s;if(y)throw y;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(d=t.options)===null||d===void 0?void 0:d.scopes,queryParams:(f=t.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await $e(this.fetch,"GET",v,{headers:this.headers,jwt:(p=(h=g.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(a)throw a;return zr()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(De(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:s}}=r;if(a)throw a;const{options:l,provider:d,token:f,access_token:h,nonce:p}=t,g=await $e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=s==null?void 0:s.access_token)!==null&&n!==void 0?n:void 0,body:{provider:d,id_token:f,access_token:h,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:da}),{data:y,error:v}=g;return v?this._returnResult({data:{user:null,session:null},error:v}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new Hl}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:v}))}catch(a){if(await Ur(this.storage,`${this.storageKey}-code-verifier`),De(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:s,error:l}=r;if(l)throw l;return await $e(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(De(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await JU(async a=>(a>0&&await ZU(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await $e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:da})),(a,s)=>{const l=200*Math.pow(2,a);return s&&c0(s)&&Date.now()+l-n<rc})}catch(n){if(this._debug(r,"error",n),De(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),zr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await uo(this.storage,this.storageKey);if(a&&this.userStorage){let l=await uo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await nc(this.userStorage,this.storageKey+"-user",l)),a.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:u0()}else if(a&&!a.user&&!a.user){const l=await uo(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(a.user=l.user,await Ur(this.storage,this.storageKey+"-user"),await nc(this.storage,this.storageKey,a)):a.user=u0()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const s=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<o0;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${o0}s`),s){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),c0(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:d}=await this._getUser(a.access_token);!d&&(l!=null&&l.user)?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Cn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Ip;const{data:s,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!s.session)throw new Cn;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const d={data:s.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(s){if(this._debug(a,"error",s),De(s)){const l={data:null,error:s};return c0(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const s=[],l=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,r)}catch(f){s.push(f)}});if(await Promise.all(l),s.length>0){for(let d=0;d<s.length;d+=1)console.error(s[d]);throw s[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Ur(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await nc(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const s=zO(a);await nc(this.storage,this.storageKey,s)}else{const a=zO(r);await nc(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ur(this.storage,this.storageKey),await Ur(this.storage,this.storageKey+"-code-verifier"),await Ur(this.storage,this.storageKey+"-user"),this.userStorage&&await Ur(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&zr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),rc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/rc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${rc}ms, refresh threshold is ${yx} ticks`),a<=yx&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof sD)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,l]=await Vl(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(d.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);a.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:s}=r;return s?this._returnResult({data:null,error:s}):await $e(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(De(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:s,error:l}=r;if(l)return this._returnResult({data:null,error:l});const d=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:f,error:h}=await $e(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return h?this._returnResult({data:null,error:h}):(t.factorType==="totp"&&f.type==="totp"&&(!((a=f==null?void 0:f.totp)===null||a===void 0)&&a.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(r){if(De(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:s}=r;if(s)return this._returnResult({data:null,error:s});const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Cz(t.webauthn.credential_response):Pz(t.webauthn.credential_response)})}:{code:t.code}),{data:d,error:f}=await $e(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:f}))})}catch(r){if(De(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:s}=r;if(s)return this._returnResult({data:null,error:s});const l=await $e(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:d}=l;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:Oz(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:Az(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(De(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(s),s.status==="verified"&&a[s.factor_type].push(s);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,n,a,s;if(t)try{const{payload:v}=Jh(t);let j=null;v.aal&&(j=v.aal);let _=j;const{data:{user:S},error:N}=await this.getUser(t);if(N)return this._returnResult({data:null,error:N});((n=(r=S==null?void 0:S.factors)===null||r===void 0?void 0:r.filter(C=>C.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(_="aal2");const O=v.amr||[];return{data:{currentLevel:j,nextLevel:_,currentAuthenticationMethods:O},error:null}}catch(v){if(De(v))return this._returnResult({data:null,error:v});throw v}const{data:{session:l},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=Jh(l.access_token);let h=null;f.aal&&(h=f.aal);let p=h;((s=(a=l.user.factors)===null||a===void 0?void 0:a.filter(v=>v.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(p="aal2");const y=f.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await $e(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Cn})})}catch(r){if(De(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!a)return this._returnResult({data:null,error:new Cn});const l=await $e(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return l.data&&l.data.redirect_url&&zr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(n){if(De(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!a)return this._returnResult({data:null,error:new Cn});const l=await $e(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return l.data&&l.data.redirect_url&&zr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(n){if(De(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await $e(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Cn})})}catch(t){if(De(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?(await $e(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Cn})})}catch(r){if(De(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(d=>d.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(d=>d.kid===t),n&&this.jwks_cached_at+BU>a)return n;const{data:s,error:l}=await $e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=a,n=s.keys.find(d=>d.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:v,error:j}=await this.getSession();if(j||!v.session)return this._returnResult({data:null,error:j});n=v.session.access_token}const{header:a,payload:s,signature:l,raw:{header:d,payload:f}}=Jh(n);r!=null&&r.allowExpired||sz(s.exp);const h=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!h){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:s,header:a,signature:l},error:null}}const p=oz(a.alg),g=await crypto.subtle.importKey("jwk",h,p,!0,["verify"]);if(!await crypto.subtle.verify(p,g,l,VU(`${d}.${f}`)))throw new xx("Invalid JWT signature");return{data:{claims:s,header:a,signature:l},error:null}}catch(n){if(De(n))return this._returnResult({data:null,error:n});throw n}}}xd.nextInstanceID={};const $z=xd,Uz="2.95.3";let sd="";typeof Deno<"u"?sd="deno":typeof document<"u"?sd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?sd="react-native":sd="node";const zz={"X-Client-Info":`supabase-js-${sd}/${Uz}`},qz={headers:zz},Fz={schema:"public"},Kz={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Qz={};function wd(e){"@babel/helpers - typeof";return wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wd(e)}function Hz(e,t){if(wd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vz(e){var t=Hz(e,"string");return wd(t)=="symbol"?t:t+""}function Gz(e,t,r){return(t=Vz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Xt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GO(Object(r),!0).forEach(function(n){Gz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Yz=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Wz=()=>Headers,Xz=(e,t,r)=>{const n=Yz(r),a=Wz();return async(s,l)=>{var d;const f=(d=await t())!==null&&d!==void 0?d:e;let h=new a(l==null?void 0:l.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${f}`),n(s,Xt(Xt({},l),{},{headers:h}))}};function Zz(e){return e.endsWith("/")?e:e+"/"}function Jz(e,t){var r,n;const{db:a,auth:s,realtime:l,global:d}=e,{db:f,auth:h,realtime:p,global:g}=t,y={db:Xt(Xt({},f),a),auth:Xt(Xt({},h),s),realtime:Xt(Xt({},p),l),storage:{},global:Xt(Xt(Xt({},g),d),{},{headers:Xt(Xt({},(r=g==null?void 0:g.headers)!==null&&r!==void 0?r:{}),(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function eq(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Zz(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var tq=class extends $z{constructor(e){super(e)}},rq=class{constructor(e,t,r){var n,a;this.supabaseUrl=e,this.supabaseKey=t;const s=eq(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const l=`sb-${s.hostname.split(".")[0]}-auth-token`,d={db:Fz,realtime:Qz,auth:Xt(Xt({},Kz),{},{storageKey:l}),global:qz},f=Jz(r??{},d);if(this.storageKey=(n=f.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken)this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=f.auth)!==null&&h!==void 0?h:{},this.headers,f.global.fetch)}this.fetch=Xz(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Xt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new U$(new URL("rest/v1",s).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch,timeout:f.db.timeout,urlLengthLimit:f.db.urlLengthLimit}),this.storage=new DU(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new T$(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,storageKey:s,flowType:l,lock:d,debug:f,throwOnError:h},p,g){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new tq({url:this.authUrl.href,headers:Xt(Xt({},y),p),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,flowType:l,lock:d,debug:f,throwOnError:h,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new nU(this.realtimeUrl.href,Xt(Xt({},e),{},{params:Xt(Xt({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const nq=(e,t,r)=>new rq(e,t,r);function aq(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}aq()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const iq="https://ozjddzasadgffjjeqntc.supabase.co",sq="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im96amRkemFzYWRnZmZqamVxbnRjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzOTMwMzEsImV4cCI6MjA4NTk2OTAzMX0._1fbWup_bHYe0PN5QUcptRMuwZRAEFwQOPEPd7Lk3NY",xe=nq(iq,sq),oq={company:{name:"BD Hatbela",logo:"",phone:"",email:"",address:""},order:{prefix:"BDH-",nextNumber:1},invoice:{title:"Tax Invoice",logoWidth:60,logoHeight:60,footer:"Thank you for shopping with BD Hatbela!"},defaults:{accountId:"",paymentMethod:"Cash",incomeCategoryId:"",expenseCategoryId:"",recordsPerPage:20},categories:[],paymentMethods:[],courier:{steadfast:{baseUrl:"",apiKey:"",secretKey:""},carryBee:{baseUrl:"",clientId:"",clientSecret:"",clientContext:"",storeId:""}}},cD=e=>{const t=localStorage.getItem(e);return t?JSON.parse(t):null},lq=cD("currentUser"),cq=cD("settings"),Ne={users:[],customers:[],vendors:[],products:[],orders:[],bills:[],accounts:[],transactions:[],currentUser:lq??null,settings:cq??oq},Yu=()=>{try{localStorage.setItem("currentUser",JSON.stringify(Ne.currentUser)),localStorage.setItem("settings",JSON.stringify(Ne.settings))}catch(e){console.warn("[DB] localStorage write failed:",e)}},Qt=25,zc="https://ozjddzasadgffjjeqntc.supabase.co",qc="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im96amRkemFzYWRnZmZqamVxbnRjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzOTMwMzEsImV4cCI6MjA4NTk2OTAzMX0._1fbWup_bHYe0PN5QUcptRMuwZRAEFwQOPEPd7Lk3NY";async function Wr(){if(Ne.currentUser)return{user:Ne.currentUser};const e=localStorage.getItem("currentUserId");if(e)try{const r=await Uw(e);if(r)return Ne.currentUser=r,{user:r}}catch(r){console.warn("[supabaseQueries] Failed to restore user from ID:",r)}const t=localStorage.getItem("userData");if(t)try{const r=JSON.parse(t);return Ne.currentUser=r,{user:r}}catch{}throw new Error("No authenticated session available. Please log in.")}function uq(){const e=Ne.currentUser;if(!e||!e.id)throw new Error("User session not available for mutation");return e.id}async function Mi(e,t=1e4){const r=n=>{if(!n)return!1;const a=((n==null?void 0:n.message)||(n==null?void 0:n.toString())||"").toLowerCase(),s=(n==null?void 0:n.code)||"";return a.includes("failed to fetch")||a.includes("connection closed")||a.includes("network")||a.includes("econnrefused")||a.includes("etimedout")||s==="ERR_CONNECTION_CLOSED"||n instanceof TypeError};try{const n=await Promise.race([e,new Promise(l=>{setTimeout(()=>l({data:null,error:{message:"Query timeout"}}),t)})]),{data:a,error:s}=n;return s?r(s)?(console.error("[supabaseQueries] NETWORK ERROR (no retry):",(s==null?void 0:s.message)||s),[]):(console.warn("[supabaseQueries] Query error:",(s==null?void 0:s.message)||s),[]):a||(console.warn("[supabaseQueries] Query returned no data"),[])}catch(n){return r(n)?(console.error("[supabaseQueries] NETWORK ERROR in catch:",(n==null?void 0:n.message)||n),[]):(console.error("[supabaseQueries] Query exception:",n),[])}}async function uD(){return console.log("[supabaseQueries] fetchCustomers called"),(await Mi(xe.from("customers").select("*").order("created_at",{ascending:!1}))).map(Ac)}async function dq(e){if(!e)return null;if(e.startsWith("temp-"))return console.warn("[supabaseQueries] fetchCustomerById called with temp id, returning null:",e),null;const{data:t,error:r}=await xe.from("customers").select("*").eq("id",e).single();return r?(console.error("[supabaseQueries] fetchCustomerById error:",r),null):Ac(t)}async function fq(e){await Wr();const t=crypto.randomUUID(),r=async()=>await xe.from("customers").insert([{id:t,name:e.name,phone:e.phone,address:e.address,total_orders:e.totalOrders||0,due_amount:e.dueAmount||0}]).select().single();try{const{data:n,error:a}=await r();if(a)throw console.error("[supabaseQueries] createCustomer error:",a),a;return Ac(n)}catch(n){const a=(n==null?void 0:n.name)||(n==null?void 0:n.code)||"";if(a==="AbortError"||a==="ABORT_ERR"||String(n).toLowerCase().includes("abort")){console.warn("[supabaseQueries] createCustomer aborted - retrying once");try{await new Promise(d=>setTimeout(d,250));const{data:s,error:l}=await r();if(l)throw console.error("[supabaseQueries] createCustomer retry error:",l),l;return Ac(s)}catch(s){throw console.error("[supabaseQueries] createCustomer abort/retry failed:",s),s}}throw console.error("[supabaseQueries] createCustomer error:",n),n}}async function hq(e,t){await Wr();const{data:r,error:n}=await xe.from("customers").update({...t.name&&{name:t.name},...t.phone&&{phone:t.phone},...t.address&&{address:t.address},...t.totalOrders!==void 0&&{total_orders:t.totalOrders},...t.dueAmount!==void 0&&{due_amount:t.dueAmount}}).eq("id",e).select().single();if(n)throw console.error("[supabaseQueries] updateCustomer error:",n),n;return Ac(r)}async function mq(e){if(e.startsWith("temp-")){const r=new Error("Cannot delete unsaved customer. Please refresh and try again.");throw console.error("[supabaseQueries] deleteCustomer error:",r),r}const{error:t}=await xe.from("customers").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteCustomer error:",t),t}function Ac(e){return{id:e.id,name:e.name,phone:e.phone,address:e.address,totalOrders:e.total_orders??e.totalOrders??0,dueAmount:e.due_amount??e.dueAmount??0,createdBy:e.created_by??e.createdBy}}async function pq(){return(await Mi(xe.from("orders").select("*").order("created_at",{ascending:!1}))).map(Fc)}async function gq(e=1,t=Qt,r){const n=(e-1)*t,a=n+t-1;let s=xe.from("orders").select("id, order_number, order_date, customer_id, created_by, status, subtotal, discount, shipping, total, paid_amount, notes, history, created_at",{count:"estimated"});if(r){if(r.status&&r.status!=="All"&&(s=s.eq("status",r.status)),r.from&&(s=s.gte("order_date",r.from)),r.to&&(s=s.lte("order_date",r.to)),r.search){const l=r.search.trim();l&&(s=s.ilike("order_number",`%${l}%`))}r.createdByIds&&r.createdByIds.length>0&&(s=s.in("created_by",r.createdByIds))}s=s.order("created_at",{ascending:!1}).range(n,a);try{const{data:l,error:d,count:f}=await s;return d?(console.error("[supabaseQueries] fetchOrdersPage error:",d),{data:[],count:0}):{data:(l||[]).map(Fc),count:f??0}}catch(l){return console.error("[supabaseQueries] fetchOrdersPage exception:",l),{data:[],count:0}}}async function yq(e){const{data:t,error:r}=await xe.from("orders").select("*").eq("id",e).single();return r?(console.error("[supabaseQueries] fetchOrderById error:",r),null):Fc(t)}async function vq(e){return(await Mi(xe.from("orders").select("*").eq("customer_id",e).order("order_date",{ascending:!1}))).map(Fc)}async function bq(e){await Wr();const t=crypto.randomUUID(),r=uq(),{data:n,error:a}=await xe.from("orders").insert([{id:t,order_number:e.orderNumber,order_date:e.orderDate,customer_id:e.customerId,created_by:r,status:e.status,items:e.items,subtotal:e.subtotal,discount:e.discount,shipping:e.shipping,total:e.total,paid_amount:e.paidAmount,history:e.history}]).select().single();if(a)throw console.error("[supabaseQueries] createOrder error:",a),a;return Fc(n)}async function xq(e,t){await Wr();const{data:r,error:n}=await xe.from("orders").update({...t.customerId&&{customer_id:t.customerId},...t.orderDate&&{order_date:t.orderDate},...t.orderNumber&&{order_number:t.orderNumber},...t.notes!==void 0&&{notes:t.notes},...t.status&&{status:t.status},...t.items&&{items:t.items},...t.subtotal!==void 0&&{subtotal:t.subtotal},...t.discount!==void 0&&{discount:t.discount},...t.shipping!==void 0&&{shipping:t.shipping},...t.total!==void 0&&{total:t.total},...t.paidAmount!==void 0&&{paid_amount:t.paidAmount},...t.history&&{history:t.history}}).eq("id",e).select();if(n)throw console.error("[supabaseQueries] updateOrder error:",n),n;if(!r||Array.isArray(r)&&r.length===0)return console.warn("[supabaseQueries] updateOrder: update succeeded but no row was returned (possible RLS). Returning null."),null;const a=Array.isArray(r)?r[0]:r;return Fc(a)}async function wq(e){await Wr();const{error:t}=await xe.from("transactions").delete().eq("reference_id",e).eq("type","Income");if(t)throw console.error("[supabaseQueries] deleteOrder: failed to delete income transactions:",t),t;const{error:r}=await xe.from("transactions").delete().eq("reference_id",e).eq("type","Expense").eq("category","expense_shipping");if(r)throw console.error("[supabaseQueries] deleteOrder: failed to delete shipping expense transactions:",r),r;const{error:n}=await xe.from("orders").delete().eq("id",e);if(n)throw console.error("[supabaseQueries] deleteOrder error:",n),n}function Fc(e){return{id:e.id,orderNumber:e.order_number??e.orderNumber,orderDate:e.order_date??e.orderDate,customerId:e.customer_id??e.customerId,createdBy:e.created_by??e.createdBy,status:e.status,items:e.items??[],subtotal:e.subtotal??0,discount:e.discount??0,shipping:e.shipping??0,total:e.total??0,notes:e.notes,history:e.history??{},paidAmount:e.paid_amount??e.paidAmount??0}}async function jq(){return(await Mi(xe.from("accounts").select("*").order("created_at",{ascending:!1}))).map($w)}async function Sq(e=1,t=Qt,r){const n=(e-1)*t,a=n+t-1;let s=xe.from("customers").select("id, name, phone, address, total_orders, due_amount, created_at",{count:"estimated"});if(r&&r.trim()){const l=r.trim();s=s.or(`name.ilike.%${l}%,phone.ilike.%${l}%,address.ilike.%${l}%`)}s=s.order("created_at",{ascending:!1}).range(n,a);try{const{data:l,error:d,count:f}=await s;return d?(console.error("[supabaseQueries] fetchCustomersPage error:",d),{data:[],count:0}):{data:(l||[]).map(Ac),count:f??0}}catch(l){return console.error("[supabaseQueries] fetchCustomersPage exception:",l),{data:[],count:0}}}async function _q(e){const t=crypto.randomUUID(),{data:r,error:n}=await xe.from("accounts").insert([{id:t,name:e.name,type:e.type,opening_balance:e.openingBalance,current_balance:e.currentBalance}]).select().single();if(n)throw console.error("[supabaseQueries] createAccount error:",n),n;return $w(r)}async function Nq(e,t){const{data:r,error:n}=await xe.from("accounts").update({...t.name&&{name:t.name},...t.type&&{type:t.type},...t.currentBalance!==void 0&&{current_balance:t.currentBalance}}).eq("id",e).select().single();if(n)throw console.error("[supabaseQueries] updateAccount error:",n),n;return $w(r)}async function Eq(e){const{error:t}=await xe.from("accounts").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteAccount error:",t),t}function $w(e){return{id:e.id,name:e.name,type:e.type,openingBalance:e.opening_balance??e.openingBalance,currentBalance:e.current_balance??e.currentBalance}}async function Oq(){return(await Mi(xe.from("transactions").select("*").order("created_at",{ascending:!1}))).map(dD)}async function Aq(e=1,t=Qt,r){const n=(e-1)*t,a=n+t-1;let s=xe.from("transactions").select("id, date, type, category, account_id, to_account_id, amount, description, reference_id, contact_id, payment_method, attachment_name, attachment_url, created_by, created_at",{count:"estimated"});if(r){if(r.type&&(s=s.eq("type",r.type)),r.from&&(s=s.gte("date",r.from)),r.to&&(s=s.lte("date",r.to)),r.search){const l=r.search.trim();l&&(s=s.ilike("description",`%${l}%`))}r.createdByIds&&r.createdByIds.length>0&&(s=s.in("created_by",r.createdByIds))}s=s.order("created_at",{ascending:!1}).range(n,a);try{const{data:l,error:d,count:f}=await s;return d?(console.error("[supabaseQueries] fetchTransactionsPage error:",d),{data:[],count:0}):{data:(l||[]).map(dD),count:f??0}}catch(l){return console.error("[supabaseQueries] fetchTransactionsPage exception:",l),{data:[],count:0}}}async function Cq(e){await Wr();const t=crypto.randomUUID(),r={id:t,date:e.date,type:e.type,category:e.category,account_id:e.accountId,amount:e.amount,description:e.description,payment_method:e.paymentMethod,created_by:e.createdBy};e.toAccountId&&(r.to_account_id=e.toAccountId),e.referenceId&&(r.reference_id=e.referenceId),e.contactId&&(r.contact_id=e.contactId),e.attachmentName&&(r.attachment_name=e.attachmentName),e.attachmentUrl&&(r.attachment_url=e.attachmentUrl);const{error:n}=await xe.from("transactions").insert([r]);if(n)throw console.error("[supabaseQueries] createTransaction error:",n),n;return{id:t,date:e.date,type:e.type,category:e.category,accountId:e.accountId,toAccountId:e.toAccountId,amount:e.amount,description:e.description,referenceId:e.referenceId,contactId:e.contactId,paymentMethod:e.paymentMethod,attachmentName:e.attachmentName,attachmentUrl:e.attachmentUrl,createdBy:e.createdBy}}async function Pq(e){if(e.startsWith("temp-")){const r=new Error("Cannot delete unsaved transactions. Please refresh and try again.");throw console.error("[supabaseQueries] deleteTransaction error:",r),r}const{error:t}=await xe.from("transactions").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteTransaction error:",t),t}function dD(e){const t=e.date??e.date_string??null,r=e.created_at??e.createdAt??null,n=t&&t.toString().length>10?t:r||t||"";return{id:e.id,date:n,type:e.type,category:e.category,accountId:e.account_id??e.accountId,toAccountId:e.to_account_id??e.toAccountId,amount:e.amount,description:e.description,referenceId:e.reference_id??e.referenceId,contactId:e.contact_id??e.contactId,paymentMethod:e.payment_method??e.paymentMethod,attachmentName:e.attachment_name??e.attachmentName,attachmentUrl:e.attachment_url??e.attachmentUrl,createdBy:e.created_by??e.createdBy,createdAt:r||null}}async function kq(e=1,t=Qt,r,n,a){const s=(e-1)*t,l=s+t-1;let d=xe.from("products").select("id, name, image, category, sale_price, purchase_price, created_at",{count:"estimated"});if(r&&r.trim()){const f=r.trim();d=d.ilike("name",`%${f}%`)}a&&a.length>0&&(d=d.in("created_by",a)),d=d.order("created_at",{ascending:!1}).range(s,l);try{const{data:f,error:h,count:p}=await d;return h?(console.error("[supabaseQueries] fetchProductsPage error:",h),{data:[],count:0}):{data:(f||[]).map(Xo),count:p??0}}catch(f){return console.error("[supabaseQueries] fetchProductsPage exception:",f),{data:[],count:0}}}async function Tm(){try{const{data:e,error:t}=await xe.from("products").select("id, name, sale_price, purchase_price").order("created_at",{ascending:!1}).limit(100);return t?(console.error("[supabaseQueries] fetchProductsMini error:",t),[]):(e||[]).map(Xo)}catch(e){return console.error("[supabaseQueries] fetchProductsMini exception:",e),[]}}async function fD(e,t=50){try{if(!e||!e.trim())return[];const{data:r,error:n}=await xe.from("products").select("id, name, sale_price, purchase_price").ilike("name",`%${e.trim()}%`).order("created_at",{ascending:!1}).limit(t);return n?(console.error("[supabaseQueries] fetchProductsSearch error:",n),[]):(r||[]).map(Xo)}catch(r){return console.error("[supabaseQueries] fetchProductsSearch exception:",r),[]}}async function Tq(){return(await Mi(xe.from("users").select("*").order("created_at",{ascending:!1}))).map(Vd)}async function Uw(e){const{data:t,error:r}=await xe.from("users").select("*").eq("id",e).single();if(r)return console.error("[supabaseQueries] fetchUserById error:",r),null;console.log("[supabaseQueries] fetchUserById raw data:",{id:t==null?void 0:t.id,name:t==null?void 0:t.name,password_hash:t!=null&&t.password_hash?`(${t.password_hash.substring(0,20)}...)`:"(NULL/MISSING)",allKeys:Object.keys(t||{})});const n=Vd(t);return console.log("[supabaseQueries] fetchUserById mapped user:",{id:n.id,name:n.name,password:n.password?`(${n.password.substring(0,20)}...)`:"(NULL/MISSING)"}),n}async function Dq(e,t){try{console.log("[supabaseQueries] loginUser - fetching user by phone:",e);const{data:r,error:n}=await xe.from("users").select("*").eq("phone",e).single();if(n)return console.error("[supabaseQueries] loginUser - user not found:",n==null?void 0:n.message),{user:null,error:"User not found"};if(!r)return{user:null,error:"User not found"};console.log("[supabaseQueries] loginUser - validating password");try{if(!(await Iw(()=>import("./bcrypt-6Obl-K4W.js").then(l=>l.b),[])).compareSync(t,r.password_hash||""))return console.error("[supabaseQueries] loginUser - password mismatch"),{user:null,error:"Invalid password"}}catch(a){return console.error("[supabaseQueries] loginUser - bcrypt error:",a==null?void 0:a.message),{user:null,error:"Password validation failed"}}return console.log("[supabaseQueries] loginUser - success for user:",r.id),{user:Vd(r),error:null}}catch(r){return console.error("[supabaseQueries] loginUser exception:",(r==null?void 0:r.message)||r),{user:null,error:(r==null?void 0:r.message)||"Login failed"}}}async function Mq(e){try{const t=e.password;if(!t)throw new Error("Password is required to create a user");const r=crypto.randomUUID();console.log("[supabaseQueries] Creating user with phone:",e.phone,"id:",r);let n;try{n=(await Iw(()=>import("./bcrypt-6Obl-K4W.js").then(f=>f.b),[])).hashSync(t,12),console.log("[supabaseQueries] Password hashed successfully")}catch(l){throw console.error("[supabaseQueries] Password hashing failed:",l==null?void 0:l.message),new Error(`Password hashing failed: ${(l==null?void 0:l.message)||"Unknown error"}`)}console.log("[supabaseQueries] Inserting user row into users table");const{data:a,error:s}=await xe.from("users").insert([{id:r,name:e.name,phone:e.phone,role:e.role,image:e.image,password_hash:n}]).select().single();if(s)throw console.error("[supabaseQueries] Create profile error:",s),s;return console.log("[supabaseQueries] User created successfully - can now sign in (frontend-password mode)"),Vd(a)}catch(t){throw console.error("[supabaseQueries] createUser error:",t),t}}async function Rq(e,t){const r={...t.name&&{name:t.name},...t.phone&&{phone:t.phone},...t.role&&{role:t.role},...t.image&&{image:t.image}};if(t.password)try{const d=(await Iw(()=>import("./bcrypt-6Obl-K4W.js").then(f=>f.b),[])).hashSync(t.password,12);r.password_hash=d}catch(s){throw console.error("[supabaseQueries] updateUser - password hashing failed:",s==null?void 0:s.message),s}const{data:n,error:a}=await xe.from("users").update(r).eq("id",e).select().single();if(a)throw console.error("[supabaseQueries] updateUser error:",a),a;return Vd(n)}async function Iq(e){const{error:t}=await xe.from("users").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteUser error:",t),t}function YO(e){return e?typeof e=="string"?e:e.message?e.message:e.details?e.details:e.hint?e.hint:JSON.stringify(e):"Unknown error"}function Vd(e){return{id:e.id,name:e.name,phone:e.phone,role:e.role,image:e.image,password:void 0,createdAt:e.created_at}}async function Lq(e=1,t=Qt,r,n){const a=(e-1)*t,s=a+t-1;let l=xe.from("vendors").select("id, name, phone, address, total_purchases, due_amount, created_at",{count:"estimated"});if(r&&r.trim()){const d=r.trim();l=l.or(`name.ilike.%${d}%,phone.ilike.%${d}%,address.ilike.%${d}%`)}l=l.order("created_at",{ascending:!1}).range(a,s);try{const{data:d,error:f,count:h}=await l;return f?(console.error("[supabaseQueries] fetchVendorsPage error:",f),{data:[],count:0}):{data:(d||[]).map(Yd),count:h??0}}catch(d){return console.error("[supabaseQueries] fetchVendorsPage exception:",d),{data:[],count:0}}}async function Bq(e=1,t=Qt,r){const n=(e-1)*t,a=n+t-1;let s=xe.from("bills").select("id, bill_number, bill_date, vendor_id, total, paid_amount, status, created_by, created_at",{count:"estimated"});if(r){if(r.from&&(s=s.gte("bill_date",r.from)),r.to&&(s=s.lte("bill_date",r.to)),r.search&&r.search.trim()){const l=r.search.trim();s=s.ilike("bill_number",`%${l}%`)}r.createdByIds&&r.createdByIds.length>0&&(s=s.in("created_by",r.createdByIds))}s=s.order("created_at",{ascending:!1}).range(n,a);try{const{data:l,error:d,count:f}=await s;return d?(console.error("[supabaseQueries] fetchBillsPage error:",d),{data:[],count:0}):{data:(l||[]).map(Gd),count:f??0}}catch(l){return console.error("[supabaseQueries] fetchBillsPage exception:",l),{data:[],count:0}}}async function $q(){return(await Mi(xe.from("bills").select("*").order("created_at",{ascending:!1}))).map(Gd)}async function Uq(e){const{data:t,error:r}=await xe.from("bills").select("*").eq("id",e).single();return r?(console.error("[supabaseQueries] fetchBillById error:",r),null):Gd(t)}async function zq(e){await Wr();const t=crypto.randomUUID(),{data:r,error:n}=await xe.from("bills").insert([{id:t,bill_number:e.billNumber,bill_date:e.billDate,vendor_id:e.vendorId,created_by:e.createdBy,status:e.status,items:e.items,subtotal:e.subtotal,discount:e.discount,shipping:e.shipping,total:e.total,paid_amount:e.paidAmount,history:e.history||{}}]).select().single();if(n)throw console.error("[supabaseQueries] createBill error:",n),n;return Gd(r)}async function qq(e,t){await Wr();const{data:r,error:n}=await xe.from("bills").update({...t.vendorId&&{vendor_id:t.vendorId},...t.billDate&&{bill_date:t.billDate},...t.billNumber&&{bill_number:t.billNumber},...t.notes!==void 0&&{notes:t.notes},...t.status&&{status:t.status},...t.items&&{items:t.items},...t.subtotal!==void 0&&{subtotal:t.subtotal},...t.discount!==void 0&&{discount:t.discount},...t.shipping!==void 0&&{shipping:t.shipping},...t.total!==void 0&&{total:t.total},...t.paidAmount!==void 0&&{paid_amount:t.paidAmount},...t.history&&{history:t.history}}).eq("id",e).select().single();if(n)throw console.error("[supabaseQueries] updateBill error:",n),n;return Gd(r)}async function Fq(e){await Wr();const{error:t}=await xe.from("transactions").delete().eq("reference_id",e).eq("type","Expense");if(t)throw console.error("[supabaseQueries] deleteBill: failed to delete related transactions:",t),t;const{error:r}=await xe.from("bills").delete().eq("id",e);if(r)throw console.error("[supabaseQueries] deleteBill error:",r),r}function Gd(e){return{id:e.id,billNumber:e.bill_number??e.billNumber,billDate:e.bill_date??e.billDate,vendorId:e.vendor_id??e.vendorId,createdBy:e.created_by??e.createdBy,status:e.status,items:e.items??[],subtotal:e.subtotal??0,discount:e.discount??0,shipping:e.shipping??0,total:e.total??0,notes:e.notes,paidAmount:e.paid_amount??e.paidAmount??0,history:e.history}}async function Kq(){return(await Mi(xe.from("vendors").select("*").order("created_at",{ascending:!1}))).map(Yd)}async function Qq(e){const{data:t,error:r}=await xe.from("vendors").select("*").eq("id",e).single();return r?(console.error("[supabaseQueries] fetchVendorById error:",r),null):Yd(t)}async function Hq(e){await Wr();const t=crypto.randomUUID(),{data:r,error:n}=await xe.from("vendors").insert([{id:t,name:e.name,phone:e.phone,address:e.address,total_purchases:e.totalPurchases||0,due_amount:e.dueAmount||0}]).select().single();if(n)throw console.error("[supabaseQueries] createVendor error:",n),n;return Yd(r)}async function Vq(e,t){await Wr();const{data:r,error:n}=await xe.from("vendors").update({...t.name&&{name:t.name},...t.phone&&{phone:t.phone},...t.address&&{address:t.address},...t.totalPurchases!==void 0&&{total_purchases:t.totalPurchases},...t.dueAmount!==void 0&&{due_amount:t.dueAmount}}).eq("id",e).select().single();if(n)throw console.error("[supabaseQueries] updateVendor error:",n),n;return Yd(r)}async function Gq(e){const{error:t}=await xe.from("vendors").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteVendor error:",t),t}function Yd(e){return{id:e.id,name:e.name,phone:e.phone,address:e.address,totalPurchases:e.total_purchases??e.totalPurchases??0,dueAmount:e.due_amount??e.dueAmount??0,createdBy:e.created_by??e.createdBy}}async function Yq(e){console.log("[supabaseQueries] fetchProducts called",e?"for category: "+e:"");try{let t=xe.from("products").select("id, name, image, category, sale_price, purchase_price, created_at").order("created_at",{ascending:!1});return e&&(t=t.eq("category",e)),(await Mi(t)).map(Xo)}catch(t){return console.error("[supabaseQueries] fetchProducts error:",t),[]}}async function Wq(e){const{data:t,error:r}=await xe.from("products").select("*").eq("id",e).single();return r?(console.error("[supabaseQueries] fetchProductById error:",r),null):Xo(t)}async function Xq(e){await Wr();const t=crypto.randomUUID(),{data:r,error:n}=await xe.from("products").insert([{id:t,name:e.name,image:e.image,category:e.category,sale_price:e.salePrice,purchase_price:e.purchasePrice}]).select().single();if(n)throw console.error("[supabaseQueries] createProduct error:",n),n;return Xo(r)}async function Zq(e,t){const{data:r,error:n}=await xe.from("products").update({...t.name&&{name:t.name},...t.image&&{image:t.image},...t.category&&{category:t.category},...t.salePrice!==void 0&&{sale_price:t.salePrice},...t.purchasePrice!==void 0&&{purchase_price:t.purchasePrice}}).eq("id",e).select().single();if(n)throw console.error("[supabaseQueries] updateProduct error:",n),n;return Xo(r)}async function Jq(e){const{error:t}=await xe.from("products").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteProduct error:",t),t}function Xo(e){return{id:e.id,name:e.name,image:e.image,category:e.category,salePrice:e.sale_price??e.salePrice??0,purchasePrice:e.purchase_price??e.purchasePrice??0,createdBy:e.created_by??e.createdBy}}async function e8(e){console.log("[supabaseQueries] fetchCategories called",e?"for type: "+e:"");try{let t=xe.from("categories").select("*").order("name",{ascending:!0});e&&(t=t.eq("type",e));const{data:r,error:n}=await t;if(n)throw console.error("[supabaseQueries] fetchCategories error:",n),new Error(`[${n.code}] ${n.message}`);return r?r.map(hD):[]}catch(t){throw console.error("[supabaseQueries] fetchCategories exception:",t),t}}async function t8(e){await Wr();const t=crypto.randomUUID(),{data:r,error:n}=await xe.from("categories").insert([{id:t,name:e.name,type:e.type,color:e.color||"#3B82F6",parent_id:e.parentId||null}]).select().single();if(n)throw console.error("[supabaseQueries] createCategory error:",n),n;return hD(r)}async function r8(e){const{error:t}=await xe.from("categories").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteCategory error:",t),t}function hD(e){return{id:e.id,name:e.name,type:e.type,color:e.color,parentId:e.parent_id,createdAt:e.created_at,updatedAt:e.updated_at}}async function n8(e=!0){console.log("[supabaseQueries] fetchPaymentMethods called");try{let t=xe.from("payment_methods").select("*").order("name",{ascending:!0});e&&(t=t.eq("is_active",!0));const{data:r,error:n}=await t;if(n)throw console.error("[supabaseQueries] fetchPaymentMethods error:",n),new Error(`[${n.code}] ${n.message}`);return r?r.map(mD):[]}catch(t){throw console.error("[supabaseQueries] fetchPaymentMethods exception:",t),t}}async function a8(e){await Wr();const t=crypto.randomUUID(),{data:r,error:n}=await xe.from("payment_methods").insert([{id:t,name:e.name,description:e.description||null,is_active:!0}]).select().single();if(n)throw console.error("[supabaseQueries] createPaymentMethod error:",n),n;return mD(r)}async function i8(e){const{error:t}=await xe.from("payment_methods").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deletePaymentMethod error:",t),t}function mD(e){return{id:e.id,name:e.name,description:e.description,isActive:e.is_active,createdAt:e.created_at,updatedAt:e.updated_at}}async function s8(){console.log("[supabaseQueries] fetchUnits called");try{const{data:e,error:t}=await xe.from("units").select("*").order("name",{ascending:!0});if(t)throw console.error("[supabaseQueries] fetchUnits error:",t),new Error(`[${t.code}] ${t.message}`);return e?e.map(pD):[]}catch(e){throw console.error("[supabaseQueries] fetchUnits exception:",e),e}}async function o8(e){const t=e.shortName.toLowerCase(),{data:r,error:n}=await xe.from("units").insert([{id:t,name:e.name,short_name:e.shortName,description:e.description||null}]).select().single();if(n)throw console.error("[supabaseQueries] createUnit error:",n),n;return pD(r)}async function l8(e){const{error:t}=await xe.from("units").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteUnit error:",t),t}function pD(e){return{id:e.id,name:e.name,shortName:e.short_name,description:e.description,createdAt:e.created_at,updatedAt:e.updated_at}}async function Wd(){try{const{data:e,error:t}=await xe.from("company_settings").select("*").maybeSingle();return t||!e?(console.error("[supabaseQueries] fetchCompanySettings error:",t),{id:"default",name:"Your Company",phone:"+880",email:"info@company.com",address:"",logo:""}):{id:e.id,name:e.name||"Your Company",phone:e.phone||"+880",email:e.email||"info@company.com",address:e.address||"",logo:e.logo||""}}catch(e){return console.error("[supabaseQueries] fetchCompanySettings exception:",e),{id:"default",name:"Your Company",phone:"+880",email:"info@company.com",address:"",logo:""}}}async function c8(e){await Wr();try{const t=await Wd(),r={name:e.name||t.name,phone:e.phone||t.phone,email:e.email||t.email,address:e.address!==void 0?e.address:t.address,logo:e.logo!==void 0?e.logo:t.logo},{data:n}=await xe.from("company_settings").select("id").limit(1).maybeSingle();let a;if(n!=null&&n.id){const{data:s,error:l}=await xe.from("company_settings").update(r).eq("id",n.id).select().maybeSingle();if(l)throw l;a=s}else{const{data:s,error:l}=await xe.from("company_settings").insert(r).select().single();if(l)throw l;a=s}return a||r}catch(t){throw console.error("[supabaseQueries] updateCompanySettings exception:",t),t}}async function zw(){try{const{data:e,error:t}=await xe.from("order_settings").select("*").maybeSingle();return t||!e?(console.error("[supabaseQueries] fetchOrderSettings error:",t),{prefix:"ORD-",nextNumber:1}):{prefix:e.prefix||"ORD-",nextNumber:e.next_number||1}}catch(e){return console.error("[supabaseQueries] fetchOrderSettings exception:",e),{prefix:"ORD-",nextNumber:1}}}async function gD(e){try{const t=await zw(),r={prefix:e.prefix||t.prefix,next_number:e.nextNumber!==void 0?e.nextNumber:t.nextNumber},{data:n}=await xe.from("order_settings").select("id").limit(1).maybeSingle();let a;if(n!=null&&n.id){const{data:s,error:l}=await xe.from("order_settings").update(r).eq("id",n.id).select().maybeSingle();if(l)throw l;a=s}else{const{data:s,error:l}=await xe.from("order_settings").insert(r).select().single();if(l)throw l;a=s}return a?{prefix:a.prefix,nextNumber:a.next_number}:r}catch(t){throw console.error("[supabaseQueries] updateOrderSettings error:",t),t}}async function qw(){try{const{data:e,error:t}=await xe.from("invoice_settings").select("*").maybeSingle();return t||!e?(console.error("[supabaseQueries] fetchInvoiceSettings error:",t),{title:"Invoice",logoWidth:120,logoHeight:120,footer:""}):{title:e.title||"Invoice",logoWidth:e.logo_width||120,logoHeight:e.logo_height||120,footer:e.footer||""}}catch(e){return console.error("[supabaseQueries] fetchInvoiceSettings exception:",e),{title:"Invoice",logoWidth:120,logoHeight:120,footer:""}}}async function u8(e){try{const t=await qw(),r={title:e.title||t.title,logo_width:e.logoWidth!==void 0?e.logoWidth:t.logoWidth,logo_height:e.logoHeight!==void 0?e.logoHeight:t.logoHeight,footer:e.footer!==void 0?e.footer:t.footer},{data:n}=await xe.from("invoice_settings").select("id").limit(1).maybeSingle();let a;if(n!=null&&n.id){const{data:s,error:l}=await xe.from("invoice_settings").update(r).eq("id",n.id).select().maybeSingle();if(l)throw l;a=s}else{const{data:s,error:l}=await xe.from("invoice_settings").insert(r).select().single();if(l)throw l;a=s}return a?{title:a.title,logoWidth:a.logo_width,logoHeight:a.logo_height,footer:a.footer}:{title:r.title,logoWidth:r.logo_width,logoHeight:r.logo_height,footer:r.footer}}catch(t){throw console.error("[supabaseQueries] updateInvoiceSettings error:",t),t}}async function Fw(){try{const{data:e,error:t}=await xe.from("system_defaults").select("*").maybeSingle();return t||!e?(console.error("[supabaseQueries] fetchSystemDefaults error:",t),{defaultAccountId:"",defaultPaymentMethod:"",incomeCategoryId:"",expenseCategoryId:"",recordsPerPage:10}):{defaultAccountId:e.default_account_id||"",defaultPaymentMethod:e.default_payment_method||"",incomeCategoryId:e.income_category_id||"",expenseCategoryId:e.expense_category_id||"",recordsPerPage:e.records_per_page||10}}catch(e){return console.error("[supabaseQueries] fetchSystemDefaults exception:",e),{defaultAccountId:"",defaultPaymentMethod:"",incomeCategoryId:"",expenseCategoryId:"",recordsPerPage:10}}}async function d8(e){try{const t=await Fw(),r={default_account_id:e.defaultAccountId?e.defaultAccountId:t.defaultAccountId||null,default_payment_method:e.defaultPaymentMethod?e.defaultPaymentMethod:t.defaultPaymentMethod||null,income_category_id:e.incomeCategoryId?e.incomeCategoryId:t.incomeCategoryId||null,expense_category_id:e.expenseCategoryId?e.expenseCategoryId:t.expenseCategoryId||null,records_per_page:e.recordsPerPage!==void 0?e.recordsPerPage:t.recordsPerPage},{data:n}=await xe.from("system_defaults").select("id").limit(1).maybeSingle();let a;if(n!=null&&n.id){const{data:s,error:l}=await xe.from("system_defaults").update(r).eq("id",n.id).select().maybeSingle();if(l)throw l;a=s}else{const{data:s,error:l}=await xe.from("system_defaults").insert(r).select().single();if(l)throw l;a=s}return a?{defaultAccountId:a.default_account_id,defaultPaymentMethod:a.default_payment_method,incomeCategoryId:a.income_category_id,expenseCategoryId:a.expense_category_id,recordsPerPage:a.records_per_page}:t}catch(t){throw console.error("[supabaseQueries] updateSystemDefaults error:",t),t}}async function Kw(){try{const{data:e,error:t}=await xe.from("courier_settings").select("*").maybeSingle();return t||!e?(console.error("[supabaseQueries] fetchCourierSettings error:",t),{steadfast:{baseUrl:"",apiKey:"",secretKey:""},carryBee:{baseUrl:"",clientId:"",clientSecret:"",clientContext:"",storeId:""}}):{steadfast:{baseUrl:e.steadfast_base_url||"",apiKey:e.steadfast_api_key||"",secretKey:e.steadfast_secret_key||""},carryBee:{baseUrl:e.carrybee_base_url||"",clientId:e.carrybee_client_id||"",clientSecret:e.carrybee_client_secret||"",clientContext:e.carrybee_client_context||"",storeId:e.carrybee_store_id||""}}}catch(e){return console.error("[supabaseQueries] fetchCourierSettings exception:",e),{steadfast:{baseUrl:"",apiKey:"",secretKey:""},carryBee:{baseUrl:"",clientId:"",clientSecret:"",clientContext:"",storeId:""}}}}async function f8(e){var t,r,n,a,s,l,d,f;try{const h=await Kw(),p={steadfast_base_url:((t=e.steadfast)==null?void 0:t.baseUrl)||h.steadfast.baseUrl,steadfast_api_key:((r=e.steadfast)==null?void 0:r.apiKey)||h.steadfast.apiKey,steadfast_secret_key:((n=e.steadfast)==null?void 0:n.secretKey)||h.steadfast.secretKey,carrybee_base_url:((a=e.carryBee)==null?void 0:a.baseUrl)||h.carryBee.baseUrl,carrybee_client_id:((s=e.carryBee)==null?void 0:s.clientId)||h.carryBee.clientId,carrybee_client_secret:((l=e.carryBee)==null?void 0:l.clientSecret)||h.carryBee.clientSecret,carrybee_client_context:((d=e.carryBee)==null?void 0:d.clientContext)||h.carryBee.clientContext,carrybee_store_id:((f=e.carryBee)==null?void 0:f.storeId)||h.carryBee.storeId},{data:g}=await xe.from("courier_settings").select("id").limit(1).maybeSingle();let y;if(g!=null&&g.id){const{data:v,error:j}=await xe.from("courier_settings").update(p).eq("id",g.id).select().maybeSingle();if(j)throw j;y=v}else{const{data:v,error:j}=await xe.from("courier_settings").insert(p).select().single();if(j)throw j;y=v}return{steadfast:{baseUrl:(y==null?void 0:y.steadfast_base_url)||"",apiKey:(y==null?void 0:y.steadfast_api_key)||"",secretKey:(y==null?void 0:y.steadfast_secret_key)||""},carryBee:{baseUrl:(y==null?void 0:y.carrybee_base_url)||"",clientId:(y==null?void 0:y.carrybee_client_id)||"",clientSecret:(y==null?void 0:y.carrybee_client_secret)||"",clientContext:(y==null?void 0:y.carrybee_client_context)||"",storeId:(y==null?void 0:y.carrybee_store_id)||""}}}catch(h){throw console.error("[supabaseQueries] updateCourierSettings error:",h),h}}async function h8(e){var t,r,n,a,s;try{const l=(t=e.baseUrl)==null?void 0:t.trim(),d=(r=e.clientId)==null?void 0:r.trim(),f=(n=e.clientSecret)==null?void 0:n.trim(),h=(a=e.clientContext)==null?void 0:a.trim();if(!l||!d||!f||!h)return console.warn("[supabaseQueries] CarryBee API parameters incomplete"),[];console.log("[supabaseQueries] Calling Edge Function for CarryBee stores");const p=`${zc}/functions/v1/carrybee-stores`;console.log("[supabaseQueries] Edge Function URL:",p);const g=await fetch(p,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${qc}`},body:JSON.stringify({baseUrl:l,clientId:d,clientSecret:f,clientContext:h})});if(console.log("[supabaseQueries] Edge Function response status:",g.status),!g.ok)return console.error("[supabaseQueries] Edge Function error:",g.status,g.statusText),[];const y=await g.json();if(console.log("[supabaseQueries] Edge Function response data:",y),y.error)return console.error("[supabaseQueries] Edge Function returned error:",y.error,y.details),[];if(!((s=y.data)!=null&&s.stores))return console.warn("[supabaseQueries] No stores in response"),[];const v=y.data.stores.map(j=>({id:j.id,name:j.name}));return console.log("[supabaseQueries] Successfully fetched",v.length,"stores"),v}catch(l){return console.error("[supabaseQueries] fetchCarryBeeStores exception:",l instanceof Error?l.message:l),[]}}async function m8(e){var t,r,n,a,s;try{const l=(t=e.baseUrl)==null?void 0:t.trim(),d=(r=e.clientId)==null?void 0:r.trim(),f=(n=e.clientSecret)==null?void 0:n.trim(),h=(a=e.clientContext)==null?void 0:a.trim();if(!l||!d||!f||!h)return console.warn("[supabaseQueries] CarryBee API parameters incomplete"),[];const p=`${zc}/functions/v1/carrybee-cities`,g=await fetch(p,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${qc}`},body:JSON.stringify({baseUrl:l,clientId:d,clientSecret:f,clientContext:h})});if(!g.ok)return console.error("[supabaseQueries] Cities Edge Function error:",g.status),[];const y=await g.json();return y.error||!((s=y.data)!=null&&s.cities)?(console.error("[supabaseQueries] Cities Edge Function returned error:",y.error),[]):y.data.cities.map(v=>({id:v.id,name:v.name}))}catch(l){return console.error("[supabaseQueries] fetchCarryBeeCities exception:",l instanceof Error?l.message:l),[]}}async function p8(e){var t,r,n,a,s,l;try{const d=(t=e.baseUrl)==null?void 0:t.trim(),f=(r=e.clientId)==null?void 0:r.trim(),h=(n=e.clientSecret)==null?void 0:n.trim(),p=(a=e.clientContext)==null?void 0:a.trim(),g=(s=e.cityId)==null?void 0:s.trim();if(!d||!f||!h||!p||!g)return console.warn("[supabaseQueries] CarryBee API parameters incomplete"),[];const y=`${zc}/functions/v1/carrybee-zones`,v=await fetch(y,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${qc}`},body:JSON.stringify({baseUrl:d,clientId:f,clientSecret:h,clientContext:p,cityId:g})});if(!v.ok)return console.error("[supabaseQueries] Zones Edge Function error:",v.status),[];const j=await v.json();return j.error||!((l=j.data)!=null&&l.zones)?(console.error("[supabaseQueries] Zones Edge Function returned error:",j.error),[]):j.data.zones.map(_=>({id:_.id,name:_.name}))}catch(d){return console.error("[supabaseQueries] fetchCarryBeeZones exception:",d instanceof Error?d.message:d),[]}}async function g8(e){var t,r,n,a,s,l,d;try{const f=(t=e.baseUrl)==null?void 0:t.trim(),h=(r=e.clientId)==null?void 0:r.trim(),p=(n=e.clientSecret)==null?void 0:n.trim(),g=(a=e.clientContext)==null?void 0:a.trim(),y=(s=e.cityId)==null?void 0:s.trim(),v=(l=e.zoneId)==null?void 0:l.trim();if(!f||!h||!p||!g||!y||!v)return console.warn("[supabaseQueries] CarryBee API parameters incomplete"),[];const j=`${zc}/functions/v1/carrybee-areas`,_=await fetch(j,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${qc}`},body:JSON.stringify({baseUrl:f,clientId:h,clientSecret:p,clientContext:g,cityId:y,zoneId:v})});if(!_.ok)return console.error("[supabaseQueries] Areas Edge Function error:",_.status),[];const S=await _.json();return S.error||!((d=S.data)!=null&&d.areas)?(console.error("[supabaseQueries] Areas Edge Function returned error:",S.error),[]):S.data.areas.map(N=>({id:N.id,name:N.name}))}catch(f){return console.error("[supabaseQueries] fetchCarryBeeAreas exception:",f instanceof Error?f.message:f),[]}}async function y8(e){var t,r,n,a;try{const s=(t=e.baseUrl)==null?void 0:t.trim(),l=(r=e.clientId)==null?void 0:r.trim(),d=(n=e.clientSecret)==null?void 0:n.trim(),f=(a=e.clientContext)==null?void 0:a.trim();if(!s||!l||!d||!f||!e.storeId)return console.warn("[supabaseQueries] CarryBee API parameters incomplete"),{error:"Missing required parameters"};console.log("[supabaseQueries] Calling Edge Function to submit CarryBee order");const h=`${zc}/functions/v1/carrybee-submit-order`,p=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${qc}`},body:JSON.stringify({baseUrl:s,clientId:l,clientSecret:d,clientContext:f,storeId:e.storeId,deliveryType:e.deliveryType,productType:e.productType,recipientPhone:e.recipientPhone,recipientName:e.recipientName,recipientAddress:e.recipientAddress,cityId:e.cityId,zoneId:e.zoneId,areaId:e.areaId,itemWeight:e.itemWeight,collectableAmount:e.collectableAmount})});if(console.log("[supabaseQueries] Submit Order Edge Function response status:",p.status),!p.ok)return console.error("[supabaseQueries] Submit Order Edge Function error:",p.status),{error:`HTTP ${p.status}`};const g=await p.json();return console.log("[supabaseQueries] Submit Order response:",g),g.error?(console.error("[supabaseQueries] Edge Function returned error:",g.error),{error:g.error}):(console.log("[supabaseQueries] Successfully submitted order to CarryBee"),g.data)}catch(s){return console.error("[supabaseQueries] submitCarryBeeOrder exception:",s instanceof Error?s.message:s),{error:s instanceof Error?s.message:"Unknown error"}}}async function v8(e){var t,r,n,a,s;try{const l=(t=e.baseUrl)==null?void 0:t.trim(),d=(r=e.apiKey)==null?void 0:r.trim(),f=(n=e.secretKey)==null?void 0:n.trim();if(console.log("[supabaseQueries] ======== BEFORE TRIM ========"),console.log("[supabaseQueries] baseUrl (raw):",JSON.stringify(e.baseUrl)),console.log("[supabaseQueries] apiKey (raw):",JSON.stringify((a=e.apiKey)==null?void 0:a.substring(0,5))),console.log("[supabaseQueries] secretKey (raw):",JSON.stringify((s=e.secretKey)==null?void 0:s.substring(0,5))),console.log("[supabaseQueries] ======== AFTER TRIM ========"),console.log("[supabaseQueries] baseUrl (trimmed):",JSON.stringify(l)),console.log("[supabaseQueries] apiKey (trimmed):",JSON.stringify(d==null?void 0:d.substring(0,5))),console.log("[supabaseQueries] secretKey (trimmed):",JSON.stringify(f==null?void 0:f.substring(0,5))),!l||!d||!f||!e.invoice||!e.recipientName||!e.recipientPhone||!e.recipientAddress||e.codAmount===void 0)return console.warn("[supabaseQueries] Steadfast API parameters incomplete"),console.warn("[supabaseQueries] Validation:",{baseUrl:!!l,apiKey:!!d,secretKey:!!f,invoice:!!e.invoice,recipientName:!!e.recipientName,recipientPhone:!!e.recipientPhone,recipientAddress:!!e.recipientAddress,codAmount:e.codAmount!==void 0}),{error:"Missing required parameters"};console.log("[supabaseQueries] ======== CALLING EDGE FUNCTION ========");const h=`${zc}/functions/v1/steadfast-submit-order`;console.log("[supabaseQueries] Edge Function URL:",h);const p={baseUrl:l,apiKey:d,secretKey:f,invoice:e.invoice,recipientName:e.recipientName,recipientPhone:e.recipientPhone,recipientAddress:e.recipientAddress,codAmount:e.codAmount};console.log("[supabaseQueries] Payload being sent:",{baseUrl:l,apiKey:`${d.substring(0,5)}...`,secretKey:`${f.substring(0,5)}...`,invoice:p.invoice,recipientName:p.recipientName,recipientPhone:p.recipientPhone,recipientAddress:p.recipientAddress,codAmount:p.codAmount});const g=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${qc}`},body:JSON.stringify(p)});if(console.log("[supabaseQueries] Submit Steadfast Order Edge Function response status:",g.status),!g.ok)return console.error("[supabaseQueries] Submit Steadfast Order Edge Function error:",g.status),{error:`HTTP ${g.status}`};const y=await g.json();if(console.log("[supabaseQueries] Submit Steadfast Order response:",y),y.error){const v=y.details?`${y.error}: ${y.details}`:y.error;return console.error("[supabaseQueries] Edge Function returned error:",v),{error:v}}return console.log("[supabaseQueries] Successfully submitted order to Steadfast"),y.data}catch(l){return console.error("[supabaseQueries] submitSteadfastOrder exception:",l instanceof Error?l.message:l),{error:l instanceof Error?l.message:"Unknown error"}}}async function b8(e){await Wr();try{const[t,r,n,a,s]=await Promise.all([e.company?c8(e.company):Wd(),e.order?gD(e.order):zw(),e.invoice?u8(e.invoice):qw(),e.defaults?d8(e.defaults):Fw(),e.courier?f8(e.courier):Kw()]);return{company:t,order:r,invoice:n,defaults:a,courier:s}}catch(t){throw console.error("[supabaseQueries] batchUpdateSettings error:",t),t}}const yD=x.createContext(void 0),x8=({children:e})=>{const[t,r]=x.useState(null),[n,a]=x.useState(!0),s=2500;console.log("[AuthProvider] Mounting - initializing context provider"),x.useEffect(()=>{let f=!0;return(async()=>{try{console.log("[Auth] Initializing - restoring session from localStorage...");const p=localStorage.getItem("currentUserId");if(!p){console.log("[Auth] No saved session - user is logged out"),f&&(r(null),Ne.currentUser=null,Yu(),a(!1));return}console.log("[Auth] Found stored user ID, fetching full profile...");let g=0;const y=5,v=async()=>{try{const _=await Uw(p);if(_)return console.log("[Auth] Fetched user profile:",_.name),_}catch(_){if(console.warn("[Auth] Fetch attempt failed:",_),g<y)return g++,await new Promise(S=>setTimeout(S,s)),v()}return null},j=await v();f&&(j?(r(j),Ne.currentUser=j,Yu(),console.log("[Auth] Session restored:",j.name)):(console.warn("[Auth] Could not restore profile, clearing session"),r(null),Ne.currentUser=null,localStorage.removeItem("currentUserId"),Yu()),a(!1))}catch(p){console.error("[Auth] Init error:",p),f&&(r(null),Ne.currentUser=null,a(!1))}})(),()=>{f=!1}},[]);const l=async(f,h)=>{const p=f.includes("@")?f.split("@")[0]:f;console.log("[Auth] signIn called with phone:",p);try{const{user:g,error:y}=await Dq(p,h);return y||!g?(console.error("[Auth] signIn failed:",y),{error:{message:y||"Login failed"}}):(console.log("[Auth] signIn successful for:",g.phone),r(g),Ne.currentUser=g,Yu(),localStorage.setItem("currentUserId",g.id),localStorage.setItem("isLoggedIn","true"),a(!1),window.dispatchEvent(new Event("authChange")),console.log("[Auth] User logged in:",g.name),{data:{user:g},error:null})}catch(g){return console.error("[Auth] signIn exception:",(g==null?void 0:g.message)||g),{error:{message:(g==null?void 0:g.message)||"Login failed"}}}},d=async()=>{console.log("[Auth] signOut called"),r(null),Ne.currentUser=null,Yu(),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("currentUserId"),localStorage.removeItem("userProfile"),localStorage.removeItem("userData"),localStorage.removeItem("currentUser"),window.dispatchEvent(new Event("authChange")),console.log("[Auth] signOut completed")};return console.log("[AuthProvider] Rendering with state:",{userName:t==null?void 0:t.name,isLoading:n}),c.jsx(yD.Provider,{value:{user:t,isLoading:n,signIn:l,signOut:d},children:e})};function ja(){const e=x.useContext(yD);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const vD=x.createContext(void 0),w8=({children:e})=>{const[t,r]=x.useState([]),n=x.useCallback((l,d,f=3500)=>{const h=`toast-${Date.now()}-${Math.random()}`,p={id:h,message:l,type:d,duration:f};return r(g=>[...g,p]),f>0&&setTimeout(()=>{a(h)},f),h},[]),a=x.useCallback(l=>{r(d=>d.filter(f=>f.id!==l))},[]),s=x.useCallback((l,d,f,h=3500)=>{r(p=>{const g=p.map(y=>y.id===l?{...y,message:d,type:f,duration:h}:y);return h>0&&setTimeout(()=>{a(l)},h),g})},[a]);return c.jsx(vD.Provider,{value:{toasts:t,showToast:n,dismissToast:a,updateToast:s},children:e})},bD=()=>{const e=x.useContext(vD);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},Kr=()=>{const{showToast:e,updateToast:t}=bD();return{success:r=>e(r,"success",3500),error:r=>e(r,"error",4500),warning:r=>e(r,"warning",3500),info:r=>e(r,"info",3500),loading:r=>e(r,"info",0),update:(r,n,a="success")=>t(r,n,a,3500)}},xD=x.createContext(void 0),j8=({children:e})=>{const[t,r]=x.useState(""),n=()=>r("");return c.jsx(xD.Provider,{value:{searchQuery:t,setSearchQuery:r,clearSearch:n},children:e})},Qa=()=>{const e=x.useContext(xD);if(!e)throw new Error("useSearch must be used within a SearchProvider");return e},S8=x.createContext(void 0),_8=({children:e})=>{const t=ze(),[r,n]=yt.useState(!1);return x.useEffect(()=>{console.log("[Realtime] Initializing subscriptions for orders, bills, transactions...");const a=xe.channel("public:orders",{config:{broadcast:{self:!0},presence:{key:""}}}).on("postgres_changes",{event:"*",schema:"public",table:"orders"},f=>{var h,p;if(console.log("[Realtime] Orders change detected:",f.eventType,(h=f.new)==null?void 0:h.id),f.eventType==="INSERT"){const g=t.getQueryData(["orders"])||[];g.find(y=>y.id===f.new.id)||t.setQueryData(["orders"],[f.new,...g])}else f.eventType==="UPDATE"?t.setQueryData(["orders"],(g=[])=>g.map(y=>y.id===f.new.id?f.new:y)):f.eventType==="DELETE"&&t.setQueryData(["orders"],(g=[])=>g.filter(y=>y.id!==f.new.id));t.invalidateQueries({queryKey:["ordersByCustomerId"]}),(p=f.new)!=null&&p.id&&t.invalidateQueries({queryKey:["order",f.new.id]})}).subscribe((f,h)=>{f==="SUBSCRIBED"?(console.log("[Realtime] Orders channel subscribed"),n(!0)):f==="CHANNEL_ERROR"&&h&&(console.error("[Realtime] Orders channel error:",h),n(!1))}),s=xe.channel("public:bills",{config:{broadcast:{self:!0},presence:{key:""}}}).on("postgres_changes",{event:"*",schema:"public",table:"bills"},f=>{var h,p;if(console.log("[Realtime] Bills change detected:",f.eventType,(h=f.new)==null?void 0:h.id),f.eventType==="INSERT"){const g=t.getQueryData(["bills"])||[];g.find(y=>y.id===f.new.id)||t.setQueryData(["bills"],[f.new,...g])}else f.eventType==="UPDATE"?t.setQueryData(["bills"],(g=[])=>g.map(y=>y.id===f.new.id?f.new:y)):f.eventType==="DELETE"&&t.setQueryData(["bills"],(g=[])=>g.filter(y=>y.id!==f.new.id));(p=f.new)!=null&&p.id&&t.invalidateQueries({queryKey:["bill",f.new.id]})}).subscribe((f,h)=>{f==="SUBSCRIBED"?console.log("[Realtime] Bills channel subscribed"):f==="CHANNEL_ERROR"&&h&&console.error("[Realtime] Bills channel error:",h)}),l=xe.channel("public:transactions",{config:{broadcast:{self:!0},presence:{key:""}}}).on("postgres_changes",{event:"*",schema:"public",table:"transactions"},f=>{var h,p;if(console.log("[Realtime] Transactions change detected:",f.eventType,(h=f.new)==null?void 0:h.id),f.eventType==="INSERT"){const g=t.getQueryData(["transactions"])||[];if(!g.find(y=>y.id===f.new.id)){const y=[f.new,...g].sort((v,j)=>{const _=new Date(v.date||v.createdAt||0).getTime();return new Date(j.date||j.createdAt||0).getTime()-_});t.setQueryData(["transactions"],y)}}else f.eventType==="UPDATE"?t.setQueryData(["transactions"],(g=[])=>g.map(y=>y.id===f.new.id?f.new:y)):f.eventType==="DELETE"&&t.setQueryData(["transactions"],(g=[])=>g.filter(y=>y.id!==f.new.id));(p=f.new)!=null&&p.id&&t.invalidateQueries({queryKey:["transaction",f.new.id]})}).subscribe((f,h)=>{f==="SUBSCRIBED"?console.log("[Realtime] Transactions channel subscribed"):f==="CHANNEL_ERROR"&&h&&console.error("[Realtime] Transactions channel error:",h)}),d=xe.channel("public:accounts",{config:{broadcast:{self:!0},presence:{key:""}}}).on("postgres_changes",{event:"*",schema:"public",table:"accounts"},f=>{var h,p;if(console.log("[Realtime] Accounts change detected:",f.eventType,(h=f.new)==null?void 0:h.id),f.eventType==="INSERT"){const g=t.getQueryData(["accounts"])||[];g.find(y=>y.id===f.new.id)||t.setQueryData(["accounts"],[f.new,...g])}else f.eventType==="UPDATE"?t.setQueryData(["accounts"],(g=[])=>g.map(y=>y.id===f.new.id?f.new:y)):f.eventType==="DELETE"&&t.setQueryData(["accounts"],(g=[])=>g.filter(y=>y.id!==f.new.id));(p=f.new)!=null&&p.id&&t.invalidateQueries({queryKey:["account",f.new.id]})}).subscribe((f,h)=>{f==="SUBSCRIBED"?console.log("[Realtime] Accounts channel subscribed"):f==="CHANNEL_ERROR"&&h&&console.error("[Realtime] Accounts channel error:",h)});return()=>{console.log("[Realtime] Cleaning up all subscriptions"),xe.removeChannel(a),xe.removeChannel(s),xe.removeChannel(l),xe.removeChannel(d),n(!1)}},[t]),c.jsx(S8.Provider,{value:{isConnected:r},children:e})},wD=x.createContext(void 0),N8=({children:e})=>{const t=ze(),[r,n]=x.useState(navigator.onLine),[a,s]=x.useState(!1);return x.useEffect(()=>{console.log("[Network] Provider initialized - initial online status:",navigator.onLine);const l=()=>{console.log("[Network] Connection restored - refetching all queries"),n(!0),s(!0),t.refetchQueries()},d=()=>{console.log("[Network] Connection lost - offline mode activated"),n(!1)};return window.addEventListener("online",l),window.addEventListener("offline",d),()=>{window.removeEventListener("online",l),window.removeEventListener("offline",d)}},[t]),c.jsx(wD.Provider,{value:{isOnline:r,wasOffline:a},children:e})};function E8(){const e=x.useContext(wD);if(!e)throw new Error("useNetwork must be used within NetworkProvider");return e}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=e=>{const t=A8(e);return t.charAt(0).toUpperCase()+t.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var C8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8=x.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:l,...d},f)=>x.createElement("svg",{ref:f,...C8,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:jD("lucide",a),...!s&&!P8(d)&&{"aria-hidden":"true"},...d},[...l.map(([h,p])=>x.createElement(h,p)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=(e,t)=>{const r=x.forwardRef(({className:n,...a},s)=>x.createElement(k8,{ref:s,iconNode:t,className:jD(`lucide-${O8(WO(e))}`,`lucide-${e}`,n),...a}));return r.displayName=WO(e),r};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],D8=Bt("arrow-right-left",T8);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],XO=Bt("briefcase",M8);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],I8=Bt("chart-column",R8);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],B8=Bt("check",L8);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],U8=Bt("chevron-right",$8);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],q8=Bt("circle-alert",z8);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],K8=Bt("circle-plus",F8);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],H8=Bt("copy",Q8);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],G8=Bt("credit-card",V8);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],W8=Bt("download",Y8);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X8=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Z8=Bt("ellipsis-vertical",X8);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],e9=Bt("info",J8);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],r9=Bt("layout-dashboard",t9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],a9=Bt("log-out",n9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=[["path",{d:"M5 12h14",key:"1ays0h"}]],s9=Bt("minus",i9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],l9=Bt("package",o9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],u9=Bt("plus",c9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],f9=Bt("printer",d9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],m9=Bt("search",h9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],g9=Bt("settings",p9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],v9=Bt("shopping-cart",y9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],x9=Bt("square-pen",b9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w9=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],j9=Bt("trash-2",w9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S9=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],_9=Bt("truck",S9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ZO=Bt("users",N9),se={Dashboard:c.jsx(r9,{size:20}),Sales:c.jsx(v9,{size:20}),Products:c.jsx(l9,{size:20}),Customers:c.jsx(ZO,{size:20}),Vendors:c.jsx(XO,{size:20}),Users:c.jsx(ZO,{size:20}),Briefcase:c.jsx(XO,{size:20}),Banking:c.jsx(G8,{size:20}),Reports:c.jsx(I8,{size:20}),Settings:c.jsx(g9,{size:20}),Courier:c.jsx(_9,{size:20}),Plus:c.jsx(u9,{size:20}),Minus:c.jsx(s9,{size:20}),PlusCircle:c.jsx(K8,{size:20}),LogOut:c.jsx(a9,{size:20}),ChevronRight:c.jsx(U8,{size:20}),Search:c.jsx(m9,{size:18}),More:c.jsx(Z8,{size:18}),Print:c.jsx(f9,{size:18}),Download:c.jsx(W8,{size:18}),Duplicate:c.jsx(H8,{size:18}),Edit:c.jsx(x9,{size:18}),Delete:c.jsx(j9,{size:18}),Transfer:c.jsx(D8,{size:18}),Check:c.jsx(B8,{size:20}),AlertCircle:c.jsx(q8,{size:20}),Info:c.jsx(e9,{size:20})},Se=e=>new Intl.NumberFormat("en-BD",{style:"currency",currency:"BDT",minimumFractionDigits:0,maximumFractionDigits:0}).format(e).replace("BDT",""),Lp=e=>({ON_HOLD:"bg-gray-100 text-gray-600",PROCESSING:"bg-blue-100 text-blue-600",PICKED:"bg-purple-100 text-purple-600",COMPLETED:"bg-green-100 text-green-600",CANCELLED:"bg-red-100 text-red-600",RECEIVED:"bg-green-100 text-green-600","On Hold":"bg-gray-100 text-gray-600",Processing:"bg-blue-100 text-blue-600",Picked:"bg-purple-100 text-purple-600",Completed:"bg-green-100 text-green-600",Cancelled:"bg-red-100 text-red-600",Received:"bg-green-100 text-green-600"})[e]||"bg-gray-100 text-gray-600";var qe=(e=>(e.ADMIN="Admin",e.EMPLOYEE="Employee",e))(qe||{}),Ie=(e=>(e.ON_HOLD="On Hold",e.PROCESSING="Processing",e.PICKED="Picked",e.COMPLETED="Completed",e.CANCELLED="Cancelled",e))(Ie||{}),pn=(e=>(e.ON_HOLD="On Hold",e.PROCESSING="Processing",e.RECEIVED="Received",e.PAID="Paid",e))(pn||{});const le={colors:{primary:{50:"bg-[#ebf4ff]",500:"bg-[#3c5a82]",600:"bg-[#0f2f57]",700:"bg-[#0c203b]",text:"text-[#0f2f57]"},secondary:{600:"bg-blue-600",700:"bg-blue-700"},danger:{50:"bg-red-50",600:"bg-red-600",700:"bg-red-700",text:"text-red-600"},bg:{primary:"bg-white",secondary:"bg-gray-50",tertiary:"bg-gray-100"},text:{primary:"text-gray-900",secondary:"text-gray-500",tertiary:"text-gray-400"},border:{primary:"border-gray-100"}},radius:{sm:"rounded-lg",md:"rounded-xl"},transitions:{normal:"transition-all duration-300"},buttons:{base:"inline-flex items-center justify-center gap-2 font-bold rounded-xl transition-all duration-300 cursor-pointer",secondary:"bg-gray-100 text-gray-600 hover:bg-gray-200",outline:"border-2 border-gray-200 text-gray-700 hover:bg-gray-50",sizes:{sm:"px-3 py-2 text-xs",md:"px-4 py-2.5 text-sm",lg:"px-6 py-3.5 text-sm"}},inputs:{base:"w-full px-4 py-2.5 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-[#3c5a82] focus:border-transparent transition-all",label:"block text-sm font-semibold text-gray-700 mb-2",error:"border-red-500 focus:ring-red-500"},table:{header:"bg-gray-50 border-b border-gray-100"},card:{base:"bg-white rounded-2xl shadow-sm border border-gray-100 transition-all",elevated:"bg-white rounded-2xl shadow-md border border-gray-100"}},ms=({to:e,icon:t,label:r,active:n,onClick:a,children:s})=>{const[l,d]=x.useState(n);return s?c.jsxs("div",{className:"space-y-1",children:[c.jsxs("button",{onClick:()=>d(!l),className:`flex items-center justify-between w-full px-4 py-3 ${le.radius.md} ${le.transitions.normal} ${n?`${le.colors.primary[50]} ${le.colors.primary.text}`:`text-gray-500 hover:${le.colors.primary[50]} hover:${le.colors.primary.text}`}`,children:[c.jsxs("div",{className:"flex items-center gap-3",children:[t,c.jsx("span",{className:"font-semibold text-sm",children:r})]}),c.jsx("div",{className:`transition-transform duration-200 ${l?"rotate-90":""}`,children:se.ChevronRight})]}),l&&c.jsx("div",{className:"pl-11 space-y-1",children:s.map(f=>c.jsx(Oc,{to:f.to,onClick:a,className:`block px-4 py-2 text-sm font-medium ${le.radius.sm} ${le.transitions.normal} ${f.active?`${le.colors.primary[600]} text-white`:`text-gray-400 hover:${le.colors.primary.text} hover:${le.colors.primary[50]}/30`}`,children:f.label},f.to))})]}):c.jsxs(Oc,{to:e||"#",onClick:a,className:`flex items-center gap-3 px-4 py-3 ${le.radius.md} ${le.transitions.normal} ${n?`${le.colors.primary[600]} text-white shadow-lg shadow-emerald-200/50`:`text-gray-500 hover:${le.colors.primary[50]} hover:${le.colors.primary.text}`}`,children:[t,c.jsx("span",{className:"font-semibold text-sm",children:r})]})},ot=({children:e})=>{const t=Ln(),r=_t(),{signOut:n,profile:a}=ja(),{searchQuery:s,setSearchQuery:l}=Qa(),[d,f]=x.useState(!1),[h,p]=x.useState(!1),[g,y]=x.useState(!1),[v,j]=x.useState({name:Ne.settings.company.name,logo:Ne.settings.company.logo}),_=a||Ne.currentUser;if(x.useEffect(()=>{(async()=>{try{const O=await Wd();j(O)}catch(O){console.error("Failed to load company settings:",O)}})()},[]),yt.useEffect(()=>{const E=document.querySelector("main");E&&(E.scrollTop=0);try{window.scrollTo(0,0)}catch{}},[t.pathname]),!_)return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"inline-block p-4",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),c.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading user data..."})]})});const S=async()=>{try{await n(),r("/login",{replace:!0})}catch(E){console.error("Logout failed:",E)}},N=E=>t.pathname===E||t.pathname.startsWith(E+"/");return c.jsxs("div",{className:`${le.colors.bg.secondary} flex overflow-hidden`,style:{minHeight:"100vh"},children:[d&&c.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm z-40 lg:hidden",onClick:()=>f(!1)}),c.jsx("aside",{className:`fixed inset-y-0 left-0 z-50 w-72 ${le.colors.bg.primary} border-r ${le.colors.border.primary} ${le.transitions.normal} transform lg:sticky lg:top-0 lg:h-screen lg:translate-x-0 ${d?"translate-x-0":"-translate-x-full"}`,children:c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsx("div",{className:"p-8",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`p-1 ${le.colors.primary[50]} rounded-[50%]`,children:v.logo&&c.jsx("img",{src:v.logo,alt:"Logo",className:"w-10 h-10 rounded-lg object-cover"})}),c.jsxs("div",{children:[c.jsx("h1",{className:`text-xl font-black ${le.colors.text.primary} tracking-tight leading-none`,children:v.name}),c.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Management"})]})]})}),c.jsxs("nav",{className:"flex-1 px-4 space-y-1 overflow-y-auto",children:[c.jsx(ms,{to:"/dashboard",icon:se.Dashboard,label:"Dashboard",active:N("/dashboard"),onClick:()=>f(!1)}),c.jsx(ms,{to:"/products",icon:se.Products,label:"Products",active:N("/products"),onClick:()=>f(!1)}),c.jsx(ms,{icon:se.Sales,label:"Sales",active:N("/orders")||N("/customers"),children:[{to:"/orders",label:"Orders",active:N("/orders")},{to:"/customers",label:"Customers",active:N("/customers")}],onClick:()=>f(!1)}),_.role===qe.ADMIN&&c.jsxs(c.Fragment,{children:[c.jsx(ms,{icon:se.Briefcase,label:"Purchases",active:N("/bills")||N("/vendors"),children:[{to:"/bills",label:"Bills",active:N("/bills")},{to:"/vendors",label:"Vendors",active:N("/vendors")}],onClick:()=>f(!1)}),c.jsx(ms,{icon:se.Banking,label:"Banking",active:N("/banking"),children:[{to:"/banking/accounts",label:"Accounts",active:N("/banking/accounts")},{to:"/banking/transactions",label:"Transactions",active:N("/banking/transactions")},{to:"/banking/transfer",label:"Transfer",active:N("/banking/transfer")}],onClick:()=>f(!1)})]}),_.role===qe.ADMIN&&c.jsxs(c.Fragment,{children:[c.jsx(ms,{to:"/reports",icon:se.Reports,label:"Reports",active:N("/reports"),onClick:()=>f(!1)}),c.jsx(ms,{to:"/users",icon:se.Users,label:"Users",active:N("/users"),onClick:()=>f(!1)}),c.jsx(ms,{to:"/settings",icon:se.Settings,label:"Settings",active:N("/settings"),onClick:()=>f(!1)})]})]})]})}),c.jsxs("div",{className:"flex-1 flex flex-col min-w-0 h-screen overflow-hidden",children:[c.jsxs("header",{className:`flex-shrink-0 sticky top-0 z-40 ${le.colors.bg.primary}/80 backdrop-blur-lg border-b ${le.colors.border.primary} px-6 h-20 flex items-center justify-between`,children:[c.jsx("button",{onClick:()=>f(!0),className:`lg:hidden p-2.5 hover:${le.colors.bg.tertiary} ${le.radius.md} ${le.colors.text.secondary} border ${le.colors.border.primary}`,children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16m-7 6h7"})})}),c.jsxs("div",{className:"flex-1 max-w-xl mx-4 relative group hidden sm:block",children:[c.jsx("div",{className:`absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-300 group-focus-within:${le.colors.primary.text} ${le.transitions.normal}`,children:se.Search}),c.jsx("input",{type:"text",placeholder:"Search orders, invoices, or customers...",value:s,onChange:E=>l(E.target.value),className:`block w-full pl-11 pr-4 py-2.5 ${le.colors.bg.secondary} border-transparent focus:${le.colors.bg.primary} focus:ring-2 focus:ring-[#3c5a82] focus:border-transparent ${le.radius.md} text-sm ${le.transitions.normal}`})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>p(!h),className:`${le.colors.primary[600]} text-white w-10 h-10 flex items-center justify-center ${le.radius.md} hover:${le.colors.primary[700]} ${le.transitions.normal} shadow-lg shadow-[#0f2f57]/20 active:scale-95`,children:se.Plus}),h&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>p(!1)}),c.jsxs("div",{className:`absolute right-0 mt-3 w-56 ${le.colors.bg.primary} border ${le.colors.border.primary} rounded-2xl shadow-2xl z-50 py-2 animate-in fade-in zoom-in slide-in-from-top-2 duration-200 origin-top-right`,children:[c.jsx("div",{className:`px-4 py-2 text-[10px] font-bold ${le.colors.text.tertiary} uppercase tracking-widest border-b ${le.colors.border.primary} mb-1`,children:"Quick Actions"}),_.role===qe.EMPLOYEE?[{label:"New Order",to:"/orders/new",icon:se.Sales},{label:"New Customer",to:"/customers/new",icon:se.Customers}].map(E=>c.jsxs(Oc,{to:E.to,onClick:()=>p(!1),className:`flex items-center gap-3 px-4 py-3 text-sm font-bold ${le.colors.text.primary} hover:${le.colors.primary[50]} hover:${le.colors.primary.text} ${le.transitions.normal}`,children:[c.jsx("span",{className:"opacity-70",children:E.icon}),E.label]},E.label)):[{label:"New Order",to:"/orders/new",icon:se.Sales},{label:"New Bill",to:"/bills/new",icon:se.Briefcase},{label:"New Customer",to:"/customers/new",icon:se.Customers},{label:"New Vendor",to:"/vendors/new",icon:se.Vendors},{label:"Add Income",to:"/transactions/new/income",icon:se.PlusCircle},{label:"Add Expense",to:"/transactions/new/expense",icon:se.Delete}].map(E=>c.jsxs(Oc,{to:E.to,onClick:()=>p(!1),className:`flex items-center gap-3 px-4 py-3 text-sm font-bold ${le.colors.text.primary} hover:${le.colors.primary[50]} hover:${le.colors.primary.text} ${le.transitions.normal}`,children:[c.jsx("span",{className:"opacity-70",children:E.icon}),E.label]},E.label))]})]})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>y(!g),className:`flex items-center gap-3 pl-4 border-l ${le.colors.border.primary} hover:opacity-70 ${le.transitions.normal}`,children:[c.jsxs("div",{className:"text-right hidden md:block",children:[c.jsx("p",{className:`text-sm font-black ${le.colors.text.primary} leading-none`,children:_.name}),c.jsx("p",{className:`text-[10px] font-bold ${le.colors.primary.text} uppercase tracking-widest mt-1`,children:_.role})]}),c.jsx("img",{src:_.image||`https://ui-avatars.com/api/?name=${_.name}&background=0f2f57&color=fff`,alt:"Profile",className:"w-10 h-10 rounded-[50%] object-cover cursor-pointer"})]}),g&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>y(!1)}),c.jsxs("div",{className:`absolute right-0 mt-3 w-48 ${le.colors.bg.primary} border ${le.colors.border.primary} rounded-xl shadow-2xl z-50 py-2 animate-in fade-in zoom-in slide-in-from-top-2 duration-200 origin-top-right`,children:[c.jsxs("button",{onClick:()=>{r(`/users/${_.id}`),y(!1)},className:`flex items-center gap-3 w-full px-4 py-3 text-sm font-bold ${le.colors.primary.text} hover:${le.colors.primary[50]} ${le.transitions.normal}`,children:[se.Users,"Profile"]}),c.jsxs("button",{onClick:()=>{S(),y(!1)},className:`flex items-center gap-3 w-full px-4 py-3 text-sm font-bold ${le.colors.danger.text} hover:${le.colors.danger[50]} ${le.transitions.normal}`,children:[se.LogOut,"Logout"]})]})]})]})]})]}),c.jsxs("main",{className:"flex-1 overflow-y-auto p-6 lg:p-10 animate-in fade-in duration-500 relative",children:[e,c.jsxs("footer",{className:`mt-20 py-8 border-t ${le.colors.border.primary} flex flex-col items-center gap-2`,children:[c.jsxs("p",{className:`text-sm font-medium ${le.colors.text.secondary}`,children:[" ",new Date().getFullYear()," ",v.name,". All rights reserved."]}),c.jsxs("a",{href:"https://sajedurrahmanfiad.me",target:"_blank",rel:"noreferrer",className:`group flex items-center gap-1.5 text-[11px] font-bold ${le.colors.text.secondary} hover:${le.colors.primary.text} ${le.transitions.normal} uppercase tracking-widest`,children:["Developed by ",c.jsx("span",{className:`${le.colors.text.secondary} group-hover:${le.colors.primary.text} underline underline-offset-4 decoration-[#0f2f57]/20`,children:"Md Sajedur Rahman Fiad"})]})]})]})]})]})},E9=()=>{const{toasts:e,dismissToast:t}=bD(),r=n=>{switch(n){case"success":return{icon:se.Check,bg:"bg-green-50",border:"border-green-200",text:"text-green-800",icon_color:"text-green-600"};case"error":return{icon:se.AlertCircle,bg:"bg-red-50",border:"border-red-200",text:"text-red-800",icon_color:"text-red-600"};case"warning":return{icon:se.AlertCircle,bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",icon_color:"text-yellow-600"};case"info":return{icon:se.Info,bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",icon_color:"text-blue-600"};default:return{icon:se.Info,bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-800",icon_color:"text-gray-600"}}};return c.jsx("div",{className:"fixed bottom-6 right-6 z-[9999] flex flex-col gap-3",children:e.map(n=>{const{icon:a,bg:s,border:l,text:d,icon_color:f}=r(n.type);return c.jsxs("div",{className:`${s} ${l} border rounded-lg p-4 shadow-md flex items-start gap-3 min-w-[320px] max-w-md animate-in slide-in-from-right-5 fade-in duration-300`,children:[c.jsx("div",{className:`${f} flex-shrink-0 mt-0.5`,children:a}),c.jsx("div",{className:`${d} flex-1 text-sm font-medium`,children:n.message}),c.jsx("button",{onClick:()=>t(n.id),className:`${f} flex-shrink-0 hover:opacity-70 transition-opacity`,children:c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},n.id)})})},O9=()=>{const{isOnline:e}=E8(),[t,r]=x.useState(!1);return x.useEffect(()=>{if(!e)r(!0);else{const n=setTimeout(()=>{r(!1)},2e3);return()=>clearTimeout(n)}},[e]),t?c.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-red-50 border-b-2 shadow-lg transition-all duration-300",style:{borderColor:e?"#10b981":"#ef4444",backgroundColor:e?"#ecfdf5":"#fee2e2"},children:c.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-4 px-4 py-3",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[c.jsx("div",{className:`text-xl ${e?"text-green-600":"text-red-600"}`,children:e?"":""}),c.jsxs("div",{children:[c.jsx("p",{className:`font-bold ${e?"text-green-900":"text-red-900"}`,children:e?"Connection Restored":"No Internet Connection"}),c.jsx("p",{className:`text-sm ${e?"text-green-700":"text-red-700"}`,children:e?"Data is syncing with the server":"Your changes will be saved when connection is restored"})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[!e&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-pulse w-2 h-2 rounded-full bg-red-500"}),c.jsx("span",{className:"text-xs font-medium text-red-600",children:"Waiting for connection..."})]}),e&&c.jsx("span",{className:"text-xs font-medium text-green-600",children:"Syncing..."})]})]})}):null},A9=()=>{const e=_t(),{signIn:t,isLoading:r,user:n,profile:a}=ja(),[s,l]=x.useState(""),[d,f]=x.useState(""),[h,p]=x.useState(!1),[g,y]=x.useState(""),[v,j]=x.useState(!1),[_,S]=x.useState({name:"BD Hatbela",logo:Ne.settings.company.logo});x.useEffect(()=>{console.log("[Login] Checking redirect - isLoading:",r,"authenticated:",!!n),!r&&n&&(console.log("[Login] User authenticated, navigating to dashboard"),e("/dashboard",{replace:!0}))},[n,r,e]),x.useEffect(()=>{(async()=>{try{const O=await Wd();S({name:"BD Hatbela",logo:O.logo||Ne.settings.company.logo})}catch(O){console.error("Failed to load company settings:",O),S({name:"BD Hatbela",logo:Ne.settings.company.logo})}})()},[]);const N=async E=>{var O,C;E.preventDefault(),y(""),j(!0),console.log("[Login] Form submitted with phone:",s);try{console.log("[Login] Calling signIn...");const{error:D,data:T}=await t(s,d);if(D){console.error("[Login] Sign-in error:",D);const M=(D==null?void 0:D.message)||"Authentication failed";y(M),j(!1);return}if(console.log("[Login] Sign-in successful, user:",(O=T==null?void 0:T.user)==null?void 0:O.email),!(T!=null&&T.profileLoaded)){console.error("[Login] Sign-in succeeded but profile not loaded"),y(((C=T==null?void 0:T.error)==null?void 0:C.message)||"Failed to load user profile. Please try again or contact administrator."),j(!1);return}console.log("[Login] Profile loaded, waiting for state to propagate...")}catch(D){console.error("[Login] Sign-in exception:",D),y((D==null?void 0:D.message)||"Failed to sign in"),j(!1)}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:c.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow p-8",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[_.logo&&c.jsx("img",{src:_.logo,alt:"Logo",className:"w-12 h-12 rounded-md object-cover"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-bold",children:_.name}),c.jsx("p",{className:"text-sm text-gray-500",children:"Sign in to continue"})]})]}),c.jsxs("form",{onSubmit:N,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),c.jsx("input",{value:s,onChange:E=>l(E.target.value),type:"tel",placeholder:"017XXXXXXXX",required:!0,disabled:v,className:"mt-1 block w-full border rounded px-3 py-2 focus:outline-none focus:ring disabled:opacity-50"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{value:d,onChange:E=>f(E.target.value),type:h?"text":"password",required:!0,disabled:v,className:"mt-1 block w-full border rounded px-3 py-2 pr-10 focus:outline-none focus:ring disabled:opacity-50"}),c.jsx("button",{type:"button",onClick:()=>p(!h),disabled:v,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 disabled:opacity-50",children:h?c.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:[c.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),c.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-14-14zM10 4C6.687 4 3.89 5.945 2.58 8.808c-.35.915-.35 2.468 0 3.384.74 1.94 2.08 3.61 3.756 4.7l1.83-1.83A3.992 3.992 0 016 10a4 4 0 016.956-3.533l1.416-1.416C14.225 4.523 12.15 4 10 4zm7.42 3.192c.35.915.35 2.468 0 3.384C15.26 13.055 12.463 15 9 15a6.966 6.966 0 01-3.15-.744l2.119-2.119A3.992 3.992 0 0114 10c0-.901-.281-1.735-.743-2.434l2.163-2.174z",clipRule:"evenodd"})})})]})]}),g&&c.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-sm text-red-600 space-y-2",children:[c.jsx("p",{className:"font-semibold",children:"Error"}),c.jsx("p",{children:g instanceof Error?g.message:String(g)}),(g instanceof Error?g.message:String(g)).includes("Email confirmation")&&c.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded text-yellow-700 text-xs",children:[c.jsx("p",{className:"font-semibold mb-1",children:"Quick Fix:"}),c.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[c.jsx("li",{children:"Go to Supabase Dashboard"}),c.jsx("li",{children:"Project  Authentication  Providers"}),c.jsx("li",{children:'Click "Email" tab'}),c.jsx("li",{children:'Toggle OFF "Confirm email"'}),c.jsx("li",{children:"Save settings"}),c.jsx("li",{children:"Try logging in again"})]})]})]}),c.jsx("div",{children:c.jsx("button",{type:"submit",disabled:v,className:"w-full bg-blue-600 text-white py-2 rounded disabled:opacity-50 disabled:cursor-not-allowed font-medium hover:bg-blue-700 transition-colors",children:v?"Signing in...":"Sign In"})})]})]})})},C9={primary:{bg:"bg-gray-50",text:"text-black",icon:"text-black"},secondary:{bg:"bg-gray-50",text:"text-black",icon:"text-black"},danger:{bg:"bg-gray-50",text:"text-black",icon:"text-black"},warning:{bg:"bg-gray-50",text:"text-black",icon:"text-black"},success:{bg:"bg-gray-50",text:"text-black",icon:"text-black"},info:{bg:"bg-gray-50",text:"text-black",icon:"text-black"},neutral:{bg:"bg-gray-50",text:"text-black",icon:"text-black"},profit:{bg:"bg-gray-50",text:"text-black",icon:"text-black"}},ua=({title:e,value:t,icon:r,variant:n="primary",bgColor:a,textColor:s,iconBgColor:l,isProfitCard:d=!1,profitValue:f})=>{const h=C9[n];let p=a||"bg-white",g=s||h.text,y=l||h.bg,v="";return d&&f!==void 0&&!a&&(f>=0?(p="bg-emerald-500",g="text-white",y="bg-emerald-600"):(p="bg-red-500",g="text-white",y="bg-red-600")),c.jsxs("div",{className:`p-6 flex items-center gap-4 ${p} rounded-xl shadow-lg border border-gray-100 ${v}`,children:[c.jsx("div",{className:`${y} p-4 rounded-lg flex items-center justify-center`,children:c.jsx("div",{className:g,children:r})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:`text-xs font-bold uppercase tracking-widest ${g==="text-white"?"text-white/70":"text-gray-400"}`,children:e}),c.jsx("h3",{className:`text-2xl font-black mt-1 ${g}`,children:t})]})]})},We=yt.forwardRef(({variant:e="primary",size:t="md",children:r,icon:n,loading:a=!1,className:s="",...l},d)=>{const f={primary:`${le.colors.primary[600]} text-white hover:${le.colors.primary[700]} shadow-lg shadow-[#0f2f57]/20`,secondary:le.buttons.secondary,danger:`${le.colors.danger[600]} text-white hover:${le.colors.danger[700]} shadow-lg`,outline:le.buttons.outline,ghost:"text-gray-600 hover:bg-gray-50"},h={sm:le.buttons.sizes.sm,md:le.buttons.sizes.md,lg:le.buttons.sizes.lg};return c.jsx("button",{ref:d,className:`${le.buttons.base} ${f[e]} ${h[t]} ${a?"opacity-75 cursor-wait":""} ${s}`,disabled:a||l.disabled,...l,children:c.jsxs("span",{className:"flex items-center gap-2",children:[a&&c.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n&&!a&&c.jsx("span",{children:n}),r]})})});We.displayName="Button";const P9={primary:`p-2.5 text-gray-400 hover:${le.colors.primary[600]} hover:bg-[#ebf4ff] rounded-lg transition-all`,danger:"p-2.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",secondary:`p-2.5 text-gray-400 hover:${le.colors.secondary[600]} hover:bg-[#e6f0ff] rounded-lg transition-all`,neutral:"p-2.5 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-all"},Ms=yt.forwardRef(({variant:e="primary",icon:t,title:r,className:n="",...a},s)=>c.jsx("button",{ref:s,className:`${P9[e]} ${n}`,title:r,...a,children:t}));Ms.displayName="IconButton";const Bp=({columns:e,rows:t=5})=>c.jsx(c.Fragment,{children:Array.from({length:t}).map((r,n)=>c.jsx("tr",{className:"border-b border-gray-50 animate-pulse",children:Array.from({length:e}).map((a,s)=>c.jsx("td",{className:"px-6 py-5",children:c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),c.jsx("div",{className:"h-3 bg-gray-100 rounded w-1/2"})]})},s))},n))}),$p=({columns:e,data:t,emptyMessage:r="No data found",onRowClick:n,rowClassName:a,hover:s=!0,striped:l=!1,size:d="md",loading:f=!1,loadingRows:h=8})=>{const p={sm:"px-4 py-3",md:"px-6 py-5",lg:"px-6 py-6"}[d],g=s?"hover:bg-[#ebf4ff]/50 cursor-pointer transition-all":"",y=l?"odd:bg-gray-50":"";return c.jsx("div",{className:`${le.card.base} overflow-visible`,children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsx("tr",{className:le.table.header,children:e.map(v=>c.jsx("th",{className:`${p} text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] ${v.align==="center"?"text-center":v.align==="right"?"text-right":""}`,style:v.width?{width:v.width}:void 0,children:v.label},v.key))})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:f?c.jsx(Bp,{columns:e.length,rows:h}):t.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:e.length,className:"px-6 py-20 text-center text-gray-400 italic font-medium",children:r})}):t.map((v,j)=>c.jsx("tr",{onClick:()=>n==null?void 0:n(v,j),className:`
                    border-b border-gray-50 transition-all
                    ${g}
                    ${y}
                    ${(a==null?void 0:a(v,j))||""}
                  `,children:e.map(_=>c.jsx("td",{className:`${p} ${_.align==="center"?"text-center":_.align==="right"?"text-right":""}`,children:_.render?_.render(v[_.key],v,j):v[_.key]},_.key))},v.id||j))})]})})})},k9=yt.forwardRef(({label:e,error:t,helperText:r,className:n="",...a},s)=>c.jsxs("div",{className:"w-full",children:[e&&c.jsx("label",{className:le.inputs.label,children:e}),c.jsx("input",{ref:s,className:`${le.inputs.base} ${t?le.inputs.error:""} ${n}`,...a}),(t||r)&&c.jsx("p",{className:`mt-1 text-xs ${t?"text-red-500":"text-gray-500"}`,children:t||r})]}));k9.displayName="Input";const T9=yt.forwardRef(({label:e,error:t,options:r,className:n="",...a},s)=>c.jsxs("div",{className:"w-full",children:[e&&c.jsx("label",{className:le.inputs.label,children:e}),c.jsx("select",{ref:s,className:`${le.inputs.base} ${t?le.inputs.error:""} ${n}`,...a,children:r.map(l=>c.jsx("option",{value:l.value,children:l.label},l.value))}),t&&c.jsx("p",{className:"mt-1 text-xs text-red-500",children:t instanceof Error?t.message:String(t)})]}));T9.displayName="Select";const D9=yt.forwardRef(({label:e,error:t,className:r="",...n},a)=>c.jsxs("div",{className:"w-full",children:[e&&c.jsx("label",{className:le.inputs.label,children:e}),c.jsx("textarea",{ref:a,className:`${le.inputs.base} resize-none ${t?le.inputs.error:""} ${r}`,...n}),t&&c.jsx("p",{className:"mt-1 text-xs text-red-500",children:t instanceof Error?t.message:String(t)})]}));D9.displayName="TextArea";const Xd=({isLoading:e,message:t="Loading..."})=>e?c.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 flex items-center justify-center",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8 flex flex-col items-center gap-4",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),c.jsx("p",{className:"text-gray-600 font-medium",children:t})]})}):null,Uo=({filterRange:e,setFilterRange:t,customDates:r,setCustomDates:n,statusTab:a,setStatusTab:s,statusOptions:l=[],title:d})=>{const[f,h]=x.useState(!1),{searchQuery:p,setSearchQuery:g}=Qa(),y=["All Time","Today","This Week","This Month","This Year","Custom"];return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[c.jsxs("div",{className:"hidden sm:flex flex-wrap items-center gap-3",children:[c.jsxs("div",{className:"flex items-center gap-1.5 bg-white p-1.5 rounded-2xl border border-gray-100 shadow-sm",children:[y.map(v=>c.jsx("button",{onClick:()=>t(v),className:`px-4 py-2 rounded-xl text-xs font-bold transition-all ${e===v?`${le.colors.primary[600]} text-white shadow-md`:"text-gray-500 hover:bg-gray-50"}`,children:v},v)),e==="Custom"&&c.jsxs("div",{className:"flex items-center gap-2 px-3 border-l border-gray-100 ml-1",children:[c.jsx("input",{type:"date",value:r.from,onChange:v=>n({...r,from:v.target.value}),className:"px-2 py-1 border rounded-lg text-[10px] font-bold bg-gray-50 outline-none focus:ring-2 focus:ring-[#3c5a82]"}),c.jsx("span",{className:"text-gray-300 text-[10px] font-black tracking-widest uppercase",children:"To"}),c.jsx("input",{type:"date",value:r.to,onChange:v=>n({...r,to:v.target.value}),className:"px-2 py-1 border rounded-lg text-[10px] font-bold bg-gray-50 outline-none focus:ring-2 focus:ring-[#3c5a82]"})]})]}),s&&l.length>0&&c.jsx("div",{className:"flex items-center gap-1 bg-gray-100/50 p-1 rounded-2xl border border-gray-100",children:["All",...l].map(v=>c.jsx("button",{onClick:()=>s(v),className:`px-4 py-2 rounded-xl text-xs font-bold transition-all ${a===v?"bg-white text-gray-900 shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:v},v))})]}),c.jsxs("button",{onClick:()=>h(!0),className:"sm:hidden flex items-center justify-center gap-2 bg-white border border-gray-200 text-gray-600 px-4 py-3 rounded-2xl font-bold shadow-sm w-full",children:[se.Search,c.jsx("span",{className:"text-sm",children:"Filter & Period"}),e!=="All Time"&&c.jsx("div",{className:`w-2 h-2 rounded-full ${le.colors.primary[500]} ml-1`})]})]}),f&&c.jsxs("div",{className:"fixed inset-0 z-[150] flex items-end justify-center",children:[c.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>h(!1)}),c.jsxs("div",{className:"bg-white w-full rounded-t-2xl p-8 z-[160] animate-in slide-in-from-bottom duration-300 max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("h3",{className:"text-2xl font-black text-gray-900",children:["Filter ",d]}),c.jsx("button",{onClick:()=>h(!1),className:"p-2 text-gray-400",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l18 18"})})})]}),c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-4",children:"Search"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Search...",value:p,onChange:v=>g(v.target.value),className:"w-full px-4 py-3 pl-12 bg-gray-50 border border-gray-100 rounded-xl text-sm font-bold focus:ring-2 focus:ring-[#3c5a82] outline-none"}),c.jsx("span",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:se.Search})]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-4",children:"Time Period"}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:y.map(v=>c.jsx("button",{onClick:()=>t(v),className:`py-3 rounded-2xl text-xs font-bold transition-all border ${e===v?`${le.colors.primary[600]} text-white border-[#0f2f57] shadow-lg`:"bg-white text-gray-500 border-gray-100 hover:bg-gray-50"}`,children:v},v))}),e==="Custom"&&c.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 animate-in fade-in duration-200",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[9px] font-bold text-gray-400 uppercase ml-2",children:"From"}),c.jsx("input",{type:"date",value:r.from,onChange:v=>n({...r,from:v.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl text-sm font-bold focus:ring-2 focus:ring-[#3c5a82] outline-none"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[9px] font-bold text-gray-400 uppercase ml-2",children:"To"}),c.jsx("input",{type:"date",value:r.to,onChange:v=>n({...r,to:v.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl text-sm font-bold focus:ring-2 focus:ring-[#3c5a82] outline-none"})]})]})]}),s&&l.length>0&&c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-4",children:"Status Filter"}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:["All",...l].map(v=>c.jsx("button",{onClick:()=>s(v),className:`py-3 rounded-2xl text-xs font-bold transition-all border ${a===v?"bg-gray-900 text-white border-gray-900 shadow-lg":"bg-white text-gray-500 border-gray-100"}`,children:v},v))})]}),c.jsx("button",{onClick:()=>h(!1),className:`w-full py-5 ${le.colors.primary[600]} text-white rounded-xl font-black text-lg shadow-xl active:scale-95 transition-all mt-4`,children:"Apply Filters"})]})]})]})]})},Qw=({isOpen:e,onClose:t,onSubmit:r,accounts:n,paymentForm:a,setPaymentForm:s,isLoading:l,title:d="Record Payment",buttonText:f="Add Payment"})=>e?c.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4",children:[c.jsx("div",{className:"fixed inset-0 bg-gray-900/60 backdrop-blur-sm",onClick:t}),c.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] p-10 z-[210] animate-in zoom-in-95 duration-200 border border-[#ebf4ff]",children:[c.jsx("h3",{className:"text-2xl font-black text-gray-900 mb-8",children:d}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Payment Date"}),c.jsx("input",{type:"date",value:a.date,onChange:h=>s({...a,date:h.target.value}),disabled:l,className:"w-full px-6 py-3.5 bg-gray-50 border border-gray-100 rounded-lg font-bold focus:ring-2 focus:ring-emerald-500 outline-none disabled:opacity-50"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Payment Time"}),c.jsx("input",{type:"time",value:a.time,onChange:h=>s({...a,time:h.target.value}),disabled:l,className:"w-full px-6 py-3.5 bg-gray-50 border border-gray-100 rounded-lg font-bold focus:ring-2 focus:ring-emerald-500 outline-none disabled:opacity-50"})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Select Account"}),c.jsxs("select",{value:a.accountId,onChange:h=>s({...a,accountId:h.target.value}),disabled:l,className:"w-full px-6 py-3.5 bg-gray-50 border border-gray-100 rounded-lg font-bold focus:ring-2 focus:ring-emerald-500 outline-none disabled:opacity-50",children:[c.jsx("option",{value:"",children:"Select an account..."}),n.map(h=>c.jsxs("option",{value:h.id,children:[h.name," (",Se(h.currentBalance),")"]},h.id))]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Amount (BDT)"}),c.jsx("input",{type:"number",value:a.amount,onChange:h=>s({...a,amount:parseFloat(h.target.value)||0}),disabled:l,className:`w-full px-6 py-4 bg-[#ebf4ff] border-2 border-[#c7dff5] rounded-lg font-black ${le.colors.primary[600]} text-xl outline-none disabled:opacity-50`})]}),c.jsxs("div",{className:"pt-6 flex gap-4",children:[c.jsx(We,{onClick:t,variant:"ghost",disabled:l,children:"Cancel"}),c.jsx(We,{onClick:r,variant:"primary",size:"md",className:"flex-1",disabled:l,loading:l,children:f})]})]})]})]}):null;function Zo(){return ut({queryKey:["customers"],queryFn:uD,staleTime:300*1e3})}function M9(e=1,t=Qt,r){return ut({queryKey:["customers",e,t,r],queryFn:()=>Sq(e,t,r),placeholderData:n=>n,staleTime:300*1e3})}function SD(e){return ut({queryKey:["customer",e],queryFn:()=>dq(e||""),enabled:!!e&&!(e||"").startsWith("temp-"),staleTime:300*1e3})}function Zd(){return ut({queryKey:["orders"],queryFn:pq,staleTime:300*1e3})}function R9(e=1,t=Qt,r){return ut({queryKey:["orders",e,t,r],queryFn:()=>gq(e,t,r),placeholderData:n=>n,staleTime:300*1e3})}function Hw(e){return ut({queryKey:["order",e],queryFn:()=>yq(e||""),enabled:!!e,staleTime:300*1e3})}function I9(e){return ut({queryKey:["ordersByCustomerId",e],queryFn:()=>vq(e||""),enabled:!!e,staleTime:300*1e3})}function Jd(){return ut({queryKey:["bills"],queryFn:$q,staleTime:300*1e3})}function L9(e=1,t=Qt,r){return ut({queryKey:["bills",e,t,r],queryFn:()=>Bq(e,t,r),placeholderData:n=>n,staleTime:300*1e3})}function _D(e){return ut({queryKey:["bill",e],queryFn:()=>Uq(e||""),enabled:!!e,staleTime:300*1e3})}function $s(){return ut({queryKey:["accounts"],queryFn:jq,staleTime:300*1e3})}function ef(){return ut({queryKey:["transactions"],queryFn:Oq,staleTime:300*1e3})}function B9(e=1,t=Qt,r){return ut({queryKey:["transactions",e,t,r],queryFn:()=>Aq(e,t,r),placeholderData:n=>n,staleTime:300*1e3})}function Ri(){return ut({queryKey:["users"],queryFn:Tq,staleTime:300*1e3})}function ND(e){return ut({queryKey:["user",e],queryFn:()=>Uw(e||""),enabled:!!e,staleTime:10*1e3,refetchOnWindowFocus:!0,refetchOnReconnect:!0})}function tf(){return ut({queryKey:["vendors"],queryFn:Kq,staleTime:300*1e3})}function $9(e=1,t=Qt,r){return ut({queryKey:["vendors",e,t,r],queryFn:()=>Lq(e,t,r),placeholderData:n=>n,staleTime:300*1e3})}function ED(e){return ut({queryKey:["vendor",e],queryFn:()=>Qq(e||""),enabled:!!e,staleTime:300*1e3})}function Vw(e){return ut({queryKey:["products",e],queryFn:()=>Yq(e),staleTime:300*1e3})}function U9(e=1,t=Qt,r,n,a){const s={queryKey:["products",e,t,n,r,...a||[]],queryFn:()=>kq(e,t,r,n,a),placeholderData:l=>l,staleTime:3e5,keepPreviousData:!0,refetchOnWindowFocus:!1};return ut(s)}function z9(e){return ut({queryKey:["product",e],queryFn:()=>Wq(e||""),enabled:!!e,staleTime:300*1e3})}function Us(e){return ut({queryKey:["categories",e],queryFn:()=>e8(e),staleTime:3600*1e3})}function OD(e){return ut({queryKey:["paymentMethods",e],queryFn:()=>n8(e),staleTime:3600*1e3})}function q9(){return ut({queryKey:["units"],queryFn:s8,staleTime:3600*1e3})}function Up(){return ut({queryKey:["settings","company"],queryFn:Wd,staleTime:3600*1e3})}function zp(){return ut({queryKey:["settings","order"],queryFn:zw,staleTime:3600*1e3})}function qp(){return ut({queryKey:["settings","invoice"],queryFn:qw,staleTime:3600*1e3})}function zs(){return ut({queryKey:["settings","defaults"],queryFn:Fw,staleTime:3600*1e3})}function Gw(){return ut({queryKey:["settings","courier"],queryFn:Kw,staleTime:3600*1e3})}const F9=new Map,K9=new Map;function AD(e="item"){return`__temp_${e}_${crypto.randomUUID()}__`}function Q9(e,t){console.log(`[optimisticIdMap] Mapping ${e}  ${t}`),F9.set(e,t),K9.set(t,e)}function Yw(e){return typeof e=="string"&&e.startsWith("__temp_")}function H9(){const e=ze(),t=r=>{const n=e.getQueryData(["customers",1]);n&&Array.isArray(n.data)?e.setQueryData(["customers",1],{...n,data:[r,...n.data].slice(0,Qt),count:(n.count||0)+1}):e.invalidateQueries({queryKey:["customers",1]})};return xt({mutationFn:fq,onMutate:async r=>{await e.cancelQueries({queryKey:["customers"]});const n=e.getQueryData(["customers"]);if(n){const a=AD("customer"),s={...r,id:a};e.setQueryData(["customers"],[...n,s])}return{previousCustomers:n}},onError:(r,n,a)=>{a!=null&&a.previousCustomers&&e.setQueryData(["customers"],a.previousCustomers)},onSuccess:async r=>{if(r&&r.id){e.setQueryData(["customer",r.id],r);const a=(e.getQueryData(["customers"])||[]||[]).filter(s=>!Yw(String(s.id)));e.setQueryData(["customers"],[r,...a])}t(r)}})}function V9(){const e=ze();return xt({mutationFn:({id:t,updates:r})=>hq(t,r),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["customers"]}),await e.cancelQueries({queryKey:["customer",t]});const n=e.getQueryData(["customers"]),a=e.getQueryData(["customer",t]);return n&&e.setQueryData(["customers"],n.map(s=>s.id===t?{...s,...r}:s)),a&&e.setQueryData(["customer",t],{...a,...r}),{previousCustomers:n,previousCustomer:a}},onError:(t,r,n)=>{n!=null&&n.previousCustomers&&e.setQueryData(["customers"],n.previousCustomers),n!=null&&n.previousCustomer&&e.setQueryData(["customer",r.id],n.previousCustomer)},onSuccess:t=>{e.getQueriesData({queryKey:["customers"]}).forEach(([n,a])=>{try{a&&a.data&&Array.isArray(a.data)&&e.setQueryData(n,{...a,data:a.data.map(s=>s.id===t.id?t:s)})}catch{}}),e.setQueryData(["customer",t.id],t)}})}function G9(){const e=ze();return xt({mutationFn:mq,onMutate:async t=>{await e.cancelQueries({queryKey:["customers"]});const r=e.getQueryData(["customers"]);return r&&e.setQueryData(["customers"],r.filter(n=>n.id!==t)),{previousCustomers:r}},onError:(t,r,n)=>{n!=null&&n.previousCustomers&&e.setQueryData(["customers"],n.previousCustomers)},onSuccess:(t,r)=>{e.getQueriesData({queryKey:["customers"]}).forEach(([a,s])=>{try{if(s&&s.data&&Array.isArray(s.data)){const l=s.data.filter(d=>d.id!==r);e.setQueryData(a,{...s,data:l,count:Math.max(0,s.count?s.count-1:0)})}}catch{}}),e.invalidateQueries({queryKey:["customers",1]})}})}function Fp(){const e=ze();return xt({mutationFn:bq,onMutate:async t=>{await e.cancelQueries({queryKey:["orders"]});const r=e.getQueryData(["orders"])||[],n=AD("order"),a={...t,id:n,paidAmount:t.paidAmount||0};return e.setQueryData(["orders"],[a,...r]),{previousOrders:r,optimisticOrder:a,tempId:n}},onError:(t,r,n)=>{n!=null&&n.previousOrders&&e.setQueryData(["orders"],n.previousOrders)},onSuccess:async(t,r,n)=>{n!=null&&n.tempId&&Q9(n.tempId,t.id),e.setQueryData(["order",t.id],t);const a=e.getQueryData(["orders",1]);a&&Array.isArray(a.data)?e.setQueryData(["orders",1],{...a,data:[t,...a.data].slice(0,Qt),count:(a.count||0)+1}):e.invalidateQueries({queryKey:["orders",1]});try{const s=e.getQueryData(["settings","order"]);s&&s.nextNumber&&(await gD({nextNumber:s.nextNumber+1}),e.invalidateQueries({queryKey:["settings","order"]}))}catch(s){console.error("Failed to update order settings:",s)}}})}function rf(){const e=ze();return xt({mutationFn:({id:t,updates:r})=>xq(t,r),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["orders"]}),await e.cancelQueries({queryKey:["order",t]}),await e.cancelQueries({queryKey:["ordersByCustomerId"]});const n=e.getQueryData(["orders"]),a=e.getQueryData(["order",t]);if(n&&e.setQueryData(["orders"],n.map(s=>s.id===t?{...s,...r}:s)),a&&e.setQueryData(["order",t],{...a,...r}),a!=null&&a.customerId){const s=e.getQueryData(["ordersByCustomerId",a.customerId]);s&&e.setQueryData(["ordersByCustomerId",a.customerId],s.map(l=>l.id===t?{...l,...r}:l))}return{previousOrders:n,previousOrder:a}},onError:(t,r,n)=>{n!=null&&n.previousOrders&&e.setQueryData(["orders"],n.previousOrders),n!=null&&n.previousOrder&&e.setQueryData(["order",r.id],n.previousOrder)},onSuccess:t=>{e.getQueriesData({queryKey:["orders"]}).forEach(([n,a])=>{try{a&&a.data&&Array.isArray(a.data)&&e.setQueryData(n,{...a,data:a.data.map(s=>s.id===t.id?t:s)})}catch{}}),e.invalidateQueries({queryKey:["order",t.id]})}})}function Y9(){const e=ze();return xt({mutationFn:wq,onMutate:async t=>{await e.cancelQueries({queryKey:["orders"]});const r=e.getQueryData(["orders"]);return r&&e.setQueryData(["orders"],r.filter(n=>n.id!==t)),{previousOrders:r}},onError:(t,r,n)=>{n!=null&&n.previousOrders&&e.setQueryData(["orders"],n.previousOrders)},onSuccess:(t,r)=>{e.getQueriesData({queryKey:["orders"]}).forEach(([a,s])=>{try{if(s&&s.data&&Array.isArray(s.data)){const l=s.data.filter(d=>d.id!==r);e.setQueryData(a,{...s,data:l,count:Math.max(0,s.count?s.count-1:0)})}}catch{}}),e.invalidateQueries({queryKey:["orders",1]})}})}function CD(){const e=ze();return xt({mutationFn:zq,onMutate:async t=>{await e.cancelQueries({queryKey:["bills"]});const r=e.getQueryData(["bills"])||[],n={...t,id:`temp-${Date.now()}`,paidAmount:t.paidAmount||0};return e.setQueryData(["bills"],[n,...r]),{previousBills:r,optimisticBill:n}},onError:(t,r,n)=>{n!=null&&n.previousBills&&e.setQueryData(["bills"],n.previousBills)},onSuccess:async t=>{e.setQueryData(["bill",t.id],t),e.getQueriesData({queryKey:["bills"]}).forEach(([n,a])=>{try{if(a&&a.data&&Array.isArray(a.data)){const s=[t,...a.data].slice(0,Qt);e.setQueryData(n,{...a,data:s,count:a.count?a.count+1:1})}}catch{}}),e.invalidateQueries({queryKey:["bills",1]})}})}function PD(){const e=ze();return xt({mutationFn:({id:t,updates:r})=>qq(t,r),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["bills"]}),await e.cancelQueries({queryKey:["bill",t]});const n=e.getQueryData(["bills"]),a=e.getQueryData(["bill",t]);return n&&e.setQueryData(["bills"],n.map(s=>s.id===t?{...s,...r}:s)),a&&e.setQueryData(["bill",t],{...a,...r}),{previousBills:n,previousBill:a}},onError:(t,r,n)=>{n!=null&&n.previousBills&&e.setQueryData(["bills"],n.previousBills),n!=null&&n.previousBill&&e.setQueryData(["bill",r.id],n.previousBill)},onSuccess:t=>{e.getQueriesData({queryKey:["bills"]}).forEach(([n,a])=>{try{a&&a.data&&Array.isArray(a.data)&&e.setQueryData(n,{...a,data:a.data.map(s=>s.id===t.id?t:s)})}catch{}}),e.invalidateQueries({queryKey:["bill",t.id]})}})}function W9(){const e=ze();return xt({mutationFn:Fq,onMutate:async t=>{await e.cancelQueries({queryKey:["bills"]});const r=e.getQueryData(["bills"]);return r&&e.setQueryData(["bills"],r.filter(n=>n.id!==t)),{previousBills:r}},onError:(t,r,n)=>{n!=null&&n.previousBills&&e.setQueryData(["bills"],n.previousBills)},onSuccess:(t,r)=>{e.getQueriesData({queryKey:["bills"]}).forEach(([a,s])=>{try{if(s&&s.data&&Array.isArray(s.data)){const l=s.data.filter(d=>d.id!==r);e.setQueryData(a,{...s,data:l,count:Math.max(0,s.count?s.count-1:0)})}}catch{}}),e.invalidateQueries({queryKey:["bills",1]})}})}function X9(){const e=ze();return xt({mutationFn:_q,onMutate:async t=>{await e.cancelQueries({queryKey:["accounts"]});const r=e.getQueryData(["accounts"]);if(r){const n={...t,id:`temp-${Date.now()}`};e.setQueryData(["accounts"],[...r,n])}return{previousAccounts:r}},onError:(t,r,n)=>{n!=null&&n.previousAccounts&&e.setQueryData(["accounts"],n.previousAccounts)},onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["accounts"]})}})}function nf(){const e=ze();return xt({mutationFn:({id:t,updates:r})=>Nq(t,r),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["accounts"]}),await e.cancelQueries({queryKey:["account",t]});const n=e.getQueryData(["accounts"]),a=e.getQueryData(["account",t]);return n&&e.setQueryData(["accounts"],n.map(s=>s.id===t?{...s,...r}:s)),a&&e.setQueryData(["account",t],{...a,...r}),{previousAccounts:n,previousAccount:a}},onError:(t,r,n)=>{n!=null&&n.previousAccounts&&e.setQueryData(["accounts"],n.previousAccounts),n!=null&&n.previousAccount&&e.setQueryData(["account",r.id],n.previousAccount)},onSuccess:t=>{e.invalidateQueries({queryKey:["accounts"]}),e.invalidateQueries({queryKey:["account",t.id]})}})}function Z9(){const e=ze();return xt({mutationFn:Eq,onMutate:async t=>{await e.cancelQueries({queryKey:["accounts"]});const r=e.getQueryData(["accounts"]);return r&&e.setQueryData(["accounts"],r.filter(n=>n.id!==t)),{previousAccounts:r}},onError:(t,r,n)=>{n!=null&&n.previousAccounts&&e.setQueryData(["accounts"],n.previousAccounts)},onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["accounts"]})}})}function af(){const e=ze();return xt({mutationFn:Cq,onMutate:async t=>{await e.cancelQueries({queryKey:["transactions"]}),await e.cancelQueries({queryKey:["orders"]});const r=e.getQueryData(["transactions"]),n=e.getQueryData(["orders"]);if(r){const a={...t,id:`temp-${Date.now()}`};e.setQueryData(["transactions"],[...r,a])}return{previousTransactions:r,previousOrders:n}},onError:(t,r,n)=>{n!=null&&n.previousTransactions&&e.setQueryData(["transactions"],n.previousTransactions),n!=null&&n.previousOrders&&e.setQueryData(["orders"],n.previousOrders)},onSuccess:t=>{e.getQueriesData({queryKey:["transactions"]}).forEach(([n,a])=>{try{if(a&&a.data&&Array.isArray(a.data)){const s=[t,...a.data].slice(0,Qt);e.setQueryData(n,{...a,data:s,count:a.count?a.count+1:1})}}catch{}}),e.invalidateQueries({queryKey:["orders",1]})}})}function J9(){const e=ze();return xt({mutationFn:Pq,onMutate:async t=>{await e.cancelQueries({queryKey:["transactions"]});const r=e.getQueryData(["transactions"]);return r&&e.setQueryData(["transactions"],r.filter(n=>n.id!==t)),{previousTransactions:r}},onError:(t,r,n)=>{n!=null&&n.previousTransactions&&e.setQueryData(["transactions"],n.previousTransactions)},onSuccess:(t,r)=>{e.getQueriesData({queryKey:["transactions"]}).forEach(([a,s])=>{try{if(s&&s.data&&Array.isArray(s.data)){const l=s.data.filter(d=>d.id!==r);e.setQueryData(a,{...s,data:l,count:Math.max(0,s.count?s.count-1:0)})}}catch{}}),e.invalidateQueries({queryKey:["transactions",1]})}})}function eF(){const e=ze();return xt({mutationFn:Mq,onMutate:async t=>{await e.cancelQueries({queryKey:["users"]});const r=e.getQueryData(["users"]);if(r){const n={...t,id:`temp-${Date.now()}`};e.setQueryData(["users"],[...r,n])}return{previousUsers:r}},onError:(t,r,n)=>{n!=null&&n.previousUsers&&e.setQueryData(["users"],n.previousUsers)},onSuccess:()=>{e.invalidateQueries({queryKey:["users"]})}})}function kD(){const e=ze();return xt({mutationFn:({id:t,updates:r})=>Rq(t,r),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["users"]}),await e.cancelQueries({queryKey:["user",t]}),await e.cancelQueries({queryKey:["userByPhone"]});const n=e.getQueryData(["users"]),a=e.getQueryData(["user",t]);return n&&e.setQueryData(["users"],n.map(s=>s.id===t?{...s,...r}:s)),a&&e.setQueryData(["user",t],{...a,...r}),{previousUsers:n,previousUser:a}},onError:(t,r,n)=>{n!=null&&n.previousUsers&&e.setQueryData(["users"],n.previousUsers),n!=null&&n.previousUser&&e.setQueryData(["user",r.id],n.previousUser)},onSuccess:t=>{e.invalidateQueries({queryKey:["users"]}),e.invalidateQueries({queryKey:["user",t.id]})}})}function TD(){const e=ze();return xt({mutationFn:Iq,onMutate:async t=>{await e.cancelQueries({queryKey:["users"]});const r=e.getQueryData(["users"]);return r&&e.setQueryData(["users"],r.filter(n=>n.id!==t)),{previousUsers:r}},onError:(t,r,n)=>{n!=null&&n.previousUsers&&e.setQueryData(["users"],n.previousUsers)},onSuccess:()=>{e.invalidateQueries({queryKey:["users"]})}})}function tF(){const e=ze();return xt({mutationFn:Hq,onMutate:async t=>{await e.cancelQueries({queryKey:["vendors"]});const r=e.getQueryData(["vendors"]);if(r){const n={...t,id:`temp-${Date.now()}`};e.setQueryData(["vendors"],[...r,n])}return{previousVendors:r}},onError:(t,r,n)=>{n!=null&&n.previousVendors&&e.setQueryData(["vendors"],n.previousVendors)},onSuccess:t=>{try{const n=e.getQueryData(["vendors"]);if(n){const a=(n||[]).filter(s=>!(s.id&&String(s.id).startsWith("temp-")));a.some(s=>s.id===t.id)?e.setQueryData(["vendors"],a.map(s=>s.id===t.id?t:s)):e.setQueryData(["vendors"],[t,...a])}}catch{}e.getQueriesData({queryKey:["vendors"]}).forEach(([n,a])=>{try{if(a&&a.data&&Array.isArray(a.data)){const s=[t,...a.data].slice(0,Qt);e.setQueryData(n,{...a,data:s,count:a.count?a.count+1:1})}}catch{}}),e.invalidateQueries({queryKey:["vendors",1]})}})}function rF(){const e=ze();return xt({mutationFn:({id:t,updates:r})=>Vq(t,r),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["vendors"]}),await e.cancelQueries({queryKey:["vendor",t]});const n=e.getQueryData(["vendors"]),a=e.getQueryData(["vendor",t]);return n&&e.setQueryData(["vendors"],n.map(s=>s.id===t?{...s,...r}:s)),a&&e.setQueryData(["vendor",t],{...a,...r}),{previousVendors:n,previousVendor:a}},onError:(t,r,n)=>{n!=null&&n.previousVendors&&e.setQueryData(["vendors"],n.previousVendors),n!=null&&n.previousVendor&&e.setQueryData(["vendor",r.id],n.previousVendor)},onSuccess:t=>{e.getQueriesData({queryKey:["vendors"]}).forEach(([n,a])=>{try{a&&a.data&&Array.isArray(a.data)&&e.setQueryData(n,{...a,data:a.data.map(s=>s.id===t.id?t:s)})}catch{}}),e.setQueryData(["vendor",t.id],t)}})}function nF(){const e=ze();return xt({mutationFn:Gq,onMutate:async t=>{await e.cancelQueries({queryKey:["vendors"]});const r=e.getQueryData(["vendors"]);return r&&e.setQueryData(["vendors"],r.filter(n=>n.id!==t)),{previousVendors:r}},onError:(t,r,n)=>{n!=null&&n.previousVendors&&e.setQueryData(["vendors"],n.previousVendors)},onSuccess:(t,r)=>{e.getQueriesData({queryKey:["vendors"]}).forEach(([a,s])=>{try{if(s&&s.data&&Array.isArray(s.data)){const l=s.data.filter(d=>d.id!==r);e.setQueryData(a,{...s,data:l,count:Math.max(0,s.count?s.count-1:0)})}}catch{}}),e.invalidateQueries({queryKey:["vendors",1]})}})}function aF(){const e=ze();return xt({mutationFn:Xq,onMutate:async t=>{await e.cancelQueries({queryKey:["products"]});const r=e.getQueryData(["products"])||[],n={...t,id:`temp-${Date.now()}`};return e.setQueryData(["products"],[n,...r]),{previousProducts:r,optimisticProduct:n}},onError:(t,r,n)=>{n!=null&&n.previousProducts&&e.setQueryData(["products"],n.previousProducts)},onSuccess:async t=>{e.setQueryData(["product",t.id],t),e.getQueriesData({queryKey:["products"]}).forEach(([s,l])=>{try{if(l&&l.data&&Array.isArray(l.data)){const d=[t,...l.data].slice(0,Qt);e.setQueryData(s,{...l,data:d,count:l.count?l.count+1:1})}}catch{}});const a=(e.getQueryData(["products"])||[]||[]).filter(s=>!String(s.id).startsWith("temp-"));e.setQueryData(["products"],[t,...a])}})}function iF(){const e=ze();return xt({mutationFn:({id:t,updates:r})=>Zq(t,r),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["products"]}),await e.cancelQueries({queryKey:["product",t]});const n=e.getQueryData(["products"]),a=e.getQueryData(["product",t]);return n&&e.setQueryData(["products"],n.map(s=>s.id===t?{...s,...r}:s)),a&&e.setQueryData(["product",t],{...a,...r}),{previousProducts:n,previousProduct:a}},onError:(t,r,n)=>{n!=null&&n.previousProducts&&e.setQueryData(["products"],n.previousProducts),n!=null&&n.previousProduct&&e.setQueryData(["product",r.id],n.previousProduct)},onSuccess:t=>{e.getQueriesData({queryKey:["products"]}).forEach(([n,a])=>{try{a&&a.data&&Array.isArray(a.data)&&e.setQueryData(n,{...a,data:a.data.map(s=>s.id===t.id?t:s)})}catch{}}),e.setQueryData(["product",t.id],t)}})}function sF(){const e=ze();return xt({mutationFn:Jq,onMutate:async t=>{await e.cancelQueries({queryKey:["products"]});const r=e.getQueryData(["products"]);return r&&e.setQueryData(["products"],r.filter(n=>n.id!==t)),{previousProducts:r}},onError:(t,r,n)=>{n!=null&&n.previousProducts&&e.setQueryData(["products"],n.previousProducts)},onSuccess:(t,r)=>{e.getQueriesData({queryKey:["products"]}).forEach(([a,s])=>{try{if(s&&s.data&&Array.isArray(s.data)){const l=s.data.filter(d=>d.id!==r);e.setQueryData(a,{...s,data:l,count:Math.max(0,s.count?s.count-1:0)})}}catch{}}),e.invalidateQueries({queryKey:["products",1]})}})}function oF(){const e=ze();return xt({mutationFn:t8,onMutate:async t=>{await e.cancelQueries({queryKey:["categories"]});const r=e.getQueryData(["categories"]);if(r){const n={...t,id:`temp-${Date.now()}`};e.setQueryData(["categories"],[...r,n])}return{previousCategories:r}},onError:(t,r,n)=>{n!=null&&n.previousCategories&&e.setQueryData(["categories"],n.previousCategories)},onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]})}})}function lF(){const e=ze();return xt({mutationFn:r8,onMutate:async t=>{await e.cancelQueries({queryKey:["categories"]});const r=e.getQueryData(["categories"]);return r&&e.setQueryData(["categories"],r.filter(n=>n.id!==t)),{previousCategories:r}},onError:(t,r,n)=>{n!=null&&n.previousCategories&&e.setQueryData(["categories"],n.previousCategories)},onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]})}})}function cF(){const e=ze();return xt({mutationFn:a8,onMutate:async t=>{await e.cancelQueries({queryKey:["paymentMethods"]});const r=e.getQueryData(["paymentMethods"]);if(r){const n={...t,id:`temp-${Date.now()}`};e.setQueryData(["paymentMethods"],[...r,n])}return{previousMethods:r}},onError:(t,r,n)=>{n!=null&&n.previousMethods&&e.setQueryData(["paymentMethods"],n.previousMethods)},onSuccess:()=>{e.invalidateQueries({queryKey:["paymentMethods"]})}})}function uF(){const e=ze();return xt({mutationFn:i8,onMutate:async t=>{await e.cancelQueries({queryKey:["paymentMethods"]});const r=e.getQueryData(["paymentMethods"]);return r&&e.setQueryData(["paymentMethods"],r.filter(n=>n.id!==t)),{previousMethods:r}},onError:(t,r,n)=>{n!=null&&n.previousMethods&&e.setQueryData(["paymentMethods"],n.previousMethods)},onSuccess:()=>{e.invalidateQueries({queryKey:["paymentMethods"]})}})}function dF(){const e=ze();return xt({mutationFn:o8,onMutate:async t=>{await e.cancelQueries({queryKey:["units"]});const r=e.getQueryData(["units"]);if(r){const n={...t,id:`temp-${Date.now()}`};e.setQueryData(["units"],[...r,n])}return{previousUnits:r}},onError:(t,r,n)=>{n!=null&&n.previousUnits&&e.setQueryData(["units"],n.previousUnits)},onSuccess:()=>{e.invalidateQueries({queryKey:["units"]})}})}function fF(){const e=ze();return xt({mutationFn:l8,onMutate:async t=>{await e.cancelQueries({queryKey:["units"]});const r=e.getQueryData(["units"]);return r&&e.setQueryData(["units"],r.filter(n=>n.id!==t)),{previousUnits:r}},onError:(t,r,n)=>{n!=null&&n.previousUnits&&e.setQueryData(["units"],n.previousUnits)},onSuccess:()=>{e.invalidateQueries({queryKey:["units"]})}})}function hF(){const e=ze();return xt({mutationFn:b8,onMutate:async t=>{await e.cancelQueries({queryKey:["settings"]});const r=e.getQueryData(["settings","company"]),n=e.getQueryData(["settings","order"]),a=e.getQueryData(["settings","invoice"]),s=e.getQueryData(["settings","defaults"]),l=e.getQueryData(["settings","courier"]);return t.company&&r&&e.setQueryData(["settings","company"],{...r,...t.company}),t.order&&n&&e.setQueryData(["settings","order"],{...n,...t.order}),t.invoice&&a&&e.setQueryData(["settings","invoice"],{...a,...t.invoice}),t.defaults&&s&&e.setQueryData(["settings","defaults"],{...s,...t.defaults}),t.courier&&l&&e.setQueryData(["settings","courier"],{...l,...t.courier}),{previousCompany:r,previousOrder:n,previousInvoice:a,previousDefaults:s,previousCourier:l}},onError:(t,r,n)=>{n!=null&&n.previousCompany&&e.setQueryData(["settings","company"],n.previousCompany),n!=null&&n.previousOrder&&e.setQueryData(["settings","order"],n.previousOrder),n!=null&&n.previousInvoice&&e.setQueryData(["settings","invoice"],n.previousInvoice),n!=null&&n.previousDefaults&&e.setQueryData(["settings","defaults"],n.previousDefaults),n!=null&&n.previousCourier&&e.setQueryData(["settings","courier"],n.previousCourier)},onSuccess:()=>{e.invalidateQueries({queryKey:["settings"]})}})}const DD=({isOpen:e,onClose:t,order:r,customer:n})=>{var g;const{data:a}=Gw(),[s,l]=x.useState(!1),[d,f]=x.useState(null),h=rf();if(!e)return null;const p=async()=>{var _;if(f(null),!r||!n){f("Missing order or customer information"),console.error("[SteadfastModal] Missing order, customer information");return}if(!(a!=null&&a.steadfast)){f("No Steadfast credentials configured"),console.error("[SteadfastModal] No Steadfast settings");return}const{baseUrl:y,apiKey:v,secretKey:j}=a.steadfast;if(console.log("[SteadfastModal] ======== SUBMISSION DEBUG ========"),console.log("[SteadfastModal] courierSettings object:",a),console.log("[SteadfastModal] steadfast object:",a.steadfast),console.log("[SteadfastModal] baseUrl:",y),console.log("[SteadfastModal] baseUrl type:",typeof y),console.log("[SteadfastModal] baseUrl empty?:",y===""||!y),console.log("[SteadfastModal] baseUrl trimmed empty?:",(y||"").trim()===""),console.log("[SteadfastModal] apiKey:",v?`${v.substring(0,5)}...`:"EMPTY/NULL"),console.log("[SteadfastModal] apiKey type:",typeof v),console.log("[SteadfastModal] secretKey:",j?`${j.substring(0,5)}...`:"EMPTY/NULL"),console.log("[SteadfastModal] secretKey type:",typeof j),!y||!v||!j){f(`Incomplete Steadfast credentials - baseUrl: ${!!y}, apiKey: ${!!v}, secretKey: ${!!j}`),console.error("[SteadfastModal] Incomplete credentials"),console.error("[SteadfastModal] baseUrl value:",JSON.stringify(y)),console.error("[SteadfastModal] apiKey value:",JSON.stringify(v)),console.error("[SteadfastModal] secretKey value:",JSON.stringify(j));return}l(!0);try{console.log("[SteadfastModal] ======== PREPARING SUBMISSION ========"),console.log("[SteadfastModal] Order Number:",r.orderNumber),console.log("[SteadfastModal] Customer Name:",n.name),console.log("[SteadfastModal] Customer Phone:",n.phone),console.log("[SteadfastModal] Customer Address:",n.address),console.log("[SteadfastModal] Order Total:",r.total);const S=await v8({baseUrl:y,apiKey:v,secretKey:j,invoice:r.orderNumber,recipientName:n.name,recipientPhone:n.phone,recipientAddress:n.address,codAmount:r.total});if(console.log("[SteadfastModal] ======== SUBMISSION RESULT ========"),console.log("[SteadfastModal] Result:",S),S.error){let N=S.error;try{S.error.includes("Account is not active")&&(N="Something went wrong.")}catch{}f(N),console.error("[SteadfastModal] Submission failed:",S.error);return}console.log("[SteadfastModal] Order submitted successfully to Steadfast");try{const N=`Sent to Steadfast by ${((_=Ne.currentUser)==null?void 0:_.name)||"System"} on ${new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}`;await h.mutateAsync({id:r.id,updates:{history:{...r.history,courier:N}}})}catch(N){console.error("[SteadfastModal] Failed to update order sent flag:",N)}t()}catch(S){const N=S instanceof Error?S.message:"Unknown error";f(N),console.error("[SteadfastModal] Exception during submission:",N)}finally{l(!1)}};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm z-40",onClick:t}),c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:`${le.card.elevated} w-full max-w-2xl animate-in fade-in slide-in-from-bottom-4 duration-300`,children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Add to Steadfast"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),c.jsxs("div",{className:"p-6 space-y-4",children:[d&&c.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[c.jsx("p",{className:"font-semibold",children:"Error:"}),c.jsx("p",{children:d instanceof Error?d.message:String(d)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Order Number"}),c.jsx("p",{className:"text-gray-900",children:(r==null?void 0:r.orderNumber)||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Customer Name"}),c.jsx("p",{className:"text-gray-900",children:(n==null?void 0:n.name)||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Customer Phone"}),c.jsx("p",{className:"text-gray-900",children:(n==null?void 0:n.phone)||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Customer Address"}),c.jsx("p",{className:"text-gray-900",children:(n==null?void 0:n.address)||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"COD Amount"}),c.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[" ",((g=r==null?void 0:r.total)==null?void 0:g.toFixed(2))||"0.00"]})]})]}),c.jsxs("div",{className:"flex gap-3 px-6 py-4 border-t border-gray-100",children:[c.jsx("button",{onClick:t,disabled:s,className:"flex-1 py-2 px-4 rounded-lg border border-gray-200 text-gray-700 font-bold hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),c.jsx("button",{onClick:p,disabled:s||!r||!n,className:"flex-1 py-2 px-4 rounded-lg bg-blue-600 text-white font-bold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Adding...":"Add"})]})]})})]})},MD=({isOpen:e,onClose:t,order:r,customer:n})=>{const{data:a}=Gw(),[s,l]=x.useState(1e3),[d,f]=x.useState("1"),[h,p]=x.useState(""),[g,y]=x.useState(""),[v,j]=x.useState(""),[_,S]=x.useState([]),[N,E]=x.useState([]),[O,C]=x.useState([]),[D,T]=x.useState(!1),[M,R]=x.useState(!1),[U,W]=x.useState(!1),[F,z]=x.useState(!1),pe=rf(),oe=x.useRef(null),me=x.useRef(!1);return x.useEffect(()=>(e||(me.current=!0,oe.current&&(clearInterval(oe.current),oe.current=null)),()=>{me.current=!0,oe.current&&(clearInterval(oe.current),oe.current=null)}),[e]),x.useEffect(()=>{e&&(async()=>{var H,ie,he,K;if(!((H=a==null?void 0:a.carryBee)!=null&&H.baseUrl)||!((ie=a==null?void 0:a.carryBee)!=null&&ie.clientId)||!((he=a==null?void 0:a.carryBee)!=null&&he.clientSecret)||!((K=a==null?void 0:a.carryBee)!=null&&K.clientContext)){S([]);return}T(!0);try{const P=await m8({baseUrl:a.carryBee.baseUrl,clientId:a.carryBee.clientId,clientSecret:a.carryBee.clientSecret,clientContext:a.carryBee.clientContext});S(P)}catch(P){console.error("Failed to fetch cities:",P),S([])}finally{T(!1)}})()},[e,a]),x.useEffect(()=>{(async()=>{var H,ie;if(!h||!((H=a==null?void 0:a.carryBee)!=null&&H.baseUrl)||!((ie=a==null?void 0:a.carryBee)!=null&&ie.clientId)){E([]),y(""),j(""),C([]);return}R(!0);try{const he=await p8({baseUrl:a.carryBee.baseUrl,clientId:a.carryBee.clientId,clientSecret:a.carryBee.clientSecret,clientContext:a.carryBee.clientContext,cityId:h});E(he)}catch(he){console.error("Failed to fetch zones:",he),E([])}finally{R(!1)}})()},[h,a]),x.useEffect(()=>{(async()=>{var H,ie;if(!g||!h||!((H=a==null?void 0:a.carryBee)!=null&&H.baseUrl)||!((ie=a==null?void 0:a.carryBee)!=null&&ie.clientId)){C([]),j("");return}W(!0);try{const he=await g8({baseUrl:a.carryBee.baseUrl,clientId:a.carryBee.clientId,clientSecret:a.carryBee.clientSecret,clientContext:a.carryBee.clientContext,cityId:h,zoneId:g});C(he)}catch(he){console.error("Failed to fetch areas:",he),C([])}finally{W(!1)}})()},[g,h,a]),e?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm z-40",onClick:t}),c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:`${le.card.elevated} w-full max-w-2xl animate-in fade-in slide-in-from-bottom-4 duration-300`,children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Add to CarryBee"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-semibold text-gray-700",children:["Weight ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",value:s,onChange:I=>l(Number(I.target.value)),className:"flex-1 px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg",min:"1"}),c.jsx("span",{className:"text-sm font-semibold text-gray-700 whitespace-nowrap",children:"grams"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-semibold text-gray-700",children:["Delivery Type ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{value:d,onChange:I=>f(I.target.value),className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg",children:[c.jsx("option",{value:"1",children:"Normal Delivery (Type 1)"}),c.jsx("option",{value:"2",children:"Express Delivery (Type 2)"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-semibold text-gray-700",children:["City ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{value:h,onChange:I=>p(I.target.value),disabled:D||_.length===0,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("option",{value:"",children:D?"Loading cities...":_.length===0?"No cities available":"Select a city"}),_.map(I=>c.jsx("option",{value:I.id,children:I.name},I.id))]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-semibold text-gray-700",children:["Zone ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{value:g,onChange:I=>y(I.target.value),disabled:!h||M||N.length===0,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("option",{value:"",children:h?M?"Loading zones...":N.length===0?"No zones available":"Select a zone":"Select a city first"}),N.map(I=>c.jsx("option",{value:I.id,children:I.name},I.id))]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Area"}),c.jsxs("select",{value:v,onChange:I=>j(I.target.value),disabled:!g||U,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("option",{value:"",children:g?U?"Loading areas...":O.length===0?"No areas available":"Select an area (optional)":"Select a zone first"}),O.map(I=>c.jsx("option",{value:I.id,children:I.name},I.id))]})]})]}),c.jsxs("div",{className:"flex gap-3 px-6 py-4 border-t border-gray-100",children:[c.jsx("button",{onClick:t,className:"flex-1 py-2 px-4 rounded-lg border border-gray-200 text-gray-700 font-bold hover:bg-gray-50",children:"Cancel"}),c.jsx("button",{onClick:async()=>{var P,B,Y;if(!h||!g){alert("Please select both City and Zone");return}if(!r||!n){alert("Missing order or customer information"),console.error("Missing order or customer:",{order:r,customer:n});return}if(!(a!=null&&a.carryBee)){alert("CarryBee settings not configured"),console.error("Missing CarryBee settings:",a);return}const{baseUrl:I,clientId:H,clientSecret:ie,clientContext:he,storeId:K}=a.carryBee;if(!I||!H||!ie||!he||!K){alert("CarryBee settings incomplete. Please configure Base URL, Client ID, Client Secret, Client Context, and Store ID in Settings."),console.error("Incomplete CarryBee settings:",{baseUrl:I,clientId:H,clientSecret:ie,clientContext:he,storeId:K});return}z(!0);try{console.log("[CarryBeeModal] Submitting order:",{storeId:K,deliveryType:Number(d),recipientPhone:n.phone,recipientName:n.name,cityId:h,zoneId:g,areaId:v||void 0,itemWeight:s,collectableAmount:r.total});const ne=await y8({baseUrl:I,clientId:H,clientSecret:ie,clientContext:he,storeId:K,deliveryType:Number(d),productType:1,recipientPhone:n.phone,recipientName:n.name,recipientAddress:n.address||"",cityId:h,zoneId:g,areaId:v||void 0,itemWeight:s,collectableAmount:r.total||0});if(ne.error)alert(`Failed to send order: ${ne.error}`);else{try{const G=ne&&(((P=ne.order)==null?void 0:P.consignment_id)||ne.consignment_id)||ne.data&&(((B=ne.data.order)==null?void 0:B.consignment_id)||ne.data.consignment_id)||null,be=`Sent to CarryBee by ${((Y=Ne.currentUser)==null?void 0:Y.name)||"System"} on ${new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}`,ge={history:{...r.history,courier:be}};if(G&&(ge.carrybee_consignment_id=G),await pe.mutateAsync({id:r.id,updates:ge}),G){const je="At the sorting hub";me.current=!1;const J=async()=>{var Ee;if(!me.current)try{const Ce=`${a.carryBee.baseUrl.replace(/\/$/,"")}/api/v2/orders/${encodeURIComponent(G)}/details`,de=await fetch(Ce,{method:"GET",headers:{"Client-ID":a.carryBee.clientId,"Client-Secret":a.carryBee.clientSecret,"Client-Context":a.carryBee.clientContext,"Content-Type":"application/json"}});if(!de.ok)return;const Xe=await de.json();if((((Ee=Xe==null?void 0:Xe.data)==null?void 0:Ee.transfer_status)||(Xe==null?void 0:Xe.transfer_status)||null)===je&&!me.current){const vt=`Marked picked automatically on ${new Date().toLocaleString()}`;await pe.mutateAsync({id:r.id,updates:{status:Ie.PICKED,history:{...r.history,picked:vt}}}),me.current=!0,oe.current&&(clearInterval(oe.current),oe.current=null)}}catch(Ce){console.error("[CarryBeeModal] Polling error:",Ce)}};oe.current=window.setInterval(J,15e3),J()}}catch(G){console.error("[CarryBeeModal] Failed to update order sent flag or consignment id:",G)}alert("Order sent to CarryBee successfully!"),t()}}catch(ne){console.error("Error submitting order:",ne),alert("Error sending order to CarryBee")}finally{z(!1)}},disabled:!h||!g||F,className:"flex-1 py-2 px-4 rounded-lg bg-blue-600 text-white font-bold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:F?"Adding...":"Add"})]})]})})]}):null},f0=(e,t,r)=>{if(t==="All Time")return!0;const n=new Date(e),a=new Date;if(t==="Today")return n.toDateString()===a.toDateString();if(t==="This Week"){const s=a.getDate()-a.getDay(),l=new Date(new Date().setDate(s)),d=new Date(new Date().setDate(s+6));return n>=l&&n<=d}return t==="This Month"?n.getMonth()===a.getMonth()&&n.getFullYear()===a.getFullYear():t==="This Year"?n.getFullYear()===a.getFullYear():t==="Custom"?!r.from||!r.to?!0:n>=new Date(r.from)&&n<=new Date(r.to):!0};function RD(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=RD(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ht(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=RD(e))&&(n&&(n+=" "),n+=t);return n}var mF=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Ww(e){if(typeof e!="string")return!1;var t=mF;return t.includes(e)}var pF=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],gF=new Set(pF);function ID(e){return typeof e!="string"?!1:gF.has(e)}function LD(e){return typeof e=="string"&&e.startsWith("data-")}function Mn(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(ID(r)||LD(r))&&(t[r]=e[r]);return t}function zo(e){if(e==null)return null;if(x.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Mn(t)}return typeof e=="object"&&!Array.isArray(e)?Mn(e):null}function nn(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(ID(r)||LD(r)||Ww(r))&&(t[r]=e[r]);return t}function yF(e){return e==null?null:x.isValidElement(e)?nn(e.props):typeof e=="object"&&!Array.isArray(e)?nn(e):null}var vF=["children","width","height","viewBox","className","style","title","desc"];function wx(){return wx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wx.apply(null,arguments)}function bF(e,t){if(e==null)return{};var r,n,a=xF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function xF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Xw=x.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:l,style:d,title:f,desc:h}=e,p=bF(e,vF),g=s||{width:n,height:a,x:0,y:0},y=ht("recharts-surface",l);return x.createElement("svg",wx({},nn(p),{className:y,width:n,height:a,style:d,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:t}),x.createElement("title",null,f),x.createElement("desc",null,h),r)}),wF=["children","className"];function jx(){return jx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jx.apply(null,arguments)}function jF(e,t){if(e==null)return{};var r,n,a=SF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function SF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var kr=x.forwardRef((e,t)=>{var{children:r,className:n}=e,a=jF(e,wF),s=ht("recharts-layer",n);return x.createElement("g",jx({className:s},nn(a),{ref:t}),r)}),BD=x.createContext(null),_F=()=>x.useContext(BD);function Dt(e){return function(){return e}}const $D=Math.cos,Dm=Math.sin,Sa=Math.sqrt,Mm=Math.PI,Kp=2*Mm,Sx=Math.PI,_x=2*Sx,mo=1e-6,NF=_x-mo;function UD(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function EF(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return UD;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class OF{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?UD:EF(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,l){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+l}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,d=this._y1,f=n-t,h=a-r,p=l-t,g=d-r,y=p*p+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(y>mo)if(!(Math.abs(g*f-h*p)>mo)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let v=n-l,j=a-d,_=f*f+h*h,S=v*v+j*j,N=Math.sqrt(_),E=Math.sqrt(y),O=s*Math.tan((Sx-Math.acos((_+y-S)/(2*N*E)))/2),C=O/E,D=O/N;Math.abs(C-1)>mo&&this._append`L${t+C*p},${r+C*g}`,this._append`A${s},${s},0,0,${+(g*v>p*j)},${this._x1=t+D*f},${this._y1=r+D*h}`}}arc(t,r,n,a,s,l){if(t=+t,r=+r,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let d=n*Math.cos(a),f=n*Math.sin(a),h=t+d,p=r+f,g=1^l,y=l?a-s:s-a;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>mo||Math.abs(this._y1-p)>mo)&&this._append`L${h},${p}`,n&&(y<0&&(y=y%_x+_x),y>NF?this._append`A${n},${n},0,1,${g},${t-d},${r-f}A${n},${n},0,1,${g},${this._x1=h},${this._y1=p}`:y>mo&&this._append`A${n},${n},0,${+(y>=Sx)},${g},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Zw(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new OF(t)}function Jw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zD(e){this._context=e}zD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Qp(e){return new zD(e)}function qD(e){return e[0]}function FD(e){return e[1]}function KD(e,t){var r=Dt(!0),n=null,a=Qp,s=null,l=Zw(d);e=typeof e=="function"?e:e===void 0?qD:Dt(e),t=typeof t=="function"?t:t===void 0?FD:Dt(t);function d(f){var h,p=(f=Jw(f)).length,g,y=!1,v;for(n==null&&(s=a(v=l())),h=0;h<=p;++h)!(h<p&&r(g=f[h],h,f))===y&&((y=!y)?s.lineStart():s.lineEnd()),y&&s.point(+e(g,h,f),+t(g,h,f));if(v)return s=null,v+""||null}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:Dt(+f),d):e},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:Dt(+f),d):t},d.defined=function(f){return arguments.length?(r=typeof f=="function"?f:Dt(!!f),d):r},d.curve=function(f){return arguments.length?(a=f,n!=null&&(s=a(n)),d):a},d.context=function(f){return arguments.length?(f==null?n=s=null:s=a(n=f),d):n},d}function em(e,t,r){var n=null,a=Dt(!0),s=null,l=Qp,d=null,f=Zw(h);e=typeof e=="function"?e:e===void 0?qD:Dt(+e),t=typeof t=="function"?t:Dt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?FD:Dt(+r);function h(g){var y,v,j,_=(g=Jw(g)).length,S,N=!1,E,O=new Array(_),C=new Array(_);for(s==null&&(d=l(E=f())),y=0;y<=_;++y){if(!(y<_&&a(S=g[y],y,g))===N)if(N=!N)v=y,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),j=y-1;j>=v;--j)d.point(O[j],C[j]);d.lineEnd(),d.areaEnd()}N&&(O[y]=+e(S,y,g),C[y]=+t(S,y,g),d.point(n?+n(S,y,g):O[y],r?+r(S,y,g):C[y]))}if(E)return d=null,E+""||null}function p(){return KD().defined(a).curve(l).context(s)}return h.x=function(g){return arguments.length?(e=typeof g=="function"?g:Dt(+g),n=null,h):e},h.x0=function(g){return arguments.length?(e=typeof g=="function"?g:Dt(+g),h):e},h.x1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:Dt(+g),h):n},h.y=function(g){return arguments.length?(t=typeof g=="function"?g:Dt(+g),r=null,h):t},h.y0=function(g){return arguments.length?(t=typeof g=="function"?g:Dt(+g),h):t},h.y1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:Dt(+g),h):r},h.lineX0=h.lineY0=function(){return p().x(e).y(t)},h.lineY1=function(){return p().x(e).y(r)},h.lineX1=function(){return p().x(n).y(t)},h.defined=function(g){return arguments.length?(a=typeof g=="function"?g:Dt(!!g),h):a},h.curve=function(g){return arguments.length?(l=g,s!=null&&(d=l(s)),h):l},h.context=function(g){return arguments.length?(g==null?s=d=null:d=l(s=g),h):s},h}class QD{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function AF(e){return new QD(e,!0)}function CF(e){return new QD(e,!1)}const e1={draw(e,t){const r=Sa(t/Mm);e.moveTo(r,0),e.arc(0,0,r,0,Kp)}},PF={draw(e,t){const r=Sa(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},HD=Sa(1/3),kF=HD*2,TF={draw(e,t){const r=Sa(t/kF),n=r*HD;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},DF={draw(e,t){const r=Sa(t),n=-r/2;e.rect(n,n,r,r)}},MF=.8908130915292852,VD=Dm(Mm/10)/Dm(7*Mm/10),RF=Dm(Kp/10)*VD,IF=-$D(Kp/10)*VD,LF={draw(e,t){const r=Sa(t*MF),n=RF*r,a=IF*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const l=Kp*s/5,d=$D(l),f=Dm(l);e.lineTo(f*r,-d*r),e.lineTo(d*n-f*a,f*n+d*a)}e.closePath()}},h0=Sa(3),BF={draw(e,t){const r=-Sa(t/(h0*3));e.moveTo(0,r*2),e.lineTo(-h0*r,-r),e.lineTo(h0*r,-r),e.closePath()}},Yn=-.5,Wn=Sa(3)/2,Nx=1/Sa(12),$F=(Nx/2+1)*3,UF={draw(e,t){const r=Sa(t/$F),n=r/2,a=r*Nx,s=n,l=r*Nx+r,d=-s,f=l;e.moveTo(n,a),e.lineTo(s,l),e.lineTo(d,f),e.lineTo(Yn*n-Wn*a,Wn*n+Yn*a),e.lineTo(Yn*s-Wn*l,Wn*s+Yn*l),e.lineTo(Yn*d-Wn*f,Wn*d+Yn*f),e.lineTo(Yn*n+Wn*a,Yn*a-Wn*n),e.lineTo(Yn*s+Wn*l,Yn*l-Wn*s),e.lineTo(Yn*d+Wn*f,Yn*f-Wn*d),e.closePath()}};function zF(e,t){let r=null,n=Zw(a);e=typeof e=="function"?e:Dt(e||e1),t=typeof t=="function"?t:Dt(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Dt(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Dt(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function Rm(){}function Im(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function GD(e){this._context=e}GD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Im(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Im(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function qF(e){return new GD(e)}function YD(e){this._context=e}YD.prototype={areaStart:Rm,areaEnd:Rm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Im(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function FF(e){return new YD(e)}function WD(e){this._context=e}WD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Im(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function KF(e){return new WD(e)}function XD(e){this._context=e}XD.prototype={areaStart:Rm,areaEnd:Rm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function QF(e){return new XD(e)}function JO(e){return e<0?-1:1}function eA(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),l=(r-e._y1)/(a||n<0&&-0),d=(s*a+l*n)/(n+a);return(JO(s)+JO(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(d))||0}function tA(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function m0(e,t,r){var n=e._x0,a=e._y0,s=e._x1,l=e._y1,d=(s-n)/3;e._context.bezierCurveTo(n+d,a+d*t,s-d,l-d*r,s,l)}function Lm(e){this._context=e}Lm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:m0(this,this._t0,tA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,m0(this,tA(this,r=eA(this,e,t)),r);break;default:m0(this,this._t0,r=eA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function ZD(e){this._context=new JD(e)}(ZD.prototype=Object.create(Lm.prototype)).point=function(e,t){Lm.prototype.point.call(this,t,e)};function JD(e){this._context=e}JD.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function HF(e){return new Lm(e)}function VF(e){return new ZD(e)}function eM(e){this._context=e}eM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=rA(e),a=rA(t),s=0,l=1;l<r;++s,++l)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function rA(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),l=new Array(r);for(a[0]=0,s[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,l[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,l[t]-=n*l[t-1];for(a[r-1]=l[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(l[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function GF(e){return new eM(e)}function Hp(e,t){this._context=e,this._t=t}Hp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function YF(e){return new Hp(e,.5)}function WF(e){return new Hp(e,0)}function XF(e){return new Hp(e,1)}function qo(e,t){if((l=e.length)>1)for(var r=1,n,a,s=e[t[0]],l,d=s.length;r<l;++r)for(a=s,s=e[t[r]],n=0;n<d;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Ex(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function ZF(e,t){return e[t]}function JF(e){const t=[];return t.key=e,t}function eK(){var e=Dt([]),t=Ex,r=qo,n=ZF;function a(s){var l=Array.from(e.apply(this,arguments),JF),d,f=l.length,h=-1,p;for(const g of s)for(d=0,++h;d<f;++d)(l[d][h]=[0,+n(g,l[d].key,h,s)]).data=g;for(d=0,p=Jw(t(l));d<f;++d)l[p[d]].index=d;return r(l,p),l}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Dt(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Dt(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?Ex:typeof s=="function"?s:Dt(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??qo,a):r},a}function tK(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,l;a<s;++a){for(l=r=0;r<n;++r)l+=e[r][a][1]||0;if(l)for(r=0;r<n;++r)e[r][a][1]/=l}qo(e,t)}}function rK(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var l=0,d=0;l<a;++l)d+=e[l][r][1]||0;n[r][1]+=n[r][0]=-d/2}qo(e,t)}}function nK(e,t){if(!(!((l=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,l;n<s;++n){for(var d=0,f=0,h=0;d<l;++d){for(var p=e[t[d]],g=p[n][1]||0,y=p[n-1][1]||0,v=(g-y)/2,j=0;j<d;++j){var _=e[t[j]],S=_[n][1]||0,N=_[n-1][1]||0;v+=S-N}f+=g,h+=v*g}a[n-1][1]+=a[n-1][0]=r,f&&(r-=h/f)}a[n-1][1]+=a[n-1][0]=r,qo(e,t)}}var p0={},g0={},nA;function aK(){return nA||(nA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(g0)),g0}var y0={},aA;function tM(){return aA||(aA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(y0)),y0}var v0={},iA;function t1(){return iA||(iA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(v0)),v0}var b0={},x0={},sA;function iK(){return sA||(sA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(x0)),x0}var oA;function r1(){return oA||(oA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iK(),r=t1();function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=t.toString(a);const s=[],l=a.length;if(l===0)return s;let d=0,f="",h="",p=!1;for(a.charCodeAt(0)===46&&(s.push(""),d++);d<l;){const g=a[d];h?g==="\\"&&d+1<l?(d++,f+=a[d]):g===h?h="":f+=g:p?g==='"'||g==="'"?h=g:g==="]"?(p=!1,s.push(f),f=""):f+=g:g==="["?(p=!0,f&&(s.push(f),f="")):g==="."?f&&(s.push(f),f=""):f+=g,d++}return f&&s.push(f),s}e.toPath=n})(b0)),b0}var lA;function n1(){return lA||(lA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aK(),r=tM(),n=t1(),a=r1();function s(d,f,h){if(d==null)return h;switch(typeof f){case"string":{if(t.isUnsafeProperty(f))return h;const p=d[f];return p===void 0?r.isDeepKey(f)?s(d,a.toPath(f),h):h:p}case"number":case"symbol":{typeof f=="number"&&(f=n.toKey(f));const p=d[f];return p===void 0?h:p}default:{if(Array.isArray(f))return l(d,f,h);if(Object.is(f==null?void 0:f.valueOf(),-0)?f="-0":f=String(f),t.isUnsafeProperty(f))return h;const p=d[f];return p===void 0?h:p}}}function l(d,f,h){if(f.length===0)return h;let p=d;for(let g=0;g<f.length;g++){if(p==null||t.isUnsafeProperty(f[g]))return h;p=p[f[g]]}return p===void 0?h:p}e.get=s})(p0)),p0}var w0,cA;function sK(){return cA||(cA=1,w0=n1().get),w0}var oK=sK();const Fo=Ka(oK);var lK=4;function Ps(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:lK,r=10**t,n=Math.round(e*r)/r;return Object.is(n,-0)?0:n}function Jt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((a,s,l)=>{var d=r[l-1];return typeof d=="string"?a+d+s:d!==void 0?a+Ps(d)+s:a+s},"")}var Pr=e=>e===0?0:e>0?1:-1,Ua=e=>typeof e=="number"&&e!=+e,Ko=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Oe=e=>(typeof e=="number"||e instanceof Number)&&!Ua(e),za=e=>Oe(e)||typeof e=="string",cK=0,jd=e=>{var t=++cK;return"".concat(e||"").concat(t)},Yr=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Oe(t)&&typeof t!="string")return n;var s;if(Ko(t)){if(r==null)return n;var l=t.indexOf("%");s=r*parseFloat(t.slice(0,l))/100}else s=+t;return Ua(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},rM=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[String(e[n])])r[String(e[n])]=!0;else return!0;return!1};function qt(e,t,r){return Oe(e)&&Oe(t)?Ps(e+r*(t-e)):t}function nM(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Fo(n,t))===r)}var Ht=e=>e===null||typeof e>"u",sf=e=>Ht(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function gn(e){return e!=null}function Jo(){}var uK=["type","size","sizeType"];function Ox(){return Ox=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ox.apply(null,arguments)}function uA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function dA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uA(Object(r),!0).forEach(function(n){dK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dK(e,t,r){return(t=fK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fK(e){var t=hK(e,"string");return typeof t=="symbol"?t:t+""}function hK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mK(e,t){if(e==null)return{};var r,n,a=pK(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var aM={symbolCircle:e1,symbolCross:PF,symbolDiamond:TF,symbolSquare:DF,symbolStar:LF,symbolTriangle:BF,symbolWye:UF},gK=Math.PI/180,yK=e=>{var t="symbol".concat(sf(e));return aM[t]||e1},vK=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*gK;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},bK=(e,t)=>{aM["symbol".concat(sf(e))]=t},a1=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=mK(e,uK),s=dA(dA({},a),{},{type:t,size:r,sizeType:n}),l="circle";typeof t=="string"&&(l=t);var d=()=>{var y=yK(l),v=zF().type(y).size(vK(r,n,l)),j=v();if(j!==null)return j},{className:f,cx:h,cy:p}=s,g=nn(s);return Oe(h)&&Oe(p)&&Oe(r)?x.createElement("path",Ox({},g,{className:ht("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:d()})):null};a1.registerSymbol=bK;var iM=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,i1=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(x.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{Ww(a)&&(n[a]=(s=>r[a](r,s)))}),n},xK=(e,t,r)=>n=>(e(t,r,n),null),of=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];Ww(a)&&typeof s=="function"&&(n||(n={}),n[a]=xK(s,t,r))}),n};function fA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fA(Object(r),!0).forEach(function(n){jK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jK(e,t,r){return(t=SK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SK(e){var t=_K(e,"string");return typeof t=="symbol"?t:t+""}function _K(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fr(e,t){var r=wK({},e),n=t,a=Object.keys(t),s=a.reduce((l,d)=>(l[d]===void 0&&n[d]!==void 0&&(l[d]=n[d]),l),r);return s}function Bm(){return Bm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bm.apply(null,arguments)}function hA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function NK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hA(Object(r),!0).forEach(function(n){EK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EK(e,t,r){return(t=OK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OK(e){var t=AK(e,"string");return typeof t=="symbol"?t:t+""}function AK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zn=32,CK={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function PK(e){var{data:t,iconType:r,inactiveColor:n}=e,a=Zn/2,s=Zn/6,l=Zn/3,d=t.inactive?n:t.color,f=r??t.type;if(f==="none")return null;if(f==="plainline"){var h;return x.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:(h=t.payload)===null||h===void 0?void 0:h.strokeDasharray,x1:0,y1:a,x2:Zn,y2:a,className:"recharts-legend-icon"})}if(f==="line")return x.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(Zn,"M").concat(2*l,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(f==="rect")return x.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(Zn/8,"h").concat(Zn,"v").concat(Zn*3/4,"h").concat(-Zn,"z"),className:"recharts-legend-icon"});if(x.isValidElement(t.legendIcon)){var p=NK({},t);return delete p.legendIcon,x.cloneElement(t.legendIcon,p)}return x.createElement(a1,{fill:d,cx:a,cy:a,size:Zn,sizeType:"diameter",type:f})}function kK(e){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:l}=e,d={x:0,y:0,width:Zn,height:Zn},f={display:n==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((p,g)=>{var y=p.formatter||a,v=ht({"recharts-legend-item":!0,["legend-item-".concat(g)]:!0,inactive:p.inactive});if(p.type==="none")return null;var j=p.inactive?s:p.color,_=y?y(p.value,p,g):p.value;return x.createElement("li",Bm({className:v,style:f,key:"legend-item-".concat(g)},of(e,p,g)),x.createElement(Xw,{width:r,height:r,viewBox:d,style:h,"aria-label":"".concat(_," legend icon")},x.createElement(PK,{data:p,iconType:l,inactiveColor:s})),x.createElement("span",{className:"recharts-legend-item-text",style:{color:j}},_))})}var TK=e=>{var t=fr(e,CK),{payload:r,layout:n,align:a}=t;if(!r||!r.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?a:"left"};return x.createElement("ul",{className:"recharts-default-legend",style:s},x.createElement(kK,Bm({},t,{payload:r})))},j0={},S0={},mA;function DK(){return mA||(mA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let s=0;s<r.length;s++){const l=r[s],d=n(l,s,r);a.has(d)||a.set(d,l)}return Array.from(a.values())}e.uniqBy=t})(S0)),S0}var _0={},pA;function MK(){return pA||(pA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return function(...a){return r.apply(this,a.slice(0,n))}}e.ary=t})(_0)),_0}var N0={},gA;function sM(){return gA||(gA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(N0)),N0}var E0={},O0={},A0={},yA;function RK(){return yA||(yA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(A0)),A0}var vA;function s1(){return vA||(vA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RK();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(O0)),O0}var C0={},bA;function IK(){return bA||(bA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(C0)),C0}var xA;function LK(){return xA||(xA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s1(),r=IK();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n})(E0)),E0}var P0={},k0={},wA;function BK(){return wA||(wA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=n1();function r(n){return function(a){return t.get(a,n)}}e.property=r})(k0)),k0}var T0={},D0={},M0={},R0={},jA;function oM(){return jA||(jA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(R0)),R0}var I0={},SA;function lM(){return SA||(SA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(I0)),I0}var L0={},_A;function cM(){return _A||(_A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.isEqualsSameValueZero=t})(L0)),L0}var NA;function $K(){return NA||(NA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oM(),r=lM(),n=cM();function a(p,g,y){return typeof y!="function"?a(p,g,()=>{}):s(p,g,function v(j,_,S,N,E,O){const C=y(j,_,S,N,E,O);return C!==void 0?!!C:s(j,_,v,O)},new Map)}function s(p,g,y,v){if(g===p)return!0;switch(typeof g){case"object":return l(p,g,y,v);case"function":return Object.keys(g).length>0?s(p,{...g},y,v):n.isEqualsSameValueZero(p,g);default:return t.isObject(p)?typeof g=="string"?g==="":!0:n.isEqualsSameValueZero(p,g)}}function l(p,g,y,v){if(g==null)return!0;if(Array.isArray(g))return f(p,g,y,v);if(g instanceof Map)return d(p,g,y,v);if(g instanceof Set)return h(p,g,y,v);const j=Object.keys(g);if(p==null||r.isPrimitive(p))return j.length===0;if(j.length===0)return!0;if(v!=null&&v.has(g))return v.get(g)===p;v==null||v.set(g,p);try{for(let _=0;_<j.length;_++){const S=j[_];if(!r.isPrimitive(p)&&!(S in p)||g[S]===void 0&&p[S]!==void 0||g[S]===null&&p[S]!==null||!y(p[S],g[S],S,p,g,v))return!1}return!0}finally{v==null||v.delete(g)}}function d(p,g,y,v){if(g.size===0)return!0;if(!(p instanceof Map))return!1;for(const[j,_]of g.entries()){const S=p.get(j);if(y(S,_,j,p,g,v)===!1)return!1}return!0}function f(p,g,y,v){if(g.length===0)return!0;if(!Array.isArray(p))return!1;const j=new Set;for(let _=0;_<g.length;_++){const S=g[_];let N=!1;for(let E=0;E<p.length;E++){if(j.has(E))continue;const O=p[E];let C=!1;if(y(O,S,_,p,g,v)&&(C=!0),C){j.add(E),N=!0;break}}if(!N)return!1}return!0}function h(p,g,y,v){return g.size===0?!0:p instanceof Set?f([...p],[...g],y,v):!1}e.isMatchWith=a,e.isSetMatch=h})(M0)),M0}var EA;function uM(){return EA||(EA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$K();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r})(D0)),D0}var B0={},$0={},U0={},OA;function UK(){return OA||(OA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(U0)),U0}var z0={},AA;function o1(){return AA||(AA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(z0)),z0}var q0={},CA;function dM(){return CA||(CA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",l="[object Symbol]",d="[object Date]",f="[object Map]",h="[object Set]",p="[object Array]",g="[object Function]",y="[object ArrayBuffer]",v="[object Object]",j="[object Error]",_="[object DataView]",S="[object Uint8Array]",N="[object Uint8ClampedArray]",E="[object Uint16Array]",O="[object Uint32Array]",C="[object BigUint64Array]",D="[object Int8Array]",T="[object Int16Array]",M="[object Int32Array]",R="[object BigInt64Array]",U="[object Float32Array]",W="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=y,e.arrayTag=p,e.bigInt64ArrayTag=R,e.bigUint64ArrayTag=C,e.booleanTag=a,e.dataViewTag=_,e.dateTag=d,e.errorTag=j,e.float32ArrayTag=U,e.float64ArrayTag=W,e.functionTag=g,e.int16ArrayTag=T,e.int32ArrayTag=M,e.int8ArrayTag=D,e.mapTag=f,e.numberTag=n,e.objectTag=v,e.regexpTag=t,e.setTag=h,e.stringTag=r,e.symbolTag=l,e.uint16ArrayTag=E,e.uint32ArrayTag=O,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=N})(q0)),q0}var F0={},PA;function zK(){return PA||(PA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(F0)),F0}var kA;function fM(){return kA||(kA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UK(),r=o1(),n=dM(),a=lM(),s=zK();function l(p,g){return d(p,void 0,p,new Map,g)}function d(p,g,y,v=new Map,j=void 0){const _=j==null?void 0:j(p,g,y,v);if(_!==void 0)return _;if(a.isPrimitive(p))return p;if(v.has(p))return v.get(p);if(Array.isArray(p)){const S=new Array(p.length);v.set(p,S);for(let N=0;N<p.length;N++)S[N]=d(p[N],N,y,v,j);return Object.hasOwn(p,"index")&&(S.index=p.index),Object.hasOwn(p,"input")&&(S.input=p.input),S}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const S=new RegExp(p.source,p.flags);return S.lastIndex=p.lastIndex,S}if(p instanceof Map){const S=new Map;v.set(p,S);for(const[N,E]of p)S.set(N,d(E,N,y,v,j));return S}if(p instanceof Set){const S=new Set;v.set(p,S);for(const N of p)S.add(d(N,void 0,y,v,j));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(s.isTypedArray(p)){const S=new(Object.getPrototypeOf(p)).constructor(p.length);v.set(p,S);for(let N=0;N<p.length;N++)S[N]=d(p[N],N,y,v,j);return S}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const S=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return v.set(p,S),f(S,p,y,v,j),S}if(typeof File<"u"&&p instanceof File){const S=new File([p],p.name,{type:p.type});return v.set(p,S),f(S,p,y,v,j),S}if(typeof Blob<"u"&&p instanceof Blob){const S=new Blob([p],{type:p.type});return v.set(p,S),f(S,p,y,v,j),S}if(p instanceof Error){const S=new p.constructor;return v.set(p,S),S.message=p.message,S.name=p.name,S.stack=p.stack,S.cause=p.cause,f(S,p,y,v,j),S}if(p instanceof Boolean){const S=new Boolean(p.valueOf());return v.set(p,S),f(S,p,y,v,j),S}if(p instanceof Number){const S=new Number(p.valueOf());return v.set(p,S),f(S,p,y,v,j),S}if(p instanceof String){const S=new String(p.valueOf());return v.set(p,S),f(S,p,y,v,j),S}if(typeof p=="object"&&h(p)){const S=Object.create(Object.getPrototypeOf(p));return v.set(p,S),f(S,p,y,v,j),S}return p}function f(p,g,y=p,v,j){const _=[...Object.keys(g),...t.getSymbols(g)];for(let S=0;S<_.length;S++){const N=_[S],E=Object.getOwnPropertyDescriptor(p,N);(E==null||E.writable)&&(p[N]=d(g[N],N,y,v,j))}}function h(p){switch(r.getTag(p)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=d,e.copyProperties=f})($0)),$0}var TA;function qK(){return TA||(TA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fM();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(B0)),B0}var DA;function FK(){return DA||(DA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uM(),r=qK();function n(a){return a=r.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=n})(T0)),T0}var K0={},Q0={},H0={},MA;function KK(){return MA||(MA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fM(),r=o1(),n=dM();function a(s,l){return t.cloneDeepWith(s,(d,f,h,p)=>{const g=l==null?void 0:l(d,f,h,p);if(g!==void 0)return g;if(typeof s=="object"){if(r.getTag(s)===n.objectTag&&typeof s.constructor!="function"){const y={};return p.set(s,y),t.copyProperties(y,s,h,p),y}switch(Object.prototype.toString.call(s)){case n.numberTag:case n.stringTag:case n.booleanTag:{const y=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(y,s),y}case n.argumentsTag:{const y={};return t.copyProperties(y,s),y.length=s.length,y[Symbol.iterator]=s[Symbol.iterator],y}default:return}}})}e.cloneDeepWith=a})(H0)),H0}var RA;function QK(){return RA||(RA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KK();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(Q0)),Q0}var V0={},G0={},IA;function hM(){return IA||(IA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(G0)),G0}var Y0={},LA;function HK(){return LA||(LA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=o1();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(Y0)),Y0}var BA;function VK(){return BA||(BA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tM(),r=hM(),n=HK(),a=r1();function s(l,d){let f;if(Array.isArray(d)?f=d:typeof d=="string"&&t.isDeepKey(d)&&(l==null?void 0:l[d])==null?f=a.toPath(d):f=[d],f.length===0)return!1;let h=l;for(let p=0;p<f.length;p++){const g=f[p];if((h==null||!Object.hasOwn(h,g))&&!((Array.isArray(h)||n.isArguments(h))&&r.isIndex(g)&&g<h.length))return!1;h=h[g]}return!0}e.has=s})(V0)),V0}var $A;function GK(){return $A||($A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uM(),r=t1(),n=QK(),a=n1(),s=VK();function l(d,f){switch(typeof d){case"object":{Object.is(d==null?void 0:d.valueOf(),-0)&&(d="-0");break}case"number":{d=r.toKey(d);break}}return f=n.cloneDeep(f),function(h){const p=a.get(h,d);return p===void 0?s.has(h,d):f===void 0?p===void 0:t.isMatch(p,f)}}e.matchesProperty=l})(K0)),K0}var UA;function YK(){return UA||(UA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sM(),r=BK(),n=FK(),a=GK();function s(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?a.matchesProperty(l[0],l[1]):n.matches(l);case"string":case"symbol":case"number":return r.property(l)}}e.iteratee=s})(P0)),P0}var zA;function WK(){return zA||(zA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DK(),r=MK(),n=sM(),a=LK(),s=YK();function l(d,f=n.identity){return a.isArrayLikeObject(d)?t.uniqBy(Array.from(d),r.ary(s.iteratee(f),1)):[]}e.uniqBy=l})(j0)),j0}var W0,qA;function XK(){return qA||(qA=1,W0=WK().uniqBy),W0}var ZK=XK();const FA=Ka(ZK);function mM(e,t,r){return t===!0?FA(e,r):typeof t=="function"?FA(e,t):e}var X0={exports:{}},Z0={},J0={exports:{}},eb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KA;function JK(){if(KA)return eb;KA=1;var e=Ic();function t(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,s=e.useLayoutEffect,l=e.useDebugValue;function d(g,y){var v=y(),j=n({inst:{value:v,getSnapshot:y}}),_=j[0].inst,S=j[1];return s(function(){_.value=v,_.getSnapshot=y,f(_)&&S({inst:_})},[g,v,y]),a(function(){return f(_)&&S({inst:_}),g(function(){f(_)&&S({inst:_})})},[g]),l(v),v}function f(g){var y=g.getSnapshot;g=g.value;try{var v=y();return!r(g,v)}catch{return!0}}function h(g,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:d;return eb.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,eb}var QA;function e7(){return QA||(QA=1,J0.exports=JK()),J0.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HA;function t7(){if(HA)return Z0;HA=1;var e=Ic(),t=e7();function r(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,s=e.useRef,l=e.useEffect,d=e.useMemo,f=e.useDebugValue;return Z0.useSyncExternalStoreWithSelector=function(h,p,g,y,v){var j=s(null);if(j.current===null){var _={hasValue:!1,value:null};j.current=_}else _=j.current;j=d(function(){function N(T){if(!E){if(E=!0,O=T,T=y(T),v!==void 0&&_.hasValue){var M=_.value;if(v(M,T))return C=M}return C=T}if(M=C,n(O,T))return M;var R=y(T);return v!==void 0&&v(M,R)?(O=T,M):(O=T,C=R)}var E=!1,O,C,D=g===void 0?null:g;return[function(){return N(p())},D===null?void 0:function(){return N(D())}]},[p,g,y,v]);var S=a(h,j[0],j[1]);return l(function(){_.hasValue=!0,_.value=S},[S]),f(S),S},Z0}var VA;function r7(){return VA||(VA=1,X0.exports=t7()),X0.exports}var n7=r7(),l1=x.createContext(null),a7=e=>e,Mt=()=>{var e=x.useContext(l1);return e?e.store.dispatch:a7},xm=()=>{},i7=()=>xm,s7=(e,t)=>e===t;function ke(e){var t=x.useContext(l1),r=x.useMemo(()=>t?n=>{if(n!=null)return e(n)}:xm,[t,e]);return n7.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:i7,t?t.store.getState:xm,t?t.store.getState:xm,r,s7)}function o7(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function l7(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function c7(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var GA=e=>Array.isArray(e)?e:[e];function u7(e){const t=Array.isArray(e[0])?e[0]:e;return c7(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function d7(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var f7=class{constructor(e){this.value=e}deref(){return this.value}},h7=typeof WeakRef<"u"?WeakRef:f7,m7=0,YA=1;function tm(){return{s:m7,v:void 0,o:null,p:null}}function pM(e,t={}){let r=tm();const{resultEqualityCheck:n}=t;let a,s=0;function l(){var g;let d=r;const{length:f}=arguments;for(let y=0,v=f;y<v;y++){const j=arguments[y];if(typeof j=="function"||typeof j=="object"&&j!==null){let _=d.o;_===null&&(d.o=_=new WeakMap);const S=_.get(j);S===void 0?(d=tm(),_.set(j,d)):d=S}else{let _=d.p;_===null&&(d.p=_=new Map);const S=_.get(j);S===void 0?(d=tm(),_.set(j,d)):d=S}}const h=d;let p;if(d.s===YA)p=d.v;else if(p=e.apply(null,arguments),s++,n){const y=((g=a==null?void 0:a.deref)==null?void 0:g.call(a))??a;y!=null&&n(y,p)&&(p=y,s!==0&&s--),a=typeof p=="object"&&p!==null||typeof p=="function"?new h7(p):p}return h.s=YA,h.v=p,p}return l.clearCache=()=>{r=tm(),l.resetResultsCount()},l.resultsCount=()=>s,l.resetResultsCount=()=>{s=0},l}function p7(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let s=0,l=0,d,f={},h=a.pop();typeof h=="object"&&(f=h,h=a.pop()),o7(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const p={...r,...f},{memoize:g,memoizeOptions:y=[],argsMemoize:v=pM,argsMemoizeOptions:j=[]}=p,_=GA(y),S=GA(j),N=u7(a),E=g(function(){return s++,h.apply(null,arguments)},..._),O=v(function(){l++;const D=d7(N,arguments);return d=E.apply(null,D),d},...S);return Object.assign(O,{resultFunc:h,memoizedResultFunc:E,dependencies:N,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>d,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:g,argsMemoize:v})};return Object.assign(n,{withTypes:()=>n}),n}var X=p7(pM),g7=Object.assign((e,t=X)=>{l7(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((l,d,f)=>(l[r[f]]=d,l),{}))},{withTypes:()=>g7}),tb={},rb={},nb={},WA;function y7(){return WA||(WA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const l=t(n),d=t(a);if(l===d&&l===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?d-l:l-d}return 0};e.compareValues=r})(nb)),nb}var ab={},ib={},XA;function gM(){return XA||(XA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(ib)),ib}var ZA;function v7(){return ZA||(ZA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gM(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,l){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||l!=null&&Object.hasOwn(l,s)}e.isKey=a})(ab)),ab}var JA;function b7(){return JA||(JA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=y7(),r=v7(),n=r1();function a(s,l,d,f){if(s==null)return[];d=f?void 0:d,Array.isArray(s)||(s=Object.values(s)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(d)||(d=d==null?[]:[d]),d=d.map(v=>String(v));const h=(v,j)=>{let _=v;for(let S=0;S<j.length&&_!=null;++S)_=_[j[S]];return _},p=(v,j)=>j==null||v==null?j:typeof v=="object"&&"key"in v?Object.hasOwn(j,v.key)?j[v.key]:h(j,v.path):typeof v=="function"?v(j):Array.isArray(v)?h(j,v):typeof j=="object"?j[v]:j,g=l.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||r.isKey(v)?v:{key:v,path:n.toPath(v)}));return s.map(v=>({original:v,criteria:g.map(j=>p(j,v))})).slice().sort((v,j)=>{for(let _=0;_<g.length;_++){const S=t.compareValues(v.criteria[_],j.criteria[_],d[_]);if(S!==0)return S}return 0}).map(v=>v.original)}e.orderBy=a})(rb)),rb}var sb={},eC;function x7(){return eC||(eC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],s=Math.floor(n),l=(d,f)=>{for(let h=0;h<d.length;h++){const p=d[h];Array.isArray(p)&&f<s?l(p,f+1):a.push(p)}};return l(r,0),a}e.flatten=t})(sb)),sb}var ob={},tC;function yM(){return tC||(tC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hM(),r=s1(),n=oM(),a=cM();function s(l,d,f){return n.isObject(f)&&(typeof d=="number"&&r.isArrayLike(f)&&t.isIndex(d)&&d<f.length||typeof d=="string"&&d in f)?a.isEqualsSameValueZero(f[d],l):!1}e.isIterateeCall=s})(ob)),ob}var rC;function w7(){return rC||(rC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=b7(),r=x7(),n=yM();function a(s,...l){const d=l.length;return d>1&&n.isIterateeCall(s,l[0],l[1])?l=[]:d>2&&n.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(s,r.flatten(l),["asc"])}e.sortBy=a})(tb)),tb}var lb,nC;function j7(){return nC||(nC=1,lb=w7().sortBy),lb}var S7=j7();const Vp=Ka(S7);var vM=e=>e.legend.settings,_7=e=>e.legend.size,N7=e=>e.legend.payload,E7=X([N7,vM],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Vp(n,r):n});function O7(){return ke(E7)}var rm=1;function bM(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=x.useState({height:0,left:0,top:0,width:0}),n=x.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),l={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(l.height-t.height)>rm||Math.abs(l.left-t.left)>rm||Math.abs(l.top-t.top)>rm||Math.abs(l.width-t.width)>rm)&&r({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function qr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var A7=typeof Symbol=="function"&&Symbol.observable||"@@observable",aC=A7,cb=()=>Math.random().toString(36).substring(7).split("").join("."),C7={INIT:`@@redux/INIT${cb()}`,REPLACE:`@@redux/REPLACE${cb()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${cb()}`},$m=C7;function c1(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function xM(e,t,r){if(typeof e!="function")throw new Error(qr(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(qr(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(qr(1));return r(xM)(e,t)}let n=e,a=t,s=new Map,l=s,d=0,f=!1;function h(){l===s&&(l=new Map,s.forEach((S,N)=>{l.set(N,S)}))}function p(){if(f)throw new Error(qr(3));return a}function g(S){if(typeof S!="function")throw new Error(qr(4));if(f)throw new Error(qr(5));let N=!0;h();const E=d++;return l.set(E,S),function(){if(N){if(f)throw new Error(qr(6));N=!1,h(),l.delete(E),s=null}}}function y(S){if(!c1(S))throw new Error(qr(7));if(typeof S.type>"u")throw new Error(qr(8));if(typeof S.type!="string")throw new Error(qr(17));if(f)throw new Error(qr(9));try{f=!0,a=n(a,S)}finally{f=!1}return(s=l).forEach(E=>{E()}),S}function v(S){if(typeof S!="function")throw new Error(qr(10));n=S,y({type:$m.REPLACE})}function j(){const S=g;return{subscribe(N){if(typeof N!="object"||N===null)throw new Error(qr(11));function E(){const C=N;C.next&&C.next(p())}return E(),{unsubscribe:S(E)}},[aC](){return this}}}return y({type:$m.INIT}),{dispatch:y,subscribe:g,getState:p,replaceReducer:v,[aC]:j}}function P7(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:$m.INIT})>"u")throw new Error(qr(12));if(typeof r(void 0,{type:$m.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(qr(13))})}function wM(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const l=t[s];typeof e[l]=="function"&&(r[l]=e[l])}const n=Object.keys(r);let a;try{P7(r)}catch(s){a=s}return function(l={},d){if(a)throw a;let f=!1;const h={};for(let p=0;p<n.length;p++){const g=n[p],y=r[g],v=l[g],j=y(v,d);if(typeof j>"u")throw d&&d.type,new Error(qr(14));h[g]=j,f=f||j!==v}return f=f||n.length!==Object.keys(l).length,f?h:l}}function Um(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function k7(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(qr(15))};const l={getState:a.getState,dispatch:(f,...h)=>s(f,...h)},d=e.map(f=>f(l));return s=Um(...d)(a.dispatch),{...a,dispatch:s}}}function jM(e){return c1(e)&&"type"in e&&typeof e.type=="string"}var SM=Symbol.for("immer-nothing"),iC=Symbol.for("immer-draftable"),an=Symbol.for("immer-state");function ga(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Tn=Object,Cc=Tn.getPrototypeOf,zm="constructor",Gp="prototype",Ax="configurable",qm="enumerable",wm="writable",Sd="value",Ei=e=>!!e&&!!e[an];function xa(e){var t;return e?_M(e)||Wp(e)||!!e[iC]||!!((t=e[zm])!=null&&t[iC])||Xp(e)||Zp(e):!1}var T7=Tn[Gp][zm].toString(),sC=new WeakMap;function _M(e){if(!e||!u1(e))return!1;const t=Cc(e);if(t===null||t===Tn[Gp])return!0;const r=Tn.hasOwnProperty.call(t,zm)&&t[zm];if(r===Object)return!0;if(!ac(r))return!1;let n=sC.get(r);return n===void 0&&(n=Function.toString.call(r),sC.set(r,n)),n===T7}function Yp(e,t,r=!0){lf(e)===0?(r?Reflect.ownKeys(e):Tn.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function lf(e){const t=e[an];return t?t.type_:Wp(e)?1:Xp(e)?2:Zp(e)?3:0}var oC=(e,t,r=lf(e))=>r===2?e.has(t):Tn[Gp].hasOwnProperty.call(e,t),Cx=(e,t,r=lf(e))=>r===2?e.get(t):e[t],Fm=(e,t,r,n=lf(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function D7(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Wp=Array.isArray,Xp=e=>e instanceof Map,Zp=e=>e instanceof Set,u1=e=>typeof e=="object",ac=e=>typeof e=="function",ub=e=>typeof e=="boolean";function M7(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var fi=e=>e.copy_||e.base_,d1=e=>e.modified_?e.copy_:e.base_;function Px(e,t){if(Xp(e))return new Map(e);if(Zp(e))return new Set(e);if(Wp(e))return Array[Gp].slice.call(e);const r=_M(e);if(t===!0||t==="class_only"&&!r){const n=Tn.getOwnPropertyDescriptors(e);delete n[an];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const l=a[s],d=n[l];d[wm]===!1&&(d[wm]=!0,d[Ax]=!0),(d.get||d.set)&&(n[l]={[Ax]:!0,[wm]:!0,[qm]:d[qm],[Sd]:e[l]})}return Tn.create(Cc(e),n)}else{const n=Cc(e);if(n!==null&&r)return{...e};const a=Tn.create(n);return Tn.assign(a,e)}}function f1(e,t=!1){return Jp(e)||Ei(e)||!xa(e)||(lf(e)>1&&Tn.defineProperties(e,{set:nm,add:nm,clear:nm,delete:nm}),Tn.freeze(e),t&&Yp(e,(r,n)=>{f1(n,!0)},!1)),e}function R7(){ga(2)}var nm={[Sd]:R7};function Jp(e){return e===null||!u1(e)?!0:Tn.isFrozen(e)}var Km="MapSet",kx="Patches",lC="ArrayMethods",NM={};function Qo(e){const t=NM[e];return t||ga(0,e),t}var cC=e=>!!NM[e],_d,EM=()=>_d,I7=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:cC(Km)?Qo(Km):void 0,arrayMethodsPlugin_:cC(lC)?Qo(lC):void 0});function uC(e,t){t&&(e.patchPlugin_=Qo(kx),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Tx(e){Dx(e),e.drafts_.forEach(L7),e.drafts_=null}function Dx(e){e===_d&&(_d=e.parent_)}var dC=e=>_d=I7(_d,e);function L7(e){const t=e[an];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function fC(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[an].modified_&&(Tx(t),ga(4)),xa(e)&&(e=hC(t,e));const{patchPlugin_:a}=t;a&&a.generateReplacementPatches_(r[an].base_,e,t)}else e=hC(t,r);return B7(t,e,!0),Tx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==SM?e:void 0}function hC(e,t){if(Jp(t))return t;const r=t[an];if(!r)return Qm(t,e.handledSet_,e);if(!eg(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);CM(r,e)}return r.copy_}function B7(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&f1(t,r)}function OM(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var eg=(e,t)=>e.scope_===t,$7=[];function AM(e,t,r,n){const a=fi(e),s=e.type_;if(n!==void 0&&Cx(a,n,s)===t){Fm(a,n,r,s);return}if(!e.draftLocations_){const d=e.draftLocations_=new Map;Yp(a,(f,h)=>{if(Ei(h)){const p=d.get(h)||[];p.push(f),d.set(h,p)}})}const l=e.draftLocations_.get(t)??$7;for(const d of l)Fm(a,d,r,s)}function U7(e,t,r){e.callbacks_.push(function(a){var d;const s=t;if(!s||!eg(s,a))return;(d=a.mapSetPlugin_)==null||d.fixSetContents(s);const l=d1(s);AM(e,s.draft_??s,l,r),CM(s,a)})}function CM(e,t){var n;if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(((n=e.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:a}=t;if(a){const s=a.getPath(e);s&&a.generatePatches_(e,s,t)}OM(e)}}function z7(e,t,r){const{scope_:n}=e;if(Ei(r)){const a=r[an];eg(a,n)&&a.callbacks_.push(function(){jm(e);const l=d1(a);AM(e,r,l,t)})}else xa(r)&&e.callbacks_.push(function(){const s=fi(e);e.type_===3?s.has(r)&&Qm(r,n.handledSet_,n):Cx(s,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Qm(Cx(e.copy_,t,e.type_),n.handledSet_,n)})}function Qm(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||Ei(e)||t.has(e)||!xa(e)||Jp(e)||(t.add(e),Yp(e,(n,a)=>{if(Ei(a)){const s=a[an];if(eg(s,r)){const l=d1(s);Fm(e,n,l,e.type_),OM(s)}}else xa(a)&&Qm(a,t,r)})),e}function q7(e,t){const r=Wp(e),n={type_:r?1:0,scope_:t?t.scope_:EM(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,s=Hm;r&&(a=[n],s=Nd);const{revoke:l,proxy:d}=Proxy.revocable(a,s);return n.draft_=d,n.revoke_=l,[d,n]}var Hm={get(e,t){if(t===an)return e;let r=e.scope_.arrayMethodsPlugin_;const n=e.type_===1&&typeof t=="string";if(n&&r!=null&&r.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);const a=fi(e);if(!oC(a,t,e.type_))return F7(e,a,t);const s=a[t];if(e.finalized_||!xa(s)||n&&e.operationMethod&&(r!=null&&r.isMutatingArrayMethod(e.operationMethod))&&M7(t))return s;if(s===db(e.base_,t)){jm(e);const l=e.type_===1?+t:t,d=Rx(e.scope_,s,e,l);return e.copy_[l]=d}return s},has(e,t){return t in fi(e)},ownKeys(e){return Reflect.ownKeys(fi(e))},set(e,t,r){const n=PM(fi(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=db(fi(e),t),s=a==null?void 0:a[an];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(D7(r,a)&&(r!==void 0||oC(e.base_,t,e.type_)))return!0;jm(e),Mx(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),z7(e,t,r)),!0},deleteProperty(e,t){return jm(e),db(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Mx(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=fi(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[wm]:!0,[Ax]:e.type_!==1||t!=="length",[qm]:n[qm],[Sd]:r[t]}},defineProperty(){ga(11)},getPrototypeOf(e){return Cc(e.base_)},setPrototypeOf(){ga(12)}},Nd={};for(let e in Hm){let t=Hm[e];Nd[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}}Nd.deleteProperty=function(e,t){return Nd.set.call(this,e,t,void 0)};Nd.set=function(e,t,r){return Hm.set.call(this,e[0],t,r,e[0])};function db(e,t){const r=e[an];return(r?fi(r):e)[t]}function F7(e,t,r){var a;const n=PM(t,r);return n?Sd in n?n[Sd]:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function PM(e,t){if(!(t in e))return;let r=Cc(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Cc(r)}}function Mx(e){e.modified_||(e.modified_=!0,e.parent_&&Mx(e.parent_))}function jm(e){e.copy_||(e.assigned_=new Map,e.copy_=Px(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var K7=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,a)=>{if(ac(r)&&!ac(n)){const l=n;n=r;const d=this;return function(h=l,...p){return d.produce(h,g=>n.call(this,g,...p))}}ac(n)||ga(6),a!==void 0&&!ac(a)&&ga(7);let s;if(xa(r)){const l=dC(this),d=Rx(l,r,void 0);let f=!0;try{s=n(d),f=!1}finally{f?Tx(l):Dx(l)}return uC(l,a),fC(s,l)}else if(!r||!u1(r)){if(s=n(r),s===void 0&&(s=r),s===SM&&(s=void 0),this.autoFreeze_&&f1(s,!0),a){const l=[],d=[];Qo(kx).generateReplacementPatches_(r,s,{patches_:l,inversePatches_:d}),a(l,d)}return s}else ga(1,r)},this.produceWithPatches=(r,n)=>{if(ac(r))return(d,...f)=>this.produceWithPatches(d,h=>r(h,...f));let a,s;return[this.produce(r,n,(d,f)=>{a=d,s=f}),a,s]},ub(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),ub(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),ub(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){xa(t)||ga(8),Ei(t)&&(t=ba(t));const r=dC(this),n=Rx(r,t,void 0);return n[an].isManual_=!0,Dx(r),n}finishDraft(t,r){const n=t&&t[an];(!n||!n.isManual_)&&ga(9);const{scope_:a}=n;return uC(a,r),fC(void 0,a)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(r=r.slice(n+1));const a=Qo(kx).applyPatches_;return Ei(t)?a(t,r):this.produce(t,s=>a(s,r))}};function Rx(e,t,r,n){const[a,s]=Xp(t)?Qo(Km).proxyMap_(t,r):Zp(t)?Qo(Km).proxySet_(t,r):q7(t,r);return((r==null?void 0:r.scope_)??EM()).drafts_.push(a),s.callbacks_=(r==null?void 0:r.callbacks_)??[],s.key_=n,r&&n!==void 0?U7(r,s,n):s.callbacks_.push(function(f){var p;(p=f.mapSetPlugin_)==null||p.fixSetContents(s);const{patchPlugin_:h}=f;s.modified_&&h&&h.generatePatches_(s,[],f)}),a}function ba(e){return Ei(e)||ga(10,e),kM(e)}function kM(e){if(!xa(e)||Jp(e))return e;const t=e[an];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Px(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Px(e,!0);return Yp(r,(a,s)=>{Fm(r,a,kM(s))},n),t&&(t.finalized_=!1),r}var Q7=new K7,TM=Q7.produce;function DM(e){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,e):a(s)}var H7=DM(),V7=DM,G7=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Um:Um.apply(null,arguments)};function na(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(Dn(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>jM(n)&&n.type===e,r}var MM=class od extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,od.prototype)}static get[Symbol.species](){return od}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new od(...t[0].concat(this)):new od(...t.concat(this))}};function mC(e){return xa(e)?TM(e,()=>{}):e}function am(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Y7(e){return typeof e=="boolean"}var W7=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let l=new MM;return r&&(Y7(r)?l.push(H7):l.push(V7(r.extraArgument))),l},RM="RTK_autoBatch",zt=()=>e=>({payload:e,meta:{[RM]:!0}}),pC=e=>t=>{setTimeout(t,e)},IM=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,l=!1;const d=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:pC(10):e.type==="callback"?e.queueNotification:pC(e.timeout),h=()=>{l=!1,s&&(s=!1,d.forEach(p=>p()))};return Object.assign({},n,{subscribe(p){const g=()=>a&&p(),y=n.subscribe(g);return d.add(p),()=>{y(),d.delete(p)}},dispatch(p){var g;try{return a=!((g=p==null?void 0:p.meta)!=null&&g[RM]),s=!a,s&&(l||(l=!0,f(h))),n.dispatch(p)}finally{a=!0}}})},X7=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new MM(e);return n&&a.push(IM(typeof n=="object"?n:void 0)),a};function Z7(e){const t=W7(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:l=void 0}=e||{};let d;if(typeof r=="function")d=r;else if(c1(r))d=wM(r);else throw new Error(Dn(1));let f;typeof n=="function"?f=n(t):f=t();let h=Um;a&&(h=G7({trace:!1,...typeof a=="object"&&a}));const p=k7(...f),g=X7(p);let y=typeof l=="function"?l(g):g();const v=h(...y);return xM(d,s,v)}function LM(e){const t={},r=[];let n;const a={addCase(s,l){const d=typeof s=="string"?s:s.type;if(!d)throw new Error(Dn(28));if(d in t)throw new Error(Dn(29));return t[d]=l,a},addAsyncThunk(s,l){return l.pending&&(t[s.pending.type]=l.pending),l.rejected&&(t[s.rejected.type]=l.rejected),l.fulfilled&&(t[s.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:s.settled,reducer:l.settled}),a},addMatcher(s,l){return r.push({matcher:s,reducer:l}),a},addDefaultCase(s){return n=s,a}};return e(a),[t,r,n]}function J7(e){return typeof e=="function"}function eQ(e,t){let[r,n,a]=LM(t),s;if(J7(e))s=()=>mC(e());else{const d=mC(e);s=()=>d}function l(d=s(),f){let h=[r[f.type],...n.filter(({matcher:p})=>p(f)).map(({reducer:p})=>p)];return h.filter(p=>!!p).length===0&&(h=[a]),h.reduce((p,g)=>{if(g)if(Ei(p)){const v=g(p,f);return v===void 0?p:v}else{if(xa(p))return TM(p,y=>g(y,f));{const y=g(p,f);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return p},d)}return l.getInitialState=s,l}var tQ="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",rQ=(e=21)=>{let t="",r=e;for(;r--;)t+=tQ[Math.random()*64|0];return t},nQ=Symbol.for("rtk-slice-createasyncthunk");function aQ(e,t){return`${e}/${t}`}function iQ({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[nQ];return function(a){const{name:s,reducerPath:l=s}=a;if(!s)throw new Error(Dn(11));const d=(typeof a.reducers=="function"?a.reducers(oQ()):a.reducers)||{},f=Object.keys(d),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(C,D){const T=typeof C=="string"?C:C.type;if(!T)throw new Error(Dn(12));if(T in h.sliceCaseReducersByType)throw new Error(Dn(13));return h.sliceCaseReducersByType[T]=D,p},addMatcher(C,D){return h.sliceMatchers.push({matcher:C,reducer:D}),p},exposeAction(C,D){return h.actionCreators[C]=D,p},exposeCaseReducer(C,D){return h.sliceCaseReducersByName[C]=D,p}};f.forEach(C=>{const D=d[C],T={reducerName:C,type:aQ(s,C),createNotation:typeof a.reducers=="function"};cQ(D)?dQ(T,D,p,t):lQ(T,D,p)});function g(){const[C={},D=[],T=void 0]=typeof a.extraReducers=="function"?LM(a.extraReducers):[a.extraReducers],M={...C,...h.sliceCaseReducersByType};return eQ(a.initialState,R=>{for(let U in M)R.addCase(U,M[U]);for(let U of h.sliceMatchers)R.addMatcher(U.matcher,U.reducer);for(let U of D)R.addMatcher(U.matcher,U.reducer);T&&R.addDefaultCase(T)})}const y=C=>C,v=new Map,j=new WeakMap;let _;function S(C,D){return _||(_=g()),_(C,D)}function N(){return _||(_=g()),_.getInitialState()}function E(C,D=!1){function T(R){let U=R[C];return typeof U>"u"&&D&&(U=am(j,T,N)),U}function M(R=y){const U=am(v,D,()=>new WeakMap);return am(U,R,()=>{const W={};for(const[F,z]of Object.entries(a.selectors??{}))W[F]=sQ(z,R,()=>am(j,R,N),D);return W})}return{reducerPath:C,getSelectors:M,get selectors(){return M(T)},selectSlice:T}}const O={name:s,reducer:S,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:N,...E(l),injectInto(C,{reducerPath:D,...T}={}){const M=D??l;return C.inject({reducerPath:M,reducer:S},T),{...O,...E(M,!0)}}};return O}}function sQ(e,t,r,n){function a(s,...l){let d=t(s);return typeof d>"u"&&n&&(d=r()),e(d,...l)}return a.unwrapped=e,a}var vn=iQ();function oQ(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function lQ({type:e,reducerName:t,createNotation:r},n,a){let s,l;if("reducer"in n){if(r&&!uQ(n))throw new Error(Dn(17));s=n.reducer,l=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,l?na(e,l):na(e))}function cQ(e){return e._reducerDefinitionType==="asyncThunk"}function uQ(e){return e._reducerDefinitionType==="reducerWithPrepare"}function dQ({type:e,reducerName:t},r,n,a){if(!a)throw new Error(Dn(18));const{payloadCreator:s,fulfilled:l,pending:d,rejected:f,settled:h,options:p}=r,g=a(e,s,p);n.exposeAction(t,g),l&&n.addCase(g.fulfilled,l),d&&n.addCase(g.pending,d),f&&n.addCase(g.rejected,f),h&&n.addMatcher(g.settled,h),n.exposeCaseReducer(t,{fulfilled:l||im,pending:d||im,rejected:f||im,settled:h||im})}function im(){}var fQ="task",BM="listener",$M="completed",h1="cancelled",hQ=`task-${h1}`,mQ=`task-${$M}`,Ix=`${BM}-${h1}`,pQ=`${BM}-${$M}`,tg=class{constructor(e){Gv(this,"name","TaskAbortError");Gv(this,"message");this.code=e,this.message=`${fQ} ${h1} (reason: ${e})`}},m1=(e,t)=>{if(typeof e!="function")throw new TypeError(Dn(32))},Vm=()=>{},UM=(e,t=Vm)=>(e.catch(t),e),zM=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Ro=e=>{if(e.aborted)throw new tg(e.reason)};function qM(e,t){let r=Vm;return new Promise((n,a)=>{const s=()=>a(new tg(e.reason));if(e.aborted){s();return}r=zM(e,s),t.finally(()=>r()).then(n,a)}).finally(()=>{r=Vm})}var gQ=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof tg?"cancelled":"rejected",error:r}}finally{t==null||t()}},Gm=e=>t=>UM(qM(e,t).then(r=>(Ro(e),r))),FM=e=>{const t=Gm(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:cc}=Object,gC={},rg="listenerMiddleware",yQ=(e,t)=>{const r=n=>zM(e,()=>n.abort(e.reason));return(n,a)=>{m1(n);const s=new AbortController;r(s);const l=gQ(async()=>{Ro(e),Ro(s.signal);const d=await n({pause:Gm(s.signal),delay:FM(s.signal),signal:s.signal});return Ro(s.signal),d},()=>s.abort(mQ));return a!=null&&a.autoJoin&&t.push(l.catch(Vm)),{result:Gm(e)(l),cancel(){s.abort(hQ)}}}},vQ=(e,t)=>{const r=async(n,a)=>{Ro(t);let s=()=>{};const d=[new Promise((f,h)=>{let p=e({predicate:n,effect:(g,y)=>{y.unsubscribe(),f([g,y.getState(),y.getOriginalState()])}});s=()=>{p(),h()}})];a!=null&&d.push(new Promise(f=>setTimeout(f,a,null)));try{const f=await qM(t,Promise.race(d));return Ro(t),f}finally{s()}};return(n,a)=>UM(r(n,a))},KM=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=na(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Dn(21));return m1(s),{predicate:a,type:t,effect:s}},QM=cc(e=>{const{type:t,predicate:r,effect:n}=KM(e);return{id:rQ(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Dn(22))}}},{withTypes:()=>QM}),yC=(e,t)=>{const{type:r,effect:n,predicate:a}=KM(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},Lx=e=>{e.pending.forEach(t=>{t.abort(Ix)})},bQ=(e,t)=>()=>{for(const r of t.keys())Lx(r);e.clear()},vC=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},HM=cc(na(`${rg}/add`),{withTypes:()=>HM}),xQ=na(`${rg}/removeAll`),VM=cc(na(`${rg}/remove`),{withTypes:()=>VM}),wQ=(...e)=>{console.error(`${rg}/error`,...e)},cf=(e={})=>{const t=new Map,r=new Map,n=v=>{const j=r.get(v)??0;r.set(v,j+1)},a=v=>{const j=r.get(v)??1;j===1?r.delete(v):r.set(v,j-1)},{extra:s,onError:l=wQ}=e;m1(l);const d=v=>(v.unsubscribe=()=>t.delete(v.id),t.set(v.id,v),j=>{v.unsubscribe(),j!=null&&j.cancelActive&&Lx(v)}),f=v=>{const j=yC(t,v)??QM(v);return d(j)};cc(f,{withTypes:()=>f});const h=v=>{const j=yC(t,v);return j&&(j.unsubscribe(),v.cancelActive&&Lx(j)),!!j};cc(h,{withTypes:()=>h});const p=async(v,j,_,S)=>{const N=new AbortController,E=vQ(f,N.signal),O=[];try{v.pending.add(N),n(v),await Promise.resolve(v.effect(j,cc({},_,{getOriginalState:S,condition:(C,D)=>E(C,D).then(Boolean),take:E,delay:FM(N.signal),pause:Gm(N.signal),extra:s,signal:N.signal,fork:yQ(N.signal,O),unsubscribe:v.unsubscribe,subscribe:()=>{t.set(v.id,v)},cancelActiveListeners:()=>{v.pending.forEach((C,D,T)=>{C!==N&&(C.abort(Ix),T.delete(C))})},cancel:()=>{N.abort(Ix),v.pending.delete(N)},throwIfCancelled:()=>{Ro(N.signal)}})))}catch(C){C instanceof tg||vC(l,C,{raisedBy:"effect"})}finally{await Promise.all(O),N.abort(pQ),a(v),v.pending.delete(N)}},g=bQ(t,r);return{middleware:v=>j=>_=>{if(!jM(_))return j(_);if(HM.match(_))return f(_.payload);if(xQ.match(_)){g();return}if(VM.match(_))return h(_.payload);let S=v.getState();const N=()=>{if(S===gC)throw new Error(Dn(23));return S};let E;try{if(E=j(_),t.size>0){const O=v.getState(),C=Array.from(t.values());for(const D of C){let T=!1;try{T=D.predicate(_,O,S)}catch(M){T=!1,vC(l,M,{raisedBy:"predicate"})}T&&p(D,_,v,N)}}}finally{S=gC}return E},startListening:f,stopListening:h,clearListeners:g}};function Dn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var jQ={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},GM=vn({name:"chartLayout",initialState:jQ,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,a,s;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(a=t.payload.bottom)!==null&&a!==void 0?a:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:SQ,setLayout:_Q,setChartSize:NQ,setScale:EQ}=GM.actions,OQ=GM.reducer;function YM(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function st(e){return Number.isFinite(e)}function qa(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function bC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bC(Object(r),!0).forEach(function(n){AQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AQ(e,t,r){return(t=CQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CQ(e){var t=PQ(e,"string");return typeof t=="symbol"?t:t+""}function PQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ct(e,t,r){return Ht(e)||Ht(t)?r:za(t)?Fo(e,t,r):typeof t=="function"?t(e):r}var kQ=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:l,layout:d}=t;if((d==="vertical"||d==="horizontal"&&l==="middle")&&s!=="center"&&Oe(e[s]))return sc(sc({},e),{},{[s]:e[s]+(n||0)});if((d==="horizontal"||d==="vertical"&&s==="center")&&l!=="middle"&&Oe(e[l]))return sc(sc({},e),{},{[l]:e[l]+(a||0)})}return e},Ii=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",WM=(e,t,r,n)=>{if(n)return e.map(d=>d.coordinate);var a,s,l=e.map(d=>(d.coordinate===t&&(a=!0),d.coordinate===r&&(s=!0),d.coordinate));return a||l.push(t),s||l.push(r),l},XM=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:l,realScaleType:d,isCategorical:f,categoricalDomain:h,tickCount:p,ticks:g,niceTicks:y,axisType:v}=e;if(!l)return null;var j=d==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,_=a==="category"&&l.bandwidth?l.bandwidth()/j:0;if(_=v==="angleAxis"&&s&&s.length>=2?Pr(s[0]-s[1])*2*_:_,g||y){var S=(g||y||[]).map((N,E)=>{var O=n?n.indexOf(N):N,C=l.map(O);return st(C)?{coordinate:C+_,value:N,offset:_,index:E}:null}).filter(gn);return S}return f&&h?h.map((N,E)=>{var O=l.map(N);return st(O)?{coordinate:O+_,value:N,index:E,offset:_}:null}).filter(gn):l.ticks&&p!=null?l.ticks(p).map((N,E)=>{var O=l.map(N);return st(O)?{coordinate:O+_,value:N,index:E,offset:_}:null}).filter(gn):l.domain().map((N,E)=>{var O=l.map(N);return st(O)?{coordinate:O+_,value:n?n[N]:N,index:E,offset:_}:null}).filter(gn)},TQ=(e,t)=>{if(!t||t.length!==2||!Oe(t[0])||!Oe(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!Oe(e[0])||e[0]<r)&&(a[0]=r),(!Oe(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},DQ=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,l=0,d=0;d<r;++d){var f=e[d],h=f==null?void 0:f[a];if(h!=null){var p=h[1],g=h[0],y=Ua(p)?g:p;y>=0?(h[0]=s,s+=y,h[1]=s):(h[0]=l,l+=y,h[1]=l)}}}},MQ=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,l=0;l<r;++l){var d=e[l],f=d==null?void 0:d[a];if(f!=null){var h=Ua(f[1])?f[0]:f[1];h>=0?(f[0]=s,s+=h,f[1]=s):(f[0]=0,f[1]=0)}}}},RQ={sign:DQ,expand:tK,none:qo,silhouette:rK,wiggle:nK,positive:MQ},IQ=(e,t,r)=>{var n,a=(n=RQ[r])!==null&&n!==void 0?n:qo,s=eK().keys(t).value((d,f)=>Number(Ct(d,f,0))).order(Ex).offset(a),l=s(e);return l.forEach((d,f)=>{d.forEach((h,p)=>{var g=Ct(e[p],t[f],0);Array.isArray(g)&&g.length===2&&Oe(g[0])&&Oe(g[1])&&(h[0]=g[0],h[1]=g[1])})}),l};function LQ(e){return e==null?void 0:String(e)}function xC(e){var{axis:t,ticks:r,bandSize:n,entry:a,index:s,dataKey:l}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Ht(a[t.dataKey])){var d=nM(r,"value",a[t.dataKey]);if(d)return d.coordinate+n/2}return r!=null&&r[s]?r[s].coordinate+n/2:null}var f=Ct(a,Ht(l)?t.dataKey:l),h=t.scale.map(f);return Oe(h)?h:null}var wC=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:l}=e;if(t.type==="category")return r[l]?r[l].coordinate+n:null;var d=Ct(s,t.dataKey,t.scale.domain()[l]);if(Ht(d))return null;var f=t.scale.map(d);return Oe(f)?f-a/2+n:null},BQ=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},$Q=e=>{var t=e.flat(2).filter(Oe);return[Math.min(...t),Math.max(...t)]},UQ=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],zQ=(e,t,r)=>{if(e!=null)return UQ(Object.keys(e).reduce((n,a)=>{var s=e[a];if(!s)return n;var{stackedData:l}=s,d=l.reduce((f,h)=>{var p=YM(h,t,r),g=$Q(p);return!st(g[0])||!st(g[1])?f:[Math.min(f[0],g[0]),Math.max(f[1],g[1])]},[1/0,-1/0]);return[Math.min(d[0],n[0]),Math.max(d[1],n[1])]},[1/0,-1/0]))},jC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,SC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Pc=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=Vp(t,p=>p.coordinate),s=1/0,l=1,d=a.length;l<d;l++){var f=a[l],h=a[l-1];s=Math.min(((f==null?void 0:f.coordinate)||0)-((h==null?void 0:h.coordinate)||0),s)}return s===1/0?0:s}return r?void 0:0};function _C(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return sc(sc({},t),{},{dataKey:r,payload:n,value:a,name:s})}function Kc(e,t){if(e)return String(e);if(typeof t=="string")return t}var qQ=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},FQ=(e,t)=>t==="centric"?e.angle:e.radius,Li=e=>e.layout.width,Bi=e=>e.layout.height,KQ=e=>e.layout.scale,ZM=e=>e.layout.margin,ng=X(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),ag=X(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),JM="data-recharts-item-index",eR="data-recharts-item-id",uf=60;function NC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NC(Object(r),!0).forEach(function(n){QQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QQ(e,t,r){return(t=HQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HQ(e){var t=VQ(e,"string");return typeof t=="symbol"?t:t+""}function VQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GQ=e=>e.brush.height;function YQ(e){var t=ag(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:uf;return r+a}return r},0)}function WQ(e){var t=ag(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:uf;return r+a}return r},0)}function XQ(e){var t=ng(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function ZQ(e){var t=ng(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var xr=X([Li,Bi,ZM,GQ,YQ,WQ,XQ,ZQ,vM,_7],(e,t,r,n,a,s,l,d,f,h)=>{var p={left:(r.left||0)+a,right:(r.right||0)+s},g={top:(r.top||0)+l,bottom:(r.bottom||0)+d},y=sm(sm({},g),p),v=y.bottom;y.bottom+=n,y=kQ(y,f,h);var j=e-y.left-y.right,_=t-y.top-y.bottom;return sm(sm({brushBottom:v},y),{},{width:Math.max(j,0),height:Math.max(_,0)})}),JQ=X(xr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),p1=X(Li,Bi,(e,t)=>({x:0,y:0,width:e,height:t})),eH=x.createContext(null),Xr=()=>x.useContext(eH)!=null,ig=e=>e.brush,sg=X([ig,xr,ZM],(e,t,r)=>({height:e.height,x:Oe(e.x)?e.x:t.left,y:Oe(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Oe(e.width)?e.width:t.width})),fb={},hb={},mb={},EC;function tH(){return EC||(EC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:s}={}){let l,d=null;const f=s!=null&&s.includes("leading"),h=s==null||s.includes("trailing"),p=()=>{d!==null&&(r.apply(l,d),l=void 0,d=null)},g=()=>{h&&p(),_()};let y=null;const v=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,g()},n)},j=()=>{y!==null&&(clearTimeout(y),y=null)},_=()=>{j(),l=void 0,d=null},S=()=>{p()},N=function(...E){if(a!=null&&a.aborted)return;l=this,d=E;const O=y==null;v(),f&&O&&p()};return N.schedule=v,N.cancel=_,N.flush=S,a==null||a.addEventListener("abort",_,{once:!0}),N}e.debounce=t})(mb)),mb}var OC;function rH(){return OC||(OC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tH();function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:l=!1,trailing:d=!0,maxWait:f}=s,h=Array(2);l&&(h[0]="leading"),d&&(h[1]="trailing");let p,g=null;const y=t.debounce(function(..._){p=n.apply(this,_),g=null},a,{edges:h}),v=function(..._){return f!=null&&(g===null&&(g=Date.now()),Date.now()-g>=f)?(p=n.apply(this,_),g=Date.now(),y.cancel(),y.schedule(),p):(y.apply(this,_),p)},j=()=>(y.flush(),p);return v.cancel=y.cancel,v.flush=j,v}e.debounce=r})(hb)),hb}var AC;function nH(){return AC||(AC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rH();function r(n,a=0,s={}){const{leading:l=!0,trailing:d=!0}=s;return t.debounce(n,a,{leading:l,maxWait:a,trailing:d})}e.throttle=r})(fb)),fb}var pb,CC;function aH(){return CC||(CC=1,pb=nH().throttle),pb}var iH=aH();const sH=Ka(iH);var Ym=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=0;console.warn(r.replace(/%s/g,()=>a[l++]))}},La={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},tR=(e,t,r)=>{var{width:n=La.width,height:a=La.height,aspect:s,maxHeight:l}=r,d=Ko(n)?e:Number(n),f=Ko(a)?t:Number(a);return s&&s>0&&(d?f=d/s:f&&(d=f*s),l&&f!=null&&f>l&&(f=l)),{calculatedWidth:d,calculatedHeight:f}},oH={width:0,height:0,overflow:"visible"},lH={width:0,overflowX:"visible"},cH={height:0,overflowY:"visible"},uH={},dH=e=>{var{width:t,height:r}=e,n=Ko(t),a=Ko(r);return n&&a?oH:n?lH:a?cH:uH};function fH(e){var{width:t,height:r,aspect:n}=e,a=t,s=r;return a===void 0&&s===void 0?(a=La.width,s=La.height):a===void 0?a=n&&n>0?void 0:La.width:s===void 0&&(s=n&&n>0?void 0:La.height),{width:a,height:s}}function Bx(){return Bx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bx.apply(null,arguments)}function PC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function kC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PC(Object(r),!0).forEach(function(n){hH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hH(e,t,r){return(t=mH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mH(e){var t=pH(e,"string");return typeof t=="symbol"?t:t+""}function pH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rR=x.createContext(La.initialDimension);function gH(e){return qa(e.width)&&qa(e.height)}function nR(e){var{children:t,width:r,height:n}=e,a=x.useMemo(()=>({width:r,height:n}),[r,n]);return gH(a)?x.createElement(rR.Provider,{value:a},t):null}var g1=()=>x.useContext(rR),yH=x.forwardRef((e,t)=>{var{aspect:r,initialDimension:n=La.initialDimension,width:a,height:s,minWidth:l=La.minWidth,minHeight:d,maxHeight:f,children:h,debounce:p=La.debounce,id:g,className:y,onResize:v,style:j={}}=e,_=x.useRef(null),S=x.useRef();S.current=v,x.useImperativeHandle(t,()=>_.current);var[N,E]=x.useState({containerWidth:n.width,containerHeight:n.height}),O=x.useCallback((R,U)=>{E(W=>{var F=Math.round(R),z=Math.round(U);return W.containerWidth===F&&W.containerHeight===z?W:{containerWidth:F,containerHeight:z}})},[]);x.useEffect(()=>{if(_.current==null||typeof ResizeObserver>"u")return Jo;var R=z=>{var pe,oe=z[0];if(oe!=null){var{width:me,height:I}=oe.contentRect;O(me,I),(pe=S.current)===null||pe===void 0||pe.call(S,me,I)}};p>0&&(R=sH(R,p,{trailing:!0,leading:!1}));var U=new ResizeObserver(R),{width:W,height:F}=_.current.getBoundingClientRect();return O(W,F),U.observe(_.current),()=>{U.disconnect()}},[O,p]);var{containerWidth:C,containerHeight:D}=N;Ym(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:T,calculatedHeight:M}=tR(C,D,{width:a,height:s,aspect:r,maxHeight:f});return Ym(T!=null&&T>0||M!=null&&M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,M,a,s,l,d,r),x.createElement("div",{id:g?"".concat(g):void 0,className:ht("recharts-responsive-container",y),style:kC(kC({},j),{},{width:a,height:s,minWidth:l,minHeight:d,maxHeight:f}),ref:_},x.createElement("div",{style:dH({width:a,height:s})},x.createElement(nR,{width:T,height:M},h)))}),uc=x.forwardRef((e,t)=>{var r=g1();if(qa(r.width)&&qa(r.height))return e.children;var{width:n,height:a}=fH({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:s,calculatedHeight:l}=tR(void 0,void 0,{width:n,height:a,aspect:e.aspect,maxHeight:e.maxHeight});return Oe(s)&&Oe(l)?x.createElement(nR,{width:s,height:l},e.children):x.createElement(yH,Bx({},e,{width:n,height:a,ref:t}))});function y1(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var og=()=>{var e,t=Xr(),r=ke(JQ),n=ke(sg),a=(e=ke(ig))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},vH={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},aR=()=>{var e;return(e=ke(xr))!==null&&e!==void 0?e:vH},v1=()=>ke(Li),b1=()=>ke(Bi),bH=()=>ke(e=>e.layout.margin),pt=e=>e.layout.layoutType,el=()=>ke(pt),iR=()=>{var e=el();if(e==="horizontal"||e==="vertical")return e},sR=e=>{var t=e.layout.layoutType;if(t==="centric"||t==="radial")return t},xH=()=>{var e=el();return e!==void 0},df=e=>{var t=Mt(),r=Xr(),{width:n,height:a}=e,s=g1(),l=n,d=a;return s&&(l=s.width>0?s.width:n,d=s.height>0?s.height:a),x.useEffect(()=>{!r&&qa(l)&&qa(d)&&t(NQ({width:l,height:d}))},[t,r,l,d]),null},oR=Symbol.for("immer-nothing"),TC=Symbol.for("immer-draftable"),Rn=Symbol.for("immer-state");function ya(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ed=Object.getPrototypeOf;function kc(e){return!!e&&!!e[Rn]}function Ho(e){var t;return e?lR(e)||Array.isArray(e)||!!e[TC]||!!((t=e.constructor)!=null&&t[TC])||ff(e)||cg(e):!1}var wH=Object.prototype.constructor.toString(),DC=new WeakMap;function lR(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=DC.get(r);return n===void 0&&(n=Function.toString.call(r),DC.set(r,n)),n===wH}function Wm(e,t,r=!0){lg(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function lg(e){const t=e[Rn];return t?t.type_:Array.isArray(e)?1:ff(e)?2:cg(e)?3:0}function $x(e,t){return lg(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function cR(e,t,r){const n=lg(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function jH(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function ff(e){return e instanceof Map}function cg(e){return e instanceof Set}function po(e){return e.copy_||e.base_}function Ux(e,t){if(ff(e))return new Map(e);if(cg(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=lR(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Rn];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const l=a[s],d=n[l];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(n[l]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[l]})}return Object.create(Ed(e),n)}else{const n=Ed(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function x1(e,t=!1){return ug(e)||kc(e)||!Ho(e)||(lg(e)>1&&Object.defineProperties(e,{set:om,add:om,clear:om,delete:om}),Object.freeze(e),t&&Object.values(e).forEach(r=>x1(r,!0))),e}function SH(){ya(2)}var om={value:SH};function ug(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var _H={};function Vo(e){const t=_H[e];return t||ya(0,e),t}var Od;function uR(){return Od}function NH(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function MC(e,t){t&&(Vo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function zx(e){qx(e),e.drafts_.forEach(EH),e.drafts_=null}function qx(e){e===Od&&(Od=e.parent_)}function RC(e){return Od=NH(Od,e)}function EH(e){const t=e[Rn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function IC(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Rn].modified_&&(zx(t),ya(4)),Ho(e)&&(e=Xm(t,e),t.parent_||Zm(t,e)),t.patches_&&Vo("Patches").generateReplacementPatches_(r[Rn].base_,e,t.patches_,t.inversePatches_)):e=Xm(t,r,[]),zx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==oR?e:void 0}function Xm(e,t,r){if(ug(t))return t;const n=e.immer_.shouldUseStrictIteration(),a=t[Rn];if(!a)return Wm(t,(s,l)=>LC(e,a,t,s,l,r),n),t;if(a.scope_!==e)return t;if(!a.modified_)return Zm(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let l=s,d=!1;a.type_===3&&(l=new Set(s),s.clear(),d=!0),Wm(l,(f,h)=>LC(e,a,s,f,h,r,d),n),Zm(e,s,!1),r&&e.patches_&&Vo("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function LC(e,t,r,n,a,s,l){if(a==null||typeof a!="object"&&!l)return;const d=ug(a);if(!(d&&!l)){if(kc(a)){const f=s&&t&&t.type_!==3&&!$x(t.assigned_,n)?s.concat(n):void 0,h=Xm(e,a,f);if(cR(r,n,h),kc(h))e.canAutoFreeze_=!1;else return}else l&&r.add(a);if(Ho(a)&&!d){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===a&&d)return;Xm(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(ff(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Zm(e,a)}}}function Zm(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&x1(t,r)}function OH(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:uR(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=w1;r&&(a=[n],s=Ad);const{revoke:l,proxy:d}=Proxy.revocable(a,s);return n.draft_=d,n.revoke_=l,d}var w1={get(e,t){if(t===Rn)return e;const r=po(e);if(!$x(r,t))return AH(e,r,t);const n=r[t];return e.finalized_||!Ho(n)?n:n===gb(e.base_,t)?(yb(e),e.copy_[t]=Kx(n,e)):n},has(e,t){return t in po(e)},ownKeys(e){return Reflect.ownKeys(po(e))},set(e,t,r){const n=dR(po(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=gb(po(e),t),s=a==null?void 0:a[Rn];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(jH(r,a)&&(r!==void 0||$x(e.base_,t)))return!0;yb(e),Fx(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return gb(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,yb(e),Fx(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=po(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){ya(11)},getPrototypeOf(e){return Ed(e.base_)},setPrototypeOf(){ya(12)}},Ad={};Wm(w1,(e,t)=>{Ad[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ad.deleteProperty=function(e,t){return Ad.set.call(this,e,t,void 0)};Ad.set=function(e,t,r){return w1.set.call(this,e[0],t,r,e[0])};function gb(e,t){const r=e[Rn];return(r?po(r):e)[t]}function AH(e,t,r){var a;const n=dR(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function dR(e,t){if(!(t in e))return;let r=Ed(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Ed(r)}}function Fx(e){e.modified_||(e.modified_=!0,e.parent_&&Fx(e.parent_))}function yb(e){e.copy_||(e.copy_=Ux(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var CH=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const l=this;return function(f=s,...h){return l.produce(f,p=>r.call(this,p,...h))}}typeof r!="function"&&ya(6),n!==void 0&&typeof n!="function"&&ya(7);let a;if(Ho(t)){const s=RC(this),l=Kx(t,void 0);let d=!0;try{a=r(l),d=!1}finally{d?zx(s):qx(s)}return MC(s,n),IC(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===oR&&(a=void 0),this.autoFreeze_&&x1(a,!0),n){const s=[],l=[];Vo("Patches").generateReplacementPatches_(t,a,s,l),n(s,l)}return a}else ya(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...d)=>this.produceWithPatches(l,f=>t(f,...d));let n,a;return[this.produce(t,r,(l,d)=>{n=l,a=d}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ho(e)||ya(8),kc(e)&&(e=PH(e));const t=RC(this),r=Kx(e,void 0);return r[Rn].isManual_=!0,qx(t),r}finishDraft(e,t){const r=e&&e[Rn];(!r||!r.isManual_)&&ya(9);const{scope_:n}=r;return MC(n,t),IC(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=Vo("Patches").applyPatches_;return kc(e)?n(e,t):this.produce(e,a=>n(a,t))}};function Kx(e,t){const r=ff(e)?Vo("MapSet").proxyMap_(e,t):cg(e)?Vo("MapSet").proxySet_(e,t):OH(e,t);return(t?t.scope_:uR()).drafts_.push(r),r}function PH(e){return kc(e)||ya(10,e),fR(e)}function fR(e){if(!Ho(e)||ug(e))return e;const t=e[Rn];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Ux(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Ux(e,!0);return Wm(r,(a,s)=>{cR(r,a,fR(s))},n),t&&(t.finalized_=!1),r}var kH=new CH;kH.produce;var TH={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},hR=vn({name:"legend",initialState:TH,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:zt()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,a=ba(e).payload.indexOf(r);a>-1&&(e.payload[a]=n)},prepare:zt()},removeLegendPayload:{reducer(e,t){var r=ba(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:zt()}}}),{setLegendSize:BC,setLegendSettings:DH,addLegendPayload:mR,replaceLegendPayload:pR,removeLegendPayload:gR}=hR.actions,MH=hR.reducer,RH=["contextPayload"];function Qx(){return Qx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qx.apply(null,arguments)}function $C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Tc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$C(Object(r),!0).forEach(function(n){IH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$C(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IH(e,t,r){return(t=LH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LH(e){var t=BH(e,"string");return typeof t=="symbol"?t:t+""}function BH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $H(e,t){if(e==null)return{};var r,n,a=UH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function UH(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function zH(e){return e.value}function qH(e){var{contextPayload:t}=e,r=$H(e,RH),n=mM(t,e.payloadUniqBy,zH),a=Tc(Tc({},r),{},{payload:n});return x.isValidElement(e.content)?x.cloneElement(e.content,a):typeof e.content=="function"?x.createElement(e.content,a):x.createElement(TK,a)}function FH(e,t,r,n,a,s){var{layout:l,align:d,verticalAlign:f}=t,h,p;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(d==="center"&&l==="vertical"?h={left:((n||0)-s.width)/2}:h=d==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(f==="middle"?p={top:((a||0)-s.height)/2}:p=f==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Tc(Tc({},h),p)}function KH(e){var t=Mt();return x.useEffect(()=>{t(DH(e))},[t,e]),null}function QH(e){var t=Mt();return x.useEffect(()=>(t(BC(e)),()=>{t(BC({width:0,height:0}))}),[t,e]),null}function HH(e,t,r,n){return e==="vertical"&&t!=null?{height:t}:e==="horizontal"?{width:r||n}:null}var VH={align:"center",iconSize:14,inactiveColor:"#ccc",itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function Cd(e){var t=fr(e,VH),r=O7(),n=_F(),a=bH(),{width:s,height:l,wrapperStyle:d,portal:f}=t,[h,p]=bM([r]),g=v1(),y=b1();if(g==null||y==null)return null;var v=g-((a==null?void 0:a.left)||0)-((a==null?void 0:a.right)||0),j=HH(t.layout,l,s,v),_=f?d:Tc(Tc({position:"absolute",width:(j==null?void 0:j.width)||s||"auto",height:(j==null?void 0:j.height)||l||"auto"},FH(d,t,a,g,y,h)),d),S=f??n;if(S==null||r==null)return null;var N=x.createElement("div",{className:"recharts-legend-wrapper",style:_,ref:p},x.createElement(KH,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!f&&x.createElement(QH,{width:h.width,height:h.height}),x.createElement(qH,Qx({},t,j,{margin:a,chartWidth:g,chartHeight:y,contextPayload:r})));return Tp.createPortal(N,S)}Cd.displayName="Legend";function Hx(){return Hx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hx.apply(null,arguments)}function UC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UC(Object(r),!0).forEach(function(n){GH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GH(e,t,r){return(t=YH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YH(e){var t=WH(e,"string");return typeof t=="symbol"?t:t+""}function WH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XH(e){return Array.isArray(e)&&za(e[0])&&za(e[1])?e.join(" ~ "):e}var Xl={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},ZH=e=>{var{separator:t=Xl.separator,contentStyle:r,itemStyle:n,labelStyle:a=Xl.labelStyle,payload:s,formatter:l,itemSorter:d,wrapperClassName:f,labelClassName:h,label:p,labelFormatter:g,accessibilityLayer:y=Xl.accessibilityLayer}=e,v=()=>{if(s&&s.length){var D={padding:0,margin:0},T=(d?Vp(s,d):s).map((M,R)=>{if(M.type==="none")return null;var U=M.formatter||l||XH,{value:W,name:F}=M,z=W,pe=F;if(U){var oe=U(W,F,M,R,s);if(Array.isArray(oe))[z,pe]=oe;else if(oe!=null)z=oe;else return null}var me=Wu(Wu({},Xl.itemStyle),{},{color:M.color||Xl.itemStyle.color},n);return x.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:me},za(pe)?x.createElement("span",{className:"recharts-tooltip-item-name"},pe):null,za(pe)?x.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,x.createElement("span",{className:"recharts-tooltip-item-value"},z),x.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return x.createElement("ul",{className:"recharts-tooltip-item-list",style:D},T)}return null},j=Wu(Wu({},Xl.contentStyle),r),_=Wu({margin:0},a),S=!Ht(p),N=S?p:"",E=ht("recharts-default-tooltip",f),O=ht("recharts-tooltip-label",h);S&&g&&s!==void 0&&s!==null&&(N=g(p,s));var C=y?{role:"status","aria-live":"assertive"}:{};return x.createElement("div",Hx({className:E,style:j},C),x.createElement("p",{className:O,style:_},x.isValidElement(N)?N:"".concat(N)),v())},Xu="recharts-tooltip-wrapper",JH={visibility:"hidden"};function eV(e){var{coordinate:t,translateX:r,translateY:n}=e;return ht(Xu,{["".concat(Xu,"-right")]:Oe(r)&&t&&Oe(t.x)&&r>=t.x,["".concat(Xu,"-left")]:Oe(r)&&t&&Oe(t.x)&&r<t.x,["".concat(Xu,"-bottom")]:Oe(n)&&t&&Oe(t.y)&&n>=t.y,["".concat(Xu,"-top")]:Oe(n)&&t&&Oe(t.y)&&n<t.y})}function zC(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offset:a,position:s,reverseDirection:l,tooltipDimension:d,viewBox:f,viewBoxDimension:h}=e;if(s&&Oe(s[n]))return s[n];var p=r[n]-d-(a>0?a:0),g=r[n]+a;if(t[n])return l[n]?p:g;var y=f[n];if(y==null)return 0;if(l[n]){var v=p,j=y;return v<j?Math.max(g,y):Math.max(p,y)}if(h==null)return 0;var _=g+d,S=y+h;return _>S?Math.max(p,y):Math.max(g,y)}function tV(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function rV(e){var{allowEscapeViewBox:t,coordinate:r,offsetTop:n,offsetLeft:a,position:s,reverseDirection:l,tooltipBox:d,useTranslate3d:f,viewBox:h}=e,p,g,y;return d.height>0&&d.width>0&&r?(g=zC({allowEscapeViewBox:t,coordinate:r,key:"x",offset:a,position:s,reverseDirection:l,tooltipDimension:d.width,viewBox:h,viewBoxDimension:h.width}),y=zC({allowEscapeViewBox:t,coordinate:r,key:"y",offset:n,position:s,reverseDirection:l,tooltipDimension:d.height,viewBox:h,viewBoxDimension:h.height}),p=tV({translateX:g,translateY:y,useTranslate3d:f})):p=JH,{cssProperties:p,cssClasses:eV({translateX:g,translateY:y,coordinate:r})}}function qC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qC(Object(r),!0).forEach(function(n){Vx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vx(e,t,r){return(t=nV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nV(e){var t=aV(e,"string");return typeof t=="symbol"?t:t+""}function aV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class iV extends x.PureComponent{constructor(){super(...arguments),Vx(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Vx(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:l,hasPayload:d,isAnimationActive:f,offset:h,position:p,reverseDirection:g,useTranslate3d:y,viewBox:v,wrapperStyle:j,lastBoundingBox:_,innerRef:S,hasPortalFromProps:N}=this.props,E=typeof h=="number"?h:h.x,O=typeof h=="number"?h:h.y,{cssClasses:C,cssProperties:D}=rV({allowEscapeViewBox:r,coordinate:l,offsetLeft:E,offsetTop:O,position:p,reverseDirection:g,tooltipBox:{height:_.height,width:_.width},useTranslate3d:y,viewBox:v}),T=N?{}:lm(lm({transition:f&&t?"transform ".concat(n,"ms ").concat(a):void 0},D),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&d?"visible":"hidden",position:"absolute",top:0,left:0}),M=lm(lm({},T),{},{visibility:!this.state.dismissed&&t&&d?"visible":"hidden"},j);return x.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:M,ref:S},s)}}var yR=()=>{var e;return(e=ke(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Gx(){return Gx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gx.apply(null,arguments)}function FC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function KC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FC(Object(r),!0).forEach(function(n){sV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sV(e,t,r){return(t=oV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oV(e){var t=lV(e,"string");return typeof t=="symbol"?t:t+""}function lV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QC={curveBasisClosed:FF,curveBasisOpen:KF,curveBasis:qF,curveBumpX:AF,curveBumpY:CF,curveLinearClosed:QF,curveLinear:Qp,curveMonotoneX:HF,curveMonotoneY:VF,curveNatural:GF,curveStep:YF,curveStepAfter:XF,curveStepBefore:WF},Jm=e=>st(e.x)&&st(e.y),HC=e=>e.base!=null&&Jm(e.base)&&Jm(e),Zu=e=>e.x,Ju=e=>e.y,cV=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(sf(e));if((r==="curveMonotone"||r==="curveBump")&&t){var n=QC["".concat(r).concat(t==="vertical"?"Y":"X")];if(n)return n}return QC[r]||Qp},VC={connectNulls:!1,type:"linear"},uV=e=>{var{type:t=VC.type,points:r=[],baseLine:n,layout:a,connectNulls:s=VC.connectNulls}=e,l=cV(t,a),d=s?r.filter(Jm):r;if(Array.isArray(n)){var f,h=r.map((j,_)=>KC(KC({},j),{},{base:n[_]}));a==="vertical"?f=em().y(Ju).x1(Zu).x0(j=>j.base.x):f=em().x(Zu).y1(Ju).y0(j=>j.base.y);var p=f.defined(HC).curve(l),g=s?h.filter(HC):h;return p(g)}var y;a==="vertical"&&Oe(n)?y=em().y(Ju).x1(Zu).x0(n):Oe(n)?y=em().x(Zu).y1(Ju).y0(n):y=KD().x(Zu).y(Ju);var v=y.defined(Jm).curve(l);return v(d)},j1=e=>{var{className:t,points:r,path:n,pathRef:a}=e,s=el();if((!r||!r.length)&&!n)return null;var l={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||s,connectNulls:e.connectNulls},d=r&&r.length?uV(l):n;return x.createElement("path",Gx({},Mn(e),i1(e),{className:ht("recharts-curve",t),d:d===null?void 0:d,ref:a}))},dV=["x","y","top","left","width","height","className"];function Yx(){return Yx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yx.apply(null,arguments)}function GC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GC(Object(r),!0).forEach(function(n){hV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hV(e,t,r){return(t=mV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mV(e){var t=pV(e,"string");return typeof t=="symbol"?t:t+""}function pV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gV(e,t){if(e==null)return{};var r,n,a=yV(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function yV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var vV=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),bV=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:l=0,className:d}=e,f=gV(e,dV),h=fV({x:t,y:r,top:n,left:a,width:s,height:l},f);return!Oe(t)||!Oe(r)||!Oe(s)||!Oe(l)||!Oe(n)||!Oe(a)?null:x.createElement("path",Yx({},nn(h),{className:ht("recharts-cross",d),d:vV(t,r,s,l,n,a)}))};function xV(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function YC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function WC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YC(Object(r),!0).forEach(function(n){wV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wV(e,t,r){return(t=jV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jV(e){var t=SV(e,"string");return typeof t=="symbol"?t:t+""}function SV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _V=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),vR=(e,t,r)=>e.map(n=>"".concat(_V(n)," ").concat(t,"ms ").concat(r)).join(","),NV=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),Pd=(e,t)=>Object.keys(t).reduce((r,n)=>WC(WC({},r),{},{[n]:e(n,t[n])}),{});function XC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XC(Object(r),!0).forEach(function(n){EV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EV(e,t,r){return(t=OV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OV(e){var t=AV(e,"string");return typeof t=="symbol"?t:t+""}function AV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ep=(e,t,r)=>e+(t-e)*r,Wx=e=>{var{from:t,to:r}=e;return t!==r},bR=(e,t,r)=>{var n=Pd((a,s)=>{if(Wx(s)){var[l,d]=e(s.from,s.to,s.velocity);return vr(vr({},s),{},{from:l,velocity:d})}return s},t);return r<1?Pd((a,s)=>Wx(s)&&n[a]!=null?vr(vr({},s),{},{velocity:ep(s.velocity,n[a].velocity,r),from:ep(s.from,n[a].from,r)}):s,t):bR(e,n,r-1)};function CV(e,t,r,n,a,s){var l,d=n.reduce((y,v)=>vr(vr({},y),{},{[v]:{from:e[v],velocity:0,to:t[v]}}),{}),f=()=>Pd((y,v)=>v.from,d),h=()=>!Object.values(d).filter(Wx).length,p=null,g=y=>{l||(l=y);var v=y-l,j=v/r.dt;d=bR(r,d,j),a(vr(vr(vr({},e),t),f())),l=y,h()||(p=s.setTimeout(g))};return()=>(p=s.setTimeout(g),()=>{var y;(y=p)===null||y===void 0||y()})}function PV(e,t,r,n,a,s,l){var d=null,f=a.reduce((g,y)=>{var v=e[y],j=t[y];return v==null||j==null?g:vr(vr({},g),{},{[y]:[v,j]})},{}),h,p=g=>{h||(h=g);var y=(g-h)/n,v=Pd((_,S)=>ep(...S,r(y)),f);if(s(vr(vr(vr({},e),t),v)),y<1)d=l.setTimeout(p);else{var j=Pd((_,S)=>ep(...S,r(1)),f);s(vr(vr(vr({},e),t),j))}};return()=>(d=l.setTimeout(p),()=>{var g;(g=d)===null||g===void 0||g()})}const kV=(e,t,r,n,a,s)=>{var l=NV(e,t);return r==null?()=>(a(vr(vr({},e),t)),()=>{}):r.isStepper===!0?CV(e,t,r,l,a,s):PV(e,t,r,n,l,a,s)};var tp=1e-4,xR=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],wR=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),ZC=(e,t)=>r=>{var n=xR(e,t);return wR(n,r)},TV=(e,t)=>r=>{var n=xR(e,t),a=[...n.map((s,l)=>s*l).slice(1),0];return wR(a,r)},DV=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(n==null||n.length!==4)return null;var a=n.map(s=>parseFloat(s));return[a[0],a[1],a[2],a[3]]},MV=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a=DV(r[0]);if(a)return a}}return r.length===4?r:[0,0,1,1]},RV=(e,t,r,n)=>{var a=ZC(e,r),s=ZC(t,n),l=TV(e,r),d=h=>h>1?1:h<0?0:h,f=h=>{for(var p=h>1?1:h,g=p,y=0;y<8;++y){var v=a(g)-p,j=l(g);if(Math.abs(v-p)<tp||j<tp)return s(g);g=d(g-v/j)}return s(g)};return f.isStepper=!1,f},JC=function(){return RV(...MV(...arguments))},IV=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,s=(l,d,f)=>{var h=-(l-d)*r,p=f*n,g=f+(h-p)*a/1e3,y=f*a/1e3+l;return Math.abs(y-d)<tp&&Math.abs(g)<tp?[d,0]:[y,g]};return s.isStepper=!0,s.dt=a,s},LV=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return JC(e);case"spring":return IV();default:if(e.split("(")[0]==="cubic-bezier")return JC(e)}return typeof e=="function"?e:null};function BV(e){var t,r=()=>null,n=!1,a=null,s=l=>{if(!n){if(Array.isArray(l)){if(!l.length)return;var d=l,[f,...h]=d;if(typeof f=="number"){a=e.setTimeout(s.bind(null,h),f);return}s(f),a=e.setTimeout(s.bind(null,h));return}typeof l=="string"&&(t=l,r(t)),typeof l=="object"&&(t=l,r(t)),typeof l=="function"&&l()}};return{stop:()=>{n=!0},start:l=>{n=!1,a&&(a(),a=null),s(l)},subscribe:l=>(r=l,()=>{r=()=>null}),getTimeoutController:()=>e}}class $V{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=l=>{l-n>=r?t(l):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{a!=null&&cancelAnimationFrame(a)}}}function UV(){return BV(new $V)}var zV=x.createContext(UV);function qV(e,t){var r=x.useContext(zV);return x.useMemo(()=>t??r(e),[e,t,r])}var FV=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),dg={isSsr:FV()},KV={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},e2={t:0},vb={t:1};function hf(e){var t=fr(e,KV),{isActive:r,canBegin:n,duration:a,easing:s,begin:l,onAnimationEnd:d,onAnimationStart:f,children:h}=t,p=r==="auto"?!dg.isSsr:r,g=qV(t.animationId,t.animationManager),[y,v]=x.useState(p?e2:vb),j=x.useRef(null);return x.useEffect(()=>{p||v(vb)},[p]),x.useEffect(()=>{if(!p||!n)return Jo;var _=kV(e2,vb,LV(s),a,v,g.getTimeoutController()),S=()=>{j.current=_()};return g.start([f,l,S,a,d]),()=>{g.stop(),j.current&&j.current(),d()}},[p,n,a,s,l,f,d,g]),h(y.t)}function mf(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=x.useRef(jd(t)),n=x.useRef(e);return n.current!==e&&(r.current=jd(t),n.current=e),r.current}var QV=["radius"],HV=["radius"],t2,r2,n2,a2,i2,s2,o2,l2,c2,u2;function d2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function f2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d2(Object(r),!0).forEach(function(n){VV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VV(e,t,r){return(t=GV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GV(e){var t=YV(e,"string");return typeof t=="symbol"?t:t+""}function YV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rp(){return rp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rp.apply(null,arguments)}function h2(e,t){if(e==null)return{};var r,n,a=WV(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function WV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ca(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var m2=(e,t,r,n,a)=>{var s=Ps(r),l=Ps(n),d=Math.min(Math.abs(s)/2,Math.abs(l)/2),f=l>=0?1:-1,h=s>=0?1:-1,p=l>=0&&s>=0||l<0&&s<0?1:0,g;if(d>0&&Array.isArray(a)){for(var y=[0,0,0,0],v=0,j=4;v<j;v++){var _,S=(_=a[v])!==null&&_!==void 0?_:0;y[v]=S>d?d:S}g=Jt(t2||(t2=Ca(["M",",",""])),e,t+f*y[0]),y[0]>0&&(g+=Jt(r2||(r2=Ca(["A ",",",",0,0,",",",",",""])),y[0],y[0],p,e+h*y[0],t)),g+=Jt(n2||(n2=Ca(["L ",",",""])),e+r-h*y[1],t),y[1]>0&&(g+=Jt(a2||(a2=Ca(["A ",",",",0,0,",`,
        `,",",""])),y[1],y[1],p,e+r,t+f*y[1])),g+=Jt(i2||(i2=Ca(["L ",",",""])),e+r,t+n-f*y[2]),y[2]>0&&(g+=Jt(s2||(s2=Ca(["A ",",",",0,0,",`,
        `,",",""])),y[2],y[2],p,e+r-h*y[2],t+n)),g+=Jt(o2||(o2=Ca(["L ",",",""])),e+h*y[3],t+n),y[3]>0&&(g+=Jt(l2||(l2=Ca(["A ",",",",0,0,",`,
        `,",",""])),y[3],y[3],p,e,t+n-f*y[3])),g+="Z"}else if(d>0&&a===+a&&a>0){var N=Math.min(d,a);g=Jt(c2||(c2=Ca(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+f*N,N,N,p,e+h*N,t,e+r-h*N,t,N,N,p,e+r,t+f*N,e+r,t+n-f*N,N,N,p,e+r-h*N,t+n,e+h*N,t+n,N,N,p,e,t+n-f*N)}else g=Jt(u2||(u2=Ca(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return g},p2={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},jR=e=>{var t=fr(e,p2),r=x.useRef(null),[n,a]=x.useState(-1);x.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var H=r.current.getTotalLength();H&&a(H)}catch{}},[]);var{x:s,y:l,width:d,height:f,radius:h,className:p}=t,{animationEasing:g,animationDuration:y,animationBegin:v,isAnimationActive:j,isUpdateAnimationActive:_}=t,S=x.useRef(d),N=x.useRef(f),E=x.useRef(s),O=x.useRef(l),C=x.useMemo(()=>({x:s,y:l,width:d,height:f,radius:h}),[s,l,d,f,h]),D=mf(C,"rectangle-");if(s!==+s||l!==+l||d!==+d||f!==+f||d===0||f===0)return null;var T=ht("recharts-rectangle",p);if(!_){var M=nn(t),{radius:R}=M,U=h2(M,QV);return x.createElement("path",rp({},U,{x:Ps(s),y:Ps(l),width:Ps(d),height:Ps(f),radius:typeof h=="number"?h:void 0,className:T,d:m2(s,l,d,f,h)}))}var W=S.current,F=N.current,z=E.current,pe=O.current,oe="0px ".concat(n===-1?1:n,"px"),me="".concat(n,"px 0px"),I=vR(["strokeDasharray"],y,typeof g=="string"?g:p2.animationEasing);return x.createElement(hf,{animationId:D,key:D,canBegin:n>0,duration:y,easing:g,isActive:_,begin:v},H=>{var ie=qt(W,d,H),he=qt(F,f,H),K=qt(z,s,H),P=qt(pe,l,H);r.current&&(S.current=ie,N.current=he,E.current=K,O.current=P);var B;j?H>0?B={transition:I,strokeDasharray:me}:B={strokeDasharray:oe}:B={strokeDasharray:me};var Y=nn(t),{radius:ne}=Y,G=h2(Y,HV);return x.createElement("path",rp({},G,{radius:typeof h=="number"?h:void 0,className:T,d:m2(K,P,ie,he,h),ref:r,style:f2(f2({},B),t.style)}))})};function g2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function y2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g2(Object(r),!0).forEach(function(n){XV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XV(e,t,r){return(t=ZV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZV(e){var t=JV(e,"string");return typeof t=="symbol"?t:t+""}function JV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var np=Math.PI/180,eG=e=>e*180/Math.PI,cr=(e,t,r,n)=>({x:e+Math.cos(-np*n)*r,y:t+Math.sin(-np*n)*r}),SR=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},tG=(e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)},rG=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,l=tG({x:r,y:n},{x:a,y:s});if(l<=0)return{radius:l,angle:0};var d=(r-a)/l,f=Math.acos(d);return n>s&&(f=2*Math.PI-f),{radius:l,angle:eG(f),angleInRadian:f}},nG=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-s*360,endAngle:r-s*360}},aG=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360),l=Math.min(a,s);return e+l*360},iG=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:a,angle:s}=rG({x:r,y:n},t),{innerRadius:l,outerRadius:d}=t;if(a<l||a>d||a===0)return null;var{startAngle:f,endAngle:h}=nG(t),p=s,g;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;g=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;g=p>=h&&p<=f}return g?y2(y2({},t),{},{radius:a,angle:aG(p,t)}):null};function _R(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e,l=cr(t,r,n,a),d=cr(t,r,n,s);return{points:[l,d],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}var v2,b2,x2,w2,j2,S2,_2;function Xx(){return Xx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xx.apply(null,arguments)}function wo(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var sG=(e,t)=>{var r=Pr(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},cm=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:l,cornerRadius:d,cornerIsExternal:f}=e,h=d*(l?1:-1)+n,p=Math.asin(d/h)/np,g=f?a:a+s*p,y=cr(t,r,h,g),v=cr(t,r,n,g),j=f?a-s*p:a,_=cr(t,r,h*Math.cos(p*np),j);return{center:y,circleTangency:v,lineTangency:_,theta:p}},NR=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:l}=e,d=sG(s,l),f=s+d,h=cr(t,r,a,s),p=cr(t,r,a,f),g=Jt(v2||(v2=wo(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),h.x,h.y,a,a,+(Math.abs(d)>180),+(s>f),p.x,p.y);if(n>0){var y=cr(t,r,n,s),v=cr(t,r,n,f);g+=Jt(b2||(b2=wo(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),v.x,v.y,n,n,+(Math.abs(d)>180),+(s<=f),y.x,y.y)}else g+=Jt(x2||(x2=wo(["L ",","," Z"])),t,r);return g},oG=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:d,startAngle:f,endAngle:h}=e,p=Pr(h-f),{circleTangency:g,lineTangency:y,theta:v}=cm({cx:t,cy:r,radius:a,angle:f,sign:p,cornerRadius:s,cornerIsExternal:d}),{circleTangency:j,lineTangency:_,theta:S}=cm({cx:t,cy:r,radius:a,angle:h,sign:-p,cornerRadius:s,cornerIsExternal:d}),N=d?Math.abs(f-h):Math.abs(f-h)-v-S;if(N<0)return l?Jt(w2||(w2=wo(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),y.x,y.y,s,s,s*2,s,s,-s*2):NR({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:f,endAngle:h});var E=Jt(j2||(j2=wo(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),y.x,y.y,s,s,+(p<0),g.x,g.y,a,a,+(N>180),+(p<0),j.x,j.y,s,s,+(p<0),_.x,_.y);if(n>0){var{circleTangency:O,lineTangency:C,theta:D}=cm({cx:t,cy:r,radius:n,angle:f,sign:p,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),{circleTangency:T,lineTangency:M,theta:R}=cm({cx:t,cy:r,radius:n,angle:h,sign:-p,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),U=d?Math.abs(f-h):Math.abs(f-h)-D-R;if(U<0&&s===0)return"".concat(E,"L").concat(t,",").concat(r,"Z");E+=Jt(S2||(S2=wo(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),M.x,M.y,s,s,+(p<0),T.x,T.y,n,n,+(U>180),+(p>0),O.x,O.y,s,s,+(p<0),C.x,C.y)}else E+=Jt(_2||(_2=wo(["L",",","Z"])),t,r);return E},lG={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},ER=e=>{var t=fr(e,lG),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:l,forceCornerRadius:d,cornerIsExternal:f,startAngle:h,endAngle:p,className:g}=t;if(s<a||h===p)return null;var y=ht("recharts-sector",g),v=s-a,j=Yr(l,v,0,!0),_;return j>0&&Math.abs(h-p)<360?_=oG({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(j,v/2),forceCornerRadius:d,cornerIsExternal:f,startAngle:h,endAngle:p}):_=NR({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:h,endAngle:p}),x.createElement("path",Xx({},nn(t),{className:y,d:_}))};function cG(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(iM(t)){if(e==="centric"){var{cx:n,cy:a,innerRadius:s,outerRadius:l,angle:d}=t,f=cr(n,a,s,d),h=cr(n,a,l,d);return[{x:f.x,y:f.y},{x:h.x,y:h.y}]}return _R(t)}}var bb={},xb={},wb={},N2;function uG(){return N2||(N2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gM();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(wb)),wb}var E2;function dG(){return E2||(E2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uG();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(xb)),xb}var O2;function fG(){return O2||(O2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yM(),r=dG();function n(a,s,l){l&&typeof l!="number"&&t.isIterateeCall(a,s,l)&&(s=l=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),l=l===void 0?a<s?1:-1:r.toFinite(l);const d=Math.max(Math.ceil((s-a)/(l||1)),0),f=new Array(d);for(let h=0;h<d;h++)f[h]=a,a+=l;return f}e.range=n})(bb)),bb}var jb,A2;function hG(){return A2||(A2=1,jb=fG().range),jb}var mG=hG();const OR=Ka(mG);function Ts(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function pG(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function S1(e){let t,r,n;e.length!==2?(t=Ts,r=(d,f)=>Ts(e(d),f),n=(d,f)=>e(d)-f):(t=e===Ts||e===pG?e:gG,r=e,n=e);function a(d,f,h=0,p=d.length){if(h<p){if(t(f,f)!==0)return p;do{const g=h+p>>>1;r(d[g],f)<0?h=g+1:p=g}while(h<p)}return h}function s(d,f,h=0,p=d.length){if(h<p){if(t(f,f)!==0)return p;do{const g=h+p>>>1;r(d[g],f)<=0?h=g+1:p=g}while(h<p)}return h}function l(d,f,h=0,p=d.length){const g=a(d,f,h,p-1);return g>h&&n(d[g-1],f)>-n(d[g],f)?g-1:g}return{left:a,center:l,right:s}}function gG(){return 0}function AR(e){return e===null?NaN:+e}function*yG(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const vG=S1(Ts),pf=vG.right;S1(AR).center;class C2 extends Map{constructor(t,r=wG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(P2(this,t))}has(t){return super.has(P2(this,t))}set(t,r){return super.set(bG(this,t),r)}delete(t){return super.delete(xG(this,t))}}function P2({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function bG({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function xG({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function wG(e){return e!==null&&typeof e=="object"?e.valueOf():e}function jG(e=Ts){if(e===Ts)return CR;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function CR(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const SG=Math.sqrt(50),_G=Math.sqrt(10),NG=Math.sqrt(2);function ap(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),l=s>=SG?10:s>=_G?5:s>=NG?2:1;let d,f,h;return a<0?(h=Math.pow(10,-a)/l,d=Math.round(e*h),f=Math.round(t*h),d/h<e&&++d,f/h>t&&--f,h=-h):(h=Math.pow(10,a)*l,d=Math.round(e/h),f=Math.round(t/h),d*h<e&&++d,f*h>t&&--f),f<d&&.5<=r&&r<2?ap(e,t,r*2):[d,f,h]}function Zx(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,l]=n?ap(t,e,r):ap(e,t,r);if(!(s>=a))return[];const d=s-a+1,f=new Array(d);if(n)if(l<0)for(let h=0;h<d;++h)f[h]=(s-h)/-l;else for(let h=0;h<d;++h)f[h]=(s-h)*l;else if(l<0)for(let h=0;h<d;++h)f[h]=(a+h)/-l;else for(let h=0;h<d;++h)f[h]=(a+h)*l;return f}function Jx(e,t,r){return t=+t,e=+e,r=+r,ap(e,t,r)[2]}function ew(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?Jx(t,e,r):Jx(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function k2(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function T2(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function PR(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?CR:jG(a);n>r;){if(n-r>600){const f=n-r+1,h=t-r+1,p=Math.log(f),g=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*g*(f-g)/f)*(h-f/2<0?-1:1),v=Math.max(r,Math.floor(t-h*g/f+y)),j=Math.min(n,Math.floor(t+(f-h)*g/f+y));PR(e,t,v,j,a)}const s=e[t];let l=r,d=n;for(ed(e,r,t),a(e[n],s)>0&&ed(e,r,n);l<d;){for(ed(e,l,d),++l,--d;a(e[l],s)<0;)++l;for(;a(e[d],s)>0;)--d}a(e[r],s)===0?ed(e,r,d):(++d,ed(e,d,n)),d<=t&&(r=d+1),t<=d&&(n=d-1)}return e}function ed(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function EG(e,t,r){if(e=Float64Array.from(yG(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return T2(e);if(t>=1)return k2(e);var n,a=(n-1)*t,s=Math.floor(a),l=k2(PR(e,s).subarray(0,s+1)),d=T2(e.subarray(s+1));return l+(d-l)*(a-s)}}function OG(e,t,r=AR){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),l=+r(e[s],s,e),d=+r(e[s+1],s+1,e);return l+(d-l)*(a-s)}}function AG(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}function ia(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function $i(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const tw=Symbol("implicit");function _1(){var e=new C2,t=[],r=[],n=tw;function a(s){let l=e.get(s);if(l===void 0){if(n!==tw)return n;e.set(s,l=t.push(s)-1)}return r[l%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new C2;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return _1(t,r).unknown(n)},ia.apply(a,arguments),a}function N1(){var e=_1().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,l,d=!1,f=0,h=0,p=.5;delete e.unknown;function g(){var y=t().length,v=a<n,j=v?a:n,_=v?n:a;s=(_-j)/Math.max(1,y-f+h*2),d&&(s=Math.floor(s)),j+=(_-j-s*(y-f))*p,l=s*(1-f),d&&(j=Math.round(j),l=Math.round(l));var S=AG(y).map(function(N){return j+s*N});return r(v?S.reverse():S)}return e.domain=function(y){return arguments.length?(t(y),g()):t()},e.range=function(y){return arguments.length?([n,a]=y,n=+n,a=+a,g()):[n,a]},e.rangeRound=function(y){return[n,a]=y,n=+n,a=+a,d=!0,g()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(y){return arguments.length?(d=!!y,g()):d},e.padding=function(y){return arguments.length?(f=Math.min(1,h=+y),g()):f},e.paddingInner=function(y){return arguments.length?(f=Math.min(1,y),g()):f},e.paddingOuter=function(y){return arguments.length?(h=+y,g()):h},e.align=function(y){return arguments.length?(p=Math.max(0,Math.min(1,y)),g()):p},e.copy=function(){return N1(t(),[n,a]).round(d).paddingInner(f).paddingOuter(h).align(p)},ia.apply(g(),arguments)}function kR(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return kR(t())},e}function CG(){return kR(N1.apply(null,arguments).paddingInner(1))}function E1(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function TR(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function gf(){}var kd=.7,ip=1/kd,dc="\\s*([+-]?\\d+)\\s*",Td="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$a="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",PG=/^#([0-9a-f]{3,8})$/,kG=new RegExp(`^rgb\\(${dc},${dc},${dc}\\)$`),TG=new RegExp(`^rgb\\(${$a},${$a},${$a}\\)$`),DG=new RegExp(`^rgba\\(${dc},${dc},${dc},${Td}\\)$`),MG=new RegExp(`^rgba\\(${$a},${$a},${$a},${Td}\\)$`),RG=new RegExp(`^hsl\\(${Td},${$a},${$a}\\)$`),IG=new RegExp(`^hsla\\(${Td},${$a},${$a},${Td}\\)$`),D2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};E1(gf,Dd,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:M2,formatHex:M2,formatHex8:LG,formatHsl:BG,formatRgb:R2,toString:R2});function M2(){return this.rgb().formatHex()}function LG(){return this.rgb().formatHex8()}function BG(){return DR(this).formatHsl()}function R2(){return this.rgb().formatRgb()}function Dd(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=PG.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?I2(t):r===3?new yn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?um(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?um(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=kG.exec(e))?new yn(t[1],t[2],t[3],1):(t=TG.exec(e))?new yn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=DG.exec(e))?um(t[1],t[2],t[3],t[4]):(t=MG.exec(e))?um(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=RG.exec(e))?$2(t[1],t[2]/100,t[3]/100,1):(t=IG.exec(e))?$2(t[1],t[2]/100,t[3]/100,t[4]):D2.hasOwnProperty(e)?I2(D2[e]):e==="transparent"?new yn(NaN,NaN,NaN,0):null}function I2(e){return new yn(e>>16&255,e>>8&255,e&255,1)}function um(e,t,r,n){return n<=0&&(e=t=r=NaN),new yn(e,t,r,n)}function $G(e){return e instanceof gf||(e=Dd(e)),e?(e=e.rgb(),new yn(e.r,e.g,e.b,e.opacity)):new yn}function rw(e,t,r,n){return arguments.length===1?$G(e):new yn(e,t,r,n??1)}function yn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}E1(yn,rw,TR(gf,{brighter(e){return e=e==null?ip:Math.pow(ip,e),new yn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?kd:Math.pow(kd,e),new yn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new yn(Io(this.r),Io(this.g),Io(this.b),sp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:L2,formatHex:L2,formatHex8:UG,formatRgb:B2,toString:B2}));function L2(){return`#${jo(this.r)}${jo(this.g)}${jo(this.b)}`}function UG(){return`#${jo(this.r)}${jo(this.g)}${jo(this.b)}${jo((isNaN(this.opacity)?1:this.opacity)*255)}`}function B2(){const e=sp(this.opacity);return`${e===1?"rgb(":"rgba("}${Io(this.r)}, ${Io(this.g)}, ${Io(this.b)}${e===1?")":`, ${e})`}`}function sp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Io(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function jo(e){return e=Io(e),(e<16?"0":"")+e.toString(16)}function $2(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new va(e,t,r,n)}function DR(e){if(e instanceof va)return new va(e.h,e.s,e.l,e.opacity);if(e instanceof gf||(e=Dd(e)),!e)return new va;if(e instanceof va)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),l=NaN,d=s-a,f=(s+a)/2;return d?(t===s?l=(r-n)/d+(r<n)*6:r===s?l=(n-t)/d+2:l=(t-r)/d+4,d/=f<.5?s+a:2-s-a,l*=60):d=f>0&&f<1?0:l,new va(l,d,f,e.opacity)}function zG(e,t,r,n){return arguments.length===1?DR(e):new va(e,t,r,n??1)}function va(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}E1(va,zG,TR(gf,{brighter(e){return e=e==null?ip:Math.pow(ip,e),new va(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?kd:Math.pow(kd,e),new va(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new yn(Sb(e>=240?e-240:e+120,a,n),Sb(e,a,n),Sb(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new va(U2(this.h),dm(this.s),dm(this.l),sp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=sp(this.opacity);return`${e===1?"hsl(":"hsla("}${U2(this.h)}, ${dm(this.s)*100}%, ${dm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function U2(e){return e=(e||0)%360,e<0?e+360:e}function dm(e){return Math.max(0,Math.min(1,e||0))}function Sb(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const O1=e=>()=>e;function qG(e,t){return function(r){return e+r*t}}function FG(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function KG(e){return(e=+e)==1?MR:function(t,r){return r-t?FG(t,r,e):O1(isNaN(t)?r:t)}}function MR(e,t){var r=t-e;return r?qG(e,r):O1(isNaN(e)?t:e)}const z2=(function e(t){var r=KG(t);function n(a,s){var l=r((a=rw(a)).r,(s=rw(s)).r),d=r(a.g,s.g),f=r(a.b,s.b),h=MR(a.opacity,s.opacity);return function(p){return a.r=l(p),a.g=d(p),a.b=f(p),a.opacity=h(p),a+""}}return n.gamma=e,n})(1);function QG(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function HG(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function VG(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),l;for(l=0;l<n;++l)a[l]=Qc(e[l],t[l]);for(;l<r;++l)s[l]=t[l];return function(d){for(l=0;l<n;++l)s[l]=a[l](d);return s}}function GG(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function op(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function YG(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Qc(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var nw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_b=new RegExp(nw.source,"g");function WG(e){return function(){return e}}function XG(e){return function(t){return e(t)+""}}function ZG(e,t){var r=nw.lastIndex=_b.lastIndex=0,n,a,s,l=-1,d=[],f=[];for(e=e+"",t=t+"";(n=nw.exec(e))&&(a=_b.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),d[l]?d[l]+=s:d[++l]=s),(n=n[0])===(a=a[0])?d[l]?d[l]+=a:d[++l]=a:(d[++l]=null,f.push({i:l,x:op(n,a)})),r=_b.lastIndex;return r<t.length&&(s=t.slice(r),d[l]?d[l]+=s:d[++l]=s),d.length<2?f[0]?XG(f[0].x):WG(t):(t=f.length,function(h){for(var p=0,g;p<t;++p)d[(g=f[p]).i]=g.x(h);return d.join("")})}function Qc(e,t){var r=typeof t,n;return t==null||r==="boolean"?O1(t):(r==="number"?op:r==="string"?(n=Dd(t))?(t=n,z2):ZG:t instanceof Dd?z2:t instanceof Date?GG:HG(t)?QG:Array.isArray(t)?VG:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?YG:op)(e,t)}function A1(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function JG(e,t){t===void 0&&(t=e,e=Qc);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(l){var d=Math.max(0,Math.min(n-1,Math.floor(l*=n)));return s[d](l-d)}}function eY(e){return function(){return e}}function lp(e){return+e}var q2=[0,1];function rn(e){return e}function aw(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:eY(isNaN(t)?NaN:.5)}function tY(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function rY(e,t,r){var n=e[0],a=e[1],s=t[0],l=t[1];return a<n?(n=aw(a,n),s=r(l,s)):(n=aw(n,a),s=r(s,l)),function(d){return s(n(d))}}function nY(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),l=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<n;)a[l]=aw(e[l],e[l+1]),s[l]=r(t[l],t[l+1]);return function(d){var f=pf(e,d,1,n)-1;return s[f](a[f](d))}}function yf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function fg(){var e=q2,t=q2,r=Qc,n,a,s,l=rn,d,f,h;function p(){var y=Math.min(e.length,t.length);return l!==rn&&(l=tY(e[0],e[y-1])),d=y>2?nY:rY,f=h=null,g}function g(y){return y==null||isNaN(y=+y)?s:(f||(f=d(e.map(n),t,r)))(n(l(y)))}return g.invert=function(y){return l(a((h||(h=d(t,e.map(n),op)))(y)))},g.domain=function(y){return arguments.length?(e=Array.from(y,lp),p()):e.slice()},g.range=function(y){return arguments.length?(t=Array.from(y),p()):t.slice()},g.rangeRound=function(y){return t=Array.from(y),r=A1,p()},g.clamp=function(y){return arguments.length?(l=y?!0:rn,p()):l!==rn},g.interpolate=function(y){return arguments.length?(r=y,p()):r},g.unknown=function(y){return arguments.length?(s=y,g):s},function(y,v){return n=y,a=v,p()}}function C1(){return fg()(rn,rn)}function aY(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function cp(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Dc(e){return e=cp(Math.abs(e)),e?e[1]:NaN}function iY(e,t){return function(r,n){for(var a=r.length,s=[],l=0,d=e[0],f=0;a>0&&d>0&&(f+d+1>n&&(d=Math.max(1,n-f)),s.push(r.substring(a-=d,a+d)),!((f+=d+1)>n));)d=e[l=(l+1)%e.length];return s.reverse().join(t)}}function sY(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var oY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Md(e){if(!(t=oY.exec(e)))throw new Error("invalid format: "+e);var t;return new P1({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Md.prototype=P1.prototype;function P1(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}P1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lY(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var up;function cY(e,t){var r=cp(e,t);if(!r)return up=void 0,e.toPrecision(t);var n=r[0],a=r[1],s=a-(up=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,l=n.length;return s===l?n:s>l?n+new Array(s-l+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+cp(e,Math.max(0,t+s-1))[0]}function F2(e,t){var r=cp(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const K2={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:aY,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>F2(e*100,t),r:F2,s:cY,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Q2(e){return e}var H2=Array.prototype.map,V2=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function uY(e){var t=e.grouping===void 0||e.thousands===void 0?Q2:iY(H2.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Q2:sY(H2.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",f=e.nan===void 0?"NaN":e.nan+"";function h(g,y){g=Md(g);var v=g.fill,j=g.align,_=g.sign,S=g.symbol,N=g.zero,E=g.width,O=g.comma,C=g.precision,D=g.trim,T=g.type;T==="n"?(O=!0,T="g"):K2[T]||(C===void 0&&(C=12),D=!0,T="g"),(N||v==="0"&&j==="=")&&(N=!0,v="0",j="=");var M=(y&&y.prefix!==void 0?y.prefix:"")+(S==="$"?r:S==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():""),R=(S==="$"?n:/[%p]/.test(T)?l:"")+(y&&y.suffix!==void 0?y.suffix:""),U=K2[T],W=/[defgprs%]/.test(T);C=C===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function F(z){var pe=M,oe=R,me,I,H;if(T==="c")oe=U(z)+oe,z="";else{z=+z;var ie=z<0||1/z<0;if(z=isNaN(z)?f:U(Math.abs(z),C),D&&(z=lY(z)),ie&&+z==0&&_!=="+"&&(ie=!1),pe=(ie?_==="("?_:d:_==="-"||_==="("?"":_)+pe,oe=(T==="s"&&!isNaN(z)&&up!==void 0?V2[8+up/3]:"")+oe+(ie&&_==="("?")":""),W){for(me=-1,I=z.length;++me<I;)if(H=z.charCodeAt(me),48>H||H>57){oe=(H===46?a+z.slice(me+1):z.slice(me))+oe,z=z.slice(0,me);break}}}O&&!N&&(z=t(z,1/0));var he=pe.length+z.length+oe.length,K=he<E?new Array(E-he+1).join(v):"";switch(O&&N&&(z=t(K+z,K.length?E-oe.length:1/0),K=""),j){case"<":z=pe+z+oe+K;break;case"=":z=pe+K+z+oe;break;case"^":z=K.slice(0,he=K.length>>1)+pe+z+oe+K.slice(he);break;default:z=K+pe+z+oe;break}return s(z)}return F.toString=function(){return g+""},F}function p(g,y){var v=Math.max(-8,Math.min(8,Math.floor(Dc(y)/3)))*3,j=Math.pow(10,-v),_=h((g=Md(g),g.type="f",g),{suffix:V2[8+v/3]});return function(S){return _(j*S)}}return{format:h,formatPrefix:p}}var fm,k1,RR;dY({thousands:",",grouping:[3],currency:["$",""]});function dY(e){return fm=uY(e),k1=fm.format,RR=fm.formatPrefix,fm}function fY(e){return Math.max(0,-Dc(Math.abs(e)))}function hY(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Dc(t)/3)))*3-Dc(Math.abs(e)))}function mY(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Dc(t)-Dc(e))+1}function IR(e,t,r,n){var a=ew(e,t,r),s;switch(n=Md(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=hY(a,l))&&(n.precision=s),RR(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=mY(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=fY(a))&&(n.precision=s-(n.type==="%")*2);break}}return k1(n)}function qs(e){var t=e.domain;return e.ticks=function(r){var n=t();return Zx(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return IR(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,l=n[a],d=n[s],f,h,p=10;for(d<l&&(h=l,l=d,d=h,h=a,a=s,s=h);p-- >0;){if(h=Jx(l,d,r),h===f)return n[a]=l,n[s]=d,t(n);if(h>0)l=Math.floor(l/h)*h,d=Math.ceil(d/h)*h;else if(h<0)l=Math.ceil(l*h)/h,d=Math.floor(d*h)/h;else break;f=h}return e},e}function LR(){var e=C1();return e.copy=function(){return yf(e,LR())},ia.apply(e,arguments),qs(e)}function BR(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,lp),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return BR(e).unknown(t)},e=arguments.length?Array.from(e,lp):[0,1],qs(r)}function $R(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],l;return s<a&&(l=r,r=n,n=l,l=a,a=s,s=l),e[r]=t.floor(a),e[n]=t.ceil(s),e}function G2(e){return Math.log(e)}function Y2(e){return Math.exp(e)}function pY(e){return-Math.log(-e)}function gY(e){return-Math.exp(-e)}function yY(e){return isFinite(e)?+("1e"+e):e<0?0:e}function vY(e){return e===10?yY:e===Math.E?Math.exp:t=>Math.pow(e,t)}function bY(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function W2(e){return(t,r)=>-e(-t,r)}function T1(e){const t=e(G2,Y2),r=t.domain;let n=10,a,s;function l(){return a=bY(n),s=vY(n),r()[0]<0?(a=W2(a),s=W2(s),e(pY,gY)):e(G2,Y2),t}return t.base=function(d){return arguments.length?(n=+d,l()):n},t.domain=function(d){return arguments.length?(r(d),l()):r()},t.ticks=d=>{const f=r();let h=f[0],p=f[f.length-1];const g=p<h;g&&([h,p]=[p,h]);let y=a(h),v=a(p),j,_;const S=d==null?10:+d;let N=[];if(!(n%1)&&v-y<S){if(y=Math.floor(y),v=Math.ceil(v),h>0){for(;y<=v;++y)for(j=1;j<n;++j)if(_=y<0?j/s(-y):j*s(y),!(_<h)){if(_>p)break;N.push(_)}}else for(;y<=v;++y)for(j=n-1;j>=1;--j)if(_=y>0?j/s(-y):j*s(y),!(_<h)){if(_>p)break;N.push(_)}N.length*2<S&&(N=Zx(h,p,S))}else N=Zx(y,v,Math.min(v-y,S)).map(s);return g?N.reverse():N},t.tickFormat=(d,f)=>{if(d==null&&(d=10),f==null&&(f=n===10?"s":","),typeof f!="function"&&(!(n%1)&&(f=Md(f)).precision==null&&(f.trim=!0),f=k1(f)),d===1/0)return f;const h=Math.max(1,n*d/t.ticks().length);return p=>{let g=p/s(Math.round(a(p)));return g*n<n-.5&&(g*=n),g<=h?f(p):""}},t.nice=()=>r($R(r(),{floor:d=>s(Math.floor(a(d))),ceil:d=>s(Math.ceil(a(d)))})),t}function UR(){const e=T1(fg()).domain([1,10]);return e.copy=()=>yf(e,UR()).base(e.base()),ia.apply(e,arguments),e}function X2(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Z2(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function D1(e){var t=1,r=e(X2(t),Z2(t));return r.constant=function(n){return arguments.length?e(X2(t=+n),Z2(t)):t},qs(r)}function zR(){var e=D1(fg());return e.copy=function(){return yf(e,zR()).constant(e.constant())},ia.apply(e,arguments)}function J2(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function xY(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function wY(e){return e<0?-e*e:e*e}function M1(e){var t=e(rn,rn),r=1;function n(){return r===1?e(rn,rn):r===.5?e(xY,wY):e(J2(r),J2(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},qs(t)}function R1(){var e=M1(fg());return e.copy=function(){return yf(e,R1()).exponent(e.exponent())},ia.apply(e,arguments),e}function jY(){return R1.apply(null,arguments).exponent(.5)}function eP(e){return Math.sign(e)*e*e}function SY(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function qR(){var e=C1(),t=[0,1],r=!1,n;function a(s){var l=SY(e(s));return isNaN(l)?n:r?Math.round(l):l}return a.invert=function(s){return e.invert(eP(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,lp)).map(eP)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return qR(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},ia.apply(a,arguments),qs(a)}function FR(){var e=[],t=[],r=[],n;function a(){var l=0,d=Math.max(1,t.length);for(r=new Array(d-1);++l<d;)r[l-1]=OG(e,l/d);return s}function s(l){return l==null||isNaN(l=+l)?n:t[pf(r,l)]}return s.invertExtent=function(l){var d=t.indexOf(l);return d<0?[NaN,NaN]:[d>0?r[d-1]:e[0],d<r.length?r[d]:e[e.length-1]]},s.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let d of l)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(Ts),a()},s.range=function(l){return arguments.length?(t=Array.from(l),a()):t.slice()},s.unknown=function(l){return arguments.length?(n=l,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return FR().domain(e).range(t).unknown(n)},ia.apply(s,arguments)}function KR(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function l(f){return f!=null&&f<=f?a[pf(n,f,0,r)]:s}function d(){var f=-1;for(n=new Array(r);++f<r;)n[f]=((f+1)*t-(f-r)*e)/(r+1);return l}return l.domain=function(f){return arguments.length?([e,t]=f,e=+e,t=+t,d()):[e,t]},l.range=function(f){return arguments.length?(r=(a=Array.from(f)).length-1,d()):a.slice()},l.invertExtent=function(f){var h=a.indexOf(f);return h<0?[NaN,NaN]:h<1?[e,n[0]]:h>=r?[n[r-1],t]:[n[h-1],n[h]]},l.unknown=function(f){return arguments.length&&(s=f),l},l.thresholds=function(){return n.slice()},l.copy=function(){return KR().domain([e,t]).range(a).unknown(s)},ia.apply(qs(l),arguments)}function QR(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[pf(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var l=t.indexOf(s);return[e[l-1],e[l]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return QR().domain(e).range(t).unknown(r)},ia.apply(a,arguments)}const Nb=new Date,Eb=new Date;function wr(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const l=a(s),d=a.ceil(s);return s-l<d-s?l:d},a.offset=(s,l)=>(t(s=new Date(+s),l==null?1:Math.floor(l)),s),a.range=(s,l,d)=>{const f=[];if(s=a.ceil(s),d=d==null?1:Math.floor(d),!(s<l)||!(d>0))return f;let h;do f.push(h=new Date(+s)),t(s,d),e(s);while(h<s&&s<l);return f},a.filter=s=>wr(l=>{if(l>=l)for(;e(l),!s(l);)l.setTime(l-1)},(l,d)=>{if(l>=l)if(d<0)for(;++d<=0;)for(;t(l,-1),!s(l););else for(;--d>=0;)for(;t(l,1),!s(l););}),r&&(a.count=(s,l)=>(Nb.setTime(+s),Eb.setTime(+l),e(Nb),e(Eb),Math.floor(r(Nb,Eb))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?l=>n(l)%s===0:l=>a.count(0,l)%s===0):a)),a}const dp=wr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);dp.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?wr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):dp);dp.range;const bi=1e3,ta=bi*60,xi=ta*60,Oi=xi*24,I1=Oi*7,tP=Oi*30,Ob=Oi*365,So=wr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*bi)},(e,t)=>(t-e)/bi,e=>e.getUTCSeconds());So.range;const L1=wr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bi)},(e,t)=>{e.setTime(+e+t*ta)},(e,t)=>(t-e)/ta,e=>e.getMinutes());L1.range;const B1=wr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ta)},(e,t)=>(t-e)/ta,e=>e.getUTCMinutes());B1.range;const $1=wr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bi-e.getMinutes()*ta)},(e,t)=>{e.setTime(+e+t*xi)},(e,t)=>(t-e)/xi,e=>e.getHours());$1.range;const U1=wr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*xi)},(e,t)=>(t-e)/xi,e=>e.getUTCHours());U1.range;const vf=wr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ta)/Oi,e=>e.getDate()-1);vf.range;const hg=wr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Oi,e=>e.getUTCDate()-1);hg.range;const HR=wr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Oi,e=>Math.floor(e/Oi));HR.range;function tl(e){return wr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*ta)/I1)}const mg=tl(0),fp=tl(1),_Y=tl(2),NY=tl(3),Mc=tl(4),EY=tl(5),OY=tl(6);mg.range;fp.range;_Y.range;NY.range;Mc.range;EY.range;OY.range;function rl(e){return wr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/I1)}const pg=rl(0),hp=rl(1),AY=rl(2),CY=rl(3),Rc=rl(4),PY=rl(5),kY=rl(6);pg.range;hp.range;AY.range;CY.range;Rc.range;PY.range;kY.range;const z1=wr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());z1.range;const q1=wr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());q1.range;const Ai=wr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ai.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:wr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Ai.range;const Ci=wr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ci.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:wr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Ci.range;function VR(e,t,r,n,a,s){const l=[[So,1,bi],[So,5,5*bi],[So,15,15*bi],[So,30,30*bi],[s,1,ta],[s,5,5*ta],[s,15,15*ta],[s,30,30*ta],[a,1,xi],[a,3,3*xi],[a,6,6*xi],[a,12,12*xi],[n,1,Oi],[n,2,2*Oi],[r,1,I1],[t,1,tP],[t,3,3*tP],[e,1,Ob]];function d(h,p,g){const y=p<h;y&&([h,p]=[p,h]);const v=g&&typeof g.range=="function"?g:f(h,p,g),j=v?v.range(h,+p+1):[];return y?j.reverse():j}function f(h,p,g){const y=Math.abs(p-h)/g,v=S1(([,,S])=>S).right(l,y);if(v===l.length)return e.every(ew(h/Ob,p/Ob,g));if(v===0)return dp.every(Math.max(ew(h,p,g),1));const[j,_]=l[y/l[v-1][2]<l[v][2]/y?v-1:v];return j.every(_)}return[d,f]}const[TY,DY]=VR(Ci,q1,pg,HR,U1,B1),[MY,RY]=VR(Ai,z1,mg,vf,$1,L1);function Ab(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Cb(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function td(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function IY(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,l=e.shortDays,d=e.months,f=e.shortMonths,h=rd(a),p=nd(a),g=rd(s),y=nd(s),v=rd(l),j=nd(l),_=rd(d),S=nd(d),N=rd(f),E=nd(f),O={a:H,A:ie,b:he,B:K,c:null,d:oP,e:oP,f:iW,g:pW,G:yW,H:rW,I:nW,j:aW,L:GR,m:sW,M:oW,p:P,q:B,Q:uP,s:dP,S:lW,u:cW,U:uW,V:dW,w:fW,W:hW,x:null,X:null,y:mW,Y:gW,Z:vW,"%":cP},C={a:Y,A:ne,b:G,B:be,c:null,d:lP,e:lP,f:jW,g:TW,G:MW,H:bW,I:xW,j:wW,L:WR,m:SW,M:_W,p:ge,q:je,Q:uP,s:dP,S:NW,u:EW,U:OW,V:AW,w:CW,W:PW,x:null,X:null,y:kW,Y:DW,Z:RW,"%":cP},D={a:W,A:F,b:z,B:pe,c:oe,d:iP,e:iP,f:ZY,g:aP,G:nP,H:sP,I:sP,j:GY,L:XY,m:VY,M:YY,p:U,q:HY,Q:eW,s:tW,S:WY,u:zY,U:qY,V:FY,w:UY,W:KY,x:me,X:I,y:aP,Y:nP,Z:QY,"%":JY};O.x=T(r,O),O.X=T(n,O),O.c=T(t,O),C.x=T(r,C),C.X=T(n,C),C.c=T(t,C);function T(J,Ee){return function(Ce){var de=[],Xe=-1,Le=0,vt=J.length,lt,$t,we;for(Ce instanceof Date||(Ce=new Date(+Ce));++Xe<vt;)J.charCodeAt(Xe)===37&&(de.push(J.slice(Le,Xe)),($t=rP[lt=J.charAt(++Xe)])!=null?lt=J.charAt(++Xe):$t=lt==="e"?" ":"0",(we=Ee[lt])&&(lt=we(Ce,$t)),de.push(lt),Le=Xe+1);return de.push(J.slice(Le,Xe)),de.join("")}}function M(J,Ee){return function(Ce){var de=td(1900,void 0,1),Xe=R(de,J,Ce+="",0),Le,vt;if(Xe!=Ce.length)return null;if("Q"in de)return new Date(de.Q);if("s"in de)return new Date(de.s*1e3+("L"in de?de.L:0));if(Ee&&!("Z"in de)&&(de.Z=0),"p"in de&&(de.H=de.H%12+de.p*12),de.m===void 0&&(de.m="q"in de?de.q:0),"V"in de){if(de.V<1||de.V>53)return null;"w"in de||(de.w=1),"Z"in de?(Le=Cb(td(de.y,0,1)),vt=Le.getUTCDay(),Le=vt>4||vt===0?hp.ceil(Le):hp(Le),Le=hg.offset(Le,(de.V-1)*7),de.y=Le.getUTCFullYear(),de.m=Le.getUTCMonth(),de.d=Le.getUTCDate()+(de.w+6)%7):(Le=Ab(td(de.y,0,1)),vt=Le.getDay(),Le=vt>4||vt===0?fp.ceil(Le):fp(Le),Le=vf.offset(Le,(de.V-1)*7),de.y=Le.getFullYear(),de.m=Le.getMonth(),de.d=Le.getDate()+(de.w+6)%7)}else("W"in de||"U"in de)&&("w"in de||(de.w="u"in de?de.u%7:"W"in de?1:0),vt="Z"in de?Cb(td(de.y,0,1)).getUTCDay():Ab(td(de.y,0,1)).getDay(),de.m=0,de.d="W"in de?(de.w+6)%7+de.W*7-(vt+5)%7:de.w+de.U*7-(vt+6)%7);return"Z"in de?(de.H+=de.Z/100|0,de.M+=de.Z%100,Cb(de)):Ab(de)}}function R(J,Ee,Ce,de){for(var Xe=0,Le=Ee.length,vt=Ce.length,lt,$t;Xe<Le;){if(de>=vt)return-1;if(lt=Ee.charCodeAt(Xe++),lt===37){if(lt=Ee.charAt(Xe++),$t=D[lt in rP?Ee.charAt(Xe++):lt],!$t||(de=$t(J,Ce,de))<0)return-1}else if(lt!=Ce.charCodeAt(de++))return-1}return de}function U(J,Ee,Ce){var de=h.exec(Ee.slice(Ce));return de?(J.p=p.get(de[0].toLowerCase()),Ce+de[0].length):-1}function W(J,Ee,Ce){var de=v.exec(Ee.slice(Ce));return de?(J.w=j.get(de[0].toLowerCase()),Ce+de[0].length):-1}function F(J,Ee,Ce){var de=g.exec(Ee.slice(Ce));return de?(J.w=y.get(de[0].toLowerCase()),Ce+de[0].length):-1}function z(J,Ee,Ce){var de=N.exec(Ee.slice(Ce));return de?(J.m=E.get(de[0].toLowerCase()),Ce+de[0].length):-1}function pe(J,Ee,Ce){var de=_.exec(Ee.slice(Ce));return de?(J.m=S.get(de[0].toLowerCase()),Ce+de[0].length):-1}function oe(J,Ee,Ce){return R(J,t,Ee,Ce)}function me(J,Ee,Ce){return R(J,r,Ee,Ce)}function I(J,Ee,Ce){return R(J,n,Ee,Ce)}function H(J){return l[J.getDay()]}function ie(J){return s[J.getDay()]}function he(J){return f[J.getMonth()]}function K(J){return d[J.getMonth()]}function P(J){return a[+(J.getHours()>=12)]}function B(J){return 1+~~(J.getMonth()/3)}function Y(J){return l[J.getUTCDay()]}function ne(J){return s[J.getUTCDay()]}function G(J){return f[J.getUTCMonth()]}function be(J){return d[J.getUTCMonth()]}function ge(J){return a[+(J.getUTCHours()>=12)]}function je(J){return 1+~~(J.getUTCMonth()/3)}return{format:function(J){var Ee=T(J+="",O);return Ee.toString=function(){return J},Ee},parse:function(J){var Ee=M(J+="",!1);return Ee.toString=function(){return J},Ee},utcFormat:function(J){var Ee=T(J+="",C);return Ee.toString=function(){return J},Ee},utcParse:function(J){var Ee=M(J+="",!0);return Ee.toString=function(){return J},Ee}}}var rP={"-":"",_:" ",0:"0"},Tr=/^\s*\d+/,LY=/^%/,BY=/[\\^$*+?|[\]().{}]/g;function mt(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function $Y(e){return e.replace(BY,"\\$&")}function rd(e){return new RegExp("^(?:"+e.map($Y).join("|")+")","i")}function nd(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function UY(e,t,r){var n=Tr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function zY(e,t,r){var n=Tr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function qY(e,t,r){var n=Tr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function FY(e,t,r){var n=Tr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function KY(e,t,r){var n=Tr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function nP(e,t,r){var n=Tr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function aP(e,t,r){var n=Tr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function QY(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function HY(e,t,r){var n=Tr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function VY(e,t,r){var n=Tr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function iP(e,t,r){var n=Tr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function GY(e,t,r){var n=Tr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function sP(e,t,r){var n=Tr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function YY(e,t,r){var n=Tr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function WY(e,t,r){var n=Tr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function XY(e,t,r){var n=Tr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function ZY(e,t,r){var n=Tr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function JY(e,t,r){var n=LY.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function eW(e,t,r){var n=Tr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function tW(e,t,r){var n=Tr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function oP(e,t){return mt(e.getDate(),t,2)}function rW(e,t){return mt(e.getHours(),t,2)}function nW(e,t){return mt(e.getHours()%12||12,t,2)}function aW(e,t){return mt(1+vf.count(Ai(e),e),t,3)}function GR(e,t){return mt(e.getMilliseconds(),t,3)}function iW(e,t){return GR(e,t)+"000"}function sW(e,t){return mt(e.getMonth()+1,t,2)}function oW(e,t){return mt(e.getMinutes(),t,2)}function lW(e,t){return mt(e.getSeconds(),t,2)}function cW(e){var t=e.getDay();return t===0?7:t}function uW(e,t){return mt(mg.count(Ai(e)-1,e),t,2)}function YR(e){var t=e.getDay();return t>=4||t===0?Mc(e):Mc.ceil(e)}function dW(e,t){return e=YR(e),mt(Mc.count(Ai(e),e)+(Ai(e).getDay()===4),t,2)}function fW(e){return e.getDay()}function hW(e,t){return mt(fp.count(Ai(e)-1,e),t,2)}function mW(e,t){return mt(e.getFullYear()%100,t,2)}function pW(e,t){return e=YR(e),mt(e.getFullYear()%100,t,2)}function gW(e,t){return mt(e.getFullYear()%1e4,t,4)}function yW(e,t){var r=e.getDay();return e=r>=4||r===0?Mc(e):Mc.ceil(e),mt(e.getFullYear()%1e4,t,4)}function vW(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+mt(t/60|0,"0",2)+mt(t%60,"0",2)}function lP(e,t){return mt(e.getUTCDate(),t,2)}function bW(e,t){return mt(e.getUTCHours(),t,2)}function xW(e,t){return mt(e.getUTCHours()%12||12,t,2)}function wW(e,t){return mt(1+hg.count(Ci(e),e),t,3)}function WR(e,t){return mt(e.getUTCMilliseconds(),t,3)}function jW(e,t){return WR(e,t)+"000"}function SW(e,t){return mt(e.getUTCMonth()+1,t,2)}function _W(e,t){return mt(e.getUTCMinutes(),t,2)}function NW(e,t){return mt(e.getUTCSeconds(),t,2)}function EW(e){var t=e.getUTCDay();return t===0?7:t}function OW(e,t){return mt(pg.count(Ci(e)-1,e),t,2)}function XR(e){var t=e.getUTCDay();return t>=4||t===0?Rc(e):Rc.ceil(e)}function AW(e,t){return e=XR(e),mt(Rc.count(Ci(e),e)+(Ci(e).getUTCDay()===4),t,2)}function CW(e){return e.getUTCDay()}function PW(e,t){return mt(hp.count(Ci(e)-1,e),t,2)}function kW(e,t){return mt(e.getUTCFullYear()%100,t,2)}function TW(e,t){return e=XR(e),mt(e.getUTCFullYear()%100,t,2)}function DW(e,t){return mt(e.getUTCFullYear()%1e4,t,4)}function MW(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Rc(e):Rc.ceil(e),mt(e.getUTCFullYear()%1e4,t,4)}function RW(){return"+0000"}function cP(){return"%"}function uP(e){return+e}function dP(e){return Math.floor(+e/1e3)}var Zl,ZR,JR;IW({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function IW(e){return Zl=IY(e),ZR=Zl.format,Zl.parse,JR=Zl.utcFormat,Zl.utcParse,Zl}function LW(e){return new Date(e)}function BW(e){return e instanceof Date?+e:+new Date(+e)}function F1(e,t,r,n,a,s,l,d,f,h){var p=C1(),g=p.invert,y=p.domain,v=h(".%L"),j=h(":%S"),_=h("%I:%M"),S=h("%I %p"),N=h("%a %d"),E=h("%b %d"),O=h("%B"),C=h("%Y");function D(T){return(f(T)<T?v:d(T)<T?j:l(T)<T?_:s(T)<T?S:n(T)<T?a(T)<T?N:E:r(T)<T?O:C)(T)}return p.invert=function(T){return new Date(g(T))},p.domain=function(T){return arguments.length?y(Array.from(T,BW)):y().map(LW)},p.ticks=function(T){var M=y();return e(M[0],M[M.length-1],T??10)},p.tickFormat=function(T,M){return M==null?D:h(M)},p.nice=function(T){var M=y();return(!T||typeof T.range!="function")&&(T=t(M[0],M[M.length-1],T??10)),T?y($R(M,T)):p},p.copy=function(){return yf(p,F1(e,t,r,n,a,s,l,d,f,h))},p}function $W(){return ia.apply(F1(MY,RY,Ai,z1,mg,vf,$1,L1,So,ZR).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function UW(){return ia.apply(F1(TY,DY,Ci,q1,pg,hg,U1,B1,So,JR).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function gg(){var e=0,t=1,r,n,a,s,l=rn,d=!1,f;function h(g){return g==null||isNaN(g=+g)?f:l(a===0?.5:(g=(s(g)-r)*a,d?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t]=g,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),h):[e,t]},h.clamp=function(g){return arguments.length?(d=!!g,h):d},h.interpolator=function(g){return arguments.length?(l=g,h):l};function p(g){return function(y){var v,j;return arguments.length?([v,j]=y,l=g(v,j),h):[l(0),l(1)]}}return h.range=p(Qc),h.rangeRound=p(A1),h.unknown=function(g){return arguments.length?(f=g,h):f},function(g){return s=g,r=g(e),n=g(t),a=r===n?0:1/(n-r),h}}function Fs(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function e4(){var e=qs(gg()(rn));return e.copy=function(){return Fs(e,e4())},$i.apply(e,arguments)}function t4(){var e=T1(gg()).domain([1,10]);return e.copy=function(){return Fs(e,t4()).base(e.base())},$i.apply(e,arguments)}function r4(){var e=D1(gg());return e.copy=function(){return Fs(e,r4()).constant(e.constant())},$i.apply(e,arguments)}function K1(){var e=M1(gg());return e.copy=function(){return Fs(e,K1()).exponent(e.exponent())},$i.apply(e,arguments)}function zW(){return K1.apply(null,arguments).exponent(.5)}function n4(){var e=[],t=rn;function r(n){if(n!=null&&!isNaN(n=+n))return t((pf(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Ts),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>EG(e,s/n))},r.copy=function(){return n4(t).domain(e)},$i.apply(r,arguments)}function yg(){var e=0,t=.5,r=1,n=1,a,s,l,d,f,h=rn,p,g=!1,y;function v(_){return isNaN(_=+_)?y:(_=.5+((_=+p(_))-s)*(n*_<n*s?d:f),h(g?Math.max(0,Math.min(1,_)):_))}v.domain=function(_){return arguments.length?([e,t,r]=_,a=p(e=+e),s=p(t=+t),l=p(r=+r),d=a===s?0:.5/(s-a),f=s===l?0:.5/(l-s),n=s<a?-1:1,v):[e,t,r]},v.clamp=function(_){return arguments.length?(g=!!_,v):g},v.interpolator=function(_){return arguments.length?(h=_,v):h};function j(_){return function(S){var N,E,O;return arguments.length?([N,E,O]=S,h=JG(_,[N,E,O]),v):[h(0),h(.5),h(1)]}}return v.range=j(Qc),v.rangeRound=j(A1),v.unknown=function(_){return arguments.length?(y=_,v):y},function(_){return p=_,a=_(e),s=_(t),l=_(r),d=a===s?0:.5/(s-a),f=s===l?0:.5/(l-s),n=s<a?-1:1,v}}function a4(){var e=qs(yg()(rn));return e.copy=function(){return Fs(e,a4())},$i.apply(e,arguments)}function i4(){var e=T1(yg()).domain([.1,1,10]);return e.copy=function(){return Fs(e,i4()).base(e.base())},$i.apply(e,arguments)}function s4(){var e=D1(yg());return e.copy=function(){return Fs(e,s4()).constant(e.constant())},$i.apply(e,arguments)}function Q1(){var e=M1(yg());return e.copy=function(){return Fs(e,Q1()).exponent(e.exponent())},$i.apply(e,arguments)}function qW(){return Q1.apply(null,arguments).exponent(.5)}const ld=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:N1,scaleDiverging:a4,scaleDivergingLog:i4,scaleDivergingPow:Q1,scaleDivergingSqrt:qW,scaleDivergingSymlog:s4,scaleIdentity:BR,scaleImplicit:tw,scaleLinear:LR,scaleLog:UR,scaleOrdinal:_1,scalePoint:CG,scalePow:R1,scaleQuantile:FR,scaleQuantize:KR,scaleRadial:qR,scaleSequential:e4,scaleSequentialLog:t4,scaleSequentialPow:K1,scaleSequentialQuantile:n4,scaleSequentialSqrt:zW,scaleSequentialSymlog:r4,scaleSqrt:jY,scaleSymlog:zR,scaleThreshold:QR,scaleTime:$W,scaleUtc:UW,tickFormat:IR},Symbol.toStringTag,{value:"Module"}));var Ui=e=>e.chartData,vg=X([Ui],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),H1=(e,t,r,n)=>n?vg(e):Ui(e),FW=(e,t,r)=>r?vg(e):Ui(e);function Pi(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(st(t)&&st(r))return!0}return!1}function fP(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function o4(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,s;if(st(r))a=r;else if(typeof r=="function")return;if(st(n))s=n;else if(typeof n=="function")return;var l=[a,s];if(Pi(l))return l}}function KW(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Pi(n))return fP(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,l,d;if(a==="auto")t!=null&&(l=Math.min(...t));else if(Oe(a))l=a;else if(typeof a=="function")try{t!=null&&(l=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&jC.test(a)){var f=jC.exec(a);if(f==null||f[1]==null||t==null)l=void 0;else{var h=+f[1];l=t[0]-h}}else l=t==null?void 0:t[0];if(s==="auto")t!=null&&(d=Math.max(...t));else if(Oe(s))d=s;else if(typeof s=="function")try{t!=null&&(d=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&SC.test(s)){var p=SC.exec(s);if(p==null||p[1]==null||t==null)d=void 0;else{var g=+p[1];d=t[1]+g}}else d=t==null?void 0:t[1];var y=[l,d];if(Pi(y))return t==null?y:fP(y,t,r)}}}var Hc=1e9,QW={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},G1,Ft=!0,aa="[DecimalError] ",Lo=aa+"Invalid argument: ",V1=aa+"Exponent out of range: ",Vc=Math.floor,go=Math.pow,HW=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,kn,Cr=1e7,Lt=7,l4=9007199254740991,mp=Vc(l4/Lt),Ae={};Ae.absoluteValue=Ae.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ae.comparedTo=Ae.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Ae.decimalPlaces=Ae.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Lt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ae.dividedBy=Ae.div=function(e){return ji(this,new this.constructor(e))};Ae.dividedToIntegerBy=Ae.idiv=function(e){var t=this,r=t.constructor;return kt(ji(t,new r(e),0,1),r.precision)};Ae.equals=Ae.eq=function(e){return!this.cmp(e)};Ae.exponent=function(){return dr(this)};Ae.greaterThan=Ae.gt=function(e){return this.cmp(e)>0};Ae.greaterThanOrEqualTo=Ae.gte=function(e){return this.cmp(e)>=0};Ae.isInteger=Ae.isint=function(){return this.e>this.d.length-2};Ae.isNegative=Ae.isneg=function(){return this.s<0};Ae.isPositive=Ae.ispos=function(){return this.s>0};Ae.isZero=function(){return this.s===0};Ae.lessThan=Ae.lt=function(e){return this.cmp(e)<0};Ae.lessThanOrEqualTo=Ae.lte=function(e){return this.cmp(e)<1};Ae.logarithm=Ae.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(kn))throw Error(aa+"NaN");if(r.s<1)throw Error(aa+(r.s?"NaN":"-Infinity"));return r.eq(kn)?new n(0):(Ft=!1,t=ji(Rd(r,s),Rd(e,s),s),Ft=!0,kt(t,a))};Ae.minus=Ae.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?d4(t,e):c4(t,(e.s=-e.s,e))};Ae.modulo=Ae.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(aa+"NaN");return r.s?(Ft=!1,t=ji(r,e,0,1).times(e),Ft=!0,r.minus(t)):kt(new n(r),a)};Ae.naturalExponential=Ae.exp=function(){return u4(this)};Ae.naturalLogarithm=Ae.ln=function(){return Rd(this)};Ae.negated=Ae.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ae.plus=Ae.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?c4(t,e):d4(t,(e.s=-e.s,e))};Ae.precision=Ae.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Lo+e);if(t=dr(a)+1,n=a.d.length-1,r=n*Lt+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ae.squareRoot=Ae.sqrt=function(){var e,t,r,n,a,s,l,d=this,f=d.constructor;if(d.s<1){if(!d.s)return new f(0);throw Error(aa+"NaN")}for(e=dr(d),Ft=!1,a=Math.sqrt(+d),a==0||a==1/0?(t=Ba(d.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Vc((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new f(t)):n=new f(a.toString()),r=f.precision,a=l=r+3;;)if(s=n,n=s.plus(ji(d,s,l+2)).times(.5),Ba(s.d).slice(0,l)===(t=Ba(n.d)).slice(0,l)){if(t=t.slice(l-3,l+1),a==l&&t=="4999"){if(kt(s,r+1,0),s.times(s).eq(d)){n=s;break}}else if(t!="9999")break;l+=4}return Ft=!0,kt(n,r)};Ae.times=Ae.mul=function(e){var t,r,n,a,s,l,d,f,h,p=this,g=p.constructor,y=p.d,v=(e=new g(e)).d;if(!p.s||!e.s)return new g(0);for(e.s*=p.s,r=p.e+e.e,f=y.length,h=v.length,f<h&&(s=y,y=v,v=s,l=f,f=h,h=l),s=[],l=f+h,n=l;n--;)s.push(0);for(n=h;--n>=0;){for(t=0,a=f+n;a>n;)d=s[a]+v[n]*y[a-n-1]+t,s[a--]=d%Cr|0,t=d/Cr|0;s[a]=(s[a]+t)%Cr|0}for(;!s[--l];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Ft?kt(e,g.precision):e};Ae.toDecimalPlaces=Ae.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Fa(e,0,Hc),t===void 0?t=n.rounding:Fa(t,0,8),kt(r,e+dr(r)+1,t))};Ae.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Go(n,!0):(Fa(e,0,Hc),t===void 0?t=a.rounding:Fa(t,0,8),n=kt(new a(n),e+1,t),r=Go(n,!0,e+1)),r};Ae.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?Go(a):(Fa(e,0,Hc),t===void 0?t=s.rounding:Fa(t,0,8),n=kt(new s(a),e+dr(a)+1,t),r=Go(n.abs(),!1,e+dr(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Ae.toInteger=Ae.toint=function(){var e=this,t=e.constructor;return kt(new t(e),dr(e)+1,t.rounding)};Ae.toNumber=function(){return+this};Ae.toPower=Ae.pow=function(e){var t,r,n,a,s,l,d=this,f=d.constructor,h=12,p=+(e=new f(e));if(!e.s)return new f(kn);if(d=new f(d),!d.s){if(e.s<1)throw Error(aa+"Infinity");return d}if(d.eq(kn))return d;if(n=f.precision,e.eq(kn))return kt(d,n);if(t=e.e,r=e.d.length-1,l=t>=r,s=d.s,l){if((r=p<0?-p:p)<=l4){for(a=new f(kn),t=Math.ceil(n/Lt+4),Ft=!1;r%2&&(a=a.times(d),mP(a.d,t)),r=Vc(r/2),r!==0;)d=d.times(d),mP(d.d,t);return Ft=!0,e.s<0?new f(kn).div(a):kt(a,n)}}else if(s<0)throw Error(aa+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,d.s=1,Ft=!1,a=e.times(Rd(d,n+h)),Ft=!0,a=u4(a),a.s=s,a};Ae.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=dr(a),n=Go(a,r<=s.toExpNeg||r>=s.toExpPos)):(Fa(e,1,Hc),t===void 0?t=s.rounding:Fa(t,0,8),a=kt(new s(a),e,t),r=dr(a),n=Go(a,e<=r||r<=s.toExpNeg,e)),n};Ae.toSignificantDigits=Ae.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Fa(e,1,Hc),t===void 0?t=n.rounding:Fa(t,0,8)),kt(new n(r),e,t)};Ae.toString=Ae.valueOf=Ae.val=Ae.toJSON=Ae[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=dr(e),r=e.constructor;return Go(e,t<=r.toExpNeg||t>=r.toExpPos)};function c4(e,t){var r,n,a,s,l,d,f,h,p=e.constructor,g=p.precision;if(!e.s||!t.s)return t.s||(t=new p(e)),Ft?kt(t,g):t;if(f=e.d,h=t.d,l=e.e,a=t.e,f=f.slice(),s=l-a,s){for(s<0?(n=f,s=-s,d=h.length):(n=h,a=l,d=f.length),l=Math.ceil(g/Lt),d=l>d?l+1:d+1,s>d&&(s=d,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(d=f.length,s=h.length,d-s<0&&(s=d,n=h,h=f,f=n),r=0;s;)r=(f[--s]=f[s]+h[s]+r)/Cr|0,f[s]%=Cr;for(r&&(f.unshift(r),++a),d=f.length;f[--d]==0;)f.pop();return t.d=f,t.e=a,Ft?kt(t,g):t}function Fa(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Lo+e)}function Ba(e){var t,r,n,a=e.length-1,s="",l=e[0];if(a>0){for(s+=l,t=1;t<a;t++)n=e[t]+"",r=Lt-n.length,r&&(s+=ys(r)),s+=n;l=e[t],n=l+"",r=Lt-n.length,r&&(s+=ys(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return s+l}var ji=(function(){function e(n,a){var s,l=0,d=n.length;for(n=n.slice();d--;)s=n[d]*a+l,n[d]=s%Cr|0,l=s/Cr|0;return l&&n.unshift(l),n}function t(n,a,s,l){var d,f;if(s!=l)f=s>l?1:-1;else for(d=f=0;d<s;d++)if(n[d]!=a[d]){f=n[d]>a[d]?1:-1;break}return f}function r(n,a,s){for(var l=0;s--;)n[s]-=l,l=n[s]<a[s]?1:0,n[s]=l*Cr+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,l){var d,f,h,p,g,y,v,j,_,S,N,E,O,C,D,T,M,R,U=n.constructor,W=n.s==a.s?1:-1,F=n.d,z=a.d;if(!n.s)return new U(n);if(!a.s)throw Error(aa+"Division by zero");for(f=n.e-a.e,M=z.length,D=F.length,v=new U(W),j=v.d=[],h=0;z[h]==(F[h]||0);)++h;if(z[h]>(F[h]||0)&&--f,s==null?E=s=U.precision:l?E=s+(dr(n)-dr(a))+1:E=s,E<0)return new U(0);if(E=E/Lt+2|0,h=0,M==1)for(p=0,z=z[0],E++;(h<D||p)&&E--;h++)O=p*Cr+(F[h]||0),j[h]=O/z|0,p=O%z|0;else{for(p=Cr/(z[0]+1)|0,p>1&&(z=e(z,p),F=e(F,p),M=z.length,D=F.length),C=M,_=F.slice(0,M),S=_.length;S<M;)_[S++]=0;R=z.slice(),R.unshift(0),T=z[0],z[1]>=Cr/2&&++T;do p=0,d=t(z,_,M,S),d<0?(N=_[0],M!=S&&(N=N*Cr+(_[1]||0)),p=N/T|0,p>1?(p>=Cr&&(p=Cr-1),g=e(z,p),y=g.length,S=_.length,d=t(g,_,y,S),d==1&&(p--,r(g,M<y?R:z,y))):(p==0&&(d=p=1),g=z.slice()),y=g.length,y<S&&g.unshift(0),r(_,g,S),d==-1&&(S=_.length,d=t(z,_,M,S),d<1&&(p++,r(_,M<S?R:z,S))),S=_.length):d===0&&(p++,_=[0]),j[h++]=p,d&&_[0]?_[S++]=F[C]||0:(_=[F[C]],S=1);while((C++<D||_[0]!==void 0)&&E--)}return j[0]||j.shift(),v.e=f,kt(v,l?s+dr(v)+1:s)}})();function u4(e,t){var r,n,a,s,l,d,f=0,h=0,p=e.constructor,g=p.precision;if(dr(e)>16)throw Error(V1+dr(e));if(!e.s)return new p(kn);for(Ft=!1,d=g,l=new p(.03125);e.abs().gte(.1);)e=e.times(l),h+=5;for(n=Math.log(go(2,h))/Math.LN10*2+5|0,d+=n,r=a=s=new p(kn),p.precision=d;;){if(a=kt(a.times(e),d),r=r.times(++f),l=s.plus(ji(a,r,d)),Ba(l.d).slice(0,d)===Ba(s.d).slice(0,d)){for(;h--;)s=kt(s.times(s),d);return p.precision=g,t==null?(Ft=!0,kt(s,g)):s}s=l}}function dr(e){for(var t=e.e*Lt,r=e.d[0];r>=10;r/=10)t++;return t}function Pb(e,t,r){if(t>e.LN10.sd())throw Ft=!0,r&&(e.precision=r),Error(aa+"LN10 precision limit exceeded");return kt(new e(e.LN10),t)}function ys(e){for(var t="";e--;)t+="0";return t}function Rd(e,t){var r,n,a,s,l,d,f,h,p,g=1,y=10,v=e,j=v.d,_=v.constructor,S=_.precision;if(v.s<1)throw Error(aa+(v.s?"NaN":"-Infinity"));if(v.eq(kn))return new _(0);if(t==null?(Ft=!1,h=S):h=t,v.eq(10))return t==null&&(Ft=!0),Pb(_,h);if(h+=y,_.precision=h,r=Ba(j),n=r.charAt(0),s=dr(v),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)v=v.times(e),r=Ba(v.d),n=r.charAt(0),g++;s=dr(v),n>1?(v=new _("0."+r),s++):v=new _(n+"."+r.slice(1))}else return f=Pb(_,h+2,S).times(s+""),v=Rd(new _(n+"."+r.slice(1)),h-y).plus(f),_.precision=S,t==null?(Ft=!0,kt(v,S)):v;for(d=l=v=ji(v.minus(kn),v.plus(kn),h),p=kt(v.times(v),h),a=3;;){if(l=kt(l.times(p),h),f=d.plus(ji(l,new _(a),h)),Ba(f.d).slice(0,h)===Ba(d.d).slice(0,h))return d=d.times(2),s!==0&&(d=d.plus(Pb(_,h+2,S).times(s+""))),d=ji(d,new _(g),h),_.precision=S,t==null?(Ft=!0,kt(d,S)):d;d=f,a+=2}}function hP(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Vc(r/Lt),e.d=[],n=(r+1)%Lt,r<0&&(n+=Lt),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Lt;n<a;)e.d.push(+t.slice(n,n+=Lt));t=t.slice(n),n=Lt-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Ft&&(e.e>mp||e.e<-mp))throw Error(V1+r)}else e.s=0,e.e=0,e.d=[0];return e}function kt(e,t,r){var n,a,s,l,d,f,h,p,g=e.d;for(l=1,s=g[0];s>=10;s/=10)l++;if(n=t-l,n<0)n+=Lt,a=t,h=g[p=0];else{if(p=Math.ceil((n+1)/Lt),s=g.length,p>=s)return e;for(h=s=g[p],l=1;s>=10;s/=10)l++;n%=Lt,a=n-Lt+l}if(r!==void 0&&(s=go(10,l-a-1),d=h/s%10|0,f=t<0||g[p+1]!==void 0||h%s,f=r<4?(d||f)&&(r==0||r==(e.s<0?3:2)):d>5||d==5&&(r==4||f||r==6&&(n>0?a>0?h/go(10,l-a):0:g[p-1])%10&1||r==(e.s<0?8:7))),t<1||!g[0])return f?(s=dr(e),g.length=1,t=t-s-1,g[0]=go(10,(Lt-t%Lt)%Lt),e.e=Vc(-t/Lt)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(n==0?(g.length=p,s=1,p--):(g.length=p+1,s=go(10,Lt-n),g[p]=a>0?(h/go(10,l-a)%go(10,a)|0)*s:0),f)for(;;)if(p==0){(g[0]+=s)==Cr&&(g[0]=1,++e.e);break}else{if(g[p]+=s,g[p]!=Cr)break;g[p--]=0,s=1}for(n=g.length;g[--n]===0;)g.pop();if(Ft&&(e.e>mp||e.e<-mp))throw Error(V1+dr(e));return e}function d4(e,t){var r,n,a,s,l,d,f,h,p,g,y=e.constructor,v=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),Ft?kt(t,v):t;if(f=e.d,g=t.d,n=t.e,h=e.e,f=f.slice(),l=h-n,l){for(p=l<0,p?(r=f,l=-l,d=g.length):(r=g,n=h,d=f.length),a=Math.max(Math.ceil(v/Lt),d)+2,l>a&&(l=a,r.length=1),r.reverse(),a=l;a--;)r.push(0);r.reverse()}else{for(a=f.length,d=g.length,p=a<d,p&&(d=a),a=0;a<d;a++)if(f[a]!=g[a]){p=f[a]<g[a];break}l=0}for(p&&(r=f,f=g,g=r,t.s=-t.s),d=f.length,a=g.length-d;a>0;--a)f[d++]=0;for(a=g.length;a>l;){if(f[--a]<g[a]){for(s=a;s&&f[--s]===0;)f[s]=Cr-1;--f[s],f[a]+=Cr}f[a]-=g[a]}for(;f[--d]===0;)f.pop();for(;f[0]===0;f.shift())--n;return f[0]?(t.d=f,t.e=n,Ft?kt(t,v):t):new y(0)}function Go(e,t,r){var n,a=dr(e),s=Ba(e.d),l=s.length;return t?(r&&(n=r-l)>0?s=s.charAt(0)+"."+s.slice(1)+ys(n):l>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+ys(-a-1)+s,r&&(n=r-l)>0&&(s+=ys(n))):a>=l?(s+=ys(a+1-l),r&&(n=r-a-1)>0&&(s=s+"."+ys(n))):((n=a+1)<l&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-l)>0&&(a+1===l&&(s+="."),s+=ys(n))),e.s<0?"-"+s:s}function mP(e,t){if(e.length>t)return e.length=t,!0}function f4(e){var t,r,n;function a(s){var l=this;if(!(l instanceof a))return new a(s);if(l.constructor=a,s instanceof a){l.s=s.s,l.e=s.e,l.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Lo+s);if(s>0)l.s=1;else if(s<0)s=-s,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(s===~~s&&s<1e7){l.e=0,l.d=[s];return}return hP(l,s.toString())}else if(typeof s!="string")throw Error(Lo+s);if(s.charCodeAt(0)===45?(s=s.slice(1),l.s=-1):l.s=1,HW.test(s))hP(l,s);else throw Error(Lo+s)}if(a.prototype=Ae,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=f4,a.config=a.set=VW,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function VW(e){if(!e||typeof e!="object")throw Error(aa+"Object expected");var t,r,n,a=["precision",1,Hc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Vc(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Lo+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Lo+r+": "+n);return this}var G1=f4(QW);kn=new G1(1);const St=G1;function h4(e){var t;return e===0?t=1:t=Math.floor(new St(e).abs().log(10).toNumber())+1,t}function m4(e,t,r){for(var n=new St(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}var p4=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},g4=(e,t,r)=>{if(e.lte(0))return new St(0);var n=h4(e.toNumber()),a=new St(10).pow(n),s=e.div(a),l=n!==1?.05:.1,d=new St(Math.ceil(s.div(l).toNumber())).add(r).mul(l),f=d.mul(a);return t?new St(f.toNumber()):new St(Math.ceil(f.toNumber()))},GW=(e,t,r)=>{var n=new St(1),a=new St(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new St(10).pow(h4(e)-1),a=new St(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new St(Math.floor(e)))}else e===0?a=new St(Math.floor((t-1)/2)):r||(a=new St(Math.floor(e)));for(var l=Math.floor((t-1)/2),d=[],f=0;f<t;f++)d.push(a.add(new St(f-l).mul(n)).toNumber());return d},y4=function(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new St(0),tickMin:new St(0),tickMax:new St(0)};var l=g4(new St(r).sub(t).div(n-1),a,s),d;t<=0&&r>=0?d=new St(0):(d=new St(t).add(r).div(2),d=d.sub(new St(d).mod(l)));var f=Math.ceil(d.sub(t).div(l).toNumber()),h=Math.ceil(new St(r).sub(d).div(l).toNumber()),p=f+h+1;return p>n?y4(t,r,n,a,s+1):(p<n&&(h=r>0?h+(n-p):h,f=r>0?f:f+(n-p)),{step:l,tickMin:d.sub(new St(f).mul(l)),tickMax:d.add(new St(h).mul(l))})},YW=function(t){var[r,n]=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(a,2),[d,f]=p4([r,n]);if(d===-1/0||f===1/0){var h=f===1/0?[d,...Array(a-1).fill(1/0)]:[...Array(a-1).fill(-1/0),f];return r>n?h.reverse():h}if(d===f)return GW(d,a,s);var{step:p,tickMin:g,tickMax:y}=y4(d,f,l,s,0),v=m4(g,y.add(new St(.1).mul(p)),p);return r>n?v.reverse():v},WW=function(t,r){var[n,a]=t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[l,d]=p4([n,a]);if(l===-1/0||d===1/0)return[n,a];if(l===d)return[l];var f=Math.max(r,2),h=g4(new St(d).sub(l).div(f-1),s,0),p=[...m4(new St(l),new St(d),h),d];return s===!1&&(p=p.map(g=>Math.round(g))),n>a?p.reverse():p},v4=e=>e.rootProps.maxBarSize,XW=e=>e.rootProps.barGap,b4=e=>e.rootProps.barCategoryGap,ZW=e=>e.rootProps.barSize,bf=e=>e.rootProps.stackOffset,x4=e=>e.rootProps.reverseStackOrder,Y1=e=>e.options.chartName,W1=e=>e.rootProps.syncId,w4=e=>e.rootProps.syncMethod,X1=e=>e.options.eventEmitter,ur={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},fo={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},Pa={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},bg=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t};function xg(e,t,r){if(r!=="auto")return r;if(e!=null)return Ii(e,t)?"category":"number"}function pP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pP(Object(r),!0).forEach(function(n){JW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JW(e,t,r){return(t=eX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eX(e){var t=tX(e,"string");return typeof t=="symbol"?t:t+""}function tX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gP={allowDataOverflow:fo.allowDataOverflow,allowDecimals:fo.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:fo.angleAxisId,includeHidden:!1,name:void 0,reversed:fo.reversed,scale:fo.scale,tick:fo.tick,tickCount:void 0,ticks:void 0,type:fo.type,unit:void 0},yP={allowDataOverflow:Pa.allowDataOverflow,allowDecimals:Pa.allowDecimals,allowDuplicatedCategory:Pa.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Pa.radiusAxisId,includeHidden:Pa.includeHidden,name:void 0,reversed:Pa.reversed,scale:Pa.scale,tick:Pa.tick,tickCount:Pa.tickCount,ticks:void 0,type:Pa.type,unit:void 0},rX=(e,t)=>{if(t!=null)return e.polarAxis.angleAxis[t]},Z1=X([rX,sR],(e,t)=>{var r;if(e!=null)return e;var n=(r=xg(t,"angleAxis",gP.type))!==null&&r!==void 0?r:"category";return pp(pp({},gP),{},{type:n})}),nX=(e,t)=>e.polarAxis.radiusAxis[t],J1=X([nX,sR],(e,t)=>{var r;if(e!=null)return e;var n=(r=xg(t,"radiusAxis",yP.type))!==null&&r!==void 0?r:"category";return pp(pp({},yP),{},{type:n})}),wg=e=>e.polarOptions,ej=X([Li,Bi,xr],SR),j4=X([wg,ej],(e,t)=>{if(e!=null)return Yr(e.innerRadius,t,0)}),S4=X([wg,ej],(e,t)=>{if(e!=null)return Yr(e.outerRadius,t,t*.8)}),aX=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},_4=X([wg],aX);X([Z1,_4],bg);var N4=X([ej,j4,S4],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});X([J1,N4],bg);var E4=X([pt,wg,j4,S4,Li,Bi],(e,t,r,n,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:l,cy:d,startAngle:f,endAngle:h}=t;return{cx:Yr(l,a,a/2),cy:Yr(d,s,s/2),innerRadius:r,outerRadius:n,startAngle:f,endAngle:h,clockWise:!1}}}),Vt=(e,t)=>t,xf=(e,t,r)=>r;function tj(e){return e==null?void 0:e.id}function O4(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:a,dataKey:s}=r,l=new Map;return e.forEach(d=>{var f,h=(f=d.data)!==null&&f!==void 0?f:n;if(!(h==null||h.length===0)){var p=tj(d);h.forEach((g,y)=>{var v=s==null||a?y:String(Ct(g,s,null)),j=Ct(g,d.dataKey,0),_;l.has(v)?_=l.get(v):_={},Object.assign(_,{[p]:j}),l.set(v,_)})}}),Array.from(l.values())}function jg(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Sg=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function _g(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function iX(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Dr=e=>{var t=pt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Gc=e=>e.tooltip.settings.axisId;function sX(e){if(e in ld)return ld[e]();var t="scale".concat(sf(e));if(t in ld)return ld[t]()}function vP(e){var t=e.ticks,r=e.bandwidth,n=e.range(),a=[Math.min(...n),Math.max(...n)];return{domain:()=>e.domain(),range:(function(s){function l(){return s.apply(this,arguments)}return l.toString=function(){return s.toString()},l})(()=>a),rangeMin:()=>a[0],rangeMax:()=>a[1],isInRange(s){var l=a[0],d=a[1];return l<=d?s>=l&&s<=d:s>=d&&s<=l},bandwidth:r?()=>r.call(e):void 0,ticks:t?s=>t.call(e,s):void 0,map:(s,l)=>{var d=e(s);if(d!=null){if(e.bandwidth&&l!==null&&l!==void 0&&l.position){var f=e.bandwidth();switch(l.position){case"middle":d+=f/2;break;case"end":d+=f;break}}return d}}}}function bP(e,t,r){if(typeof e=="function")return vP(e.copy().domain(t).range(r));if(e!=null){var n=sX(e);if(n!=null)return n.domain(t).range(r),vP(n)}}var A4=(e,t)=>{if(t!=null)switch(e){case"linear":{if(!Pi(t)){for(var r,n,a=0;a<t.length;a++){var s=t[a];st(s)&&((r===void 0||s<r)&&(r=s),(n===void 0||s>n)&&(n=s))}return r!==void 0&&n!==void 0?[r,n]:void 0}return t}default:return t}};function xP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xP(Object(r),!0).forEach(function(n){oX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oX(e,t,r){return(t=lX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lX(e){var t=cX(e,"string");return typeof t=="symbol"?t:t+""}function cX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iw=[0,"auto"],Er={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},C4=(e,t)=>e.cartesianAxis.xAxis[t],zi=(e,t)=>{var r=C4(e,t);return r??Er},Or={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:iw,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:uf},P4=(e,t)=>e.cartesianAxis.yAxis[t],qi=(e,t)=>{var r=P4(e,t);return r??Or},uX={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},rj=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??uX},tr=(e,t,r)=>{switch(t){case"xAxis":return zi(e,r);case"yAxis":return qi(e,r);case"zAxis":return rj(e,r);case"angleAxis":return Z1(e,r);case"radiusAxis":return J1(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},dX=(e,t,r)=>{switch(t){case"xAxis":return zi(e,r);case"yAxis":return qi(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Yc=(e,t,r)=>{switch(t){case"xAxis":return zi(e,r);case"yAxis":return qi(e,r);case"angleAxis":return Z1(e,r);case"radiusAxis":return J1(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},k4=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function nj(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Ng=e=>e.graphicalItems.cartesianItems,fX=X([Vt,xf],nj),aj=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),wf=X([Ng,tr,fX],aj,{memoizeOptions:{resultEqualityCheck:_g}}),T4=X([wf],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(jg)),D4=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),hX=X([wf],D4),ij=e=>e.map(t=>t.data).filter(Boolean).flat(1),mX=X([wf],ij,{memoizeOptions:{resultEqualityCheck:_g}}),sj=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},oj=X([mX,H1],sj),lj=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ct(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Ct(a,n)}))):e.map(n=>({value:n})),Eg=X([oj,tr,wf],lj);function M4(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Sm(e){if(za(e)||e instanceof Date){var t=Number(e);if(st(t))return t}}function wP(e){if(Array.isArray(e)){var t=[Sm(e[0]),Sm(e[1])];return Pi(t)?t:void 0}var r=Sm(e);if(r!=null)return[r,r]}function ki(e){return e.map(Sm).filter(gn)}function pX(e,t,r){return!r||typeof t!="number"||Ua(t)?[]:r.length?ki(r.flatMap(n=>{var a=Ct(e,n.dataKey),s,l;if(Array.isArray(a)?[s,l]=a:s=l=a,!(!st(s)||!st(l)))return[t-s,t+l]})):[]}var jr=e=>{var t=Dr(e),r=Gc(e);return Yc(e,t,r)},jf=X([jr],e=>e==null?void 0:e.dataKey),gX=X([T4,H1,jr],O4),R4=(e,t,r,n)=>{var a={},s=t.reduce((l,d)=>{if(d.stackId==null)return l;var f=l[d.stackId];return f==null&&(f=[]),f.push(d),l[d.stackId]=f,l},a);return Object.fromEntries(Object.entries(s).map(l=>{var[d,f]=l,h=n?[...f].reverse():f,p=h.map(tj);return[d,{stackedData:IQ(e,p,r),graphicalItems:h}]}))},sw=X([gX,T4,bf,x4],R4),I4=(e,t,r,n)=>{var{dataStartIndex:a,dataEndIndex:s}=t;if(n==null&&r!=="zAxis"){var l=zQ(e,a,s);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},yX=X([tr],e=>e.allowDataOverflow),cj=e=>{var t;if(e==null||!("domain"in e))return iw;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=ki(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:iw},uj=X([tr],cj),dj=X([uj,yX],o4),vX=X([sw,Ui,Vt,dj],I4,{memoizeOptions:{resultEqualityCheck:Sg}}),Og=e=>e.errorBars,bX=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>M4(r,n)),yp=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),l=Math.min(...s),d=Math.max(...s);return[l,d]}},fj=(e,t,r,n,a)=>{var s,l;if(r.length>0&&e.forEach(d=>{r.forEach(f=>{var h,p,g=(h=n[f.id])===null||h===void 0?void 0:h.filter(N=>M4(a,N)),y=Ct(d,(p=t.dataKey)!==null&&p!==void 0?p:f.dataKey),v=pX(d,y,g);if(v.length>=2){var j=Math.min(...v),_=Math.max(...v);(s==null||j<s)&&(s=j),(l==null||_>l)&&(l=_)}var S=wP(y);S!=null&&(s=s==null?S[0]:Math.min(s,S[0]),l=l==null?S[1]:Math.max(l,S[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(d=>{var f=wP(Ct(d,t.dataKey));f!=null&&(s=s==null?f[0]:Math.min(s,f[0]),l=l==null?f[1]:Math.max(l,f[1]))}),st(s)&&st(l))return[s,l]},xX=X([oj,tr,hX,Og,Vt],fj,{memoizeOptions:{resultEqualityCheck:Sg}});function wX(e){var{value:t}=e;if(za(t)||t instanceof Date)return t}var jX=(e,t,r)=>{var n=e.map(wX).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&rM(n))?OR(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},L4=e=>e.referenceElements.dots,Wc=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),SX=X([L4,Vt,xf],Wc),B4=e=>e.referenceElements.areas,_X=X([B4,Vt,xf],Wc),$4=e=>e.referenceElements.lines,NX=X([$4,Vt,xf],Wc),U4=(e,t)=>{if(e!=null){var r=ki(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},EX=X(SX,Vt,U4),z4=(e,t)=>{if(e!=null){var r=ki(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},OX=X([_X,Vt],z4);function AX(e){var t;if(e.x!=null)return ki([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:ki(r)}function CX(e){var t;if(e.y!=null)return ki([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:ki(r)}var q4=(e,t)=>{if(e!=null){var r=e.flatMap(n=>t==="xAxis"?AX(n):CX(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},PX=X([NX,Vt],q4),kX=X(EX,PX,OX,(e,t,r)=>yp(e,r,t)),hj=(e,t,r,n,a,s,l,d)=>{if(r!=null)return r;var f=l==="vertical"&&d==="xAxis"||l==="horizontal"&&d==="yAxis",h=f?yp(n,s,a):yp(s,a);return KW(t,h,e.allowDataOverflow)},TX=X([tr,uj,dj,vX,xX,kX,pt,Vt],hj,{memoizeOptions:{resultEqualityCheck:Sg}}),DX=[0,1],mj=(e,t,r,n,a,s,l)=>{if(!((e==null||r==null||r.length===0)&&l===void 0)){var{dataKey:d,type:f}=e,h=Ii(t,s);if(h&&d==null){var p;return OR(0,(p=r==null?void 0:r.length)!==null&&p!==void 0?p:0)}return f==="category"?jX(n,e,h):a==="expand"?DX:l}},pj=X([tr,pt,oj,Eg,bf,Vt,TX],mj);function MX(e){return e in ld}var F4=(e,t,r)=>{if(e!=null){var{scale:n,type:a}=e;if(n==="auto")return a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!t)?"point":a==="category"?"band":"linear";if(typeof n=="string"){var s="scale".concat(sf(n));return MX(s)?s:"point"}}},Ks=X([tr,k4,Y1],F4);function gj(e,t,r,n){if(!(r==null||n==null))return typeof e.scale=="function"?bP(e.scale,r,n):bP(t,r,n)}var yj=(e,t,r)=>{var n=cj(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Pi(e))return YW(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Pi(e))return WW(e,t.tickCount,t.allowDecimals)}},vj=X([pj,Yc,Ks],yj),bj=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Pi(t)&&Array.isArray(r)&&r.length>0){var a,s,l=t[0],d=(a=r[0])!==null&&a!==void 0?a:0,f=t[1],h=(s=r[r.length-1])!==null&&s!==void 0?s:0;return[Math.min(l,d),Math.max(f,h)]}return t},RX=X([tr,pj,vj,Vt],bj),IX=X(Eg,tr,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(ki(e.map(g=>g.value))).sort((g,y)=>g-y),a=n[0],s=n[n.length-1];if(a==null||s==null)return 1/0;var l=s-a;if(l===0)return 1/0;for(var d=0;d<n.length-1;d++){var f=n[d],h=n[d+1];if(!(f==null||h==null)){var p=h-f;r=Math.min(r,p)}}return r/l}}),K4=X(IX,pt,b4,xr,(e,t,r,n,a)=>a,(e,t,r,n,a)=>{if(!st(e))return 0;var s=t==="vertical"?n.height:n.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var l=Yr(r,e*s),d=e*s/2;return d-l-(d-l)/s*l}return 0}),LX=(e,t,r)=>{var n=zi(e,t);return n==null||typeof n.padding!="string"?0:K4(e,"xAxis",t,r,n.padding)},BX=(e,t,r)=>{var n=qi(e,t);return n==null||typeof n.padding!="string"?0:K4(e,"yAxis",t,r,n.padding)},$X=X(zi,LX,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),UX=X(qi,BX,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),zX=X([xr,$X,sg,ig,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),qX=X([xr,pt,UX,sg,ig,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:l}=a;return s?[n.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Sf=(e,t,r,n)=>{var a;switch(t){case"xAxis":return zX(e,r,n);case"yAxis":return qX(e,r,n);case"zAxis":return(a=rj(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return _4(e);case"radiusAxis":return N4(e,r);default:return}},Q4=X([tr,Sf],bg),FX=X([Ks,RX],A4),Ag=X([tr,Ks,FX,Q4],gj);X([wf,Og,Vt],bX);function H4(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Cg=(e,t)=>t,Pg=(e,t,r)=>r,KX=X(ng,Cg,Pg,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(H4)),QX=X(ag,Cg,Pg,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(H4)),V4=(e,t)=>({width:e.width,height:t.height}),HX=(e,t)=>{var r=typeof t.width=="number"?t.width:uf;return{width:r,height:e.height}},G4=X(xr,zi,V4),VX=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},GX=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},YX=X(Bi,xr,KX,Cg,Pg,(e,t,r,n,a)=>{var s={},l;return r.forEach(d=>{var f=V4(t,d);l==null&&(l=VX(t,n,e));var h=n==="top"&&!a||n==="bottom"&&a;s[d.id]=l-Number(h)*f.height,l+=(h?-1:1)*f.height}),s}),WX=X(Li,xr,QX,Cg,Pg,(e,t,r,n,a)=>{var s={},l;return r.forEach(d=>{var f=HX(t,d);l==null&&(l=GX(t,n,e));var h=n==="left"&&!a||n==="right"&&a;s[d.id]=l-Number(h)*f.width,l+=(h?-1:1)*f.width}),s}),XX=(e,t)=>{var r=zi(e,t);if(r!=null)return YX(e,r.orientation,r.mirror)},ZX=X([xr,zi,XX,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:e.left,y:0}:{x:e.left,y:a}}}),JX=(e,t)=>{var r=qi(e,t);if(r!=null)return WX(e,r.orientation,r.mirror)},eZ=X([xr,qi,JX,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:e.top}:{x:a,y:e.top}}}),Y4=X(xr,qi,(e,t)=>{var r=typeof t.width=="number"?t.width:uf;return{width:r,height:e.height}}),jP=(e,t,r)=>{switch(t){case"xAxis":return G4(e,r).width;case"yAxis":return Y4(e,r).height;default:return}},W4=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:l}=r,d=Ii(e,n),f=t.map(h=>h.value);if(l&&d&&s==="category"&&a&&rM(f))return f}},xj=X([pt,Eg,tr,Vt],W4),X4=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,l=Ii(e,n);if(l&&(a==="number"||s!=="auto"))return t.map(d=>d.value)}},wj=X([pt,Eg,Yc,Vt],X4),SP=X([pt,dX,Ks,Ag,xj,wj,Sf,vj,Vt],(e,t,r,n,a,s,l,d,f)=>{if(t!=null){var h=Ii(e,f);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:f,categoricalDomain:s,duplicateDomain:a,isCategorical:h,niceTicks:d,range:l,realScaleType:r,scale:n}}}),tZ=(e,t,r,n,a,s,l,d,f)=>{if(!(t==null||n==null)){var h=Ii(e,f),{type:p,ticks:g,tickCount:y}=t,v=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,j=p==="category"&&n.bandwidth?n.bandwidth()/v:0;j=f==="angleAxis"&&s!=null&&s.length>=2?Pr(s[0]-s[1])*2*j:j;var _=g||a;return _?_.map((S,N)=>{var E=l?l.indexOf(S):S,O=n.map(E);return st(O)?{index:N,coordinate:O+j,value:S,offset:j}:null}).filter(gn):h&&d?d.map((S,N)=>{var E=n.map(S);return st(E)?{coordinate:E+j,value:S,index:N,offset:j}:null}).filter(gn):n.ticks?n.ticks(y).map((S,N)=>{var E=n.map(S);return st(E)?{coordinate:E+j,value:S,index:N,offset:j}:null}).filter(gn):n.domain().map((S,N)=>{var E=n.map(S);return st(E)?{coordinate:E+j,value:l?l[S]:S,index:N,offset:j}:null}).filter(gn)}},Z4=X([pt,Yc,Ks,Ag,vj,Sf,xj,wj,Vt],tZ),rZ=(e,t,r,n,a,s,l)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var d=Ii(e,l),{tickCount:f}=t,h=0;return h=l==="angleAxis"&&(n==null?void 0:n.length)>=2?Pr(n[0]-n[1])*2*h:h,d&&s?s.map((p,g)=>{var y=r.map(p);return st(y)?{coordinate:y+h,value:p,index:g,offset:h}:null}).filter(gn):r.ticks?r.ticks(f).map((p,g)=>{var y=r.map(p);return st(y)?{coordinate:y+h,value:p,index:g,offset:h}:null}).filter(gn):r.domain().map((p,g)=>{var y=r.map(p);return st(y)?{coordinate:y+h,value:a?a[p]:p,index:g,offset:h}:null}).filter(gn)}},Rs=X([pt,Yc,Ag,Sf,xj,wj,Vt],rZ),Is=X(tr,Ag,(e,t)=>{if(!(e==null||t==null))return gp(gp({},e),{},{scale:t})}),nZ=X([tr,Ks,pj,Q4],gj);X((e,t,r)=>rj(e,r),nZ,(e,t)=>{if(!(e==null||t==null))return gp(gp({},e),{},{scale:t})});var aZ=X([pt,ng,ag],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),J4=e=>e.options.defaultTooltipEventType,eI=e=>e.options.validateTooltipEventTypes;function tI(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function jj(e,t){var r=J4(e),n=eI(e);return tI(t,r,n)}function iZ(e){return ke(t=>jj(t,e))}var rI=(e,t)=>{var r,n=Number(t);if(!(Ua(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},sZ=e=>e.tooltip.settings,xs={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},oZ={itemInteraction:{click:xs,hover:xs},axisInteraction:{click:xs,hover:xs},keyboardInteraction:xs,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},nI=vn({name:"tooltip",initialState:oZ,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:zt()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,a=ba(e).tooltipItemPayloads.indexOf(r);a>-1&&(e.tooltipItemPayloads[a]=n)},prepare:zt()},removeTooltipEntrySettings:{reducer(e,t){var r=ba(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:zt()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:lZ,replaceTooltipEntrySettings:cZ,removeTooltipEntrySettings:uZ,setTooltipSettingsState:dZ,setActiveMouseOverItemIndex:aI,mouseLeaveItem:fZ,mouseLeaveChart:iI,setActiveClickItemIndex:hZ,setMouseOverAxisIndex:sI,setMouseClickAxisIndex:mZ,setSyncInteraction:ow,setKeyboardInteraction:lw}=nI.actions,pZ=nI.reducer;function _P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_P(Object(r),!0).forEach(function(n){gZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_P(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gZ(e,t,r){return(t=yZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yZ(e){var t=vZ(e,"string");return typeof t=="symbol"?t:t+""}function vZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bZ(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function xZ(e){return e.index!=null}var oI=(e,t,r,n)=>{if(t==null)return xs;var a=bZ(e,t,r);if(a==null)return xs;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(xZ(a)){if(s)return hm(hm({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return hm(hm({},xs),{},{coordinate:a.coordinate})};function wZ(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function jZ(e,t){var r=wZ(e),n=t[0],a=t[1];if(r===void 0)return!1;var s=Math.min(n,a),l=Math.max(n,a);return r>=s&&r<=l}function SZ(e,t,r){if(r==null||t==null)return!0;var n=Ct(e,t);return n==null||!Pi(r)?!0:jZ(n,r)}var Sj=(e,t,r,n)=>{var a=e==null?void 0:e.index;if(a==null)return null;var s=Number(a);if(!st(s))return a;var l=0,d=1/0;t.length>0&&(d=t.length-1);var f=Math.max(l,Math.min(s,d)),h=t[f];return h==null||SZ(h,r,n)?String(f):null},lI=(e,t,r,n,a,s,l)=>{if(s!=null){var d=l[0],f=d==null?void 0:d.getPosition(s);if(f!=null)return f;var h=a==null?void 0:a[Number(s)];if(h)switch(r){case"horizontal":return{x:h.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:h.coordinate}}}},cI=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;if(r==="hover"?a=e.itemInteraction.hover.graphicalItemId:a=e.itemInteraction.click.graphicalItemId,a==null&&n!=null){var s=e.tooltipItemPayloads[0];return s!=null?[s]:[]}return e.tooltipItemPayloads.filter(l=>{var d;return((d=l.settings)===null||d===void 0?void 0:d.graphicalItemId)===a})},uI=e=>e.options.tooltipPayloadSearcher,Xc=e=>e.tooltip;function NP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function EP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NP(Object(r),!0).forEach(function(n){_Z(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _Z(e,t,r){return(t=NZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NZ(e){var t=EZ(e,"string");return typeof t=="symbol"?t:t+""}function EZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OZ(e,t){return e??t}var dI=(e,t,r,n,a,s,l)=>{if(!(t==null||s==null)){var{chartData:d,computedData:f,dataStartIndex:h,dataEndIndex:p}=r,g=[];return e.reduce((y,v)=>{var j,{dataDefinedOnItem:_,settings:S}=v,N=OZ(_,d),E=Array.isArray(N)?YM(N,h,p):N,O=(j=S==null?void 0:S.dataKey)!==null&&j!==void 0?j:n,C=S==null?void 0:S.nameKey,D;if(n&&Array.isArray(E)&&!Array.isArray(E[0])&&l==="axis"?D=nM(E,n,a):D=s(E,t,f,C),Array.isArray(D))D.forEach(M=>{var R=EP(EP({},S),{},{name:M.name,unit:M.unit,color:void 0,fill:void 0});y.push(_C({tooltipEntrySettings:R,dataKey:M.dataKey,payload:M.payload,value:Ct(M.payload,M.dataKey),name:M.name}))});else{var T;y.push(_C({tooltipEntrySettings:S,dataKey:O,payload:D,value:Ct(D,O),name:(T=Ct(D,C))!==null&&T!==void 0?T:S==null?void 0:S.name}))}return y},g)}},_j=X([jr,k4,Y1],F4),AZ=X([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),CZ=X([Dr,Gc],nj),Zc=X([AZ,jr,CZ],aj,{memoizeOptions:{resultEqualityCheck:_g}}),PZ=X([Zc],e=>e.filter(jg)),kZ=X([Zc],ij,{memoizeOptions:{resultEqualityCheck:_g}}),Jc=X([kZ,Ui],sj),TZ=X([PZ,Ui,jr],O4),Nj=X([Jc,jr,Zc],lj),fI=X([jr],cj),DZ=X([jr],e=>e.allowDataOverflow),hI=X([fI,DZ],o4),MZ=X([Zc],e=>e.filter(jg)),RZ=X([TZ,MZ,bf,x4],R4),IZ=X([RZ,Ui,Dr,hI],I4),LZ=X([Zc],D4),BZ=X([Jc,jr,LZ,Og,Dr],fj,{memoizeOptions:{resultEqualityCheck:Sg}}),$Z=X([L4,Dr,Gc],Wc),UZ=X([$Z,Dr],U4),zZ=X([B4,Dr,Gc],Wc),qZ=X([zZ,Dr],z4),FZ=X([$4,Dr,Gc],Wc),KZ=X([FZ,Dr],q4),QZ=X([UZ,KZ,qZ],yp),HZ=X([jr,fI,hI,IZ,BZ,QZ,pt,Dr],hj),_f=X([jr,pt,Jc,Nj,bf,Dr,HZ],mj),VZ=X([_f,jr,_j],yj),GZ=X([jr,_f,VZ,Dr],bj),mI=e=>{var t=Dr(e),r=Gc(e),n=!1;return Sf(e,t,r,n)},pI=X([jr,mI],bg),gI=X([jr,_j,GZ,pI],gj),YZ=X([pt,Nj,jr,Dr],W4),WZ=X([pt,Nj,jr,Dr],X4),XZ=(e,t,r,n,a,s,l,d)=>{if(t){var{type:f}=t,h=Ii(e,d);if(n){var p=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,g=f==="category"&&n.bandwidth?n.bandwidth()/p:0;return g=d==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Pr(a[0]-a[1])*2*g:g,h&&l?l.map((y,v)=>{var j=n.map(y);return st(j)?{coordinate:j+g,value:y,index:v,offset:g}:null}).filter(gn):n.domain().map((y,v)=>{var j=n.map(y);return st(j)?{coordinate:j+g,value:s?s[y]:y,index:v,offset:g}:null}).filter(gn)}}},Fi=X([pt,jr,_j,gI,mI,YZ,WZ,Dr],XZ),Ej=X([J4,eI,sZ],(e,t,r)=>tI(r.shared,e,t)),yI=e=>e.tooltip.settings.trigger,Oj=e=>e.tooltip.settings.defaultIndex,Nf=X([Xc,Ej,yI,Oj],oI),Ls=X([Nf,Jc,jf,_f],Sj),vI=X([Fi,Ls],rI),Aj=X([Nf],e=>{if(e)return e.dataKey}),ZZ=X([Nf],e=>{if(e)return e.graphicalItemId}),bI=X([Xc,Ej,yI,Oj],cI),JZ=X([Li,Bi,pt,xr,Fi,Oj,bI],lI),eJ=X([Nf,JZ],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),tJ=X([Nf],e=>{var t;return(t=e==null?void 0:e.active)!==null&&t!==void 0?t:!1}),rJ=X([bI,Ls,Ui,jf,vI,uI,Ej],dI),nJ=X([rJ],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function OP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function AP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OP(Object(r),!0).forEach(function(n){aJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aJ(e,t,r){return(t=iJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iJ(e){var t=sJ(e,"string");return typeof t=="symbol"?t:t+""}function sJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oJ=()=>ke(jr),lJ=()=>{var e=oJ(),t=ke(Fi),r=ke(gI);return Pc(!e||!r?void 0:AP(AP({},e),{},{scale:r}),t)};function CP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CP(Object(r),!0).forEach(function(n){cJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cJ(e,t,r){return(t=uJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uJ(e){var t=dJ(e,"string");return typeof t=="symbol"?t:t+""}function dJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fJ=(e,t,r,n)=>{var a=t.find(s=>s&&s.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},hJ=(e,t,r,n)=>{var a=t.find(h=>h&&h.index===r);if(a){if(e==="centric"){var s=a.coordinate,{radius:l}=n;return Jl(Jl(Jl({},n),cr(n.cx,n.cy,l,s)),{},{angle:s,radius:l})}var d=a.coordinate,{angle:f}=n;return Jl(Jl(Jl({},n),cr(n.cx,n.cy,d,f)),{},{angle:f,radius:d})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function mJ(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var xI=(e,t,r,n,a)=>{var s,l=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var d=0;d<l;d++){var f,h,p,g,y,v=d>0?(f=r[d-1])===null||f===void 0?void 0:f.coordinate:(h=r[l-1])===null||h===void 0?void 0:h.coordinate,j=(p=r[d])===null||p===void 0?void 0:p.coordinate,_=d>=l-1?(g=r[0])===null||g===void 0?void 0:g.coordinate:(y=r[d+1])===null||y===void 0?void 0:y.coordinate,S=void 0;if(!(v==null||j==null||_==null))if(Pr(j-v)!==Pr(_-j)){var N=[];if(Pr(_-j)===Pr(a[1]-a[0])){S=_;var E=j+a[1]-a[0];N[0]=Math.min(E,(E+v)/2),N[1]=Math.max(E,(E+v)/2)}else{S=v;var O=_+a[1]-a[0];N[0]=Math.min(j,(O+j)/2),N[1]=Math.max(j,(O+j)/2)}var C=[Math.min(j,(S+j)/2),Math.max(j,(S+j)/2)];if(e>C[0]&&e<=C[1]||e>=N[0]&&e<=N[1]){var D;return(D=r[d])===null||D===void 0?void 0:D.index}}else{var T=Math.min(v,_),M=Math.max(v,_);if(e>(T+j)/2&&e<=(M+j)/2){var R;return(R=r[d])===null||R===void 0?void 0:R.index}}}else if(t)for(var U=0;U<l;U++){var W=t[U];if(W!=null){var F=t[U+1],z=t[U-1];if(U===0&&F!=null&&e<=(W.coordinate+F.coordinate)/2||U===l-1&&z!=null&&e>(W.coordinate+z.coordinate)/2||U>0&&U<l-1&&z!=null&&F!=null&&e>(W.coordinate+z.coordinate)/2&&e<=(W.coordinate+F.coordinate)/2)return W.index}}return-1},pJ=()=>ke(Y1),Cj=(e,t)=>t,wI=(e,t,r)=>r,Pj=(e,t,r,n)=>n,gJ=X(Fi,e=>Vp(e,t=>t.coordinate)),kj=X([Xc,Cj,wI,Pj],oI),Tj=X([kj,Jc,jf,_f],Sj),yJ=(e,t,r)=>{if(t!=null){var n=Xc(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},jI=X([Xc,Cj,wI,Pj],cI),vp=X([Li,Bi,pt,xr,Fi,Pj,jI],lI),vJ=X([kj,vp],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),SI=X([Fi,Tj],rI),bJ=X([jI,Tj,Ui,jf,SI,uI,Cj],dI),xJ=X([kj,Tj],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),wJ=(e,t,r,n,a,s,l)=>{if(!(!e||!r||!n||!a)&&mJ(e,l)){var d=qQ(e,t),f=xI(d,s,a,r,n),h=fJ(t,a,f,e);return{activeIndex:String(f),activeCoordinate:h}}},jJ=(e,t,r,n,a,s,l)=>{if(!(!e||!n||!a||!s||!r)){var d=iG(e,r);if(d){var f=FQ(d,t),h=xI(f,l,s,n,a),p=hJ(t,s,h,d);return{activeIndex:String(h),activeCoordinate:p}}}},SJ=(e,t,r,n,a,s,l,d)=>{if(!(!e||!t||!n||!a||!s))return t==="horizontal"||t==="vertical"?wJ(e,t,n,a,s,l,d):jJ(e,t,r,n,a,s,l)},_J=X(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElement:n.element}}),NJ=X(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(ur)),r=Array.from(new Set(t));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:iX}});function PP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function kP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PP(Object(r),!0).forEach(function(n){EJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EJ(e,t,r){return(t=OJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OJ(e){var t=AJ(e,"string");return typeof t=="symbol"?t:t+""}function AJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CJ={},PJ={zIndexMap:Object.values(ur).reduce((e,t)=>kP(kP({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),CJ)},kJ=new Set(Object.values(ur));function TJ(e){return kJ.has(e)}var _I=vn({name:"zIndex",initialState:PJ,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:zt()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!TJ(r)&&delete e.zIndexMap[r])},prepare:zt()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:a}=t.payload;e.zIndexMap[r]?a?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:a?void 0:n,panoramaElement:a?n:void 0}},prepare:zt()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:zt()}}}),{registerZIndexPortal:DJ,unregisterZIndexPortal:MJ,registerZIndexPortalElement:RJ,unregisterZIndexPortalElement:IJ}=_I.actions,LJ=_I.reducer;function bn(e){var{zIndex:t,children:r}=e,n=xH(),a=n&&t!==void 0&&t!==0,s=Xr(),l=Mt();x.useLayoutEffect(()=>a?(l(DJ({zIndex:t})),()=>{l(MJ({zIndex:t}))}):Jo,[l,t,a]);var d=ke(f=>_J(f,t,s));return a?d?Tp.createPortal(r,d):null:r}function cw(){return cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cw.apply(null,arguments)}function TP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TP(Object(r),!0).forEach(function(n){BJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BJ(e,t,r){return(t=$J(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $J(e){var t=UJ(e,"string");return typeof t=="symbol"?t:t+""}function UJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zJ(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return x.isValidElement(t)?x.cloneElement(t,n):x.createElement(r,n)}function qJ(e){var t,{coordinate:r,payload:n,index:a,offset:s,tooltipAxisBandSize:l,layout:d,cursor:f,tooltipEventType:h,chartName:p}=e,g=r,y=n,v=a;if(!f||!g||p!=="ScatterChart"&&h!=="axis")return null;var j,_,S;if(p==="ScatterChart")j=g,_=bV,S=ur.cursorLine;else if(p==="BarChart")j=xV(d,g,s,l),_=jR,S=ur.cursorRectangle;else if(d==="radial"&&iM(g)){var{cx:N,cy:E,radius:O,startAngle:C,endAngle:D}=_R(g);j={cx:N,cy:E,startAngle:C,endAngle:D,innerRadius:O,outerRadius:O},_=ER,S=ur.cursorLine}else j={points:cG(d,g,s)},_=j1,S=ur.cursorLine;var T=typeof f=="object"&&"className"in f?f.className:void 0,M=mm(mm(mm(mm({stroke:"#ccc",pointerEvents:"none"},s),j),zo(f)),{},{payload:y,payloadIndex:v,className:ht("recharts-tooltip-cursor",T)});return x.createElement(bn,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},x.createElement(zJ,{cursor:f,cursorComp:_,cursorProps:M}))}function FJ(e){var t=lJ(),r=aR(),n=el(),a=pJ();return t==null||r==null||n==null||a==null?null:x.createElement(qJ,cw({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var NI=x.createContext(null),KJ=()=>x.useContext(NI),kb={exports:{}},DP;function QJ(){return DP||(DP=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(f,h,p){this.fn=f,this.context=h,this.once=p||!1}function s(f,h,p,g,y){if(typeof p!="function")throw new TypeError("The listener must be a function");var v=new a(p,g||f,y),j=r?r+h:h;return f._events[j]?f._events[j].fn?f._events[j]=[f._events[j],v]:f._events[j].push(v):(f._events[j]=v,f._eventsCount++),f}function l(f,h){--f._eventsCount===0?f._events=new n:delete f._events[h]}function d(){this._events=new n,this._eventsCount=0}d.prototype.eventNames=function(){var h=[],p,g;if(this._eventsCount===0)return h;for(g in p=this._events)t.call(p,g)&&h.push(r?g.slice(1):g);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},d.prototype.listeners=function(h){var p=r?r+h:h,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var y=0,v=g.length,j=new Array(v);y<v;y++)j[y]=g[y].fn;return j},d.prototype.listenerCount=function(h){var p=r?r+h:h,g=this._events[p];return g?g.fn?1:g.length:0},d.prototype.emit=function(h,p,g,y,v,j){var _=r?r+h:h;if(!this._events[_])return!1;var S=this._events[_],N=arguments.length,E,O;if(S.fn){switch(S.once&&this.removeListener(h,S.fn,void 0,!0),N){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,p),!0;case 3:return S.fn.call(S.context,p,g),!0;case 4:return S.fn.call(S.context,p,g,y),!0;case 5:return S.fn.call(S.context,p,g,y,v),!0;case 6:return S.fn.call(S.context,p,g,y,v,j),!0}for(O=1,E=new Array(N-1);O<N;O++)E[O-1]=arguments[O];S.fn.apply(S.context,E)}else{var C=S.length,D;for(O=0;O<C;O++)switch(S[O].once&&this.removeListener(h,S[O].fn,void 0,!0),N){case 1:S[O].fn.call(S[O].context);break;case 2:S[O].fn.call(S[O].context,p);break;case 3:S[O].fn.call(S[O].context,p,g);break;case 4:S[O].fn.call(S[O].context,p,g,y);break;default:if(!E)for(D=1,E=new Array(N-1);D<N;D++)E[D-1]=arguments[D];S[O].fn.apply(S[O].context,E)}}return!0},d.prototype.on=function(h,p,g){return s(this,h,p,g,!1)},d.prototype.once=function(h,p,g){return s(this,h,p,g,!0)},d.prototype.removeListener=function(h,p,g,y){var v=r?r+h:h;if(!this._events[v])return this;if(!p)return l(this,v),this;var j=this._events[v];if(j.fn)j.fn===p&&(!y||j.once)&&(!g||j.context===g)&&l(this,v);else{for(var _=0,S=[],N=j.length;_<N;_++)(j[_].fn!==p||y&&!j[_].once||g&&j[_].context!==g)&&S.push(j[_]);S.length?this._events[v]=S.length===1?S[0]:S:l(this,v)}return this},d.prototype.removeAllListeners=function(h){var p;return h?(p=r?r+h:h,this._events[p]&&l(this,p)):(this._events=new n,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=r,d.EventEmitter=d,e.exports=d})(kb)),kb.exports}var HJ=QJ();const VJ=Ka(HJ);var Id=new VJ,uw="recharts.syncEvent.tooltip",MP="recharts.syncEvent.brush",Dj=(e,t)=>{if(t&&Array.isArray(e)){var r=Number.parseInt(t,10);if(!Ua(r))return e[r]}},GJ={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},EI=vn({name:"options",initialState:GJ,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),YJ=EI.reducer,{createEventEmitter:WJ}=EI.actions;function XJ(e){return e.tooltip.syncInteraction}var ZJ={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},OI=vn({name:"chartData",initialState:ZJ,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:RP,setDataStartEndIndexes:JJ,setComputedData:ble}=OI.actions,eee=OI.reducer,tee=["x","y"];function IP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ec(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IP(Object(r),!0).forEach(function(n){ree(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ree(e,t,r){return(t=nee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nee(e){var t=aee(e,"string");return typeof t=="symbol"?t:t+""}function aee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iee(e,t){if(e==null)return{};var r,n,a=see(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function see(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function oee(){var e=ke(W1),t=ke(X1),r=Mt(),n=ke(w4),a=ke(Fi),s=el(),l=og(),d=ke(f=>f.rootProps.className);x.useEffect(()=>{if(e==null)return Jo;var f=(h,p,g)=>{if(t!==g&&e===h){if(n==="index"){var y;if(l&&p!==null&&p!==void 0&&(y=p.payload)!==null&&y!==void 0&&y.coordinate&&p.payload.sourceViewBox){var v=p.payload.coordinate,{x:j,y:_}=v,S=iee(v,tee),{x:N,y:E,width:O,height:C}=p.payload.sourceViewBox,D=ec(ec({},S),{},{x:l.x+(O?(j-N)/O:0)*l.width,y:l.y+(C?(_-E)/C:0)*l.height});r(ec(ec({},p),{},{payload:ec(ec({},p.payload),{},{coordinate:D})}))}else r(p);return}if(a!=null){var T;if(typeof n=="function"){var M={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},R=n(a,M);T=a[R]}else n==="value"&&(T=a.find(I=>String(I.value)===p.payload.label));var{coordinate:U}=p.payload;if(T==null||p.payload.active===!1||U==null||l==null){r(ow({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:W,y:F}=U,z=Math.min(W,l.x+l.width),pe=Math.min(F,l.y+l.height),oe={x:s==="horizontal"?T.coordinate:z,y:s==="horizontal"?pe:T.coordinate},me=ow({active:p.payload.active,coordinate:oe,dataKey:p.payload.dataKey,index:String(T.index),label:p.payload.label,sourceViewBox:p.payload.sourceViewBox,graphicalItemId:p.payload.graphicalItemId});r(me)}}};return Id.on(uw,f),()=>{Id.off(uw,f)}},[d,r,t,e,n,a,s,l])}function lee(){var e=ke(W1),t=ke(X1),r=Mt();x.useEffect(()=>{if(e==null)return Jo;var n=(a,s,l)=>{t!==l&&e===a&&r(JJ(s))};return Id.on(MP,n),()=>{Id.off(MP,n)}},[r,t,e])}function cee(){var e=Mt();x.useEffect(()=>{e(WJ())},[e]),oee(),lee()}function uee(e,t,r,n,a,s){var l=ke(v=>yJ(v,e,t)),d=ke(X1),f=ke(W1),h=ke(w4),p=ke(XJ),g=p==null?void 0:p.active,y=og();x.useEffect(()=>{if(!g&&f!=null&&d!=null){var v=ow({active:s,coordinate:r,dataKey:l,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:y,graphicalItemId:void 0});Id.emit(uw,f,v,d)}},[g,r,l,a,n,d,f,h,s,y])}function LP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function BP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LP(Object(r),!0).forEach(function(n){dee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dee(e,t,r){return(t=fee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fee(e){var t=hee(e,"string");return typeof t=="symbol"?t:t+""}function hee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mee(e){return e.dataKey}function pee(e,t){return x.isValidElement(e)?x.cloneElement(e,t):typeof e=="function"?x.createElement(e,t):x.createElement(ZH,t)}var $P=[],gee={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function _o(e){var t,r,n=fr(e,gee),{active:a,allowEscapeViewBox:s,animationDuration:l,animationEasing:d,content:f,filterNull:h,isAnimationActive:p,offset:g,payloadUniqBy:y,position:v,reverseDirection:j,useTranslate3d:_,wrapperStyle:S,cursor:N,shared:E,trigger:O,defaultIndex:C,portal:D,axisId:T}=n,M=Mt(),R=typeof C=="number"?String(C):C;x.useEffect(()=>{M(dZ({shared:E,trigger:O,axisId:T,active:a,defaultIndex:R}))},[M,E,O,T,a,R]);var U=og(),W=yR(),F=iZ(E),{activeIndex:z,isActive:pe}=(t=ke(ge=>xJ(ge,F,O,R)))!==null&&t!==void 0?t:{},oe=ke(ge=>bJ(ge,F,O,R)),me=ke(ge=>SI(ge,F,O,R)),I=ke(ge=>vJ(ge,F,O,R)),H=oe,ie=KJ(),he=(r=a??pe)!==null&&r!==void 0?r:!1,[K,P]=bM([H,he]),B=F==="axis"?me:void 0;uee(F,O,I,B,z,he);var Y=D??ie;if(Y==null||U==null||F==null)return null;var ne=H??$P;he||(ne=$P),h&&ne.length&&(ne=mM(ne.filter(ge=>ge.value!=null&&(ge.hide!==!0||n.includeHidden)),y,mee));var G=ne.length>0,be=x.createElement(iV,{allowEscapeViewBox:s,animationDuration:l,animationEasing:d,isAnimationActive:p,active:he,coordinate:I,hasPayload:G,offset:g,position:v,reverseDirection:j,useTranslate3d:_,viewBox:U,wrapperStyle:S,lastBoundingBox:K,innerRef:P,hasPortalFromProps:!!D},pee(f,BP(BP({},n),{},{payload:ne,label:B,active:he,activeIndex:z,coordinate:I,accessibilityLayer:W})));return x.createElement(x.Fragment,null,Tp.createPortal(be,Y),he&&x.createElement(FJ,{cursor:N,tooltipEventType:F,coordinate:I,payload:ne,index:z}))}var nl=e=>null;nl.displayName="Cell";function yee(e,t,r){return(t=vee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vee(e){var t=bee(e,"string");return typeof t=="symbol"?t:t+""}function bee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class xee{constructor(t){yee(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function UP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wee(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UP(Object(r),!0).forEach(function(n){jee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jee(e,t,r){return(t=See(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function See(e){var t=_ee(e,"string");return typeof t=="symbol"?t:t+""}function _ee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nee={cacheSize:2e3,enableCache:!0},AI=wee({},Nee),zP=new xee(AI.cacheSize),Eee={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},qP="recharts_measurement_span";function Oee(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",l=t.letterSpacing||"",d=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(l,"|").concat(d)}var FP=(e,t)=>{try{var r=document.getElementById(qP);r||(r=document.createElement("span"),r.setAttribute("id",qP),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,Eee,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},fd=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||dg.isSsr)return{width:0,height:0};if(!AI.enableCache)return FP(t,r);var n=Oee(t,r),a=zP.get(n);if(a)return a;var s=FP(t,r);return zP.set(n,s),s},CI;function Aee(e,t,r){return(t=Cee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cee(e){var t=Pee(e,"string");return typeof t=="symbol"?t:t+""}function Pee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,QP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,kee=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Tee=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Dee={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Mee=["cm","mm","pt","pc","in","Q","px"];function Ree(e){return Mee.includes(e)}var oc="NaN";function Iee(e,t){return e*Dee[t]}class Fr{static parse(t){var r,[,n,a]=(r=Tee.exec(t))!==null&&r!==void 0?r:[];return n==null?Fr.NaN:new Fr(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Ua(t)&&(this.unit=""),r!==""&&!kee.test(r)&&(this.num=NaN,this.unit=""),Ree(r)&&(this.num=Iee(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Fr(NaN,""):new Fr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Fr(NaN,""):new Fr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Fr(NaN,""):new Fr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Fr(NaN,""):new Fr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ua(this.num)}}CI=Fr;Aee(Fr,"NaN",new CI(NaN,""));function PI(e){if(e==null||e.includes(oc))return oc;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=(r=KP.exec(t))!==null&&r!==void 0?r:[],l=Fr.parse(n??""),d=Fr.parse(s??""),f=a==="*"?l.multiply(d):l.divide(d);if(f.isNaN())return oc;t=t.replace(KP,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,p,g,y]=(h=QP.exec(t))!==null&&h!==void 0?h:[],v=Fr.parse(p??""),j=Fr.parse(y??""),_=g==="+"?v.add(j):v.subtract(j);if(_.isNaN())return oc;t=t.replace(QP,_.toString())}return t}var HP=/\(([^()]*)\)/;function Lee(e){for(var t=e,r;(r=HP.exec(t))!=null;){var[,n]=r;t=t.replace(HP,PI(n))}return t}function Bee(e){var t=e.replace(/\s+/g,"");return t=Lee(t),t=PI(t),t}function $ee(e){try{return Bee(e)}catch{return oc}}function Tb(e){var t=$ee(e.slice(5,-1));return t===oc?"":t}var Uee=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],zee=["dx","dy","angle","className","breakAll"];function dw(){return dw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dw.apply(null,arguments)}function VP(e,t){if(e==null)return{};var r,n,a=qee(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function qee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var kI=/[ \f\n\r\t\v\u2028\u2029]+/,TI=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];Ht(t)||(r?a=t.toString().split(""):a=t.toString().split(kI));var s=a.map(d=>({word:d,width:fd(d,n).width})),l=r?0:fd("",n).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}};function Fee(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var DI=(e,t,r,n)=>e.reduce((a,s)=>{var{word:l,width:d}=s,f=a[a.length-1];if(f&&d!=null&&(t==null||n||f.width+d+r<Number(t)))f.words.push(l),f.width+=d+r;else{var h={words:[l],width:d};a.push(h)}return a},[]),MI=e=>e.reduce((t,r)=>t.width>r.width?t:r),Kee="",GP=(e,t,r,n,a,s,l,d)=>{var f=e.slice(0,t),h=TI({breakAll:r,style:n,children:f+Kee});if(!h)return[!1,[]];var p=DI(h.wordsWithComputedWidth,s,l,d),g=p.length>a||MI(p).width>Number(s);return[g,p]},Qee=(e,t,r,n,a)=>{var{maxLines:s,children:l,style:d,breakAll:f}=e,h=Oe(s),p=String(l),g=DI(t,n,r,a);if(!h||a)return g;var y=g.length>s||MI(g).width>Number(n);if(!y)return g;for(var v=0,j=p.length-1,_=0,S;v<=j&&_<=p.length-1;){var N=Math.floor((v+j)/2),E=N-1,[O,C]=GP(p,E,f,d,s,n,r,a),[D]=GP(p,N,f,d,s,n,r,a);if(!O&&!D&&(v=N+1),O&&D&&(j=N-1),!O&&D){S=C;break}_++}return S||g},YP=e=>{var t=Ht(e)?[]:e.toString().split(kI);return[{words:t,width:void 0}]},Hee=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:l}=e;if((t||r)&&!dg.isSsr){var d,f,h=TI({breakAll:s,children:n,style:a});if(h){var{wordsWithComputedWidth:p,spaceWidth:g}=h;d=p,f=g}else return YP(n);return Qee({breakAll:s,children:n,maxLines:l,style:a},d,f,t,!!r)}return YP(n)},RI="#808080",Vee={angle:0,breakAll:!1,capHeight:"0.71em",fill:RI,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},kg=x.forwardRef((e,t)=>{var r=fr(e,Vee),{x:n,y:a,lineHeight:s,capHeight:l,fill:d,scaleToFit:f,textAnchor:h,verticalAnchor:p}=r,g=VP(r,Uee),y=x.useMemo(()=>Hee({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:f,style:g.style,width:g.width}),[g.breakAll,g.children,g.maxLines,f,g.style,g.width]),{dx:v,dy:j,angle:_,className:S,breakAll:N}=g,E=VP(g,zee);if(!za(n)||!za(a)||y.length===0)return null;var O=Number(n)+(Oe(v)?v:0),C=Number(a)+(Oe(j)?j:0);if(!st(O)||!st(C))return null;var D;switch(p){case"start":D=Tb("calc(".concat(l,")"));break;case"middle":D=Tb("calc(".concat((y.length-1)/2," * -").concat(s," + (").concat(l," / 2))"));break;default:D=Tb("calc(".concat(y.length-1," * -").concat(s,")"));break}var T=[],M=y[0];if(f&&M!=null){var R=M.width,{width:U}=g;T.push("scale(".concat(Oe(U)&&Oe(R)?U/R:1,")"))}return _&&T.push("rotate(".concat(_,", ").concat(O,", ").concat(C,")")),T.length&&(E.transform=T.join(" ")),x.createElement("text",dw({},nn(E),{ref:t,x:O,y:C,className:ht("recharts-text",S),textAnchor:h,fill:d.includes("url")?RI:d}),y.map((W,F)=>{var z=W.words.join(N?"":" ");return x.createElement("tspan",{x:O,dy:F===0?D:s,key:"".concat(z,"-").concat(F)},z)}))});kg.displayName="Text";function WP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ka(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WP(Object(r),!0).forEach(function(n){Gee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gee(e,t,r){return(t=Yee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yee(e){var t=Wee(e,"string");return typeof t=="symbol"?t:t+""}function Wee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xee=e=>{var{viewBox:t,position:r,offset:n=0,parentViewBox:a}=e,{x:s,y:l,height:d,upperWidth:f,lowerWidth:h}=y1(t),p=s,g=s+(f-h)/2,y=(p+g)/2,v=(f+h)/2,j=p+f/2,_=d>=0?1:-1,S=_*n,N=_>0?"end":"start",E=_>0?"start":"end",O=f>=0?1:-1,C=O*n,D=O>0?"end":"start",T=O>0?"start":"end",M=a;if(r==="top"){var R={x:p+f/2,y:l-S,horizontalAnchor:"middle",verticalAnchor:N};return M&&(R.height=Math.max(l-M.y,0),R.width=f),R}if(r==="bottom"){var U={x:g+h/2,y:l+d+S,horizontalAnchor:"middle",verticalAnchor:E};return M&&(U.height=Math.max(M.y+M.height-(l+d),0),U.width=h),U}if(r==="left"){var W={x:y-C,y:l+d/2,horizontalAnchor:D,verticalAnchor:"middle"};return M&&(W.width=Math.max(W.x-M.x,0),W.height=d),W}if(r==="right"){var F={x:y+v+C,y:l+d/2,horizontalAnchor:T,verticalAnchor:"middle"};return M&&(F.width=Math.max(M.x+M.width-F.x,0),F.height=d),F}var z=M?{width:v,height:d}:{};return r==="insideLeft"?ka({x:y+C,y:l+d/2,horizontalAnchor:T,verticalAnchor:"middle"},z):r==="insideRight"?ka({x:y+v-C,y:l+d/2,horizontalAnchor:D,verticalAnchor:"middle"},z):r==="insideTop"?ka({x:p+f/2,y:l+S,horizontalAnchor:"middle",verticalAnchor:E},z):r==="insideBottom"?ka({x:g+h/2,y:l+d-S,horizontalAnchor:"middle",verticalAnchor:N},z):r==="insideTopLeft"?ka({x:p+C,y:l+S,horizontalAnchor:T,verticalAnchor:E},z):r==="insideTopRight"?ka({x:p+f-C,y:l+S,horizontalAnchor:D,verticalAnchor:E},z):r==="insideBottomLeft"?ka({x:g+C,y:l+d-S,horizontalAnchor:T,verticalAnchor:N},z):r==="insideBottomRight"?ka({x:g+h-C,y:l+d-S,horizontalAnchor:D,verticalAnchor:N},z):r&&typeof r=="object"&&(Oe(r.x)||Ko(r.x))&&(Oe(r.y)||Ko(r.y))?ka({x:s+Yr(r.x,v),y:l+Yr(r.y,d),horizontalAnchor:"end",verticalAnchor:"end"},z):ka({x:j,y:l+d/2,horizontalAnchor:"middle",verticalAnchor:"middle"},z)},Zee=["labelRef"],Jee=["content"];function XP(e,t){if(e==null)return{};var r,n,a=ete(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ete(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ZP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZP(Object(r),!0).forEach(function(n){tte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tte(e,t,r){return(t=rte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rte(e){var t=nte(e,"string");return typeof t=="symbol"?t:t+""}function nte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yi(){return yi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yi.apply(null,arguments)}var II=x.createContext(null),ate=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:a,width:s,height:l,children:d}=e,f=x.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:a,width:s,height:l}),[t,r,n,a,s,l]);return x.createElement(II.Provider,{value:f},d)},LI=()=>{var e=x.useContext(II),t=og();return e||(t?y1(t):void 0)},ite=x.createContext(null),ste=()=>{var e=x.useContext(ite),t=ke(E4);return e||t},ote=e=>{var{value:t,formatter:r}=e,n=Ht(e.children)?t:e.children;return typeof r=="function"?r(n):n},Mj=e=>e!=null&&typeof e=="function",lte=(e,t)=>{var r=Pr(t-e),n=Math.min(Math.abs(t-e),360);return r*n},cte=(e,t,r,n,a)=>{var{offset:s,className:l}=e,{cx:d,cy:f,innerRadius:h,outerRadius:p,startAngle:g,endAngle:y,clockWise:v}=a,j=(h+p)/2,_=lte(g,y),S=_>=0?1:-1,N,E;switch(t){case"insideStart":N=g+S*s,E=v;break;case"insideEnd":N=y-S*s,E=!v;break;case"end":N=y+S*s,E=v;break;default:throw new Error("Unsupported position ".concat(t))}E=_<=0?E:!E;var O=cr(d,f,j,N),C=cr(d,f,j,N+(E?1:-1)*359),D="M".concat(O.x,",").concat(O.y,`
    A`).concat(j,",").concat(j,",0,1,").concat(E?0:1,`,
    `).concat(C.x,",").concat(C.y),T=Ht(e.id)?jd("recharts-radial-line-"):e.id;return x.createElement("text",yi({},n,{dominantBaseline:"central",className:ht("recharts-radial-bar-label",l)}),x.createElement("defs",null,x.createElement("path",{id:T,d:D})),x.createElement("textPath",{xlinkHref:"#".concat(T)},r))},ute=(e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:l,startAngle:d,endAngle:f}=e,h=(d+f)/2;if(r==="outside"){var{x:p,y:g}=cr(n,a,l+t,h);return{x:p,y:g,textAnchor:p>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var y=(s+l)/2,{x:v,y:j}=cr(n,a,y,h);return{x:v,y:j,textAnchor:"middle",verticalAnchor:"middle"}},_m=e=>e!=null&&"cx"in e&&Oe(e.cx),dte={angle:0,offset:5,zIndex:ur.label,position:"middle",textBreakAll:!1};function fte(e){if(!_m(e))return e;var{cx:t,cy:r,outerRadius:n}=e,a=n*2;return{x:t-n,y:r-n,width:a,upperWidth:a,lowerWidth:a,height:a}}function vs(e){var t=fr(e,dte),{viewBox:r,parentViewBox:n,position:a,value:s,children:l,content:d,className:f="",textBreakAll:h,labelRef:p}=t,g=ste(),y=LI(),v=a==="center"?y:g??y,j,_,S;r==null?j=v:_m(r)?j=r:j=y1(r);var N=fte(j);if(!j||Ht(s)&&Ht(l)&&!x.isValidElement(d)&&typeof d!="function")return null;var E=cd(cd({},t),{},{viewBox:j});if(x.isValidElement(d)){var{labelRef:O}=E,C=XP(E,Zee);return x.cloneElement(d,C)}if(typeof d=="function"){var{content:D}=E,T=XP(E,Jee);if(_=x.createElement(d,T),x.isValidElement(_))return _}else _=ote(t);var M=nn(t);if(_m(j)){if(a==="insideStart"||a==="insideEnd"||a==="end")return cte(t,a,_,M,j);S=ute(j,t.offset,t.position)}else{if(!N)return null;var R=Xee({viewBox:N,position:a,offset:t.offset,parentViewBox:_m(n)?void 0:n});S=cd(cd({x:R.x,y:R.y,textAnchor:R.horizontalAnchor,verticalAnchor:R.verticalAnchor},R.width!==void 0?{width:R.width}:{}),R.height!==void 0?{height:R.height}:{})}return x.createElement(bn,{zIndex:t.zIndex},x.createElement(kg,yi({ref:p,className:ht("recharts-label",f)},M,S,{textAnchor:Fee(M.textAnchor)?M.textAnchor:S.textAnchor,breakAll:h}),_))}vs.displayName="Label";var hte=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?x.createElement(vs,yi({key:"label-implicit"},n)):za(e)?x.createElement(vs,yi({key:"label-implicit",value:e},n)):x.isValidElement(e)?e.type===vs?x.cloneElement(e,cd({key:"label-implicit"},n)):x.createElement(vs,yi({key:"label-implicit",content:e},n)):Mj(e)?x.createElement(vs,yi({key:"label-implicit",content:e},n)):e&&typeof e=="object"?x.createElement(vs,yi({},e,{key:"label-implicit"},n)):null};function mte(e){var{label:t,labelRef:r}=e,n=LI();return hte(t,n,r)||null}var Db={},Mb={},JP;function pte(){return JP||(JP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(Mb)),Mb}var Rb={},ek;function gte(){return ek||(ek=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(Rb)),Rb}var tk;function yte(){return tk||(tk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pte(),r=gte(),n=s1();function a(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=a})(Db)),Db}var Ib,rk;function vte(){return rk||(rk=1,Ib=yte().last),Ib}var bte=vte();const xte=Ka(bte);var wte=["valueAccessor"],jte=["dataKey","clockWise","id","textBreakAll","zIndex"];function bp(){return bp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bp.apply(null,arguments)}function nk(e,t){if(e==null)return{};var r,n,a=Ste(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ste(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _te=e=>Array.isArray(e.value)?xte(e.value):e.value,BI=x.createContext(void 0),$I=BI.Provider,UI=x.createContext(void 0),Nte=UI.Provider;function Ete(){return x.useContext(BI)}function Ote(){return x.useContext(UI)}function Nm(e){var{valueAccessor:t=_te}=e,r=nk(e,wte),{dataKey:n,clockWise:a,id:s,textBreakAll:l,zIndex:d}=r,f=nk(r,jte),h=Ete(),p=Ote(),g=h||p;return!g||!g.length?null:x.createElement(bn,{zIndex:d??ur.label},x.createElement(kr,{className:"recharts-label-list"},g.map((y,v)=>{var j,_=Ht(n)?t(y,v):Ct(y.payload,n),S=Ht(s)?{}:{id:"".concat(s,"-").concat(v)};return x.createElement(vs,bp({key:"label-".concat(v)},nn(y),f,S,{fill:(j=r.fill)!==null&&j!==void 0?j:y.fill,parentViewBox:y.parentViewBox,value:_,textBreakAll:l,viewBox:y.viewBox,index:v,zIndex:0}))})))}Nm.displayName="LabelList";function Rj(e){var{label:t}=e;return t?t===!0?x.createElement(Nm,{key:"labelList-implicit"}):x.isValidElement(t)||Mj(t)?x.createElement(Nm,{key:"labelList-implicit",content:t}):typeof t=="object"?x.createElement(Nm,bp({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function fw(){return fw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fw.apply(null,arguments)}var zI=e=>{var{cx:t,cy:r,r:n,className:a}=e,s=ht("recharts-dot",a);return Oe(t)&&Oe(r)&&Oe(n)?x.createElement("circle",fw({},Mn(e),i1(e),{className:s,cx:t,cy:r,r:n})):null},qI=e=>e.graphicalItems.polarItems,Ate=X([Vt,xf],nj),Tg=X([qI,tr,Ate],aj),Cte=X([Tg],ij),Dg=X([Cte,vg],sj),Pte=X([Dg,tr,Tg],lj);X([Dg,tr,Tg],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var s,l=Ct(n,(s=t.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ct(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var ak=()=>{},kte=X([Dg,tr,Tg,Og,Vt],fj),Tte=X([tr,uj,dj,ak,kte,ak,pt,Vt],hj),FI=X([tr,pt,Dg,Pte,bf,Vt,Tte],mj),Dte=X([FI,Yc,Ks],yj),Mte=X([tr,FI,Dte,Vt],bj);X([Ks,Mte],A4);var Rte={radiusAxis:{},angleAxis:{}},KI=vn({name:"polarAxis",initialState:Rte,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:xle,removeRadiusAxis:wle,addAngleAxis:jle,removeAngleAxis:Sle}=KI.actions,Ite=KI.reducer;function QI(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}function ik(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ik(Object(r),!0).forEach(function(n){Lte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ik(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lte(e,t,r){return(t=Bte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bte(e){var t=$te(e,"string");return typeof t=="symbol"?t:t+""}function $te(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ute=(e,t)=>t,Ij=X([qI,Ute],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),zte=[],Lj=(e,t,r)=>(r==null?void 0:r.length)===0?zte:r,HI=X([vg,Ij,Lj],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>sk(sk({},t.presentationProps),s.props))),a!=null)return a}}),qte=X([HI,Ij,Lj],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var s,l=Ct(n,t.nameKey,t.name),d;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?d=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?d=n.fill:d=t.fill,{value:Kc(l,t.dataKey),color:d,payload:n,type:t.legendType}})}),Fte=X([HI,Ij,Lj,xr],(e,t,r,n)=>{if(!(t==null||e==null))return Kre({offset:n,pieSettings:t,displayedData:e,cells:r})}),Lb={exports:{}},At={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ok;function Kte(){if(ok)return At;ok=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),v=Symbol.for("react.client.reference");function j(_){if(typeof _=="object"&&_!==null){var S=_.$$typeof;switch(S){case e:switch(_=_.type,_){case r:case a:case n:case f:case h:case y:return _;default:switch(_=_&&_.$$typeof,_){case l:case d:case g:case p:return _;case s:return _;default:return S}}case t:return S}}}return At.ContextConsumer=s,At.ContextProvider=l,At.Element=e,At.ForwardRef=d,At.Fragment=r,At.Lazy=g,At.Memo=p,At.Portal=t,At.Profiler=a,At.StrictMode=n,At.Suspense=f,At.SuspenseList=h,At.isContextConsumer=function(_){return j(_)===s},At.isContextProvider=function(_){return j(_)===l},At.isElement=function(_){return typeof _=="object"&&_!==null&&_.$$typeof===e},At.isForwardRef=function(_){return j(_)===d},At.isFragment=function(_){return j(_)===r},At.isLazy=function(_){return j(_)===g},At.isMemo=function(_){return j(_)===p},At.isPortal=function(_){return j(_)===t},At.isProfiler=function(_){return j(_)===a},At.isStrictMode=function(_){return j(_)===n},At.isSuspense=function(_){return j(_)===f},At.isSuspenseList=function(_){return j(_)===h},At.isValidElementType=function(_){return typeof _=="string"||typeof _=="function"||_===r||_===a||_===n||_===f||_===h||typeof _=="object"&&_!==null&&(_.$$typeof===g||_.$$typeof===p||_.$$typeof===l||_.$$typeof===s||_.$$typeof===d||_.$$typeof===v||_.getModuleId!==void 0)},At.typeOf=j,At}var lk;function Qte(){return lk||(lk=1,Lb.exports=Kte()),Lb.exports}var Hte=Qte(),ck=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",uk=null,Bb=null,VI=e=>{if(e===uk&&Array.isArray(Bb))return Bb;var t=[];return x.Children.forEach(e,r=>{Ht(r)||(Hte.isFragment(r)?t=t.concat(VI(r.props.children)):t.push(r))}),Bb=t,uk=e,t};function Bj(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>ck(a)):n=[ck(t)],VI(e).forEach(a=>{var s=Fo(a,"type.displayName")||Fo(a,"type.name");s&&n.indexOf(s)!==-1&&r.push(a)}),r}var GI=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,$b={},dk;function Vte(){return dk||(dk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})($b)),$b}var Ub,fk;function Gte(){return fk||(fk=1,Ub=Vte().isPlainObject),Ub}var Yte=Gte();const Wte=Ka(Yte);var hk,mk,pk,gk,yk;function vk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vk(Object(r),!0).forEach(function(n){Xte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xte(e,t,r){return(t=Zte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zte(e){var t=Jte(e,"string");return typeof t=="symbol"?t:t+""}function Jte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xp(){return xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xp.apply(null,arguments)}function ad(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var xk=(e,t,r,n,a)=>{var s=r-n,l;return l=Jt(hk||(hk=ad(["M ",",",""])),e,t),l+=Jt(mk||(mk=ad(["L ",",",""])),e+r,t),l+=Jt(pk||(pk=ad(["L ",",",""])),e+r-s/2,t+a),l+=Jt(gk||(gk=ad(["L ",",",""])),e+r-s/2-n,t+a),l+=Jt(yk||(yk=ad(["L ",","," Z"])),e,t),l},ere={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},tre=e=>{var t=fr(e,ere),{x:r,y:n,upperWidth:a,lowerWidth:s,height:l,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isUpdateAnimationActive:g}=t,y=x.useRef(null),[v,j]=x.useState(-1),_=x.useRef(a),S=x.useRef(s),N=x.useRef(l),E=x.useRef(r),O=x.useRef(n),C=mf(e,"trapezoid-");if(x.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var oe=y.current.getTotalLength();oe&&j(oe)}catch{}},[]),r!==+r||n!==+n||a!==+a||s!==+s||l!==+l||a===0&&s===0||l===0)return null;var D=ht("recharts-trapezoid",d);if(!g)return x.createElement("g",null,x.createElement("path",xp({},nn(t),{className:D,d:xk(r,n,a,s,l)})));var T=_.current,M=S.current,R=N.current,U=E.current,W=O.current,F="0px ".concat(v===-1?1:v,"px"),z="".concat(v,"px 0px"),pe=vR(["strokeDasharray"],h,f);return x.createElement(hf,{animationId:C,key:C,canBegin:v>0,duration:h,easing:f,isActive:g,begin:p},oe=>{var me=qt(T,a,oe),I=qt(M,s,oe),H=qt(R,l,oe),ie=qt(U,r,oe),he=qt(W,n,oe);y.current&&(_.current=me,S.current=I,N.current=H,E.current=ie,O.current=he);var K=oe>0?{transition:pe,strokeDasharray:z}:{strokeDasharray:F};return x.createElement("path",xp({},nn(t),{className:D,d:xk(ie,he,me,I,H),ref:y,style:bk(bk({},K),t.style)}))})},rre=["option","shapeType","activeClassName"];function nre(e,t){if(e==null)return{};var r,n,a=are(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function are(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function wk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wk(Object(r),!0).forEach(function(n){ire(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ire(e,t,r){return(t=sre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sre(e){var t=ore(e,"string");return typeof t=="symbol"?t:t+""}function ore(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lre(e,t){return wp(wp({},t),e)}function cre(e,t){return e==="symbols"}function jk(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return x.createElement(jR,r);case"trapezoid":return x.createElement(tre,r);case"sector":return x.createElement(ER,r);case"symbols":if(cre(t))return x.createElement(a1,r);break;case"curve":return x.createElement(j1,r);default:return null}}function ure(e){return x.isValidElement(e)?e.props:e}function $j(e){var{option:t,shapeType:r,activeClassName:n="recharts-active-shape"}=e,a=nre(e,rre),s;if(x.isValidElement(t))s=x.cloneElement(t,wp(wp({},a),ure(t)));else if(typeof t=="function")s=t(a,a.index);else if(Wte(t)&&typeof t!="boolean"){var l=lre(t,a);s=x.createElement(jk,{shapeType:r,elementProps:l})}else{var d=a;s=x.createElement(jk,{shapeType:r,elementProps:d})}return a.isActive?x.createElement(kr,{className:n},s):s}var Uj=(e,t,r)=>{var n=Mt();return(a,s)=>l=>{e==null||e(a,s,l),n(aI({activeIndex:String(s),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}},zj=e=>{var t=Mt();return(r,n)=>a=>{e==null||e(r,n,a),t(fZ())}},qj=(e,t,r)=>{var n=Mt();return(a,s)=>l=>{e==null||e(a,s,l),n(hZ({activeIndex:String(s),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}};function Fj(e){var{tooltipEntrySettings:t}=e,r=Mt(),n=Xr(),a=x.useRef(null);return x.useLayoutEffect(()=>{n||(a.current===null?r(lZ(t)):a.current!==t&&r(cZ({prev:a.current,next:t})),a.current=t)},[t,r,n]),x.useLayoutEffect(()=>()=>{a.current&&(r(uZ(a.current)),a.current=null)},[r]),null}function YI(e){var{legendPayload:t}=e,r=Mt(),n=Xr(),a=x.useRef(null);return x.useLayoutEffect(()=>{n||(a.current===null?r(mR(t)):a.current!==t&&r(pR({prev:a.current,next:t})),a.current=t)},[r,n,t]),x.useLayoutEffect(()=>()=>{a.current&&(r(gR(a.current)),a.current=null)},[r]),null}function dre(e){var{legendPayload:t}=e,r=Mt(),n=ke(pt),a=x.useRef(null);return x.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(a.current===null?r(mR(t)):a.current!==t&&r(pR({prev:a.current,next:t})),a.current=t)},[r,n,t]),x.useLayoutEffect(()=>()=>{a.current&&(r(gR(a.current)),a.current=null)},[r]),null}var zb,fre=()=>{var[e]=x.useState(()=>jd("uid-"));return e},hre=(zb=oB.useId)!==null&&zb!==void 0?zb:fre;function mre(e,t){var r=hre();return t||(e?"".concat(e,"-").concat(r):r)}var pre=x.createContext(void 0),Kj=e=>{var{id:t,type:r,children:n}=e,a=mre("recharts-".concat(r),t);return x.createElement(pre.Provider,{value:a},n(a))},gre={cartesianItems:[],polarItems:[]},WI=vn({name:"graphicalItems",initialState:gre,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:zt()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,a=ba(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},prepare:zt()},removeCartesianGraphicalItem:{reducer(e,t){var r=ba(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:zt()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:zt()},removePolarGraphicalItem:{reducer(e,t){var r=ba(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:zt()}}}),{addCartesianGraphicalItem:yre,replaceCartesianGraphicalItem:vre,removeCartesianGraphicalItem:bre,addPolarGraphicalItem:xre,removePolarGraphicalItem:wre}=WI.actions,jre=WI.reducer,Sre=e=>{var t=Mt(),r=x.useRef(null);return x.useLayoutEffect(()=>{r.current===null?t(yre(e)):r.current!==e&&t(vre({prev:r.current,next:e})),r.current=e},[t,e]),x.useLayoutEffect(()=>()=>{r.current&&(t(bre(r.current)),r.current=null)},[t]),null},XI=x.memo(Sre);function _re(e){var t=Mt();return x.useLayoutEffect(()=>(t(xre(e)),()=>{t(wre(e))}),[t,e]),null}var Nre=["key"],Ere=["onMouseEnter","onClick","onMouseLeave"],Ore=["id"],Are=["id"];function Sk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function er(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sk(Object(r),!0).forEach(function(n){Cre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cre(e,t,r){return(t=Pre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pre(e){var t=kre(e,"string");return typeof t=="symbol"?t:t+""}function kre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bs(){return Bs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bs.apply(null,arguments)}function Mg(e,t){if(e==null)return{};var r,n,a=Tre(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Tre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Dre(e){var t=x.useMemo(()=>Bj(e.children,nl),[e.children]),r=ke(n=>qte(n,e.id,t));return r==null?null:x.createElement(dre,{legendPayload:r})}var Mre=x.memo(e=>{var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:l,name:d,hide:f,tooltipType:h,id:p}=e,g={dataDefinedOnItem:n.map(y=>y.tooltipPayload),getPosition:y=>{var v;return(v=n[Number(y)])===null||v===void 0?void 0:v.tooltipPosition},settings:{stroke:a,strokeWidth:s,fill:l,dataKey:t,nameKey:r,name:Kc(d,t),hide:f,type:h,color:l,unit:"",graphicalItemId:p}};return x.createElement(Fj,{tooltipEntrySettings:g})}),Rre=(e,t)=>e>t?"start":e<t?"end":"middle",Ire=(e,t,r)=>Yr(typeof t=="function"?t(e):t,r,r*.8),Lre=(e,t,r)=>{var{top:n,left:a,width:s,height:l}=t,d=SR(s,l),f=a+Yr(e.cx,s,s/2),h=n+Yr(e.cy,l,l/2),p=Yr(e.innerRadius,d,0),g=Ire(r,e.outerRadius,d),y=e.maxRadius||Math.sqrt(s*s+l*l)/2;return{cx:f,cy:h,innerRadius:p,outerRadius:g,maxRadius:y}},Bre=(e,t)=>{var r=Pr(t-e),n=Math.min(Math.abs(t-e),360);return r*n},$re=(e,t)=>{if(x.isValidElement(e))return x.cloneElement(e,t);if(typeof e=="function")return e(t);var r=ht("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=t,a=Mg(t,Nre);return x.createElement(j1,Bs({},a,{type:"linear",className:r}))},Ure=(e,t,r)=>{if(x.isValidElement(e))return x.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),x.isValidElement(n)))return n;var a=ht("recharts-pie-label-text",QI(e));return x.createElement(kg,Bs({},t,{alignmentBaseline:"middle",className:a}),n)};function zre(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:s,dataKey:l}=r;if(!n||!a||!t)return null;var d=Mn(r),f=zo(a),h=zo(s),p=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,g=t.map((y,v)=>{var j=(y.startAngle+y.endAngle)/2,_=cr(y.cx,y.cy,y.outerRadius+p,j),S=er(er(er(er({},d),y),{},{stroke:"none"},f),{},{index:v,textAnchor:Rre(_.x,y.cx)},_),N=er(er(er(er({},d),y),{},{fill:"none",stroke:y.fill},h),{},{index:v,points:[cr(y.cx,y.cy,y.outerRadius,j),_],key:"line"});return x.createElement(bn,{zIndex:ur.label,key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(v)},x.createElement(kr,null,s&&$re(s,N),Ure(a,S,Ct(y,l))))});return x.createElement(kr,{className:"recharts-pie-labels"},g)}function qre(e){var{sectors:t,props:r,showLabels:n}=e,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?x.createElement(Rj,{label:a}):x.createElement(zre,{sectors:t,props:r,showLabels:n})}function Fre(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,shape:s,id:l}=e,d=ke(Ls),f=ke(Aj),h=ke(ZZ),{onMouseEnter:p,onClick:g,onMouseLeave:y}=a,v=Mg(a,Ere),j=Uj(p,a.dataKey,l),_=zj(y),S=qj(g,a.dataKey,l);return t==null||t.length===0?null:x.createElement(x.Fragment,null,t.map((N,E)=>{if((N==null?void 0:N.startAngle)===0&&(N==null?void 0:N.endAngle)===0&&t.length!==1)return null;var O=h==null||h===l,C=String(E)===d&&(f==null||a.dataKey===f)&&O,D=d?n:null,T=r&&C?r:D,M=er(er({},N),{},{stroke:N.stroke,tabIndex:-1,[JM]:E,[eR]:l});return x.createElement(kr,Bs({key:"sector-".concat(N==null?void 0:N.startAngle,"-").concat(N==null?void 0:N.endAngle,"-").concat(N.midAngle,"-").concat(E),tabIndex:-1,className:"recharts-pie-sector"},of(v,N,E),{onMouseEnter:j(N,E),onMouseLeave:_(N,E),onClick:S(N,E)}),x.createElement($j,Bs({option:s??T,index:E,shapeType:"sector",isActive:C},M)))}))}function Kre(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:s}=e,{cornerRadius:l,startAngle:d,endAngle:f,dataKey:h,nameKey:p,tooltipType:g}=r,y=Math.abs(r.minAngle),v=Bre(d,f),j=Math.abs(v),_=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,S=n.filter(T=>Ct(T,h,0)!==0).length,N=(j>=360?S:S-1)*_,E=j-S*y-N,O=n.reduce((T,M)=>{var R=Ct(M,h,0);return T+(Oe(R)?R:0)},0),C;if(O>0){var D;C=n.map((T,M)=>{var R=Ct(T,h,0),U=Ct(T,p,M),W=Lre(r,s,T),F=(Oe(R)?R:0)/O,z,pe=er(er({},T),a&&a[M]&&a[M].props);M?z=D.endAngle+Pr(v)*_*(R!==0?1:0):z=d;var oe=z+Pr(v)*((R!==0?y:0)+F*E),me=(z+oe)/2,I=(W.innerRadius+W.outerRadius)/2,H=[{name:U,value:R,payload:pe,dataKey:h,type:g,graphicalItemId:r.id}],ie=cr(W.cx,W.cy,I,me);return D=er(er(er(er({},r.presentationProps),{},{percent:F,cornerRadius:typeof l=="string"?parseFloat(l):l,name:U,tooltipPayload:H,midAngle:me,middleRadius:I,tooltipPosition:ie},pe),W),{},{value:R,dataKey:h,startAngle:z,endAngle:oe,payload:pe,paddingAngle:Pr(v)*_}),D})}return C}function Qre(e){var{showLabels:t,sectors:r,children:n}=e,a=x.useMemo(()=>!t||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,t]);return x.createElement(Nte,{value:t?a:void 0},n)}function Hre(e){var{props:t,previousSectorsRef:r,id:n}=e,{sectors:a,isAnimationActive:s,animationBegin:l,animationDuration:d,animationEasing:f,activeShape:h,inactiveShape:p,onAnimationStart:g,onAnimationEnd:y}=t,v=mf(t,"recharts-pie-"),j=r.current,[_,S]=x.useState(!1),N=x.useCallback(()=>{typeof y=="function"&&y(),S(!1)},[y]),E=x.useCallback(()=>{typeof g=="function"&&g(),S(!0)},[g]);return x.createElement(Qre,{showLabels:!_,sectors:a},x.createElement(hf,{animationId:v,begin:l,duration:d,isActive:s,easing:f,onAnimationStart:E,onAnimationEnd:N,key:v},O=>{var C,D=[],T=a&&a[0],M=(C=T==null?void 0:T.startAngle)!==null&&C!==void 0?C:0;return a==null||a.forEach((R,U)=>{var W=j&&j[U],F=U>0?Fo(R,"paddingAngle",0):0;if(W){var z=qt(W.endAngle-W.startAngle,R.endAngle-R.startAngle,O),pe=er(er({},R),{},{startAngle:M+F,endAngle:M+z+F});D.push(pe),M=pe.endAngle}else{var{endAngle:oe,startAngle:me}=R,I=qt(0,oe-me,O),H=er(er({},R),{},{startAngle:M+F,endAngle:M+I+F});D.push(H),M=H.endAngle}}),r.current=D,x.createElement(kr,null,x.createElement(Fre,{sectors:D,activeShape:h,inactiveShape:p,allOtherPieProps:t,shape:t.shape,id:n}))}),x.createElement(qre,{showLabels:!_,sectors:a,props:t}),t.children)}var Vre={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:ur.area};function Gre(e){var{id:t}=e,r=Mg(e,Ore),{hide:n,className:a,rootTabIndex:s}=e,l=x.useMemo(()=>Bj(e.children,nl),[e.children]),d=ke(p=>Fte(p,t,l)),f=x.useRef(null),h=ht("recharts-pie",a);return n||d==null?(f.current=null,x.createElement(kr,{tabIndex:s,className:h})):x.createElement(bn,{zIndex:e.zIndex},x.createElement(Mre,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:d,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),x.createElement(kr,{tabIndex:s,className:h},x.createElement(Hre,{props:er(er({},r),{},{sectors:d}),previousSectorsRef:f,id:t})))}function Qj(e){var t=fr(e,Vre),{id:r}=t,n=Mg(t,Are),a=Mn(n);return x.createElement(Kj,{id:r,type:"pie"},s=>x.createElement(x.Fragment,null,x.createElement(_re,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:t.maxRadius}),x.createElement(Dre,Bs({},n,{id:s})),x.createElement(Gre,Bs({},n,{id:s}))))}Qj.displayName="Pie";var Yre=["points"];function _k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_k(Object(r),!0).forEach(function(n){Wre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_k(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wre(e,t,r){return(t=Xre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xre(e){var t=Zre(e,"string");return typeof t=="symbol"?t:t+""}function Zre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jp(){return jp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jp.apply(null,arguments)}function Jre(e,t){if(e==null)return{};var r,n,a=ene(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ene(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function tne(e){var{option:t,dotProps:r,className:n}=e;if(x.isValidElement(t))return x.cloneElement(t,r);if(typeof t=="function")return t(r);var a=ht(n,typeof t!="boolean"?t.className:""),s=r??{},{points:l}=s,d=Jre(s,Yre);return x.createElement(zI,jp({},d,{className:a}))}function rne(e,t){return e==null?!1:t?!0:e.length===1}function nne(e){var{points:t,dot:r,className:n,dotClassName:a,dataKey:s,baseProps:l,needClip:d,clipPathId:f,zIndex:h=ur.scatter}=e;if(!rne(t,r))return null;var p=GI(r),g=yF(r),y=t.map((j,_)=>{var S,N,E=qb(qb(qb({r:3},l),g),{},{index:_,cx:(S=j.x)!==null&&S!==void 0?S:void 0,cy:(N=j.y)!==null&&N!==void 0?N:void 0,dataKey:s,value:j.value,payload:j.payload,points:t});return x.createElement(tne,{key:"dot-".concat(_),option:r,dotProps:E,className:a})}),v={};return d&&f!=null&&(v.clipPath="url(#clipPath-".concat(p?"":"dots-").concat(f,")")),x.createElement(bn,{zIndex:h},x.createElement(kr,jp({className:n},v),y))}function Nk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ek(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nk(Object(r),!0).forEach(function(n){ane(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ane(e,t,r){return(t=ine(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ine(e){var t=sne(e,"string");return typeof t=="symbol"?t:t+""}function sne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZI=0,one={xAxis:{},yAxis:{},zAxis:{}},JI=vn({name:"cartesianAxis",initialState:one,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:zt()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:zt()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:zt()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:zt()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:zt()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:zt()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:zt()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:zt()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:zt()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,a=e.yAxis[r];if(a){var s,l=a.widthHistory||[];if(l.length===3&&l[0]===l[2]&&n===l[1]&&n!==a.width&&Math.abs(n-((s=l[0])!==null&&s!==void 0?s:0))<=1)return;var d=[...l,n].slice(-3);e.yAxis[r]=Ek(Ek({},a),{},{width:n,widthHistory:d})}}}}),{addXAxis:lne,replaceXAxis:cne,removeXAxis:une,addYAxis:dne,replaceYAxis:fne,removeYAxis:hne,addZAxis:_le,replaceZAxis:Nle,removeZAxis:Ele,updateYAxisWidth:mne}=JI.actions,pne=JI.reducer,gne=X([xr],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),yne=X([gne,Li,Bi],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Hj=()=>ke(yne),vne=()=>ke(nJ);function Ok(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ok(Object(r),!0).forEach(function(n){bne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ok(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bne(e,t,r){return(t=xne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xne(e){var t=wne(e,"string");return typeof t=="symbol"?t:t+""}function wne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jne=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:s,clipPath:l}=e;if(a===!1||t.x==null||t.y==null)return null;var d={index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},f=Fb(Fb(Fb({},d),zo(a)),i1(a)),h;return x.isValidElement(a)?h=x.cloneElement(a,f):typeof a=="function"?h=a(f):h=x.createElement(zI,f),x.createElement(kr,{className:"recharts-active-dot",clipPath:l},h)};function Sne(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a,clipPath:s,zIndex:l=ur.activeDot}=e,d=ke(Ls),f=vne();if(t==null||f==null)return null;var h=t.find(p=>f.includes(p.payload));return Ht(h)?null:x.createElement(bn,{zIndex:l},x.createElement(jne,{point:h,childIndex:Number(d),mainColor:r,dataKey:a,activeDot:n,clipPath:s}))}var Ak=(e,t,r)=>{var n=r??e;if(!Ht(n))return Yr(n,t,0)},_ne=(e,t,r)=>{var n={},a=e.filter(jg),s=e.filter(h=>h.stackId==null),l=a.reduce((h,p)=>{var g=h[p.stackId];return g==null&&(g=[]),g.push(p),h[p.stackId]=g,h},n),d=Object.entries(l).map(h=>{var p,[g,y]=h,v=y.map(_=>_.dataKey),j=Ak(t,r,(p=y[0])===null||p===void 0?void 0:p.barSize);return{stackId:g,dataKeys:v,barSize:j}}),f=s.map(h=>{var p=[h.dataKey].filter(y=>y!=null),g=Ak(t,r,h.barSize);return{stackId:void 0,dataKeys:p,barSize:g}});return[...d,...f]};function Ck(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ck(Object(r),!0).forEach(function(n){Nne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ck(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nne(e,t,r){return(t=Ene(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ene(e){var t=One(e,"string");return typeof t=="symbol"?t:t+""}function One(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ane(e,t,r,n,a){var s,l=n.length;if(!(l<1)){var d=Yr(e,r,0,!0),f,h=[];if(st((s=n[0])===null||s===void 0?void 0:s.barSize)){var p=!1,g=r/l,y=n.reduce((E,O)=>E+(O.barSize||0),0);y+=(l-1)*d,y>=r&&(y-=(l-1)*d,d=0),y>=r&&g>0&&(p=!0,g*=.9,y=l*g);var v=(r-y)/2>>0,j={offset:v-d,size:0};f=n.reduce((E,O)=>{var C,D={stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:j.offset+j.size+d,size:p?g:(C=O.barSize)!==null&&C!==void 0?C:0}},T=[...E,D];return j=D.position,T},h)}else{var _=Yr(t,r,0,!0);r-2*_-(l-1)*d<=0&&(d=0);var S=(r-2*_-(l-1)*d)/l;S>1&&(S>>=0);var N=st(a)?Math.min(S,a):S;f=n.reduce((E,O,C)=>[...E,{stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:_+(S+d)*C+(S-N)/2,size:N}}],h)}return f}}var Cne=(e,t,r,n,a,s,l)=>{var d=Ht(l)?t:l,f=Ane(r,n,a!==s?a:s,e,d);return a!==s&&f!=null&&(f=f.map(h=>pm(pm({},h),{},{position:pm(pm({},h.position),{},{offset:h.position.offset-a/2})}))),f},Pne=(e,t)=>{var r=tj(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(l=>l.key===r)}}}},kne=(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}};function Tne(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&st(e.zIndex)?e.zIndex:t}var e5=e=>{var{chartData:t}=e,r=Mt(),n=Xr();return x.useEffect(()=>n?()=>{}:(r(RP(t)),()=>{r(RP(void 0))}),[t,r,n]),null},Pk={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},t5=vn({name:"brush",initialState:Pk,reducers:{setBrushSettings(e,t){return t.payload==null?Pk:t.payload}}}),{setBrushSettings:Ole}=t5.actions,Dne=t5.reducer;function Mne(e){return(e%180+180)%180}var Rne=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Mne(a),l=s*Math.PI/180,d=Math.atan(n/r),f=l>d&&l<Math.PI-d?n/Math.sin(l):r/Math.cos(l);return Math.abs(f)},Ine={dots:[],areas:[],lines:[]},r5=vn({name:"referenceElements",initialState:Ine,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=ba(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=ba(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=ba(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Ale,removeDot:Cle,addArea:Ple,removeArea:kle,addLine:Tle,removeLine:Dle}=r5.actions,Lne=r5.reducer,Bne=x.createContext(void 0),$ne=e=>{var{children:t}=e,[r]=x.useState("".concat(jd("recharts"),"-clip")),n=Hj();if(n==null)return null;var{x:a,y:s,width:l,height:d}=n;return x.createElement(Bne.Provider,{value:r},x.createElement("defs",null,x.createElement("clipPath",{id:r},x.createElement("rect",{x:a,y:s,height:d,width:l}))),t)};function n5(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t){var a=e[n];a!==void 0&&r.push(a)}return r}function Une(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Rne(n,r)}function zne(e,t,r){var n=r==="width",{x:a,y:s,width:l,height:d}=e;return t===1?{start:n?a:s,end:n?a+l:s+d}:{start:n?a+l:s+d,end:n?a:s}}function Ld(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function qne(e,t){return n5(e,t+1)}function Fne(e,t,r,n,a){for(var s=(n||[]).slice(),{start:l,end:d}=t,f=0,h=1,p=l,g=function(){var j=n==null?void 0:n[f];if(j===void 0)return{v:n5(n,h)};var _=f,S,N=()=>(S===void 0&&(S=r(j,_)),S),E=j.coordinate,O=f===0||Ld(e,E,N,p,d);O||(f=0,p=l,h+=1),O&&(p=E+e*(N()/2+a),f+=h)},y;h<=s.length;)if(y=g(),y)return y.v;return[]}function Kne(e,t,r,n,a){var s=(n||[]).slice(),l=s.length;if(l===0)return[];for(var{start:d,end:f}=t,h=1;h<=l;h++){for(var p=(l-1)%h,g=d,y=!0,v=function(){var C=n[_];if(C==null)return 0;var D=_,T,M=()=>(T===void 0&&(T=r(C,D)),T),R=C.coordinate,U=_===p||Ld(e,R,M,g,f);if(!U)return y=!1,1;U&&(g=R+e*(M()/2+a))},j,_=p;_<l&&(j=v(),!(j!==0&&j===1));_+=h);if(y){for(var S=[],N=p;N<l;N+=h){var E=n[N];E!=null&&S.push(E)}return S}}return[]}function kk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kk(Object(r),!0).forEach(function(n){Qne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qne(e,t,r){return(t=Hne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hne(e){var t=Vne(e,"string");return typeof t=="symbol"?t:t+""}function Vne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gne(e,t,r,n,a){for(var s=(n||[]).slice(),l=s.length,{start:d}=t,{end:f}=t,h=function(y){var v=s[y];if(v==null)return 1;var j=v,_,S=()=>(_===void 0&&(_=r(v,y)),_);if(y===l-1){var N=e*(j.coordinate+e*S()/2-f);s[y]=j=Vr(Vr({},j),{},{tickCoord:N>0?j.coordinate-N*e:j.coordinate})}else s[y]=j=Vr(Vr({},j),{},{tickCoord:j.coordinate});if(j.tickCoord!=null){var E=Ld(e,j.tickCoord,S,d,f);E&&(f=j.tickCoord-e*(S()/2+a),s[y]=Vr(Vr({},j),{},{isShow:!0}))}},p=l-1;p>=0;p--)h(p);return s}function Yne(e,t,r,n,a,s){var l=(n||[]).slice(),d=l.length,{start:f,end:h}=t;if(s){var p=n[d-1];if(p!=null){var g=r(p,d-1),y=e*(p.coordinate+e*g/2-h);if(l[d-1]=p=Vr(Vr({},p),{},{tickCoord:y>0?p.coordinate-y*e:p.coordinate}),p.tickCoord!=null){var v=Ld(e,p.tickCoord,()=>g,f,h);v&&(h=p.tickCoord-e*(g/2+a),l[d-1]=Vr(Vr({},p),{},{isShow:!0}))}}}for(var j=s?d-1:d,_=function(E){var O=l[E];if(O==null)return 1;var C=O,D,T=()=>(D===void 0&&(D=r(O,E)),D);if(E===0){var M=e*(C.coordinate-e*T()/2-f);l[E]=C=Vr(Vr({},C),{},{tickCoord:M<0?C.coordinate-M*e:C.coordinate})}else l[E]=C=Vr(Vr({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var R=Ld(e,C.tickCoord,T,f,h);R&&(f=C.tickCoord+e*(T()/2+a),l[E]=Vr(Vr({},C),{},{isShow:!0}))}},S=0;S<j;S++)_(S);return l}function Vj(e,t,r){var{tick:n,ticks:a,viewBox:s,minTickGap:l,orientation:d,interval:f,tickFormatter:h,unit:p,angle:g}=e;if(!a||!a.length||!n)return[];if(Oe(f)||dg.isSsr){var y;return(y=qne(a,Oe(f)?f:0))!==null&&y!==void 0?y:[]}var v=[],j=d==="top"||d==="bottom"?"width":"height",_=p&&j==="width"?fd(p,{fontSize:t,letterSpacing:r}):{width:0,height:0},S=(D,T)=>{var M=typeof h=="function"?h(D.value,T):D.value;return j==="width"?Une(fd(M,{fontSize:t,letterSpacing:r}),_,g):fd(M,{fontSize:t,letterSpacing:r})[j]},N=a[0],E=a[1],O=a.length>=2&&N!=null&&E!=null?Pr(E.coordinate-N.coordinate):1,C=zne(s,O,j);return f==="equidistantPreserveStart"?Fne(O,C,S,a,l):f==="equidistantPreserveEnd"?Kne(O,C,S,a,l):(f==="preserveStart"||f==="preserveStartEnd"?v=Yne(O,C,S,a,l,f==="preserveStartEnd"):v=Gne(O,C,S,a,l),v.filter(D=>D.isShow))}var Wne=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,l=0;if(t){Array.from(t).forEach(p=>{if(p){var g=p.getBoundingClientRect();g.width>l&&(l=g.width)}});var d=r?r.getBoundingClientRect().width:0,f=a+s,h=l+f+d+(r?n:0);return Math.round(h)}return 0},Xne=["axisLine","width","height","className","hide","ticks","axisType"];function Zne(e,t){if(e==null)return{};var r,n,a=Jne(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Jne(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Yo(){return Yo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yo.apply(null,arguments)}function Tk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tk(Object(r),!0).forEach(function(n){eae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eae(e,t,r){return(t=tae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tae(e){var t=rae(e,"string");return typeof t=="symbol"?t:t+""}function rae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Si={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ur.axis};function nae(e){var{x:t,y:r,width:n,height:a,orientation:s,mirror:l,axisLine:d,otherSvgProps:f}=e;if(!d)return null;var h=Zt(Zt(Zt({},f),Mn(d)),{},{fill:"none"});if(s==="top"||s==="bottom"){var p=+(s==="top"&&!l||s==="bottom"&&l);h=Zt(Zt({},h),{},{x1:t,y1:r+p*a,x2:t+n,y2:r+p*a})}else{var g=+(s==="left"&&!l||s==="right"&&l);h=Zt(Zt({},h),{},{x1:t+g*n,y1:r,x2:t+g*n,y2:r+a})}return x.createElement("line",Yo({},h,{className:ht("recharts-cartesian-axis-line",Fo(d,"className"))}))}function aae(e,t,r,n,a,s,l,d,f){var h,p,g,y,v,j,_=d?-1:1,S=e.tickSize||l,N=Oe(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":h=p=e.coordinate,y=r+ +!d*a,g=y-_*S,j=g-_*f,v=N;break;case"left":g=y=e.coordinate,p=t+ +!d*n,h=p-_*S,v=h-_*f,j=N;break;case"right":g=y=e.coordinate,p=t+ +d*n,h=p+_*S,v=h+_*f,j=N;break;default:h=p=e.coordinate,y=r+ +d*a,g=y+_*S,j=g+_*f,v=N;break}return{line:{x1:h,y1:g,x2:p,y2:y},tick:{x:v,y:j}}}function iae(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function sae(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function oae(e){var{option:t,tickProps:r,value:n}=e,a,s=ht(r.className,"recharts-cartesian-axis-tick-value");if(x.isValidElement(t))a=x.cloneElement(t,Zt(Zt({},r),{},{className:s}));else if(typeof t=="function")a=t(Zt(Zt({},r),{},{className:s}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=ht(l,QI(t))),a=x.createElement(kg,Yo({},r,{className:l}),n)}return a}var lae=x.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:s,tickFormatter:l,unit:d,padding:f,tickTextProps:h,orientation:p,mirror:g,x:y,y:v,width:j,height:_,tickSize:S,tickMargin:N,fontSize:E,letterSpacing:O,getTicksConfig:C,events:D,axisType:T}=e,M=Vj(Zt(Zt({},C),{},{ticks:r}),E,O),R=iae(p,g),U=sae(p,g),W=Mn(C),F=zo(n),z={};typeof a=="object"&&(z=a);var pe=Zt(Zt({},W),{},{fill:"none"},z),oe=M.map(H=>Zt({entry:H},aae(H,y,v,j,_,p,S,g,N))),me=oe.map(H=>{var{entry:ie,line:he}=H;return x.createElement(kr,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ie.value,"-").concat(ie.coordinate,"-").concat(ie.tickCoord)},a&&x.createElement("line",Yo({},pe,he,{className:ht("recharts-cartesian-axis-tick-line",Fo(a,"className"))})))}),I=oe.map((H,ie)=>{var he,K,{entry:P,tick:B}=H,Y=Zt(Zt(Zt(Zt({verticalAnchor:U},W),{},{textAnchor:R,stroke:"none",fill:s},B),{},{index:ie,payload:P,visibleTicksCount:M.length,tickFormatter:l,padding:f},h),{},{angle:(he=(K=h==null?void 0:h.angle)!==null&&K!==void 0?K:W.angle)!==null&&he!==void 0?he:0}),ne=Zt(Zt({},Y),F);return x.createElement(kr,Yo({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(P.value,"-").concat(P.coordinate,"-").concat(P.tickCoord)},of(D,P,ie)),n&&x.createElement(oae,{option:n,tickProps:ne,value:"".concat(typeof l=="function"?l(P.value,ie):P.value).concat(d||"")}))});return x.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(T,"-ticks")},I.length>0&&x.createElement(bn,{zIndex:ur.label},x.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(T,"-tick-labels"),ref:t},I)),me.length>0&&x.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(T,"-tick-lines")},me))}),cae=x.forwardRef((e,t)=>{var{axisLine:r,width:n,height:a,className:s,hide:l,ticks:d,axisType:f}=e,h=Zne(e,Xne),[p,g]=x.useState(""),[y,v]=x.useState(""),j=x.useRef(null);x.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return Wne({ticks:j.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var _=x.useCallback(S=>{if(S){var N=S.getElementsByClassName("recharts-cartesian-axis-tick-value");j.current=N;var E=N[0];if(E){var O=window.getComputedStyle(E),C=O.fontSize,D=O.letterSpacing;(C!==p||D!==y)&&(g(C),v(D))}}},[p,y]);return l||n!=null&&n<=0||a!=null&&a<=0?null:x.createElement(bn,{zIndex:e.zIndex},x.createElement(kr,{className:ht("recharts-cartesian-axis",s)},x.createElement(nae,{x:e.x,y:e.y,width:n,height:a,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Mn(e)}),x.createElement(lae,{ref:_,axisType:f,events:h,fontSize:p,getTicksConfig:e,height:e.height,letterSpacing:y,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:d,unit:e.unit,width:e.width,x:e.x,y:e.y}),x.createElement(ate,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},x.createElement(mte,{label:e.label,labelRef:e.labelRef}),e.children)))}),Gj=x.forwardRef((e,t)=>{var r=fr(e,Si);return x.createElement(cae,Yo({},r,{ref:t}))});Gj.displayName="CartesianAxis";var uae=["x1","y1","x2","y2","key"],dae=["offset"],fae=["xAxisId","yAxisId"],hae=["xAxisId","yAxisId"];function Dk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Gr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dk(Object(r),!0).forEach(function(n){mae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mae(e,t,r){return(t=pae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pae(e){var t=gae(e,"string");return typeof t=="symbol"?t:t+""}function gae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function No(){return No=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},No.apply(null,arguments)}function Sp(e,t){if(e==null)return{};var r,n,a=yae(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function yae(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var vae=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:l,ry:d}=e;return x.createElement("rect",{x:n,y:a,ry:d,width:s,height:l,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function a5(e){var{option:t,lineItemProps:r}=e,n;if(x.isValidElement(t))n=x.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var a,{x1:s,y1:l,x2:d,y2:f,key:h}=r,p=Sp(r,uae),g=(a=Mn(p))!==null&&a!==void 0?a:{},{offset:y}=g,v=Sp(g,dae);n=x.createElement("line",No({},v,{x1:s,y1:l,x2:d,y2:f,fill:"none",key:h}))}return n}function bae(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:l}=e,d=Sp(e,fae),f=a.map((h,p)=>{var g=Gr(Gr({},d),{},{x1:t,y1:h,x2:t+r,y2:h,key:"line-".concat(p),index:p});return x.createElement(a5,{key:"line-".concat(p),option:n,lineItemProps:g})});return x.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function xae(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:l}=e,d=Sp(e,hae),f=a.map((h,p)=>{var g=Gr(Gr({},d),{},{x1:h,y1:t,x2:h,y2:t+r,key:"line-".concat(p),index:p});return x.createElement(a5,{option:n,lineItemProps:g,key:"line-".concat(p)})});return x.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function wae(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:s,height:l,horizontalPoints:d,horizontal:f=!0}=e;if(!f||!t||!t.length||d==null)return null;var h=d.map(g=>Math.round(g+a-a)).sort((g,y)=>g-y);a!==h[0]&&h.unshift(0);var p=h.map((g,y)=>{var v=h[y+1],j=v==null,_=j?a+l-g:v-g;if(_<=0)return null;var S=y%t.length;return x.createElement("rect",{key:"react-".concat(y),y:g,x:n,height:_,width:s,stroke:"none",fill:t[S],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function jae(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:l,height:d,verticalPoints:f}=e;if(!t||!r||!r.length)return null;var h=f.map(g=>Math.round(g+a-a)).sort((g,y)=>g-y);a!==h[0]&&h.unshift(0);var p=h.map((g,y)=>{var v=h[y+1],j=v==null,_=j?a+l-g:v-g;if(_<=0)return null;var S=y%r.length;return x.createElement("rect",{key:"react-".concat(y),x:g,y:s,width:_,height:d,stroke:"none",fill:r[S],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var Sae=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return WM(Vj(Gr(Gr(Gr({},Si),r),{},{ticks:XM(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},_ae=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return WM(Vj(Gr(Gr(Gr({},Si),r),{},{ticks:XM(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},Nae={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:ur.grid};function fc(e){var t=v1(),r=b1(),n=aR(),a=Gr(Gr({},fr(e,Nae)),{},{x:Oe(e.x)?e.x:n.left,y:Oe(e.y)?e.y:n.top,width:Oe(e.width)?e.width:n.width,height:Oe(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:l,x:d,y:f,width:h,height:p,syncWithTicks:g,horizontalValues:y,verticalValues:v}=a,j=Xr(),_=ke(U=>SP(U,"xAxis",s,j)),S=ke(U=>SP(U,"yAxis",l,j));if(!qa(h)||!qa(p)||!Oe(d)||!Oe(f))return null;var N=a.verticalCoordinatesGenerator||Sae,E=a.horizontalCoordinatesGenerator||_ae,{horizontalPoints:O,verticalPoints:C}=a;if((!O||!O.length)&&typeof E=="function"){var D=y&&y.length,T=E({yAxis:S?Gr(Gr({},S),{},{ticks:D?y:S.ticks}):void 0,width:t??h,height:r??p,offset:n},D?!0:g);Ym(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(O=T)}if((!C||!C.length)&&typeof N=="function"){var M=v&&v.length,R=N({xAxis:_?Gr(Gr({},_),{},{ticks:M?v:_.ticks}):void 0,width:t??h,height:r??p,offset:n},M?!0:g);Ym(Array.isArray(R),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(C=R)}return x.createElement(bn,{zIndex:a.zIndex},x.createElement("g",{className:"recharts-cartesian-grid"},x.createElement(vae,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),x.createElement(wae,No({},a,{horizontalPoints:O})),x.createElement(jae,No({},a,{verticalPoints:C})),x.createElement(bae,No({},a,{offset:n,horizontalPoints:O,xAxis:_,yAxis:S})),x.createElement(xae,No({},a,{offset:n,verticalPoints:C,xAxis:_,yAxis:S}))))}fc.displayName="CartesianGrid";var Eae={},i5=vn({name:"errorBars",initialState:Eae,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:a}=t.payload;e[r]&&(e[r]=e[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?a:s))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:Mle,replaceErrorBar:Rle,removeErrorBar:Ile}=i5.actions,Oae=i5.reducer,Aae=["children"];function Cae(e,t){if(e==null)return{};var r,n,a=Pae(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Pae(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var kae={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Tae=x.createContext(kae);function s5(e){var{children:t}=e,r=Cae(e,Aae);return x.createElement(Tae.Provider,{value:r},t)}function Yj(e,t){var r,n,a=ke(h=>zi(h,e)),s=ke(h=>qi(h,t)),l=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Er.allowDataOverflow,d=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:Or.allowDataOverflow,f=l||d;return{needClip:f,needClipX:l,needClipY:d}}function o5(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=Hj(),{needClipX:s,needClipY:l,needClip:d}=Yj(t,r);if(!d||!a)return null;var{x:f,y:h,width:p,height:g}=a;return x.createElement("clipPath",{id:"clipPath-".concat(n)},x.createElement("rect",{x:s?f:f-p/2,y:l?h:h-g/2,width:s?p:p*2,height:l?g:g*2}))}var l5=(e,t,r,n)=>Is(e,"xAxis",t,n),c5=(e,t,r,n)=>Rs(e,"xAxis",t,n),u5=(e,t,r,n)=>Is(e,"yAxis",r,n),d5=(e,t,r,n)=>Rs(e,"yAxis",r,n),Dae=X([pt,l5,u5,c5,d5],(e,t,r,n,a)=>Ii(e,"xAxis")?Pc(t,n,!1):Pc(r,a,!1)),Mae=(e,t,r,n,a)=>a;function Rae(e){return e.type==="line"}var Iae=X([Ng,Mae],(e,t)=>e.filter(Rae).find(r=>r.id===t)),Lae=X([pt,l5,u5,c5,d5,Iae,Dae,H1],(e,t,r,n,a,s,l,d)=>{var{chartData:f,dataStartIndex:h,dataEndIndex:p}=d;if(!(s==null||t==null||r==null||n==null||a==null||n.length===0||a.length===0||l==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:g,data:y}=s,v;if(y!=null&&y.length>0?v=y:v=f==null?void 0:f.slice(h,p+1),v!=null)return jie({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataKey:g,bandSize:l,displayedData:v})}});function Bae(e){var t=zo(e),r=3,n=2;if(t!=null){var{r:a,strokeWidth:s}=t,l=Number(a),d=Number(s);return(Number.isNaN(l)||l<0)&&(l=r),(Number.isNaN(d)||d<0)&&(d=n),{r:l,strokeWidth:d}}return{r,strokeWidth:n}}var Kb={exports:{}},Qb={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mk;function $ae(){if(Mk)return Qb;Mk=1;var e=Ic();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,s=e.useEffect,l=e.useMemo,d=e.useDebugValue;return Qb.useSyncExternalStoreWithSelector=function(f,h,p,g,y){var v=a(null);if(v.current===null){var j={hasValue:!1,value:null};v.current=j}else j=v.current;v=l(function(){function S(D){if(!N){if(N=!0,E=D,D=g(D),y!==void 0&&j.hasValue){var T=j.value;if(y(T,D))return O=T}return O=D}if(T=O,r(E,D))return T;var M=g(D);return y!==void 0&&y(T,M)?(E=D,T):(E=D,O=M)}var N=!1,E,O,C=p===void 0?null:p;return[function(){return S(h())},C===null?void 0:function(){return S(C())}]},[h,p,g,y]);var _=n(f,v[0],v[1]);return s(function(){j.hasValue=!0,j.value=_},[_]),d(_),_},Qb}var Rk;function Uae(){return Rk||(Rk=1,Kb.exports=$ae()),Kb.exports}Uae();function zae(e){e()}function qae(){let e=null,t=null;return{clear(){e=null,t=null},notify(){zae(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var Ik={notify(){},get:()=>[]};function Fae(e,t){let r,n=Ik,a=0,s=!1;function l(_){p();const S=n.subscribe(_);let N=!1;return()=>{N||(N=!0,S(),g())}}function d(){n.notify()}function f(){j.onStateChange&&j.onStateChange()}function h(){return s}function p(){a++,r||(r=e.subscribe(f),n=qae())}function g(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=Ik)}function y(){s||(s=!0,p())}function v(){s&&(s=!1,g())}const j={addNestedSub:l,notifyNestedSubs:d,handleChangeWrapper:f,isSubscribed:h,trySubscribe:y,tryUnsubscribe:v,getListeners:()=>n};return j}var Kae=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Qae=Kae(),Hae=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Vae=Hae(),Gae=()=>Qae||Vae?x.useLayoutEffect:x.useEffect,Yae=Gae();function Lk(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Wae(e,t){if(Lk(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!Lk(e[r[a]],t[r[a]]))return!1;return!0}var Hb=Symbol.for("react-redux-context"),Vb=typeof globalThis<"u"?globalThis:{};function Xae(){if(!x.createContext)return{};const e=Vb[Hb]??(Vb[Hb]=new Map);let t=e.get(x.createContext);return t||(t=x.createContext(null),e.set(x.createContext,t)),t}var Zae=Xae();function Jae(e){const{children:t,context:r,serverState:n,store:a}=e,s=x.useMemo(()=>{const f=Fae(a);return{store:a,subscription:f,getServerState:n?()=>n:void 0}},[a,n]),l=x.useMemo(()=>a.getState(),[a]);Yae(()=>{const{subscription:f}=s;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),l!==a.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[s,l]);const d=r||Zae;return x.createElement(d.Provider,{value:s},t)}var eie=Jae,tie=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function rie(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function Rg(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(tie.has(n)){if(e[n]==null&&t[n]==null)continue;if(!Wae(e[n],t[n]))return!1}else if(!rie(e[n],t[n]))return!1;return!0}var nie=["id"],aie=["type","layout","connectNulls","needClip","shape"],iie=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Bd(){return Bd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bd.apply(null,arguments)}function Bk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ia(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Bk(Object(r),!0).forEach(function(n){sie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sie(e,t,r){return(t=oie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oie(e){var t=lie(e,"string");return typeof t=="symbol"?t:t+""}function lie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wj(e,t){if(e==null)return{};var r,n,a=cie(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function cie(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var uie=e=>{var{dataKey:t,name:r,stroke:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:Kc(r,t),payload:e}]},die=x.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:s,name:l,hide:d,unit:f,tooltipType:h,id:p}=e,g={dataDefinedOnItem:r,getPosition:Jo,settings:{stroke:n,strokeWidth:a,fill:s,dataKey:t,nameKey:void 0,name:Kc(l,t),hide:d,type:h,color:n,unit:f,graphicalItemId:p}};return x.createElement(Fj,{tooltipEntrySettings:g})}),f5=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function fie(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],a=0;a<t;++a)n=[...n,...r];return n}var hie=(e,t,r)=>{var n=r.reduce((v,j)=>v+j);if(!n)return f5(t,e);for(var a=Math.floor(e/n),s=e%n,l=t-e,d=[],f=0,h=0;f<r.length;h+=(p=r[f])!==null&&p!==void 0?p:0,++f){var p,g=r[f];if(g!=null&&h+g>s){d=[...r.slice(0,f),s-h];break}}var y=d.length%2===0?[0,l]:[l];return[...fie(r,a),...d,...y].map(v=>"".concat(v,"px")).join(", ")};function mie(e){var{clipPathId:t,points:r,props:n}=e,{dot:a,dataKey:s,needClip:l}=n,{id:d}=n,f=Wj(n,nie),h=Mn(f);return x.createElement(nne,{points:r,dot:a,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:h,needClip:l,clipPathId:t})}function pie(e){var{showLabels:t,children:r,points:n}=e,a=x.useMemo(()=>n==null?void 0:n.map(s=>{var l,d,f={x:(l=s.x)!==null&&l!==void 0?l:0,y:(d=s.y)!==null&&d!==void 0?d:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Ia(Ia({},f),{},{value:s.value,payload:s.payload,viewBox:f,parentViewBox:void 0,fill:void 0})}),[n]);return x.createElement($I,{value:t?a:void 0},r)}function $k(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:a,props:s}=e,{type:l,layout:d,connectNulls:f,needClip:h,shape:p}=s,g=Wj(s,aie),y=Ia(Ia({},nn(g)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(t,")"):void 0,points:n,type:l,layout:d,connectNulls:f,strokeDasharray:a??s.strokeDasharray});return x.createElement(x.Fragment,null,(n==null?void 0:n.length)>1&&x.createElement($j,Bd({shapeType:"curve",option:p},y,{pathRef:r})),x.createElement(mie,{points:n,clipPathId:t,props:s}))}function gie(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function yie(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:a,longestAnimatedLengthRef:s}=e,{points:l,strokeDasharray:d,isAnimationActive:f,animationBegin:h,animationDuration:p,animationEasing:g,animateNewValues:y,width:v,height:j,onAnimationEnd:_,onAnimationStart:S}=r,N=a.current,E=mf(l,"recharts-line-"),O=x.useRef(E),[C,D]=x.useState(!1),T=!C,M=x.useCallback(()=>{typeof _=="function"&&_(),D(!1)},[_]),R=x.useCallback(()=>{typeof S=="function"&&S(),D(!0)},[S]),U=gie(n.current),W=x.useRef(0);O.current!==E&&(W.current=s.current,O.current=E);var F=W.current;return x.createElement(pie,{points:l,showLabels:T},r.children,x.createElement(hf,{animationId:E,begin:h,duration:p,isActive:f,easing:g,onAnimationEnd:M,onAnimationStart:R,key:E},z=>{var pe=qt(F,U+F,z),oe=Math.min(pe,U),me;if(f)if(d){var I="".concat(d).split(/[,\s]+/gim).map(he=>parseFloat(he));me=hie(oe,U,I)}else me=f5(U,oe);else me=d==null?void 0:String(d);if(z>0&&U>0&&(a.current=l,s.current=Math.max(s.current,oe)),N){var H=N.length/l.length,ie=z===1?l:l.map((he,K)=>{var P=Math.floor(K*H);if(N[P]){var B=N[P];return Ia(Ia({},he),{},{x:qt(B.x,he.x,z),y:qt(B.y,he.y,z)})}return y?Ia(Ia({},he),{},{x:qt(v*2,he.x,z),y:qt(j/2,he.y,z)}):Ia(Ia({},he),{},{x:he.x,y:he.y})});return a.current=ie,x.createElement($k,{props:r,points:ie,clipPathId:t,pathRef:n,strokeDasharray:me})}return x.createElement($k,{props:r,points:l,clipPathId:t,pathRef:n,strokeDasharray:me})}),x.createElement(Rj,{label:r.label}))}function vie(e){var{clipPathId:t,props:r}=e,n=x.useRef(null),a=x.useRef(0),s=x.useRef(null);return x.createElement(yie,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:a,pathRef:s})}var bie=(e,t)=>{var r,n;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(n=e.y)!==null&&n!==void 0?n:void 0,value:e.value,errorVal:Ct(e.payload,t)}};class xie extends x.Component{render(){var{hide:t,dot:r,points:n,className:a,xAxisId:s,yAxisId:l,top:d,left:f,width:h,height:p,id:g,needClip:y,zIndex:v}=this.props;if(t)return null;var j=ht("recharts-line",a),_=g,{r:S,strokeWidth:N}=Bae(r),E=GI(r),O=S*2+N,C=y?"url(#clipPath-".concat(E?"":"dots-").concat(_,")"):void 0;return x.createElement(bn,{zIndex:v},x.createElement(kr,{className:j},y&&x.createElement("defs",null,x.createElement(o5,{clipPathId:_,xAxisId:s,yAxisId:l}),!E&&x.createElement("clipPath",{id:"clipPath-dots-".concat(_)},x.createElement("rect",{x:f-O/2,y:d-O/2,width:h+O,height:p+O}))),x.createElement(s5,{xAxisId:s,yAxisId:l,data:n,dataPointFormatter:bie,errorBarOffset:0},x.createElement(vie,{props:this.props,clipPathId:_}))),x.createElement(Sne,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:C}))}}var h5={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:ur.line,type:"linear"};function wie(e){var t=fr(e,h5),{activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:s,animationEasing:l,connectNulls:d,dot:f,hide:h,isAnimationActive:p,label:g,legendType:y,xAxisId:v,yAxisId:j,id:_}=t,S=Wj(t,iie),{needClip:N}=Yj(v,j),E=Hj(),O=el(),C=Xr(),D=ke(W=>Lae(W,v,j,C,_));if(O!=="horizontal"&&O!=="vertical"||D==null||E==null)return null;var{height:T,width:M,x:R,y:U}=E;return x.createElement(xie,Bd({},S,{id:_,connectNulls:d,dot:f,activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:s,animationEasing:l,isAnimationActive:p,hide:h,label:g,legendType:y,xAxisId:v,yAxisId:j,points:D,layout:O,height:T,width:M,left:R,top:U,needClip:N}))}function jie(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,dataKey:l,bandSize:d,displayedData:f}=e;return f.map((h,p)=>{var g=Ct(h,l);if(t==="horizontal"){var y=xC({axis:r,ticks:a,bandSize:d,entry:h,index:p}),v=Ht(g)?null:n.scale.map(g);return{x:y,y:v??null,value:g,payload:h}}var j=Ht(g)?null:r.scale.map(g),_=xC({axis:n,ticks:s,bandSize:d,entry:h,index:p});return j==null||_==null?null:{x:j,y:_,value:g,payload:h}}).filter(Boolean)}function Sie(e){var t=fr(e,h5),r=Xr();return x.createElement(Kj,{id:t.id,type:"line"},n=>x.createElement(x.Fragment,null,x.createElement(YI,{legendPayload:uie(t)}),x.createElement(die,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:n}),x.createElement(XI,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),x.createElement(wie,Bd({},t,{id:n}))))}var _p=x.memo(Sie,Rg);_p.displayName="Line";function al(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(a=>a.id===t))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:ZI}function il(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(a=>a.id===t))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:ZI}var _ie="Invariant failed";function Nie(e,t){throw new Error(_ie)}function hw(){return hw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hw.apply(null,arguments)}function Np(e){return x.createElement($j,hw({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var Eie=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(Oe(t))return t;var s=Oe(n)||Ht(n);return s?t(n,a):(s||Nie(),r)}},Oie=(e,t,r)=>r,Aie=(e,t)=>t,Ef=X([Ng,Aie],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),Cie=X([Ef],e=>e==null?void 0:e.maxBarSize),Pie=(e,t,r,n)=>n,kie=X([pt,Ng,al,il,Oie],(e,t,r,n,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Tie=(e,t,r)=>{var n=pt(e),a=al(e,t),s=il(e,t);if(!(a==null||s==null))return n==="horizontal"?sw(e,"yAxis",s,r):sw(e,"xAxis",a,r)},Die=(e,t)=>{var r=pt(e),n=al(e,t),a=il(e,t);if(!(n==null||a==null))return r==="horizontal"?jP(e,"xAxis",n):jP(e,"yAxis",a)},Mie=X([kie,ZW,Die],_ne),Rie=(e,t,r)=>{var n,a,s=Ef(e,t);if(s==null)return 0;var l=al(e,t),d=il(e,t);if(l==null||d==null)return 0;var f=pt(e),h=v4(e),{maxBarSize:p}=s,g=Ht(p)?h:p,y,v;return f==="horizontal"?(y=Is(e,"xAxis",l,r),v=Rs(e,"xAxis",l,r)):(y=Is(e,"yAxis",d,r),v=Rs(e,"yAxis",d,r)),(n=(a=Pc(y,v,!0))!==null&&a!==void 0?a:g)!==null&&n!==void 0?n:0},m5=(e,t,r)=>{var n=pt(e),a=al(e,t),s=il(e,t);if(!(a==null||s==null)){var l,d;return n==="horizontal"?(l=Is(e,"xAxis",a,r),d=Rs(e,"xAxis",a,r)):(l=Is(e,"yAxis",s,r),d=Rs(e,"yAxis",s,r)),Pc(l,d)}},Iie=X([Mie,v4,XW,b4,Rie,m5,Cie],Cne),Lie=(e,t,r)=>{var n=al(e,t);if(n!=null)return Is(e,"xAxis",n,r)},Bie=(e,t,r)=>{var n=il(e,t);if(n!=null)return Is(e,"yAxis",n,r)},$ie=(e,t,r)=>{var n=al(e,t);if(n!=null)return Rs(e,"xAxis",n,r)},Uie=(e,t,r)=>{var n=il(e,t);if(n!=null)return Rs(e,"yAxis",n,r)},zie=X([Iie,Ef],kne),qie=X([Tie,Ef],Pne),Fie=X([xr,p1,Lie,Bie,$ie,Uie,zie,pt,FW,m5,qie,Ef,Pie],(e,t,r,n,a,s,l,d,f,h,p,g,y)=>{var{chartData:v,dataStartIndex:j,dataEndIndex:_}=f;if(!(g==null||l==null||t==null||d!=="horizontal"&&d!=="vertical"||r==null||n==null||a==null||s==null||h==null)){var{data:S}=g,N;if(S!=null&&S.length>0?N=S:N=v==null?void 0:v.slice(j,_+1),N!=null)return yse({layout:d,barSettings:g,pos:l,parentViewBox:t,bandSize:h,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,stackedData:p,displayedData:N,offset:e,cells:y,dataStartIndex:j})}}),Kie=["index"];function mw(){return mw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mw.apply(null,arguments)}function Qie(e,t){if(e==null)return{};var r,n,a=Hie(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Hie(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var p5=x.createContext(void 0),Vie=e=>{var t=x.useContext(p5);if(t!=null)return t.stackId;if(e!=null)return LQ(e)},Gie=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),Yie=e=>{var t=x.useContext(p5);if(t!=null){var{stackId:r}=t;return"url(#".concat(Gie(r,e),")")}},g5=e=>{var{index:t}=e,r=Qie(e,Kie),n=Yie(t);return x.createElement(kr,mw({className:"recharts-bar-stack-layer",clipPath:n},r))},Wie=["onMouseEnter","onMouseLeave","onClick"],Xie=["value","background","tooltipPosition"],Zie=["id"],Jie=["onMouseEnter","onClick","onMouseLeave"];function Ti(){return Ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ti.apply(null,arguments)}function Uk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Uk(Object(r),!0).forEach(function(n){ese(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ese(e,t,r){return(t=tse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tse(e){var t=rse(e,"string");return typeof t=="symbol"?t:t+""}function rse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ep(e,t){if(e==null)return{};var r,n,a=nse(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function nse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ase=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:Kc(r,t),payload:e}]},ise=x.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:l,unit:d,tooltipType:f,id:h}=e,p={dataDefinedOnItem:void 0,getPosition:Jo,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:Kc(s,t),hide:l,type:f,color:a,unit:d,graphicalItemId:h}};return x.createElement(Fj,{tooltipEntrySettings:p})});function sse(e){var t=ke(Ls),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:l,onMouseLeave:d,onClick:f}=s,h=Ep(s,Wie),p=Uj(l,n,s.id),g=zj(d),y=qj(f,n,s.id);if(!a||r==null)return null;var v=zo(a);return x.createElement(bn,{zIndex:Tne(a,ur.barBackground)},r.map((j,_)=>{var{value:S,background:N,tooltipPosition:E}=j,O=Ep(j,Xie);if(!N)return null;var C=p(j,_),D=g(j,_),T=y(j,_),M=tn(tn(tn(tn(tn({option:a,isActive:String(_)===t},O),{},{fill:"#eee"},N),v),of(h,j,_)),{},{onMouseEnter:C,onMouseLeave:D,onClick:T,dataKey:n,index:_,className:"recharts-bar-background-rectangle"});return x.createElement(Np,Ti({key:"background-bar-".concat(_)},M))}))}function ose(e){var{showLabels:t,children:r,rects:n}=e,a=n==null?void 0:n.map(s=>{var l={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return tn(tn({},l),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:l,fill:s.fill})});return x.createElement($I,{value:t?a:void 0},r)}function lse(e){var{shape:t,activeBar:r,baseProps:n,entry:a,index:s,dataKey:l}=e,d=ke(Ls),f=ke(Aj),h=r&&String(s)===d&&(f==null||l===f),p=h?r:t;return h?x.createElement(bn,{zIndex:ur.activeBar},x.createElement(g5,{index:s},x.createElement(Np,Ti({},n,{name:String(n.name)},a,{isActive:h,option:p,index:s,dataKey:l})))):x.createElement(Np,Ti({},n,{name:String(n.name)},a,{isActive:h,option:p,index:s,dataKey:l}))}function cse(e){var{shape:t,baseProps:r,entry:n,index:a,dataKey:s}=e;return x.createElement(Np,Ti({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:a,dataKey:s}))}function use(e){var t,{data:r,props:n}=e,a=(t=Mn(n))!==null&&t!==void 0?t:{},{id:s}=a,l=Ep(a,Zie),{shape:d,dataKey:f,activeBar:h}=n,{onMouseEnter:p,onClick:g,onMouseLeave:y}=n,v=Ep(n,Jie),j=Uj(p,f,s),_=zj(y),S=qj(g,f,s);return r?x.createElement(x.Fragment,null,r.map((N,E)=>x.createElement(g5,Ti({index:E,key:"rectangle-".concat(N==null?void 0:N.x,"-").concat(N==null?void 0:N.y,"-").concat(N==null?void 0:N.value,"-").concat(E),className:"recharts-bar-rectangle"},of(v,N,E),{onMouseEnter:j(N,E),onMouseLeave:_(N,E),onClick:S(N,E)}),h?x.createElement(lse,{shape:d,activeBar:h,baseProps:l,entry:N,index:E,dataKey:f}):x.createElement(cse,{shape:d,baseProps:l,entry:N,index:E,dataKey:f})))):null}function dse(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:l,animationDuration:d,animationEasing:f,onAnimationEnd:h,onAnimationStart:p}=t,g=r.current,y=mf(t,"recharts-bar-"),[v,j]=x.useState(!1),_=!v,S=x.useCallback(()=>{typeof h=="function"&&h(),j(!1)},[h]),N=x.useCallback(()=>{typeof p=="function"&&p(),j(!0)},[p]);return x.createElement(ose,{showLabels:_,rects:n},x.createElement(hf,{animationId:y,begin:l,duration:d,isActive:s,easing:f,onAnimationEnd:S,onAnimationStart:N,key:y},E=>{var O=E===1?n:n==null?void 0:n.map((C,D)=>{var T=g&&g[D];if(T)return tn(tn({},C),{},{x:qt(T.x,C.x,E),y:qt(T.y,C.y,E),width:qt(T.width,C.width,E),height:qt(T.height,C.height,E)});if(a==="horizontal"){var M=qt(0,C.height,E),R=qt(C.stackedBarStart,C.y,E);return tn(tn({},C),{},{y:R,height:M})}var U=qt(0,C.width,E),W=qt(C.stackedBarStart,C.x,E);return tn(tn({},C),{},{width:U,x:W})});return E>0&&(r.current=O??null),O==null?null:x.createElement(kr,null,x.createElement(use,{props:t,data:O}))}),x.createElement(Rj,{label:t.label}),t.children)}function fse(e){var t=x.useRef(null);return x.createElement(dse,{previousRectanglesRef:t,props:e})}var y5=0,hse=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ct(e,t)}};class mse extends x.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:l,needClip:d,background:f,id:h}=this.props;if(t||r==null)return null;var p=ht("recharts-bar",a),g=h;return x.createElement(kr,{className:p,id:h},d&&x.createElement("defs",null,x.createElement(o5,{clipPathId:g,xAxisId:s,yAxisId:l})),x.createElement(kr,{className:"recharts-bar-rectangles",clipPath:d?"url(#clipPath-".concat(g,")"):void 0},x.createElement(sse,{data:r,dataKey:n,background:f,allOtherBarProps:this.props}),x.createElement(fse,this.props)))}}var pse={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:y5,xAxisId:0,yAxisId:0,zIndex:ur.bar};function gse(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:l,animationBegin:d,animationDuration:f,animationEasing:h,isAnimationActive:p}=e,{needClip:g}=Yj(t,r),y=el(),v=Xr(),j=Bj(e.children,nl),_=ke(E=>Fie(E,e.id,v,j));if(y!=="vertical"&&y!=="horizontal")return null;var S,N=_==null?void 0:_[0];return N==null||N.height==null||N.width==null?S=0:S=y==="vertical"?N.height/2:N.width/2,x.createElement(s5,{xAxisId:t,yAxisId:r,data:_,dataPointFormatter:hse,errorBarOffset:S},x.createElement(mse,Ti({},e,{layout:y,needClip:g,data:_,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:l,animationBegin:d,animationDuration:f,animationEasing:h,isAnimationActive:p})))}function yse(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:l,yAxis:d,xAxisTicks:f,yAxisTicks:h,stackedData:p,displayedData:g,offset:y,cells:v,parentViewBox:j,dataStartIndex:_}=e,S=t==="horizontal"?d:l,N=p?S.scale.domain():null,E=BQ({numericAxis:S}),O=S.scale.map(E);return g.map((C,D)=>{var T,M,R,U,W,F;if(p){var z=p[D+_];if(z==null)return null;T=TQ(z,N)}else T=Ct(C,r),Array.isArray(T)||(T=[E,T]);var pe=Eie(n,y5)(T[1],D);if(t==="horizontal"){var oe,me=d.scale.map(T[0]),I=d.scale.map(T[1]);if(me==null||I==null)return null;M=wC({axis:l,ticks:f,bandSize:s,offset:a.offset,entry:C,index:D}),R=(oe=I??me)!==null&&oe!==void 0?oe:void 0,U=a.size;var H=me-I;if(W=Ua(H)?0:H,F={x:M,y:y.top,width:U,height:y.height},Math.abs(pe)>0&&Math.abs(W)<Math.abs(pe)){var ie=Pr(W||pe)*(Math.abs(pe)-Math.abs(W));R-=ie,W+=ie}}else{var he=l.scale.map(T[0]),K=l.scale.map(T[1]);if(he==null||K==null)return null;if(M=he,R=wC({axis:d,ticks:h,bandSize:s,offset:a.offset,entry:C,index:D}),U=K-he,W=a.size,F={x:y.left,y:R,width:y.width,height:W},Math.abs(pe)>0&&Math.abs(U)<Math.abs(pe)){var P=Pr(U||pe)*(Math.abs(pe)-Math.abs(U));U+=P}}if(M==null||R==null||U==null||W==null)return null;var B=tn(tn({},C),{},{stackedBarStart:O,x:M,y:R,width:U,height:W,value:p?T:T[1],payload:C,background:F,tooltipPosition:{x:M+U/2,y:R+W/2},parentViewBox:j},v&&v[D]&&v[D].props);return B}).filter(Boolean)}function vse(e){var t=fr(e,pse),r=Vie(t.stackId),n=Xr();return x.createElement(Kj,{id:t.id,type:"bar"},a=>x.createElement(x.Fragment,null,x.createElement(YI,{legendPayload:ase(t)}),x.createElement(ise,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:a}),x.createElement(XI,{type:"bar",id:a,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),x.createElement(bn,{zIndex:t.zIndex},x.createElement(gse,Ti({},t,{id:a})))))}var vi=x.memo(vse,Rg);vi.displayName="Bar";var bse=["domain","range"],xse=["domain","range"];function zk(e,t){if(e==null)return{};var r,n,a=wse(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function qk(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function v5(e,t){if(e===t)return!0;var{domain:r,range:n}=e,a=zk(e,bse),{domain:s,range:l}=t,d=zk(t,xse);return!qk(r,s)||!qk(n,l)?!1:Rg(a,d)}var jse=["type"],Sse=["dangerouslySetInnerHTML","ticks","scale"],_se=["id","scale"];function pw(){return pw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pw.apply(null,arguments)}function Fk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Kk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fk(Object(r),!0).forEach(function(n){Nse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nse(e,t,r){return(t=Ese(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ese(e){var t=Ose(e,"string");return typeof t=="symbol"?t:t+""}function Ose(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gw(e,t){if(e==null)return{};var r,n,a=Ase(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ase(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Cse(e){var t=Mt(),r=x.useRef(null),n=iR(),{type:a}=e,s=gw(e,jse),l=xg(n,"xAxis",a),d=x.useMemo(()=>{if(l!=null)return Kk(Kk({},s),{},{type:l})},[s,l]);return x.useLayoutEffect(()=>{d!=null&&(r.current===null?t(lne(d)):r.current!==d&&t(cne({prev:r.current,next:d})),r.current=d)},[d,t]),x.useLayoutEffect(()=>()=>{r.current&&(t(une(r.current)),r.current=null)},[t]),null}var Pse=e=>{var{xAxisId:t,className:r}=e,n=ke(p1),a=Xr(),s="xAxis",l=ke(N=>Z4(N,s,t,a)),d=ke(N=>G4(N,t)),f=ke(N=>ZX(N,t)),h=ke(N=>C4(N,t));if(d==null||f==null||h==null)return null;var{dangerouslySetInnerHTML:p,ticks:g,scale:y}=e,v=gw(e,Sse),{id:j,scale:_}=h,S=gw(h,_se);return x.createElement(Gj,pw({},v,S,{x:f.x,y:f.y,width:d.width,height:d.height,className:ht("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:l,axisType:s}))},kse={allowDataOverflow:Er.allowDataOverflow,allowDecimals:Er.allowDecimals,allowDuplicatedCategory:Er.allowDuplicatedCategory,angle:Er.angle,axisLine:Si.axisLine,height:Er.height,hide:!1,includeHidden:Er.includeHidden,interval:Er.interval,label:!1,minTickGap:Er.minTickGap,mirror:Er.mirror,orientation:Er.orientation,padding:Er.padding,reversed:Er.reversed,scale:Er.scale,tick:Er.tick,tickCount:Er.tickCount,tickLine:Si.tickLine,tickSize:Si.tickSize,type:Er.type,xAxisId:0},Tse=e=>{var t=fr(e,kse);return x.createElement(x.Fragment,null,x.createElement(Cse,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),x.createElement(Pse,t))},hc=x.memo(Tse,v5);hc.displayName="XAxis";var Dse=["type"],Mse=["dangerouslySetInnerHTML","ticks","scale"],Rse=["id","scale"];function yw(){return yw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yw.apply(null,arguments)}function Qk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Hk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qk(Object(r),!0).forEach(function(n){Ise(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ise(e,t,r){return(t=Lse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lse(e){var t=Bse(e,"string");return typeof t=="symbol"?t:t+""}function Bse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vw(e,t){if(e==null)return{};var r,n,a=$se(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function $se(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Use(e){var t=Mt(),r=x.useRef(null),n=iR(),{type:a}=e,s=vw(e,Dse),l=xg(n,"yAxis",a),d=x.useMemo(()=>{if(l!=null)return Hk(Hk({},s),{},{type:l})},[l,s]);return x.useLayoutEffect(()=>{d!=null&&(r.current===null?t(dne(d)):r.current!==d&&t(fne({prev:r.current,next:d})),r.current=d)},[d,t]),x.useLayoutEffect(()=>()=>{r.current&&(t(hne(r.current)),r.current=null)},[t]),null}function zse(e){var{yAxisId:t,className:r,width:n,label:a}=e,s=x.useRef(null),l=x.useRef(null),d=ke(p1),f=Xr(),h=Mt(),p="yAxis",g=ke(T=>Y4(T,t)),y=ke(T=>eZ(T,t)),v=ke(T=>Z4(T,p,t,f)),j=ke(T=>P4(T,t));if(x.useLayoutEffect(()=>{if(!(n!=="auto"||!g||Mj(a)||x.isValidElement(a)||j==null)){var T=s.current;if(T){var M=T.getCalculatedWidth();Math.round(g.width)!==Math.round(M)&&h(mne({id:t,width:M}))}}},[v,g,h,a,t,n,j]),g==null||y==null||j==null)return null;var{dangerouslySetInnerHTML:_,ticks:S,scale:N}=e,E=vw(e,Mse),{id:O,scale:C}=j,D=vw(j,Rse);return x.createElement(Gj,yw({},E,D,{ref:s,labelRef:l,x:y.x,y:y.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:g.width,height:g.height,className:ht("recharts-".concat(p," ").concat(p),r),viewBox:d,ticks:v,axisType:p}))}var qse={allowDataOverflow:Or.allowDataOverflow,allowDecimals:Or.allowDecimals,allowDuplicatedCategory:Or.allowDuplicatedCategory,angle:Or.angle,axisLine:Si.axisLine,hide:!1,includeHidden:Or.includeHidden,interval:Or.interval,label:!1,minTickGap:Or.minTickGap,mirror:Or.mirror,orientation:Or.orientation,padding:Or.padding,reversed:Or.reversed,scale:Or.scale,tick:Or.tick,tickCount:Or.tickCount,tickLine:Si.tickLine,tickSize:Si.tickSize,type:Or.type,width:Or.width,yAxisId:0},Fse=e=>{var t=fr(e,qse);return x.createElement(x.Fragment,null,x.createElement(Use,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),x.createElement(zse,t))},mc=x.memo(Fse,v5);mc.displayName="YAxis";var Kse=(e,t)=>t,Xj=X([Kse,pt,E4,Dr,pI,Fi,gJ,xr],SJ),Zj=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},b5=na("mouseClick"),x5=cf();x5.startListening({actionCreator:b5,effect:(e,t)=>{var r=e.payload,n=Xj(t.getState(),Zj(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(mZ({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var bw=na("mouseMove"),w5=cf(),gm=null;w5.startListening({actionCreator:bw,effect:(e,t)=>{var r=e.payload;gm!==null&&cancelAnimationFrame(gm);var n=Zj(r);gm=requestAnimationFrame(()=>{var a=t.getState(),s=jj(a,a.tooltip.settings.shared);if(s==="axis"){var l=Xj(a,n);(l==null?void 0:l.activeIndex)!=null?t.dispatch(sI({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate})):t.dispatch(iI())}gm=null})}});function Qse(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var Vk={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},j5=vn({name:"rootProps",initialState:Vk,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:Vk.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),Hse=j5.reducer,{updateOptions:Vse}=j5.actions,Gse=null,Yse={updatePolarOptions:(e,t)=>t.payload},S5=vn({name:"polarOptions",initialState:Gse,reducers:Yse}),{updatePolarOptions:Wse}=S5.actions,Xse=S5.reducer,_5=na("keyDown"),N5=na("focus"),Jj=cf();Jj.startListening({actionCreator:_5,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var l=Sj(a,Jc(r),jf(r),_f(r)),d=l==null?-1:Number(l);if(!(!Number.isFinite(d)||d<0)){var f=Fi(r);if(s==="Enter"){var h=vp(r,"axis","hover",String(a.index));t.dispatch(lw({active:!a.active,activeIndex:a.index,activeCoordinate:h}));return}var p=aZ(r),g=p==="left-to-right"?1:-1,y=s==="ArrowRight"?1:-1,v=d+y*g;if(!(f==null||v>=f.length||v<0)){var j=vp(r,"axis","hover",String(v));t.dispatch(lw({active:!0,activeIndex:v.toString(),activeCoordinate:j}))}}}}}});Jj.startListening({actionCreator:N5,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",l=vp(r,"axis","hover",String(s));t.dispatch(lw({active:!0,activeIndex:s,activeCoordinate:l}))}}}});var Xn=na("externalEvent"),E5=cf(),Gb=new Map;E5.startListening({actionCreator:Xn,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var a=n.type,s=Gb.get(a);s!==void 0&&cancelAnimationFrame(s);var l=requestAnimationFrame(()=>{try{var d=t.getState(),f={activeCoordinate:eJ(d),activeDataKey:Aj(d),activeIndex:Ls(d),activeLabel:vI(d),activeTooltipIndex:Ls(d),isTooltipActive:tJ(d)};r(f,n)}finally{Gb.delete(a)}});Gb.set(a,l)}}});var Zse=X([Xc],e=>e.tooltipItemPayloads),Jse=X([Zse,(e,t)=>t,(e,t,r)=>r],(e,t,r)=>{if(t!=null){var n=e.find(s=>s.settings.graphicalItemId===r);if(n!=null){var{getPosition:a}=n;if(a!=null)return a(t)}}}),O5=na("touchMove"),A5=cf();A5.startListening({actionCreator:O5,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),a=jj(n,n.tooltip.settings.shared);if(a==="axis"){var s=r.touches[0];if(s==null)return;var l=Xj(n,Zj({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));(l==null?void 0:l.activeIndex)!=null&&t.dispatch(sI({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate}))}else if(a==="item"){var d,f=r.touches[0];if(document.elementFromPoint==null||f==null)return;var h=document.elementFromPoint(f.clientX,f.clientY);if(!h||!h.getAttribute)return;var p=h.getAttribute(JM),g=(d=h.getAttribute(eR))!==null&&d!==void 0?d:void 0,y=Zc(n).find(_=>_.id===g);if(p==null||y==null||g==null)return;var{dataKey:v}=y,j=Jse(n,p,g);t.dispatch(aI({activeDataKey:v,activeIndex:p,activeCoordinate:j,activeGraphicalItemId:g}))}}}});var eoe=wM({brush:Dne,cartesianAxis:pne,chartData:eee,errorBars:Oae,graphicalItems:jre,layout:OQ,legend:MH,options:YJ,polarAxis:Ite,polarOptions:Xse,referenceElements:Lne,rootProps:Hse,tooltip:pZ,zIndex:LJ}),toe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Z7({reducer:eoe,preloadedState:t,middleware:n=>{var a;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([x5.middleware,w5.middleware,Jj.middleware,E5.middleware,A5.middleware])},enhancers:n=>{var a=n;return typeof n=="function"&&(a=n()),a.concat(IM({type:"raf"}))},devTools:{serialize:{replacer:Qse},name:"recharts-".concat(r)}})};function C5(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=Xr(),s=x.useRef(null);if(a)return r;s.current==null&&(s.current=toe(t,n));var l=l1;return x.createElement(eie,{context:l,store:s.current},r)}function roe(e){var{layout:t,margin:r}=e,n=Mt(),a=Xr();return x.useEffect(()=>{a||(n(_Q(t)),n(SQ(r)))},[n,a,t,r]),null}var P5=x.memo(roe,Rg);function k5(e){var t=Mt();return x.useEffect(()=>{t(Vse(e))},[t,e]),null}function Gk(e){var{zIndex:t,isPanorama:r}=e,n=x.useRef(null),a=Mt();return x.useLayoutEffect(()=>(n.current&&a(RJ({zIndex:t,element:n.current,isPanorama:r})),()=>{a(IJ({zIndex:t,isPanorama:r}))}),[a,t,r]),x.createElement("g",{tabIndex:-1,ref:n})}function Yk(e){var{children:t,isPanorama:r}=e,n=ke(NJ);if(!n||n.length===0)return t;var a=n.filter(l=>l<0),s=n.filter(l=>l>0);return x.createElement(x.Fragment,null,a.map(l=>x.createElement(Gk,{key:l,zIndex:l,isPanorama:r})),t,s.map(l=>x.createElement(Gk,{key:l,zIndex:l,isPanorama:r})))}var noe=["children"];function aoe(e,t){if(e==null)return{};var r,n,a=ioe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ioe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Op(){return Op=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Op.apply(null,arguments)}var soe={width:"100%",height:"100%",display:"block"},ooe=x.forwardRef((e,t)=>{var r=v1(),n=b1(),a=yR();if(!qa(r)||!qa(n))return null;var{children:s,otherAttributes:l,title:d,desc:f}=e,h,p;return l!=null&&(typeof l.tabIndex=="number"?h=l.tabIndex:h=a?0:void 0,typeof l.role=="string"?p=l.role:p=a?"application":void 0),x.createElement(Xw,Op({},l,{title:d,desc:f,role:p,tabIndex:h,width:r,height:n,style:soe,ref:t}),s)}),loe=e=>{var{children:t}=e,r=ke(sg);if(!r)return null;var{width:n,height:a,y:s,x:l}=r;return x.createElement(Xw,{width:n,height:a,x:l,y:s},t)},Wk=x.forwardRef((e,t)=>{var{children:r}=e,n=aoe(e,noe),a=Xr();return a?x.createElement(loe,null,x.createElement(Yk,{isPanorama:!0},r)):x.createElement(ooe,Op({ref:t},n),x.createElement(Yk,{isPanorama:!1},r))});function coe(){var e=Mt(),[t,r]=x.useState(null),n=ke(KQ);return x.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;st(s)&&s!==n&&e(EQ(s))}},[t,e,n]),r}function Xk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function uoe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xk(Object(r),!0).forEach(function(n){doe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function doe(e,t,r){return(t=foe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function foe(e){var t=hoe(e,"string");return typeof t=="symbol"?t:t+""}function hoe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ds(){return Ds=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ds.apply(null,arguments)}var moe=()=>(cee(),null);function Ap(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var poe=x.forwardRef((e,t)=>{var r,n,a=x.useRef(null),[s,l]=x.useState({containerWidth:Ap((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:Ap((n=e.style)===null||n===void 0?void 0:n.height)}),d=x.useCallback((h,p)=>{l(g=>{var y=Math.round(h),v=Math.round(p);return g.containerWidth===y&&g.containerHeight===v?g:{containerWidth:y,containerHeight:v}})},[]),f=x.useCallback(h=>{if(typeof t=="function"&&t(h),h!=null&&typeof ResizeObserver<"u"){var{width:p,height:g}=h.getBoundingClientRect();d(p,g);var y=j=>{var _=j[0];if(_!=null){var{width:S,height:N}=_.contentRect;d(S,N)}},v=new ResizeObserver(y);v.observe(h),a.current=v}},[t,d]);return x.useEffect(()=>()=>{var h=a.current;h!=null&&h.disconnect()},[d]),x.createElement(x.Fragment,null,x.createElement(df,{width:s.containerWidth,height:s.containerHeight}),x.createElement("div",Ds({ref:f},e)))}),goe=x.forwardRef((e,t)=>{var{width:r,height:n}=e,[a,s]=x.useState({containerWidth:Ap(r),containerHeight:Ap(n)}),l=x.useCallback((f,h)=>{s(p=>{var g=Math.round(f),y=Math.round(h);return p.containerWidth===g&&p.containerHeight===y?p:{containerWidth:g,containerHeight:y}})},[]),d=x.useCallback(f=>{if(typeof t=="function"&&t(f),f!=null){var{width:h,height:p}=f.getBoundingClientRect();l(h,p)}},[t,l]);return x.createElement(x.Fragment,null,x.createElement(df,{width:a.containerWidth,height:a.containerHeight}),x.createElement("div",Ds({ref:d},e)))}),yoe=x.forwardRef((e,t)=>{var{width:r,height:n}=e;return x.createElement(x.Fragment,null,x.createElement(df,{width:r,height:n}),x.createElement("div",Ds({ref:t},e)))}),voe=x.forwardRef((e,t)=>{var{width:r,height:n}=e;return typeof r=="string"||typeof n=="string"?x.createElement(goe,Ds({},e,{ref:t})):typeof r=="number"&&typeof n=="number"?x.createElement(yoe,Ds({},e,{width:r,height:n,ref:t})):x.createElement(x.Fragment,null,x.createElement(df,{width:r,height:n}),x.createElement("div",Ds({ref:t},e)))});function boe(e){return e?poe:voe}var xoe=x.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:l,onDoubleClick:d,onMouseDown:f,onMouseEnter:h,onMouseLeave:p,onMouseMove:g,onMouseUp:y,onTouchEnd:v,onTouchMove:j,onTouchStart:_,style:S,width:N,responsive:E,dispatchTouchEvents:O=!0}=e,C=x.useRef(null),D=Mt(),[T,M]=x.useState(null),[R,U]=x.useState(null),W=coe(),F=g1(),z=(F==null?void 0:F.width)>0?F.width:N,pe=(F==null?void 0:F.height)>0?F.height:a,oe=x.useCallback(J=>{W(J),typeof t=="function"&&t(J),M(J),U(J),J!=null&&(C.current=J)},[W,t,M,U]),me=x.useCallback(J=>{D(b5(J)),D(Xn({handler:s,reactEvent:J}))},[D,s]),I=x.useCallback(J=>{D(bw(J)),D(Xn({handler:h,reactEvent:J}))},[D,h]),H=x.useCallback(J=>{D(iI()),D(Xn({handler:p,reactEvent:J}))},[D,p]),ie=x.useCallback(J=>{D(bw(J)),D(Xn({handler:g,reactEvent:J}))},[D,g]),he=x.useCallback(()=>{D(N5())},[D]),K=x.useCallback(J=>{D(_5(J.key))},[D]),P=x.useCallback(J=>{D(Xn({handler:l,reactEvent:J}))},[D,l]),B=x.useCallback(J=>{D(Xn({handler:d,reactEvent:J}))},[D,d]),Y=x.useCallback(J=>{D(Xn({handler:f,reactEvent:J}))},[D,f]),ne=x.useCallback(J=>{D(Xn({handler:y,reactEvent:J}))},[D,y]),G=x.useCallback(J=>{D(Xn({handler:_,reactEvent:J}))},[D,_]),be=x.useCallback(J=>{O&&D(O5(J)),D(Xn({handler:j,reactEvent:J}))},[D,O,j]),ge=x.useCallback(J=>{D(Xn({handler:v,reactEvent:J}))},[D,v]),je=boe(E);return x.createElement(NI.Provider,{value:T},x.createElement(BD.Provider,{value:R},x.createElement(je,{width:z??(S==null?void 0:S.width),height:pe??(S==null?void 0:S.height),className:ht("recharts-wrapper",n),style:uoe({position:"relative",cursor:"default",width:z,height:pe},S),onClick:me,onContextMenu:P,onDoubleClick:B,onFocus:he,onKeyDown:K,onMouseDown:Y,onMouseEnter:I,onMouseLeave:H,onMouseMove:ie,onMouseUp:ne,onTouchEnd:ge,onTouchMove:be,onTouchStart:G,ref:oe},x.createElement(moe,null),r)))}),woe=["width","height","responsive","children","className","style","compact","title","desc"];function joe(e,t){if(e==null)return{};var r,n,a=Soe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Soe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var T5=x.forwardRef((e,t)=>{var{width:r,height:n,responsive:a,children:s,className:l,style:d,compact:f,title:h,desc:p}=e,g=joe(e,woe),y=Mn(g);return f?x.createElement(x.Fragment,null,x.createElement(df,{width:r,height:n}),x.createElement(Wk,{otherAttributes:y,title:h,desc:p},s)):x.createElement(xoe,{className:l,style:d,width:r,height:n,responsive:a??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},x.createElement(Wk,{otherAttributes:y,title:h,desc:p,ref:t},x.createElement($ne,null,s)))});function xw(){return xw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xw.apply(null,arguments)}var _oe={top:5,right:5,bottom:5,left:5},Noe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:_oe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},D5=x.forwardRef(function(t,r){var n,a=fr(t.categoricalChartProps,Noe),{chartName:s,defaultTooltipEventType:l,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,p={chartName:s,defaultTooltipEventType:l,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return x.createElement(C5,{preloadedState:{options:p},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:s},x.createElement(e5,{chartData:h.data}),x.createElement(P5,{layout:a.layout,margin:a.margin}),x.createElement(k5,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),x.createElement(T5,xw({},a,{ref:r})))}),Eoe=["axis","item"],M5=x.forwardRef((e,t)=>x.createElement(D5,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Eoe,tooltipPayloadSearcher:Dj,categoricalChartProps:e,ref:t}));function Ooe(e){var t=Mt();return x.useEffect(()=>{t(Wse(e))},[t,e]),null}var Aoe=["layout"];function ww(){return ww=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ww.apply(null,arguments)}function Coe(e,t){if(e==null)return{};var r,n,a=Poe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Poe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var koe={top:5,right:5,bottom:5,left:5},R5={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:koe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Toe=x.forwardRef(function(t,r){var n,a=fr(t.categoricalChartProps,R5),{layout:s}=a,l=Coe(a,Aoe),{chartName:d,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:p}=t,g={chartName:d,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:p,eventEmitter:void 0};return x.createElement(C5,{preloadedState:{options:g},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:d},x.createElement(e5,{chartData:a.data}),x.createElement(P5,{layout:s,margin:a.margin}),x.createElement(k5,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),x.createElement(Ooe,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),x.createElement(T5,ww({},l,{ref:r})))});function Zk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zk(Object(r),!0).forEach(function(n){Doe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Doe(e,t,r){return(t=Moe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Moe(e){var t=Roe(e,"string");return typeof t=="symbol"?t:t+""}function Roe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ioe=["item"],Loe=Jk(Jk({},R5),{},{layout:"centric",startAngle:0,endAngle:360}),I5=x.forwardRef((e,t)=>{var r=fr(e,Loe);return x.createElement(Toe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Ioe,tooltipPayloadSearcher:Dj,categoricalChartProps:r,ref:t})}),Boe=["axis"],jw=x.forwardRef((e,t)=>x.createElement(D5,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Boe,tooltipPayloadSearcher:Dj,categoricalChartProps:e,ref:t}));const $oe=()=>{const{user:e,isLoading:t}=ja(),[r,n]=x.useState(window.innerWidth<768);if(x.useEffect(()=>{const K=()=>n(window.innerWidth<768);return window.addEventListener("resize",K),()=>window.removeEventListener("resize",K)},[]),t)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading session..."});if(!e)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Not Authenticated"});const a=e.role===qe.ADMIN,[s,l]=x.useState("All Time"),[d,f]=x.useState({from:"",to:""}),{data:h=[],isPending:p}=Zd(),{data:g=[],isPending:y}=Jd(),{data:v=[],isPending:j}=ef(),{data:_=[],isPending:S}=Ri(),{data:N=[]}=Us(),E=p||y||j||S,O=x.useMemo(()=>h.filter(K=>f0(K.orderDate,s,d)),[h,s,d]),C=x.useMemo(()=>g.filter(K=>f0(K.billDate,s,d)),[g,s,d]),D=x.useMemo(()=>v.filter(K=>f0(K.date,s,d)),[v,s,d]),T=D.filter(K=>K.type==="Income"&&!!K.referenceId).reduce((K,P)=>K+P.amount,0),M=T>0?T:O.filter(K=>K.status===Ie.COMPLETED).reduce((K,P)=>K+P.total,0),R=D.filter(K=>K.type==="Expense"&&K.category==="expense_purchases").reduce((K,P)=>K+P.amount,0),U=R>0?R:C.reduce((K,P)=>K+P.total,0),W=D.filter(K=>K.type==="Expense"&&K.category!=="expense_purchases").reduce((K,P)=>K+P.amount,0),F=M-U-W,z={total:O.length,processing:O.filter(K=>K.status===Ie.PROCESSING).length,picked:O.filter(K=>K.status===Ie.PICKED).length,completed:O.filter(K=>K.status===Ie.COMPLETED).length};O.reduce((K,P)=>K+(P.total-P.paidAmount),0),C.reduce((K,P)=>K+(P.total-P.paidAmount),0);const pe=h.filter(K=>K.createdBy===e.id).length,oe=new Date().toISOString().split("T")[0],me=h.filter(K=>K.createdBy===e.id&&K.orderDate===oe).length,I=h.filter(K=>K.createdBy===e.id&&K.status===Ie.ON_HOLD).length,H=x.useMemo(()=>{const K=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],P=new Date().getFullYear(),B={};return K.forEach(Y=>{B[Y]={income:0,expense:0}}),v.forEach(Y=>{const ne=new Date(Y.date);if(ne.getFullYear()!==P)return;const G=ne.getMonth(),be=K[G];Y.type==="Income"?B[be].income+=Y.amount:Y.type==="Expense"&&(B[be].expense+=Y.amount)}),K.map(Y=>({name:Y,income:B[Y].income,expense:-B[Y].expense,profit:B[Y].income-B[Y].expense}))},[h,g,v]),ie=x.useMemo(()=>{const K=new Map(N.map(ge=>[ge.id,ge.name])),P={},B={},Y=["#10B981","#3B82F6","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16"];let ne=0;U>0&&(P.Purchases=U,B.Purchases=Y[ne++]),D.filter(ge=>ge.type==="Expense"&&ge.category!=="expense_purchases").forEach(ge=>{const je=K.get(ge.category)||ge.category||"Uncategorized";P[je]=(P[je]||0)+ge.amount,B[je]||(B[je]=Y[ne%Y.length],ne++)});const be=Object.entries(P).map(([ge,je])=>({name:ge,value:Math.max(je,1),color:B[ge]}));return be.length>0?be:[{name:"No Data",value:1,color:"#D1D5DB"}]},[D,U,N]),he=_.map(K=>({name:K.name.split(" ")[0],orders:O.filter(P=>P.createdBy===K.id).length})).sort((K,P)=>P.orders-K.orders);return a?c.jsxs("div",{className:"space-y-6",children:[c.jsx(Xd,{isLoading:E,message:"Loading dashboard data..."}),c.jsx(Uo,{filterRange:s,setFilterRange:l,customDates:d,setCustomDates:f}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(ua,{title:"Total Sales",value:Se(M),icon:se.Sales,bgColor:"bg-blue-600",textColor:"text-white",iconBgColor:"bg-blue-700"}),c.jsx(ua,{title:"Total Purchases",value:Se(U),icon:se.Briefcase,bgColor:"bg-purple-600",textColor:"text-white",iconBgColor:"bg-purple-700"}),c.jsx(ua,{title:"Other Expenses",value:Se(W),icon:se.Delete,bgColor:"bg-amber-500",textColor:"text-white",iconBgColor:"bg-amber-600"}),c.jsx(ua,{title:"Total Profit",value:Se(F),icon:se.Reports,isProfitCard:!0,profitValue:F}),c.jsx(ua,{title:"Total Orders",value:z.total,icon:se.Dashboard,bgColor:"bg-indigo-700",textColor:"text-white",iconBgColor:"bg-indigo-800"}),c.jsx(ua,{title:"Processing Orders",value:z.processing,icon:se.More,bgColor:"bg-sky-500",textColor:"text-white",iconBgColor:"bg-sky-600"}),c.jsx(ua,{title:"Picked Orders",value:z.picked,icon:se.Courier,bgColor:"bg-cyan-500",textColor:"text-white",iconBgColor:"bg-cyan-600"}),c.jsx(ua,{title:"Completed Orders",value:z.completed,icon:se.PlusCircle,bgColor:"bg-teal-600",textColor:"text-white",iconBgColor:"bg-teal-700"})]}),c.jsxs("div",{className:"bg-white p-8 rounded-xl border border-gray-100 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsx("div",{children:c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Cash Flow"})}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full bg-[#059669]"}),c.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Income"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),c.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Expense"})]})]})]}),c.jsx("div",{className:"h-[250px]",children:c.jsx(uc,{width:"100%",height:"100%",children:r?c.jsxs(jw,{data:H,margin:{top:10,right:0,left:-20,bottom:0},children:[c.jsx(fc,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),c.jsx(hc,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:12,fontWeight:600,fill:"#94a3b8"}}),c.jsx(mc,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fontWeight:600,fill:"#94a3b8"}}),c.jsx(_o,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1)"},cursor:{fill:"#f8fafc"}}),c.jsx(vi,{dataKey:"income",fill:"#059669",radius:[4,4,0,0],barSize:40}),c.jsx(vi,{dataKey:"expense",fill:"#EF4444",radius:[4,4,0,0],barSize:40}),c.jsx(_p,{type:"monotone",dataKey:"profit",stroke:"#8B5CF6",strokeWidth:4,dot:{r:6,fill:"#8B5CF6",strokeWidth:2,stroke:"#fff"}})]}):c.jsxs(jw,{data:H,children:[c.jsx(fc,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),c.jsx(hc,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:12,fontWeight:600,fill:"#94a3b8"}}),c.jsx(mc,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fontWeight:600,fill:"#94a3b8"}}),c.jsx(_o,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1)"},cursor:{fill:"#f8fafc"}}),c.jsx(vi,{dataKey:"income",fill:"#059669",radius:[4,4,0,0],barSize:40}),c.jsx(vi,{dataKey:"expense",fill:"#EF4444",radius:[4,4,0,0],barSize:40}),c.jsx(_p,{type:"monotone",dataKey:"profit",stroke:"#8B5CF6",strokeWidth:4,dot:{r:6,fill:"#8B5CF6",strokeWidth:2,stroke:"#fff"}})]})})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-white p-8 rounded-xl border border-gray-100 shadow-sm",children:[c.jsx("div",{className:"flex items-center justify-between mb-8",children:c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Profit & Loss Summary"})}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center p-4 border border-gray-100 rounded-lg",children:[c.jsx("span",{className:"font-bold text-gray-600 text-sm",children:"Total Incomes"}),c.jsx("span",{className:"font-black text-gray-900 text-sm",children:Se(M)})]}),c.jsxs("div",{className:"flex justify-between items-center p-4 border border-gray-100 rounded-lg",children:[c.jsx("span",{className:"font-bold text-gray-600 text-sm",children:"Total Expenses"}),c.jsx("span",{className:"font-black text-gray-900 text-sm",children:Se(U+W)})]}),c.jsxs("div",{className:`flex justify-between items-center p-6 rounded-xl shadow-xl text-white
                  ${F>=0?"bg-emerald-600 shadow-emerald-600/20":"bg-red-600 shadow-red-600/20"}
                `,children:[c.jsx("span",{className:"font-black uppercase tracking-widest text-sm",children:"Net Profit"}),c.jsx("span",{className:"font-black text-sm",children:Se(F)})]})]})]}),c.jsxs("div",{className:"bg-white p-8 rounded-xl border border-gray-100 shadow-sm",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-8",children:"Expenses by Category"}),c.jsx("div",{className:"h-[300px]",children:c.jsx(uc,{width:"100%",height:"100%",children:c.jsxs(I5,{children:[c.jsx(Qj,{data:ie,innerRadius:0,outerRadius:100,dataKey:"value",children:ie.map((K,P)=>c.jsx(nl,{fill:K.color},`cell-${P}`))}),c.jsx(_o,{}),r?c.jsx(Cd,{verticalAlign:"bottom",align:"center",layout:"horizontal",wrapperStyle:{paddingTop:"20px"}}):c.jsx(Cd,{verticalAlign:"middle",align:"right",layout:"vertical"})]})})})]})]})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsx(Uo,{filterRange:s,setFilterRange:l,customDates:d,setCustomDates:f}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(ua,{title:"Total Created",value:pe,icon:se.Sales,bgColor:"bg-blue-600",textColor:"text-white",iconBgColor:"bg-blue-700"}),c.jsx(ua,{title:"Created Today",value:me,icon:se.Dashboard,bgColor:"bg-teal-500",textColor:"text-white",iconBgColor:"bg-teal-600"}),c.jsx(ua,{title:"Pending (Hold)",value:I,icon:se.More,bgColor:"bg-orange-500",textColor:"text-white",iconBgColor:"bg-orange-600"})]}),c.jsxs("div",{className:"bg-white p-8 rounded-xl border border-gray-100 shadow-sm",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Team Performance"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Comparing total orders across all employees"})]}),c.jsx("div",{className:"h-[400px]",children:c.jsx(uc,{width:"100%",height:"100%",children:c.jsxs(M5,{data:he,children:[c.jsx(fc,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),c.jsx(hc,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:12,fontWeight:700,fill:"#64748b"}}),c.jsx(mc,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fontWeight:700,fill:"#64748b"}}),c.jsx(_o,{cursor:{fill:"#f8fafc"},contentStyle:{borderRadius:"16px",border:"none",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1)"}}),c.jsx(vi,{dataKey:"orders",fill:"#10B981",radius:[12,12,0,0]})]})})})]})]})},L5=({anchorEl:e,open:t,onClose:r,children:n,align:a="right"})=>{const[s,l]=x.useState(null);if(x.useEffect(()=>{if(!t||!e){l(null);return}const f=()=>{const h=e.getBoundingClientRect(),g=a==="right"?h.right-200:h.left,y=h.bottom+8;l({top:y,left:g})};return f(),window.addEventListener("resize",f),window.addEventListener("scroll",f,!0),()=>{window.removeEventListener("resize",f),window.removeEventListener("scroll",f,!0)}},[e,t,a]),x.useEffect(()=>{if(!t)return;const f=h=>{const p=h.target;if(!e||e.contains(p))return;const g=document.getElementById("portal-menu-root");g&&g.contains(p)||r()};return document.addEventListener("click",f),()=>document.removeEventListener("click",f)},[t,e,r]),!t||!s)return null;const d=c.jsx("div",{id:"portal-menu-root",className:"fixed left-0 top-0 z-[2000] pointer-events-none",children:c.jsx("div",{style:{position:"fixed",top:s.top,left:s.left},className:"pointer-events-auto w-48 bg-white border border-gray-100 rounded-lg shadow-2xl py-2",children:n})});return Tp.createPortal(d,document.body)},Cp=(e,t)=>{t(`/print-order/${e}`)},Uoe=()=>{setTimeout(()=>{window.print()},100)},zoe=()=>{const e=_t(),t=ze(),r=Kr(),{searchQuery:n}=Qa(),{user:a,isLoading:s}=ja(),l=(a==null?void 0:a.role)===qe.ADMIN,d=(a==null?void 0:a.role)===qe.EMPLOYEE,{data:f}=zs(),h=(f==null?void 0:f.recordsPerPage)||Qt,[p,g]=x.useState("All Time"),[y,v]=x.useState({from:"",to:""}),[j,_]=x.useState("All"),[S,N]=x.useState("all"),[E,O]=x.useState(null),[C,D]=x.useState(null),[T,M]=x.useState(null),[R,U]=x.useState(null),[W,F]=x.useState(null),[z,pe]=x.useState(null),[oe,me]=x.useState({date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!1}),accountId:"",amount:0}),[I,H]=x.useState(1),{data:ie=[]}=Ri(),he=x.useMemo(()=>{if(S!=="all")return S==="admins"?ie.filter(V=>V.role===qe.ADMIN).map(V=>V.id):S==="employees"?ie.filter(V=>V.role===qe.EMPLOYEE).map(V=>V.id):[S]},[S,ie]),{data:K,isFetching:P}=R9(I,h,{status:j==="All"?void 0:j,from:y.from,to:y.to,search:n,createdByIds:he}),B=(K==null?void 0:K.data)??[],Y=(K==null?void 0:K.count)??0,ne=Math.max(1,Math.ceil(Y/h)),{data:G=[]}=Zo(),{data:be=[]}=$s(),{data:ge}=zp();x.useEffect(()=>{H(1)},[n,j,p,y.from,y.to,S]);const je=V=>{H(1),_(V)},J=V=>{H(1),g(V)},Ee=V=>{H(1),v(V)},Ce=V=>{H(1),N(V)};Fp();const de=Y9(),Xe=rf(),Le=af(),vt=nf(),lt=x.useMemo(()=>new Map(ie.map(V=>[V.id,V])),[ie]),$t=V=>{if(p==="All Time")return!0;const ye=new Date(V),Je=new Date;if(p==="Today")return ye.toDateString()===Je.toDateString();if(p==="This Week"){const Ze=Je.getDate()-Je.getDay(),Sr=new Date(new Date().setDate(Ze)),hr=new Date(new Date().setDate(Ze+6));return ye>=Sr&&ye<=hr}return p==="This Month"?ye.getMonth()===Je.getMonth()&&ye.getFullYear()===Je.getFullYear():p==="This Year"?ye.getFullYear()===Je.getFullYear():p==="Custom"?!y.from||!y.to?!0:ye>=new Date(y.from)&&ye<=new Date(y.to):!0},we=V=>{var ye,Je;if((ye=V.createdBy)!=null&&ye.trim()){const Ze=lt.get(V.createdBy);if(Ze!=null&&Ze.name)return Ze.name}if((Je=V.history)!=null&&Je.created){const Ze=V.history.created.match(/^(.+?)\s+created this order on/);if(Ze&&Ze[1])return Ze[1]}return null},ct=x.useMemo(()=>{let V=B.filter(ye=>$t(ye.orderDate)).filter(ye=>j==="All"||ye.status===j);if(n.trim()){const ye=n.toLowerCase();V=V.filter(Je=>{const Ze=G.find(hr=>hr.id===Je.customerId),Sr=we(Je);return Je.orderNumber.toLowerCase().includes(ye)||(Ze==null?void 0:Ze.name.toLowerCase().includes(ye))||(Ze==null?void 0:Ze.phone.includes(ye))||(Sr==null?void 0:Sr.toLowerCase().includes(ye))})}return V},[B,p,y,j,n,G]),re=async V=>{if(confirm("Are you sure you want to delete this order?"))try{await de.mutateAsync(V),t.invalidateQueries({queryKey:["orders",I]})}catch(ye){console.error("Failed to delete order",ye)}},He=V=>{me({date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!1}),accountId:"",amount:V.total-V.paidAmount}),U(V)},ve=async()=>{if(!R)return;const V=R;try{let ye=be.find(pr=>pr.id===oe.accountId);if(!ye){if(!oe.accountId){r.error("Please select an account");return}ye={id:oe.accountId,name:"Selected Account",type:"Bank",openingBalance:0,currentBalance:0}}const Je=oe.amount<V.total,[Ze,Sr]=oe.time.split(":").map(Number),hr=new Date(oe.date);hr.setHours(Ze,Sr,0,0);const xn=hr.toISOString(),mr={date:xn,type:"Income",category:Ne.settings.defaults.incomeCategoryId||"income_sales",accountId:oe.accountId,amount:V.total,description:`Payment for Order #${V.orderNumber}`,referenceId:V.id,contactId:V.customerId,paymentMethod:Ne.settings.defaults.paymentMethod||"Cash",createdBy:a.id};if(Je){const pr=V.total-oe.amount,_a={date:xn,type:"Expense",category:"expense_shipping",accountId:oe.accountId,amount:pr,description:`Shipping costs for Order #${V.orderNumber}`,paymentMethod:Ne.settings.defaults.paymentMethod||"Cash",createdBy:a.id};await Promise.all([Le.mutateAsync(mr),Le.mutateAsync(_a)])}else await Le.mutateAsync(mr);const sa=oe.amount,sl=(V.paidAmount??0)+oe.amount,Mr=Ie.COMPLETED;await Promise.all([vt.mutateAsync({id:ye.id,updates:{currentBalance:(ye.currentBalance??0)+sa}}),Xe.mutateAsync({id:V.id,updates:{paidAmount:sl,status:Mr}})]),U(null),t.invalidateQueries({queryKey:["orders",I]})}catch(ye){console.error("Failed to add payment:",ye),r.error("Failed to add payment: "+(ye instanceof Error?ye.message:"Unknown error"))}};return c.jsxs("div",{className:"space-y-6 pb-12",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-black text-gray-900 tracking-tight",children:"Orders"})}),c.jsx(We,{onClick:()=>e("/orders/new"),variant:"primary",size:"md",icon:se.Plus,children:"New Order"})]}),c.jsx(Uo,{title:"Orders",filterRange:p,setFilterRange:J,customDates:y,setCustomDates:Ee,statusTab:j,setStatusTab:je,statusOptions:Object.values(Ie)}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:c.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[c.jsx("label",{className:"text-sm font-bold text-gray-700",children:"Created By:"}),c.jsxs("select",{value:S,onChange:V=>Ce(V.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"all",children:"All Users"}),ie.some(V=>V.role===qe.ADMIN)&&c.jsx("option",{value:"admins",children:"All Admins"}),ie.some(V=>V.role===qe.EMPLOYEE)&&c.jsx("option",{value:"employees",children:"All Employees"}),c.jsx("optgroup",{label:"Specific Users",children:ie.map(V=>c.jsxs("option",{value:V.id,children:[V.name," ",V.role===qe.ADMIN?"(Admin)":"(Employee)"]},V.id))})]})]})}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-visible",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Order Details"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Customer"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Created By"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Status"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] text-right",children:"Net Amount"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] sm:hidden",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:P?c.jsx(Bp,{columns:5,rows:8}):ct.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:6,className:"px-6 py-20 text-center text-gray-400 italic font-medium",children:"No sales orders found for this period."})}):ct.map(V=>{var Je,Ze,Sr,hr,xn,mr,sa,sl;const ye=l||V.status===Ie.ON_HOLD;return V.createdBy,a==null||a.id,c.jsxs("tr",{onMouseEnter:()=>O(V.id),onMouseLeave:()=>O(null),onClick:()=>e(`/orders/${V.id}`),className:"group relative hover:bg-[#ebf4ff]/20 cursor-pointer transition-all",children:[c.jsxs("td",{className:"px-6 py-5",children:[c.jsxs("span",{className:"font-black text-gray-900",children:["#",V.orderNumber]}),c.jsx("p",{className:"text-[10px] text-gray-400 font-bold mt-1 tracking-tight",children:new Date(V.orderDate).toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})})]}),c.jsxs("td",{className:"px-6 py-5",children:[c.jsx("span",{className:"text-sm font-bold text-gray-700",children:((Je=G.find(Mr=>Mr.id===V.customerId))==null?void 0:Je.name)||"Unknown"}),c.jsx("p",{className:"text-[10px] text-gray-400 font-medium mt-0.5",children:(Ze=G.find(Mr=>Mr.id===V.customerId))==null?void 0:Ze.phone})]}),c.jsx("td",{className:"px-6 py-5 text-xs font-bold text-gray-500",children:we(V)||""}),c.jsxs("td",{className:"px-6 py-5",children:[c.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest ${Lp(V.status)}`,children:V.status}),V.status!==Ie.COMPLETED&&((hr=(Sr=V.history)==null?void 0:Sr.courier)==null?void 0:hr.includes("Steadfast"))&&c.jsx("img",{src:"/uploads/steadfast.png",alt:"Steadfast",className:"inline-block w-5 h-5 rounded-full ml-2"}),V.status!==Ie.COMPLETED&&((mr=(xn=V.history)==null?void 0:xn.courier)==null?void 0:mr.includes("CarryBee"))&&c.jsx("img",{src:"/uploads/carrybee.png",alt:"CarryBee",className:"inline-block w-5 h-5 rounded-full ml-2"})]}),c.jsxs("td",{className:"px-6 py-5 text-right",children:[c.jsx("span",{className:"font-black text-gray-900 text-base",children:Se(V.total)}),V.paidAmount>0&&c.jsx("p",{className:"text-[10px] font-black uppercase tracking-tighter mt-1 text-green-500",children:`Paid: ${Se(V.paidAmount)}`})]}),c.jsx("td",{className:"px-6 py-5 sm:hidden relative z-[999]",onClick:Mr=>Mr.stopPropagation(),children:c.jsxs("div",{className:"relative z-[999]",children:[c.jsx("button",{onClick:Mr=>{const pr=Mr.currentTarget;C===V.id?(D(null),M(null)):(D(V.id),M(pr))},className:"p-2 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-lg transition-all",children:se.More}),c.jsx(L5,{anchorEl:T,open:C===V.id,onClose:()=>{D(null),M(null)},children:d?V.status===Ie.ON_HOLD?c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>{e(`/orders/edit/${V.id}`),D(null),M(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[se.Edit," Edit"]}),c.jsxs("button",{onClick:()=>{re(V.id),D(null),M(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-red-50 flex items-center gap-2 font-bold text-red-600",children:[se.Delete," Delete"]})]}):null:c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>{e(`/orders/edit/${V.id}`),D(null),M(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[se.Edit," Edit"]}),V.status!==Ie.COMPLETED&&c.jsxs("button",{onClick:()=>{He(V),D(null),M(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[se.Banking," Payment"]}),c.jsx("div",{className:"border-t my-1"}),c.jsxs("button",{onClick:()=>{Cp(V.id,e),D(null),M(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[se.Print," Print"]}),c.jsxs("button",{className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[se.Download," Download"]}),V.status!==Ie.PICKED&&V.status!==Ie.COMPLETED&&V.status!==Ie.CANCELLED&&V.status!==Ie.ON_HOLD&&!((sa=V.history)!=null&&sa.courier)&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"border-t my-1"}),c.jsxs("button",{onClick:()=>{F(V.id),D(null),M(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-[#0f2f57]",children:[c.jsx("img",{src:"../uploads/steadfast.png",alt:"Steadfast",className:"w-5 h-5 rounded-full"})," ",c.jsx("span",{children:"Add to Steadfast"})]}),c.jsxs("button",{onClick:()=>{pe(V.id),D(null),M(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-[#0f2f57]",children:[c.jsx("img",{src:"../uploads/carrybee.png",alt:"CarryBee",className:"w-5 h-5 rounded-full"})," ",c.jsx("span",{children:"Add to CarryBee"})]})]}),c.jsx("div",{className:"border-t my-1"}),c.jsxs("button",{onClick:()=>{re(V.id),D(null),M(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-red-50 flex items-center gap-2 font-bold text-red-600",children:[se.Delete," Delete"]})]})})]})}),E===V.id&&(l||d&&V.status===Ie.ON_HOLD)&&c.jsx("td",{className:"absolute right-6 top-1/2 -translate-y-1/2 z-10 animate-in fade-in slide-in-from-right-2 duration-200 hidden sm:table-cell",onClick:Mr=>Mr.stopPropagation(),children:c.jsx("div",{className:"flex items-center gap-1.5 bg-white p-1.5 rounded-2xl shadow-[0_20px_50px_rgba(0,0,0,0.15)] border border-[#ebf4ff]",children:d?V.status===Ie.ON_HOLD?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>e(`/orders/edit/${V.id}`),className:"p-2.5 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-xl transition-all",title:"Edit",children:se.Edit}),c.jsx("button",{onClick:()=>re(V.id),className:"p-2.5 text-red-600 hover:bg-red-50 rounded-xl transition-all",title:"Delete",children:se.Delete})]}):null:c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>e(`/orders/edit/${V.id}`),className:"p-2.5 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-xl transition-all",title:"Edit",children:se.Edit}),V.status!==Ie.COMPLETED&&c.jsx("button",{onClick:()=>He(V),className:"p-2.5 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-xl transition-all",title:"Add Payment",children:se.Banking}),c.jsx("button",{onClick:()=>Cp(V.id,e),className:"p-2.5 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-xl transition-all",title:"Print",children:se.Print}),c.jsx("button",{className:"p-2.5 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-xl transition-all",title:"Download PDF",children:se.Download}),V.status!==Ie.PICKED&&V.status!==Ie.COMPLETED&&V.status!==Ie.CANCELLED&&V.status!==Ie.ON_HOLD&&!((sl=V.history)!=null&&sl.courier)&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"h-5 w-px bg-gray-100 mx-1"}),c.jsx("button",{onClick:()=>F(V.id),className:"px-1 py-1 text-[9px] font-black hover:bg-[#ebf4ff] rounded-lg",title:"Send to Steadfast",children:c.jsx("img",{src:"/uploads/steadfast.png",alt:"Steadfast",className:"w-6 h-6 rounded-full"})}),c.jsx("button",{onClick:()=>pe(V.id),className:"px-1 py-1 text-[9px] font-black hover:bg-orange-50 rounded-lg",title:"Send to CarryBee",children:c.jsx("img",{src:"/uploads/carrybee.png",alt:"CarryBee",className:"w-6 h-6 rounded-full"})}),c.jsx("div",{className:"h-5 w-px bg-gray-100 mx-1"})]}),ye&&c.jsx("button",{onClick:()=>re(V.id),className:"p-2.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all",title:"Delete",children:se.Delete})]})})})]},V.id)})})]})})}),c.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[c.jsx("div",{className:"text-sm text-gray-600",children:`Showing ${Math.min((I-1)*h+1,Y||0)} - ${Math.min(I*h,Y||0)} of ${Y} orders`}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{disabled:I<=1,onClick:()=>H(V=>Math.max(1,V-1)),className:`px-3 py-1 rounded-md font-bold ${I<=1?"bg-gray-100 text-gray-400":"bg-white text-gray-700 border"}`,children:"Prev"}),c.jsxs("div",{className:"px-3 py-1 text-sm",children:["Page ",I," of ",ne]}),c.jsx("button",{disabled:I>=ne,onClick:()=>H(V=>Math.min(ne,V+1)),className:`px-3 py-1 rounded-md font-bold ${I>=ne?"bg-gray-100 text-gray-400":"bg-white text-gray-700 border"}`,children:"Next"})]})]}),c.jsx(Qw,{isOpen:!!R,onClose:()=>U(null),onSubmit:ve,accounts:be,paymentForm:oe,setPaymentForm:me,isLoading:Le.isPending||vt.isPending||Xe.isPending,title:"Receive Payment",buttonText:"Add Payment"}),c.jsx(DD,{isOpen:!!W,onClose:()=>F(null),order:W?B.find(V=>V.id===W):null,customer:W?G.find(V=>{var ye;return V.id===((ye=B.find(Je=>Je.id===W))==null?void 0:ye.customerId)}):null}),c.jsx(MD,{isOpen:!!z,onClose:()=>pe(null),order:z?B.find(V=>V.id===z):null,customer:z?G.find(V=>{var ye;return V.id===((ye=B.find(Je=>Je.id===z))==null?void 0:ye.customerId)}):null})]})},eT=()=>{const{id:e}=Bn(),t=_t(),{user:r,isLoading:n}=ja();r==null||r.role,qe.ADMIN;const a=(r==null?void 0:r.role)===qe.EMPLOYEE,s=!!e;if(n)return c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Loading..."}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Authenticating session..."})]});if(!r)return c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Not Authenticated"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Please log in first."}),c.jsx(We,{onClick:()=>t("/login"),variant:"primary",children:"Back to Login"})]});const{data:l=[]}=Zo(),d=ze(),[f,h]=x.useState(!1),[p,g]=x.useState(""),{data:y=[],isFetching:v}=ut({queryKey:["productsMini"],queryFn:Tm,staleTime:300*1e3,enabled:!1,refetchOnWindowFocus:!1});yt.useEffect(()=>{if(!f)return;const ve=d.getQueryData(["products",void 0]);(!ve||ve.length===0)&&d.fetchQuery({queryKey:["productsMini"],queryFn:Tm}).catch(()=>{})},[f,d]);const[j,_]=yt.useState("");yt.useEffect(()=>{const ve=setTimeout(()=>_(p.trim()),300);return()=>clearTimeout(ve)},[p]);const{data:S=[],isFetching:N}=ut({queryKey:["productsSearch",j],queryFn:()=>fD(j,100),enabled:f&&!!j,staleTime:60*1e3,refetchOnWindowFocus:!1}),E=d.getQueryData(["products",void 0]),O=E&&E.length>0?E:j?S:y||[],{data:C}=Hw(s?e:void 0),{data:D}=zp(),T=Fp(),M=rf(),R=Kr(),[U,W]=x.useState(""),[F,z]=x.useState(new Date().toISOString().split("T")[0]),[pe,oe]=x.useState(""),[me,I]=x.useState([]),[H,ie]=x.useState("0"),[he,K]=x.useState("0"),[P,B]=x.useState(""),[Y,ne]=x.useState(!1),[G,be]=x.useState(""),[ge,je]=x.useState(!1),[J,Ee]=x.useState(null),Ce=yt.useRef(!1);yt.useEffect(()=>{if(C&&!Ce.current){if(s&&a&&C.status!==Ie.ON_HOLD){R.warning('Employees can only edit orders that are currently "On Hold".'),t("/orders");return}W(C.customerId),z(C.orderDate),oe(C.orderNumber),I(C.items),ie(String(C.discount??0)),K(String(C.shipping??0)),B(C.notes||""),Ce.current=!0}else!s&&D&&oe(`${D.prefix}${D.nextNumber}`)},[C,s,a,D,t,R,r==null?void 0:r.id]),yt.useEffect(()=>{Ce.current=!1},[e]);const de=Ln();yt.useEffect(()=>{try{const ye=new URLSearchParams(de.search).get("selectedCustomerId");if(ye){W(ye);const Je=window.location.pathname+window.location.hash;window.history.replaceState({},document.title,Je);return}}catch{}const ve=de&&de.state||{};if(ve.selectedCustomerId){W(ve.selectedCustomerId);try{window.history.replaceState({},document.title)}catch{}}},[de]);const Xe=me.reduce((ve,V)=>ve+V.amount,0),Le=parseFloat(H)||0,vt=parseFloat(he)||0,lt=Xe-Le+vt,$t=ve=>{const V=O.find(Je=>Je.id===ve);if(!V)return;const ye={productId:V.id,productName:V.name,rate:V.salePrice,quantity:1,amount:V.salePrice};I([...me,ye]),h(!1),g("")},we=(ve,V)=>{const ye=[...me];ye[ve].quantity=Math.max(1,V),ye[ve].amount=ye[ve].rate*ye[ve].quantity,I(ye)},ct=ve=>{I(me.filter((V,ye)=>ye!==ve))},re=async()=>{if(!U||me.length===0||!pe){const ve=U?me.length?"Order number is not set. Please wait for it to load.":"Please add at least one product.":"Please select a customer.";Ee(ve),R.error(ve);return}if(!(r!=null&&r.id)){R.error("User session expired. Please log in again."),Ee("User session expired. Please log in again.");return}je(!0),Ee(null);try{const ve=me.reduce((mr,sa)=>mr+sa.amount,0),V=parseFloat(H)||0,ye=parseFloat(he)||0,Je=ve-V+ye,Ze=new Date,Sr=Ze.toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"}),hr=Ze.toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"}),xn={orderNumber:pe,orderDate:F,customerId:U,createdBy:"",status:s&&C?C.status:Ie.ON_HOLD,items:me,subtotal:ve,discount:V,shipping:ye,total:Je,notes:P,paidAmount:s&&C?C.paidAmount:0,history:s&&C?C.history:{created:`${r.name} created this order on ${Sr}, at ${hr}`}};s?(await M.mutateAsync({id:e,updates:xn}),R.success("Order updated successfully"),t("/orders")):T.mutateAsync(xn).then(mr=>{je(!1),R.success("Order created successfully"),t(`/orders/${mr.id}`)},mr=>{je(!1);const sa=mr instanceof Error?mr.message:"Failed to save order";Ee(sa),R.error(sa)})}catch(ve){console.error("Failed to save order:",ve);const V=ve instanceof Error?ve.message:"Failed to save order";Ee(V),R.error(V),je(!1)}},He=l.find(ve=>ve.id===U);return c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 pb-20",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s?"Edit Order":"New Order"}),c.jsx("button",{onClick:()=>t("/orders"),className:"text-gray-500 hover:text-gray-700 font-medium text-sm px-4 py-2 border border-gray-200 rounded-lg bg-white transition-all",children:"Cancel"})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-100 shadow-sm space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"space-y-1 relative md:col-span-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Select Customer"}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>ne(!Y),className:"w-full text-left px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl hover:bg-white focus:ring-2 focus:ring-[#3c5a82] transition-all flex justify-between items-center group",children:[He?c.jsxs("div",{className:"flex-1 overflow-hidden",children:[c.jsx("span",{className:"font-bold block text-sm text-gray-900",children:He.name}),c.jsx("p",{className:"text-[10px] text-gray-500 leading-none mt-0.5",children:He.phone}),c.jsx("p",{className:"text-[10px] ${theme.colors.primary[600]} italic truncate mt-1",children:He.address})]}):c.jsx("span",{className:"text-gray-400 text-sm",children:"Select Customer..."}),c.jsx("div",{className:`transition-transform duration-200 ${Y?"rotate-90":""}`,children:se.ChevronRight})]}),Y&&c.jsxs("div",{className:"absolute top-full left-0 mt-2 w-full max-w-xs bg-white border border-gray-200 shadow-2xl rounded-lg z-[110] p-2 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"relative mb-2",children:[c.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none text-gray-300",children:se.Search}),c.jsx("input",{autoFocus:!0,type:"text",placeholder:"Search name or phone...",className:"w-full pl-9 pr-4 py-2.5 bg-gray-50 border border-gray-100 rounded-xl outline-none focus:ring-2 focus:ring-[#3c5a82] text-sm font-medium",value:G,onChange:ve=>be(ve.target.value)})]}),c.jsx("div",{className:"max-h-[220px] overflow-y-auto space-y-0.5 custom-scrollbar",children:l.filter(ve=>ve.name.toLowerCase().includes(G.toLowerCase())||ve.phone.includes(G)).map(ve=>c.jsxs("button",{onClick:()=>{W(ve.id),ne(!1),be("")},className:"w-full px-4 py-2.5 text-left hover:bg-[#ebf4ff] rounded-lg group transition-colors",children:[c.jsx("p",{className:"text-sm font-bold text-gray-800 group-hover:${theme.colors.primary[700]}",children:ve.name}),c.jsx("p",{className:"text-[10px] text-gray-400 group-hover:${theme.colors.primary[600]}/60",children:ve.phone})]},ve.id))}),c.jsx("button",{onClick:()=>{ne(!1),t("/customers/new",{state:{fromOrderForm:!0,redirectPath:s?`/orders/edit/${e}`:"/orders/new"}})},className:"w-full mt-2 py-3 ${theme.colors.primary[600]} text-[10px] font-black uppercase tracking-widest border-t border-gray-50 hover:bg-[#ebf4ff] transition-colors",children:"+ Add New Customer"})]})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Order Date"}),c.jsx("input",{type:"date",value:F,onChange:ve=>z(ve.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-[#3c5a82] focus:bg-white transition-all cursor-pointer font-bold text-sm"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Order Number"}),c.jsx("input",{type:"text",readOnly:!0,value:pe,placeholder:D?"Order number":"Loading...",className:"w-full px-4 py-3 bg-gray-100 border border-gray-100 rounded-xl font-mono ${theme.colors.primary[700]} text-sm font-bold"})]})]}),c.jsx("div",{className:"border border-gray-100 rounded-lg overflow-visible bg-white",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Product Item"}),c.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-center",children:"Rate"}),c.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-center",children:"Qty"}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-right",children:"Amount"}),c.jsx("th",{className:"px-4 py-4"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-50",children:[me.map((ve,V)=>{var ye,Je;return c.jsxs("tr",{className:"group hover:bg-gray-50/50",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex items-center gap-4",children:[((ye=O.find(Ze=>Ze.id===ve.productId))==null?void 0:ye.image)&&c.jsx("img",{src:(Je=O.find(Ze=>Ze.id===ve.productId))==null?void 0:Je.image,className:"w-12 h-12 rounded-full object-cover border border-gray-100 shadow-sm"}),c.jsx("span",{className:"font-bold text-gray-800 text-sm",children:ve.productName})]})}),c.jsx("td",{className:"px-4 py-4 text-center text-sm font-bold text-gray-600",children:Se(ve.rate)}),c.jsx("td",{className:"px-4 py-4 text-center",children:c.jsx("input",{type:"number",value:ve.quantity,onChange:Ze=>we(V,parseInt(Ze.target.value)),className:"w-16 text-center py-2 border border-gray-100 rounded-xl focus:ring-2 focus:ring-[#3c5a82] font-bold outline-none"})}),c.jsx("td",{className:"px-6 py-4 text-right font-black text-gray-900 text-sm",children:Se(ve.amount)}),c.jsx("td",{className:"px-4 py-4 text-right",children:c.jsx("button",{onClick:()=>ct(V),className:"p-2 text-red-200 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",children:se.Delete})})]},V)}),c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"px-6 py-5 relative",children:c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>h(!f),className:"flex items-center gap-2 ${theme.colors.primary[600]} font-black text-[10px] uppercase tracking-widest hover:bg-[#ebf4ff] px-4 py-2.5 rounded-xl border-2 border-dashed border-[#c7dff5] transition-all",children:[se.Plus," Add an item"]}),f&&c.jsxs("div",{className:"absolute top-full left-0 mt-3 w-full max-w-md bg-white border border-gray-200 shadow-2xl rounded-lg z-[100] p-2 overflow-hidden animate-in slide-in-from-top-2 duration-200",children:[c.jsxs("div",{className:"relative mb-2",children:[c.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none text-gray-300",children:se.Search}),c.jsx("input",{autoFocus:!0,type:"text",placeholder:"Search catalog...",className:"w-full pl-9 pr-4 py-2.5 bg-gray-50 border border-gray-100 rounded-xl outline-none focus:ring-2 focus:ring-[#3c5a82] text-sm font-medium",value:p,onChange:ve=>g(ve.target.value)})]}),c.jsx("div",{className:"max-h-[260px] overflow-y-auto space-y-0.5 custom-scrollbar",children:O.filter(ve=>ve.name.toLowerCase().includes(p.toLowerCase())).map(ve=>c.jsxs("button",{onClick:()=>$t(ve.id),className:"flex items-center gap-4 w-full px-4 py-3 text-left hover:bg-[#ebf4ff] rounded-xl group transition-all",children:[ve.image&&c.jsx("img",{src:ve.image,className:"w-10 h-10 rounded-full object-cover border border-gray-100 shadow-sm"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-bold text-gray-800 group-hover:${theme.colors.primary[700]} truncate",children:ve.name}),c.jsx("p",{className:"text-[10px] font-bold ${theme.colors.primary[600]}/60 uppercase tracking-widest",children:Se(ve.salePrice)})]})]},ve.id))})]})]})})})]})]})}),c.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-12 pt-6",children:[c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Order Notes / Terms"}),c.jsx("textarea",{placeholder:"Internal notes or special instructions for this order...",value:P,onChange:ve=>B(ve.target.value),className:"w-full px-5 py-4 bg-gray-50 border border-gray-100 rounded-lg h-32 focus:ring-2 focus:ring-[#3c5a82] focus:bg-white outline-none font-medium text-sm transition-all"})]}),c.jsxs("div",{className:"w-full md:w-96 space-y-4 bg-gray-50/50 p-8 rounded-lg border border-gray-100",children:[c.jsxs("div",{className:"flex justify-between items-center text-gray-500 text-[12px] font-bold uppercase tracking-widest",children:[c.jsx("span",{children:"Subtotal"}),c.jsx("span",{className:"text-gray-900 font-black",children:Se(Xe)})]}),c.jsxs("div",{className:"flex justify-between items-center text-gray-500 text-[12px] font-bold uppercase tracking-widest",children:[c.jsx("span",{children:"Discount"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs text-gray-500 font-black",children:""}),c.jsx("input",{type:"number",value:H,onChange:ve=>ie(ve.target.value),className:"w-20 text-right py-1.5 border border-gray-100 rounded-lg focus:ring-2 focus:ring-[#3c5a82] font-black text-gray-900 bg-white"})]})]}),c.jsxs("div",{className:"flex justify-between items-center text-gray-500 text-[12px] font-bold uppercase tracking-widest",children:[c.jsx("span",{children:"Shipping"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs text-gray-500 font-black",children:""}),c.jsx("input",{type:"number",value:he,onChange:ve=>K(ve.target.value),className:"w-20 text-right py-1.5 border border-gray-100 rounded-lg focus:ring-2 focus:ring-[#3c5a82] font-black text-gray-900 bg-white"})]})]}),c.jsxs("div",{className:"pt-6 border-t-4 border-[#c7dff5] flex justify-between items-center",children:[c.jsx("span",{className:"text-sm font-black text-gray-900 uppercase tracking-tighter",children:"Total"}),c.jsx("span",{className:"text-sm font-black text-[#3c5a82]",children:Se(lt)})]}),J&&c.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm font-bold text-red-600",children:J instanceof Error?J.message:String(J)})}),c.jsx(We,{onClick:re,variant:"primary",size:"lg",className:"w-full mt-4",disabled:ge,loading:ge,children:s?"Update Order":"Create Order"})]})]})]})]})},qoe=()=>{var B,Y,ne,G,be,ge;const{id:e}=Bn(),t=_t(),r=ze(),n=Kr(),a=Ne.currentUser,s=a.role===qe.ADMIN,{data:l,isPending:d,error:f}=Hw(e||""),{data:h=[]}=Zo(),{data:p=[]}=Ri(),{data:g=[]}=Vw(),{data:y=[]}=$s(),{data:v}=Up(),{data:j}=qp(),_=rf();Fp();const S=af(),N=nf(),[E,O]=x.useState(!1),[C,D]=x.useState(!1),[T,M]=x.useState(!1),[R,U]=x.useState({date:new Date().toISOString().split("T")[0],accountId:Ne.settings.defaults.accountId||"",amount:0}),[W,F]=x.useState(!1),z=l?h.find(je=>je.id===l.customerId):void 0,pe=l?p.find(je=>je.id===l.createdBy):void 0,oe=a.role===qe.EMPLOYEE,me=l?l.createdBy===a.id:!1,I=d;if(I)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading order..."});if(f||!l)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:(f==null?void 0:f.message)||"Order not found."});const H=async(je,J,Ee)=>{if(l)try{const Ce={...l,status:je,history:J?{...l.history,[J]:Ee}:l.history};await _.mutateAsync({id:e,updates:Ce}),r.invalidateQueries({queryKey:["order",e]}),F(!1)}catch(Ce){console.error("Failed to update order status:",Ce),n.error("Failed to update order status")}},ie=async()=>{const je=`Marked as processing by ${a.name}, on ${new Date().toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"})}`;await H(Ie.PROCESSING,"processing",je)},he=async()=>{const je=`Marked as picked by courier, on ${new Date().toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"})}`;await H(Ie.PICKED,"picked",je)},K=async()=>{let je=y.find(Le=>Le.id===R.accountId);if(!je){if(!R.accountId){n.error("Please select an account");return}je={id:R.accountId,name:"Selected Account",type:"Bank",openingBalance:0,currentBalance:0}}const J=l.paidAmount+R.amount;new Date(R.date);const Ee=`Payment of ${Se(R.amount)} received by ${a.name} on ${new Date().toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"})}`,Ce=R.amount<l.total,de=Ie.COMPLETED,Xe={...l,paidAmount:J,status:de,history:{...l.history,payment:Ee}};try{const Le={id:Math.random().toString(36).substr(2,9),date:R.date,type:"Income",category:Ne.settings.defaults.incomeCategoryId||"income_sales",accountId:R.accountId,amount:l.total,description:`Payment for Order #${l.orderNumber}`,referenceId:l.id,contactId:l.customerId,paymentMethod:Ne.settings.defaults.paymentMethod||"Cash",createdBy:a.id};if(await S.mutateAsync(Le),Ce){const $t=l.total-R.amount,we={id:Math.random().toString(36).substr(2,9),date:R.date,type:"Expense",category:"expense_shipping",accountId:R.accountId,amount:$t,description:`Shipping costs for Order #${l.orderNumber}`,paymentMethod:Ne.settings.defaults.paymentMethod||"Cash",createdBy:a.id};await S.mutateAsync(we)}const vt=R.amount,lt=await Promise.allSettled([_.mutateAsync({id:e,updates:Xe}),N.mutateAsync({id:R.accountId,updates:{currentBalance:je.currentBalance+vt}})]);if(lt[0].status==="rejected"||lt[1].status==="rejected"){const $t=lt[0].status==="rejected"?"failed":"succeeded",we=lt[1].status==="rejected"?"failed":"succeeded";throw new Error(`Payment update failed: Order update ${$t}, Account update ${we}`)}r.invalidateQueries({queryKey:["order",e]}),r.invalidateQueries({queryKey:["orders"]}),O(!1),n.success("Payment recorded successfully")}catch(Le){console.error("Failed to record payment:",Le),n.error("Failed to record payment")}},P=()=>{U({date:new Date().toISOString().split("T")[0],accountId:"",amount:l.total-l.paidAmount}),O(!0)};return c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsx(Xd,{isLoading:I&&!l,message:"Loading order details..."}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>t("/orders"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500 transition-all",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-md md:text-2xl font-bold text-gray-900",children:l.orderNumber}),c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide ${Lp(l.status)}`,children:l.status}),l.status!==Ie.COMPLETED&&((Y=(B=l.history)==null?void 0:B.courier)==null?void 0:Y.includes("Steadfast"))&&c.jsx("img",{src:"/uploads/steadfast.png",alt:"Steadfast",className:"w-6 h-6 rounded-full"}),l.status!==Ie.COMPLETED&&((G=(ne=l.history)==null?void 0:ne.courier)==null?void 0:G.includes("CarryBee"))&&c.jsx("img",{src:"/uploads/carrybee.png",alt:"CarryBee",className:"w-6 h-6 rounded-full"})]}),c.jsxs("div",{className:"flex items-center gap-2 relative",children:[c.jsxs("button",{onClick:()=>Cp(e,t),className:"hidden md:flex items-center gap-2 px-4 py-2 text-sm font-semibold border rounded-lg bg-white hover:bg-gray-50 transition-all shadow-sm",children:[se.Print," Print"]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>F(!W),className:`flex items-center gap-2 px-4 py-2 text-sm font-semibold border rounded-lg ${le.colors.primary[600]} text-white hover:${le.colors.primary[700]} transition-all shadow-md`,children:[se.More," ",c.jsx("span",{className:"hidden md:inline",children:"Actions"})]}),W&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>F(!1)}),c.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-100 rounded-xl shadow-2xl z-50 py-2 animate-in fade-in zoom-in duration-150 origin-top-right",children:[c.jsxs("button",{onClick:()=>{Cp(e,t),F(!1)},className:"md:hidden w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[se.Print," Print"]}),c.jsx("div",{className:"md:hidden border-t my-1"}),(s||me||oe&&l.status===Ie.ON_HOLD)&&c.jsxs("button",{onClick:()=>t(`/orders/edit/${l.id}`),className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[se.Edit," Edit Order"]}),s&&l.status!==Ie.COMPLETED&&c.jsxs("button",{className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",onClick:P,children:[se.Banking," Add Payment"]}),c.jsx("div",{className:"border-t my-1"}),s&&c.jsxs("button",{onClick:()=>H(Ie.CANCELLED),disabled:l.status===Ie.COMPLETED,className:"w-full text-left px-4 py-2.5 text-sm hover:bg-red-50 disabled:hover:bg-gray-50 flex items-center gap-2 text-red-500 font-bold disabled:text-gray-300 disabled:cursor-not-allowed",children:[se.Delete," Cancel Order"]})]})]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8",children:[c.jsx("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-xl border border-gray-100 overflow-hidden",children:c.jsxs("div",{className:"p-3 sm:p-4 md:p-6 lg:p-10 space-y-3 sm:space-y-4 lg:space-y-5",children:[c.jsxs("div",{className:"flex flex-row justify-between items-start gap-3 sm:gap-4 lg:gap-6",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[((v==null?void 0:v.logo)||Ne.settings.company.logo)&&c.jsx("img",{src:(v==null?void 0:v.logo)||Ne.settings.company.logo,className:"rounded-lg object-cover mb-2 sm:mb-3 lg:mb-4 w-auto h-auto",style:{maxWidth:"min(100px, 20%)",maxHeight:"auto"}}),c.jsx("h1",{className:"text-sm sm:text-base lg:text-xl font-black text-blue-600 uppercase tracking-tighter break-words",children:(v==null?void 0:v.name)||Ne.settings.company.name}),c.jsxs("div",{className:"mt-1 sm:mt-2 text-[9px] sm:text-[10px] lg:text-xs text-gray-400 font-medium space-y-0.5 sm:space-y-1",children:[c.jsx("p",{className:"break-words",children:(v==null?void 0:v.address)||Ne.settings.company.address}),c.jsxs("p",{className:"text-[8px] sm:text-[9px] break-words",children:[(v==null?void 0:v.phone)||Ne.settings.company.phone,"  ",(v==null?void 0:v.email)||Ne.settings.company.email]})]})]}),c.jsxs("div",{className:"text-right flex-shrink-0",children:[c.jsx("h2",{className:"text-sm sm:text-2xl lg:text-3xl font-black text-gray-300 uppercase leading-none mb-1 sm:mb-2 break-words",children:(j==null?void 0:j.title)||Ne.settings.invoice.title}),c.jsxs("div",{className:"space-y-0.5 sm:space-y-1 lg:space-y-1.5 text-[9px] sm:text-sm",children:[c.jsxs("p",{className:"text-[9px] sm:text-xs lg:text-sm font-bold text-gray-900",children:[c.jsx("span",{className:"text-gray-400 font-medium",children:"Order No:"})," ",c.jsx("span",{className:"break-all",children:l.orderNumber})]}),c.jsxs("p",{className:"text-[9px] sm:text-xs lg:text-sm font-bold text-gray-900",children:[c.jsx("span",{className:"text-gray-400 font-medium",children:"Date:"})," ",l.orderDate]})]})]})]}),c.jsxs("div",{className:"border-t border-gray-100 py-2 sm:py-3 lg:py-4",children:[c.jsx("p",{className:"text-[8px] sm:text-[9px] lg:text-[10px] font-black text-gray-400 uppercase tracking-[0.15em] sm:tracking-[0.2em] mb-2 sm:mb-3 lg:mb-4",children:"Billed To"}),c.jsx("h3",{className:"text-sm sm:text-base lg:text-lg font-black text-gray-900 break-words",children:z==null?void 0:z.name}),c.jsx("p",{className:"text-[10px] sm:text-xs lg:text-sm text-gray-500 leading-relaxed break-words",children:z==null?void 0:z.address}),c.jsx("p",{className:"text-[10px] sm:text-xs lg:text-sm font-bold text-cyan-600 mt-1 sm:mt-1.5 lg:mt-2 break-words",children:z==null?void 0:z.phone})]}),c.jsx("div",{className:"overflow-x-auto -mx-3 sm:-mx-4 md:-mx-6 lg:-mx-10",children:c.jsx("div",{className:"px-3 sm:px-4 md:px-6 lg:px-10",children:c.jsxs("table",{className:"w-full text-left text-[10px] sm:text-xs lg:text-sm",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b-2 border-gray-100",children:[c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 font-black text-gray-400 uppercase",children:"Item Description"}),c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 text-center font-black text-gray-400 uppercase whitespace-nowrap px-1",children:"Rate"}),c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 text-center font-black text-gray-400 uppercase whitespace-nowrap px-1",children:"Qty"}),c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 text-right font-black text-gray-400 uppercase whitespace-nowrap px-1",children:"Total"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:l.items.map((je,J)=>{const Ee=g.find(Ce=>Ce.id===je.productId);return c.jsxs("tr",{className:"group",children:[c.jsx("td",{className:"py-3 sm:py-4 lg:py-6",children:c.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 lg:gap-4 min-w-0",children:[c.jsx("img",{src:Ee==null?void 0:Ee.image,className:"w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 rounded-full object-cover border border-gray-100 shadow-sm flex-shrink-0"}),c.jsx("span",{className:"font-bold text-gray-900 text-[10px] sm:text-xs lg:text-base break-words",children:je.productName})]})}),c.jsx("td",{className:"py-3 sm:py-4 lg:py-6 text-center text-gray-500 font-bold px-1 whitespace-nowrap",children:Se(je.rate)}),c.jsx("td",{className:"py-3 sm:py-4 lg:py-6 text-center text-gray-500 font-bold px-1 whitespace-nowrap",children:je.quantity}),c.jsx("td",{className:"py-3 sm:py-4 lg:py-6 text-right font-black text-gray-900 px-1 whitespace-nowrap",children:Se(je.amount)})]},J)})})]})})}),c.jsx("div",{className:"flex flex-col items-end pt-2 sm:pt-3 lg:pt-6 px-0",children:c.jsxs("div",{className:"w-full sm:w-full md:w-98 lg:max-w-xs space-y-2 sm:space-y-3 lg:space-y-4",children:[c.jsxs("div",{className:"flex justify-between text-[10px] sm:text-xs lg:text-sm gap-2",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase flex-shrink-0",children:"Subtotal"}),c.jsx("span",{className:"font-bold text-gray-900 flex-shrink-0",children:Se(l.subtotal)})]}),l.discount>0&&c.jsxs("div",{className:"flex justify-between text-[10px] sm:text-xs lg:text-sm gap-2",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase flex-shrink-0",children:"Discount"}),c.jsxs("span",{className:"font-bold text-red-500 flex-shrink-0",children:["-",Se(l.discount)]})]}),l.shipping>0&&c.jsxs("div",{className:"flex justify-between text-[10px] sm:text-xs lg:text-sm gap-2",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase flex-shrink-0",children:"Shipping"}),c.jsx("span",{className:"font-bold text-gray-900 flex-shrink-0",children:Se(l.shipping)})]}),c.jsxs("div",{className:"flex justify-between items-center py-2 sm:py-3 lg:py-4 border-t-2 border-[#0f2f57] gap-2",children:[c.jsx("span",{className:"font-black text-gray-900 uppercase tracking-tighter text-[11px] sm:text-xs lg:text-sm flex-shrink-0",children:"Net Total"}),c.jsx("span",{className:"font-black text-sm sm:text-base lg:text-lg flex-shrink-0",children:Se(l.total)})]})]})}),l.notes&&c.jsxs("div",{className:"bg-gray-50 p-3 sm:p-4 rounded-[10px] border border-gray-100",children:[c.jsx("p",{className:"text-[8px] sm:text-[9px] lg:text-[10px] font-black text-gray-300 uppercase tracking-widest mb-1 sm:mb-2",children:"Terms & Notes"}),c.jsx("p",{className:"text-[9px] sm:text-[10px] lg:text-xs text-gray-600 font-medium italic leading-relaxed",children:l.notes})]})]})}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"1. Creation"}),c.jsx("div",{className:"p-1 bg-[#ebf4ff]0 text-white rounded-full",children:se.Plus})]}),c.jsx("div",{className:"p-5",children:c.jsx("p",{className:"text-xs text-gray-500 leading-relaxed font-medium",children:l.history.created||`Created by ${(pe==null?void 0:pe.name)||"Unknown"} on ${l.orderDate}`})})]}),(be=l.history)!=null&&be.processing||!oe?c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"2. Processing"}),c.jsx("div",{className:`p-1 rounded-full ${l.history.processing?"bg-[#ebf4ff]0 text-white":"bg-gray-200 text-gray-400"}`,children:se.ChevronRight})]}),c.jsxs("div",{className:"p-5 space-y-4",children:[l.history.processing?c.jsx("p",{className:"text-xs ${theme.colors.primary[600]} leading-relaxed font-bold bg-[#ebf4ff] p-3 rounded-xl",children:l.history.processing}):!oe&&c.jsx("button",{disabled:l.status!==Ie.ON_HOLD,onClick:ie,className:`w-full py-3 ${le.colors.secondary[600]} hover:${le.colors.secondary[700]} disabled:bg-gray-100 disabled:text-gray-400 text-white font-bold rounded-xl shadow-md transition-all active:scale-95`,children:"Mark as Processing"}),l.history.courier?c.jsx("p",{className:"text-xs text-gray-700 leading-relaxed font-bold bg-gray-50 p-3 rounded-xl",children:l.history.courier}):!oe&&l.status!==Ie.PICKED&&l.status!==Ie.COMPLETED&&l.status!==Ie.CANCELLED&&l.status!==Ie.ON_HOLD&&!((ge=l.history)!=null&&ge.courier)&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>D(!0),className:"w-full py-3 bg-[#0f2f57] hover:bg-[#0a1f38] text-white font-bold rounded-xl shadow-md transition-all active:scale-95 flex items-center justify-center gap-2",children:[c.jsx("img",{src:"/uploads/steadfast.png",alt:"Steadfast",className:"w-5 h-5 rounded-full"})," Add to Steadfast"]}),c.jsxs("button",{onClick:()=>M(!0),className:"w-full py-3 bg-[#0f2f57] hover:bg-[#0a1f38] text-white font-bold rounded-xl shadow-md transition-all active:scale-95 flex items-center justify-center gap-2",children:[c.jsx("img",{src:"/uploads/carrybee.png",alt:"CarryBee",className:"w-5 h-5 rounded-full"})," Add to CarryBee"]})]})]})]}):null,l.history.picked||!oe?c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"3. Courier Picked"}),c.jsx("div",{className:`p-1 rounded-full ${l.history.picked?"bg-[#ebf4ff]0 text-white":"bg-gray-200 text-gray-400"}`,children:se.Courier})]}),c.jsx("div",{className:"p-5",children:l.history.picked?c.jsx("p",{className:"text-xs text-purple-600 leading-relaxed font-bold bg-purple-50 p-3 rounded-xl",children:l.history.picked}):!oe&&c.jsx("button",{disabled:l.status!==Ie.PROCESSING,onClick:he,className:"w-full py-3 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-100 disabled:text-gray-400 text-white font-bold rounded-xl shadow-md transition-all active:scale-95",children:"Mark as Picked"})})]}):null,l.history.payment||!oe?c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"4. Payment"}),c.jsx("div",{className:`p-1 rounded-full ${l.paidAmount>=l.total?"bg-[#ebf4ff]0 text-white":"bg-gray-200 text-gray-400"}`,children:se.Banking})]}),c.jsx("div",{className:"p-5 space-y-3",children:l.history.payment?c.jsx("div",{className:"space-y-2",children:c.jsx("p",{className:"text-xs ${theme.colors.primary[600]} leading-relaxed font-bold bg-[#ebf4ff] p-3 rounded-xl",children:l.history.payment})}):!oe&&c.jsxs("div",{className:"space-y-4 text-center",children:[c.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[c.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase",children:"Amount Due"}),c.jsx("p",{className:"text-2xl font-black text-gray-900",children:Se(l.total-l.paidAmount)})]}),c.jsx("button",{onClick:P,className:`w-full py-3 ${le.colors.primary[600]} hover:${le.colors.primary[700]} text-white font-bold rounded-xl shadow-md transition-all active:scale-95`,children:"Add Payment"})]})})]}):null]})]}),c.jsx(Qw,{isOpen:E,onClose:()=>O(!1),onSubmit:K,accounts:y,paymentForm:R,setPaymentForm:U,isLoading:_.isPending||S.isPending||N.isPending,title:"Record Payment",buttonText:"Add Payment"}),c.jsx(DD,{isOpen:C,onClose:()=>D(!1),order:l,customer:z}),c.jsx(MD,{isOpen:T,onClose:()=>M(!1),order:l,customer:z})]})},Of=({page:e,totalPages:t,onPageChange:r,disabled:n})=>c.jsxs("div",{className:"flex items-center justify-between mt-4",children:[c.jsx("div",{className:"text-sm text-gray-600",children:`Page ${e} of ${t}`}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{disabled:n||e<=1,onClick:()=>r(Math.max(1,e-1)),className:`px-3 py-1 rounded-md font-bold ${e<=1?"bg-gray-100 text-gray-400":"bg-white text-gray-700 border"}`,children:"Prev"}),c.jsxs("div",{className:"px-3 py-1 text-sm",children:[e," / ",t]}),c.jsx("button",{disabled:n||e>=t,onClick:()=>r(Math.min(t,e+1)),className:`px-3 py-1 rounded-md font-bold ${e>=t?"bg-gray-100 text-gray-400":"bg-white text-gray-700 border"}`,children:"Next"})]})]}),Foe=()=>{const e=_t(),t=ze(),r=Kr(),{searchQuery:n}=Qa(),a=Ne.currentUser,{data:s}=zs(),l=(s==null?void 0:s.recordsPerPage)||Qt,[d,f]=x.useState(1),[h,p]=x.useState("All Time"),[g,y]=x.useState({from:"",to:""}),[v,j]=x.useState("All"),[_,S]=x.useState("all"),{data:N=[]}=Ri(),E=x.useMemo(()=>{if(_!=="all")return _==="admins"?N.filter(G=>G.role===qe.ADMIN).map(G=>G.id):_==="employees"?N.filter(G=>G.role===qe.EMPLOYEE).map(G=>G.id):[_]},[_,N]),{data:O,isFetching:C}=L9(d,l,{from:g.from,to:g.to,search:n,createdByIds:E}),D=(O==null?void 0:O.data)??[],T=(O==null?void 0:O.count)??0,M=Math.max(1,Math.ceil(T/l)),{data:R=[]}=tf();x.useEffect(()=>{f(1)},[n,h,g.from,g.to,_]);const U=G=>{f(1),p(G)},W=G=>{f(1),y(G)},F=G=>{f(1),S(G)},[z,pe]=x.useState(null),[oe,me]=x.useState(null),[I,H]=x.useState(null),ie=CD(),he=W9(),K=x.useMemo(()=>new Map(N.map(G=>[G.id,G])),[N]),P=G=>{var be,ge;if((be=G.createdBy)!=null&&be.trim()){const je=K.get(G.createdBy);if(je!=null&&je.name)return je.name}if((ge=G.history)!=null&&ge.created){const je=G.history.created.match(/Created by\s+(.+?)\s+on/);if(je&&je[1])return je[1]}return null},B=D.filter(G=>v==="All"||G.status===v),Y=async G=>{try{const be=new Date,ge=be.toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"}),je=be.toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"}),J={billNumber:`PUR-${Math.floor(1e3+Math.random()*9e3)}`,billDate:new Date().toISOString().split("T")[0],vendorId:G.vendorId,createdBy:(a==null?void 0:a.id)||G.createdBy,status:pn.ON_HOLD,items:G.items,subtotal:G.subtotal,discount:G.discount,shipping:G.shipping,total:G.total,paidAmount:0,notes:G.notes,history:{created:`Created as duplicate on ${ge}, at ${je}`}};await ie.mutateAsync(J),t.invalidateQueries({queryKey:["bills",1]})}catch(be){console.error("Failed to duplicate bill:",be),r.error("Failed to duplicate bill")}},ne=async G=>{if(confirm("Are you sure you want to delete this bill?"))try{await he.mutateAsync(G),t.invalidateQueries({queryKey:["bills",d]})}catch(be){console.error("Failed to delete bill:",be),r.error("Failed to delete bill")}};return c.jsxs("div",{className:"space-y-6 pb-12",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-black text-gray-900 tracking-tight",children:"Purchase Bills"})}),c.jsx(We,{onClick:()=>e("/bills/new"),variant:"primary",size:"md",icon:se.Plus,children:"New Bill"})]}),c.jsx(Uo,{title:"Bills",filterRange:h,setFilterRange:U,customDates:g,setCustomDates:W,statusTab:v,setStatusTab:j,statusOptions:Object.values(pn)}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:c.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[c.jsx("label",{className:"text-sm font-bold text-gray-700",children:"Created By:"}),c.jsxs("select",{value:_,onChange:G=>F(G.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"all",children:"All Users"}),N.some(G=>G.role===qe.ADMIN)&&c.jsx("option",{value:"admins",children:"All Admins"}),N.some(G=>G.role===qe.EMPLOYEE)&&c.jsx("option",{value:"employees",children:"All Employees"}),c.jsx("optgroup",{label:"Specific Users",children:N.map(G=>c.jsxs("option",{value:G.id,children:[G.name," ",G.role===qe.ADMIN?"(Admin)":"(Employee)"]},G.id))})]})]})}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-visible",children:c.jsx("div",{className:"overflow-x-auto overflow-y-visible",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Bill Details"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Vendor"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Created By"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Status"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] text-right",children:"Net Amount"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] sm:hidden",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:C?c.jsx(Bp,{columns:5,rows:8}):B.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:6,className:"px-6 py-20 text-center text-gray-400 italic font-medium",children:"No purchase bills found for this period."})}):B.map(G=>{var be;return c.jsxs("tr",{onMouseEnter:()=>pe(G.id),onMouseLeave:()=>pe(null),onClick:()=>e(`/bills/${G.id}`),className:"group relative hover:bg-[#ebf4ff]/20 cursor-pointer transition-all",children:[c.jsxs("td",{className:"px-6 py-5",children:[c.jsxs("span",{className:"font-black text-gray-900",children:["#",G.billNumber]}),c.jsx("p",{className:"text-[10px] text-gray-400 font-bold mt-1 tracking-tight",children:G.billDate})]}),c.jsx("td",{className:"px-6 py-5",children:c.jsx("span",{className:"text-sm font-bold text-gray-700",children:((be=R.find(ge=>ge.id===G.vendorId))==null?void 0:be.name)||"Unknown Vendor"})}),c.jsx("td",{className:"px-6 py-5 text-xs font-bold text-gray-500",children:P(G)||""}),c.jsx("td",{className:"px-6 py-5",children:c.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest ${Lp(G.status)}`,children:G.status})}),c.jsx("td",{className:"px-6 py-5 text-right",children:c.jsx("span",{className:"font-black text-gray-900 text-base",children:Se(G.total)})}),c.jsx("td",{className:"px-6 py-5 sm:hidden relative z-[999]",onClick:ge=>ge.stopPropagation(),children:c.jsxs("div",{className:"relative z-[999]",children:[c.jsx("button",{onClick:ge=>{const je=ge.currentTarget;oe===G.id?(me(null),H(null)):(me(G.id),H(je))},className:"p-2 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-lg transition-all",children:se.More}),c.jsxs(L5,{anchorEl:I,open:oe===G.id,onClose:()=>{me(null),H(null)},children:[c.jsxs("button",{onClick:()=>{e(`/bills/edit/${G.id}`),me(null),H(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[se.Edit," Edit"]}),c.jsxs("button",{onClick:()=>{Y(G),me(null),H(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[se.Duplicate," Duplicate"]}),c.jsx("div",{className:"border-t my-1"}),c.jsxs("button",{onClick:()=>{ne(G.id),me(null),H(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-red-50 flex items-center gap-2 font-bold text-red-600",children:[se.Delete," Delete"]})]})]})}),z===G.id&&c.jsx("td",{className:"absolute right-6 top-1/2 -translate-y-1/2 z-10 animate-in fade-in slide-in-from-right-2 duration-200 hidden sm:table-cell",onClick:ge=>ge.stopPropagation(),children:c.jsxs("div",{className:"flex items-center gap-1.5 bg-white p-1.5 rounded-2xl shadow-[0_20px_50px_rgba(0,0,0,0.15)] border border-[#ebf4ff]",children:[c.jsx("button",{onClick:()=>e(`/bills/edit/${G.id}`),className:"p-2.5 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-xl transition-all",title:"Edit",children:se.Edit}),c.jsx("button",{onClick:()=>Y(G),className:"p-2.5 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-xl transition-all",title:"Duplicate",children:se.Duplicate}),c.jsx("div",{className:"h-5 w-px bg-gray-100 mx-1"}),c.jsx("button",{onClick:()=>ne(G.id),className:"p-2.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all",title:"Delete",children:se.Delete})]})})]},G.id)})})]})})}),c.jsx(Of,{page:d,totalPages:M,onPageChange:G=>f(G),disabled:C})]})},tT=()=>{const{id:e}=Bn(),t=_t(),r=Ne.currentUser,n=!!e;if(!r)return c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Not Authenticated"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Please log in first."}),c.jsx(We,{onClick:()=>t("/login"),variant:"primary",children:"Back to Login"})]});const{data:a=[]}=tf(),s=ze(),{data:l,isPending:d,error:f}=_D(e),[h,p]=x.useState(!1),[g,y]=x.useState(""),{data:v=[],isFetching:j}=ut({queryKey:["productsMini"],queryFn:Tm,staleTime:300*1e3,enabled:!1,refetchOnWindowFocus:!1});yt.useEffect(()=>{if(!h)return;const we=s.getQueryData(["products",void 0]);(!we||we.length===0)&&s.fetchQuery({queryKey:["productsMini"],queryFn:Tm}).catch(()=>{})},[h,s]);const[_,S]=yt.useState("");yt.useEffect(()=>{const we=setTimeout(()=>S(g.trim()),300);return()=>clearTimeout(we)},[g]);const{data:N=[],isFetching:E}=ut({queryKey:["productsSearch",_],queryFn:()=>fD(_,100),enabled:h&&!!_,staleTime:60*1e3,refetchOnWindowFocus:!1}),O=s.getQueryData(["products",void 0]),C=O&&O.length>0?O:_?N:v||[],D=CD(),T=PD(),M=Kr(),[R,U]=x.useState(""),[W,F]=x.useState(new Date().toISOString().split("T")[0]),[z,pe]=x.useState(""),[oe,me]=x.useState([]),[I,H]=x.useState(0),[ie,he]=x.useState(0),[K,P]=x.useState(""),[B,Y]=x.useState(!1),[ne,G]=x.useState(""),[be,ge]=x.useState(!1),[je,J]=x.useState(null);yt.useEffect(()=>{l?(U(l.vendorId),F(l.billDate),pe(l.billNumber),me(l.items),H(l.discount),he(l.shipping),P(l.notes||"")):n||pe(`PUR-${Math.floor(1e3+Math.random()*9e3)}`)},[l,n]);const Ee=oe.reduce((we,ct)=>we+ct.amount,0),Ce=Ee-I+ie,de=we=>{const ct=C.find(He=>He.id===we);if(!ct)return;const re={productId:ct.id,productName:ct.name,rate:ct.purchasePrice,quantity:1,amount:ct.purchasePrice};me([...oe,re]),p(!1),y("")},Xe=(we,ct)=>{const re=[...oe];re[we].quantity=Math.max(1,ct),re[we].amount=re[we].rate*re[we].quantity,me(re)},Le=we=>{me(oe.filter((ct,re)=>re!==we))},vt=async()=>{if(!R||oe.length===0){J("Please select a vendor and add at least one product.");return}if(!(r!=null&&r.id)){J("User session expired. Please log in again.");return}ge(!0),J(null);try{const we=oe.reduce((V,ye)=>V+ye.amount,0),ct=we-I+ie,re=new Date().toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"}),He=new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"}),ve={billNumber:z,billDate:W,vendorId:R,createdBy:r.id,status:n&&l?l.status:pn.ON_HOLD,items:oe,subtotal:we,discount:I,shipping:ie,total:ct,notes:K,paidAmount:n&&l?l.paidAmount:0,history:n&&l?l.history:{created:`Created by ${r.name} on ${re}, at ${He}`}};n?(await T.mutateAsync({id:e,updates:ve}),M.success("Bill updated successfully"),ge(!1),t("/bills")):D.mutateAsync(ve).then(V=>{ge(!1),M.success("Bill created successfully"),t(`/bills/${V.id}`)},V=>{ge(!1);const ye=V instanceof Error?V.message:"Failed to save bill";J(ye),M.error(ye)})}catch(we){console.error("Failed to save bill:",we);const ct=we instanceof Error?we.message:"Failed to save bill";J(ct),M.error(ct),ge(!1)}},lt=a.find(we=>we.id===R),$t=Ln();return yt.useEffect(()=>{try{const we=new URLSearchParams($t.search),ct=we.get("selectedVendorId");if(ct){U(ct),Y(!1),we.delete("selectedVendorId");const re=we.toString(),He=`${$t.pathname}${re?`?${re}`:""}`;t(He,{replace:!0})}}catch{}},[$t.search,a,t,$t.pathname]),c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 pb-20",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:n?"Edit Bill":"New Purchase Bill"}),c.jsx("button",{onClick:()=>t("/bills"),className:"text-gray-500 hover:text-gray-700 font-medium text-sm px-4 py-2 border border-gray-200 rounded-lg bg-white transition-all",children:"Cancel"})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-100 shadow-sm space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"space-y-1 relative md:col-span-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Select Vendor"}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>Y(!B),className:"w-full text-left px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl hover:bg-white focus:ring-2 focus:ring-[#3c5a82] transition-all flex justify-between items-center group",children:[lt?c.jsxs("div",{className:"flex-1 overflow-hidden",children:[c.jsx("span",{className:"font-bold block text-sm text-gray-900",children:lt.name}),c.jsx("p",{className:"text-[10px] text-gray-500 leading-none mt-0.5",children:lt.phone}),c.jsx("p",{className:"text-[10px] ${theme.colors.secondary[600]} italic truncate mt-1",children:lt.address})]}):c.jsx("span",{className:"text-gray-400 text-sm",children:"Select Vendor..."}),c.jsx("div",{className:`transition-transform duration-200 ${B?"rotate-90":""}`,children:se.ChevronRight})]}),B&&c.jsxs("div",{className:"absolute top-full left-0 mt-2 w-full max-w-xs bg-white border border-gray-200 shadow-2xl rounded-lg z-[110] p-2 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"relative mb-2",children:[c.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none text-gray-300",children:se.Search}),c.jsx("input",{autoFocus:!0,type:"text",placeholder:"Search business...",className:"w-full pl-9 pr-4 py-2.5 bg-gray-50 border border-gray-100 rounded-xl outline-none focus:ring-2 focus:ring-[#3c5a82] text-sm font-medium",value:ne,onChange:we=>G(we.target.value)})]}),c.jsx("div",{className:"max-h-[220px] overflow-y-auto space-y-0.5 custom-scrollbar",children:a.filter(we=>we.name.toLowerCase().includes(ne.toLowerCase())||we.phone.includes(ne)).map(we=>c.jsxs("button",{onClick:()=>{U(we.id),Y(!1),G("")},className:"w-full px-4 py-2.5 text-left hover:bg-[#e6f0ff] rounded-lg group transition-colors",children:[c.jsx("p",{className:"text-sm font-bold text-gray-800 group-hover:${theme.colors.secondary[700]}",children:we.name}),c.jsx("p",{className:"text-[10px] text-gray-400 group-hover:${theme.colors.secondary[600]}/60",children:we.phone})]},we.id))}),c.jsx(We,{onClick:()=>{Y(!1),t("/vendors/new",{state:{fromBillForm:!0,redirectPath:n?`/bills/edit/${e}`:"/bills/new"}})},variant:"secondary",size:"sm",className:"w-full mt-2 text-[10px]",icon:se.Plus,children:"Add New Vendor"})]})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Bill Date"}),c.jsx("input",{type:"date",value:W,onChange:we=>F(we.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-[#3c5a82] focus:bg-white transition-all cursor-pointer font-bold text-sm"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Bill Number"}),c.jsx("input",{type:"text",value:z,onChange:we=>pe(we.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl font-mono ${theme.colors.secondary[700]} text-sm font-bold"})]})]}),c.jsx("div",{className:"border border-gray-100 rounded-lg overflow-visible bg-white",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Product Item"}),c.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-center",children:"Cost Rate"}),c.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-center",children:"Qty"}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-right",children:"Amount"}),c.jsx("th",{className:"px-4 py-4"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-50",children:[oe.map((we,ct)=>{var re,He;return c.jsxs("tr",{className:"group hover:bg-gray-50/50",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex items-center gap-4",children:[((re=C.find(ve=>ve.id===we.productId))==null?void 0:re.image)&&c.jsx("img",{src:(He=C.find(ve=>ve.id===we.productId))==null?void 0:He.image,className:"w-12 h-12 rounded-full object-cover border border-gray-100 shadow-sm"}),c.jsx("span",{className:"font-bold text-gray-800 text-sm",children:we.productName})]})}),c.jsx("td",{className:"px-4 py-4 text-center text-sm font-bold text-gray-600",children:Se(we.rate)}),c.jsx("td",{className:"px-4 py-4 text-center",children:c.jsx("input",{type:"number",value:we.quantity,onChange:ve=>Xe(ct,parseInt(ve.target.value)),className:"w-16 text-center py-2 border border-gray-100 rounded-xl focus:ring-2 focus:ring-[#3c5a82] font-bold outline-none"})}),c.jsx("td",{className:"px-6 py-4 text-right font-black text-gray-900 text-sm",children:Se(we.amount)}),c.jsx("td",{className:"px-4 py-4 text-right",children:c.jsx("button",{onClick:()=>Le(ct),className:"p-2 text-red-200 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",children:se.Delete})})]},ct)}),c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"px-6 py-5 relative",children:c.jsxs("div",{className:"relative",children:[c.jsx(We,{onClick:()=>p(!h),variant:"secondary",size:"sm",icon:se.Plus,className:"border-2 border-dashed border-[#c7e0f5]",children:"Add an item"}),h&&c.jsxs("div",{className:"absolute top-full left-0 mt-3 w-full max-w-md bg-white border border-gray-200 shadow-2xl rounded-lg z-[100] p-2 overflow-hidden animate-in slide-in-from-top-2 duration-200",children:[c.jsxs("div",{className:"relative mb-2",children:[c.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none text-gray-300",children:se.Search}),c.jsx("input",{autoFocus:!0,type:"text",placeholder:"Search product...",className:"w-full pl-9 pr-4 py-2.5 bg-gray-50 border border-gray-100 rounded-xl outline-none focus:ring-2 focus:ring-[#3c5a82] text-sm font-medium",value:g,onChange:we=>y(we.target.value)})]}),c.jsx("div",{className:"max-h-[260px] overflow-y-auto space-y-0.5 custom-scrollbar",children:C.filter(we=>we.name.toLowerCase().includes(g.toLowerCase())).map(we=>c.jsxs("button",{onClick:()=>de(we.id),className:"flex items-center gap-4 w-full px-4 py-3 text-left hover:bg-[#e6f0ff] rounded-xl group transition-all",children:[we.image&&c.jsx("img",{src:we.image,className:"w-10 h-10 rounded-full object-cover border border-gray-100 shadow-sm"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-bold text-gray-800 group-hover:${theme.colors.secondary[700]} truncate",children:we.name}),c.jsxs("p",{className:"text-[10px] font-bold ${theme.colors.secondary[600]}/60 uppercase tracking-widest",children:["Cost: ",Se(we.purchasePrice)]})]})]},we.id))})]})]})})})]})]})}),c.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-12 pt-6",children:[c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Purchase Memo"}),c.jsx("textarea",{placeholder:"Bill details, vendor instructions, or delivery notes...",value:K,onChange:we=>P(we.target.value),className:"w-full px-5 py-4 bg-gray-50 border border-gray-100 rounded-lg h-32 focus:ring-2 focus:ring-[#3c5a82] focus:bg-white outline-none font-medium text-sm transition-all"})]}),c.jsxs("div",{className:"w-full md:w-96 space-y-4 bg-gray-50/50 p-8 rounded-[2rem] border border-gray-100",children:[c.jsxs("div",{className:"flex justify-between items-center text-gray-500 text-sm font-bold uppercase tracking-widest",children:[c.jsx("span",{children:"Subtotal"}),c.jsx("span",{className:"text-gray-900 font-black",children:Se(Ee)})]}),c.jsxs("div",{className:"flex justify-between items-center text-gray-500 text-sm font-bold uppercase tracking-widest",children:[c.jsx("span",{children:"Discount"}),c.jsx("input",{type:"number",value:I,onChange:we=>H(parseFloat(we.target.value)||0),className:"w-24 text-right px-3 py-1.5 border border-gray-100 rounded-lg focus:ring-2 focus:ring-[#3c5a82] font-black text-gray-900 bg-white"})]}),c.jsxs("div",{className:"flex justify-between items-center text-gray-500 text-sm font-bold uppercase tracking-widest",children:[c.jsx("span",{children:"Shipping"}),c.jsx("input",{type:"number",value:ie,onChange:we=>he(parseFloat(we.target.value)||0),className:"w-24 text-right px-3 py-1.5 border border-gray-100 rounded-lg focus:ring-2 focus:ring-[#3c5a82] font-black text-gray-900 bg-white"})]}),c.jsxs("div",{className:"pt-6 border-t-4 border-[#c7e0f5] flex justify-between items-center",children:[c.jsx("span",{className:"text-lg font-bold text-gray-900 uppercase tracking-tighter",children:"Total Bill"}),c.jsx("span",{className:"text-3xl font-black",children:Se(Ce)})]}),c.jsx(We,{onClick:vt,variant:"primary",size:"lg",className:"w-full mt-4",loading:be,disabled:be,children:"Save Purchase Bill"})]})]})]})]})},Koe=()=>{var I,H,ie,he;const{id:e}=Bn(),t=_t(),r=ze(),n=Ne.currentUser,{data:a,isPending:s,error:l}=_D(e||""),{data:d=[]}=tf(),{data:f=[]}=Ri(),{data:h=[]}=$s(),{data:p=[]}=Vw(),{data:g}=Up(),{data:y}=qp(),v=PD(),j=af(),_=nf(),S=Kr(),N=v.isPending||j.isPending||_.isPending,E=a?d.find(K=>K.id===a.vendorId):void 0,O=a?f.find(K=>K.id===a.createdBy):void 0,C=s,[D,T]=x.useState(!1),[M,R]=x.useState(!1),[U,W]=x.useState({date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!1}),accountId:Ne.settings.defaults.accountId||"",amount:0});if(C)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading bill..."});if(l||!a)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:(l==null?void 0:l.message)||"Bill not found."});const F=async(K,P,B)=>{if(a)try{const Y={...a,status:K,history:P?{...a.history,[P]:B}:a.history};await v.mutateAsync({id:e,updates:Y}),r.invalidateQueries({queryKey:["bill",e]}),r.invalidateQueries({queryKey:["bills"]}),T(!1)}catch(Y){console.error("Failed to update bill status:",Y),S.error("Failed to update bill status")}},z=async()=>{const K=`Marked as processing by ${n.name}, on ${new Date().toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"})}`;await F(pn.PROCESSING,"processing",K)},pe=async()=>{const K=`Marked as received by ${n.name}, on ${new Date().toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"})}`;await F(pn.RECEIVED,"received",K)},oe=async()=>{if(a)try{let K=h.find(de=>de.id===U.accountId);if(!K){if(!U.accountId){S.error("Please select an account");return}K={id:U.accountId,name:"Selected Account",type:"Bank",openingBalance:0,currentBalance:0}}const P=a.paidAmount+U.amount,B=`Payment of ${Se(U.amount)} received by ${n.name} on ${new Date(U.date).toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"})}`,ne=P>=a.total?pn.PAID:a.status,[G,be]=U.time.split(":").map(Number),ge=new Date(U.date);ge.setHours(G,be,0,0);const je=ge.toISOString(),J={...a,paidAmount:P,status:ne,history:{...a.history,paid:B},paidAt:U.date};try{const de={id:Math.random().toString(36).substr(2,9),date:je,type:"Expense",category:Ne.settings.defaults.expenseCategoryId||"expense_purchases",accountId:U.accountId,amount:U.amount,description:`Payment for Bill #${a.billNumber}`,referenceId:a.id,contactId:a.vendorId,paymentMethod:Ne.settings.defaults.paymentMethod||"Cash",createdBy:n.id};await j.mutateAsync(de)}catch(de){console.error("Failed to create transaction:",de)}const Ee=U.amount,Ce=await Promise.allSettled([v.mutateAsync({id:e,updates:J}),_.mutateAsync({id:U.accountId,updates:{currentBalance:K.currentBalance-Ee}})]);if(Ce[0].status==="rejected"||Ce[1].status==="rejected"){const de=Ce[0].status==="rejected"?"failed":"succeeded",Xe=Ce[1].status==="rejected"?"failed":"succeeded";throw new Error(`Payment update failed: Bill update ${de}, Account update ${Xe}`)}r.invalidateQueries({queryKey:["bill",e]}),r.invalidateQueries({queryKey:["bills"]}),R(!1),S.success("Payment recorded successfully")}catch(K){console.error("Failed to record payment:",K),S.error("Failed to record payment")}},me=()=>{a&&(W({date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!1}),accountId:"",amount:a.total-a.paidAmount}),R(!0))};return c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsx(Xd,{isLoading:C&&!a,message:"Loading bill details..."}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>t("/bills"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500 transition-all",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsxs("h2",{className:"text-md md:text-2xl font-bold text-gray-900",children:["#",a.billNumber]}),c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide ${Lp(a.status)}`,children:a.status})]}),c.jsxs("div",{className:"flex items-center gap-2 relative",children:[c.jsxs("button",{className:"hidden md:flex items-center gap-2 px-4 py-2 text-sm font-semibold border rounded-lg bg-white hover:bg-gray-50 transition-all",children:[se.Print," Print Bill"]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>T(!D),className:`flex items-center gap-2 px-4 py-2 text-sm font-semibold border rounded-lg ${le.colors.primary[600]} text-white hover:${le.colors.primary[700]} transition-all shadow-md`,children:[se.More," ",c.jsx("span",{className:"hidden md:inline",children:"Actions"})]}),D&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>T(!1)}),c.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white border rounded-xl shadow-xl z-50 py-2",children:[c.jsx("button",{onClick:()=>{window.print(),T(!1)},className:"md:hidden w-full text-left px-4 py-2 text-sm hover:bg-gray-50",children:"Print Bill"}),c.jsx("button",{onClick:()=>{window.print(),T(!1)},className:"md:hidden border-t w-full text-left px-4 py-2 text-sm hover:bg-gray-50"}),c.jsx("button",{onClick:()=>{z(),T(!1)},className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50",children:"Mark Processing"}),c.jsx("button",{onClick:()=>{pe(),T(!1)},className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50",children:"Mark Received"}),c.jsx("div",{className:"border-t my-1"}),c.jsx("button",{onClick:()=>{me(),T(!1)},disabled:a.paidAmount>=a.total,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 text-red-600 font-bold disabled:text-gray-300 disabled:cursor-not-allowed",children:"Record Payment"}),c.jsx("button",{onClick:()=>t(`/bills/edit/${a.id}`),className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50",children:"Edit Bill"})]})]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[c.jsx("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:c.jsxs("div",{className:"p-3 sm:p-4 md:p-6 lg:p-8 space-y-6 sm:space-y-8",children:[c.jsxs("div",{className:"flex flex-row justify-between items-start gap-3 sm:gap-4",children:[c.jsxs("div",{className:"min-w-0",children:[((g==null?void 0:g.logo)||Ne.settings.company.logo)&&c.jsx("img",{src:(g==null?void 0:g.logo)||Ne.settings.company.logo,className:"rounded-lg object-cover mb-2 sm:mb-3 lg:mb-4 w-auto h-auto",style:{maxWidth:"min(100px, 20%)",maxHeight:"auto"}}),c.jsx("h1",{className:"text-sm sm:text-base lg:text-xl font-black text-blue-600 uppercase tracking-tighter break-words",children:(g==null?void 0:g.name)||Ne.settings.company.name}),c.jsxs("div",{className:"mt-1 sm:mt-2 text-[9px] sm:text-[10px] lg:text-xs text-gray-400 font-medium space-y-0.5 sm:space-y-1",children:[c.jsx("p",{className:"break-words",children:(g==null?void 0:g.address)||Ne.settings.company.address}),c.jsxs("p",{className:"text-[8px] sm:text-[9px] break-words",children:[(g==null?void 0:g.phone)||Ne.settings.company.phone,"  ",(g==null?void 0:g.email)||Ne.settings.company.email]})]})]}),c.jsxs("div",{className:"text-right flex-shrink-0",children:[c.jsx("h2",{className:"text-sm sm:text-2xl lg:text-3xl font-black text-gray-300 uppercase leading-none mb-1 sm:mb-2 break-words",children:(y==null?void 0:y.title)||Ne.settings.invoice.title}),c.jsxs("div",{className:"space-y-0.5 sm:space-y-1 lg:space-y-1.5 text-[9px] sm:text-sm",children:[c.jsxs("p",{className:"text-[9px] sm:text-sm font-bold text-gray-900 break-words",children:["Bill No: #",a.billNumber]}),c.jsx("p",{className:"text-[9px] sm:text-sm text-gray-500",children:a.billDate})]})]})]}),c.jsxs("div",{className:"border-t border-gray-100 py-2 sm:py-3 lg:py-4",children:[c.jsx("p",{className:"text-[8px] sm:text-[9px] lg:text-[10px] font-black text-gray-400 uppercase tracking-[0.15em] sm:tracking-[0.2em] mb-2 sm:mb-3 lg:mb-4",children:"Bill From (Vendor)"}),c.jsx("h3",{className:"text-sm sm:text-base lg:text-lg font-black text-gray-900 break-words",children:E==null?void 0:E.name}),c.jsx("p",{className:"text-[10px] sm:text-xs lg:text-sm text-gray-500 leading-relaxed break-words",children:E==null?void 0:E.address}),c.jsx("p",{className:"text-[10px] sm:text-xs lg:text-sm font-bold text-cyan-600 mt-1 sm:mt-1.5 lg:mt-2 break-words",children:E==null?void 0:E.phone})]}),c.jsx("div",{className:"overflow-x-auto -mx-3 sm:-mx-4 md:-mx-6 lg:-mx-10",children:c.jsx("div",{className:"px-3 sm:px-4 md:px-6 lg:px-10",children:c.jsxs("table",{className:"w-full text-left text-[10px] sm:text-xs lg:text-sm",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b-2 border-gray-100",children:[c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 font-black text-gray-400 uppercase",children:"Description"}),c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 text-center font-black text-gray-400 uppercase whitespace-nowrap px-1",children:"Cost"}),c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 text-center font-black text-gray-400 uppercase whitespace-nowrap px-1",children:"Qty"}),c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 text-right font-black text-gray-400 uppercase whitespace-nowrap px-1",children:"Total"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:a.items.map((K,P)=>{const B=p.find(Y=>Y.id===K.productId);return c.jsxs("tr",{className:"group",children:[c.jsx("td",{className:"py-3 sm:py-4 lg:py-6",children:c.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 lg:gap-4 min-w-0",children:[c.jsx("img",{src:B==null?void 0:B.image,className:"w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 rounded-full object-cover border border-gray-100 shadow-sm flex-shrink-0"}),c.jsx("span",{className:"font-bold text-gray-900 text-[10px] sm:text-xs lg:text-base break-words",children:K.productName})]})}),c.jsx("td",{className:"py-3 sm:py-4 lg:py-6 text-center text-gray-500 font-bold px-1 whitespace-nowrap",children:Se(K.rate)}),c.jsx("td",{className:"py-3 sm:py-4 lg:py-6 text-center text-gray-500 font-bold px-1 whitespace-nowrap",children:K.quantity}),c.jsx("td",{className:"py-3 sm:py-4 lg:py-6 text-right font-black text-gray-900 px-1 whitespace-nowrap",children:Se(K.amount)})]},P)})})]})})}),c.jsx("div",{className:"flex flex-col items-end pt-2 sm:pt-3 lg:pt-6 px-0",children:c.jsxs("div",{className:"w-full sm:w-full md:w-98 lg:max-w-xs space-y-2 sm:space-y-3 lg:space-y-4",children:[c.jsxs("div",{className:"flex justify-between text-[10px] sm:text-xs lg:text-sm gap-2",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase flex-shrink-0",children:"Subtotal"}),c.jsx("span",{className:"font-bold text-gray-900 flex-shrink-0",children:Se(a.subtotal)})]}),a.discount>0&&c.jsxs("div",{className:"flex justify-between text-[10px] sm:text-xs lg:text-sm gap-2",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase flex-shrink-0",children:"Discount"}),c.jsxs("span",{className:"font-bold text-red-500 flex-shrink-0",children:["-",Se(a.discount)]})]}),a.shipping>0&&c.jsxs("div",{className:"flex justify-between text-[10px] sm:text-xs lg:text-sm gap-2",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase flex-shrink-0",children:"Shipping"}),c.jsx("span",{className:"font-bold text-gray-900 flex-shrink-0",children:Se(a.shipping)})]}),c.jsxs("div",{className:"flex justify-between items-center py-2 sm:py-3 lg:py-4 border-t-2 border-[#0f2f57] gap-2",children:[c.jsx("span",{className:"font-black text-gray-900 uppercase tracking-tighter text-[11px] sm:text-xs lg:text-sm flex-shrink-0",children:"Total Payable"}),c.jsx("span",{className:"font-black text-sm sm:text-base lg:text-lg flex-shrink-0",children:Se(a.total)})]})]})})]})}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"1. Creation"}),c.jsx("div",{className:"p-1 bg-[#ebf4ff] text-white rounded-full",children:se.Plus})]}),c.jsx("div",{className:"p-5",children:c.jsx("p",{className:"text-xs text-gray-500 leading-relaxed font-medium",children:O!=null&&O.name?`${a.history.created} `:((I=a.history)==null?void 0:I.created)||"Creation information unavailable"})})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"2. Processing"}),c.jsx("div",{className:`p-1 rounded-full ${a.status===pn.PROCESSING?"bg-[#ebf4ff] text-white":"bg-gray-200 text-gray-400"}`,children:se.ChevronRight})]}),c.jsx("div",{className:"p-5",children:(H=a.history)!=null&&H.processing?c.jsx("p",{className:"text-xs text-blue-600 leading-relaxed font-bold bg-[#ebf4ff] p-3 rounded-xl",children:a.history.processing}):c.jsx("button",{disabled:a.status===pn.RECEIVED,onClick:z,className:`w-full py-3 ${le.colors.secondary[600]} hover:${le.colors.secondary[700]} disabled:bg-gray-100 disabled:text-gray-400 text-white font-bold rounded-xl shadow-md transition-all active:scale-95`,children:"Mark as Processing"})})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"3. Received"}),c.jsx("div",{className:`p-1 rounded-full ${a.status===pn.RECEIVED?"bg-green-100 text-green-600":"bg-gray-200 text-gray-400"}`,children:se.ChevronRight})]}),c.jsx("div",{className:"p-5",children:(ie=a.history)!=null&&ie.received?c.jsx("p",{className:"text-xs text-green-600 leading-relaxed font-bold bg-green-50 p-3 rounded-xl",children:a.history.received}):c.jsx("button",{disabled:a.status===pn.ON_HOLD,onClick:pe,className:"w-full py-3 bg-green-600 hover:bg-green-700 disabled:bg-gray-100 disabled:text-gray-400 text-white font-bold rounded-xl shadow-md transition-all active:scale-95",children:"Mark as Received"})})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"4. Payment"}),c.jsx("div",{className:`p-1 rounded-full ${a.paidAmount>0?"bg-[#ebf4ff] text-white":"bg-gray-200 text-gray-400"}`,children:se.Banking})]}),c.jsx("div",{className:"p-5 space-y-3",children:a.paidAmount>0?c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-xs text-blue-600 leading-relaxed font-bold bg-[#ebf4ff] p-3 rounded-xl",children:(he=a.history)==null?void 0:he.paid}),a.paidAt&&c.jsxs("p",{className:"text-xs text-gray-500 leading-relaxed font-medium",children:["Payment Date: ",new Date(a.paidAt).toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})]}),a.paidAmount<a.total&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"p-3 bg-yellow-50 rounded-lg border border-yellow-100 mt-2",children:[c.jsx("p",{className:"text-[10px] font-black text-yellow-600 uppercase",children:"Remaining Amount"}),c.jsx("p",{className:"text-lg font-black text-yellow-700",children:Se(a.total-a.paidAmount)})]}),c.jsx("button",{onClick:me,className:`w-full py-3 ${le.colors.primary[600]} hover:${le.colors.primary[700]} text-white font-bold rounded-xl shadow-md transition-all active:scale-95`,children:"Add Balance Payment"})]})]}):c.jsxs("div",{className:"space-y-4 text-center",children:[c.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[c.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase",children:"Amount Due"}),c.jsx("p",{className:"text-2xl font-black text-gray-900",children:Se(a.total-a.paidAmount)})]}),c.jsx("button",{onClick:me,className:`w-full py-3 ${le.colors.primary[600]} hover:${le.colors.primary[700]} text-white font-bold rounded-xl shadow-md transition-all active:scale-95`,children:"Record Payment"})]})})]})]})]}),c.jsx(Qw,{isOpen:M,onClose:()=>R(!1),onSubmit:oe,accounts:h,paymentForm:U,setPaymentForm:W,isLoading:N,title:"Record Payment",buttonText:"Add Payment"})]})},Qoe=()=>{const{data:e=[],isLoading:t}=$s(),{searchQuery:r}=Qa(),n=X9(),a=Z9(),s=Kr(),l=x.useMemo(()=>{if(!r.trim())return e;const S=r.toLowerCase();return e.filter(N=>N.name.toLowerCase().includes(S)||N.type.toLowerCase().includes(S))},[e,r]),[d,f]=x.useState(!1),[h,p]=x.useState(null),[g,y]=x.useState({name:"",type:"Bank",openingBalance:0}),v=async()=>{if(g.name)try{await n.mutateAsync({name:g.name,type:g.type,openingBalance:g.openingBalance,currentBalance:g.openingBalance}),f(!1),y({name:"",type:"Bank",openingBalance:0})}catch(S){console.error("Failed to create account:",S),s.error("Failed to create account. Please try again.")}},j=async S=>{const N=e.find(E=>E.id===S);if(N){if(N.currentBalance!==0){s.warning(`Cannot delete account "${N.name}" because it has a balance of ${N.currentBalance}. Please transfer the balance to another account first.`);return}if(confirm(`Are you sure you want to delete the account "${N.name}"?`))try{await a.mutateAsync(S),p(null)}catch(E){console.error("Failed to delete account:",E),s.error("Failed to delete account. Please try again.")}}},_=l.reduce((S,N)=>S+N.currentBalance,0);return c.jsxs("div",{className:"space-y-6",children:[c.jsx(Xd,{isLoading:t,message:"Loading accounts..."}),c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-bold text-gray-900",children:"Banking & Accounts"})}),c.jsx(We,{onClick:()=>f(!0),variant:"primary",size:"md",icon:se.Plus,disabled:n.isPending,children:"Add Account"})]}),c.jsxs("div",{className:`${le.colors.primary[600]} rounded-xl p-8 text-white shadow-xl shadow-[#0f2f57]/20 relative overflow-hidden`,children:[c.jsxs("div",{className:"relative z-10",children:[c.jsx("p",{className:"text-[#c7dff5] font-medium text-sm mb-1 uppercase tracking-wider",children:"Total Combined Balance"}),c.jsx("h1",{className:"text-4xl font-black",children:Se(_)}),c.jsxs("div",{className:"mt-8 flex gap-6",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-[#a8c5e8] text-xs font-bold uppercase",children:"Bank Accounts"}),c.jsx("p",{className:"text-xl font-bold",children:e.filter(S=>S.type==="Bank").length})]}),c.jsx("div",{className:"w-px bg-[#0f2f57]/50 h-10"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-[#a8c5e8] text-xs font-bold uppercase",children:"Cash Accounts"}),c.jsx("p",{className:"text-xl font-bold",children:e.filter(S=>S.type==="Cash").length})]})]})]}),c.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 pointer-events-none",children:c.jsx("div",{className:"w-48 h-48 border-[24px] border-white rounded-full"})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(S=>c.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow group relative",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("div",{className:`p-3 rounded-xl ${S.type==="Bank"?`bg-[#e6f0ff] ${le.colors.secondary[600]}`:"bg-orange-50 text-orange-600"}`,children:(S.type==="Bank",se.Banking)}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>p(h===S.id?null:S.id),className:"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-lg transition-all",children:se.More}),h===S.id&&c.jsx("div",{className:"absolute right-0 mt-1 w-40 bg-white border border-gray-100 rounded-lg shadow-lg z-50 py-1",children:c.jsxs("button",{onClick:()=>j(S.id),disabled:S.currentBalance!==0||a.isPending,className:`w-full text-left px-4 py-2.5 text-sm flex items-center gap-2 font-bold ${S.currentBalance!==0||a.isPending?"text-gray-400 cursor-not-allowed":"text-red-600 hover:bg-red-50"}`,title:S.currentBalance!==0?"Account must have zero balance to delete":"Delete account",children:[se.Delete," Delete"]})})]})]}),c.jsx("h3",{className:"text-lg font-bold text-gray-900",children:S.name}),c.jsxs("p",{className:"text-xs text-gray-400 font-medium uppercase tracking-tight mb-4",children:[S.type," Account"]}),c.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-50",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-gray-500",children:"Opening Balance"}),c.jsx("span",{className:"font-semibold text-gray-700",children:Se(S.openingBalance)})]}),c.jsxs("div",{className:"flex justify-between items-center pt-2",children:[c.jsx("span",{className:"text-sm font-bold text-gray-900",children:"Current Balance"}),c.jsx("span",{className:"text-xl font-black",children:Se(S.currentBalance)})]})]})]},S.id))}),d&&c.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[c.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm",onClick:()=>f(!1)}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md relative z-10 animate-in fade-in zoom-in duration-200",children:[c.jsx("div",{className:"p-6 border-b",children:c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Add New Account"})}),c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Account Name"}),c.jsx("input",{type:"text",placeholder:"e.g. City Bank - 0987",className:"w-full px-4 py-2 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-emerald-500",value:g.name,onChange:S=>y({...g,name:S.target.value})})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Account Type"}),c.jsxs("select",{className:"w-full px-4 py-2 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-emerald-500",value:g.type,onChange:S=>y({...g,type:S.target.value}),children:[c.jsx("option",{value:"Bank",children:"Bank"}),c.jsx("option",{value:"Cash",children:"Cash"})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Opening Balance"}),c.jsx("input",{type:"number",placeholder:"0.00",className:"w-full px-4 py-2 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-emerald-500",value:g.openingBalance,onChange:S=>y({...g,openingBalance:parseFloat(S.target.value)||0})})]})]}),c.jsxs("div",{className:"p-6 bg-gray-50 rounded-b-2xl flex gap-3",children:[c.jsx(We,{onClick:()=>f(!1),variant:"ghost",disabled:n.isPending,children:"Cancel"}),c.jsx(We,{onClick:v,variant:"primary",size:"md",className:"flex-1",disabled:n.isPending||!g.name,children:n.isPending?"Creating...":"Create Account"})]})]})]})]})},Hoe=()=>{const e=_t();ze(),Kr();const{searchQuery:t}=Qa(),{data:r}=zs(),n=(r==null?void 0:r.recordsPerPage)||Qt,[a,s]=x.useState("All Time"),[l,d]=x.useState({from:"",to:""}),[f,h]=x.useState("All"),[p,g]=x.useState("all"),[y,v]=x.useState(1),{data:j=[]}=Ri(),_=x.useMemo(()=>{if(p!=="all")return p==="admins"?j.filter(P=>P.role===qe.ADMIN).map(P=>P.id):p==="employees"?j.filter(P=>P.role===qe.EMPLOYEE).map(P=>P.id):[p]},[p,j]),{data:S,isPending:N}=B9(y,n,{type:f==="All"?void 0:f,from:l.from,to:l.to,search:t,createdByIds:_}),E=(S==null?void 0:S.data)??[],O=(S==null?void 0:S.count)??0,C=Math.max(1,Math.ceil(O/n)),{data:D=[]}=Zo(),{data:T=[]}=tf(),{data:M=[]}=Zd(),{data:R=[]}=Jd(),{data:U=[]}=Us();J9(),x.useEffect(()=>{v(1)},[t,f,a,l.from,l.to,p]);const W=P=>{v(1),h(P)},F=P=>{v(1),s(P)},z=P=>{v(1),d(P)},pe=P=>{v(1),g(P)},oe=x.useMemo(()=>new Map(j.map(P=>[P.id,P])),[j]),me=P=>{if(a==="All Time")return!0;const B=new Date(P),Y=new Date;if(a==="Today")return B.toDateString()===Y.toDateString();if(a==="This Week"){const ne=Y.getDate()-Y.getDay(),G=ne+6,be=new Date(new Date().setDate(ne)),ge=new Date(new Date().setDate(G));return B>=be&&B<=ge}return a==="This Month"?B.getMonth()===Y.getMonth()&&B.getFullYear()===Y.getFullYear():a==="This Year"?B.getFullYear()===Y.getFullYear():a==="Custom"?!l.from||!l.to?!0:B>=new Date(l.from)&&B<=new Date(l.to):!0},I=P=>{var Y,ne;if(!((Y=P.createdBy)!=null&&Y.trim()))return null;const B=oe.get(P.createdBy);if(B!=null&&B.name)return B.name;if((ne=P.history)!=null&&ne.created){const G=P.history.created.match(/Created by (.+?) on/);if(G)return G[1]}return null},H=P=>{const B=D.find(ne=>ne.id===P);if(B)return{name:B.name,type:"Customer"};const Y=T.find(ne=>ne.id===P);return Y?{name:Y.name,type:"Vendor"}:null},ie=x.useMemo(()=>{let P=E.filter(B=>me(B.date)).filter(B=>f==="All"||B.type===f);if(t.trim()){const B=t.toLowerCase();P=P.filter(Y=>{var ge,je;const ne=Y.contactId?H(Y.contactId):null,G=I(Y),be=((ge=U.find(J=>J.id===Y.category))==null?void 0:ge.name)||Y.category||"";return Y.description.toLowerCase().includes(B)||be.toLowerCase().includes(B)||Y.type.toLowerCase().includes(B)||(ne==null?void 0:ne.name.toLowerCase().includes(B))||((je=G==null?void 0:G.toLowerCase)==null?void 0:je.call(G).includes(B))||Se(Y.amount).includes(B)})}return P},[E,a,l,f,t,D,T,U,j]),he=(P,B)=>{try{const Y=P&&P.toString().length>10?P:B||P||"",ne=new Date(Y),G="Asia/Dhaka",be=ne.toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric",timeZone:G}),ge=ne.toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:G});return{date:be,time:ge}}catch{return{date:P||B||"",time:""}}},K=P=>{if(P.referenceId){if(M.some(ne=>ne.id===P.referenceId)){e(`/orders/${P.referenceId}`);return}if(R.some(ne=>ne.id===P.referenceId)){e(`/bills/${P.referenceId}`);return}}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-bold text-gray-900 tracking-tight",children:"Financial Transactions"})}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx(We,{onClick:()=>e("/transactions/new/income"),variant:"primary",size:"md",icon:se.Plus,children:"Income"}),c.jsx(We,{onClick:()=>e("/transactions/new/expense"),variant:"danger",size:"md",icon:se.Minus,children:"Expense"})]})]}),c.jsx(Uo,{title:"Transactions",filterRange:a,setFilterRange:F,customDates:l,setCustomDates:z,statusTab:f,setStatusTab:W,statusOptions:["Income","Expense","Transfer"]}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:c.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[c.jsx("label",{className:"text-sm font-bold text-gray-700",children:"Created By:"}),c.jsxs("select",{value:p,onChange:P=>pe(P.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"all",children:"All Users"}),j.some(P=>P.role===qe.ADMIN)&&c.jsx("option",{value:"admins",children:"All Admins"}),j.some(P=>P.role===qe.EMPLOYEE)&&c.jsx("option",{value:"employees",children:"All Employees"}),c.jsx("optgroup",{label:"Specific Users",children:j.map(P=>c.jsxs("option",{value:P.id,children:[P.name," ",P.role===qe.ADMIN?"(Admin)":"(Employee)"]},P.id))})]})]})}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Date"}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Type"}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Contact"}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:c.jsxs(c.Fragment,{children:["Category ",c.jsx("br",{})," Notes"]})}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-right",children:"Amount"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:N?c.jsx(Bp,{columns:5,rows:8}):ie.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-6 py-16 text-center text-gray-400 italic font-medium",children:"No transactions found."})}):ie.map(P=>{var je;const B=P.contactId?H(P.contactId):null,Y=I(P),ne=P.referenceId&&(M.some(J=>J.id===P.referenceId)||R.some(J=>J.id===P.referenceId)),G=!!P.referenceId,{date:be,time:ge}=he(P.date,P.createdAt);return c.jsxs("tr",{onClick:()=>K(P),className:`hover:bg-gray-50 transition-all group ${ne?"cursor-pointer":""}`,children:[c.jsx("td",{className:"px-6 py-5 text-sm font-bold text-gray-700",children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-bold text-gray-900",children:be}),c.jsx("span",{className:"text-[11px] text-gray-400 font-medium",children:ge})]})}),c.jsx("td",{className:"px-6 py-5",children:c.jsx("span",{className:`px-2.5 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest ${P.type==="Income"?"bg-[#ebf4ff]":P.type==="Expense"?"bg-red-50 text-red-600":"bg-[#e6f0ff]"}`,children:P.type})}),c.jsx("td",{className:"px-6 py-5",children:G?B?c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-sm font-bold text-gray-900",children:B.name}),c.jsx("span",{className:"text-[9px] text-gray-400 uppercase font-bold tracking-widest",children:B.type})]}):c.jsx("span",{className:"text-gray-300 font-bold text-xs",children:""}):Y?c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-sm font-bold text-gray-900",children:Y}),c.jsx("span",{className:"text-[9px] text-gray-400 uppercase font-bold tracking-widest",children:"Created By"})]}):c.jsx("span",{className:"text-gray-300 font-bold text-xs",children:""})}),c.jsx("td",{className:"px-6 py-5",children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("p",{className:"text-sm font-bold text-gray-800",children:((je=U.find(J=>J.id===P.category))==null?void 0:je.name)||P.category}),c.jsx("p",{className:"text-xs text-gray-400 italic max-w-xs truncate",children:P.description})]})}),c.jsx("td",{className:"px-6 py-5 text-right",children:c.jsxs("span",{className:`font-black text-base ${P.type==="Income"?"text-emerald-600":P.type==="Expense"?"text-red-600":"text-black"}`,children:[P.type==="Income"?"+":P.type==="Expense"?"-":"",Se(P.amount)]})})]},P.id)})})]})})}),c.jsx(Of,{page:y,totalPages:C,onPageChange:P=>v(P),disabled:N})]})},Voe=()=>{var N;const{type:e}=Bn(),t=_t(),r=Ne.currentUser,n=e==="income",{data:a=[]}=$s(),{data:s}=zs(),{data:l=[]}=OD(),{data:d=[]}=Us(),f=af(),h=nf(),p=Kr(),g=x.useMemo(()=>d.filter(E=>E.type===(n?"Income":"Expense")),[d,n]),[y,v]=x.useState({date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!1}),paymentMethod:(s==null?void 0:s.paymentMethod)||"Cash",accountId:(s==null?void 0:s.accountId)||((N=a[0])==null?void 0:N.id)||"",amount:0,description:"",category:n?(s==null?void 0:s.incomeCategoryId)||"":(s==null?void 0:s.expenseCategoryId)||"",attachmentName:"",attachmentUrl:""}),j=E=>{var C;const O=(C=E.target.files)==null?void 0:C[0];if(O){const D=new FileReader;D.onload=()=>{v({...y,attachmentName:O.name,attachmentUrl:D.result})},D.readAsDataURL(O)}},_=f.isPending||h.isPending,S=async()=>{if(y.amount<=0){p.warning("Amount must be greater than 0");return}if(!y.accountId){p.warning("Please select an account");return}if(!y.category){p.warning("Please select a category");return}if(!(r!=null&&r.id)){p.warning("User session expired. Please log in again.");return}try{if(!n){const F=a.find(z=>z.id===y.accountId);if(F&&F.currentBalance<y.amount){p.error(`Insufficient balance. Account has ${Se(F.currentBalance)} but transaction requires ${Se(y.amount)}`);return}}const O=new Date(y.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),C=y.time,[D,T]=y.time.split(":").map(Number),M=new Date(y.date);M.setHours(D,T,0,0);const R=M.toISOString(),U={type:n?"Income":"Expense",date:R,paymentMethod:y.paymentMethod,accountId:y.accountId,amount:y.amount,description:y.description,category:y.category,attachmentName:y.attachmentName,attachmentUrl:y.attachmentUrl,createdBy:r.id,history:{created:`Created by ${r.name} on ${O}, at ${C}`}};await f.mutateAsync(U);const W=a.find(F=>F.id===y.accountId);if(W){const F=n?W.currentBalance+y.amount:W.currentBalance-y.amount;await h.mutateAsync({id:y.accountId,updates:{currentBalance:F}})}t("/transactions")}catch(E){console.error("Failed to save transaction:",E),p.error("Failed to save transaction: "+(E instanceof Error?E.message:"Unknown error"))}};return c.jsxs("div",{className:"max-w-3xl mx-auto animate-in slide-in-from-bottom-4 duration-500",children:[c.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[c.jsx("div",{children:c.jsxs("h2",{className:"md:text-2xl text-xl font-black text-gray-900 tracking-tight",children:["Record ",n?"Income":"Expense"]})}),c.jsx("button",{onClick:()=>t(-1),className:"p-3 text-gray-400 hover:text-gray-600 bg-white border border-gray-100 rounded-lg shadow-sm",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l18 18"})})})]}),c.jsxs("div",{className:"bg-white p-8 lg:p-12 rounded-lg border border-gray-100 shadow-xl shadow-gray-200/20 space-y-10",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Amount (BDT)"}),c.jsx("input",{type:"number",className:`w-full text-xl font-black px-6 py-4 bg-gray-50 border-2 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-xl transition-all outline-none ${n?"${theme.colors.primary[600]}":"text-red-600"}`,value:y.amount,onChange:E=>v({...y,amount:parseFloat(E.target.value)||0}),placeholder:"0.00"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Date"}),c.jsx("input",{type:"date",className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg text-lg font-bold",value:y.date,onChange:E=>v({...y,date:E.target.value})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Time"}),c.jsx("input",{type:"time",className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg text-lg font-bold",value:y.time,onChange:E=>v({...y,time:E.target.value})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Connected Account"}),c.jsx("select",{className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-xl font-bold",value:y.accountId,onChange:E=>v({...y,accountId:E.target.value}),children:a.map(E=>c.jsx("option",{value:E.id,children:E.name},E.id))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Category"}),c.jsxs("select",{className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-xl font-bold",value:y.category,onChange:E=>v({...y,category:E.target.value}),children:[c.jsx("option",{value:"",children:"Select a category"}),g.map(E=>c.jsx("option",{value:E.id,children:E.name},E.id))]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Payment Method"}),c.jsx("select",{className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-xl font-bold",value:y.paymentMethod,onChange:E=>v({...y,paymentMethod:E.target.value}),children:l.map(E=>c.jsx("option",{value:E.name,children:E.name},E.id))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Attachment"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"file",className:"hidden",id:"file-upload",onChange:j}),c.jsx("label",{htmlFor:"file-upload",className:"w-full px-6 py-4 bg-gray-50 border-transparent hover:bg-gray-100 rounded-lg font-bold pl-14 flex items-center cursor-pointer transition-colors",children:y.attachmentName||"Choose file to upload"}),c.jsx("div",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-gray-400",children:se.Print})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Description"}),c.jsx("textarea",{className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg font-medium h-32 outline-none",placeholder:"What was this transaction for?",value:y.description,onChange:E=>v({...y,description:E.target.value})})]}),c.jsxs(We,{onClick:S,variant:n?"primary":"danger",size:"lg",className:"w-full",disabled:_,loading:_,children:["Finalize ",n?"Income":"Expense"]})]})]})},Goe=()=>{_t();const e=ze(),t=Ne.currentUser,{data:r=[]}=$s(),n=af(),a=nf(),s=Kr(),[l,d]=x.useState({date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!1}),fromAccountId:"",toAccountId:"",amount:0,description:""}),f=async()=>{if(!l.amount||!l.fromAccountId||!l.toAccountId){s.warning("Please fill in all fields.");return}if(l.fromAccountId===l.toAccountId){s.warning("Cannot transfer to the same account.");return}const h=r.find(g=>g.id===l.fromAccountId),p=r.find(g=>g.id===l.toAccountId);if(h&&p){if(h.currentBalance<l.amount){s.warning("Insufficient balance in source account.");return}try{const[g,y]=l.time.split(":").map(Number),v=new Date(l.date);v.setHours(g,y,0,0);const j=v.toISOString();await Promise.all([n.mutateAsync({type:"Transfer",date:j,accountId:l.fromAccountId,toAccountId:l.toAccountId,amount:l.amount,description:l.description||`Transfer from ${h.name} to ${p.name}`,category:"Transfer",paymentMethod:"Internal Transfer",createdBy:t.id}),Promise.all([a.mutateAsync({id:l.fromAccountId,updates:{currentBalance:h.currentBalance-l.amount}}),a.mutateAsync({id:l.toAccountId,updates:{currentBalance:p.currentBalance+l.amount}})])]),s.success("Transfer completed successfully"),e.invalidateQueries({queryKey:["accounts"]}),d({date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!1}),fromAccountId:"",toAccountId:"",amount:0,description:""})}catch(g){console.error("Transfer failed:",g),s.error("Failed to complete transfer: "+(g instanceof Error?g.message:"Unknown error"))}}};return c.jsxs("div",{className:"max-w-3xl mx-auto animate-in slide-in-from-bottom-4 duration-500",children:[c.jsx("div",{className:"mb-8 flex items-center justify-between",children:c.jsxs("div",{children:[c.jsx("h2",{className:"md:text-2xl text-xl font-black text-gray-900 tracking-tight",children:"Fund Transfer"}),c.jsx("p",{className:"text-gray-500 font-medium",children:"Move balances between your business accounts"})]})}),c.jsxs("div",{className:"bg-white p-8 lg:p-12 rounded-lg border border-gray-100 shadow-xl space-y-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Amount to Transfer (BDT)"}),c.jsx("input",{type:"number",className:`w-full text-xl font-black px-6 py-4 bg-[#ebf4ff] border-2 border-transparent focus:border-[#3c5a82] rounded-xl transition-all outline-none ${le.colors.primary[600]}`,value:l.amount,onChange:h=>d({...l,amount:parseFloat(h.target.value)||0}),placeholder:"0.00"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"From Account (Source)"}),c.jsxs("select",{className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg font-bold",value:l.fromAccountId,onChange:h=>d({...l,fromAccountId:h.target.value}),children:[c.jsx("option",{value:"",children:"Select an account"}),r.map(h=>c.jsxs("option",{value:h.id,children:[h.name," (",Se(h.currentBalance),")"]},h.id))]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"To Account (Destination)"}),c.jsxs("select",{className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg font-bold",value:l.toAccountId,onChange:h=>d({...l,toAccountId:h.target.value}),children:[c.jsx("option",{value:"",children:"Select an account"}),r.map(h=>c.jsxs("option",{value:h.id,children:[h.name," (",Se(h.currentBalance),")"]},h.id))]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Transfer Date"}),c.jsx("input",{type:"date",className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg text-lg font-bold",value:l.date,onChange:h=>d({...l,date:h.target.value})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Transfer Time"}),c.jsx("input",{type:"time",className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg text-lg font-bold",value:l.time,onChange:h=>d({...l,time:h.target.value})})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Memo / Description"}),c.jsx("textarea",{className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg font-medium h-32 outline-none",placeholder:"Reason for transfer...",value:l.description,onChange:h=>d({...l,description:h.target.value})})]}),c.jsx(We,{onClick:f,variant:"primary",size:"lg",className:"w-full",disabled:n.isPending||a.isPending,children:n.isPending||a.isPending?"Processing Transfer...":"Execute Transfer"})]})]})},Yoe=()=>{const e=_t(),t=ze(),r=Kr(),{searchQuery:n}=Qa(),{user:a}=ja(),{data:s}=zs(),l=(s==null?void 0:s.recordsPerPage)||Qt,[d,f]=x.useState(1),{data:h=[]}=Ri(),[p,g]=x.useState("all"),y=x.useMemo(()=>{if(p!=="all")return p==="admins"?h.filter(F=>F.role===qe.ADMIN).map(F=>F.id):p==="employees"?h.filter(F=>F.role===qe.EMPLOYEE).map(F=>F.id):[p]},[p,h]),{data:v,isFetching:j}=U9(d,l,n,void 0,y),_=(v==null?void 0:v.data)??[],S=(v==null?void 0:v.count)??0,N=Math.max(1,Math.ceil(S/l)),E=sF(),O=(a==null?void 0:a.role)===qe.ADMIN,[C,D]=x.useState("All Time"),[T,M]=x.useState({from:"",to:""});x.useEffect(()=>{f(1)},[n,p]);const R=F=>{f(1),g(F)},U=_,W=async F=>{if(confirm("Are you sure you want to delete this product?"))try{await E.mutateAsync(F),t.invalidateQueries({queryKey:["products",d]}),r.success("Product deleted successfully")}catch(z){console.error("Failed to delete product:",z),r.error("Failed to delete product")}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-bold text-gray-900",children:"Products Catalog"})}),O&&c.jsx(We,{onClick:()=>e("/products/new"),variant:"primary",size:"md",icon:se.Plus,children:"Add Product"})]}),c.jsx(Uo,{title:"Products",filterRange:C,setFilterRange:D,customDates:T,setCustomDates:M}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:c.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[c.jsx("label",{className:"text-sm font-bold text-gray-700",children:"Created By:"}),c.jsxs("select",{value:p,onChange:F=>R(F.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"all",children:"All Users"}),h.some(F=>F.role===qe.ADMIN)&&c.jsx("option",{value:"admins",children:"All Admins"}),h.some(F=>F.role===qe.EMPLOYEE)&&c.jsx("option",{value:"employees",children:"All Employees"}),c.jsx("optgroup",{label:"Specific Users",children:h.map(F=>c.jsxs("option",{value:F.id,children:[F.name," ",F.role===qe.ADMIN?"(Admin)":"(Employee)"]},F.id))})]})]})}),c.jsx($p,{columns:[{key:"name",label:"Name",render:(F,z)=>c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("img",{src:z.image||"https://via.placeholder.com/100",alt:z.name,className:"w-12 h-12 rounded-full object-cover border border-gray-100 shadow-sm"}),c.jsx("div",{children:c.jsx("p",{className:"font-bold text-gray-900",children:z.name})})]})},{key:"category",label:"Category",render:F=>c.jsx("span",{className:"px-2.5 py-1 bg-[#ebf4ff] rounded-lg text-[10px] font-black uppercase tracking-widest",children:F})},{key:"salePrice",label:O?c.jsxs(c.Fragment,{children:["Sale Price",c.jsx("br",{}),"Purchase Price"]}):c.jsx(c.Fragment,{children:"Sale Price"}),render:(F,z)=>c.jsxs("div",{className:"flex flex-col gap-0.5",children:[c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("span",{className:"text-sm font-bold",children:Se(z.salePrice)})}),O&&c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("span",{className:"text-[11px] font-bold text-gray-600",children:Se(z.purchasePrice)})})]})},...O?[{key:"id",label:"Actions",align:"right",render:F=>c.jsxs("div",{className:"justify-end flex items-center gap-2",children:[c.jsx(Ms,{icon:se.Edit,variant:"primary",title:"Edit",onClick:z=>{z.stopPropagation(),e(`/products/edit/${F}`)}}),c.jsx(Ms,{icon:se.Delete,variant:"danger",title:"Delete",onClick:z=>{z.stopPropagation(),W(F)}})]})}]:[]],data:U,loading:j,emptyMessage:"No products found"}),c.jsx(Of,{page:d,totalPages:N,onPageChange:F=>f(F),disabled:j})]})},rT=()=>{const{id:e}=Bn(),t=_t(),r=!!e,n=Ne.currentUser;if(!n)return c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Not Authenticated"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Please log in first."}),c.jsx(We,{onClick:()=>t("/login"),variant:"primary",children:"Back to Login"})]});if(r&&n.role===qe.EMPLOYEE)return c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Employees cannot edit products. Contact an administrator for assistance."}),c.jsx(We,{onClick:()=>t("/products"),variant:"primary",children:"Back to Products"})]});const{data:a}=z9(r?e:void 0),{data:s=[],isPending:l}=Us("Product"),d=aF(),f=iF(),[h,p]=x.useState({name:"",category:"",image:"",salePrice:0,purchasePrice:0}),[g,y]=x.useState(!1),[v,j]=x.useState(null);yt.useEffect(()=>{a&&p(a)},[a]);const _=N=>{var O;const E=(O=N.target.files)==null?void 0:O[0];if(E){const C=new FileReader;C.onload=()=>{p({...h,image:C.result})},C.readAsDataURL(E)}},S=async()=>{if(!h.name||!h.category){j("Name and category are required");return}y(!0),j(null);try{const N={name:h.name||"",category:h.category||"",image:h.image||"https://picsum.photos/200/200?random="+Math.random(),salePrice:h.salePrice||0,purchasePrice:h.purchasePrice||0};r?(await f.mutateAsync({id:e,updates:N}),t("/products")):d.mutateAsync(N).then(()=>{t("/products")},E=>{y(!1),j(E instanceof Error?E.message:"Failed to create product")})}catch(N){console.error("Failed to save product:",N),j(N instanceof Error?N.message:"Failed to save product"),y(!1)}};return c.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:r?"Edit Product":"Add Product"}),c.jsx("button",{onClick:()=>t("/products"),className:"px-4 py-2 border rounded-xl text-gray-500 font-bold bg-white hover:bg-gray-50",children:"Cancel"})]}),c.jsxs("div",{className:"bg-white p-8 rounded-lg border border-gray-100 shadow-sm space-y-6",children:[c.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[c.jsxs("div",{className:"flex-1 space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Product Name"}),c.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-[#3c5a82]",value:h.name,onChange:N=>p({...h,name:N.target.value}),placeholder:"e.g. Cotton Polo T-Shirt"})]}),c.jsxs("div",{className:"flex-1 space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Category"}),c.jsxs("select",{className:"w-full px-4 py-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-emerald-500",value:h.category,onChange:N=>p({...h,category:N.target.value}),disabled:l,children:[c.jsx("option",{value:"",children:l?"Loading...":"Select Category..."}),s.map(N=>c.jsx("option",{value:N.name,children:N.name},N.id))]})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Product Image"}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsx("div",{className:"w-24 h-24 rounded-lg border border-dashed border-gray-300 flex items-center justify-center overflow-hidden bg-gray-50",children:h.image?c.jsx("img",{src:h.image,className:"w-full h-full object-cover"}):c.jsx("span",{className:"text-gray-300 text-xs text-center p-2",children:"No image"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("input",{type:"file",id:"product-image",className:"hidden",onChange:_}),c.jsx("label",{htmlFor:"product-image",className:"inline-block px-6 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold rounded-xl cursor-pointer transition-all",children:"Upload File"}),c.jsx("p",{className:"text-[10px] text-gray-400 mt-2 font-medium",children:"Recommended size: 500x500px. JPG, PNG supported."})]})]})]}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[c.jsxs("div",{className:"flex-1 space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Sale Price (BDT)"}),c.jsx("input",{type:"number",className:"w-full px-4 py-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-[#3c5a82] font-bold",value:h.salePrice,onChange:N=>p({...h,salePrice:parseFloat(N.target.value)||0})})]}),c.jsxs("div",{className:"flex-1 space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Purchase Price (BDT)"}),c.jsx("input",{type:"number",className:"w-full px-4 py-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-[#3c5a82] text-gray-600 font-bold",value:h.purchasePrice,onChange:N=>p({...h,purchasePrice:parseFloat(N.target.value)||0})})]})]}),c.jsxs("div",{className:"pt-6 space-y-4",children:[v&&c.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm font-bold text-red-600",children:v instanceof Error?v.message:String(v)})}),c.jsx(We,{onClick:S,variant:"primary",size:"lg",className:"w-full",disabled:g,children:g?"Saving...":r?"Update Product Item":"Create Product Item"})]})]})]})},Woe=()=>{const e=_t(),{user:t}=ja(),{searchQuery:r}=Qa(),{data:n=[],isPending:a}=Ri(),s=(t==null?void 0:t.role)===qe.ADMIN,l=x.useMemo(()=>{if(!r.trim())return n;const d=r.toLowerCase();return n.filter(f=>f.name.toLowerCase().includes(d)||f.phone.includes(d)||f.role.toLowerCase().includes(d))},[n,r]);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Application Users"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Manage staff accounts and system permissions"})]}),s&&c.jsx(We,{onClick:()=>e("/users/new"),variant:"primary",size:"md",icon:se.Plus,children:"Add User"})]}),c.jsx($p,{columns:[{key:"name",label:"User",render:(d,f)=>c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("img",{src:f.image||"https://picsum.photos/100/100?random="+f.id,className:"w-10 h-10 rounded-full object-cover border"}),c.jsx("span",{className:"font-bold text-gray-900",children:f.name})]})},{key:"role",label:"Role",render:d=>c.jsx("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase tracking-widest ${d===qe.ADMIN?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:d})},{key:"phone",label:"Contact",render:d=>c.jsx("span",{className:"text-sm text-gray-600",children:d})},{key:"id",label:"Actions",align:"right",render:d=>c.jsx(Ms,{icon:se.Edit,variant:"primary",title:"Edit",onClick:f=>{f.stopPropagation(),e(`/users/edit/${d}`)}})}],data:l,onRowClick:d=>e(`/users/${d.id}`),emptyMessage:"No users found",loading:a})]})},nT=()=>{const{id:e}=Bn(),t=_t(),r=!!e,{data:n,isPending:a,error:s}=ND(r?e:void 0),l=eF(),d=kD(),f=TD(),h=Kr(),[p,g]=x.useState(!1),[y,v]=x.useState(!1),[j,_]=x.useState(!1),[S,N]=x.useState({name:"",phone:"",password:"",role:qe.EMPLOYEE,image:""});yt.useEffect(()=>{n&&N(n)},[n]);const E=localStorage.getItem("currentUser"),O=E?JSON.parse(E):null,C=(O==null?void 0:O.role)===qe.ADMIN,D=(O==null?void 0:O.id)===e,T=a,M=W=>{var z;const F=(z=W.target.files)==null?void 0:z[0];if(F){const pe=new FileReader;pe.onload=()=>{N({...S,image:pe.result})},pe.readAsDataURL(F)}},R=async()=>{if(!S.name||!S.phone||C&&!r&&!S.password){h.warning("Please fill mandatory fields (Name, Phone, Password)");return}g(!0);try{if(r&&e){const W={name:S.name,phone:S.phone,image:S.image};if(C&&(S.password&&(W.password=S.password),S.role&&(W.role=S.role)),await d.mutateAsync({id:e,updates:W}),D&&O){const F={...O,...W};localStorage.setItem("currentUser",JSON.stringify(F))}}else{if(!C){h.error("Only admins can add users"),g(!1);return}await l.mutateAsync({name:S.name||"",phone:S.phone||"",password:S.password||"",role:S.role||qe.EMPLOYEE,image:S.image||""})}h.success(r?"User updated successfully!":"User created successfully!"),t("/users")}catch(W){console.error("Failed to save user:",W);const F=YO(W);h.error("Failed to save user: "+F)}finally{g(!1)}},U=async()=>{if(e){g(!0);try{await f.mutateAsync(e),h.success("User deleted successfully!"),t("/users")}catch(W){console.error("Failed to delete user:",W);const F=YO(W);h.error("Failed to delete user: "+F)}finally{g(!1),_(!1)}}};return c.jsxs("div",{className:"max-w-2xl mx-auto space-y-6 pb-20",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"md:text-2xl text-xl font-bold text-gray-900",children:r?"Edit Profile":"Add User"}),c.jsx("button",{onClick:()=>t("/users"),className:"px-4 py-2 border rounded-xl font-bold bg-white text-gray-500 hover:bg-gray-50",children:"Cancel"})]}),r&&T&&c.jsx("div",{className:"bg-white p-8 rounded-lg border border-gray-100 shadow-sm text-center text-gray-500",children:"Loading user details..."}),s&&c.jsx("div",{className:"bg-red-50 p-4 rounded-lg border border-red-100 text-red-700",children:s.message||"User not found"}),(!r||!T)&&c.jsxs("div",{className:"bg-white p-8 rounded-lg border border-gray-100 shadow-sm space-y-6",children:[c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-6 p-6 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"w-20 h-20 rounded-[50%] overflow-hidden bg-white border",children:c.jsx("img",{src:S.image||`https://ui-avatars.com/api/?name=${S.name||"User"}&background=10b981&color=fff`,className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase mb-2",children:"Profile Photo"}),c.jsx("input",{type:"file",id:"user-pfp",className:"hidden",onChange:M}),c.jsx("label",{htmlFor:"user-pfp",className:`cursor-pointer px-4 py-2 ${le.colors.primary[600]} text-white text-xs font-bold rounded-lg hover:${le.colors.primary[700]}`,children:"Upload Picture"})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Full Name"}),c.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-[#3c5a82]",value:S.name,onChange:W=>N({...S,name:W.target.value})})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Phone Number"}),c.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-[#3c5a82]",value:S.phone,onChange:W=>N({...S,phone:W.target.value})})]}),C&&c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Password (Admin Only Access)"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:y?"text":"password",className:"w-full px-4 py-3 pr-10 bg-purple-50 border border-purple-100 rounded-xl focus:ring-2 focus:ring-purple-500",value:S.password,onChange:W=>N({...S,password:W.target.value}),placeholder:r?"Leave blank to keep current password":"Secure system password"}),c.jsx("button",{type:"button",onClick:()=>v(!y),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-purple-500 hover:text-purple-700",children:y?c.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:[c.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),c.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-14-14zM10 4C6.687 4 3.89 5.945 2.58 8.808c-.35.915-.35 2.468 0 3.384.74 1.94 2.08 3.61 3.756 4.7l1.83-1.83A3.992 3.992 0 016 10a4 4 0 016.956-3.533l1.416-1.416C14.225 4.523 12.15 4 10 4zm7.42 3.192c.35.915.35 2.468 0 3.384C15.26 13.055 12.463 15 9 15a6.966 6.966 0 01-3.15-.744l2.119-2.119A3.992 3.992 0 0114 10c0-.901-.281-1.735-.743-2.434l2.163-2.174z",clipRule:"evenodd"})})})]}),c.jsx("p",{className:"text-[10px] text-purple-400 font-medium",children:"Only administrators can set or change passwords."})]}),C&&c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"System Role"}),c.jsxs("select",{className:"w-full px-4 py-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-[#3c5a82]",value:S.role,onChange:W=>N({...S,role:W.target.value}),children:[c.jsx("option",{value:qe.EMPLOYEE,children:"Employee"}),c.jsx("option",{value:qe.ADMIN,children:"Administrator"})]})]})]}),c.jsxs("div",{className:"pt-6 space-y-3",children:[c.jsx(We,{onClick:R,variant:"primary",size:"lg",className:"w-full",disabled:p,children:p?"Saving...":"Save Details"}),r&&C&&c.jsx("button",{onClick:()=>_(!0),disabled:p,className:"w-full px-4 py-3 bg-red-50 border border-red-200 text-red-600 rounded-xl font-bold hover:bg-red-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Delete User"})]})]}),j&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-sm w-full p-6 space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Delete User?"}),c.jsxs("p",{className:"text-gray-600 text-sm",children:["Are you sure you want to delete ",c.jsx("strong",{children:S.name}),"? This action cannot be undone."]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>_(!1),disabled:p,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg font-bold text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),c.jsx("button",{onClick:U,disabled:p,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 disabled:opacity-50 flex items-center justify-center gap-2",children:p?"Deleting...":"Delete"})]})]})})]})},Xoe=()=>{const{id:e}=Bn(),t=_t(),r=Ne.currentUser,{data:n,isPending:a,error:s}=ND(e),l=TD(),d=kD(),f=Kr(),[h,p]=x.useState(!1),[g,y]=x.useState(!0),[v,j]=x.useState("");if(yt.useEffect(()=>{console.log("[UserDetails] User data loaded:",{id:n==null?void 0:n.id,name:n==null?void 0:n.name,password:n!=null&&n.password?"(exists)":"(missing)"}),n&&n.password?(console.log("[UserDetails] Setting editedPassword from user.password"),j(n.password)):n&&(console.log("[UserDetails] WARNING: user loaded but password is missing/empty!"),j(""))},[n==null?void 0:n.id,n==null?void 0:n.password]),a)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading user..."});if(s||!n)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:(s==null?void 0:s.message)||"User not found."});const _=r.role===qe.ADMIN||r.id===e,S=r.role===qe.ADMIN,N=async()=>{if(e)try{await l.mutateAsync(e),f.success("User deleted successfully!"),t("/users")}catch(O){console.error("Failed to delete user:",O),f.error("Failed to delete user: "+(O instanceof Error?O.message:"Unknown error"))}finally{p(!1)}},E=async()=>{if(!e||!v.trim()){f.warning("Please enter a password");return}try{await d.mutateAsync({id:e,updates:{password:v}}),f.success("Password updated successfully!")}catch(O){console.error("Failed to update password:",O),f.error("Failed to update password: "+(O instanceof Error?O.message:"Unknown error"))}};return c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>t("/users"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"User Profile"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[_&&c.jsxs("button",{onClick:()=>t(`/users/edit/${n.id}`),className:`px-6 py-2 ${le.colors.primary[600]} text-white rounded-xl font-bold hover:${le.colors.primary[700]} shadow-md flex items-center gap-2`,children:[se.Edit," Edit Profile"]}),S&&c.jsx("button",{onClick:()=>p(!0),disabled:l.isPending,className:"px-6 py-2 bg-red-50 border border-red-200 text-red-600 rounded-xl font-bold hover:bg-red-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Delete User"})]})]}),c.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsx("div",{className:"h-32 bg-gradient-to-r from-[#0f2f57] to-[#1a3a6e]"}),c.jsxs("div",{className:"px-8 pb-8",children:[c.jsxs("div",{className:"relative flex justify-between items-end -mt-12 mb-8",children:[c.jsx("div",{className:"p-1 bg-white rounded-full shadow-xl",children:c.jsx("img",{src:n.image||"https://picsum.photos/200/200?random="+n.id,className:"w-24 h-24 rounded-full object-cover border-1 border-black"})}),c.jsx("span",{className:`px-4 py-1 rounded-full text-xs font-black uppercase tracking-widest ${n.role===qe.ADMIN?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:n.role})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1",children:"Full Name"}),c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:n.name})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1",children:"Phone Number"}),c.jsx("p",{className:"text-lg font-medium text-gray-700",children:n.phone})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1",children:"Joining Date"}),c.jsx("p",{className:"text-lg font-medium text-gray-700",children:n.createdAt?new Date(n.createdAt).toLocaleDateString("en-BD",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]})]}),c.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg space-y-4",children:[c.jsx("h4",{className:"font-bold text-gray-900",children:"Account Security"}),S?c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:g?"text":"password",value:v,onChange:O=>j(O.target.value),className:"w-full px-4 py-3 pr-10 bg-white border border-purple-300 rounded-lg font-mono text-sm text-gray-700 focus:ring-2 focus:ring-purple-500"}),c.jsx("button",{type:"button",onClick:()=>y(!g),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-purple-600 hover:text-purple-800",children:g?c.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:[c.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),c.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-14-14zM10 4C6.687 4 3.89 5.945 2.58 8.808c-.35.915-.35 2.468 0 3.384.74 1.94 2.08 3.61 3.756 4.7l1.83-1.83A3.992 3.992 0 016 10a4 4 0 016.956-3.533l1.416-1.416C14.225 4.523 12.15 4 10 4zm7.42 3.192c.35.915.35 2.468 0 3.384C15.26 13.055 12.463 15 9 15a6.966 6.966 0 01-3.15-.744l2.119-2.119A3.992 3.992 0 0114 10c0-.901-.281-1.735-.743-2.434l2.163-2.174z",clipRule:"evenodd"})})})]}),c.jsx("button",{onClick:E,disabled:d.isPending||v===n.password,className:"mt-3 w-full px-3 py-2 bg-purple-600 text-white rounded-lg text-sm font-bold hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d.isPending?"Updating...":"Update Password"}),c.jsx("p",{className:"text-[10px] text-purple-600 font-medium mt-2",children:"Admin access only. Edit and save password here."})]})}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Passwords are managed by system administrators. If you need to reset your password, please contact the IT department."}),c.jsxs("div",{className:"flex items-center gap-2 text-emerald-700 text-sm font-bold",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"Active Status Verified"]})]})]})]})]})]}),h&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-sm w-full p-6 space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Delete User?"}),c.jsxs("p",{className:"text-gray-600 text-sm",children:["Are you sure you want to delete ",c.jsx("strong",{children:n.name}),"? This action cannot be undone."]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>p(!1),disabled:l.isPending,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg font-bold text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),c.jsx("button",{onClick:N,disabled:l.isPending,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 disabled:opacity-50 flex items-center justify-center gap-2",children:l.isPending?"Deleting...":"Delete"})]})]})})]})},Zoe=()=>{const[e,t]=x.useState("company"),[r,n]=x.useState(null),a=ze(),{data:s,isPending:l}=Up(),{data:d,isPending:f}=zp(),{data:h,isPending:p}=qp(),{data:g,isPending:y}=zs(),{data:v,isPending:j}=Gw(),{data:_=[],isPending:S}=Us(),{data:N=[],isPending:E}=OD(),{data:O=[],isPending:C}=q9(),{data:D=[]}=$s(),T=oF(),M=lF(),R=cF(),U=uF();dF(),fF();const W=hF(),F=Kr(),[z,pe]=x.useState({name:"",phone:"",email:"",address:"",logo:""}),[oe,me]=x.useState({prefix:"ORD-",nextNumber:1}),[I,H]=x.useState({steadfast:{baseUrl:"",apiKey:"",secretKey:""},carryBee:{baseUrl:"",clientId:"",clientSecret:"",clientContext:"",storeId:""}}),[ie,he]=x.useState({title:"Invoice",logoWidth:120,logoHeight:120,footer:""}),[K,P]=x.useState({defaultAccountId:"",defaultPaymentMethod:"",incomeCategoryId:"",expenseCategoryId:"",recordsPerPage:10}),[B,Y]=x.useState({name:"",type:"Income",color:"#10B981",parentId:""}),[ne,G]=x.useState({name:"",description:""}),[be,ge]=x.useState({name:"",shortName:"",description:""}),[je,J]=x.useState([]),[Ee,Ce]=x.useState(!1);yt.useEffect(()=>{s&&pe(s)},[s]),yt.useEffect(()=>{d&&me(d)},[d]),yt.useEffect(()=>{h&&he(h)},[h]),yt.useEffect(()=>{g&&P(g)},[g]),yt.useEffect(()=>{v&&H(v)},[v]),x.useEffect(()=>{let re=null;const He=async()=>{const{baseUrl:ve,clientId:V,clientSecret:ye,clientContext:Je}=I.carryBee,Ze=ve==null?void 0:ve.trim(),Sr=V==null?void 0:V.trim(),hr=ye==null?void 0:ye.trim(),xn=Je==null?void 0:Je.trim();if(!Ze||!Sr||!hr||!xn){J([]);return}Ce(!0);try{const mr=await h8({baseUrl:Ze,clientId:Sr,clientSecret:hr,clientContext:xn});J(mr)}catch(mr){console.error("Failed to fetch CarryBee stores:",mr),J([])}finally{Ce(!1)}};return re=setTimeout(()=>{He()},700),()=>{re&&clearTimeout(re)}},[I.carryBee.baseUrl,I.carryBee.clientId,I.carryBee.clientSecret,I.carryBee.clientContext]);const de=l||f||p||y||j||S||E||C,Xe=async()=>{try{const re=F.loading("Saving all settings...");W.mutateAsync({company:z,order:oe,invoice:ie,defaults:K,courier:I}).then(()=>{Ne.settings.company=z,Ne.settings.order=oe,Ne.settings.invoice=ie,Ne.settings.defaults=K,Ne.settings.courier=I,F.update(re,"Settings saved successfully!","success")}).catch(He=>{console.error("Failed to save settings:",He),F.update(re,"Failed to save settings: "+(He instanceof Error?He.message:"Unknown error"),"error")})}catch(re){console.error("Failed to initiate settings save:",re),F.error("Failed to save settings: "+(re instanceof Error?re.message:"Unknown error"))}},Le=re=>{var ve;const He=(ve=re.target.files)==null?void 0:ve[0];if(He){const V=new FileReader;V.onload=()=>{pe({...z,logo:V.result})},V.readAsDataURL(He)}},vt=async()=>{if(!B.name.trim()){F.warning("Please enter a category name");return}const re={id:crypto.randomUUID(),name:B.name,type:B.type,color:B.color,parentId:B.parentId||void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},He=a.getQueryData(["categories"]);a.setQueryData(["categories"],(ye=[])=>[...ye,re]);const ve=F.loading("Adding category..."),V={...B};Y({name:"",type:"Income",color:"#10B981",parentId:""}),n(null);try{await T.mutateAsync({name:V.name,type:V.type,color:V.color,parentId:V.parentId||void 0}),F.update(ve,"Category added successfully!","success")}catch(ye){console.error("Failed to add category:",ye),a.setQueryData(["categories"],He),F.update(ve,"Failed to add category: "+(ye instanceof Error?ye.message:"Unknown error"),"error"),n("category"),Y(V)}},lt=async re=>{if(confirm("Are you sure you want to delete this category?"))try{await M.mutateAsync(re),F.success("Category deleted successfully!")}catch(He){console.error("Failed to delete category:",He),F.error("Failed to delete category: "+(He instanceof Error?He.message:"Unknown error"))}},$t=async()=>{if(!ne.name.trim()){F.warning("Please enter a payment method name");return}const re={id:crypto.randomUUID(),name:ne.name,description:ne.description||"",is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},He=a.getQueryData(["paymentMethods"]);a.setQueryData(["paymentMethods"],(ye=[])=>[...ye,re]);const ve=F.loading("Adding payment method..."),V={...ne};G({name:"",description:""}),n(null);try{await R.mutateAsync({name:V.name,description:V.description||void 0}),F.update(ve,"Payment method added successfully!","success")}catch(ye){console.error("Failed to add payment method:",ye),a.setQueryData(["paymentMethods"],He),F.update(ve,"Failed to add payment method: "+(ye instanceof Error?ye.message:"Unknown error"),"error"),n("payment"),G(V)}},we=async re=>{if(confirm("Are you sure you want to delete this payment method?"))try{await U.mutateAsync(re),F.success("Payment method deleted successfully!")}catch(He){console.error("Failed to delete payment method:",He),F.error("Failed to delete payment method: "+(He instanceof Error?He.message:"Unknown error"))}},ct=[{id:"company",label:"Company",icon:se.Dashboard},{id:"order",label:"Order & Invoice",icon:se.Sales},{id:"defaults",label:"Defaults",icon:se.Settings},{id:"categories",label:"Categories",icon:se.More},{id:"payments",label:"Payment Methods",icon:se.Banking},{id:"courier",label:"Courier",icon:se.Courier}];return c.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[c.jsx(Xd,{isLoading:de,message:"Loading settings..."}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-bold text-gray-900",children:"Settings"})}),c.jsx(We,{onClick:Xe,variant:"primary",size:"md",children:"Save Changes"})]}),c.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[c.jsx("div",{className:"w-full lg:w-64 space-y-1",children:ct.map(re=>c.jsxs("button",{onClick:()=>t(re.id),className:`flex items-center gap-3 w-full px-4 py-3 rounded-xl font-medium transition-all ${e===re.id?`bg-white ${le.colors.primary[600]} shadow-sm border border-gray-100 ring-1 ring-[#ebf4ff]`:"text-gray-500 hover:bg-gray-100"}`,children:[re.icon,re.label]},re.id))}),c.jsxs("div",{className:"flex-1 bg-white p-8 rounded-xl border border-gray-100 shadow-sm min-h-[500px]",children:[e==="company"&&c.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 border-b pb-4",children:"Company Profile"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"md:col-span-2 flex items-center gap-6 p-6 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"w-20 h-20 rounded-xl overflow-hidden bg-white border",children:z.logo&&c.jsx("img",{src:z.logo,className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase",children:"Company Logo"}),c.jsx("input",{type:"file",id:"logo-input",className:"hidden",onChange:Le}),c.jsx(We,{variant:"primary",size:"sm",onClick:()=>{var re;return(re=document.getElementById("logo-input"))==null?void 0:re.click()},children:"Change Logo"})]})]}),c.jsxs("div",{className:"md:col-span-2 space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Company Name"}),c.jsx("input",{type:"text",value:z.name,onChange:re=>pe({...z,name:re.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-[#3c5a82] transition-all"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Phone"}),c.jsx("input",{type:"text",value:z.phone,onChange:re=>pe({...z,phone:re.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-[#3c5a82] transition-all"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Email"}),c.jsx("input",{type:"email",value:z.email,onChange:re=>pe({...z,email:re.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-[#3c5a82] transition-all"})]}),c.jsxs("div",{className:"md:col-span-2 space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Office Address"}),c.jsx("textarea",{value:z.address,onChange:re=>pe({...z,address:re.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl h-24 focus:ring-2 focus:ring-[#3c5a82] transition-all"})]})]})]}),e==="order"&&c.jsxs("div",{className:"space-y-10 animate-in fade-in duration-300",children:[c.jsxs("section",{className:"space-y-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 border-b pb-4",children:"Order Logic"}),c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Order Prefix"}),c.jsx("input",{type:"text",value:oe.prefix,onChange:re=>me({...oe,prefix:re.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl font-mono"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Next Number"}),c.jsx("input",{type:"number",value:oe.nextNumber,onChange:re=>me({...oe,nextNumber:parseInt(re.target.value)}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]})]})]}),c.jsxs("section",{className:"space-y-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 border-b pb-4",children:"Invoice Settings"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-1 space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Invoice Title"}),c.jsx("input",{type:"text",value:ie.title,onChange:re=>he({...ie,title:re.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Logo Width (px)"}),c.jsx("input",{type:"number",value:ie.logoWidth,onChange:re=>he({...ie,logoWidth:parseInt(re.target.value)}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Logo Height (px)"}),c.jsx("input",{type:"number",value:ie.logoHeight,onChange:re=>he({...ie,logoHeight:parseInt(re.target.value)}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"md:col-span-3 space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Invoice Footer"}),c.jsx("textarea",{value:ie.footer,onChange:re=>he({...ie,footer:re.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl h-24"})]})]})]})]}),e==="defaults"&&c.jsxs("div",{className:"space-y-10 animate-in fade-in duration-300",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 border-b pb-4",children:"System Defaults"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Default Account"}),c.jsxs("select",{value:K.defaultAccountId,onChange:re=>P({...K,defaultAccountId:re.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl",children:[c.jsx("option",{value:"",children:"Select an account..."}),D.map(re=>c.jsx("option",{value:re.id,children:re.name},re.id))]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Default Payment Method"}),c.jsxs("select",{value:K.defaultPaymentMethod,onChange:re=>P({...K,defaultPaymentMethod:re.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl",children:[c.jsx("option",{value:"",children:"Select a payment method..."}),N.map(re=>c.jsx("option",{value:re.name,children:re.name},re.id))]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Default Income Category"}),c.jsxs("select",{value:K.incomeCategoryId,onChange:re=>P({...K,incomeCategoryId:re.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl",children:[c.jsx("option",{value:"",children:"Select a category..."}),_.filter(re=>re.type==="Income").map(re=>c.jsx("option",{value:re.id,children:re.name},re.id))]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Default Expense Category"}),c.jsxs("select",{value:K.expenseCategoryId,onChange:re=>P({...K,expenseCategoryId:re.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl",children:[c.jsx("option",{value:"",children:"Select a category..."}),_.filter(re=>re.type==="Expense").map(re=>c.jsx("option",{value:re.id,children:re.name},re.id))]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Records Per Page"}),c.jsx("input",{type:"number",value:K.recordsPerPage,onChange:re=>P({...K,recordsPerPage:parseInt(re.target.value)}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]})]})]}),e==="categories"&&c.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[c.jsxs("div",{className:"flex items-center justify-between border-b pb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Categories"}),c.jsxs(We,{onClick:()=>n("category"),variant:"primary",size:"md",children:[se.Plus," Add"]})]}),S?c.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading categories..."}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_.map(re=>c.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg bg-gray-50/50 hover:shadow-sm transition-all",children:[c.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:re.color}}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-bold text-gray-800",children:re.name}),c.jsx("p",{className:"text-[10px] text-gray-400 font-black uppercase tracking-widest",children:re.type})]}),c.jsx("button",{onClick:()=>lt(re.id),className:"text-red-500 hover:text-red-700 px-2",children:se.Delete})]},re.id)),_.length===0&&c.jsx("div",{className:"col-span-2 text-center py-8 text-gray-500",children:'No categories yet. Click "Add Category" to create one.'})]})]}),e==="payments"&&c.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[c.jsxs("div",{className:"flex items-center justify-between border-b pb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Payment Methods"}),c.jsxs(We,{onClick:()=>n("payment"),variant:"primary",size:"md",children:[se.Plus," Add"]})]}),E?c.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading payment methods..."}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[N.map(re=>c.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50/50 hover:shadow-sm transition-all flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-bold text-gray-800",children:re.name}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:re.description||"No description"})]}),c.jsx("button",{onClick:()=>we(re.id),className:"text-red-500 hover:text-red-700 px-2",children:se.Delete})]},re.id)),N.length===0&&c.jsx("div",{className:"col-span-2 text-center py-8 text-gray-500",children:'No payment methods yet. Click "Add Method" to create one.'})]})]}),e==="courier"&&c.jsxs("div",{className:"space-y-10 animate-in fade-in duration-300",children:[c.jsxs("section",{className:"space-y-6",children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-800 border-b pb-4 flex items-center gap-2",children:[c.jsx("img",{src:"/uploads/steadfast.png",alt:"Steadfast",className:"w-6 h-6 rounded-full"}),c.jsx("span",{className:"",children:"Steadfast"})," Secrets"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Base URL"}),c.jsx("input",{type:"text",value:I.steadfast.baseUrl,onChange:re=>H({...I,steadfast:{...I.steadfast,baseUrl:re.target.value}}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"API Key"}),c.jsx("input",{type:"text",value:I.steadfast.apiKey,onChange:re=>H({...I,steadfast:{...I.steadfast,apiKey:re.target.value}}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Secret Key"}),c.jsx("input",{type:"text",value:I.steadfast.secretKey,onChange:re=>H({...I,steadfast:{...I.steadfast,secretKey:re.target.value}}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]})]})]})]}),c.jsxs("section",{className:"space-y-6",children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-800 border-b pb-4 flex items-center gap-2",children:[c.jsx("img",{src:"/uploads/carrybee.png",alt:"CarryBee",className:"w-6 h-6 rounded-full"}),c.jsx("span",{className:"",children:"CarryBee"})," Secrets"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Base URL"}),c.jsx("input",{type:"text",value:I.carryBee.baseUrl,onChange:re=>H({...I,carryBee:{...I.carryBee,baseUrl:re.target.value}}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Client ID"}),c.jsx("input",{type:"text",value:I.carryBee.clientId,onChange:re=>H({...I,carryBee:{...I.carryBee,clientId:re.target.value}}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Client Secret"}),c.jsx("input",{type:"text",value:I.carryBee.clientSecret,onChange:re=>H({...I,carryBee:{...I.carryBee,clientSecret:re.target.value}}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Client Context"}),c.jsx("input",{type:"text",value:I.carryBee.clientContext,onChange:re=>H({...I,carryBee:{...I.carryBee,clientContext:re.target.value}}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Store ID"}),c.jsxs("select",{value:I.carryBee.storeId,onChange:re=>H({...I,carryBee:{...I.carryBee,storeId:re.target.value}}),disabled:Ee||je.length===0,className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("option",{value:"",children:Ee?"Loading stores...":je.length===0?"Fill CarryBee credentials first":"Select Store"}),je.map(re=>c.jsx("option",{value:re.id,children:re.name},re.id))]})]})]})]})]})]})]})]}),r==="category"&&c.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[c.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm",onClick:()=>n(null)}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md relative z-10 p-8 space-y-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Add Category"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Name"}),c.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-50 border rounded-xl",value:B.name,onChange:re=>Y({...B,name:re.target.value})})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Type"}),c.jsxs("select",{className:"w-full px-4 py-3 bg-gray-50 border rounded-xl",value:B.type,onChange:re=>Y({...B,type:re.target.value}),children:[c.jsx("option",{value:"Income",children:"Income"}),c.jsx("option",{value:"Expense",children:"Expense"}),c.jsx("option",{value:"Product",children:"Product"})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Color"}),c.jsx("input",{type:"color",className:"w-full h-12 bg-gray-50 border rounded-xl cursor-pointer",value:B.color,onChange:re=>Y({...B,color:re.target.value})})]})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx(We,{onClick:()=>n(null),variant:"ghost",className:"flex-1",children:"Cancel"}),c.jsx(We,{onClick:vt,variant:"primary",size:"md",className:"flex-1",children:"Add Category"})]})]})]}),r==="payment"&&c.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[c.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm",onClick:()=>n(null)}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md relative z-10 p-8 space-y-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Add Payment Method"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Method Name"}),c.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-50 border rounded-xl",value:ne.name,onChange:re=>G({...ne,name:re.target.value})})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Description"}),c.jsx("textarea",{className:"w-full px-4 py-3 bg-gray-50 border rounded-xl h-24",value:ne.description,onChange:re=>G({...ne,description:re.target.value})})]})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx(We,{onClick:()=>n(null),variant:"ghost",className:"flex-1",children:"Cancel"}),c.jsx(We,{onClick:$t,variant:"primary",size:"md",className:"flex-1",children:"Add Method"})]})]})]})]})},Joe=()=>{const e=_t(),t=ze(),r=Kr(),{searchQuery:n}=Qa(),{user:a}=ja(),{data:s}=zs(),l=(s==null?void 0:s.recordsPerPage)||Qt,[d,f]=yt.useState(1),{data:h,isFetching:p,error:g}=M9(d,l,n),y=(h==null?void 0:h.data)??[],v=(h==null?void 0:h.count)??0,j=Math.max(1,Math.ceil(v/l)),_=G9(),S=(a==null?void 0:a.role)===qe.ADMIN;x.useEffect(()=>{f(1)},[n]);const N=y,E=async O=>{if(confirm("Are you sure you want to delete this customer?")){if(Yw(O)){t.setQueryData(["customers"],C=>C&&C.filter(D=>D.id!==O)),r.success("Customer deleted");return}try{await _.mutateAsync(O),t.invalidateQueries({queryKey:["customers",d]}),r.success("Customer deleted successfully")}catch(C){console.error("Failed to delete customer:",C),r.error("Failed to delete customer")}}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-bold text-gray-900",children:"Customers"})}),c.jsx(We,{onClick:()=>e("/customers/new"),variant:"primary",size:"md",icon:se.Plus,children:"New Customer"})]}),c.jsx(Uo,{title:"Customers",filterRange:"All Time",setFilterRange:()=>{},customDates:{from:"",to:""},setCustomDates:()=>{}}),g&&c.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("p",{className:"text-red-800",children:[c.jsx("strong",{children:"Error loading customers:"})," ",g instanceof Error?g.message:String(g)]})}),c.jsx($p,{columns:[{key:"name",label:"Customer Name",render:(O,C)=>c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-400 flex items-center justify-center font-bold text-white",children:C.name.charAt(0)}),c.jsxs("div",{children:[c.jsx("span",{className:"font-bold text-gray-900 block",children:C.name}),c.jsx("p",{className:"text-xs text-gray-400 truncate max-w-[200px]",children:C.address})]})]})},{key:"phone",label:"Contact",render:O=>c.jsx("span",{className:"text-sm font-medium text-gray-700",children:O})},{key:"totalOrders",label:"Total Orders",align:"center",render:O=>c.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded-lg text-xs font-bold text-gray-600",children:O})},{key:"dueAmount",label:"Due Amount",align:"right",render:O=>c.jsx("span",{className:`font-bold ${O>0?"text-red-500":"text-green-500"}`,children:Se(O)})},{key:"id",label:"Actions",align:"right",render:O=>c.jsxs("div",{className:"justify-end flex items-center gap-2",children:[c.jsx(Ms,{icon:se.Edit,variant:"primary",title:"Edit",onClick:C=>{C.stopPropagation(),e(`/customers/edit/${O}`)}}),S&&c.jsx(Ms,{icon:se.Delete,variant:"danger",title:"Delete",onClick:C=>{C.stopPropagation(),E(O)}})]})}],data:N,loading:p,onRowClick:O=>e(`/customers/${O.id}`),emptyMessage:"No customers found"}),c.jsx(Of,{page:d,totalPages:j,onPageChange:O=>f(O),disabled:p})]})},aT=()=>{const{id:e}=Bn(),t=_t(),{isLoading:r}=ja(),n=!!e,[a,s]=x.useState({name:"",phone:"",address:""}),[l,d]=x.useState(null);if(r)return c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Loading..."}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Authenticating session..."})]});const{data:f,isPending:h,error:p}=SD(n?e:void 0),{data:g=[]}=Zo(),y=H9(),v=V9(),j=Ln(),_=ze();x.useEffect(()=>{if(f){s({name:f.name,phone:f.phone,address:f.address});return}if(e&&Yw(e)){const N=(g||[]).find(E=>E.id===e);N&&s({name:N.name,phone:N.phone,address:N.address})}},[f,g,e]);const S=async()=>{if(!a.name||!a.phone){d("Name and phone are required");return}d(null);try{if(n){const N={name:a.name,phone:a.phone,address:a.address};await v.mutateAsync({id:e,updates:N}),t("/customers")}else{const N={name:a.name,phone:a.phone,address:a.address,totalOrders:0,dueAmount:0};try{const E=await y.mutateAsync(N);try{_.setQueryData(["customers"],C=>C?Array.isArray(C)&&C.some(D=>D.id===E.id)?C:[...C,E]:[E])}catch{}const O=j&&j.state||{};if(O.fromOrderForm&&O.redirectPath){const C=`${O.redirectPath}${O.redirectPath.includes("?")?"&":"?"}selectedCustomerId=${E.id}`;t(C)}else t("/customers")}catch(E){console.error("Create customer failed:",E),d(E instanceof Error?E.message:"Failed to create customer")}}}catch(N){console.error(`Failed to ${n?"update":"create"} customer:`,N),d(N instanceof Error?N.message:`Failed to ${n?"update":"create"} customer`)}};return c.jsxs("div",{className:"max-w-2xl mx-auto space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"md:text-2xl text-xl font-black text-gray-900 tracking-tight",children:n?"Edit Customer":"New Customer"}),c.jsx("button",{onClick:()=>t(-1),className:"px-4 py-2 text-gray-500 font-bold hover:bg-gray-100 rounded-xl transition-all",children:"Cancel"})]}),c.jsx("div",{className:"bg-white p-10 rounded-xl border border-gray-100 shadow-xl space-y-8",children:n&&h?c.jsx("div",{className:"text-center text-gray-500",children:"Loading customer..."}):c.jsxs(c.Fragment,{children:[l&&c.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm font-bold text-red-600",children:l instanceof Error?l.message:String(l)})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Full Name"}),c.jsx("input",{type:"text",className:"w-full px-6 py-4 bg-gray-50 border border-gray-200 focus:border-[#3c5a82] focus:bg-white rounded-2xl font-bold transition-all outline-none",value:a.name,onChange:N=>s({...a,name:N.target.value})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Phone Number"}),c.jsx("input",{type:"text",className:"w-full px-6 py-4 bg-gray-50 border border-gray-200 focus:border-[#3c5a82] focus:bg-white rounded-2xl font-bold transition-all outline-none",value:a.phone,onChange:N=>s({...a,phone:N.target.value})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Address"}),c.jsx("textarea",{className:"w-full px-6 py-4 bg-gray-50 border border-gray-200 focus:border-[#3c5a82] focus:bg-white rounded-lg font-medium h-32 transition-all outline-none",value:a.address,onChange:N=>s({...a,address:N.target.value})})]}),c.jsx(We,{onClick:S,variant:"primary",size:"lg",className:"w-full",disabled:y.isPending||v.isPending,children:y.isPending||v.isPending?n?"Updating...":"Adding...":n?"Update Customer":"Add Customer"})]})})]})},ele=()=>{const{id:e}=Bn(),t=_t(),[r,n]=x.useState(null),a=Ne.currentUser,s=(a==null?void 0:a.role)||null,{data:l}=SD(e||""),{data:d=[]}=I9(e||""),{data:f}=zp(),h=Fp(),p=Kr(),{totalRevenue:g,dueAmount:y}=x.useMemo(()=>{const _=d.filter(O=>O.status===Ie.COMPLETED),S=d.filter(O=>O.status===Ie.PROCESSING||O.status===Ie.PICKED),N=_.reduce((O,C)=>O+C.total,0),E=S.reduce((O,C)=>O+(C.total-C.paidAmount),0);return{totalRevenue:N,dueAmount:E}},[d]),v=_=>{switch(_){case Ie.ON_HOLD:return"bg-gray-100 text-gray-600";case Ie.PROCESSING:return"bg-[#e6f0ff] ${theme.colors.secondary[600]}";case Ie.PICKED:return"bg-purple-100 text-purple-600";case Ie.COMPLETED:return"bg-green-100 ${theme.colors.primary[600]}";case Ie.CANCELLED:return"bg-red-100 text-red-600";default:return"bg-gray-100 text-gray-600"}},j=async _=>{try{if(!l)return;if(!f){p.error("Unable to generate new order number. Please try again.");return}const S=`${f.prefix}${f.nextNumber}`,N=new Date,E=N.toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"}),O=N.toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"}),C={orderNumber:S,orderDate:new Date().toISOString().split("T")[0],customerId:l.id,createdBy:_.createdBy,status:Ie.ON_HOLD,items:_.items,subtotal:_.subtotal,discount:_.discount,shipping:_.shipping,total:_.total,paidAmount:0,history:{created:`Duplicated from order #${_.orderNumber} on ${E}, at ${O}`}};await h.mutateAsync(C),p.success("Order duplicated successfully"),t("/orders")}catch(S){console.error("Failed to duplicate order",S),p.error("Failed to duplicate order: "+(S instanceof Error?S.message:"Unknown error"))}};return s===qe.EMPLOYEE?c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Employees cannot view customer details. Contact an administrator for assistance."}),c.jsx(We,{onClick:()=>t("/customers"),variant:"primary",children:"Back to Customers"})]}):l?c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>t("/customers"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Customer Profile"})]}),c.jsx("div",{className:"flex gap-2",children:c.jsx("button",{onClick:()=>t(`/customers/edit/${e}`),className:"px-4 py-2 border rounded-xl font-bold bg-white text-gray-700 hover:bg-gray-50",children:"Edit Profile"})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[c.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100 text-center",children:[c.jsx("div",{className:"w-24 h-24 rounded-full bg-[#ebf4ff] ${theme.colors.primary[600]} flex items-center justify-center font-black text-4xl mx-auto mb-4 border-2 border-[#c7dff5]",children:l.name.charAt(0)}),c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:l.name}),c.jsx("p",{className:"text-sm text-gray-400 mt-1",children:l.phone}),c.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-50 space-y-4 text-left",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Address"}),c.jsx("p",{className:"text-sm text-gray-700 font-medium leading-relaxed",children:l.address})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Total Revenue"}),c.jsx("p",{className:"text-lg font-black text-gray-900",children:Se(g)})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg shadow-[#0f2f57]/20/50 border border-gray-100 text-white",children:[c.jsx("p",{className:"text-gray-400 text-[10px] font-bold uppercase tracking-wider mb-1",children:"Due Amount"}),c.jsx("h4",{className:"text-lg font-black text-green-600",children:Se(y)})]})]}),c.jsx("div",{className:"lg:col-span-3",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[c.jsxs("div",{className:"p-6 border-b border-gray-50 flex items-center justify-between",children:[c.jsx("h3",{className:"font-bold text-gray-900",children:"Order History"}),c.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[d.length," Records found"]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 text-xs font-bold text-gray-500 uppercase tracking-wider",children:[c.jsx("th",{className:"px-6 py-4",children:"Order Number"}),c.jsx("th",{className:"px-6 py-4",children:"Order Date"}),c.jsx("th",{className:"px-6 py-4",children:"Status"}),c.jsx("th",{className:"px-6 py-4 text-right",children:"Amount"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:d.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"px-6 py-12 text-center text-gray-400 italic",children:"No orders found for this customer."})}):d.map(_=>c.jsxs("tr",{onMouseEnter:()=>n(_.id),onMouseLeave:()=>n(null),onClick:()=>t(`/orders/${_.id}`),className:"group relative hover:bg-[#ebf4ff]/30 cursor-pointer transition-colors",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("span",{className:"font-bold text-gray-900",children:["#",_.orderNumber]})}),c.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:_.orderDate}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase tracking-tighter ${v(_.status)}`,children:_.status})}),c.jsx("td",{className:"px-6 py-4 text-right",children:c.jsx("span",{className:"font-black text-gray-900",children:Se(_.total)})}),r===_.id&&c.jsx("td",{className:"absolute inset-y-0 right-0 flex items-center pr-6 bg-gradient-to-l from-emerald-50 via-emerald-50 to-transparent",children:c.jsxs("div",{className:"flex items-center gap-1 bg-white p-1 rounded-lg shadow-lg border border-[#c7dff5] animate-in fade-in slide-in-from-right-2 duration-200",onClick:S=>S.stopPropagation(),children:[c.jsx("button",{title:"Edit",onClick:()=>t(`/orders/edit/${_.id}`),className:"p-2 text-gray-500 hover:${theme.colors.primary[600]} hover:bg-[#ebf4ff] rounded-md transition-colors",children:se.Edit}),c.jsx("button",{title:"Duplicate",onClick:()=>j(_),className:"p-2 text-gray-500 hover:${theme.colors.primary[600]} hover:bg-[#ebf4ff] rounded-md transition-colors",children:se.Duplicate})]})})]},_.id))})]})})]})})]})]}):c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Customer not found."})},tle=()=>{const e=_t(),t=ze(),r=Kr(),{searchQuery:n}=Qa(),{data:a}=zs(),s=(a==null?void 0:a.recordsPerPage)||Qt,[l,d]=yt.useState(1),{data:f={data:[],count:0},isFetching:h}=$9(l,s,n),p=f.data||[],g=f.count||0,y=Math.max(1,Math.ceil(g/s)),v=nF();x.useEffect(()=>{d(1)},[n]);const j=p,_=async S=>{if(confirm("Are you sure you want to delete this vendor?"))try{await v.mutateAsync(S),t.invalidateQueries({queryKey:["vendors",l]}),r.success("Vendor deleted successfully")}catch(N){console.error("Failed to delete vendor:",N),r.error("Failed to delete vendor")}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-bold text-gray-900",children:"Vendors"})}),c.jsx(We,{onClick:()=>e("/vendors/new"),variant:"primary",size:"md",icon:se.Plus,children:"New Vendor"})]}),c.jsx($p,{columns:[{key:"name",label:"Vendor Name",render:(S,N)=>c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-400 text-white flex items-center justify-center font-bold",children:N.name.charAt(0)}),c.jsxs("div",{children:[c.jsx("span",{className:"font-bold text-gray-900 block",children:N.name}),c.jsx("p",{className:"text-xs text-gray-400 truncate max-w-[200px]",children:N.address})]})]})},{key:"phone",label:"Contact",render:S=>c.jsx("span",{className:"text-sm font-medium text-gray-700",children:S})},{key:"totalPurchases",label:"Purchases",align:"center",render:S=>c.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded-lg text-xs font-bold text-gray-600",children:S})},{key:"dueAmount",label:"Balance Payable",align:"right",render:S=>c.jsx("span",{className:`font-bold ${S>0?"text-red-500":"text-green-500"}`,children:Se(S)})},{key:"id",label:"Actions",align:"right",render:S=>c.jsxs("div",{className:"justify-end flex items-center gap-2",children:[c.jsx(Ms,{icon:se.Edit,variant:"primary",title:"Edit",onClick:N=>{N.stopPropagation(),e(`/vendors/edit/${S}`)}}),c.jsx(Ms,{icon:se.Delete,variant:"danger",title:"Delete",onClick:N=>{N.stopPropagation(),_(S)}})]})}],data:j,loading:h,onRowClick:S=>e(`/vendors/${S.id}`),emptyMessage:"No vendors found"}),c.jsx(Of,{page:l,totalPages:y,onPageChange:S=>d(S),disabled:h})]})},iT=()=>{const{id:e}=Bn(),t=_t(),{isLoading:r}=ja(),n=!!e,[a,s]=x.useState({name:"",phone:"",address:""}),[l,d]=x.useState(null),f=Ln(),h=ze(),{data:p,isPending:g,error:y}=ED(n?e:void 0),v=tF(),j=rF();x.useEffect(()=>{if(p){s({name:p.name,phone:p.phone,address:p.address});return}const S=f&&f.state||{};S.fromBillForm&&S.preFill&&S.preFill.name&&s({name:S.preFill.name,phone:S.preFill.phone||"",address:S.preFill.address||""})},[p,f]);const _=async()=>{if(r){d("Authenticating... Please wait");return}if(!a.name||!a.phone){d("Business name and phone are required");return}d(null);try{if(n){const S={name:a.name,phone:a.phone,address:a.address};await j.mutateAsync({id:e,updates:S}),t("/vendors")}else{const S={name:a.name,phone:a.phone,address:a.address,totalPurchases:0,dueAmount:0};try{const N=await v.mutateAsync(S);try{h.invalidateQueries({queryKey:["vendors"]})}catch{}const E=f&&f.state||{};if(E.fromBillForm&&E.redirectPath){const O=`${E.redirectPath}${E.redirectPath.includes("?")?"&":"?"}selectedVendorId=${N.id}`;t(O)}else t("/vendors")}catch(N){console.error("Create vendor failed:",N),d(N instanceof Error?N.message:"Failed to create vendor")}}}catch(S){console.error(`Failed to ${n?"update":"create"} vendor:`,S),d(S instanceof Error?S.message:`Failed to ${n?"update":"create"} vendor`)}};return c.jsxs("div",{className:"max-w-2xl mx-auto space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"md:text-2xl text-xl font-black text-gray-900 tracking-tight",children:n?"Edit Vendor":"New Vendor"}),c.jsx("button",{onClick:()=>t(-1),className:"px-4 py-2 text-gray-500 font-bold hover:bg-gray-100 rounded-xl transition-all",children:"Cancel"})]}),c.jsx("div",{className:"bg-white p-10 rounded-xl border border-gray-100 shadow-xl space-y-8",children:n&&g?c.jsx("div",{className:"text-center text-gray-500",children:"Loading vendor..."}):c.jsxs(c.Fragment,{children:[l&&c.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm font-bold text-red-600",children:l instanceof Error?l.message:String(l)})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Full Name"}),c.jsx("input",{type:"text",className:"w-full px-6 py-4 bg-gray-50 border border-gray-200 focus:border-[#3c5a82] focus:bg-white rounded-2xl font-bold transition-all outline-none",value:a.name,onChange:S=>s({...a,name:S.target.value})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Phone Number"}),c.jsx("input",{type:"text",className:"w-full px-6 py-4 bg-gray-50 border border-gray-200 focus:border-[#3c5a82] focus:bg-white rounded-2xl font-bold transition-all outline-none",value:a.phone,onChange:S=>s({...a,phone:S.target.value})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Address"}),c.jsx("textarea",{className:"w-full px-6 py-4 bg-gray-50 border border-gray-200 focus:border-[#3c5a82] focus:bg-white rounded-lg font-medium h-32 transition-all outline-none",value:a.address,onChange:S=>s({...a,address:S.target.value})})]}),c.jsx(We,{onClick:_,variant:"primary",size:"lg",className:"w-full",disabled:v.isPending||j.isPending,children:v.isPending||j.isPending?n?"Updating...":"Adding...":n?"Update Vendor":"Add Vendor"})]})})]})},rle=()=>{const{id:e}=Bn(),t=_t(),{data:r,isPending:n}=ED(e||""),{data:a=[]}=Jd(),[s,l]=x.useState(null);if(n)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading vendor details..."});if(!r)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Vendor not found."});const d=a.filter(h=>h.vendorId===r.id),f=h=>{switch(h){case pn.ON_HOLD:return"bg-gray-100 text-gray-600";case pn.PROCESSING:return"bg-blue-100 text-blue-600";case pn.RECEIVED:return"bg-green-100 text-green-600";default:return"bg-gray-100 text-gray-600"}};return c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>t("/vendors"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Vendor Profile"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{className:"px-4 py-2 border rounded-xl font-bold bg-white text-gray-700 hover:bg-gray-50",children:"Edit Profile"}),c.jsx("button",{className:`px-4 py-2 ${le.colors.primary[600]} text-white rounded-xl font-bold hover:${le.colors.primary[700]} shadow-md`,children:"Purchase Statement"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[c.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100 text-center",children:[c.jsx("div",{className:`w-24 h-24 rounded-full bg-[#e6f0ff] ${le.colors.primary.text} flex items-center justify-center font-black text-4xl mx-auto mb-4 border-2 border-[#c7dff5]`,children:r.name.charAt(0)}),c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:r.name}),c.jsx("p",{className:"text-sm text-gray-400 mt-1",children:r.phone}),c.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-50 space-y-4 text-left",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Office Address"}),c.jsx("p",{className:"text-sm text-gray-700 font-medium leading-relaxed",children:r.address})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Total Procurement"}),c.jsx("p",{className:"text-lg font-black text-gray-900",children:Se(d.reduce((h,p)=>h+p.total,0))})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg shadow-[#0f2f57]/20 text-white",children:[c.jsx("p",{className:"text-gray-400 text-[10px] font-bold uppercase tracking-wider mb-1",children:"Total Payable"}),c.jsx("h4",{className:"text-lg font-black text-red-600",children:Se(r.dueAmount)})]})]}),c.jsx("div",{className:"lg:col-span-3",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[c.jsxs("div",{className:"p-6 border-b border-gray-50 flex items-center justify-between",children:[c.jsx("h3",{className:"font-bold text-gray-900",children:"Purchase Bills"}),c.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[d.length," Invoices"]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 text-xs font-bold text-gray-500 uppercase tracking-wider",children:[c.jsx("th",{className:"px-6 py-4",children:"Bill Number"}),c.jsx("th",{className:"px-6 py-4",children:"Bill Date"}),c.jsx("th",{className:"px-6 py-4",children:"Status"}),c.jsx("th",{className:"px-6 py-4 text-right",children:"Amount"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:d.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"px-6 py-12 text-center text-gray-400 italic",children:"No purchase bills found for this vendor."})}):d.map(h=>c.jsxs("tr",{onMouseEnter:()=>l(h.id),onMouseLeave:()=>l(null),onClick:()=>t(`/bills/${h.id}`),className:"group relative hover:bg-blue-50/30 cursor-pointer transition-colors",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("span",{className:"font-bold text-gray-900",children:["#",h.billNumber]})}),c.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:h.billDate}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase tracking-tighter ${f(h.status)}`,children:h.status})}),c.jsx("td",{className:"px-6 py-4 text-right",children:c.jsx("span",{className:"font-black text-gray-900",children:Se(h.total)})}),s===h.id&&c.jsx("td",{className:"absolute inset-y-0 right-0 flex items-center pr-6 bg-gradient-to-l from-blue-50 via-blue-50 to-transparent",children:c.jsx("div",{className:"flex items-center gap-1 bg-white p-1 rounded-lg shadow-lg border border-[#c7dff5] animate-in fade-in slide-in-from-right-2 duration-200",onClick:p=>p.stopPropagation(),children:c.jsx("button",{title:"Edit",onClick:()=>t(`/bills/edit/${h.id}`),className:`p-2 text-gray-500 hover:${le.colors.primary[600]} hover:bg-[#ebf4ff] rounded-md transition-colors`,children:se.Edit})})})]},h.id))})]})})]})})]})]})},nle=({title:e,description:t,icon:r,color:n,to:a})=>{const s=_t();return c.jsxs("button",{onClick:()=>s(a),className:"flex items-start gap-4 p-6 bg-white rounded-lg border border-gray-100 shadow-sm hover:shadow-md hover:border-[#c7dff5] transition-all text-left w-full group",children:[c.jsx("div",{className:`p-4 rounded-[50%] ${n} transition-transform group-hover:scale-110 duration-300`,children:r}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:e}),c.jsx("p",{className:"text-sm text-gray-500 mt-1 leading-relaxed",children:t}),c.jsxs("div",{className:"mt-4 flex items-center gap-1 text-xs font-bold uppercase tracking-widest opacity-40 group-hover:opacity-100 transition-opacity",children:["View Report ",se.ChevronRight]})]})]})},ale=()=>{const e=[{title:"Expense Summary",description:"Breakdown of your business spending by category and vendor.",icon:se.Delete,color:"bg-red-50 text-red-600",to:"/reports/expense"},{title:"Income Summary",description:"Analysis of your revenue streams and payment collections.",icon:se.PlusCircle,color:`bg-[#ebf4ff] ${le.colors.primary[600]}`,to:"/reports/income"},{title:"Income vs Expense",description:"Visual comparison of cash inflows and outflows over time.",icon:se.Transfer,color:`bg-[#e6f0ff] ${le.colors.secondary[600]}`,to:"/reports/income-vs-expense"},{title:"Profit and Loss",description:"Standard P&L statement to track net business profitability.",icon:se.Reports,color:"bg-purple-50 text-purple-600",to:"/reports/profit-loss"}];return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Financial Reports"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Deep dive into your business metrics and performance."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map((t,r)=>c.jsx(nle,{...t},r))})]})},ile=()=>{const e=_t(),{data:t=[]}=ef(),{data:r=[]}=tf(),{data:n=[]}=$s(),{data:a=[]}=Us(),s=new Map(a.map(g=>[g.id,g.name])),l=t.filter(g=>g.type==="Expense"),d={};l.forEach(g=>{const y=s.get(g.category)||g.category||"Uncategorized";d[y]=(d[y]||0)+g.amount});const f=Object.entries(d).map(([g,y])=>({name:g,value:y})),h=["#EF4444","#F97316","#F59E0B","#8B5CF6","#EC4899","#3B82F6"],p=()=>{const g=`Date,Category,Contact,Account,Amount,Description
`,y=l.map(S=>{var C,D;const N=((C=r.find(T=>T.id===S.contactId))==null?void 0:C.name)||"N/A",E=((D=n.find(T=>T.id===S.accountId))==null?void 0:D.name)||"N/A",O=s.get(S.category)||S.category||"Uncategorized";return`${S.date},"${O}","${N}","${E}",${S.amount},"${S.description}"`}).join(`
`),v=new Blob([g+y],{type:"text/csv"}),j=window.URL.createObjectURL(v),_=document.createElement("a");_.setAttribute("hidden",""),_.setAttribute("href",j),_.setAttribute("download","expense_summary.csv"),document.body.appendChild(_),_.click(),document.body.removeChild(_)};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>e("/reports"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Expense Summary"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 bg-white border rounded-xl font-bold text-sm text-gray-700 hover:bg-gray-50",children:[se.Download," Export CSV"]}),c.jsx(We,{variant:"primary",size:"sm",icon:se.Print,children:"Export Image"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-2 bg-white p-6 rounded-lg border border-gray-100 shadow-sm",children:[c.jsx("h3",{className:"font-bold text-gray-800 mb-6",children:"Expenses by Category"}),c.jsx("div",{className:"h-[350px]",children:c.jsx(uc,{width:"100%",height:"100%",children:c.jsxs(M5,{data:f,layout:"vertical",margin:{left:40,right:40},children:[c.jsx(fc,{strokeDasharray:"3 3",horizontal:!1,stroke:"#f1f5f9"}),c.jsx(hc,{type:"number",axisLine:!1,tickLine:!1,tick:{fontSize:10}}),c.jsx(mc,{dataKey:"name",type:"category",axisLine:!1,tickLine:!1,tick:{fontSize:10,fontWeight:"bold"}}),c.jsx(_o,{formatter:g=>Se(g),contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1)"}}),c.jsx(vi,{dataKey:"value",radius:[0,4,4,0],barSize:30,children:f.map((g,y)=>c.jsx(nl,{fill:h[y%h.length]},`cell-${y}`))})]})})})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-100 shadow-sm space-y-6",children:[c.jsx("h3",{className:"font-bold text-gray-800",children:"Key Statistics"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-red-50 rounded-lg",children:[c.jsx("p",{className:"text-[10px] font-bold text-red-400 uppercase tracking-widest",children:"Total Outflow"}),c.jsx("h4",{className:"text-3xl font-black text-red-600",children:Se(l.reduce((g,y)=>g+y.amount,0))})]}),c.jsx("div",{className:"divide-y divide-gray-50",children:f.sort((g,y)=>y.value-g.value).slice(0,5).map((g,y)=>c.jsxs("div",{className:"py-3 flex justify-between items-center",children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:g.name}),c.jsx("span",{className:"text-sm font-bold text-gray-900",children:Se(g.value)})]},y))})]})]})]}),c.jsxs("div",{className:"bg-white rounded-lg border border-gray-100 shadow-sm overflow-hidden",children:[c.jsx("div",{className:"p-6 border-b border-gray-50",children:c.jsx("h3",{className:"font-bold text-gray-900",children:"Recent Expense Log"})}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 text-xs font-bold text-gray-500 uppercase",children:[c.jsx("th",{className:"px-6 py-4",children:"Date"}),c.jsx("th",{className:"px-6 py-4",children:"Category"}),c.jsx("th",{className:"px-6 py-4 text-right",children:"Amount"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:l.slice(0,10).map(g=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:g.date}),c.jsx("td",{className:"px-6 py-4 text-sm font-bold text-gray-800",children:s.get(g.category)||g.category||"Uncategorized"}),c.jsx("td",{className:"px-6 py-4 text-right font-black text-red-600",children:Se(g.amount)})]},g.id))})]})})]})]})},sle=()=>{const e=_t(),{data:t=[]}=ef(),{data:r=[]}=Zo(),{data:n=[]}=Zd(),{data:a=[]}=Us(),s=new Map(a.map(v=>[v.id,v.name])),l=t.filter(v=>v.type==="Income"),d={};l.forEach(v=>{d[v.category]=(d[v.category]||0)+v.amount});const f=Object.entries(d).map(([v,j])=>({name:s.get(v)||v||"Uncategorized",value:j})),h=["#10B981","#34D399","#6EE7B7","#A7F3D0","#D1FAE5"],p=n.filter(v=>v.status===Ie.COMPLETED),g={};p.forEach(v=>{g[v.customerId]=(g[v.customerId]||0)+v.total});const y=r.map(v=>({...v,revenue:g[v.id]||0})).filter(v=>v.revenue>0).sort((v,j)=>j.revenue-v.revenue).slice(0,3);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>e("/reports"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Income Summary"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white border rounded-xl font-bold text-sm text-gray-700 hover:bg-gray-50",children:[se.Download," Export CSV"]}),c.jsx(We,{variant:"primary",size:"sm",icon:se.Print,children:"Export Image"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-white p-8 rounded-lg border border-gray-100 shadow-sm flex flex-col items-center",children:[c.jsx("h3",{className:"font-bold text-gray-800 self-start mb-6",children:"Revenue Mix"}),c.jsx("div",{className:"w-full h-[300px]",children:c.jsx(uc,{width:"100%",height:"100%",children:c.jsxs(I5,{children:[c.jsx(Qj,{data:f,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:f.map((v,j)=>c.jsx(nl,{fill:h[j%h.length]},`cell-${j}`))}),c.jsx(_o,{formatter:v=>Se(v)}),c.jsx(Cd,{verticalAlign:"bottom",align:"center"})]})})})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:`${le.colors.primary[600]} p-8 rounded-lg text-white shadow-lg shadow-[#0f2f57]/20`,children:[c.jsx("p",{className:"text-[#c7dff5] text-xs font-bold uppercase tracking-widest mb-1",children:"Total Revenue Collected"}),c.jsx("h4",{className:"text-4xl font-black",children:Se(l.reduce((v,j)=>v+j.amount,0))}),c.jsxs("div",{className:"mt-6 p-4 bg-white/10 rounded-xl flex items-center justify-between",children:[c.jsx("span",{className:"text-sm font-medium",children:"Avg Transaction Size"}),c.jsx("span",{className:"font-bold",children:Se(l.length?l.reduce((v,j)=>v+j.amount,0)/l.length:0)})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-100 shadow-sm",children:[c.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:"Top Customers"}),c.jsx("div",{className:"space-y-4",children:y.map((v,j)=>c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center font-bold text-xs",children:v.name.charAt(0)}),c.jsx("span",{className:"text-sm font-semibold text-gray-700",children:v.name})]}),c.jsx("span",{className:"text-sm font-black",children:Se(v.revenue)})]},j))})]})]})]})]})},ole=()=>{const e=_t(),{data:t=[]}=Zd(),{data:r=[]}=Jd(),{data:n=[]}=ef(),a=x.useMemo(()=>{const s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],l=new Date().getFullYear(),d={};return s.forEach(f=>{d[f]={income:0,expense:0}}),t.forEach(f=>{const h=new Date(f.orderDate);if(h.getFullYear()===l){const p=h.getMonth(),g=s[p];d[g].income+=f.total}}),r.forEach(f=>{const h=new Date(f.billDate);if(h.getFullYear()===l){const p=h.getMonth(),g=s[p];d[g].expense+=f.total}}),n.filter(f=>f.type==="Expense"&&f.category!=="expense_purchases").forEach(f=>{const h=new Date(f.date);if(h.getFullYear()===l){const p=h.getMonth(),g=s[p];d[g].expense+=f.amount}}),s.map(f=>({name:f,income:d[f].income,expense:d[f].expense,profit:d[f].income-d[f].expense}))},[t,r,n]);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>e("/reports"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Income vs Expense Trend"})]}),c.jsx("div",{className:"flex gap-2",children:c.jsx(We,{variant:"primary",size:"sm",icon:se.Print,children:"Export Full Report"})})]}),c.jsxs("div",{className:"bg-white p-8 rounded-lg border border-gray-100 shadow-sm",children:[c.jsx("h3",{className:"font-bold text-gray-800 mb-8",children:"Cash Flow Dynamics (Last 6 Months)"}),c.jsx("div",{className:"h-[400px]",children:c.jsx(uc,{width:"100%",height:"100%",children:c.jsxs(jw,{data:a,children:[c.jsx(fc,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),c.jsx(hc,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:12}}),c.jsx(mc,{axisLine:!1,tickLine:!1,tick:{fontSize:12}}),c.jsx(_o,{formatter:s=>Se(s),contentStyle:{borderRadius:"16px",border:"none",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1)"}}),c.jsx(Cd,{verticalAlign:"top",align:"right",height:36}),c.jsx(vi,{dataKey:"income",fill:"#10B981",radius:[4,4,0,0],name:"Total Income",barSize:40}),c.jsx(vi,{dataKey:"expense",fill:"#EF4444",radius:[4,4,0,0],name:"Total Expense",barSize:40}),c.jsx(_p,{type:"monotone",dataKey:"profit",stroke:"#8B5CF6",strokeWidth:4,dot:{r:6,fill:"#8B5CF6",strokeWidth:2,stroke:"#fff"},name:"Net Cash Flow"})]})})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:(()=>{var p,g,y,v;const s=a.reduce((j,_)=>j+_.income,0),l=a.reduce((j,_)=>j+_.expense,0),d=a.length>0?(s-l)/a.length:0,f=a.reduce((j,_,S)=>_.income>a[j].income?S:j,0),h=a.reduce((j,_,S)=>_.expense<a[j].expense?S:j,0);return[{label:"Highest Revenue Month",value:((p=a[f])==null?void 0:p.name)||"",amount:((g=a[f])==null?void 0:g.income)||0},{label:"Least Expense Month",value:((y=a[h])==null?void 0:y.name)||"",amount:((v=a[h])==null?void 0:v.expense)||0},{label:"Average Monthly Profit",value:"Monthly Avg",amount:d,color:"text-purple-600"}].map((j,_)=>c.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-100 shadow-sm",children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:j.label}),c.jsx("h4",{className:"text-xl font-bold text-gray-900 mt-1",children:j.value}),c.jsx("p",{className:`text-lg font-black mt-2 ${j.color}`,children:Se(j.amount)})]},_))})()})]})},Ta=({label:e,amount:t,isBold:r,isTotal:n,indent:a})=>c.jsxs("div",{className:`flex justify-between py-2 ${r?"font-bold text-gray-900":"text-gray-600"} ${n?"border-t-2 border-gray-100 pt-4 mt-2":""} ${a?"pl-6":""}`,children:[c.jsx("span",{className:"text-sm",children:e}),c.jsx("span",{className:"text-sm font-black",children:Se(t)})]}),lle=()=>{const e=_t(),{data:t=[]}=Zd(),{data:r=[]}=Jd(),{data:n=[]}=ef(),{data:a=[]}=Us(),s=new Map(a.map(j=>[j.id,j.name])),[l,d]=x.useState("currentYear"),[f,h]=x.useState(""),[p,g]=x.useState(""),y=j=>{const _=new Date(j),S=new Date;return l==="currentYear"?_.getFullYear()===S.getFullYear():l==="currentMonth"?_.getFullYear()===S.getFullYear()&&_.getMonth()===S.getMonth():l==="custom"?!f||!p?!0:_>=new Date(f)&&_<=new Date(p):!0},v=x.useMemo(()=>{const j=n.filter(R=>R.type==="Income"&&!!R.referenceId&&y(R.date)).reduce((R,U)=>R+U.amount,0),_=j>0?j:t.filter(R=>R.status===Ie.COMPLETED&&y(R.orderDate)).reduce((R,U)=>R+U.total,0),S=n.filter(R=>R.type==="Expense"&&R.category==="expense_purchases"&&y(R.date)).reduce((R,U)=>R+U.amount,0),N=S>0?S:r.filter(R=>y(R.billDate)).reduce((R,U)=>R+U.total,0),E=_-N,O={};n.filter(R=>R.type==="Expense"&&R.category!=="expense_purchases"&&y(R.date)).forEach(R=>{const U=s.get(R.category)||R.category||"Uncategorized";O[U]=(O[U]||0)+R.amount});const D=Object.entries(O).map(([R,U])=>({categoryName:R,amount:U})).sort((R,U)=>U.amount-R.amount),T=Object.values(O).reduce((R,U)=>R+U,0),M=E-T;return{grossSales:_,costOfPurchases:N,grossProfit:E,expenses:D,totalOperatingExpenses:T,netProfit:M}},[t,r,n,l,f,p,s]);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>e("/reports"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Profit and Loss Statement"})]}),c.jsxs("button",{onClick:()=>window.print(),className:`flex items-center gap-2 px-4 py-2 ${le.colors.primary[600]} hover:${le.colors.primary[700]} text-white font-bold rounded-xl transition-colors`,children:[se.Print," Print Statement"]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-4",children:"Period"}),c.jsxs("div",{className:"flex gap-4 items-end",children:[c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"radio",name:"dateRange",value:"currentYear",checked:l==="currentYear",onChange:j=>d(j.target.value),className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Current Year"})]}),c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"radio",name:"dateRange",value:"currentMonth",checked:l==="currentMonth",onChange:j=>d(j.target.value),className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Current Month"})]}),c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"radio",name:"dateRange",value:"custom",checked:l==="custom",onChange:j=>d(j.target.value),className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Custom Range"})]})]}),l==="custom"&&c.jsxs("div",{className:"flex gap-3 ml-auto",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-600",children:"From:"}),c.jsx("input",{type:"date",value:f,onChange:j=>h(j.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-600",children:"To:"}),c.jsx("input",{type:"date",value:p,onChange:j=>g(j.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm"})]})]})]})]}),c.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"p-8 bg-gray-50 border-b border-gray-100 text-center",children:[Ne.settings.company.logo&&c.jsx("img",{src:Ne.settings.company.logo,className:"w-16 h-16 rounded-xl mx-auto mb-4"}),c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:Ne.settings.company.name})]}),c.jsxs("div",{className:"p-8 space-y-2",children:[c.jsx("h4",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mb-4",children:"Revenue"}),c.jsx(Ta,{label:"Gross Sales (Completed Orders)",amount:v.grossSales}),c.jsx(Ta,{label:"Other Operating Income",amount:0}),c.jsx(Ta,{label:"Total Revenue",amount:v.grossSales,isBold:!0,isTotal:!0}),c.jsxs("div",{className:"pt-8",children:[c.jsx("h4",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mb-4",children:"Cost of Goods Sold"}),c.jsx(Ta,{label:"Purchases",amount:v.costOfPurchases}),c.jsx(Ta,{label:"Total COGS",amount:v.costOfPurchases,isBold:!0,isTotal:!0})]}),c.jsx("div",{className:"pt-8",children:c.jsx(Ta,{label:"Gross Profit",amount:v.grossProfit,isBold:!0})}),c.jsxs("div",{className:"pt-8",children:[c.jsx("h4",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mb-4",children:"Operating Expenses"}),v.expenses.length>0?c.jsxs(c.Fragment,{children:[v.expenses.slice(0,5).map((j,_)=>c.jsx(Ta,{label:j.categoryName,amount:j.amount,indent:!0},_)),v.expenses.length>5&&c.jsx(Ta,{label:"Other Expenses",amount:v.expenses.slice(5).reduce((j,_)=>j+_.amount,0),indent:!0})]}):c.jsx(Ta,{label:"None",amount:0,indent:!0}),c.jsx(Ta,{label:"Total Operating Expenses",amount:v.totalOperatingExpenses,isBold:!0,isTotal:!0})]}),c.jsx("div",{className:"pt-12",children:c.jsxs("div",{className:`p-6 rounded-lg flex justify-between items-center ${v.netProfit>=0?le.colors.primary[600]:"bg-red-600"} text-white shadow-xl`,children:[c.jsx("span",{className:"text-lg font-black uppercase tracking-widest",children:"Net Profit / Loss"}),c.jsx("span",{className:"text-3xl font-black",children:Se(v.netProfit)})]})})]}),c.jsx("div",{className:"p-8 text-center text-[10px] text-gray-300 italic border-t border-gray-50",children:"This report is generated automatically by BD Hatbela Financial Management System."})]})]})},sT=({order:e,customer:t,products:r,companySettings:n,invoiceSettings:a})=>c.jsxs("div",{className:"space-y-5 print:space-y-4 text-gray-900",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[((n==null?void 0:n.logo)||Ne.settings.company.logo)&&c.jsx("img",{src:(n==null?void 0:n.logo)||Ne.settings.company.logo,className:"rounded-lg object-cover mb-4",style:{width:(a==null?void 0:a.logoWidth)||Ne.settings.invoice.logoWidth,height:(a==null?void 0:a.logoHeight)||Ne.settings.invoice.logoHeight},alt:"Company Logo"}),c.jsx("h1",{className:"text-xl font-black uppercase tracking-tighter",children:(n==null?void 0:n.name)||Ne.settings.company.name}),c.jsxs("div",{className:"mt-2 text-xs text-gray-400 font-medium space-y-1 print:text-gray-600",children:[c.jsx("p",{children:(n==null?void 0:n.address)||Ne.settings.company.address}),c.jsxs("p",{children:[(n==null?void 0:n.phone)||Ne.settings.company.phone," "," ",(n==null?void 0:n.email)||Ne.settings.company.email]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("h2",{className:"text-3xl font-black text-gray-300 uppercase leading-none mb-2 print:text-gray-400",children:(a==null?void 0:a.title)||Ne.settings.invoice.title}),c.jsxs("div",{className:"space-y-1.5 print:space-y-1",children:[c.jsxs("p",{className:"text-sm font-bold text-gray-900 print:text-gray-800",children:[c.jsx("span",{className:"text-gray-400 font-medium",children:"Order No:"}),e.orderNumber]}),c.jsxs("p",{className:"text-sm font-bold text-gray-900 print:text-gray-800",children:[c.jsx("span",{className:"text-gray-400 font-medium",children:"Date:"}),new Date(e.orderDate).toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})]})]})]})]}),c.jsx("div",{className:"grid grid-cols-2 gap-12 border-t border-gray-100 py-4 print:border-gray-300 print:py-3",children:c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-4 print:mb-2",children:"Billed To"}),c.jsx("h3",{className:"text-md font-black text-gray-900 print:text-gray-800",children:t==null?void 0:t.name}),c.jsx("p",{className:"text-sm text-gray-500 leading-relaxed print:text-gray-600",children:t==null?void 0:t.address}),c.jsx("p",{className:"text-sm font-bold mt-2 print:mt-1",children:t==null?void 0:t.phone})]})}),c.jsxs("table",{className:"w-full text-left print:text-gray-800",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b-2 border-gray-100 print:border-gray-300",children:[c.jsx("th",{className:"py-4 text-sm font-black text-gray-400 uppercase print:text-xs print:py-2",children:"Item Description"}),c.jsx("th",{className:"py-4 text-sm text-center font-black text-gray-400 uppercase print:text-xs print:py-2",children:"Rate"}),c.jsx("th",{className:"py-4 text-sm text-center font-black text-gray-400 uppercase print:text-xs print:py-2",children:"Qty"}),c.jsx("th",{className:"py-4 text-sm text-right font-black text-gray-400 uppercase print:text-xs print:py-2",children:"Total"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50 print:divide-gray-300",children:e.items.map((s,l)=>{const d=r.find(f=>f.id===s.productId);return c.jsxs("tr",{className:"group",children:[c.jsx("td",{className:"py-6 print:py-3",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("img",{src:d==null?void 0:d.image,className:"w-12 h-12 rounded-full object-cover border border-gray-100 shadow-sm print:w-10 print:h-10 print:rounded-full print:border-gray-300 print:shadow-none",alt:s.productName}),c.jsx("span",{className:"font-bold text-gray-900 print:text-sm",children:s.productName})]})}),c.jsx("td",{className:"py-6 text-center text-gray-500 font-bold print:py-3 print:text-sm",children:Se(s.rate)}),c.jsx("td",{className:"py-6 text-center text-gray-500 font-bold print:py-3 print:text-sm",children:s.quantity}),c.jsx("td",{className:"py-6 text-right font-black text-gray-900 print:py-3 print:text-sm",children:Se(s.amount)})]},l)})})]}),c.jsx("div",{className:"flex justify-end pt-6 print:pt-4",children:c.jsxs("div",{className:"w-full max-w-xs space-y-4 print:space-y-2 print:text-sm",children:[c.jsxs("div",{className:"flex justify-between text-sm print:text-xs",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase print:text-gray-600",children:"Subtotal"}),c.jsx("span",{className:"font-bold text-gray-900 print:text-gray-800",children:Se(e.subtotal)})]}),e.discount>0&&c.jsxs("div",{className:"flex justify-between text-sm print:text-xs",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase print:text-gray-600",children:"Discount"}),c.jsxs("span",{className:"font-bold text-red-500 print:text-red-600",children:["-",Se(e.discount)]})]}),e.shipping>0&&c.jsxs("div",{className:"flex justify-between text-sm print:text-xs",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase print:text-gray-600",children:"Shipping"}),c.jsx("span",{className:"font-bold text-gray-900 print:text-gray-800",children:Se(e.shipping)})]}),c.jsxs("div",{className:"flex justify-between items-center py-6 border-t-2 border-[#0f2f57] print:py-3 print:border-t print:border-gray-400",children:[c.jsx("span",{className:"font-black text-gray-900 uppercase tracking-tighter print:text-gray-800",children:"Net Total"}),c.jsx("span",{className:"font-black text-gray-900 print:text-gray-800",children:Se(e.total)})]})]})}),e.notes&&c.jsxs("div",{className:"bg-gray-50 p-4 rounded-[10px] border border-gray-100 print:bg-white print:p-3 print:rounded-lg print:border-gray-300",children:[c.jsx("p",{className:"text-[10px] font-black text-gray-300 uppercase tracking-widest mb-2 print:text-gray-500 print:mb-1",children:"Terms & Notes"}),c.jsx("p",{className:"text-xs text-gray-600 font-medium italic leading-relaxed print:text-gray-700",children:e.notes})]})]}),cle=()=>{const{id:e}=Bn(),{data:t,isPending:r}=Hw(e||""),{data:n=[]}=Zo(),{data:a=[]}=Ri(),{data:s=[]}=Vw(),{data:l}=Up(),{data:d}=qp(),f=x.useRef(!1),h=t?n.find(p=>p.id===t.customerId):void 0;return t&&a.find(p=>p.id===t.createdBy),x.useEffect(()=>{t&&!r&&!f.current&&(f.current=!0,Uoe())},[t,r]),r||!t?c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading details..."}):c.jsxs("div",{className:"min-h-screen bg-white print:bg-white",children:[c.jsxs("div",{className:"space-y-0 print:space-y-0",children:[c.jsx("div",{className:"bg-white p-6 lg:p-10 print:p-6 min-h-screen print:min-h-fit",children:c.jsx(sT,{order:t,customer:h,products:s,companySettings:l,invoiceSettings:d})}),c.jsx("div",{className:"bg-white p-6 lg:p-10 print:p-6 min-h-screen print:min-h-fit",style:{pageBreakBefore:"always"},children:c.jsx(sT,{order:t,customer:h,products:s,companySettings:l,invoiceSettings:d})})]}),c.jsx("style",{children:`
        @media print {
          body {
            margin: 0;
            padding: 0;
            background: white;
          }
          .no-print {
            display: none !important;
          }
          table {
            page-break-inside: avoid;
          }
          tr {
            page-break-inside: avoid;
          }
          @page {
            margin: 0.25in;
            size: A4;
          }
          .print:page-break-avoid {
            page-break-inside: avoid;
          }
          .grid {
            page-break-inside: avoid;
          }
        }
      `})]})},ule=new m$({defaultOptions:{queries:{staleTime:300*1e3,gcTime:1800*1e3,retry:2,retryDelay:e=>Math.min(1e3*2**e,1e4),refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1},mutations:{retry:1,retryDelay:1e3}}}),dle=({user:e,profile:t,isLoading:r})=>{const n=!!e;return c.jsxs(d6,{children:[c.jsx(Ye,{path:"/login",element:n?c.jsx(Qe,{to:"/dashboard",replace:!0}):c.jsx(A9,{})}),c.jsx(Ye,{path:"/",element:n?c.jsx(Qe,{to:"/dashboard",replace:!0}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/dashboard",element:n?c.jsx(ot,{children:c.jsx($oe,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/orders",element:n?c.jsx(ot,{children:c.jsx(zoe,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/orders/new",element:n?c.jsx(ot,{children:c.jsx(eT,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/orders/edit/:id",element:n?c.jsx(ot,{children:c.jsx(eT,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/orders/:id",element:n?c.jsx(ot,{children:c.jsx(qoe,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/print-order/:id",element:n?c.jsx(cle,{}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/bills",element:n?c.jsx(ot,{children:c.jsx(Foe,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/bills/new",element:n?c.jsx(ot,{children:c.jsx(tT,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/bills/edit/:id",element:n?c.jsx(ot,{children:c.jsx(tT,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/bills/:id",element:n?c.jsx(ot,{children:c.jsx(Koe,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/banking/accounts",element:n?c.jsx(ot,{children:c.jsx(Qoe,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/banking/transfer",element:n?c.jsx(ot,{children:c.jsx(Goe,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/banking/transactions",element:n?c.jsx(ot,{children:c.jsx(Hoe,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/transactions",element:n?c.jsx(Qe,{to:"/banking/transactions",replace:!0}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/transactions/new/:type",element:n?c.jsx(ot,{children:c.jsx(Voe,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/customers",element:n?c.jsx(ot,{children:c.jsx(Joe,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/customers/new",element:n?c.jsx(ot,{children:c.jsx(aT,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/customers/edit/:id",element:n?c.jsx(ot,{children:c.jsx(aT,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/customers/:id",element:n?c.jsx(ot,{children:c.jsx(ele,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/vendors",element:n?c.jsx(ot,{children:c.jsx(tle,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/vendors/new",element:n?c.jsx(ot,{children:c.jsx(iT,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/vendors/edit/:id",element:n?c.jsx(ot,{children:c.jsx(iT,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/vendors/:id",element:n?c.jsx(ot,{children:c.jsx(rle,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/products",element:n?c.jsx(ot,{children:c.jsx(Yoe,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/products/new",element:n?c.jsx(ot,{children:c.jsx(rT,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/products/edit/:id",element:n?c.jsx(ot,{children:c.jsx(rT,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/users",element:n?c.jsx(ot,{children:c.jsx(Woe,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/users/new",element:n?c.jsx(ot,{children:c.jsx(nT,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/users/edit/:id",element:n?c.jsx(ot,{children:c.jsx(nT,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/users/:id",element:n?c.jsx(ot,{children:c.jsx(Xoe,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/reports",element:n?c.jsx(ot,{children:c.jsx(ale,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/reports/expense",element:n?c.jsx(ot,{children:c.jsx(ile,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/reports/income",element:n?c.jsx(ot,{children:c.jsx(sle,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/reports/income-vs-expense",element:n?c.jsx(ot,{children:c.jsx(ole,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/reports/profit-loss",element:n?c.jsx(ot,{children:c.jsx(lle,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/settings",element:n?c.jsx(ot,{children:c.jsx(Zoe,{})}):c.jsx(Qe,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"*",element:n?c.jsx(Qe,{to:"/dashboard",replace:!0}):c.jsx(Qe,{to:"/login",replace:!0})})]})},fle=()=>{const{user:e,profile:t,isLoading:r}=ja();return console.log("[App] Render - user:",!!e,"profile:",!!t,"isLoading:",r),r?(console.log("[App] Rendering loading screen"),c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"inline-block p-4",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),c.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading..."})]})})):c.jsx(dle,{user:e,profile:t,isLoading:r})},hle=()=>(console.log("[App] Root component rendering - setting up providers"),c.jsx(p$,{client:ule,children:c.jsx(x8,{children:c.jsx(N8,{children:c.jsx(w8,{children:c.jsx(j8,{children:c.jsx(_8,{children:c.jsxs(R6,{children:[c.jsx(fle,{}),c.jsx(O9,{}),c.jsx(E9,{})]})})})})})})})),B5=document.getElementById("root");if(!B5)throw new Error("Could not find root element to mount to");const mle=mB.createRoot(B5);mle.render(c.jsx(yt.StrictMode,{children:c.jsx(hle,{})}));window.__testSupabase={async testCustomers(){console.log(" Testing customer fetch...");try{const e=await uD();return console.log(" Success! Customers:",e),e}catch(e){throw console.error(" Error:",e),e}},async testConnection(){console.log(" Testing session (direct table auth)...");try{const e=localStorage.getItem("userData");if(e){const t=JSON.parse(e);return console.log(" User session active:",t),t}return console.log(" No active session - user not logged in"),null}catch(e){throw console.error(" Session check error:",e),e}},help(){console.log("Available test functions:"),console.log("  __testSupabase.testCustomers() - Fetch customers from DB"),console.log("  __testSupabase.testConnection() - Check auth session"),console.log("  __testSupabase.help() - Show this help")}};console.log(" Tip: Type __testSupabase.help() in console for test commands");export{Ka as a,gle as g};
