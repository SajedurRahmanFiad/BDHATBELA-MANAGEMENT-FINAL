var mB=Object.defineProperty;var uE=e=>{throw TypeError(e)};var pB=(e,t,r)=>t in e?mB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var n0=(e,t,r)=>pB(e,typeof t!="symbol"?t+"":t,r),a0=(e,t,r)=>t.has(e)||uE("Cannot "+r);var U=(e,t,r)=>(a0(e,t,"read from private field"),r?r.call(e):t.get(e)),Me=(e,t,r)=>t.has(e)?uE("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),je=(e,t,r,n)=>(a0(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),We=(e,t,r)=>(a0(e,t,"access private method"),r);var Vh=(e,t,r,n)=>({set _(a){je(e,t,a,r)},get _(){return U(e,t,n)}});function gB(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();function Wa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Nle(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var i0={exports:{}},Ju={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dE;function yB(){if(dE)return Ju;dE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,s){var l=null;if(s!==void 0&&(l=""+s),a.key!==void 0&&(l=""+a.key),"key"in a){s={};for(var u in a)u!=="key"&&(s[u]=a[u])}else s=a;return a=s.ref,{$$typeof:e,type:n,key:l,ref:a!==void 0?a:null,props:s}}return Ju.Fragment=t,Ju.jsx=r,Ju.jsxs=r,Ju}var fE;function vB(){return fE||(fE=1,i0.exports=yB()),i0.exports}var c=vB(),s0={exports:{}},Qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hE;function bB(){if(hE)return Qe;hE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),y=Symbol.iterator;function v(D){return D===null||typeof D!="object"?null:(D=y&&D[y]||D["@@iterator"],typeof D=="function"?D:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,_={};function N(D,z,Y){this.props=D,this.context=z,this.refs=_,this.updater=Y||w}N.prototype.isReactComponent={},N.prototype.setState=function(D,z){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,z,"setState")},N.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function O(){}O.prototype=N.prototype;function E(D,z,Y){this.props=D,this.context=z,this.refs=_,this.updater=Y||w}var C=E.prototype=new O;C.constructor=E,x(C,N.prototype),C.isPureReactComponent=!0;var T=Array.isArray;function k(){}var M={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function L(D,z,Y){var q=Y.ref;return{$$typeof:e,type:D,key:z,ref:q!==void 0?q:null,props:Y}}function V(D,z){return L(D.type,z,D.props)}function G(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function K(D){var z={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Y){return z[Y]})}var fe=/\/+/g;function ge(D,z){return typeof D=="object"&&D!==null&&D.key!=null?K(""+D.key):z.toString(36)}function he(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(k,k):(D.status="pending",D.then(function(z){D.status==="pending"&&(D.status="fulfilled",D.value=z)},function(z){D.status==="pending"&&(D.status="rejected",D.reason=z)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function B(D,z,Y,q,pe){var ve=typeof D;(ve==="undefined"||ve==="boolean")&&(D=null);var me=!1;if(D===null)me=!0;else switch(ve){case"bigint":case"string":case"number":me=!0;break;case"object":switch(D.$$typeof){case e:case t:me=!0;break;case m:return me=D._init,B(me(D._payload),z,Y,q,pe)}}if(me)return pe=pe(D),me=q===""?"."+ge(D,0):q,T(pe)?(Y="",me!=null&&(Y=me.replace(fe,"$&/")+"/"),B(pe,z,Y,"",function(_e){return _e})):pe!=null&&(G(pe)&&(pe=V(pe,Y+(pe.key==null||D&&D.key===pe.key?"":(""+pe.key).replace(fe,"$&/")+"/")+me)),z.push(pe)),1;me=0;var Ee=q===""?".":q+":";if(T(D))for(var te=0;te<D.length;te++)q=D[te],ve=Ee+ge(q,te),me+=B(q,z,Y,ve,pe);else if(te=v(D),typeof te=="function")for(D=te.call(D),te=0;!(q=D.next()).done;)q=q.value,ve=Ee+ge(q,te++),me+=B(q,z,Y,ve,pe);else if(ve==="object"){if(typeof D.then=="function")return B(he(D),z,Y,q,pe);throw z=String(D),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return me}function Q(D,z,Y){if(D==null)return D;var q=[],pe=0;return B(D,q,"","",function(ve){return z.call(Y,ve,pe++)}),q}function ie(D){if(D._status===-1){var z=D._result;z=z(),z.then(function(Y){(D._status===0||D._status===-1)&&(D._status=1,D._result=Y)},function(Y){(D._status===0||D._status===-1)&&(D._status=2,D._result=Y)}),D._status===-1&&(D._status=0,D._result=z)}if(D._status===1)return D._result.default;throw D._result}var ue=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},I={map:Q,forEach:function(D,z,Y){Q(D,function(){z.apply(this,arguments)},Y)},count:function(D){var z=0;return Q(D,function(){z++}),z},toArray:function(D){return Q(D,function(z){return z})||[]},only:function(D){if(!G(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Qe.Activity=g,Qe.Children=I,Qe.Component=N,Qe.Fragment=r,Qe.Profiler=a,Qe.PureComponent=E,Qe.StrictMode=n,Qe.Suspense=f,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(D){return M.H.useMemoCache(D)}},Qe.cache=function(D){return function(){return D.apply(null,arguments)}},Qe.cacheSignal=function(){return null},Qe.cloneElement=function(D,z,Y){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var q=x({},D.props),pe=D.key;if(z!=null)for(ve in z.key!==void 0&&(pe=""+z.key),z)!R.call(z,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&z.ref===void 0||(q[ve]=z[ve]);var ve=arguments.length-2;if(ve===1)q.children=Y;else if(1<ve){for(var me=Array(ve),Ee=0;Ee<ve;Ee++)me[Ee]=arguments[Ee+2];q.children=me}return L(D.type,pe,q)},Qe.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:s,_context:D},D},Qe.createElement=function(D,z,Y){var q,pe={},ve=null;if(z!=null)for(q in z.key!==void 0&&(ve=""+z.key),z)R.call(z,q)&&q!=="key"&&q!=="__self"&&q!=="__source"&&(pe[q]=z[q]);var me=arguments.length-2;if(me===1)pe.children=Y;else if(1<me){for(var Ee=Array(me),te=0;te<me;te++)Ee[te]=arguments[te+2];pe.children=Ee}if(D&&D.defaultProps)for(q in me=D.defaultProps,me)pe[q]===void 0&&(pe[q]=me[q]);return L(D,ve,pe)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(D){return{$$typeof:u,render:D}},Qe.isValidElement=G,Qe.lazy=function(D){return{$$typeof:m,_payload:{_status:-1,_result:D},_init:ie}},Qe.memo=function(D,z){return{$$typeof:h,type:D,compare:z===void 0?null:z}},Qe.startTransition=function(D){var z=M.T,Y={};M.T=Y;try{var q=D(),pe=M.S;pe!==null&&pe(Y,q),typeof q=="object"&&q!==null&&typeof q.then=="function"&&q.then(k,ue)}catch(ve){ue(ve)}finally{z!==null&&Y.types!==null&&(z.types=Y.types),M.T=z}},Qe.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Qe.use=function(D){return M.H.use(D)},Qe.useActionState=function(D,z,Y){return M.H.useActionState(D,z,Y)},Qe.useCallback=function(D,z){return M.H.useCallback(D,z)},Qe.useContext=function(D){return M.H.useContext(D)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(D,z){return M.H.useDeferredValue(D,z)},Qe.useEffect=function(D,z){return M.H.useEffect(D,z)},Qe.useEffectEvent=function(D){return M.H.useEffectEvent(D)},Qe.useId=function(){return M.H.useId()},Qe.useImperativeHandle=function(D,z,Y){return M.H.useImperativeHandle(D,z,Y)},Qe.useInsertionEffect=function(D,z){return M.H.useInsertionEffect(D,z)},Qe.useLayoutEffect=function(D,z){return M.H.useLayoutEffect(D,z)},Qe.useMemo=function(D,z){return M.H.useMemo(D,z)},Qe.useOptimistic=function(D,z){return M.H.useOptimistic(D,z)},Qe.useReducer=function(D,z,Y){return M.H.useReducer(D,z,Y)},Qe.useRef=function(D){return M.H.useRef(D)},Qe.useState=function(D){return M.H.useState(D)},Qe.useSyncExternalStore=function(D,z,Y){return M.H.useSyncExternalStore(D,z,Y)},Qe.useTransition=function(){return M.H.useTransition()},Qe.version="19.2.4",Qe}var mE;function Kc(){return mE||(mE=1,s0.exports=bB()),s0.exports}var j=Kc();const Xe=Wa(j),xB=gB({__proto__:null,default:Xe},[j]);var o0={exports:{}},Zu={},l0={exports:{}},c0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pE;function wB(){return pE||(pE=1,(function(e){function t(B,Q){var ie=B.length;B.push(Q);e:for(;0<ie;){var ue=ie-1>>>1,I=B[ue];if(0<a(I,Q))B[ue]=Q,B[ie]=I,ie=ue;else break e}}function r(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var Q=B[0],ie=B.pop();if(ie!==Q){B[0]=ie;e:for(var ue=0,I=B.length,D=I>>>1;ue<D;){var z=2*(ue+1)-1,Y=B[z],q=z+1,pe=B[q];if(0>a(Y,ie))q<I&&0>a(pe,Y)?(B[ue]=pe,B[q]=ie,ue=q):(B[ue]=Y,B[z]=ie,ue=z);else if(q<I&&0>a(pe,ie))B[ue]=pe,B[q]=ie,ue=q;else break e}}return Q}function a(B,Q){var ie=B.sortIndex-Q.sortIndex;return ie!==0?ie:B.id-Q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var f=[],h=[],m=1,g=null,y=3,v=!1,w=!1,x=!1,_=!1,N=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function C(B){for(var Q=r(h);Q!==null;){if(Q.callback===null)n(h);else if(Q.startTime<=B)n(h),Q.sortIndex=Q.expirationTime,t(f,Q);else break;Q=r(h)}}function T(B){if(x=!1,C(B),!w)if(r(f)!==null)w=!0,k||(k=!0,K());else{var Q=r(h);Q!==null&&he(T,Q.startTime-B)}}var k=!1,M=-1,R=5,L=-1;function V(){return _?!0:!(e.unstable_now()-L<R)}function G(){if(_=!1,k){var B=e.unstable_now();L=B;var Q=!0;try{e:{w=!1,x&&(x=!1,O(M),M=-1),v=!0;var ie=y;try{t:{for(C(B),g=r(f);g!==null&&!(g.expirationTime>B&&V());){var ue=g.callback;if(typeof ue=="function"){g.callback=null,y=g.priorityLevel;var I=ue(g.expirationTime<=B);if(B=e.unstable_now(),typeof I=="function"){g.callback=I,C(B),Q=!0;break t}g===r(f)&&n(f),C(B)}else n(f);g=r(f)}if(g!==null)Q=!0;else{var D=r(h);D!==null&&he(T,D.startTime-B),Q=!1}}break e}finally{g=null,y=ie,v=!1}Q=void 0}}finally{Q?K():k=!1}}}var K;if(typeof E=="function")K=function(){E(G)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,ge=fe.port2;fe.port1.onmessage=G,K=function(){ge.postMessage(null)}}else K=function(){N(G,0)};function he(B,Q){M=N(function(){B(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(B){switch(y){case 1:case 2:case 3:var Q=3;break;default:Q=y}var ie=y;y=Q;try{return B()}finally{y=ie}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ie=y;y=B;try{return Q()}finally{y=ie}},e.unstable_scheduleCallback=function(B,Q,ie){var ue=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ue+ie:ue):ie=ue,B){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=ie+I,B={id:m++,callback:Q,priorityLevel:B,startTime:ie,expirationTime:I,sortIndex:-1},ie>ue?(B.sortIndex=ie,t(h,B),r(f)===null&&B===r(h)&&(x?(O(M),M=-1):x=!0,he(T,ie-ue))):(B.sortIndex=I,t(f,B),w||v||(w=!0,k||(k=!0,K()))),B},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(B){var Q=y;return function(){var ie=y;y=Q;try{return B.apply(this,arguments)}finally{y=ie}}}})(c0)),c0}var gE;function jB(){return gE||(gE=1,l0.exports=wB()),l0.exports}var u0={exports:{}},Gr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yE;function SB(){if(yE)return Gr;yE=1;var e=Kc();function t(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(f,h,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:g==null?null:""+g,children:f,containerInfo:h,implementation:m}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Gr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Gr.createPortal=function(f,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return s(f,h,null,m)},Gr.flushSync=function(f){var h=l.T,m=n.p;try{if(l.T=null,n.p=2,f)return f()}finally{l.T=h,n.p=m,n.d.f()}},Gr.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(f,h))},Gr.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},Gr.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var m=h.as,g=u(m,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?n.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:v}):m==="script"&&n.d.X(f,{crossOrigin:g,integrity:y,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Gr.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=u(h.as,h.crossOrigin);n.d.M(f,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(f)},Gr.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,g=u(m,h.crossOrigin);n.d.L(f,m,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Gr.preloadModule=function(f,h){if(typeof f=="string")if(h){var m=u(h.as,h.crossOrigin);n.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(f)},Gr.requestFormReset=function(f){n.d.r(f)},Gr.unstable_batchedUpdates=function(f,h){return f(h)},Gr.useFormState=function(f,h,m){return l.H.useFormState(f,h,m)},Gr.useFormStatus=function(){return l.H.useHostTransitionStatus()},Gr.version="19.2.4",Gr}var vE;function PT(){if(vE)return u0.exports;vE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),u0.exports=SB(),u0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bE;function _B(){if(bE)return Zu;bE=1;var e=jB(),t=Kc(),r=PT();function n(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)o+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function s(i){var o=i,d=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(d=o.return),i=o.return;while(i)}return o.tag===3?d:null}function l(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function u(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function f(i){if(s(i)!==i)throw Error(n(188))}function h(i){var o=i.alternate;if(!o){if(o=s(i),o===null)throw Error(n(188));return o!==i?null:i}for(var d=i,p=o;;){var b=d.return;if(b===null)break;var S=b.alternate;if(S===null){if(p=b.return,p!==null){d=p;continue}break}if(b.child===S.child){for(S=b.child;S;){if(S===d)return f(b),i;if(S===p)return f(b),o;S=S.sibling}throw Error(n(188))}if(d.return!==p.return)d=b,p=S;else{for(var A=!1,P=b.child;P;){if(P===d){A=!0,d=b,p=S;break}if(P===p){A=!0,p=b,d=S;break}P=P.sibling}if(!A){for(P=S.child;P;){if(P===d){A=!0,d=S,p=b;break}if(P===p){A=!0,p=S,d=b;break}P=P.sibling}if(!A)throw Error(n(189))}}if(d.alternate!==p)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?i:o}function m(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=m(i),o!==null)return o;i=i.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function K(i){return i===null||typeof i!="object"?null:(i=G&&i[G]||i["@@iterator"],typeof i=="function"?i:null)}var fe=Symbol.for("react.client.reference");function ge(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===fe?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case x:return"Fragment";case N:return"Profiler";case _:return"StrictMode";case T:return"Suspense";case k:return"SuspenseList";case L:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case w:return"Portal";case E:return i.displayName||"Context";case O:return(i._context.displayName||"Context")+".Consumer";case C:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return o=i.displayName||null,o!==null?o:ge(i.type)||"Memo";case R:o=i._payload,i=i._init;try{return ge(i(o))}catch{}}return null}var he=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},ue=[],I=-1;function D(i){return{current:i}}function z(i){0>I||(i.current=ue[I],ue[I]=null,I--)}function Y(i,o){I++,ue[I]=i.current,i.current=o}var q=D(null),pe=D(null),ve=D(null),me=D(null);function Ee(i,o){switch(Y(ve,o),Y(pe,i),Y(q,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?DO(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=DO(o),i=MO(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}z(q),Y(q,i)}function te(){z(q),z(pe),z(ve)}function _e(i){i.memoizedState!==null&&Y(me,i);var o=q.current,d=MO(o,i.type);o!==d&&(Y(pe,i),Y(q,d))}function De(i){pe.current===i&&(z(q),z(pe)),me.current===i&&(z(me),Gu._currentValue=ie)}var le,Fe;function Te(i){if(le===void 0)try{throw Error()}catch(d){var o=d.stack.trim().match(/\n( *(at )?)/);le=o&&o[1]||"",Fe=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+le+i+Fe}var Ze=!1;function gt(i,o){if(!i||Ze)return"";Ze=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(o){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(re){var ee=re}Reflect.construct(i,[],de)}else{try{de.call()}catch(re){ee=re}i.call(de.prototype)}}else{try{throw Error()}catch(re){ee=re}(de=i())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(re){if(re&&ee&&typeof re.stack=="string")return[re.stack,ee.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=p.DetermineComponentFrameRoot(),A=S[0],P=S[1];if(A&&P){var $=A.split(`
`),J=P.split(`
`);for(b=p=0;p<$.length&&!$[p].includes("DetermineComponentFrameRoot");)p++;for(;b<J.length&&!J[b].includes("DetermineComponentFrameRoot");)b++;if(p===$.length||b===J.length)for(p=$.length-1,b=J.length-1;1<=p&&0<=b&&$[p]!==J[b];)b--;for(;1<=p&&0<=b;p--,b--)if($[p]!==J[b]){if(p!==1||b!==1)do if(p--,b--,0>b||$[p]!==J[b]){var oe=`
`+$[p].replace(" at new "," at ");return i.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",i.displayName)),oe}while(1<=p&&0<=b);break}}}finally{Ze=!1,Error.prepareStackTrace=d}return(d=i?i.displayName||i.name:"")?Te(d):""}function qt(i,o){switch(i.tag){case 26:case 27:case 5:return Te(i.type);case 16:return Te("Lazy");case 13:return i.child!==o&&o!==null?Te("Suspense Fallback"):Te("Suspense");case 19:return Te("SuspenseList");case 0:case 15:return gt(i.type,!1);case 11:return gt(i.type.render,!1);case 1:return gt(i.type,!0);case 31:return Te("Activity");default:return""}}function tn(i){try{var o="",d=null;do o+=qt(i,d),d=i,i=i.return;while(i);return o}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var rn=Object.prototype.hasOwnProperty,ae=e.unstable_scheduleCallback,Z=e.unstable_cancelCallback,qe=e.unstable_shouldYield,Ke=e.unstable_requestPaint,ze=e.unstable_now,be=e.unstable_getCurrentPriorityLevel,nt=e.unstable_ImmediatePriority,yt=e.unstable_UserBlockingPriority,Ft=e.unstable_NormalPriority,Kt=e.unstable_LowPriority,Zt=e.unstable_IdlePriority,xe=e.log,wt=e.unstable_setDisableYieldValue,Mt=null,er=null;function Lr(i){if(typeof xe=="function"&&wt(i),er&&typeof er.setStrictMode=="function")try{er.setStrictMode(Mt,i)}catch{}}var nn=Math.clz32?Math.clz32:Tf,Kg=Math.log,hl=Math.LN2;function Tf(i){return i>>>=0,i===0?32:31-(Kg(i)/hl|0)|0}var ha=256,Xa=262144,Df=4194304;function Js(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Mf(i,o,d){var p=i.pendingLanes;if(p===0)return 0;var b=0,S=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var P=p&134217727;return P!==0?(p=P&~S,p!==0?b=Js(p):(A&=P,A!==0?b=Js(A):d||(d=P&~i,d!==0&&(b=Js(d))))):(P=p&~S,P!==0?b=Js(P):A!==0?b=Js(A):d||(d=p&~i,d!==0&&(b=Js(d)))),b===0?0:o!==0&&o!==b&&(o&S)===0&&(S=b&-b,d=o&-o,S>=d||S===32&&(d&4194048)!==0)?o:b}function ou(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function t3(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mS(){var i=Df;return Df<<=1,(Df&62914560)===0&&(Df=4194304),i}function Qg(i){for(var o=[],d=0;31>d;d++)o.push(i);return o}function lu(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function r3(i,o,d,p,b,S){var A=i.pendingLanes;i.pendingLanes=d,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=d,i.entangledLanes&=d,i.errorRecoveryDisabledLanes&=d,i.shellSuspendCounter=0;var P=i.entanglements,$=i.expirationTimes,J=i.hiddenUpdates;for(d=A&~d;0<d;){var oe=31-nn(d),de=1<<oe;P[oe]=0,$[oe]=-1;var ee=J[oe];if(ee!==null)for(J[oe]=null,oe=0;oe<ee.length;oe++){var re=ee[oe];re!==null&&(re.lane&=-536870913)}d&=~de}p!==0&&pS(i,p,0),S!==0&&b===0&&i.tag!==0&&(i.suspendedLanes|=S&~(A&~o))}function pS(i,o,d){i.pendingLanes|=o,i.suspendedLanes&=~o;var p=31-nn(o);i.entangledLanes|=o,i.entanglements[p]=i.entanglements[p]|1073741824|d&261930}function gS(i,o){var d=i.entangledLanes|=o;for(i=i.entanglements;d;){var p=31-nn(d),b=1<<p;b&o|i[p]&o&&(i[p]|=o),d&=~b}}function yS(i,o){var d=o&-o;return d=(d&42)!==0?1:Hg(d),(d&(i.suspendedLanes|o))!==0?0:d}function Hg(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Vg(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function vS(){var i=Q.p;return i!==0?i:(i=window.event,i===void 0?32:nE(i.type))}function bS(i,o){var d=Q.p;try{return Q.p=i,o()}finally{Q.p=d}}var Yi=Math.random().toString(36).slice(2),Br="__reactFiber$"+Yi,fn="__reactProps$"+Yi,ml="__reactContainer$"+Yi,Gg="__reactEvents$"+Yi,n3="__reactListeners$"+Yi,a3="__reactHandles$"+Yi,xS="__reactResources$"+Yi,cu="__reactMarker$"+Yi;function Wg(i){delete i[Br],delete i[fn],delete i[Gg],delete i[n3],delete i[a3]}function pl(i){var o=i[Br];if(o)return o;for(var d=i.parentNode;d;){if(o=d[ml]||d[Br]){if(d=o.alternate,o.child!==null||d!==null&&d.child!==null)for(i=zO(i);i!==null;){if(d=i[Br])return d;i=zO(i)}return o}i=d,d=i.parentNode}return null}function gl(i){if(i=i[Br]||i[ml]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function uu(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(n(33))}function yl(i){var o=i[xS];return o||(o=i[xS]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Er(i){i[cu]=!0}var wS=new Set,jS={};function Zs(i,o){vl(i,o),vl(i+"Capture",o)}function vl(i,o){for(jS[i]=o,i=0;i<o.length;i++)wS.add(o[i])}var i3=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),SS={},_S={};function s3(i){return rn.call(_S,i)?!0:rn.call(SS,i)?!1:i3.test(i)?_S[i]=!0:(SS[i]=!0,!1)}function Rf(i,o,d){if(s3(o))if(d===null)i.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var p=o.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+d)}}function If(i,o,d){if(d===null)i.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+d)}}function Ja(i,o,d,p){if(p===null)i.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(d);return}i.setAttributeNS(o,d,""+p)}}function Qn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function NS(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function o3(i,o,d){var p=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var b=p.get,S=p.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return b.call(this)},set:function(A){d=""+A,S.call(this,A)}}),Object.defineProperty(i,o,{enumerable:p.enumerable}),{getValue:function(){return d},setValue:function(A){d=""+A},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Yg(i){if(!i._valueTracker){var o=NS(i)?"checked":"value";i._valueTracker=o3(i,o,""+i[o])}}function OS(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var d=o.getValue(),p="";return i&&(p=NS(i)?i.checked?"true":"false":i.value),i=p,i!==d?(o.setValue(i),!0):!1}function Lf(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var l3=/[\n"\\]/g;function Hn(i){return i.replace(l3,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Xg(i,o,d,p,b,S,A,P){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),o!=null?A==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Qn(o)):i.value!==""+Qn(o)&&(i.value=""+Qn(o)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),o!=null?Jg(i,A,Qn(o)):d!=null?Jg(i,A,Qn(d)):p!=null&&i.removeAttribute("value"),b==null&&S!=null&&(i.defaultChecked=!!S),b!=null&&(i.checked=b&&typeof b!="function"&&typeof b!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?i.name=""+Qn(P):i.removeAttribute("name")}function ES(i,o,d,p,b,S,A,P){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.type=S),o!=null||d!=null){if(!(S!=="submit"&&S!=="reset"||o!=null)){Yg(i);return}d=d!=null?""+Qn(d):"",o=o!=null?""+Qn(o):d,P||o===i.value||(i.value=o),i.defaultValue=o}p=p??b,p=typeof p!="function"&&typeof p!="symbol"&&!!p,i.checked=P?i.checked:!!p,i.defaultChecked=!!p,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),Yg(i)}function Jg(i,o,d){o==="number"&&Lf(i.ownerDocument)===i||i.defaultValue===""+d||(i.defaultValue=""+d)}function bl(i,o,d,p){if(i=i.options,o){o={};for(var b=0;b<d.length;b++)o["$"+d[b]]=!0;for(d=0;d<i.length;d++)b=o.hasOwnProperty("$"+i[d].value),i[d].selected!==b&&(i[d].selected=b),b&&p&&(i[d].defaultSelected=!0)}else{for(d=""+Qn(d),o=null,b=0;b<i.length;b++){if(i[b].value===d){i[b].selected=!0,p&&(i[b].defaultSelected=!0);return}o!==null||i[b].disabled||(o=i[b])}o!==null&&(o.selected=!0)}}function AS(i,o,d){if(o!=null&&(o=""+Qn(o),o!==i.value&&(i.value=o),d==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=d!=null?""+Qn(d):""}function CS(i,o,d,p){if(o==null){if(p!=null){if(d!=null)throw Error(n(92));if(he(p)){if(1<p.length)throw Error(n(93));p=p[0]}d=p}d==null&&(d=""),o=d}d=Qn(o),i.defaultValue=d,p=i.textContent,p===d&&p!==""&&p!==null&&(i.value=p),Yg(i)}function xl(i,o){if(o){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=o;return}}i.textContent=o}var c3=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kS(i,o,d){var p=o.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?p?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":p?i.setProperty(o,d):typeof d!="number"||d===0||c3.has(o)?o==="float"?i.cssFloat=d:i[o]=(""+d).trim():i[o]=d+"px"}function PS(i,o,d){if(o!=null&&typeof o!="object")throw Error(n(62));if(i=i.style,d!=null){for(var p in d)!d.hasOwnProperty(p)||o!=null&&o.hasOwnProperty(p)||(p.indexOf("--")===0?i.setProperty(p,""):p==="float"?i.cssFloat="":i[p]="");for(var b in o)p=o[b],o.hasOwnProperty(b)&&d[b]!==p&&kS(i,b,p)}else for(var S in o)o.hasOwnProperty(S)&&kS(i,S,o[S])}function Zg(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var u3=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),d3=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bf(i){return d3.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Za(){}var ey=null;function ty(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var wl=null,jl=null;function TS(i){var o=gl(i);if(o&&(i=o.stateNode)){var d=i[fn]||null;e:switch(i=o.stateNode,o.type){case"input":if(Xg(i,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),o=d.name,d.type==="radio"&&o!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Hn(""+o)+'"][type="radio"]'),o=0;o<d.length;o++){var p=d[o];if(p!==i&&p.form===i.form){var b=p[fn]||null;if(!b)throw Error(n(90));Xg(p,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(o=0;o<d.length;o++)p=d[o],p.form===i.form&&OS(p)}break e;case"textarea":AS(i,d.value,d.defaultValue);break e;case"select":o=d.value,o!=null&&bl(i,!!d.multiple,o,!1)}}}var ry=!1;function DS(i,o,d){if(ry)return i(o,d);ry=!0;try{var p=i(o);return p}finally{if(ry=!1,(wl!==null||jl!==null)&&(Nh(),wl&&(o=wl,i=jl,jl=wl=null,TS(o),i)))for(o=0;o<i.length;o++)TS(i[o])}}function du(i,o){var d=i.stateNode;if(d===null)return null;var p=d[fn]||null;if(p===null)return null;d=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(n(231,o,typeof d));return d}var ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ny=!1;if(ei)try{var fu={};Object.defineProperty(fu,"passive",{get:function(){ny=!0}}),window.addEventListener("test",fu,fu),window.removeEventListener("test",fu,fu)}catch{ny=!1}var Xi=null,ay=null,$f=null;function MS(){if($f)return $f;var i,o=ay,d=o.length,p,b="value"in Xi?Xi.value:Xi.textContent,S=b.length;for(i=0;i<d&&o[i]===b[i];i++);var A=d-i;for(p=1;p<=A&&o[d-p]===b[S-p];p++);return $f=b.slice(i,1<p?1-p:void 0)}function Uf(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function zf(){return!0}function RS(){return!1}function hn(i){function o(d,p,b,S,A){this._reactName=d,this._targetInst=b,this.type=p,this.nativeEvent=S,this.target=A,this.currentTarget=null;for(var P in i)i.hasOwnProperty(P)&&(d=i[P],this[P]=d?d(S):S[P]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?zf:RS,this.isPropagationStopped=RS,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=zf)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=zf)},persist:function(){},isPersistent:zf}),o}var eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qf=hn(eo),hu=g({},eo,{view:0,detail:0}),f3=hn(hu),iy,sy,mu,Ff=g({},hu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ly,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==mu&&(mu&&i.type==="mousemove"?(iy=i.screenX-mu.screenX,sy=i.screenY-mu.screenY):sy=iy=0,mu=i),iy)},movementY:function(i){return"movementY"in i?i.movementY:sy}}),IS=hn(Ff),h3=g({},Ff,{dataTransfer:0}),m3=hn(h3),p3=g({},hu,{relatedTarget:0}),oy=hn(p3),g3=g({},eo,{animationName:0,elapsedTime:0,pseudoElement:0}),y3=hn(g3),v3=g({},eo,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),b3=hn(v3),x3=g({},eo,{data:0}),LS=hn(x3),w3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},j3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},S3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _3(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=S3[i])?!!o[i]:!1}function ly(){return _3}var N3=g({},hu,{key:function(i){if(i.key){var o=w3[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Uf(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?j3[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ly,charCode:function(i){return i.type==="keypress"?Uf(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Uf(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),O3=hn(N3),E3=g({},Ff,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),BS=hn(E3),A3=g({},hu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ly}),C3=hn(A3),k3=g({},eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),P3=hn(k3),T3=g({},Ff,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),D3=hn(T3),M3=g({},eo,{newState:0,oldState:0}),R3=hn(M3),I3=[9,13,27,32],cy=ei&&"CompositionEvent"in window,pu=null;ei&&"documentMode"in document&&(pu=document.documentMode);var L3=ei&&"TextEvent"in window&&!pu,$S=ei&&(!cy||pu&&8<pu&&11>=pu),US=" ",zS=!1;function qS(i,o){switch(i){case"keyup":return I3.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function FS(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Sl=!1;function B3(i,o){switch(i){case"compositionend":return FS(o);case"keypress":return o.which!==32?null:(zS=!0,US);case"textInput":return i=o.data,i===US&&zS?null:i;default:return null}}function $3(i,o){if(Sl)return i==="compositionend"||!cy&&qS(i,o)?(i=MS(),$f=ay=Xi=null,Sl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return $S&&o.locale!=="ko"?null:o.data;default:return null}}var U3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function KS(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!U3[i.type]:o==="textarea"}function QS(i,o,d,p){wl?jl?jl.push(p):jl=[p]:wl=p,o=Th(o,"onChange"),0<o.length&&(d=new qf("onChange","change",null,d,p),i.push({event:d,listeners:o}))}var gu=null,yu=null;function z3(i){EO(i,0)}function Kf(i){var o=uu(i);if(OS(o))return i}function HS(i,o){if(i==="change")return o}var VS=!1;if(ei){var uy;if(ei){var dy="oninput"in document;if(!dy){var GS=document.createElement("div");GS.setAttribute("oninput","return;"),dy=typeof GS.oninput=="function"}uy=dy}else uy=!1;VS=uy&&(!document.documentMode||9<document.documentMode)}function WS(){gu&&(gu.detachEvent("onpropertychange",YS),yu=gu=null)}function YS(i){if(i.propertyName==="value"&&Kf(yu)){var o=[];QS(o,yu,i,ty(i)),DS(z3,o)}}function q3(i,o,d){i==="focusin"?(WS(),gu=o,yu=d,gu.attachEvent("onpropertychange",YS)):i==="focusout"&&WS()}function F3(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Kf(yu)}function K3(i,o){if(i==="click")return Kf(o)}function Q3(i,o){if(i==="input"||i==="change")return Kf(o)}function H3(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var En=typeof Object.is=="function"?Object.is:H3;function vu(i,o){if(En(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var d=Object.keys(i),p=Object.keys(o);if(d.length!==p.length)return!1;for(p=0;p<d.length;p++){var b=d[p];if(!rn.call(o,b)||!En(i[b],o[b]))return!1}return!0}function XS(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function JS(i,o){var d=XS(i);i=0;for(var p;d;){if(d.nodeType===3){if(p=i+d.textContent.length,i<=o&&p>=o)return{node:d,offset:o-i};i=p}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=XS(d)}}function ZS(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?ZS(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function e_(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Lf(i.document);o instanceof i.HTMLIFrameElement;){try{var d=typeof o.contentWindow.location.href=="string"}catch{d=!1}if(d)i=o.contentWindow;else break;o=Lf(i.document)}return o}function fy(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var V3=ei&&"documentMode"in document&&11>=document.documentMode,_l=null,hy=null,bu=null,my=!1;function t_(i,o,d){var p=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;my||_l==null||_l!==Lf(p)||(p=_l,"selectionStart"in p&&fy(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),bu&&vu(bu,p)||(bu=p,p=Th(hy,"onSelect"),0<p.length&&(o=new qf("onSelect","select",null,o,d),i.push({event:o,listeners:p}),o.target=_l)))}function to(i,o){var d={};return d[i.toLowerCase()]=o.toLowerCase(),d["Webkit"+i]="webkit"+o,d["Moz"+i]="moz"+o,d}var Nl={animationend:to("Animation","AnimationEnd"),animationiteration:to("Animation","AnimationIteration"),animationstart:to("Animation","AnimationStart"),transitionrun:to("Transition","TransitionRun"),transitionstart:to("Transition","TransitionStart"),transitioncancel:to("Transition","TransitionCancel"),transitionend:to("Transition","TransitionEnd")},py={},r_={};ei&&(r_=document.createElement("div").style,"AnimationEvent"in window||(delete Nl.animationend.animation,delete Nl.animationiteration.animation,delete Nl.animationstart.animation),"TransitionEvent"in window||delete Nl.transitionend.transition);function ro(i){if(py[i])return py[i];if(!Nl[i])return i;var o=Nl[i],d;for(d in o)if(o.hasOwnProperty(d)&&d in r_)return py[i]=o[d];return i}var n_=ro("animationend"),a_=ro("animationiteration"),i_=ro("animationstart"),G3=ro("transitionrun"),W3=ro("transitionstart"),Y3=ro("transitioncancel"),s_=ro("transitionend"),o_=new Map,gy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gy.push("scrollEnd");function ma(i,o){o_.set(i,o),Zs(o,[i])}var Qf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Vn=[],Ol=0,yy=0;function Hf(){for(var i=Ol,o=yy=Ol=0;o<i;){var d=Vn[o];Vn[o++]=null;var p=Vn[o];Vn[o++]=null;var b=Vn[o];Vn[o++]=null;var S=Vn[o];if(Vn[o++]=null,p!==null&&b!==null){var A=p.pending;A===null?b.next=b:(b.next=A.next,A.next=b),p.pending=b}S!==0&&l_(d,b,S)}}function Vf(i,o,d,p){Vn[Ol++]=i,Vn[Ol++]=o,Vn[Ol++]=d,Vn[Ol++]=p,yy|=p,i.lanes|=p,i=i.alternate,i!==null&&(i.lanes|=p)}function vy(i,o,d,p){return Vf(i,o,d,p),Gf(i)}function no(i,o){return Vf(i,null,null,o),Gf(i)}function l_(i,o,d){i.lanes|=d;var p=i.alternate;p!==null&&(p.lanes|=d);for(var b=!1,S=i.return;S!==null;)S.childLanes|=d,p=S.alternate,p!==null&&(p.childLanes|=d),S.tag===22&&(i=S.stateNode,i===null||i._visibility&1||(b=!0)),i=S,S=S.return;return i.tag===3?(S=i.stateNode,b&&o!==null&&(b=31-nn(d),i=S.hiddenUpdates,p=i[b],p===null?i[b]=[o]:p.push(o),o.lane=d|536870912),S):null}function Gf(i){if(50<zu)throw zu=0,Ev=null,Error(n(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var El={};function X3(i,o,d,p){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(i,o,d,p){return new X3(i,o,d,p)}function by(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ti(i,o){var d=i.alternate;return d===null?(d=An(i.tag,o,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=o,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&65011712,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,o=i.dependencies,d.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d.refCleanup=i.refCleanup,d}function c_(i,o){i.flags&=65011714;var d=i.alternate;return d===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=d.childLanes,i.lanes=d.lanes,i.child=d.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=d.memoizedProps,i.memoizedState=d.memoizedState,i.updateQueue=d.updateQueue,i.type=d.type,o=d.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function Wf(i,o,d,p,b,S){var A=0;if(p=i,typeof i=="function")by(i)&&(A=1);else if(typeof i=="string")A=rB(i,d,q.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case L:return i=An(31,d,o,b),i.elementType=L,i.lanes=S,i;case x:return ao(d.children,b,S,o);case _:A=8,b|=24;break;case N:return i=An(12,d,o,b|2),i.elementType=N,i.lanes=S,i;case T:return i=An(13,d,o,b),i.elementType=T,i.lanes=S,i;case k:return i=An(19,d,o,b),i.elementType=k,i.lanes=S,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case E:A=10;break e;case O:A=9;break e;case C:A=11;break e;case M:A=14;break e;case R:A=16,p=null;break e}A=29,d=Error(n(130,i===null?"null":typeof i,"")),p=null}return o=An(A,d,o,b),o.elementType=i,o.type=p,o.lanes=S,o}function ao(i,o,d,p){return i=An(7,i,p,o),i.lanes=d,i}function xy(i,o,d){return i=An(6,i,null,o),i.lanes=d,i}function u_(i){var o=An(18,null,null,0);return o.stateNode=i,o}function wy(i,o,d){return o=An(4,i.children!==null?i.children:[],i.key,o),o.lanes=d,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var d_=new WeakMap;function Gn(i,o){if(typeof i=="object"&&i!==null){var d=d_.get(i);return d!==void 0?d:(o={value:i,source:o,stack:tn(o)},d_.set(i,o),o)}return{value:i,source:o,stack:tn(o)}}var Al=[],Cl=0,Yf=null,xu=0,Wn=[],Yn=0,Ji=null,ka=1,Pa="";function ri(i,o){Al[Cl++]=xu,Al[Cl++]=Yf,Yf=i,xu=o}function f_(i,o,d){Wn[Yn++]=ka,Wn[Yn++]=Pa,Wn[Yn++]=Ji,Ji=i;var p=ka;i=Pa;var b=32-nn(p)-1;p&=~(1<<b),d+=1;var S=32-nn(o)+b;if(30<S){var A=b-b%5;S=(p&(1<<A)-1).toString(32),p>>=A,b-=A,ka=1<<32-nn(o)+b|d<<b|p,Pa=S+i}else ka=1<<S|d<<b|p,Pa=i}function jy(i){i.return!==null&&(ri(i,1),f_(i,1,0))}function Sy(i){for(;i===Yf;)Yf=Al[--Cl],Al[Cl]=null,xu=Al[--Cl],Al[Cl]=null;for(;i===Ji;)Ji=Wn[--Yn],Wn[Yn]=null,Pa=Wn[--Yn],Wn[Yn]=null,ka=Wn[--Yn],Wn[Yn]=null}function h_(i,o){Wn[Yn++]=ka,Wn[Yn++]=Pa,Wn[Yn++]=Ji,ka=o.id,Pa=o.overflow,Ji=i}var $r=null,Bt=null,st=!1,Zi=null,Xn=!1,_y=Error(n(519));function es(i){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw wu(Gn(o,i)),_y}function m_(i){var o=i.stateNode,d=i.type,p=i.memoizedProps;switch(o[Br]=i,o[fn]=p,d){case"dialog":tt("cancel",o),tt("close",o);break;case"iframe":case"object":case"embed":tt("load",o);break;case"video":case"audio":for(d=0;d<Fu.length;d++)tt(Fu[d],o);break;case"source":tt("error",o);break;case"img":case"image":case"link":tt("error",o),tt("load",o);break;case"details":tt("toggle",o);break;case"input":tt("invalid",o),ES(o,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":tt("invalid",o);break;case"textarea":tt("invalid",o),CS(o,p.value,p.defaultValue,p.children)}d=p.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||o.textContent===""+d||p.suppressHydrationWarning===!0||PO(o.textContent,d)?(p.popover!=null&&(tt("beforetoggle",o),tt("toggle",o)),p.onScroll!=null&&tt("scroll",o),p.onScrollEnd!=null&&tt("scrollend",o),p.onClick!=null&&(o.onclick=Za),o=!0):o=!1,o||es(i,!0)}function p_(i){for($r=i.return;$r;)switch($r.tag){case 5:case 31:case 13:Xn=!1;return;case 27:case 3:Xn=!0;return;default:$r=$r.return}}function kl(i){if(i!==$r)return!1;if(!st)return p_(i),st=!0,!1;var o=i.tag,d;if((d=o!==3&&o!==27)&&((d=o===5)&&(d=i.type,d=!(d!=="form"&&d!=="button")||qv(i.type,i.memoizedProps)),d=!d),d&&Bt&&es(i),p_(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Bt=UO(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Bt=UO(i)}else o===27?(o=Bt,ms(i.type)?(i=Vv,Vv=null,Bt=i):Bt=o):Bt=$r?Zn(i.stateNode.nextSibling):null;return!0}function io(){Bt=$r=null,st=!1}function Ny(){var i=Zi;return i!==null&&(yn===null?yn=i:yn.push.apply(yn,i),Zi=null),i}function wu(i){Zi===null?Zi=[i]:Zi.push(i)}var Oy=D(null),so=null,ni=null;function ts(i,o,d){Y(Oy,o._currentValue),o._currentValue=d}function ai(i){i._currentValue=Oy.current,z(Oy)}function Ey(i,o,d){for(;i!==null;){var p=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),i===d)break;i=i.return}}function Ay(i,o,d,p){var b=i.child;for(b!==null&&(b.return=i);b!==null;){var S=b.dependencies;if(S!==null){var A=b.child;S=S.firstContext;e:for(;S!==null;){var P=S;S=b;for(var $=0;$<o.length;$++)if(P.context===o[$]){S.lanes|=d,P=S.alternate,P!==null&&(P.lanes|=d),Ey(S.return,d,i),p||(A=null);break e}S=P.next}}else if(b.tag===18){if(A=b.return,A===null)throw Error(n(341));A.lanes|=d,S=A.alternate,S!==null&&(S.lanes|=d),Ey(A,d,i),A=null}else A=b.child;if(A!==null)A.return=b;else for(A=b;A!==null;){if(A===i){A=null;break}if(b=A.sibling,b!==null){b.return=A.return,A=b;break}A=A.return}b=A}}function Pl(i,o,d,p){i=null;for(var b=o,S=!1;b!==null;){if(!S){if((b.flags&524288)!==0)S=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var A=b.alternate;if(A===null)throw Error(n(387));if(A=A.memoizedProps,A!==null){var P=b.type;En(b.pendingProps.value,A.value)||(i!==null?i.push(P):i=[P])}}else if(b===me.current){if(A=b.alternate,A===null)throw Error(n(387));A.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(i!==null?i.push(Gu):i=[Gu])}b=b.return}i!==null&&Ay(o,i,d,p),o.flags|=262144}function Xf(i){for(i=i.firstContext;i!==null;){if(!En(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function oo(i){so=i,ni=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Ur(i){return g_(so,i)}function Jf(i,o){return so===null&&oo(i),g_(i,o)}function g_(i,o){var d=o._currentValue;if(o={context:o,memoizedValue:d,next:null},ni===null){if(i===null)throw Error(n(308));ni=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else ni=ni.next=o;return d}var J3=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(d,p){i.push(p)}};this.abort=function(){o.aborted=!0,i.forEach(function(d){return d()})}},Z3=e.unstable_scheduleCallback,eL=e.unstable_NormalPriority,dr={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cy(){return{controller:new J3,data:new Map,refCount:0}}function ju(i){i.refCount--,i.refCount===0&&Z3(eL,function(){i.controller.abort()})}var Su=null,ky=0,Tl=0,Dl=null;function tL(i,o){if(Su===null){var d=Su=[];ky=0,Tl=Dv(),Dl={status:"pending",value:void 0,then:function(p){d.push(p)}}}return ky++,o.then(y_,y_),o}function y_(){if(--ky===0&&Su!==null){Dl!==null&&(Dl.status="fulfilled");var i=Su;Su=null,Tl=0,Dl=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function rL(i,o){var d=[],p={status:"pending",value:null,reason:null,then:function(b){d.push(b)}};return i.then(function(){p.status="fulfilled",p.value=o;for(var b=0;b<d.length;b++)(0,d[b])(o)},function(b){for(p.status="rejected",p.reason=b,b=0;b<d.length;b++)(0,d[b])(void 0)}),p}var v_=B.S;B.S=function(i,o){tO=ze(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&tL(i,o),v_!==null&&v_(i,o)};var lo=D(null);function Py(){var i=lo.current;return i!==null?i:Tt.pooledCache}function Zf(i,o){o===null?Y(lo,lo.current):Y(lo,o.pool)}function b_(){var i=Py();return i===null?null:{parent:dr._currentValue,pool:i}}var Ml=Error(n(460)),Ty=Error(n(474)),eh=Error(n(542)),th={then:function(){}};function x_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function w_(i,o,d){switch(d=i[d],d===void 0?i.push(o):d!==o&&(o.then(Za,Za),o=d),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,S_(i),i;default:if(typeof o.status=="string")o.then(Za,Za);else{if(i=Tt,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=o,i.status="pending",i.then(function(p){if(o.status==="pending"){var b=o;b.status="fulfilled",b.value=p}},function(p){if(o.status==="pending"){var b=o;b.status="rejected",b.reason=p}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,S_(i),i}throw uo=o,Ml}}function co(i){try{var o=i._init;return o(i._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(uo=d,Ml):d}}var uo=null;function j_(){if(uo===null)throw Error(n(459));var i=uo;return uo=null,i}function S_(i){if(i===Ml||i===eh)throw Error(n(483))}var Rl=null,_u=0;function rh(i){var o=_u;return _u+=1,Rl===null&&(Rl=[]),w_(Rl,i,o)}function Nu(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function nh(i,o){throw o.$$typeof===y?Error(n(525)):(i=Object.prototype.toString.call(o),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function __(i){function o(H,F){if(i){var X=H.deletions;X===null?(H.deletions=[F],H.flags|=16):X.push(F)}}function d(H,F){if(!i)return null;for(;F!==null;)o(H,F),F=F.sibling;return null}function p(H){for(var F=new Map;H!==null;)H.key!==null?F.set(H.key,H):F.set(H.index,H),H=H.sibling;return F}function b(H,F){return H=ti(H,F),H.index=0,H.sibling=null,H}function S(H,F,X){return H.index=X,i?(X=H.alternate,X!==null?(X=X.index,X<F?(H.flags|=67108866,F):X):(H.flags|=67108866,F)):(H.flags|=1048576,F)}function A(H){return i&&H.alternate===null&&(H.flags|=67108866),H}function P(H,F,X,ce){return F===null||F.tag!==6?(F=xy(X,H.mode,ce),F.return=H,F):(F=b(F,X),F.return=H,F)}function $(H,F,X,ce){var Ie=X.type;return Ie===x?oe(H,F,X.props.children,ce,X.key):F!==null&&(F.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===R&&co(Ie)===F.type)?(F=b(F,X.props),Nu(F,X),F.return=H,F):(F=Wf(X.type,X.key,X.props,null,H.mode,ce),Nu(F,X),F.return=H,F)}function J(H,F,X,ce){return F===null||F.tag!==4||F.stateNode.containerInfo!==X.containerInfo||F.stateNode.implementation!==X.implementation?(F=wy(X,H.mode,ce),F.return=H,F):(F=b(F,X.children||[]),F.return=H,F)}function oe(H,F,X,ce,Ie){return F===null||F.tag!==7?(F=ao(X,H.mode,ce,Ie),F.return=H,F):(F=b(F,X),F.return=H,F)}function de(H,F,X){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=xy(""+F,H.mode,X),F.return=H,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case v:return X=Wf(F.type,F.key,F.props,null,H.mode,X),Nu(X,F),X.return=H,X;case w:return F=wy(F,H.mode,X),F.return=H,F;case R:return F=co(F),de(H,F,X)}if(he(F)||K(F))return F=ao(F,H.mode,X,null),F.return=H,F;if(typeof F.then=="function")return de(H,rh(F),X);if(F.$$typeof===E)return de(H,Jf(H,F),X);nh(H,F)}return null}function ee(H,F,X,ce){var Ie=F!==null?F.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Ie!==null?null:P(H,F,""+X,ce);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case v:return X.key===Ie?$(H,F,X,ce):null;case w:return X.key===Ie?J(H,F,X,ce):null;case R:return X=co(X),ee(H,F,X,ce)}if(he(X)||K(X))return Ie!==null?null:oe(H,F,X,ce,null);if(typeof X.then=="function")return ee(H,F,rh(X),ce);if(X.$$typeof===E)return ee(H,F,Jf(H,X),ce);nh(H,X)}return null}function re(H,F,X,ce,Ie){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return H=H.get(X)||null,P(F,H,""+ce,Ie);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case v:return H=H.get(ce.key===null?X:ce.key)||null,$(F,H,ce,Ie);case w:return H=H.get(ce.key===null?X:ce.key)||null,J(F,H,ce,Ie);case R:return ce=co(ce),re(H,F,X,ce,Ie)}if(he(ce)||K(ce))return H=H.get(X)||null,oe(F,H,ce,Ie,null);if(typeof ce.then=="function")return re(H,F,X,rh(ce),Ie);if(ce.$$typeof===E)return re(H,F,X,Jf(F,ce),Ie);nh(F,ce)}return null}function Ae(H,F,X,ce){for(var Ie=null,ut=null,ke=F,Ge=F=0,it=null;ke!==null&&Ge<X.length;Ge++){ke.index>Ge?(it=ke,ke=null):it=ke.sibling;var dt=ee(H,ke,X[Ge],ce);if(dt===null){ke===null&&(ke=it);break}i&&ke&&dt.alternate===null&&o(H,ke),F=S(dt,F,Ge),ut===null?Ie=dt:ut.sibling=dt,ut=dt,ke=it}if(Ge===X.length)return d(H,ke),st&&ri(H,Ge),Ie;if(ke===null){for(;Ge<X.length;Ge++)ke=de(H,X[Ge],ce),ke!==null&&(F=S(ke,F,Ge),ut===null?Ie=ke:ut.sibling=ke,ut=ke);return st&&ri(H,Ge),Ie}for(ke=p(ke);Ge<X.length;Ge++)it=re(ke,H,Ge,X[Ge],ce),it!==null&&(i&&it.alternate!==null&&ke.delete(it.key===null?Ge:it.key),F=S(it,F,Ge),ut===null?Ie=it:ut.sibling=it,ut=it);return i&&ke.forEach(function(bs){return o(H,bs)}),st&&ri(H,Ge),Ie}function Be(H,F,X,ce){if(X==null)throw Error(n(151));for(var Ie=null,ut=null,ke=F,Ge=F=0,it=null,dt=X.next();ke!==null&&!dt.done;Ge++,dt=X.next()){ke.index>Ge?(it=ke,ke=null):it=ke.sibling;var bs=ee(H,ke,dt.value,ce);if(bs===null){ke===null&&(ke=it);break}i&&ke&&bs.alternate===null&&o(H,ke),F=S(bs,F,Ge),ut===null?Ie=bs:ut.sibling=bs,ut=bs,ke=it}if(dt.done)return d(H,ke),st&&ri(H,Ge),Ie;if(ke===null){for(;!dt.done;Ge++,dt=X.next())dt=de(H,dt.value,ce),dt!==null&&(F=S(dt,F,Ge),ut===null?Ie=dt:ut.sibling=dt,ut=dt);return st&&ri(H,Ge),Ie}for(ke=p(ke);!dt.done;Ge++,dt=X.next())dt=re(ke,H,Ge,dt.value,ce),dt!==null&&(i&&dt.alternate!==null&&ke.delete(dt.key===null?Ge:dt.key),F=S(dt,F,Ge),ut===null?Ie=dt:ut.sibling=dt,ut=dt);return i&&ke.forEach(function(hB){return o(H,hB)}),st&&ri(H,Ge),Ie}function At(H,F,X,ce){if(typeof X=="object"&&X!==null&&X.type===x&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case v:e:{for(var Ie=X.key;F!==null;){if(F.key===Ie){if(Ie=X.type,Ie===x){if(F.tag===7){d(H,F.sibling),ce=b(F,X.props.children),ce.return=H,H=ce;break e}}else if(F.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===R&&co(Ie)===F.type){d(H,F.sibling),ce=b(F,X.props),Nu(ce,X),ce.return=H,H=ce;break e}d(H,F);break}else o(H,F);F=F.sibling}X.type===x?(ce=ao(X.props.children,H.mode,ce,X.key),ce.return=H,H=ce):(ce=Wf(X.type,X.key,X.props,null,H.mode,ce),Nu(ce,X),ce.return=H,H=ce)}return A(H);case w:e:{for(Ie=X.key;F!==null;){if(F.key===Ie)if(F.tag===4&&F.stateNode.containerInfo===X.containerInfo&&F.stateNode.implementation===X.implementation){d(H,F.sibling),ce=b(F,X.children||[]),ce.return=H,H=ce;break e}else{d(H,F);break}else o(H,F);F=F.sibling}ce=wy(X,H.mode,ce),ce.return=H,H=ce}return A(H);case R:return X=co(X),At(H,F,X,ce)}if(he(X))return Ae(H,F,X,ce);if(K(X)){if(Ie=K(X),typeof Ie!="function")throw Error(n(150));return X=Ie.call(X),Be(H,F,X,ce)}if(typeof X.then=="function")return At(H,F,rh(X),ce);if(X.$$typeof===E)return At(H,F,Jf(H,X),ce);nh(H,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,F!==null&&F.tag===6?(d(H,F.sibling),ce=b(F,X),ce.return=H,H=ce):(d(H,F),ce=xy(X,H.mode,ce),ce.return=H,H=ce),A(H)):d(H,F)}return function(H,F,X,ce){try{_u=0;var Ie=At(H,F,X,ce);return Rl=null,Ie}catch(ke){if(ke===Ml||ke===eh)throw ke;var ut=An(29,ke,null,H.mode);return ut.lanes=ce,ut.return=H,ut}finally{}}}var fo=__(!0),N_=__(!1),rs=!1;function Dy(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function My(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ns(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function as(i,o,d){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(vt&2)!==0){var b=p.pending;return b===null?o.next=o:(o.next=b.next,b.next=o),p.pending=o,o=Gf(i),l_(i,null,d),o}return Vf(i,p,o,d),Gf(i)}function Ou(i,o,d){if(o=o.updateQueue,o!==null&&(o=o.shared,(d&4194048)!==0)){var p=o.lanes;p&=i.pendingLanes,d|=p,o.lanes=d,gS(i,d)}}function Ry(i,o){var d=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,d===p)){var b=null,S=null;if(d=d.firstBaseUpdate,d!==null){do{var A={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};S===null?b=S=A:S=S.next=A,d=d.next}while(d!==null);S===null?b=S=o:S=S.next=o}else b=S=o;d={baseState:p.baseState,firstBaseUpdate:b,lastBaseUpdate:S,shared:p.shared,callbacks:p.callbacks},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=o:i.next=o,d.lastBaseUpdate=o}var Iy=!1;function Eu(){if(Iy){var i=Dl;if(i!==null)throw i}}function Au(i,o,d,p){Iy=!1;var b=i.updateQueue;rs=!1;var S=b.firstBaseUpdate,A=b.lastBaseUpdate,P=b.shared.pending;if(P!==null){b.shared.pending=null;var $=P,J=$.next;$.next=null,A===null?S=J:A.next=J,A=$;var oe=i.alternate;oe!==null&&(oe=oe.updateQueue,P=oe.lastBaseUpdate,P!==A&&(P===null?oe.firstBaseUpdate=J:P.next=J,oe.lastBaseUpdate=$))}if(S!==null){var de=b.baseState;A=0,oe=J=$=null,P=S;do{var ee=P.lane&-536870913,re=ee!==P.lane;if(re?(at&ee)===ee:(p&ee)===ee){ee!==0&&ee===Tl&&(Iy=!0),oe!==null&&(oe=oe.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var Ae=i,Be=P;ee=o;var At=d;switch(Be.tag){case 1:if(Ae=Be.payload,typeof Ae=="function"){de=Ae.call(At,de,ee);break e}de=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Be.payload,ee=typeof Ae=="function"?Ae.call(At,de,ee):Ae,ee==null)break e;de=g({},de,ee);break e;case 2:rs=!0}}ee=P.callback,ee!==null&&(i.flags|=64,re&&(i.flags|=8192),re=b.callbacks,re===null?b.callbacks=[ee]:re.push(ee))}else re={lane:ee,tag:P.tag,payload:P.payload,callback:P.callback,next:null},oe===null?(J=oe=re,$=de):oe=oe.next=re,A|=ee;if(P=P.next,P===null){if(P=b.shared.pending,P===null)break;re=P,P=re.next,re.next=null,b.lastBaseUpdate=re,b.shared.pending=null}}while(!0);oe===null&&($=de),b.baseState=$,b.firstBaseUpdate=J,b.lastBaseUpdate=oe,S===null&&(b.shared.lanes=0),cs|=A,i.lanes=A,i.memoizedState=de}}function O_(i,o){if(typeof i!="function")throw Error(n(191,i));i.call(o)}function E_(i,o){var d=i.callbacks;if(d!==null)for(i.callbacks=null,i=0;i<d.length;i++)O_(d[i],o)}var Il=D(null),ah=D(0);function A_(i,o){i=hi,Y(ah,i),Y(Il,o),hi=i|o.baseLanes}function Ly(){Y(ah,hi),Y(Il,Il.current)}function By(){hi=ah.current,z(Il),z(ah)}var Cn=D(null),Jn=null;function is(i){var o=i.alternate;Y(cr,cr.current&1),Y(Cn,i),Jn===null&&(o===null||Il.current!==null||o.memoizedState!==null)&&(Jn=i)}function $y(i){Y(cr,cr.current),Y(Cn,i),Jn===null&&(Jn=i)}function C_(i){i.tag===22?(Y(cr,cr.current),Y(Cn,i),Jn===null&&(Jn=i)):ss()}function ss(){Y(cr,cr.current),Y(Cn,Cn.current)}function kn(i){z(Cn),Jn===i&&(Jn=null),z(cr)}var cr=D(0);function ih(i){for(var o=i;o!==null;){if(o.tag===13){var d=o.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||Qv(d)||Hv(d)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ii=0,He=null,Ot=null,fr=null,sh=!1,Ll=!1,ho=!1,oh=0,Cu=0,Bl=null,nL=0;function tr(){throw Error(n(321))}function Uy(i,o){if(o===null)return!1;for(var d=0;d<o.length&&d<i.length;d++)if(!En(i[d],o[d]))return!1;return!0}function zy(i,o,d,p,b,S){return ii=S,He=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,B.H=i===null||i.memoizedState===null?fN:rv,ho=!1,S=d(p,b),ho=!1,Ll&&(S=P_(o,d,p,b)),k_(i),S}function k_(i){B.H=Tu;var o=Ot!==null&&Ot.next!==null;if(ii=0,fr=Ot=He=null,sh=!1,Cu=0,Bl=null,o)throw Error(n(300));i===null||hr||(i=i.dependencies,i!==null&&Xf(i)&&(hr=!0))}function P_(i,o,d,p){He=i;var b=0;do{if(Ll&&(Bl=null),Cu=0,Ll=!1,25<=b)throw Error(n(301));if(b+=1,fr=Ot=null,i.updateQueue!=null){var S=i.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}B.H=hN,S=o(d,p)}while(Ll);return S}function aL(){var i=B.H,o=i.useState()[0];return o=typeof o.then=="function"?ku(o):o,i=i.useState()[0],(Ot!==null?Ot.memoizedState:null)!==i&&(He.flags|=1024),o}function qy(){var i=oh!==0;return oh=0,i}function Fy(i,o,d){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~d}function Ky(i){if(sh){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}sh=!1}ii=0,fr=Ot=He=null,Ll=!1,Cu=oh=0,Bl=null}function an(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fr===null?He.memoizedState=fr=i:fr=fr.next=i,fr}function ur(){if(Ot===null){var i=He.alternate;i=i!==null?i.memoizedState:null}else i=Ot.next;var o=fr===null?He.memoizedState:fr.next;if(o!==null)fr=o,Ot=i;else{if(i===null)throw He.alternate===null?Error(n(467)):Error(n(310));Ot=i,i={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},fr===null?He.memoizedState=fr=i:fr=fr.next=i}return fr}function lh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ku(i){var o=Cu;return Cu+=1,Bl===null&&(Bl=[]),i=w_(Bl,i,o),o=He,(fr===null?o.memoizedState:fr.next)===null&&(o=o.alternate,B.H=o===null||o.memoizedState===null?fN:rv),i}function ch(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ku(i);if(i.$$typeof===E)return Ur(i)}throw Error(n(438,String(i)))}function Qy(i){var o=null,d=He.updateQueue;if(d!==null&&(o=d.memoCache),o==null){var p=He.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(o={data:p.data.map(function(b){return b.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),d===null&&(d=lh(),He.updateQueue=d),d.memoCache=o,d=o.data[o.index],d===void 0)for(d=o.data[o.index]=Array(i),p=0;p<i;p++)d[p]=V;return o.index++,d}function si(i,o){return typeof o=="function"?o(i):o}function uh(i){var o=ur();return Hy(o,Ot,i)}function Hy(i,o,d){var p=i.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=d;var b=i.baseQueue,S=p.pending;if(S!==null){if(b!==null){var A=b.next;b.next=S.next,S.next=A}o.baseQueue=b=S,p.pending=null}if(S=i.baseState,b===null)i.memoizedState=S;else{o=b.next;var P=A=null,$=null,J=o,oe=!1;do{var de=J.lane&-536870913;if(de!==J.lane?(at&de)===de:(ii&de)===de){var ee=J.revertLane;if(ee===0)$!==null&&($=$.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),de===Tl&&(oe=!0);else if((ii&ee)===ee){J=J.next,ee===Tl&&(oe=!0);continue}else de={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},$===null?(P=$=de,A=S):$=$.next=de,He.lanes|=ee,cs|=ee;de=J.action,ho&&d(S,de),S=J.hasEagerState?J.eagerState:d(S,de)}else ee={lane:de,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},$===null?(P=$=ee,A=S):$=$.next=ee,He.lanes|=de,cs|=de;J=J.next}while(J!==null&&J!==o);if($===null?A=S:$.next=P,!En(S,i.memoizedState)&&(hr=!0,oe&&(d=Dl,d!==null)))throw d;i.memoizedState=S,i.baseState=A,i.baseQueue=$,p.lastRenderedState=S}return b===null&&(p.lanes=0),[i.memoizedState,p.dispatch]}function Vy(i){var o=ur(),d=o.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=i;var p=d.dispatch,b=d.pending,S=o.memoizedState;if(b!==null){d.pending=null;var A=b=b.next;do S=i(S,A.action),A=A.next;while(A!==b);En(S,o.memoizedState)||(hr=!0),o.memoizedState=S,o.baseQueue===null&&(o.baseState=S),d.lastRenderedState=S}return[S,p]}function T_(i,o,d){var p=He,b=ur(),S=st;if(S){if(d===void 0)throw Error(n(407));d=d()}else d=o();var A=!En((Ot||b).memoizedState,d);if(A&&(b.memoizedState=d,hr=!0),b=b.queue,Yy(R_.bind(null,p,b,i),[i]),b.getSnapshot!==o||A||fr!==null&&fr.memoizedState.tag&1){if(p.flags|=2048,$l(9,{destroy:void 0},M_.bind(null,p,b,d,o),null),Tt===null)throw Error(n(349));S||(ii&127)!==0||D_(p,o,d)}return d}function D_(i,o,d){i.flags|=16384,i={getSnapshot:o,value:d},o=He.updateQueue,o===null?(o=lh(),He.updateQueue=o,o.stores=[i]):(d=o.stores,d===null?o.stores=[i]:d.push(i))}function M_(i,o,d,p){o.value=d,o.getSnapshot=p,I_(o)&&L_(i)}function R_(i,o,d){return d(function(){I_(o)&&L_(i)})}function I_(i){var o=i.getSnapshot;i=i.value;try{var d=o();return!En(i,d)}catch{return!0}}function L_(i){var o=no(i,2);o!==null&&vn(o,i,2)}function Gy(i){var o=an();if(typeof i=="function"){var d=i;if(i=d(),ho){Lr(!0);try{d()}finally{Lr(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:i},o}function B_(i,o,d,p){return i.baseState=d,Hy(i,Ot,typeof p=="function"?p:si)}function iL(i,o,d,p,b){if(hh(i))throw Error(n(485));if(i=o.action,i!==null){var S={payload:b,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){S.listeners.push(A)}};B.T!==null?d(!0):S.isTransition=!1,p(S),d=o.pending,d===null?(S.next=o.pending=S,$_(o,S)):(S.next=d.next,o.pending=d.next=S)}}function $_(i,o){var d=o.action,p=o.payload,b=i.state;if(o.isTransition){var S=B.T,A={};B.T=A;try{var P=d(b,p),$=B.S;$!==null&&$(A,P),U_(i,o,P)}catch(J){Wy(i,o,J)}finally{S!==null&&A.types!==null&&(S.types=A.types),B.T=S}}else try{S=d(b,p),U_(i,o,S)}catch(J){Wy(i,o,J)}}function U_(i,o,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(p){z_(i,o,p)},function(p){return Wy(i,o,p)}):z_(i,o,d)}function z_(i,o,d){o.status="fulfilled",o.value=d,q_(o),i.state=d,o=i.pending,o!==null&&(d=o.next,d===o?i.pending=null:(d=d.next,o.next=d,$_(i,d)))}function Wy(i,o,d){var p=i.pending;if(i.pending=null,p!==null){p=p.next;do o.status="rejected",o.reason=d,q_(o),o=o.next;while(o!==p)}i.action=null}function q_(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function F_(i,o){return o}function K_(i,o){if(st){var d=Tt.formState;if(d!==null){e:{var p=He;if(st){if(Bt){t:{for(var b=Bt,S=Xn;b.nodeType!==8;){if(!S){b=null;break t}if(b=Zn(b.nextSibling),b===null){b=null;break t}}S=b.data,b=S==="F!"||S==="F"?b:null}if(b){Bt=Zn(b.nextSibling),p=b.data==="F!";break e}}es(p)}p=!1}p&&(o=d[0])}}return d=an(),d.memoizedState=d.baseState=o,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:F_,lastRenderedState:o},d.queue=p,d=cN.bind(null,He,p),p.dispatch=d,p=Gy(!1),S=tv.bind(null,He,!1,p.queue),p=an(),b={state:o,dispatch:null,action:i,pending:null},p.queue=b,d=iL.bind(null,He,b,S,d),b.dispatch=d,p.memoizedState=i,[o,d,!1]}function Q_(i){var o=ur();return H_(o,Ot,i)}function H_(i,o,d){if(o=Hy(i,o,F_)[0],i=uh(si)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var p=ku(o)}catch(A){throw A===Ml?eh:A}else p=o;o=ur();var b=o.queue,S=b.dispatch;return d!==o.memoizedState&&(He.flags|=2048,$l(9,{destroy:void 0},sL.bind(null,b,d),null)),[p,S,i]}function sL(i,o){i.action=o}function V_(i){var o=ur(),d=Ot;if(d!==null)return H_(o,d,i);ur(),o=o.memoizedState,d=ur();var p=d.queue.dispatch;return d.memoizedState=i,[o,p,!1]}function $l(i,o,d,p){return i={tag:i,create:d,deps:p,inst:o,next:null},o=He.updateQueue,o===null&&(o=lh(),He.updateQueue=o),d=o.lastEffect,d===null?o.lastEffect=i.next=i:(p=d.next,d.next=i,i.next=p,o.lastEffect=i),i}function G_(){return ur().memoizedState}function dh(i,o,d,p){var b=an();He.flags|=i,b.memoizedState=$l(1|o,{destroy:void 0},d,p===void 0?null:p)}function fh(i,o,d,p){var b=ur();p=p===void 0?null:p;var S=b.memoizedState.inst;Ot!==null&&p!==null&&Uy(p,Ot.memoizedState.deps)?b.memoizedState=$l(o,S,d,p):(He.flags|=i,b.memoizedState=$l(1|o,S,d,p))}function W_(i,o){dh(8390656,8,i,o)}function Yy(i,o){fh(2048,8,i,o)}function oL(i){He.flags|=4;var o=He.updateQueue;if(o===null)o=lh(),He.updateQueue=o,o.events=[i];else{var d=o.events;d===null?o.events=[i]:d.push(i)}}function Y_(i){var o=ur().memoizedState;return oL({ref:o,nextImpl:i}),function(){if((vt&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function X_(i,o){return fh(4,2,i,o)}function J_(i,o){return fh(4,4,i,o)}function Z_(i,o){if(typeof o=="function"){i=i();var d=o(i);return function(){typeof d=="function"?d():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function eN(i,o,d){d=d!=null?d.concat([i]):null,fh(4,4,Z_.bind(null,o,i),d)}function Xy(){}function tN(i,o){var d=ur();o=o===void 0?null:o;var p=d.memoizedState;return o!==null&&Uy(o,p[1])?p[0]:(d.memoizedState=[i,o],i)}function rN(i,o){var d=ur();o=o===void 0?null:o;var p=d.memoizedState;if(o!==null&&Uy(o,p[1]))return p[0];if(p=i(),ho){Lr(!0);try{i()}finally{Lr(!1)}}return d.memoizedState=[p,o],p}function Jy(i,o,d){return d===void 0||(ii&1073741824)!==0&&(at&261930)===0?i.memoizedState=o:(i.memoizedState=d,i=nO(),He.lanes|=i,cs|=i,d)}function nN(i,o,d,p){return En(d,o)?d:Il.current!==null?(i=Jy(i,d,p),En(i,o)||(hr=!0),i):(ii&42)===0||(ii&1073741824)!==0&&(at&261930)===0?(hr=!0,i.memoizedState=d):(i=nO(),He.lanes|=i,cs|=i,o)}function aN(i,o,d,p,b){var S=Q.p;Q.p=S!==0&&8>S?S:8;var A=B.T,P={};B.T=P,tv(i,!1,o,d);try{var $=b(),J=B.S;if(J!==null&&J(P,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var oe=rL($,p);Pu(i,o,oe,Dn(i))}else Pu(i,o,p,Dn(i))}catch(de){Pu(i,o,{then:function(){},status:"rejected",reason:de},Dn())}finally{Q.p=S,A!==null&&P.types!==null&&(A.types=P.types),B.T=A}}function lL(){}function Zy(i,o,d,p){if(i.tag!==5)throw Error(n(476));var b=iN(i).queue;aN(i,b,o,ie,d===null?lL:function(){return sN(i),d(p)})}function iN(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:ie},next:null};var d={};return o.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:d},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function sN(i){var o=iN(i);o.next===null&&(o=i.alternate.memoizedState),Pu(i,o.next.queue,{},Dn())}function ev(){return Ur(Gu)}function oN(){return ur().memoizedState}function lN(){return ur().memoizedState}function cL(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var d=Dn();i=ns(d);var p=as(o,i,d);p!==null&&(vn(p,o,d),Ou(p,o,d)),o={cache:Cy()},i.payload=o;return}o=o.return}}function uL(i,o,d){var p=Dn();d={lane:p,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},hh(i)?uN(o,d):(d=vy(i,o,d,p),d!==null&&(vn(d,i,p),dN(d,o,p)))}function cN(i,o,d){var p=Dn();Pu(i,o,d,p)}function Pu(i,o,d,p){var b={lane:p,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(hh(i))uN(o,b);else{var S=i.alternate;if(i.lanes===0&&(S===null||S.lanes===0)&&(S=o.lastRenderedReducer,S!==null))try{var A=o.lastRenderedState,P=S(A,d);if(b.hasEagerState=!0,b.eagerState=P,En(P,A))return Vf(i,o,b,0),Tt===null&&Hf(),!1}catch{}finally{}if(d=vy(i,o,b,p),d!==null)return vn(d,i,p),dN(d,o,p),!0}return!1}function tv(i,o,d,p){if(p={lane:2,revertLane:Dv(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},hh(i)){if(o)throw Error(n(479))}else o=vy(i,d,p,2),o!==null&&vn(o,i,2)}function hh(i){var o=i.alternate;return i===He||o!==null&&o===He}function uN(i,o){Ll=sh=!0;var d=i.pending;d===null?o.next=o:(o.next=d.next,d.next=o),i.pending=o}function dN(i,o,d){if((d&4194048)!==0){var p=o.lanes;p&=i.pendingLanes,d|=p,o.lanes=d,gS(i,d)}}var Tu={readContext:Ur,use:ch,useCallback:tr,useContext:tr,useEffect:tr,useImperativeHandle:tr,useLayoutEffect:tr,useInsertionEffect:tr,useMemo:tr,useReducer:tr,useRef:tr,useState:tr,useDebugValue:tr,useDeferredValue:tr,useTransition:tr,useSyncExternalStore:tr,useId:tr,useHostTransitionStatus:tr,useFormState:tr,useActionState:tr,useOptimistic:tr,useMemoCache:tr,useCacheRefresh:tr};Tu.useEffectEvent=tr;var fN={readContext:Ur,use:ch,useCallback:function(i,o){return an().memoizedState=[i,o===void 0?null:o],i},useContext:Ur,useEffect:W_,useImperativeHandle:function(i,o,d){d=d!=null?d.concat([i]):null,dh(4194308,4,Z_.bind(null,o,i),d)},useLayoutEffect:function(i,o){return dh(4194308,4,i,o)},useInsertionEffect:function(i,o){dh(4,2,i,o)},useMemo:function(i,o){var d=an();o=o===void 0?null:o;var p=i();if(ho){Lr(!0);try{i()}finally{Lr(!1)}}return d.memoizedState=[p,o],p},useReducer:function(i,o,d){var p=an();if(d!==void 0){var b=d(o);if(ho){Lr(!0);try{d(o)}finally{Lr(!1)}}}else b=o;return p.memoizedState=p.baseState=b,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:b},p.queue=i,i=i.dispatch=uL.bind(null,He,i),[p.memoizedState,i]},useRef:function(i){var o=an();return i={current:i},o.memoizedState=i},useState:function(i){i=Gy(i);var o=i.queue,d=cN.bind(null,He,o);return o.dispatch=d,[i.memoizedState,d]},useDebugValue:Xy,useDeferredValue:function(i,o){var d=an();return Jy(d,i,o)},useTransition:function(){var i=Gy(!1);return i=aN.bind(null,He,i.queue,!0,!1),an().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,d){var p=He,b=an();if(st){if(d===void 0)throw Error(n(407));d=d()}else{if(d=o(),Tt===null)throw Error(n(349));(at&127)!==0||D_(p,o,d)}b.memoizedState=d;var S={value:d,getSnapshot:o};return b.queue=S,W_(R_.bind(null,p,S,i),[i]),p.flags|=2048,$l(9,{destroy:void 0},M_.bind(null,p,S,d,o),null),d},useId:function(){var i=an(),o=Tt.identifierPrefix;if(st){var d=Pa,p=ka;d=(p&~(1<<32-nn(p)-1)).toString(32)+d,o="_"+o+"R_"+d,d=oh++,0<d&&(o+="H"+d.toString(32)),o+="_"}else d=nL++,o="_"+o+"r_"+d.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:ev,useFormState:K_,useActionState:K_,useOptimistic:function(i){var o=an();o.memoizedState=o.baseState=i;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=d,o=tv.bind(null,He,!0,d),d.dispatch=o,[i,o]},useMemoCache:Qy,useCacheRefresh:function(){return an().memoizedState=cL.bind(null,He)},useEffectEvent:function(i){var o=an(),d={impl:i};return o.memoizedState=d,function(){if((vt&2)!==0)throw Error(n(440));return d.impl.apply(void 0,arguments)}}},rv={readContext:Ur,use:ch,useCallback:tN,useContext:Ur,useEffect:Yy,useImperativeHandle:eN,useInsertionEffect:X_,useLayoutEffect:J_,useMemo:rN,useReducer:uh,useRef:G_,useState:function(){return uh(si)},useDebugValue:Xy,useDeferredValue:function(i,o){var d=ur();return nN(d,Ot.memoizedState,i,o)},useTransition:function(){var i=uh(si)[0],o=ur().memoizedState;return[typeof i=="boolean"?i:ku(i),o]},useSyncExternalStore:T_,useId:oN,useHostTransitionStatus:ev,useFormState:Q_,useActionState:Q_,useOptimistic:function(i,o){var d=ur();return B_(d,Ot,i,o)},useMemoCache:Qy,useCacheRefresh:lN};rv.useEffectEvent=Y_;var hN={readContext:Ur,use:ch,useCallback:tN,useContext:Ur,useEffect:Yy,useImperativeHandle:eN,useInsertionEffect:X_,useLayoutEffect:J_,useMemo:rN,useReducer:Vy,useRef:G_,useState:function(){return Vy(si)},useDebugValue:Xy,useDeferredValue:function(i,o){var d=ur();return Ot===null?Jy(d,i,o):nN(d,Ot.memoizedState,i,o)},useTransition:function(){var i=Vy(si)[0],o=ur().memoizedState;return[typeof i=="boolean"?i:ku(i),o]},useSyncExternalStore:T_,useId:oN,useHostTransitionStatus:ev,useFormState:V_,useActionState:V_,useOptimistic:function(i,o){var d=ur();return Ot!==null?B_(d,Ot,i,o):(d.baseState=i,[i,d.queue.dispatch])},useMemoCache:Qy,useCacheRefresh:lN};hN.useEffectEvent=Y_;function nv(i,o,d,p){o=i.memoizedState,d=d(p,o),d=d==null?o:g({},o,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var av={enqueueSetState:function(i,o,d){i=i._reactInternals;var p=Dn(),b=ns(p);b.payload=o,d!=null&&(b.callback=d),o=as(i,b,p),o!==null&&(vn(o,i,p),Ou(o,i,p))},enqueueReplaceState:function(i,o,d){i=i._reactInternals;var p=Dn(),b=ns(p);b.tag=1,b.payload=o,d!=null&&(b.callback=d),o=as(i,b,p),o!==null&&(vn(o,i,p),Ou(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var d=Dn(),p=ns(d);p.tag=2,o!=null&&(p.callback=o),o=as(i,p,d),o!==null&&(vn(o,i,d),Ou(o,i,d))}};function mN(i,o,d,p,b,S,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,S,A):o.prototype&&o.prototype.isPureReactComponent?!vu(d,p)||!vu(b,S):!0}function pN(i,o,d,p){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(d,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(d,p),o.state!==i&&av.enqueueReplaceState(o,o.state,null)}function mo(i,o){var d=o;if("ref"in o){d={};for(var p in o)p!=="ref"&&(d[p]=o[p])}if(i=i.defaultProps){d===o&&(d=g({},d));for(var b in i)d[b]===void 0&&(d[b]=i[b])}return d}function gN(i){Qf(i)}function yN(i){console.error(i)}function vN(i){Qf(i)}function mh(i,o){try{var d=i.onUncaughtError;d(o.value,{componentStack:o.stack})}catch(p){setTimeout(function(){throw p})}}function bN(i,o,d){try{var p=i.onCaughtError;p(d.value,{componentStack:d.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function iv(i,o,d){return d=ns(d),d.tag=3,d.payload={element:null},d.callback=function(){mh(i,o)},d}function xN(i){return i=ns(i),i.tag=3,i}function wN(i,o,d,p){var b=d.type.getDerivedStateFromError;if(typeof b=="function"){var S=p.value;i.payload=function(){return b(S)},i.callback=function(){bN(o,d,p)}}var A=d.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){bN(o,d,p),typeof b!="function"&&(us===null?us=new Set([this]):us.add(this));var P=p.stack;this.componentDidCatch(p.value,{componentStack:P!==null?P:""})})}function dL(i,o,d,p,b){if(d.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(o=d.alternate,o!==null&&Pl(o,d,b,!0),d=Cn.current,d!==null){switch(d.tag){case 31:case 13:return Jn===null?Oh():d.alternate===null&&rr===0&&(rr=3),d.flags&=-257,d.flags|=65536,d.lanes=b,p===th?d.flags|=16384:(o=d.updateQueue,o===null?d.updateQueue=new Set([p]):o.add(p),kv(i,p,b)),!1;case 22:return d.flags|=65536,p===th?d.flags|=16384:(o=d.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([p])},d.updateQueue=o):(d=o.retryQueue,d===null?o.retryQueue=new Set([p]):d.add(p)),kv(i,p,b)),!1}throw Error(n(435,d.tag))}return kv(i,p,b),Oh(),!1}if(st)return o=Cn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=b,p!==_y&&(i=Error(n(422),{cause:p}),wu(Gn(i,d)))):(p!==_y&&(o=Error(n(423),{cause:p}),wu(Gn(o,d))),i=i.current.alternate,i.flags|=65536,b&=-b,i.lanes|=b,p=Gn(p,d),b=iv(i.stateNode,p,b),Ry(i,b),rr!==4&&(rr=2)),!1;var S=Error(n(520),{cause:p});if(S=Gn(S,d),Uu===null?Uu=[S]:Uu.push(S),rr!==4&&(rr=2),o===null)return!0;p=Gn(p,d),d=o;do{switch(d.tag){case 3:return d.flags|=65536,i=b&-b,d.lanes|=i,i=iv(d.stateNode,p,i),Ry(d,i),!1;case 1:if(o=d.type,S=d.stateNode,(d.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(us===null||!us.has(S))))return d.flags|=65536,b&=-b,d.lanes|=b,b=xN(b),wN(b,i,d,p),Ry(d,b),!1}d=d.return}while(d!==null);return!1}var sv=Error(n(461)),hr=!1;function zr(i,o,d,p){o.child=i===null?N_(o,null,d,p):fo(o,i.child,d,p)}function jN(i,o,d,p,b){d=d.render;var S=o.ref;if("ref"in p){var A={};for(var P in p)P!=="ref"&&(A[P]=p[P])}else A=p;return oo(o),p=zy(i,o,d,A,S,b),P=qy(),i!==null&&!hr?(Fy(i,o,b),oi(i,o,b)):(st&&P&&jy(o),o.flags|=1,zr(i,o,p,b),o.child)}function SN(i,o,d,p,b){if(i===null){var S=d.type;return typeof S=="function"&&!by(S)&&S.defaultProps===void 0&&d.compare===null?(o.tag=15,o.type=S,_N(i,o,S,p,b)):(i=Wf(d.type,null,p,o,o.mode,b),i.ref=o.ref,i.return=o,o.child=i)}if(S=i.child,!mv(i,b)){var A=S.memoizedProps;if(d=d.compare,d=d!==null?d:vu,d(A,p)&&i.ref===o.ref)return oi(i,o,b)}return o.flags|=1,i=ti(S,p),i.ref=o.ref,i.return=o,o.child=i}function _N(i,o,d,p,b){if(i!==null){var S=i.memoizedProps;if(vu(S,p)&&i.ref===o.ref)if(hr=!1,o.pendingProps=p=S,mv(i,b))(i.flags&131072)!==0&&(hr=!0);else return o.lanes=i.lanes,oi(i,o,b)}return ov(i,o,d,p,b)}function NN(i,o,d,p){var b=p.children,S=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((o.flags&128)!==0){if(S=S!==null?S.baseLanes|d:d,i!==null){for(p=o.child=i.child,b=0;p!==null;)b=b|p.lanes|p.childLanes,p=p.sibling;p=b&~S}else p=0,o.child=null;return ON(i,o,S,d,p)}if((d&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Zf(o,S!==null?S.cachePool:null),S!==null?A_(o,S):Ly(),C_(o);else return p=o.lanes=536870912,ON(i,o,S!==null?S.baseLanes|d:d,d,p)}else S!==null?(Zf(o,S.cachePool),A_(o,S),ss(),o.memoizedState=null):(i!==null&&Zf(o,null),Ly(),ss());return zr(i,o,b,d),o.child}function Du(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function ON(i,o,d,p,b){var S=Py();return S=S===null?null:{parent:dr._currentValue,pool:S},o.memoizedState={baseLanes:d,cachePool:S},i!==null&&Zf(o,null),Ly(),C_(o),i!==null&&Pl(i,o,p,!0),o.childLanes=b,null}function ph(i,o){return o=yh({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function EN(i,o,d){return fo(o,i.child,null,d),i=ph(o,o.pendingProps),i.flags|=2,kn(o),o.memoizedState=null,i}function fL(i,o,d){var p=o.pendingProps,b=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(st){if(p.mode==="hidden")return i=ph(o,p),o.lanes=536870912,Du(null,i);if($y(o),(i=Bt)?(i=$O(i,Xn),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Ji!==null?{id:ka,overflow:Pa}:null,retryLane:536870912,hydrationErrors:null},d=u_(i),d.return=o,o.child=d,$r=o,Bt=null)):i=null,i===null)throw es(o);return o.lanes=536870912,null}return ph(o,p)}var S=i.memoizedState;if(S!==null){var A=S.dehydrated;if($y(o),b)if(o.flags&256)o.flags&=-257,o=EN(i,o,d);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(n(558));else if(hr||Pl(i,o,d,!1),b=(d&i.childLanes)!==0,hr||b){if(p=Tt,p!==null&&(A=yS(p,d),A!==0&&A!==S.retryLane))throw S.retryLane=A,no(i,A),vn(p,i,A),sv;Oh(),o=EN(i,o,d)}else i=S.treeContext,Bt=Zn(A.nextSibling),$r=o,st=!0,Zi=null,Xn=!1,i!==null&&h_(o,i),o=ph(o,p),o.flags|=4096;return o}return i=ti(i.child,{mode:p.mode,children:p.children}),i.ref=o.ref,o.child=i,i.return=o,i}function gh(i,o){var d=o.ref;if(d===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(n(284));(i===null||i.ref!==d)&&(o.flags|=4194816)}}function ov(i,o,d,p,b){return oo(o),d=zy(i,o,d,p,void 0,b),p=qy(),i!==null&&!hr?(Fy(i,o,b),oi(i,o,b)):(st&&p&&jy(o),o.flags|=1,zr(i,o,d,b),o.child)}function AN(i,o,d,p,b,S){return oo(o),o.updateQueue=null,d=P_(o,p,d,b),k_(i),p=qy(),i!==null&&!hr?(Fy(i,o,S),oi(i,o,S)):(st&&p&&jy(o),o.flags|=1,zr(i,o,d,S),o.child)}function CN(i,o,d,p,b){if(oo(o),o.stateNode===null){var S=El,A=d.contextType;typeof A=="object"&&A!==null&&(S=Ur(A)),S=new d(p,S),o.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=av,o.stateNode=S,S._reactInternals=o,S=o.stateNode,S.props=p,S.state=o.memoizedState,S.refs={},Dy(o),A=d.contextType,S.context=typeof A=="object"&&A!==null?Ur(A):El,S.state=o.memoizedState,A=d.getDerivedStateFromProps,typeof A=="function"&&(nv(o,d,A,p),S.state=o.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(A=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),A!==S.state&&av.enqueueReplaceState(S,S.state,null),Au(o,p,S,b),Eu(),S.state=o.memoizedState),typeof S.componentDidMount=="function"&&(o.flags|=4194308),p=!0}else if(i===null){S=o.stateNode;var P=o.memoizedProps,$=mo(d,P);S.props=$;var J=S.context,oe=d.contextType;A=El,typeof oe=="object"&&oe!==null&&(A=Ur(oe));var de=d.getDerivedStateFromProps;oe=typeof de=="function"||typeof S.getSnapshotBeforeUpdate=="function",P=o.pendingProps!==P,oe||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(P||J!==A)&&pN(o,S,p,A),rs=!1;var ee=o.memoizedState;S.state=ee,Au(o,p,S,b),Eu(),J=o.memoizedState,P||ee!==J||rs?(typeof de=="function"&&(nv(o,d,de,p),J=o.memoizedState),($=rs||mN(o,d,$,p,ee,J,A))?(oe||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=J),S.props=p,S.state=J,S.context=A,p=$):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{S=o.stateNode,My(i,o),A=o.memoizedProps,oe=mo(d,A),S.props=oe,de=o.pendingProps,ee=S.context,J=d.contextType,$=El,typeof J=="object"&&J!==null&&($=Ur(J)),P=d.getDerivedStateFromProps,(J=typeof P=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(A!==de||ee!==$)&&pN(o,S,p,$),rs=!1,ee=o.memoizedState,S.state=ee,Au(o,p,S,b),Eu();var re=o.memoizedState;A!==de||ee!==re||rs||i!==null&&i.dependencies!==null&&Xf(i.dependencies)?(typeof P=="function"&&(nv(o,d,P,p),re=o.memoizedState),(oe=rs||mN(o,d,oe,p,ee,re,$)||i!==null&&i.dependencies!==null&&Xf(i.dependencies))?(J||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(p,re,$),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(p,re,$)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||A===i.memoizedProps&&ee===i.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ee===i.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=re),S.props=p,S.state=re,S.context=$,p=oe):(typeof S.componentDidUpdate!="function"||A===i.memoizedProps&&ee===i.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ee===i.memoizedState||(o.flags|=1024),p=!1)}return S=p,gh(i,o),p=(o.flags&128)!==0,S||p?(S=o.stateNode,d=p&&typeof d.getDerivedStateFromError!="function"?null:S.render(),o.flags|=1,i!==null&&p?(o.child=fo(o,i.child,null,b),o.child=fo(o,null,d,b)):zr(i,o,d,b),o.memoizedState=S.state,i=o.child):i=oi(i,o,b),i}function kN(i,o,d,p){return io(),o.flags|=256,zr(i,o,d,p),o.child}var lv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cv(i){return{baseLanes:i,cachePool:b_()}}function uv(i,o,d){return i=i!==null?i.childLanes&~d:0,o&&(i|=Tn),i}function PN(i,o,d){var p=o.pendingProps,b=!1,S=(o.flags&128)!==0,A;if((A=S)||(A=i!==null&&i.memoizedState===null?!1:(cr.current&2)!==0),A&&(b=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,i===null){if(st){if(b?is(o):ss(),(i=Bt)?(i=$O(i,Xn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Ji!==null?{id:ka,overflow:Pa}:null,retryLane:536870912,hydrationErrors:null},d=u_(i),d.return=o,o.child=d,$r=o,Bt=null)):i=null,i===null)throw es(o);return Hv(i)?o.lanes=32:o.lanes=536870912,null}var P=p.children;return p=p.fallback,b?(ss(),b=o.mode,P=yh({mode:"hidden",children:P},b),p=ao(p,b,d,null),P.return=o,p.return=o,P.sibling=p,o.child=P,p=o.child,p.memoizedState=cv(d),p.childLanes=uv(i,A,d),o.memoizedState=lv,Du(null,p)):(is(o),dv(o,P))}var $=i.memoizedState;if($!==null&&(P=$.dehydrated,P!==null)){if(S)o.flags&256?(is(o),o.flags&=-257,o=fv(i,o,d)):o.memoizedState!==null?(ss(),o.child=i.child,o.flags|=128,o=null):(ss(),P=p.fallback,b=o.mode,p=yh({mode:"visible",children:p.children},b),P=ao(P,b,d,null),P.flags|=2,p.return=o,P.return=o,p.sibling=P,o.child=p,fo(o,i.child,null,d),p=o.child,p.memoizedState=cv(d),p.childLanes=uv(i,A,d),o.memoizedState=lv,o=Du(null,p));else if(is(o),Hv(P)){if(A=P.nextSibling&&P.nextSibling.dataset,A)var J=A.dgst;A=J,p=Error(n(419)),p.stack="",p.digest=A,wu({value:p,source:null,stack:null}),o=fv(i,o,d)}else if(hr||Pl(i,o,d,!1),A=(d&i.childLanes)!==0,hr||A){if(A=Tt,A!==null&&(p=yS(A,d),p!==0&&p!==$.retryLane))throw $.retryLane=p,no(i,p),vn(A,i,p),sv;Qv(P)||Oh(),o=fv(i,o,d)}else Qv(P)?(o.flags|=192,o.child=i.child,o=null):(i=$.treeContext,Bt=Zn(P.nextSibling),$r=o,st=!0,Zi=null,Xn=!1,i!==null&&h_(o,i),o=dv(o,p.children),o.flags|=4096);return o}return b?(ss(),P=p.fallback,b=o.mode,$=i.child,J=$.sibling,p=ti($,{mode:"hidden",children:p.children}),p.subtreeFlags=$.subtreeFlags&65011712,J!==null?P=ti(J,P):(P=ao(P,b,d,null),P.flags|=2),P.return=o,p.return=o,p.sibling=P,o.child=p,Du(null,p),p=o.child,P=i.child.memoizedState,P===null?P=cv(d):(b=P.cachePool,b!==null?($=dr._currentValue,b=b.parent!==$?{parent:$,pool:$}:b):b=b_(),P={baseLanes:P.baseLanes|d,cachePool:b}),p.memoizedState=P,p.childLanes=uv(i,A,d),o.memoizedState=lv,Du(i.child,p)):(is(o),d=i.child,i=d.sibling,d=ti(d,{mode:"visible",children:p.children}),d.return=o,d.sibling=null,i!==null&&(A=o.deletions,A===null?(o.deletions=[i],o.flags|=16):A.push(i)),o.child=d,o.memoizedState=null,d)}function dv(i,o){return o=yh({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function yh(i,o){return i=An(22,i,null,o),i.lanes=0,i}function fv(i,o,d){return fo(o,i.child,null,d),i=dv(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function TN(i,o,d){i.lanes|=o;var p=i.alternate;p!==null&&(p.lanes|=o),Ey(i.return,o,d)}function hv(i,o,d,p,b,S){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:d,tailMode:b,treeForkCount:S}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=p,A.tail=d,A.tailMode=b,A.treeForkCount=S)}function DN(i,o,d){var p=o.pendingProps,b=p.revealOrder,S=p.tail;p=p.children;var A=cr.current,P=(A&2)!==0;if(P?(A=A&1|2,o.flags|=128):A&=1,Y(cr,A),zr(i,o,p,d),p=st?xu:0,!P&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&TN(i,d,o);else if(i.tag===19)TN(i,d,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(b){case"forwards":for(d=o.child,b=null;d!==null;)i=d.alternate,i!==null&&ih(i)===null&&(b=d),d=d.sibling;d=b,d===null?(b=o.child,o.child=null):(b=d.sibling,d.sibling=null),hv(o,!1,b,d,S,p);break;case"backwards":case"unstable_legacy-backwards":for(d=null,b=o.child,o.child=null;b!==null;){if(i=b.alternate,i!==null&&ih(i)===null){o.child=b;break}i=b.sibling,b.sibling=d,d=b,b=i}hv(o,!0,d,null,S,p);break;case"together":hv(o,!1,null,null,void 0,p);break;default:o.memoizedState=null}return o.child}function oi(i,o,d){if(i!==null&&(o.dependencies=i.dependencies),cs|=o.lanes,(d&o.childLanes)===0)if(i!==null){if(Pl(i,o,d,!1),(d&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(n(153));if(o.child!==null){for(i=o.child,d=ti(i,i.pendingProps),o.child=d,d.return=o;i.sibling!==null;)i=i.sibling,d=d.sibling=ti(i,i.pendingProps),d.return=o;d.sibling=null}return o.child}function mv(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Xf(i)))}function hL(i,o,d){switch(o.tag){case 3:Ee(o,o.stateNode.containerInfo),ts(o,dr,i.memoizedState.cache),io();break;case 27:case 5:_e(o);break;case 4:Ee(o,o.stateNode.containerInfo);break;case 10:ts(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,$y(o),null;break;case 13:var p=o.memoizedState;if(p!==null)return p.dehydrated!==null?(is(o),o.flags|=128,null):(d&o.child.childLanes)!==0?PN(i,o,d):(is(o),i=oi(i,o,d),i!==null?i.sibling:null);is(o);break;case 19:var b=(i.flags&128)!==0;if(p=(d&o.childLanes)!==0,p||(Pl(i,o,d,!1),p=(d&o.childLanes)!==0),b){if(p)return DN(i,o,d);o.flags|=128}if(b=o.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Y(cr,cr.current),p)break;return null;case 22:return o.lanes=0,NN(i,o,d,o.pendingProps);case 24:ts(o,dr,i.memoizedState.cache)}return oi(i,o,d)}function MN(i,o,d){if(i!==null)if(i.memoizedProps!==o.pendingProps)hr=!0;else{if(!mv(i,d)&&(o.flags&128)===0)return hr=!1,hL(i,o,d);hr=(i.flags&131072)!==0}else hr=!1,st&&(o.flags&1048576)!==0&&f_(o,xu,o.index);switch(o.lanes=0,o.tag){case 16:e:{var p=o.pendingProps;if(i=co(o.elementType),o.type=i,typeof i=="function")by(i)?(p=mo(i,p),o.tag=1,o=CN(null,o,i,p,d)):(o.tag=0,o=ov(null,o,i,p,d));else{if(i!=null){var b=i.$$typeof;if(b===C){o.tag=11,o=jN(null,o,i,p,d);break e}else if(b===M){o.tag=14,o=SN(null,o,i,p,d);break e}}throw o=ge(i)||i,Error(n(306,o,""))}}return o;case 0:return ov(i,o,o.type,o.pendingProps,d);case 1:return p=o.type,b=mo(p,o.pendingProps),CN(i,o,p,b,d);case 3:e:{if(Ee(o,o.stateNode.containerInfo),i===null)throw Error(n(387));p=o.pendingProps;var S=o.memoizedState;b=S.element,My(i,o),Au(o,p,null,d);var A=o.memoizedState;if(p=A.cache,ts(o,dr,p),p!==S.cache&&Ay(o,[dr],d,!0),Eu(),p=A.element,S.isDehydrated)if(S={element:p,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=S,o.memoizedState=S,o.flags&256){o=kN(i,o,p,d);break e}else if(p!==b){b=Gn(Error(n(424)),o),wu(b),o=kN(i,o,p,d);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Bt=Zn(i.firstChild),$r=o,st=!0,Zi=null,Xn=!0,d=N_(o,null,p,d),o.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(io(),p===b){o=oi(i,o,d);break e}zr(i,o,p,d)}o=o.child}return o;case 26:return gh(i,o),i===null?(d=QO(o.type,null,o.pendingProps,null))?o.memoizedState=d:st||(d=o.type,i=o.pendingProps,p=Dh(ve.current).createElement(d),p[Br]=o,p[fn]=i,qr(p,d,i),Er(p),o.stateNode=p):o.memoizedState=QO(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return _e(o),i===null&&st&&(p=o.stateNode=qO(o.type,o.pendingProps,ve.current),$r=o,Xn=!0,b=Bt,ms(o.type)?(Vv=b,Bt=Zn(p.firstChild)):Bt=b),zr(i,o,o.pendingProps.children,d),gh(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&st&&((b=p=Bt)&&(p=FL(p,o.type,o.pendingProps,Xn),p!==null?(o.stateNode=p,$r=o,Bt=Zn(p.firstChild),Xn=!1,b=!0):b=!1),b||es(o)),_e(o),b=o.type,S=o.pendingProps,A=i!==null?i.memoizedProps:null,p=S.children,qv(b,S)?p=null:A!==null&&qv(b,A)&&(o.flags|=32),o.memoizedState!==null&&(b=zy(i,o,aL,null,null,d),Gu._currentValue=b),gh(i,o),zr(i,o,p,d),o.child;case 6:return i===null&&st&&((i=d=Bt)&&(d=KL(d,o.pendingProps,Xn),d!==null?(o.stateNode=d,$r=o,Bt=null,i=!0):i=!1),i||es(o)),null;case 13:return PN(i,o,d);case 4:return Ee(o,o.stateNode.containerInfo),p=o.pendingProps,i===null?o.child=fo(o,null,p,d):zr(i,o,p,d),o.child;case 11:return jN(i,o,o.type,o.pendingProps,d);case 7:return zr(i,o,o.pendingProps,d),o.child;case 8:return zr(i,o,o.pendingProps.children,d),o.child;case 12:return zr(i,o,o.pendingProps.children,d),o.child;case 10:return p=o.pendingProps,ts(o,o.type,p.value),zr(i,o,p.children,d),o.child;case 9:return b=o.type._context,p=o.pendingProps.children,oo(o),b=Ur(b),p=p(b),o.flags|=1,zr(i,o,p,d),o.child;case 14:return SN(i,o,o.type,o.pendingProps,d);case 15:return _N(i,o,o.type,o.pendingProps,d);case 19:return DN(i,o,d);case 31:return fL(i,o,d);case 22:return NN(i,o,d,o.pendingProps);case 24:return oo(o),p=Ur(dr),i===null?(b=Py(),b===null&&(b=Tt,S=Cy(),b.pooledCache=S,S.refCount++,S!==null&&(b.pooledCacheLanes|=d),b=S),o.memoizedState={parent:p,cache:b},Dy(o),ts(o,dr,b)):((i.lanes&d)!==0&&(My(i,o),Au(o,null,null,d),Eu()),b=i.memoizedState,S=o.memoizedState,b.parent!==p?(b={parent:p,cache:p},o.memoizedState=b,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=b),ts(o,dr,p)):(p=S.cache,ts(o,dr,p),p!==b.cache&&Ay(o,[dr],d,!0))),zr(i,o,o.pendingProps.children,d),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function li(i){i.flags|=4}function pv(i,o,d,p,b){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(b&335544128)===b)if(i.stateNode.complete)i.flags|=8192;else if(oO())i.flags|=8192;else throw uo=th,Ty}else i.flags&=-16777217}function RN(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!YO(o))if(oO())i.flags|=8192;else throw uo=th,Ty}function vh(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?mS():536870912,i.lanes|=o,Fl|=o)}function Mu(i,o){if(!st)switch(i.tailMode){case"hidden":o=i.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function $t(i){var o=i.alternate!==null&&i.alternate.child===i.child,d=0,p=0;if(o)for(var b=i.child;b!==null;)d|=b.lanes|b.childLanes,p|=b.subtreeFlags&65011712,p|=b.flags&65011712,b.return=i,b=b.sibling;else for(b=i.child;b!==null;)d|=b.lanes|b.childLanes,p|=b.subtreeFlags,p|=b.flags,b.return=i,b=b.sibling;return i.subtreeFlags|=p,i.childLanes=d,o}function mL(i,o,d){var p=o.pendingProps;switch(Sy(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(o),null;case 1:return $t(o),null;case 3:return d=o.stateNode,p=null,i!==null&&(p=i.memoizedState.cache),o.memoizedState.cache!==p&&(o.flags|=2048),ai(dr),te(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(kl(o)?li(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Ny())),$t(o),null;case 26:var b=o.type,S=o.memoizedState;return i===null?(li(o),S!==null?($t(o),RN(o,S)):($t(o),pv(o,b,null,p,d))):S?S!==i.memoizedState?(li(o),$t(o),RN(o,S)):($t(o),o.flags&=-16777217):(i=i.memoizedProps,i!==p&&li(o),$t(o),pv(o,b,i,p,d)),null;case 27:if(De(o),d=ve.current,b=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==p&&li(o);else{if(!p){if(o.stateNode===null)throw Error(n(166));return $t(o),null}i=q.current,kl(o)?m_(o):(i=qO(b,p,d),o.stateNode=i,li(o))}return $t(o),null;case 5:if(De(o),b=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==p&&li(o);else{if(!p){if(o.stateNode===null)throw Error(n(166));return $t(o),null}if(S=q.current,kl(o))m_(o);else{var A=Dh(ve.current);switch(S){case 1:S=A.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:S=A.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":S=A.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":S=A.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":S=A.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof p.is=="string"?A.createElement("select",{is:p.is}):A.createElement("select"),p.multiple?S.multiple=!0:p.size&&(S.size=p.size);break;default:S=typeof p.is=="string"?A.createElement(b,{is:p.is}):A.createElement(b)}}S[Br]=o,S[fn]=p;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)S.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=S;e:switch(qr(S,b,p),b){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&li(o)}}return $t(o),pv(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,d),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==p&&li(o);else{if(typeof p!="string"&&o.stateNode===null)throw Error(n(166));if(i=ve.current,kl(o)){if(i=o.stateNode,d=o.memoizedProps,p=null,b=$r,b!==null)switch(b.tag){case 27:case 5:p=b.memoizedProps}i[Br]=o,i=!!(i.nodeValue===d||p!==null&&p.suppressHydrationWarning===!0||PO(i.nodeValue,d)),i||es(o,!0)}else i=Dh(i).createTextNode(p),i[Br]=o,o.stateNode=i}return $t(o),null;case 31:if(d=o.memoizedState,i===null||i.memoizedState!==null){if(p=kl(o),d!==null){if(i===null){if(!p)throw Error(n(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[Br]=o}else io(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;$t(o),i=!1}else d=Ny(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=d),i=!0;if(!i)return o.flags&256?(kn(o),o):(kn(o),null);if((o.flags&128)!==0)throw Error(n(558))}return $t(o),null;case 13:if(p=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(b=kl(o),p!==null&&p.dehydrated!==null){if(i===null){if(!b)throw Error(n(318));if(b=o.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[Br]=o}else io(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;$t(o),b=!1}else b=Ny(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=b),b=!0;if(!b)return o.flags&256?(kn(o),o):(kn(o),null)}return kn(o),(o.flags&128)!==0?(o.lanes=d,o):(d=p!==null,i=i!==null&&i.memoizedState!==null,d&&(p=o.child,b=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(b=p.alternate.memoizedState.cachePool.pool),S=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(S=p.memoizedState.cachePool.pool),S!==b&&(p.flags|=2048)),d!==i&&d&&(o.child.flags|=8192),vh(o,o.updateQueue),$t(o),null);case 4:return te(),i===null&&Lv(o.stateNode.containerInfo),$t(o),null;case 10:return ai(o.type),$t(o),null;case 19:if(z(cr),p=o.memoizedState,p===null)return $t(o),null;if(b=(o.flags&128)!==0,S=p.rendering,S===null)if(b)Mu(p,!1);else{if(rr!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(S=ih(i),S!==null){for(o.flags|=128,Mu(p,!1),i=S.updateQueue,o.updateQueue=i,vh(o,i),o.subtreeFlags=0,i=d,d=o.child;d!==null;)c_(d,i),d=d.sibling;return Y(cr,cr.current&1|2),st&&ri(o,p.treeForkCount),o.child}i=i.sibling}p.tail!==null&&ze()>Sh&&(o.flags|=128,b=!0,Mu(p,!1),o.lanes=4194304)}else{if(!b)if(i=ih(S),i!==null){if(o.flags|=128,b=!0,i=i.updateQueue,o.updateQueue=i,vh(o,i),Mu(p,!0),p.tail===null&&p.tailMode==="hidden"&&!S.alternate&&!st)return $t(o),null}else 2*ze()-p.renderingStartTime>Sh&&d!==536870912&&(o.flags|=128,b=!0,Mu(p,!1),o.lanes=4194304);p.isBackwards?(S.sibling=o.child,o.child=S):(i=p.last,i!==null?i.sibling=S:o.child=S,p.last=S)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=ze(),i.sibling=null,d=cr.current,Y(cr,b?d&1|2:d&1),st&&ri(o,p.treeForkCount),i):($t(o),null);case 22:case 23:return kn(o),By(),p=o.memoizedState!==null,i!==null?i.memoizedState!==null!==p&&(o.flags|=8192):p&&(o.flags|=8192),p?(d&536870912)!==0&&(o.flags&128)===0&&($t(o),o.subtreeFlags&6&&(o.flags|=8192)):$t(o),d=o.updateQueue,d!==null&&vh(o,d.retryQueue),d=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),p=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),p!==d&&(o.flags|=2048),i!==null&&z(lo),null;case 24:return d=null,i!==null&&(d=i.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),ai(dr),$t(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function pL(i,o){switch(Sy(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return ai(dr),te(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return De(o),null;case 31:if(o.memoizedState!==null){if(kn(o),o.alternate===null)throw Error(n(340));io()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(kn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(n(340));io()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return z(cr),null;case 4:return te(),null;case 10:return ai(o.type),null;case 22:case 23:return kn(o),By(),i!==null&&z(lo),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return ai(dr),null;case 25:return null;default:return null}}function IN(i,o){switch(Sy(o),o.tag){case 3:ai(dr),te();break;case 26:case 27:case 5:De(o);break;case 4:te();break;case 31:o.memoizedState!==null&&kn(o);break;case 13:kn(o);break;case 19:z(cr);break;case 10:ai(o.type);break;case 22:case 23:kn(o),By(),i!==null&&z(lo);break;case 24:ai(dr)}}function Ru(i,o){try{var d=o.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var b=p.next;d=b;do{if((d.tag&i)===i){p=void 0;var S=d.create,A=d.inst;p=S(),A.destroy=p}d=d.next}while(d!==b)}}catch(P){St(o,o.return,P)}}function os(i,o,d){try{var p=o.updateQueue,b=p!==null?p.lastEffect:null;if(b!==null){var S=b.next;p=S;do{if((p.tag&i)===i){var A=p.inst,P=A.destroy;if(P!==void 0){A.destroy=void 0,b=o;var $=d,J=P;try{J()}catch(oe){St(b,$,oe)}}}p=p.next}while(p!==S)}}catch(oe){St(o,o.return,oe)}}function LN(i){var o=i.updateQueue;if(o!==null){var d=i.stateNode;try{E_(o,d)}catch(p){St(i,i.return,p)}}}function BN(i,o,d){d.props=mo(i.type,i.memoizedProps),d.state=i.memoizedState;try{d.componentWillUnmount()}catch(p){St(i,o,p)}}function Iu(i,o){try{var d=i.ref;if(d!==null){switch(i.tag){case 26:case 27:case 5:var p=i.stateNode;break;case 30:p=i.stateNode;break;default:p=i.stateNode}typeof d=="function"?i.refCleanup=d(p):d.current=p}}catch(b){St(i,o,b)}}function Ta(i,o){var d=i.ref,p=i.refCleanup;if(d!==null)if(typeof p=="function")try{p()}catch(b){St(i,o,b)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(b){St(i,o,b)}else d.current=null}function $N(i){var o=i.type,d=i.memoizedProps,p=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":d.autoFocus&&p.focus();break e;case"img":d.src?p.src=d.src:d.srcSet&&(p.srcset=d.srcSet)}}catch(b){St(i,i.return,b)}}function gv(i,o,d){try{var p=i.stateNode;LL(p,i.type,d,o),p[fn]=o}catch(b){St(i,i.return,b)}}function UN(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ms(i.type)||i.tag===4}function yv(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||UN(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ms(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function vv(i,o,d){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(i,o):(o=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,o.appendChild(i),d=d._reactRootContainer,d!=null||o.onclick!==null||(o.onclick=Za));else if(p!==4&&(p===27&&ms(i.type)&&(d=i.stateNode,o=null),i=i.child,i!==null))for(vv(i,o,d),i=i.sibling;i!==null;)vv(i,o,d),i=i.sibling}function bh(i,o,d){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?d.insertBefore(i,o):d.appendChild(i);else if(p!==4&&(p===27&&ms(i.type)&&(d=i.stateNode),i=i.child,i!==null))for(bh(i,o,d),i=i.sibling;i!==null;)bh(i,o,d),i=i.sibling}function zN(i){var o=i.stateNode,d=i.memoizedProps;try{for(var p=i.type,b=o.attributes;b.length;)o.removeAttributeNode(b[0]);qr(o,p,d),o[Br]=i,o[fn]=d}catch(S){St(i,i.return,S)}}var ci=!1,mr=!1,bv=!1,qN=typeof WeakSet=="function"?WeakSet:Set,Ar=null;function gL(i,o){if(i=i.containerInfo,Uv=Uh,i=e_(i),fy(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var p=d.getSelection&&d.getSelection();if(p&&p.rangeCount!==0){d=p.anchorNode;var b=p.anchorOffset,S=p.focusNode;p=p.focusOffset;try{d.nodeType,S.nodeType}catch{d=null;break e}var A=0,P=-1,$=-1,J=0,oe=0,de=i,ee=null;t:for(;;){for(var re;de!==d||b!==0&&de.nodeType!==3||(P=A+b),de!==S||p!==0&&de.nodeType!==3||($=A+p),de.nodeType===3&&(A+=de.nodeValue.length),(re=de.firstChild)!==null;)ee=de,de=re;for(;;){if(de===i)break t;if(ee===d&&++J===b&&(P=A),ee===S&&++oe===p&&($=A),(re=de.nextSibling)!==null)break;de=ee,ee=de.parentNode}de=re}d=P===-1||$===-1?null:{start:P,end:$}}else d=null}d=d||{start:0,end:0}}else d=null;for(zv={focusedElem:i,selectionRange:d},Uh=!1,Ar=o;Ar!==null;)if(o=Ar,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Ar=i;else for(;Ar!==null;){switch(o=Ar,S=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(d=0;d<i.length;d++)b=i[d],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&S!==null){i=void 0,d=o,b=S.memoizedProps,S=S.memoizedState,p=d.stateNode;try{var Ae=mo(d.type,b);i=p.getSnapshotBeforeUpdate(Ae,S),p.__reactInternalSnapshotBeforeUpdate=i}catch(Be){St(d,d.return,Be)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,d=i.nodeType,d===9)Kv(i);else if(d===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Kv(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=o.sibling,i!==null){i.return=o.return,Ar=i;break}Ar=o.return}}function FN(i,o,d){var p=d.flags;switch(d.tag){case 0:case 11:case 15:di(i,d),p&4&&Ru(5,d);break;case 1:if(di(i,d),p&4)if(i=d.stateNode,o===null)try{i.componentDidMount()}catch(A){St(d,d.return,A)}else{var b=mo(d.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(b,o,i.__reactInternalSnapshotBeforeUpdate)}catch(A){St(d,d.return,A)}}p&64&&LN(d),p&512&&Iu(d,d.return);break;case 3:if(di(i,d),p&64&&(i=d.updateQueue,i!==null)){if(o=null,d.child!==null)switch(d.child.tag){case 27:case 5:o=d.child.stateNode;break;case 1:o=d.child.stateNode}try{E_(i,o)}catch(A){St(d,d.return,A)}}break;case 27:o===null&&p&4&&zN(d);case 26:case 5:di(i,d),o===null&&p&4&&$N(d),p&512&&Iu(d,d.return);break;case 12:di(i,d);break;case 31:di(i,d),p&4&&HN(i,d);break;case 13:di(i,d),p&4&&VN(i,d),p&64&&(i=d.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(d=NL.bind(null,d),QL(i,d))));break;case 22:if(p=d.memoizedState!==null||ci,!p){o=o!==null&&o.memoizedState!==null||mr,b=ci;var S=mr;ci=p,(mr=o)&&!S?fi(i,d,(d.subtreeFlags&8772)!==0):di(i,d),ci=b,mr=S}break;case 30:break;default:di(i,d)}}function KN(i){var o=i.alternate;o!==null&&(i.alternate=null,KN(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Wg(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Qt=null,mn=!1;function ui(i,o,d){for(d=d.child;d!==null;)QN(i,o,d),d=d.sibling}function QN(i,o,d){if(er&&typeof er.onCommitFiberUnmount=="function")try{er.onCommitFiberUnmount(Mt,d)}catch{}switch(d.tag){case 26:mr||Ta(d,o),ui(i,o,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:mr||Ta(d,o);var p=Qt,b=mn;ms(d.type)&&(Qt=d.stateNode,mn=!1),ui(i,o,d),Qu(d.stateNode),Qt=p,mn=b;break;case 5:mr||Ta(d,o);case 6:if(p=Qt,b=mn,Qt=null,ui(i,o,d),Qt=p,mn=b,Qt!==null)if(mn)try{(Qt.nodeType===9?Qt.body:Qt.nodeName==="HTML"?Qt.ownerDocument.body:Qt).removeChild(d.stateNode)}catch(S){St(d,o,S)}else try{Qt.removeChild(d.stateNode)}catch(S){St(d,o,S)}break;case 18:Qt!==null&&(mn?(i=Qt,LO(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,d.stateNode),Xl(i)):LO(Qt,d.stateNode));break;case 4:p=Qt,b=mn,Qt=d.stateNode.containerInfo,mn=!0,ui(i,o,d),Qt=p,mn=b;break;case 0:case 11:case 14:case 15:os(2,d,o),mr||os(4,d,o),ui(i,o,d);break;case 1:mr||(Ta(d,o),p=d.stateNode,typeof p.componentWillUnmount=="function"&&BN(d,o,p)),ui(i,o,d);break;case 21:ui(i,o,d);break;case 22:mr=(p=mr)||d.memoizedState!==null,ui(i,o,d),mr=p;break;default:ui(i,o,d)}}function HN(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Xl(i)}catch(d){St(o,o.return,d)}}}function VN(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Xl(i)}catch(d){St(o,o.return,d)}}function yL(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new qN),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new qN),o;default:throw Error(n(435,i.tag))}}function xh(i,o){var d=yL(i);o.forEach(function(p){if(!d.has(p)){d.add(p);var b=OL.bind(null,i,p);p.then(b,b)}})}function pn(i,o){var d=o.deletions;if(d!==null)for(var p=0;p<d.length;p++){var b=d[p],S=i,A=o,P=A;e:for(;P!==null;){switch(P.tag){case 27:if(ms(P.type)){Qt=P.stateNode,mn=!1;break e}break;case 5:Qt=P.stateNode,mn=!1;break e;case 3:case 4:Qt=P.stateNode.containerInfo,mn=!0;break e}P=P.return}if(Qt===null)throw Error(n(160));QN(S,A,b),Qt=null,mn=!1,S=b.alternate,S!==null&&(S.return=null),b.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)GN(o,i),o=o.sibling}var pa=null;function GN(i,o){var d=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:pn(o,i),gn(i),p&4&&(os(3,i,i.return),Ru(3,i),os(5,i,i.return));break;case 1:pn(o,i),gn(i),p&512&&(mr||d===null||Ta(d,d.return)),p&64&&ci&&(i=i.updateQueue,i!==null&&(p=i.callbacks,p!==null&&(d=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=d===null?p:d.concat(p))));break;case 26:var b=pa;if(pn(o,i),gn(i),p&512&&(mr||d===null||Ta(d,d.return)),p&4){var S=d!==null?d.memoizedState:null;if(p=i.memoizedState,d===null)if(p===null)if(i.stateNode===null){e:{p=i.type,d=i.memoizedProps,b=b.ownerDocument||b;t:switch(p){case"title":S=b.getElementsByTagName("title")[0],(!S||S[cu]||S[Br]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=b.createElement(p),b.head.insertBefore(S,b.querySelector("head > title"))),qr(S,p,d),S[Br]=i,Er(S),p=S;break e;case"link":var A=GO("link","href",b).get(p+(d.href||""));if(A){for(var P=0;P<A.length;P++)if(S=A[P],S.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&S.getAttribute("rel")===(d.rel==null?null:d.rel)&&S.getAttribute("title")===(d.title==null?null:d.title)&&S.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){A.splice(P,1);break t}}S=b.createElement(p),qr(S,p,d),b.head.appendChild(S);break;case"meta":if(A=GO("meta","content",b).get(p+(d.content||""))){for(P=0;P<A.length;P++)if(S=A[P],S.getAttribute("content")===(d.content==null?null:""+d.content)&&S.getAttribute("name")===(d.name==null?null:d.name)&&S.getAttribute("property")===(d.property==null?null:d.property)&&S.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&S.getAttribute("charset")===(d.charSet==null?null:d.charSet)){A.splice(P,1);break t}}S=b.createElement(p),qr(S,p,d),b.head.appendChild(S);break;default:throw Error(n(468,p))}S[Br]=i,Er(S),p=S}i.stateNode=p}else WO(b,i.type,i.stateNode);else i.stateNode=VO(b,p,i.memoizedProps);else S!==p?(S===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):S.count--,p===null?WO(b,i.type,i.stateNode):VO(b,p,i.memoizedProps)):p===null&&i.stateNode!==null&&gv(i,i.memoizedProps,d.memoizedProps)}break;case 27:pn(o,i),gn(i),p&512&&(mr||d===null||Ta(d,d.return)),d!==null&&p&4&&gv(i,i.memoizedProps,d.memoizedProps);break;case 5:if(pn(o,i),gn(i),p&512&&(mr||d===null||Ta(d,d.return)),i.flags&32){b=i.stateNode;try{xl(b,"")}catch(Ae){St(i,i.return,Ae)}}p&4&&i.stateNode!=null&&(b=i.memoizedProps,gv(i,b,d!==null?d.memoizedProps:b)),p&1024&&(bv=!0);break;case 6:if(pn(o,i),gn(i),p&4){if(i.stateNode===null)throw Error(n(162));p=i.memoizedProps,d=i.stateNode;try{d.nodeValue=p}catch(Ae){St(i,i.return,Ae)}}break;case 3:if(Ih=null,b=pa,pa=Mh(o.containerInfo),pn(o,i),pa=b,gn(i),p&4&&d!==null&&d.memoizedState.isDehydrated)try{Xl(o.containerInfo)}catch(Ae){St(i,i.return,Ae)}bv&&(bv=!1,WN(i));break;case 4:p=pa,pa=Mh(i.stateNode.containerInfo),pn(o,i),gn(i),pa=p;break;case 12:pn(o,i),gn(i);break;case 31:pn(o,i),gn(i),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,xh(i,p)));break;case 13:pn(o,i),gn(i),i.child.flags&8192&&i.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(jh=ze()),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,xh(i,p)));break;case 22:b=i.memoizedState!==null;var $=d!==null&&d.memoizedState!==null,J=ci,oe=mr;if(ci=J||b,mr=oe||$,pn(o,i),mr=oe,ci=J,gn(i),p&8192)e:for(o=i.stateNode,o._visibility=b?o._visibility&-2:o._visibility|1,b&&(d===null||$||ci||mr||po(i)),d=null,o=i;;){if(o.tag===5||o.tag===26){if(d===null){$=d=o;try{if(S=$.stateNode,b)A=S.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{P=$.stateNode;var de=$.memoizedProps.style,ee=de!=null&&de.hasOwnProperty("display")?de.display:null;P.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(Ae){St($,$.return,Ae)}}}else if(o.tag===6){if(d===null){$=o;try{$.stateNode.nodeValue=b?"":$.memoizedProps}catch(Ae){St($,$.return,Ae)}}}else if(o.tag===18){if(d===null){$=o;try{var re=$.stateNode;b?BO(re,!0):BO($.stateNode,!1)}catch(Ae){St($,$.return,Ae)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;d===o&&(d=null),o=o.return}d===o&&(d=null),o.sibling.return=o.return,o=o.sibling}p&4&&(p=i.updateQueue,p!==null&&(d=p.retryQueue,d!==null&&(p.retryQueue=null,xh(i,d))));break;case 19:pn(o,i),gn(i),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,xh(i,p)));break;case 30:break;case 21:break;default:pn(o,i),gn(i)}}function gn(i){var o=i.flags;if(o&2){try{for(var d,p=i.return;p!==null;){if(UN(p)){d=p;break}p=p.return}if(d==null)throw Error(n(160));switch(d.tag){case 27:var b=d.stateNode,S=yv(i);bh(i,S,b);break;case 5:var A=d.stateNode;d.flags&32&&(xl(A,""),d.flags&=-33);var P=yv(i);bh(i,P,A);break;case 3:case 4:var $=d.stateNode.containerInfo,J=yv(i);vv(i,J,$);break;default:throw Error(n(161))}}catch(oe){St(i,i.return,oe)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function WN(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;WN(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function di(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)FN(i,o.alternate,o),o=o.sibling}function po(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:os(4,o,o.return),po(o);break;case 1:Ta(o,o.return);var d=o.stateNode;typeof d.componentWillUnmount=="function"&&BN(o,o.return,d),po(o);break;case 27:Qu(o.stateNode);case 26:case 5:Ta(o,o.return),po(o);break;case 22:o.memoizedState===null&&po(o);break;case 30:po(o);break;default:po(o)}i=i.sibling}}function fi(i,o,d){for(d=d&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var p=o.alternate,b=i,S=o,A=S.flags;switch(S.tag){case 0:case 11:case 15:fi(b,S,d),Ru(4,S);break;case 1:if(fi(b,S,d),p=S,b=p.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(J){St(p,p.return,J)}if(p=S,b=p.updateQueue,b!==null){var P=p.stateNode;try{var $=b.shared.hiddenCallbacks;if($!==null)for(b.shared.hiddenCallbacks=null,b=0;b<$.length;b++)O_($[b],P)}catch(J){St(p,p.return,J)}}d&&A&64&&LN(S),Iu(S,S.return);break;case 27:zN(S);case 26:case 5:fi(b,S,d),d&&p===null&&A&4&&$N(S),Iu(S,S.return);break;case 12:fi(b,S,d);break;case 31:fi(b,S,d),d&&A&4&&HN(b,S);break;case 13:fi(b,S,d),d&&A&4&&VN(b,S);break;case 22:S.memoizedState===null&&fi(b,S,d),Iu(S,S.return);break;case 30:break;default:fi(b,S,d)}o=o.sibling}}function xv(i,o){var d=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==d&&(i!=null&&i.refCount++,d!=null&&ju(d))}function wv(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&ju(i))}function ga(i,o,d,p){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)YN(i,o,d,p),o=o.sibling}function YN(i,o,d,p){var b=o.flags;switch(o.tag){case 0:case 11:case 15:ga(i,o,d,p),b&2048&&Ru(9,o);break;case 1:ga(i,o,d,p);break;case 3:ga(i,o,d,p),b&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&ju(i)));break;case 12:if(b&2048){ga(i,o,d,p),i=o.stateNode;try{var S=o.memoizedProps,A=S.id,P=S.onPostCommit;typeof P=="function"&&P(A,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch($){St(o,o.return,$)}}else ga(i,o,d,p);break;case 31:ga(i,o,d,p);break;case 13:ga(i,o,d,p);break;case 23:break;case 22:S=o.stateNode,A=o.alternate,o.memoizedState!==null?S._visibility&2?ga(i,o,d,p):Lu(i,o):S._visibility&2?ga(i,o,d,p):(S._visibility|=2,Ul(i,o,d,p,(o.subtreeFlags&10256)!==0||!1)),b&2048&&xv(A,o);break;case 24:ga(i,o,d,p),b&2048&&wv(o.alternate,o);break;default:ga(i,o,d,p)}}function Ul(i,o,d,p,b){for(b=b&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var S=i,A=o,P=d,$=p,J=A.flags;switch(A.tag){case 0:case 11:case 15:Ul(S,A,P,$,b),Ru(8,A);break;case 23:break;case 22:var oe=A.stateNode;A.memoizedState!==null?oe._visibility&2?Ul(S,A,P,$,b):Lu(S,A):(oe._visibility|=2,Ul(S,A,P,$,b)),b&&J&2048&&xv(A.alternate,A);break;case 24:Ul(S,A,P,$,b),b&&J&2048&&wv(A.alternate,A);break;default:Ul(S,A,P,$,b)}o=o.sibling}}function Lu(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var d=i,p=o,b=p.flags;switch(p.tag){case 22:Lu(d,p),b&2048&&xv(p.alternate,p);break;case 24:Lu(d,p),b&2048&&wv(p.alternate,p);break;default:Lu(d,p)}o=o.sibling}}var Bu=8192;function zl(i,o,d){if(i.subtreeFlags&Bu)for(i=i.child;i!==null;)XN(i,o,d),i=i.sibling}function XN(i,o,d){switch(i.tag){case 26:zl(i,o,d),i.flags&Bu&&i.memoizedState!==null&&nB(d,pa,i.memoizedState,i.memoizedProps);break;case 5:zl(i,o,d);break;case 3:case 4:var p=pa;pa=Mh(i.stateNode.containerInfo),zl(i,o,d),pa=p;break;case 22:i.memoizedState===null&&(p=i.alternate,p!==null&&p.memoizedState!==null?(p=Bu,Bu=16777216,zl(i,o,d),Bu=p):zl(i,o,d));break;default:zl(i,o,d)}}function JN(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function $u(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var d=0;d<o.length;d++){var p=o[d];Ar=p,eO(p,i)}JN(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ZN(i),i=i.sibling}function ZN(i){switch(i.tag){case 0:case 11:case 15:$u(i),i.flags&2048&&os(9,i,i.return);break;case 3:$u(i);break;case 12:$u(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,wh(i)):$u(i);break;default:$u(i)}}function wh(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var d=0;d<o.length;d++){var p=o[d];Ar=p,eO(p,i)}JN(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:os(8,o,o.return),wh(o);break;case 22:d=o.stateNode,d._visibility&2&&(d._visibility&=-3,wh(o));break;default:wh(o)}i=i.sibling}}function eO(i,o){for(;Ar!==null;){var d=Ar;switch(d.tag){case 0:case 11:case 15:os(8,d,o);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var p=d.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:ju(d.memoizedState.cache)}if(p=d.child,p!==null)p.return=d,Ar=p;else e:for(d=i;Ar!==null;){p=Ar;var b=p.sibling,S=p.return;if(KN(p),p===d){Ar=null;break e}if(b!==null){b.return=S,Ar=b;break e}Ar=S}}}var vL={getCacheForType:function(i){var o=Ur(dr),d=o.data.get(i);return d===void 0&&(d=i(),o.data.set(i,d)),d},cacheSignal:function(){return Ur(dr).controller.signal}},bL=typeof WeakMap=="function"?WeakMap:Map,vt=0,Tt=null,et=null,at=0,jt=0,Pn=null,ls=!1,ql=!1,jv=!1,hi=0,rr=0,cs=0,go=0,Sv=0,Tn=0,Fl=0,Uu=null,yn=null,_v=!1,jh=0,tO=0,Sh=1/0,_h=null,us=null,xr=0,ds=null,Kl=null,mi=0,Nv=0,Ov=null,rO=null,zu=0,Ev=null;function Dn(){return(vt&2)!==0&&at!==0?at&-at:B.T!==null?Dv():vS()}function nO(){if(Tn===0)if((at&536870912)===0||st){var i=Xa;Xa<<=1,(Xa&3932160)===0&&(Xa=262144),Tn=i}else Tn=536870912;return i=Cn.current,i!==null&&(i.flags|=32),Tn}function vn(i,o,d){(i===Tt&&(jt===2||jt===9)||i.cancelPendingCommit!==null)&&(Ql(i,0),fs(i,at,Tn,!1)),lu(i,d),((vt&2)===0||i!==Tt)&&(i===Tt&&((vt&2)===0&&(go|=d),rr===4&&fs(i,at,Tn,!1)),Da(i))}function aO(i,o,d){if((vt&6)!==0)throw Error(n(327));var p=!d&&(o&127)===0&&(o&i.expiredLanes)===0||ou(i,o),b=p?jL(i,o):Cv(i,o,!0),S=p;do{if(b===0){ql&&!p&&fs(i,o,0,!1);break}else{if(d=i.current.alternate,S&&!xL(d)){b=Cv(i,o,!1),S=!1;continue}if(b===2){if(S=o,i.errorRecoveryDisabledLanes&S)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var P=i;b=Uu;var $=P.current.memoizedState.isDehydrated;if($&&(Ql(P,A).flags|=256),A=Cv(P,A,!1),A!==2){if(jv&&!$){P.errorRecoveryDisabledLanes|=S,go|=S,b=4;break e}S=yn,yn=b,S!==null&&(yn===null?yn=S:yn.push.apply(yn,S))}b=A}if(S=!1,b!==2)continue}}if(b===1){Ql(i,0),fs(i,o,0,!0);break}e:{switch(p=i,S=b,S){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:fs(p,o,Tn,!ls);break e;case 2:yn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(b=jh+300-ze(),10<b)){if(fs(p,o,Tn,!ls),Mf(p,0,!0)!==0)break e;mi=o,p.timeoutHandle=RO(iO.bind(null,p,d,yn,_h,_v,o,Tn,go,Fl,ls,S,"Throttled",-0,0),b);break e}iO(p,d,yn,_h,_v,o,Tn,go,Fl,ls,S,null,-0,0)}}break}while(!0);Da(i)}function iO(i,o,d,p,b,S,A,P,$,J,oe,de,ee,re){if(i.timeoutHandle=-1,de=o.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Za},XN(o,S,de);var Ae=(S&62914560)===S?jh-ze():(S&4194048)===S?tO-ze():0;if(Ae=aB(de,Ae),Ae!==null){mi=S,i.cancelPendingCommit=Ae(hO.bind(null,i,o,S,d,p,b,A,P,$,oe,de,null,ee,re)),fs(i,S,A,!J);return}}hO(i,o,S,d,p,b,A,P,$)}function xL(i){for(var o=i;;){var d=o.tag;if((d===0||d===11||d===15)&&o.flags&16384&&(d=o.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var p=0;p<d.length;p++){var b=d[p],S=b.getSnapshot;b=b.value;try{if(!En(S(),b))return!1}catch{return!1}}if(d=o.child,o.subtreeFlags&16384&&d!==null)d.return=o,o=d;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function fs(i,o,d,p){o&=~Sv,o&=~go,i.suspendedLanes|=o,i.pingedLanes&=~o,p&&(i.warmLanes|=o),p=i.expirationTimes;for(var b=o;0<b;){var S=31-nn(b),A=1<<S;p[S]=-1,b&=~A}d!==0&&pS(i,d,o)}function Nh(){return(vt&6)===0?(qu(0),!1):!0}function Av(){if(et!==null){if(jt===0)var i=et.return;else i=et,ni=so=null,Ky(i),Rl=null,_u=0,i=et;for(;i!==null;)IN(i.alternate,i),i=i.return;et=null}}function Ql(i,o){var d=i.timeoutHandle;d!==-1&&(i.timeoutHandle=-1,UL(d)),d=i.cancelPendingCommit,d!==null&&(i.cancelPendingCommit=null,d()),mi=0,Av(),Tt=i,et=d=ti(i.current,null),at=o,jt=0,Pn=null,ls=!1,ql=ou(i,o),jv=!1,Fl=Tn=Sv=go=cs=rr=0,yn=Uu=null,_v=!1,(o&8)!==0&&(o|=o&32);var p=i.entangledLanes;if(p!==0)for(i=i.entanglements,p&=o;0<p;){var b=31-nn(p),S=1<<b;o|=i[b],p&=~S}return hi=o,Hf(),d}function sO(i,o){He=null,B.H=Tu,o===Ml||o===eh?(o=j_(),jt=3):o===Ty?(o=j_(),jt=4):jt=o===sv?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Pn=o,et===null&&(rr=1,mh(i,Gn(o,i.current)))}function oO(){var i=Cn.current;return i===null?!0:(at&4194048)===at?Jn===null:(at&62914560)===at||(at&536870912)!==0?i===Jn:!1}function lO(){var i=B.H;return B.H=Tu,i===null?Tu:i}function cO(){var i=B.A;return B.A=vL,i}function Oh(){rr=4,ls||(at&4194048)!==at&&Cn.current!==null||(ql=!0),(cs&134217727)===0&&(go&134217727)===0||Tt===null||fs(Tt,at,Tn,!1)}function Cv(i,o,d){var p=vt;vt|=2;var b=lO(),S=cO();(Tt!==i||at!==o)&&(_h=null,Ql(i,o)),o=!1;var A=rr;e:do try{if(jt!==0&&et!==null){var P=et,$=Pn;switch(jt){case 8:Av(),A=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(o=!0);var J=jt;if(jt=0,Pn=null,Hl(i,P,$,J),d&&ql){A=0;break e}break;default:J=jt,jt=0,Pn=null,Hl(i,P,$,J)}}wL(),A=rr;break}catch(oe){sO(i,oe)}while(!0);return o&&i.shellSuspendCounter++,ni=so=null,vt=p,B.H=b,B.A=S,et===null&&(Tt=null,at=0,Hf()),A}function wL(){for(;et!==null;)uO(et)}function jL(i,o){var d=vt;vt|=2;var p=lO(),b=cO();Tt!==i||at!==o?(_h=null,Sh=ze()+500,Ql(i,o)):ql=ou(i,o);e:do try{if(jt!==0&&et!==null){o=et;var S=Pn;t:switch(jt){case 1:jt=0,Pn=null,Hl(i,o,S,1);break;case 2:case 9:if(x_(S)){jt=0,Pn=null,dO(o);break}o=function(){jt!==2&&jt!==9||Tt!==i||(jt=7),Da(i)},S.then(o,o);break e;case 3:jt=7;break e;case 4:jt=5;break e;case 7:x_(S)?(jt=0,Pn=null,dO(o)):(jt=0,Pn=null,Hl(i,o,S,7));break;case 5:var A=null;switch(et.tag){case 26:A=et.memoizedState;case 5:case 27:var P=et;if(A?YO(A):P.stateNode.complete){jt=0,Pn=null;var $=P.sibling;if($!==null)et=$;else{var J=P.return;J!==null?(et=J,Eh(J)):et=null}break t}}jt=0,Pn=null,Hl(i,o,S,5);break;case 6:jt=0,Pn=null,Hl(i,o,S,6);break;case 8:Av(),rr=6;break e;default:throw Error(n(462))}}SL();break}catch(oe){sO(i,oe)}while(!0);return ni=so=null,B.H=p,B.A=b,vt=d,et!==null?0:(Tt=null,at=0,Hf(),rr)}function SL(){for(;et!==null&&!qe();)uO(et)}function uO(i){var o=MN(i.alternate,i,hi);i.memoizedProps=i.pendingProps,o===null?Eh(i):et=o}function dO(i){var o=i,d=o.alternate;switch(o.tag){case 15:case 0:o=AN(d,o,o.pendingProps,o.type,void 0,at);break;case 11:o=AN(d,o,o.pendingProps,o.type.render,o.ref,at);break;case 5:Ky(o);default:IN(d,o),o=et=c_(o,hi),o=MN(d,o,hi)}i.memoizedProps=i.pendingProps,o===null?Eh(i):et=o}function Hl(i,o,d,p){ni=so=null,Ky(o),Rl=null,_u=0;var b=o.return;try{if(dL(i,b,o,d,at)){rr=1,mh(i,Gn(d,i.current)),et=null;return}}catch(S){if(b!==null)throw et=b,S;rr=1,mh(i,Gn(d,i.current)),et=null;return}o.flags&32768?(st||p===1?i=!0:ql||(at&536870912)!==0?i=!1:(ls=i=!0,(p===2||p===9||p===3||p===6)&&(p=Cn.current,p!==null&&p.tag===13&&(p.flags|=16384))),fO(o,i)):Eh(o)}function Eh(i){var o=i;do{if((o.flags&32768)!==0){fO(o,ls);return}i=o.return;var d=mL(o.alternate,o,hi);if(d!==null){et=d;return}if(o=o.sibling,o!==null){et=o;return}et=o=i}while(o!==null);rr===0&&(rr=5)}function fO(i,o){do{var d=pL(i.alternate,i);if(d!==null){d.flags&=32767,et=d;return}if(d=i.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!o&&(i=i.sibling,i!==null)){et=i;return}et=i=d}while(i!==null);rr=6,et=null}function hO(i,o,d,p,b,S,A,P,$){i.cancelPendingCommit=null;do Ah();while(xr!==0);if((vt&6)!==0)throw Error(n(327));if(o!==null){if(o===i.current)throw Error(n(177));if(S=o.lanes|o.childLanes,S|=yy,r3(i,d,S,A,P,$),i===Tt&&(et=Tt=null,at=0),Kl=o,ds=i,mi=d,Nv=S,Ov=b,rO=p,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,EL(Ft,function(){return vO(),null})):(i.callbackNode=null,i.callbackPriority=0),p=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||p){p=B.T,B.T=null,b=Q.p,Q.p=2,A=vt,vt|=4;try{gL(i,o,d)}finally{vt=A,Q.p=b,B.T=p}}xr=1,mO(),pO(),gO()}}function mO(){if(xr===1){xr=0;var i=ds,o=Kl,d=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||d){d=B.T,B.T=null;var p=Q.p;Q.p=2;var b=vt;vt|=4;try{GN(o,i);var S=zv,A=e_(i.containerInfo),P=S.focusedElem,$=S.selectionRange;if(A!==P&&P&&P.ownerDocument&&ZS(P.ownerDocument.documentElement,P)){if($!==null&&fy(P)){var J=$.start,oe=$.end;if(oe===void 0&&(oe=J),"selectionStart"in P)P.selectionStart=J,P.selectionEnd=Math.min(oe,P.value.length);else{var de=P.ownerDocument||document,ee=de&&de.defaultView||window;if(ee.getSelection){var re=ee.getSelection(),Ae=P.textContent.length,Be=Math.min($.start,Ae),At=$.end===void 0?Be:Math.min($.end,Ae);!re.extend&&Be>At&&(A=At,At=Be,Be=A);var H=JS(P,Be),F=JS(P,At);if(H&&F&&(re.rangeCount!==1||re.anchorNode!==H.node||re.anchorOffset!==H.offset||re.focusNode!==F.node||re.focusOffset!==F.offset)){var X=de.createRange();X.setStart(H.node,H.offset),re.removeAllRanges(),Be>At?(re.addRange(X),re.extend(F.node,F.offset)):(X.setEnd(F.node,F.offset),re.addRange(X))}}}}for(de=[],re=P;re=re.parentNode;)re.nodeType===1&&de.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<de.length;P++){var ce=de[P];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}Uh=!!Uv,zv=Uv=null}finally{vt=b,Q.p=p,B.T=d}}i.current=o,xr=2}}function pO(){if(xr===2){xr=0;var i=ds,o=Kl,d=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||d){d=B.T,B.T=null;var p=Q.p;Q.p=2;var b=vt;vt|=4;try{FN(i,o.alternate,o)}finally{vt=b,Q.p=p,B.T=d}}xr=3}}function gO(){if(xr===4||xr===3){xr=0,Ke();var i=ds,o=Kl,d=mi,p=rO;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?xr=5:(xr=0,Kl=ds=null,yO(i,i.pendingLanes));var b=i.pendingLanes;if(b===0&&(us=null),Vg(d),o=o.stateNode,er&&typeof er.onCommitFiberRoot=="function")try{er.onCommitFiberRoot(Mt,o,void 0,(o.current.flags&128)===128)}catch{}if(p!==null){o=B.T,b=Q.p,Q.p=2,B.T=null;try{for(var S=i.onRecoverableError,A=0;A<p.length;A++){var P=p[A];S(P.value,{componentStack:P.stack})}}finally{B.T=o,Q.p=b}}(mi&3)!==0&&Ah(),Da(i),b=i.pendingLanes,(d&261930)!==0&&(b&42)!==0?i===Ev?zu++:(zu=0,Ev=i):zu=0,qu(0)}}function yO(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,ju(o)))}function Ah(){return mO(),pO(),gO(),vO()}function vO(){if(xr!==5)return!1;var i=ds,o=Nv;Nv=0;var d=Vg(mi),p=B.T,b=Q.p;try{Q.p=32>d?32:d,B.T=null,d=Ov,Ov=null;var S=ds,A=mi;if(xr=0,Kl=ds=null,mi=0,(vt&6)!==0)throw Error(n(331));var P=vt;if(vt|=4,ZN(S.current),YN(S,S.current,A,d),vt=P,qu(0,!1),er&&typeof er.onPostCommitFiberRoot=="function")try{er.onPostCommitFiberRoot(Mt,S)}catch{}return!0}finally{Q.p=b,B.T=p,yO(i,o)}}function bO(i,o,d){o=Gn(d,o),o=iv(i.stateNode,o,2),i=as(i,o,2),i!==null&&(lu(i,2),Da(i))}function St(i,o,d){if(i.tag===3)bO(i,i,d);else for(;o!==null;){if(o.tag===3){bO(o,i,d);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(us===null||!us.has(p))){i=Gn(d,i),d=xN(2),p=as(o,d,2),p!==null&&(wN(d,p,o,i),lu(p,2),Da(p));break}}o=o.return}}function kv(i,o,d){var p=i.pingCache;if(p===null){p=i.pingCache=new bL;var b=new Set;p.set(o,b)}else b=p.get(o),b===void 0&&(b=new Set,p.set(o,b));b.has(d)||(jv=!0,b.add(d),i=_L.bind(null,i,o,d),o.then(i,i))}function _L(i,o,d){var p=i.pingCache;p!==null&&p.delete(o),i.pingedLanes|=i.suspendedLanes&d,i.warmLanes&=~d,Tt===i&&(at&d)===d&&(rr===4||rr===3&&(at&62914560)===at&&300>ze()-jh?(vt&2)===0&&Ql(i,0):Sv|=d,Fl===at&&(Fl=0)),Da(i)}function xO(i,o){o===0&&(o=mS()),i=no(i,o),i!==null&&(lu(i,o),Da(i))}function NL(i){var o=i.memoizedState,d=0;o!==null&&(d=o.retryLane),xO(i,d)}function OL(i,o){var d=0;switch(i.tag){case 31:case 13:var p=i.stateNode,b=i.memoizedState;b!==null&&(d=b.retryLane);break;case 19:p=i.stateNode;break;case 22:p=i.stateNode._retryCache;break;default:throw Error(n(314))}p!==null&&p.delete(o),xO(i,d)}function EL(i,o){return ae(i,o)}var Ch=null,Vl=null,Pv=!1,kh=!1,Tv=!1,hs=0;function Da(i){i!==Vl&&i.next===null&&(Vl===null?Ch=Vl=i:Vl=Vl.next=i),kh=!0,Pv||(Pv=!0,CL())}function qu(i,o){if(!Tv&&kh){Tv=!0;do for(var d=!1,p=Ch;p!==null;){if(i!==0){var b=p.pendingLanes;if(b===0)var S=0;else{var A=p.suspendedLanes,P=p.pingedLanes;S=(1<<31-nn(42|i)+1)-1,S&=b&~(A&~P),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(d=!0,_O(p,S))}else S=at,S=Mf(p,p===Tt?S:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(S&3)===0||ou(p,S)||(d=!0,_O(p,S));p=p.next}while(d);Tv=!1}}function AL(){wO()}function wO(){kh=Pv=!1;var i=0;hs!==0&&$L()&&(i=hs);for(var o=ze(),d=null,p=Ch;p!==null;){var b=p.next,S=jO(p,o);S===0?(p.next=null,d===null?Ch=b:d.next=b,b===null&&(Vl=d)):(d=p,(i!==0||(S&3)!==0)&&(kh=!0)),p=b}xr!==0&&xr!==5||qu(i),hs!==0&&(hs=0)}function jO(i,o){for(var d=i.suspendedLanes,p=i.pingedLanes,b=i.expirationTimes,S=i.pendingLanes&-62914561;0<S;){var A=31-nn(S),P=1<<A,$=b[A];$===-1?((P&d)===0||(P&p)!==0)&&(b[A]=t3(P,o)):$<=o&&(i.expiredLanes|=P),S&=~P}if(o=Tt,d=at,d=Mf(i,i===o?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p=i.callbackNode,d===0||i===o&&(jt===2||jt===9)||i.cancelPendingCommit!==null)return p!==null&&p!==null&&Z(p),i.callbackNode=null,i.callbackPriority=0;if((d&3)===0||ou(i,d)){if(o=d&-d,o===i.callbackPriority)return o;switch(p!==null&&Z(p),Vg(d)){case 2:case 8:d=yt;break;case 32:d=Ft;break;case 268435456:d=Zt;break;default:d=Ft}return p=SO.bind(null,i),d=ae(d,p),i.callbackPriority=o,i.callbackNode=d,o}return p!==null&&p!==null&&Z(p),i.callbackPriority=2,i.callbackNode=null,2}function SO(i,o){if(xr!==0&&xr!==5)return i.callbackNode=null,i.callbackPriority=0,null;var d=i.callbackNode;if(Ah()&&i.callbackNode!==d)return null;var p=at;return p=Mf(i,i===Tt?p:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p===0?null:(aO(i,p,o),jO(i,ze()),i.callbackNode!=null&&i.callbackNode===d?SO.bind(null,i):null)}function _O(i,o){if(Ah())return null;aO(i,o,!0)}function CL(){zL(function(){(vt&6)!==0?ae(nt,AL):wO()})}function Dv(){if(hs===0){var i=Tl;i===0&&(i=ha,ha<<=1,(ha&261888)===0&&(ha=256)),hs=i}return hs}function NO(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Bf(""+i)}function OO(i,o){var d=o.ownerDocument.createElement("input");return d.name=o.name,d.value=o.value,i.id&&d.setAttribute("form",i.id),o.parentNode.insertBefore(d,o),i=new FormData(i),d.parentNode.removeChild(d),i}function kL(i,o,d,p,b){if(o==="submit"&&d&&d.stateNode===b){var S=NO((b[fn]||null).action),A=p.submitter;A&&(o=(o=A[fn]||null)?NO(o.formAction):A.getAttribute("formAction"),o!==null&&(S=o,A=null));var P=new qf("action","action",null,p,b);i.push({event:P,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(hs!==0){var $=A?OO(b,A):new FormData(b);Zy(d,{pending:!0,data:$,method:b.method,action:S},null,$)}}else typeof S=="function"&&(P.preventDefault(),$=A?OO(b,A):new FormData(b),Zy(d,{pending:!0,data:$,method:b.method,action:S},S,$))},currentTarget:b}]})}}for(var Mv=0;Mv<gy.length;Mv++){var Rv=gy[Mv],PL=Rv.toLowerCase(),TL=Rv[0].toUpperCase()+Rv.slice(1);ma(PL,"on"+TL)}ma(n_,"onAnimationEnd"),ma(a_,"onAnimationIteration"),ma(i_,"onAnimationStart"),ma("dblclick","onDoubleClick"),ma("focusin","onFocus"),ma("focusout","onBlur"),ma(G3,"onTransitionRun"),ma(W3,"onTransitionStart"),ma(Y3,"onTransitionCancel"),ma(s_,"onTransitionEnd"),vl("onMouseEnter",["mouseout","mouseover"]),vl("onMouseLeave",["mouseout","mouseover"]),vl("onPointerEnter",["pointerout","pointerover"]),vl("onPointerLeave",["pointerout","pointerover"]),Zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fu));function EO(i,o){o=(o&4)!==0;for(var d=0;d<i.length;d++){var p=i[d],b=p.event;p=p.listeners;e:{var S=void 0;if(o)for(var A=p.length-1;0<=A;A--){var P=p[A],$=P.instance,J=P.currentTarget;if(P=P.listener,$!==S&&b.isPropagationStopped())break e;S=P,b.currentTarget=J;try{S(b)}catch(oe){Qf(oe)}b.currentTarget=null,S=$}else for(A=0;A<p.length;A++){if(P=p[A],$=P.instance,J=P.currentTarget,P=P.listener,$!==S&&b.isPropagationStopped())break e;S=P,b.currentTarget=J;try{S(b)}catch(oe){Qf(oe)}b.currentTarget=null,S=$}}}}function tt(i,o){var d=o[Gg];d===void 0&&(d=o[Gg]=new Set);var p=i+"__bubble";d.has(p)||(AO(o,i,2,!1),d.add(p))}function Iv(i,o,d){var p=0;o&&(p|=4),AO(d,i,p,o)}var Ph="_reactListening"+Math.random().toString(36).slice(2);function Lv(i){if(!i[Ph]){i[Ph]=!0,wS.forEach(function(d){d!=="selectionchange"&&(DL.has(d)||Iv(d,!1,i),Iv(d,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Ph]||(o[Ph]=!0,Iv("selectionchange",!1,o))}}function AO(i,o,d,p){switch(nE(o)){case 2:var b=oB;break;case 8:b=lB;break;default:b=Jv}d=b.bind(null,o,d,i),b=void 0,!ny||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(b=!0),p?b!==void 0?i.addEventListener(o,d,{capture:!0,passive:b}):i.addEventListener(o,d,!0):b!==void 0?i.addEventListener(o,d,{passive:b}):i.addEventListener(o,d,!1)}function Bv(i,o,d,p,b){var S=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var A=p.tag;if(A===3||A===4){var P=p.stateNode.containerInfo;if(P===b)break;if(A===4)for(A=p.return;A!==null;){var $=A.tag;if(($===3||$===4)&&A.stateNode.containerInfo===b)return;A=A.return}for(;P!==null;){if(A=pl(P),A===null)return;if($=A.tag,$===5||$===6||$===26||$===27){p=S=A;continue e}P=P.parentNode}}p=p.return}DS(function(){var J=S,oe=ty(d),de=[];e:{var ee=o_.get(i);if(ee!==void 0){var re=qf,Ae=i;switch(i){case"keypress":if(Uf(d)===0)break e;case"keydown":case"keyup":re=O3;break;case"focusin":Ae="focus",re=oy;break;case"focusout":Ae="blur",re=oy;break;case"beforeblur":case"afterblur":re=oy;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=IS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=m3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=C3;break;case n_:case a_:case i_:re=y3;break;case s_:re=P3;break;case"scroll":case"scrollend":re=f3;break;case"wheel":re=D3;break;case"copy":case"cut":case"paste":re=b3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=BS;break;case"toggle":case"beforetoggle":re=R3}var Be=(o&4)!==0,At=!Be&&(i==="scroll"||i==="scrollend"),H=Be?ee!==null?ee+"Capture":null:ee;Be=[];for(var F=J,X;F!==null;){var ce=F;if(X=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||X===null||H===null||(ce=du(F,H),ce!=null&&Be.push(Ku(F,ce,X))),At)break;F=F.return}0<Be.length&&(ee=new re(ee,Ae,null,d,oe),de.push({event:ee,listeners:Be}))}}if((o&7)===0){e:{if(ee=i==="mouseover"||i==="pointerover",re=i==="mouseout"||i==="pointerout",ee&&d!==ey&&(Ae=d.relatedTarget||d.fromElement)&&(pl(Ae)||Ae[ml]))break e;if((re||ee)&&(ee=oe.window===oe?oe:(ee=oe.ownerDocument)?ee.defaultView||ee.parentWindow:window,re?(Ae=d.relatedTarget||d.toElement,re=J,Ae=Ae?pl(Ae):null,Ae!==null&&(At=s(Ae),Be=Ae.tag,Ae!==At||Be!==5&&Be!==27&&Be!==6)&&(Ae=null)):(re=null,Ae=J),re!==Ae)){if(Be=IS,ce="onMouseLeave",H="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(Be=BS,ce="onPointerLeave",H="onPointerEnter",F="pointer"),At=re==null?ee:uu(re),X=Ae==null?ee:uu(Ae),ee=new Be(ce,F+"leave",re,d,oe),ee.target=At,ee.relatedTarget=X,ce=null,pl(oe)===J&&(Be=new Be(H,F+"enter",Ae,d,oe),Be.target=X,Be.relatedTarget=At,ce=Be),At=ce,re&&Ae)t:{for(Be=ML,H=re,F=Ae,X=0,ce=H;ce;ce=Be(ce))X++;ce=0;for(var Ie=F;Ie;Ie=Be(Ie))ce++;for(;0<X-ce;)H=Be(H),X--;for(;0<ce-X;)F=Be(F),ce--;for(;X--;){if(H===F||F!==null&&H===F.alternate){Be=H;break t}H=Be(H),F=Be(F)}Be=null}else Be=null;re!==null&&CO(de,ee,re,Be,!1),Ae!==null&&At!==null&&CO(de,At,Ae,Be,!0)}}e:{if(ee=J?uu(J):window,re=ee.nodeName&&ee.nodeName.toLowerCase(),re==="select"||re==="input"&&ee.type==="file")var ut=HS;else if(KS(ee))if(VS)ut=Q3;else{ut=F3;var ke=q3}else re=ee.nodeName,!re||re.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?J&&Zg(J.elementType)&&(ut=HS):ut=K3;if(ut&&(ut=ut(i,J))){QS(de,ut,d,oe);break e}ke&&ke(i,ee,J),i==="focusout"&&J&&ee.type==="number"&&J.memoizedProps.value!=null&&Jg(ee,"number",ee.value)}switch(ke=J?uu(J):window,i){case"focusin":(KS(ke)||ke.contentEditable==="true")&&(_l=ke,hy=J,bu=null);break;case"focusout":bu=hy=_l=null;break;case"mousedown":my=!0;break;case"contextmenu":case"mouseup":case"dragend":my=!1,t_(de,d,oe);break;case"selectionchange":if(V3)break;case"keydown":case"keyup":t_(de,d,oe)}var Ge;if(cy)e:{switch(i){case"compositionstart":var it="onCompositionStart";break e;case"compositionend":it="onCompositionEnd";break e;case"compositionupdate":it="onCompositionUpdate";break e}it=void 0}else Sl?qS(i,d)&&(it="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(it="onCompositionStart");it&&($S&&d.locale!=="ko"&&(Sl||it!=="onCompositionStart"?it==="onCompositionEnd"&&Sl&&(Ge=MS()):(Xi=oe,ay="value"in Xi?Xi.value:Xi.textContent,Sl=!0)),ke=Th(J,it),0<ke.length&&(it=new LS(it,i,null,d,oe),de.push({event:it,listeners:ke}),Ge?it.data=Ge:(Ge=FS(d),Ge!==null&&(it.data=Ge)))),(Ge=L3?B3(i,d):$3(i,d))&&(it=Th(J,"onBeforeInput"),0<it.length&&(ke=new LS("onBeforeInput","beforeinput",null,d,oe),de.push({event:ke,listeners:it}),ke.data=Ge)),kL(de,i,J,d,oe)}EO(de,o)})}function Ku(i,o,d){return{instance:i,listener:o,currentTarget:d}}function Th(i,o){for(var d=o+"Capture",p=[];i!==null;){var b=i,S=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||S===null||(b=du(i,d),b!=null&&p.unshift(Ku(i,b,S)),b=du(i,o),b!=null&&p.push(Ku(i,b,S))),i.tag===3)return p;i=i.return}return[]}function ML(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function CO(i,o,d,p,b){for(var S=o._reactName,A=[];d!==null&&d!==p;){var P=d,$=P.alternate,J=P.stateNode;if(P=P.tag,$!==null&&$===p)break;P!==5&&P!==26&&P!==27||J===null||($=J,b?(J=du(d,S),J!=null&&A.unshift(Ku(d,J,$))):b||(J=du(d,S),J!=null&&A.push(Ku(d,J,$)))),d=d.return}A.length!==0&&i.push({event:o,listeners:A})}var RL=/\r\n?/g,IL=/\u0000|\uFFFD/g;function kO(i){return(typeof i=="string"?i:""+i).replace(RL,`
`).replace(IL,"")}function PO(i,o){return o=kO(o),kO(i)===o}function Et(i,o,d,p,b,S){switch(d){case"children":typeof p=="string"?o==="body"||o==="textarea"&&p===""||xl(i,p):(typeof p=="number"||typeof p=="bigint")&&o!=="body"&&xl(i,""+p);break;case"className":If(i,"class",p);break;case"tabIndex":If(i,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":If(i,d,p);break;case"style":PS(i,p,S);break;case"data":if(o!=="object"){If(i,"data",p);break}case"src":case"href":if(p===""&&(o!=="a"||d!=="href")){i.removeAttribute(d);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(d);break}p=Bf(""+p),i.setAttribute(d,p);break;case"action":case"formAction":if(typeof p=="function"){i.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(d==="formAction"?(o!=="input"&&Et(i,o,"name",b.name,b,null),Et(i,o,"formEncType",b.formEncType,b,null),Et(i,o,"formMethod",b.formMethod,b,null),Et(i,o,"formTarget",b.formTarget,b,null)):(Et(i,o,"encType",b.encType,b,null),Et(i,o,"method",b.method,b,null),Et(i,o,"target",b.target,b,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(d);break}p=Bf(""+p),i.setAttribute(d,p);break;case"onClick":p!=null&&(i.onclick=Za);break;case"onScroll":p!=null&&tt("scroll",i);break;case"onScrollEnd":p!=null&&tt("scrollend",i);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(d=p.__html,d!=null){if(b.children!=null)throw Error(n(60));i.innerHTML=d}}break;case"multiple":i.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":i.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){i.removeAttribute("xlink:href");break}d=Bf(""+p),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(d,""+p):i.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(d,""):i.removeAttribute(d);break;case"capture":case"download":p===!0?i.setAttribute(d,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(d,p):i.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?i.setAttribute(d,p):i.removeAttribute(d);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?i.removeAttribute(d):i.setAttribute(d,p);break;case"popover":tt("beforetoggle",i),tt("toggle",i),Rf(i,"popover",p);break;case"xlinkActuate":Ja(i,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Ja(i,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Ja(i,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Ja(i,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Ja(i,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Ja(i,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Ja(i,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Ja(i,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Ja(i,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Rf(i,"is",p);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=u3.get(d)||d,Rf(i,d,p))}}function $v(i,o,d,p,b,S){switch(d){case"style":PS(i,p,S);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(d=p.__html,d!=null){if(b.children!=null)throw Error(n(60));i.innerHTML=d}}break;case"children":typeof p=="string"?xl(i,p):(typeof p=="number"||typeof p=="bigint")&&xl(i,""+p);break;case"onScroll":p!=null&&tt("scroll",i);break;case"onScrollEnd":p!=null&&tt("scrollend",i);break;case"onClick":p!=null&&(i.onclick=Za);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jS.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(b=d.endsWith("Capture"),o=d.slice(2,b?d.length-7:void 0),S=i[fn]||null,S=S!=null?S[d]:null,typeof S=="function"&&i.removeEventListener(o,S,b),typeof p=="function")){typeof S!="function"&&S!==null&&(d in i?i[d]=null:i.hasAttribute(d)&&i.removeAttribute(d)),i.addEventListener(o,p,b);break e}d in i?i[d]=p:p===!0?i.setAttribute(d,""):Rf(i,d,p)}}}function qr(i,o,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",i),tt("load",i);var p=!1,b=!1,S;for(S in d)if(d.hasOwnProperty(S)){var A=d[S];if(A!=null)switch(S){case"src":p=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:Et(i,o,S,A,d,null)}}b&&Et(i,o,"srcSet",d.srcSet,d,null),p&&Et(i,o,"src",d.src,d,null);return;case"input":tt("invalid",i);var P=S=A=b=null,$=null,J=null;for(p in d)if(d.hasOwnProperty(p)){var oe=d[p];if(oe!=null)switch(p){case"name":b=oe;break;case"type":A=oe;break;case"checked":$=oe;break;case"defaultChecked":J=oe;break;case"value":S=oe;break;case"defaultValue":P=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(n(137,o));break;default:Et(i,o,p,oe,d,null)}}ES(i,S,P,$,J,A,b,!1);return;case"select":tt("invalid",i),p=A=S=null;for(b in d)if(d.hasOwnProperty(b)&&(P=d[b],P!=null))switch(b){case"value":S=P;break;case"defaultValue":A=P;break;case"multiple":p=P;default:Et(i,o,b,P,d,null)}o=S,d=A,i.multiple=!!p,o!=null?bl(i,!!p,o,!1):d!=null&&bl(i,!!p,d,!0);return;case"textarea":tt("invalid",i),S=b=p=null;for(A in d)if(d.hasOwnProperty(A)&&(P=d[A],P!=null))switch(A){case"value":p=P;break;case"defaultValue":b=P;break;case"children":S=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(n(91));break;default:Et(i,o,A,P,d,null)}CS(i,p,b,S);return;case"option":for($ in d)if(d.hasOwnProperty($)&&(p=d[$],p!=null))switch($){case"selected":i.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Et(i,o,$,p,d,null)}return;case"dialog":tt("beforetoggle",i),tt("toggle",i),tt("cancel",i),tt("close",i);break;case"iframe":case"object":tt("load",i);break;case"video":case"audio":for(p=0;p<Fu.length;p++)tt(Fu[p],i);break;case"image":tt("error",i),tt("load",i);break;case"details":tt("toggle",i);break;case"embed":case"source":case"link":tt("error",i),tt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in d)if(d.hasOwnProperty(J)&&(p=d[J],p!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:Et(i,o,J,p,d,null)}return;default:if(Zg(o)){for(oe in d)d.hasOwnProperty(oe)&&(p=d[oe],p!==void 0&&$v(i,o,oe,p,d,void 0));return}}for(P in d)d.hasOwnProperty(P)&&(p=d[P],p!=null&&Et(i,o,P,p,d,null))}function LL(i,o,d,p){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,S=null,A=null,P=null,$=null,J=null,oe=null;for(re in d){var de=d[re];if(d.hasOwnProperty(re)&&de!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":$=de;default:p.hasOwnProperty(re)||Et(i,o,re,null,p,de)}}for(var ee in p){var re=p[ee];if(de=d[ee],p.hasOwnProperty(ee)&&(re!=null||de!=null))switch(ee){case"type":S=re;break;case"name":b=re;break;case"checked":J=re;break;case"defaultChecked":oe=re;break;case"value":A=re;break;case"defaultValue":P=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(n(137,o));break;default:re!==de&&Et(i,o,ee,re,p,de)}}Xg(i,A,P,$,J,oe,S,b);return;case"select":re=A=P=ee=null;for(S in d)if($=d[S],d.hasOwnProperty(S)&&$!=null)switch(S){case"value":break;case"multiple":re=$;default:p.hasOwnProperty(S)||Et(i,o,S,null,p,$)}for(b in p)if(S=p[b],$=d[b],p.hasOwnProperty(b)&&(S!=null||$!=null))switch(b){case"value":ee=S;break;case"defaultValue":P=S;break;case"multiple":A=S;default:S!==$&&Et(i,o,b,S,p,$)}o=P,d=A,p=re,ee!=null?bl(i,!!d,ee,!1):!!p!=!!d&&(o!=null?bl(i,!!d,o,!0):bl(i,!!d,d?[]:"",!1));return;case"textarea":re=ee=null;for(P in d)if(b=d[P],d.hasOwnProperty(P)&&b!=null&&!p.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:Et(i,o,P,null,p,b)}for(A in p)if(b=p[A],S=d[A],p.hasOwnProperty(A)&&(b!=null||S!=null))switch(A){case"value":ee=b;break;case"defaultValue":re=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(n(91));break;default:b!==S&&Et(i,o,A,b,p,S)}AS(i,ee,re);return;case"option":for(var Ae in d)if(ee=d[Ae],d.hasOwnProperty(Ae)&&ee!=null&&!p.hasOwnProperty(Ae))switch(Ae){case"selected":i.selected=!1;break;default:Et(i,o,Ae,null,p,ee)}for($ in p)if(ee=p[$],re=d[$],p.hasOwnProperty($)&&ee!==re&&(ee!=null||re!=null))switch($){case"selected":i.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:Et(i,o,$,ee,p,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in d)ee=d[Be],d.hasOwnProperty(Be)&&ee!=null&&!p.hasOwnProperty(Be)&&Et(i,o,Be,null,p,ee);for(J in p)if(ee=p[J],re=d[J],p.hasOwnProperty(J)&&ee!==re&&(ee!=null||re!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(n(137,o));break;default:Et(i,o,J,ee,p,re)}return;default:if(Zg(o)){for(var At in d)ee=d[At],d.hasOwnProperty(At)&&ee!==void 0&&!p.hasOwnProperty(At)&&$v(i,o,At,void 0,p,ee);for(oe in p)ee=p[oe],re=d[oe],!p.hasOwnProperty(oe)||ee===re||ee===void 0&&re===void 0||$v(i,o,oe,ee,p,re);return}}for(var H in d)ee=d[H],d.hasOwnProperty(H)&&ee!=null&&!p.hasOwnProperty(H)&&Et(i,o,H,null,p,ee);for(de in p)ee=p[de],re=d[de],!p.hasOwnProperty(de)||ee===re||ee==null&&re==null||Et(i,o,de,ee,p,re)}function TO(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function BL(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,d=performance.getEntriesByType("resource"),p=0;p<d.length;p++){var b=d[p],S=b.transferSize,A=b.initiatorType,P=b.duration;if(S&&P&&TO(A)){for(A=0,P=b.responseEnd,p+=1;p<d.length;p++){var $=d[p],J=$.startTime;if(J>P)break;var oe=$.transferSize,de=$.initiatorType;oe&&TO(de)&&($=$.responseEnd,A+=oe*($<P?1:(P-J)/($-J)))}if(--p,o+=8*(S+A)/(b.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Uv=null,zv=null;function Dh(i){return i.nodeType===9?i:i.ownerDocument}function DO(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function MO(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function qv(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Fv=null;function $L(){var i=window.event;return i&&i.type==="popstate"?i===Fv?!1:(Fv=i,!0):(Fv=null,!1)}var RO=typeof setTimeout=="function"?setTimeout:void 0,UL=typeof clearTimeout=="function"?clearTimeout:void 0,IO=typeof Promise=="function"?Promise:void 0,zL=typeof queueMicrotask=="function"?queueMicrotask:typeof IO<"u"?function(i){return IO.resolve(null).then(i).catch(qL)}:RO;function qL(i){setTimeout(function(){throw i})}function ms(i){return i==="head"}function LO(i,o){var d=o,p=0;do{var b=d.nextSibling;if(i.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"||d==="/&"){if(p===0){i.removeChild(b),Xl(o);return}p--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")p++;else if(d==="html")Qu(i.ownerDocument.documentElement);else if(d==="head"){d=i.ownerDocument.head,Qu(d);for(var S=d.firstChild;S;){var A=S.nextSibling,P=S.nodeName;S[cu]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&S.rel.toLowerCase()==="stylesheet"||d.removeChild(S),S=A}}else d==="body"&&Qu(i.ownerDocument.body);d=b}while(d);Xl(o)}function BO(i,o){var d=i;i=0;do{var p=d.nextSibling;if(d.nodeType===1?o?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(o?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),p&&p.nodeType===8)if(d=p.data,d==="/$"){if(i===0)break;i--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||i++;d=p}while(d)}function Kv(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var d=o;switch(o=o.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":Kv(d),Wg(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}i.removeChild(d)}}function FL(i,o,d,p){for(;i.nodeType===1;){var b=d;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!p&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(p){if(!i[cu])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(S=i.getAttribute("rel"),S==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(S!==b.rel||i.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||i.getAttribute("title")!==(b.title==null?null:b.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(S=i.getAttribute("src"),(S!==(b.src==null?null:b.src)||i.getAttribute("type")!==(b.type==null?null:b.type)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&S&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var S=b.name==null?null:""+b.name;if(b.type==="hidden"&&i.getAttribute("name")===S)return i}else return i;if(i=Zn(i.nextSibling),i===null)break}return null}function KL(i,o,d){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!d||(i=Zn(i.nextSibling),i===null))return null;return i}function $O(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Zn(i.nextSibling),i===null))return null;return i}function Qv(i){return i.data==="$?"||i.data==="$~"}function Hv(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function QL(i,o){var d=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||d.readyState!=="loading")o();else{var p=function(){o(),d.removeEventListener("DOMContentLoaded",p)};d.addEventListener("DOMContentLoaded",p),i._reactRetry=p}}function Zn(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var Vv=null;function UO(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"||d==="/&"){if(o===0)return Zn(i.nextSibling);o--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||o++}i=i.nextSibling}return null}function zO(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(o===0)return i;o--}else d!=="/$"&&d!=="/&"||o++}i=i.previousSibling}return null}function qO(i,o,d){switch(o=Dh(d),i){case"html":if(i=o.documentElement,!i)throw Error(n(452));return i;case"head":if(i=o.head,!i)throw Error(n(453));return i;case"body":if(i=o.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function Qu(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Wg(i)}var ea=new Map,FO=new Set;function Mh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var pi=Q.d;Q.d={f:HL,r:VL,D:GL,C:WL,L:YL,m:XL,X:ZL,S:JL,M:eB};function HL(){var i=pi.f(),o=Nh();return i||o}function VL(i){var o=gl(i);o!==null&&o.tag===5&&o.type==="form"?sN(o):pi.r(i)}var Gl=typeof document>"u"?null:document;function KO(i,o,d){var p=Gl;if(p&&typeof o=="string"&&o){var b=Hn(o);b='link[rel="'+i+'"][href="'+b+'"]',typeof d=="string"&&(b+='[crossorigin="'+d+'"]'),FO.has(b)||(FO.add(b),i={rel:i,crossOrigin:d,href:o},p.querySelector(b)===null&&(o=p.createElement("link"),qr(o,"link",i),Er(o),p.head.appendChild(o)))}}function GL(i){pi.D(i),KO("dns-prefetch",i,null)}function WL(i,o){pi.C(i,o),KO("preconnect",i,o)}function YL(i,o,d){pi.L(i,o,d);var p=Gl;if(p&&i&&o){var b='link[rel="preload"][as="'+Hn(o)+'"]';o==="image"&&d&&d.imageSrcSet?(b+='[imagesrcset="'+Hn(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(b+='[imagesizes="'+Hn(d.imageSizes)+'"]')):b+='[href="'+Hn(i)+'"]';var S=b;switch(o){case"style":S=Wl(i);break;case"script":S=Yl(i)}ea.has(S)||(i=g({rel:"preload",href:o==="image"&&d&&d.imageSrcSet?void 0:i,as:o},d),ea.set(S,i),p.querySelector(b)!==null||o==="style"&&p.querySelector(Hu(S))||o==="script"&&p.querySelector(Vu(S))||(o=p.createElement("link"),qr(o,"link",i),Er(o),p.head.appendChild(o)))}}function XL(i,o){pi.m(i,o);var d=Gl;if(d&&i){var p=o&&typeof o.as=="string"?o.as:"script",b='link[rel="modulepreload"][as="'+Hn(p)+'"][href="'+Hn(i)+'"]',S=b;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=Yl(i)}if(!ea.has(S)&&(i=g({rel:"modulepreload",href:i},o),ea.set(S,i),d.querySelector(b)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Vu(S)))return}p=d.createElement("link"),qr(p,"link",i),Er(p),d.head.appendChild(p)}}}function JL(i,o,d){pi.S(i,o,d);var p=Gl;if(p&&i){var b=yl(p).hoistableStyles,S=Wl(i);o=o||"default";var A=b.get(S);if(!A){var P={loading:0,preload:null};if(A=p.querySelector(Hu(S)))P.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":o},d),(d=ea.get(S))&&Gv(i,d);var $=A=p.createElement("link");Er($),qr($,"link",i),$._p=new Promise(function(J,oe){$.onload=J,$.onerror=oe}),$.addEventListener("load",function(){P.loading|=1}),$.addEventListener("error",function(){P.loading|=2}),P.loading|=4,Rh(A,o,p)}A={type:"stylesheet",instance:A,count:1,state:P},b.set(S,A)}}}function ZL(i,o){pi.X(i,o);var d=Gl;if(d&&i){var p=yl(d).hoistableScripts,b=Yl(i),S=p.get(b);S||(S=d.querySelector(Vu(b)),S||(i=g({src:i,async:!0},o),(o=ea.get(b))&&Wv(i,o),S=d.createElement("script"),Er(S),qr(S,"link",i),d.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},p.set(b,S))}}function eB(i,o){pi.M(i,o);var d=Gl;if(d&&i){var p=yl(d).hoistableScripts,b=Yl(i),S=p.get(b);S||(S=d.querySelector(Vu(b)),S||(i=g({src:i,async:!0,type:"module"},o),(o=ea.get(b))&&Wv(i,o),S=d.createElement("script"),Er(S),qr(S,"link",i),d.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},p.set(b,S))}}function QO(i,o,d,p){var b=(b=ve.current)?Mh(b):null;if(!b)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(o=Wl(d.href),d=yl(b).hoistableStyles,p=d.get(o),p||(p={type:"style",instance:null,count:0,state:null},d.set(o,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){i=Wl(d.href);var S=yl(b).hoistableStyles,A=S.get(i);if(A||(b=b.ownerDocument||b,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(i,A),(S=b.querySelector(Hu(i)))&&!S._p&&(A.instance=S,A.state.loading=5),ea.has(i)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},ea.set(i,d),S||tB(b,i,d,A.state))),o&&p===null)throw Error(n(528,""));return A}if(o&&p!==null)throw Error(n(529,""));return null;case"script":return o=d.async,d=d.src,typeof d=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Yl(d),d=yl(b).hoistableScripts,p=d.get(o),p||(p={type:"script",instance:null,count:0,state:null},d.set(o,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Wl(i){return'href="'+Hn(i)+'"'}function Hu(i){return'link[rel="stylesheet"]['+i+"]"}function HO(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function tB(i,o,d,p){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?p.loading=1:(o=i.createElement("link"),p.preload=o,o.addEventListener("load",function(){return p.loading|=1}),o.addEventListener("error",function(){return p.loading|=2}),qr(o,"link",d),Er(o),i.head.appendChild(o))}function Yl(i){return'[src="'+Hn(i)+'"]'}function Vu(i){return"script[async]"+i}function VO(i,o,d){if(o.count++,o.instance===null)switch(o.type){case"style":var p=i.querySelector('style[data-href~="'+Hn(d.href)+'"]');if(p)return o.instance=p,Er(p),p;var b=g({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return p=(i.ownerDocument||i).createElement("style"),Er(p),qr(p,"style",b),Rh(p,d.precedence,i),o.instance=p;case"stylesheet":b=Wl(d.href);var S=i.querySelector(Hu(b));if(S)return o.state.loading|=4,o.instance=S,Er(S),S;p=HO(d),(b=ea.get(b))&&Gv(p,b),S=(i.ownerDocument||i).createElement("link"),Er(S);var A=S;return A._p=new Promise(function(P,$){A.onload=P,A.onerror=$}),qr(S,"link",p),o.state.loading|=4,Rh(S,d.precedence,i),o.instance=S;case"script":return S=Yl(d.src),(b=i.querySelector(Vu(S)))?(o.instance=b,Er(b),b):(p=d,(b=ea.get(S))&&(p=g({},d),Wv(p,b)),i=i.ownerDocument||i,b=i.createElement("script"),Er(b),qr(b,"link",p),i.head.appendChild(b),o.instance=b);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(p=o.instance,o.state.loading|=4,Rh(p,d.precedence,i));return o.instance}function Rh(i,o,d){for(var p=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=p.length?p[p.length-1]:null,S=b,A=0;A<p.length;A++){var P=p[A];if(P.dataset.precedence===o)S=P;else if(S!==b)break}S?S.parentNode.insertBefore(i,S.nextSibling):(o=d.nodeType===9?d.head:d,o.insertBefore(i,o.firstChild))}function Gv(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Wv(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Ih=null;function GO(i,o,d){if(Ih===null){var p=new Map,b=Ih=new Map;b.set(d,p)}else b=Ih,p=b.get(d),p||(p=new Map,b.set(d,p));if(p.has(i))return p;for(p.set(i,null),d=d.getElementsByTagName(i),b=0;b<d.length;b++){var S=d[b];if(!(S[cu]||S[Br]||i==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var A=S.getAttribute(o)||"";A=i+A;var P=p.get(A);P?P.push(S):p.set(A,[S])}}return p}function WO(i,o,d){i=i.ownerDocument||i,i.head.insertBefore(d,o==="title"?i.querySelector("head > title"):null)}function rB(i,o,d){if(d===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function YO(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function nB(i,o,d,p){if(d.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var b=Wl(p.href),S=o.querySelector(Hu(b));if(S){o=S._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=Lh.bind(i),o.then(i,i)),d.state.loading|=4,d.instance=S,Er(S);return}S=o.ownerDocument||o,p=HO(p),(b=ea.get(b))&&Gv(p,b),S=S.createElement("link"),Er(S);var A=S;A._p=new Promise(function(P,$){A.onload=P,A.onerror=$}),qr(S,"link",p),d.instance=S}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(d,o),(o=d.state.preload)&&(d.state.loading&3)===0&&(i.count++,d=Lh.bind(i),o.addEventListener("load",d),o.addEventListener("error",d))}}var Yv=0;function aB(i,o){return i.stylesheets&&i.count===0&&$h(i,i.stylesheets),0<i.count||0<i.imgCount?function(d){var p=setTimeout(function(){if(i.stylesheets&&$h(i,i.stylesheets),i.unsuspend){var S=i.unsuspend;i.unsuspend=null,S()}},6e4+o);0<i.imgBytes&&Yv===0&&(Yv=62500*BL());var b=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&$h(i,i.stylesheets),i.unsuspend)){var S=i.unsuspend;i.unsuspend=null,S()}},(i.imgBytes>Yv?50:800)+o);return i.unsuspend=d,function(){i.unsuspend=null,clearTimeout(p),clearTimeout(b)}}:null}function Lh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$h(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Bh=null;function $h(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Bh=new Map,o.forEach(iB,i),Bh=null,Lh.call(i))}function iB(i,o){if(!(o.state.loading&4)){var d=Bh.get(i);if(d)var p=d.get(null);else{d=new Map,Bh.set(i,d);for(var b=i.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<b.length;S++){var A=b[S];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(d.set(A.dataset.precedence,A),p=A)}p&&d.set(null,p)}b=o.instance,A=b.getAttribute("data-precedence"),S=d.get(A)||p,S===p&&d.set(null,b),d.set(A,b),this.count++,p=Lh.bind(this),b.addEventListener("load",p),b.addEventListener("error",p),S?S.parentNode.insertBefore(b,S.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(b,i.firstChild)),o.state.loading|=4}}var Gu={$$typeof:E,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function sB(i,o,d,p,b,S,A,P,$){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qg(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qg(0),this.hiddenUpdates=Qg(null),this.identifierPrefix=p,this.onUncaughtError=b,this.onCaughtError=S,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function XO(i,o,d,p,b,S,A,P,$,J,oe,de){return i=new sB(i,o,d,A,$,J,oe,de,P),o=1,S===!0&&(o|=24),S=An(3,null,null,o),i.current=S,S.stateNode=i,o=Cy(),o.refCount++,i.pooledCache=o,o.refCount++,S.memoizedState={element:p,isDehydrated:d,cache:o},Dy(S),i}function JO(i){return i?(i=El,i):El}function ZO(i,o,d,p,b,S){b=JO(b),p.context===null?p.context=b:p.pendingContext=b,p=ns(o),p.payload={element:d},S=S===void 0?null:S,S!==null&&(p.callback=S),d=as(i,p,o),d!==null&&(vn(d,i,o),Ou(d,i,o))}function eE(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<o?d:o}}function Xv(i,o){eE(i,o),(i=i.alternate)&&eE(i,o)}function tE(i){if(i.tag===13||i.tag===31){var o=no(i,67108864);o!==null&&vn(o,i,67108864),Xv(i,67108864)}}function rE(i){if(i.tag===13||i.tag===31){var o=Dn();o=Hg(o);var d=no(i,o);d!==null&&vn(d,i,o),Xv(i,o)}}var Uh=!0;function oB(i,o,d,p){var b=B.T;B.T=null;var S=Q.p;try{Q.p=2,Jv(i,o,d,p)}finally{Q.p=S,B.T=b}}function lB(i,o,d,p){var b=B.T;B.T=null;var S=Q.p;try{Q.p=8,Jv(i,o,d,p)}finally{Q.p=S,B.T=b}}function Jv(i,o,d,p){if(Uh){var b=Zv(p);if(b===null)Bv(i,o,p,zh,d),aE(i,p);else if(uB(b,i,o,d,p))p.stopPropagation();else if(aE(i,p),o&4&&-1<cB.indexOf(i)){for(;b!==null;){var S=gl(b);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var A=Js(S.pendingLanes);if(A!==0){var P=S;for(P.pendingLanes|=2,P.entangledLanes|=2;A;){var $=1<<31-nn(A);P.entanglements[1]|=$,A&=~$}Da(S),(vt&6)===0&&(Sh=ze()+500,qu(0))}}break;case 31:case 13:P=no(S,2),P!==null&&vn(P,S,2),Nh(),Xv(S,2)}if(S=Zv(p),S===null&&Bv(i,o,p,zh,d),S===b)break;b=S}b!==null&&p.stopPropagation()}else Bv(i,o,p,null,d)}}function Zv(i){return i=ty(i),e0(i)}var zh=null;function e0(i){if(zh=null,i=pl(i),i!==null){var o=s(i);if(o===null)i=null;else{var d=o.tag;if(d===13){if(i=l(o),i!==null)return i;i=null}else if(d===31){if(i=u(o),i!==null)return i;i=null}else if(d===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return zh=i,null}function nE(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(be()){case nt:return 2;case yt:return 8;case Ft:case Kt:return 32;case Zt:return 268435456;default:return 32}default:return 32}}var t0=!1,ps=null,gs=null,ys=null,Wu=new Map,Yu=new Map,vs=[],cB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function aE(i,o){switch(i){case"focusin":case"focusout":ps=null;break;case"dragenter":case"dragleave":gs=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":Wu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yu.delete(o.pointerId)}}function Xu(i,o,d,p,b,S){return i===null||i.nativeEvent!==S?(i={blockedOn:o,domEventName:d,eventSystemFlags:p,nativeEvent:S,targetContainers:[b]},o!==null&&(o=gl(o),o!==null&&tE(o)),i):(i.eventSystemFlags|=p,o=i.targetContainers,b!==null&&o.indexOf(b)===-1&&o.push(b),i)}function uB(i,o,d,p,b){switch(o){case"focusin":return ps=Xu(ps,i,o,d,p,b),!0;case"dragenter":return gs=Xu(gs,i,o,d,p,b),!0;case"mouseover":return ys=Xu(ys,i,o,d,p,b),!0;case"pointerover":var S=b.pointerId;return Wu.set(S,Xu(Wu.get(S)||null,i,o,d,p,b)),!0;case"gotpointercapture":return S=b.pointerId,Yu.set(S,Xu(Yu.get(S)||null,i,o,d,p,b)),!0}return!1}function iE(i){var o=pl(i.target);if(o!==null){var d=s(o);if(d!==null){if(o=d.tag,o===13){if(o=l(d),o!==null){i.blockedOn=o,bS(i.priority,function(){rE(d)});return}}else if(o===31){if(o=u(d),o!==null){i.blockedOn=o,bS(i.priority,function(){rE(d)});return}}else if(o===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function qh(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var d=Zv(i.nativeEvent);if(d===null){d=i.nativeEvent;var p=new d.constructor(d.type,d);ey=p,d.target.dispatchEvent(p),ey=null}else return o=gl(d),o!==null&&tE(o),i.blockedOn=d,!1;o.shift()}return!0}function sE(i,o,d){qh(i)&&d.delete(o)}function dB(){t0=!1,ps!==null&&qh(ps)&&(ps=null),gs!==null&&qh(gs)&&(gs=null),ys!==null&&qh(ys)&&(ys=null),Wu.forEach(sE),Yu.forEach(sE)}function Fh(i,o){i.blockedOn===o&&(i.blockedOn=null,t0||(t0=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,dB)))}var Kh=null;function oE(i){Kh!==i&&(Kh=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Kh===i&&(Kh=null);for(var o=0;o<i.length;o+=3){var d=i[o],p=i[o+1],b=i[o+2];if(typeof p!="function"){if(e0(p||d)===null)continue;break}var S=gl(d);S!==null&&(i.splice(o,3),o-=3,Zy(S,{pending:!0,data:b,method:d.method,action:p},p,b))}}))}function Xl(i){function o($){return Fh($,i)}ps!==null&&Fh(ps,i),gs!==null&&Fh(gs,i),ys!==null&&Fh(ys,i),Wu.forEach(o),Yu.forEach(o);for(var d=0;d<vs.length;d++){var p=vs[d];p.blockedOn===i&&(p.blockedOn=null)}for(;0<vs.length&&(d=vs[0],d.blockedOn===null);)iE(d),d.blockedOn===null&&vs.shift();if(d=(i.ownerDocument||i).$$reactFormReplay,d!=null)for(p=0;p<d.length;p+=3){var b=d[p],S=d[p+1],A=b[fn]||null;if(typeof S=="function")A||oE(d);else if(A){var P=null;if(S&&S.hasAttribute("formAction")){if(b=S,A=S[fn]||null)P=A.formAction;else if(e0(b)!==null)continue}else P=A.action;typeof P=="function"?d[p+1]=P:(d.splice(p,3),p-=3),oE(d)}}}function lE(){function i(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(A){return b=A})},focusReset:"manual",scroll:"manual"})}function o(){b!==null&&(b(),b=null),p||setTimeout(d,20)}function d(){if(!p&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,b=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(d,100),function(){p=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),b!==null&&(b(),b=null)}}}function r0(i){this._internalRoot=i}Qh.prototype.render=r0.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(n(409));var d=o.current,p=Dn();ZO(d,p,i,o,null,null)},Qh.prototype.unmount=r0.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;ZO(i.current,2,null,i,null,null),Nh(),o[ml]=null}};function Qh(i){this._internalRoot=i}Qh.prototype.unstable_scheduleHydration=function(i){if(i){var o=vS();i={blockedOn:null,target:i,priority:o};for(var d=0;d<vs.length&&o!==0&&o<vs[d].priority;d++);vs.splice(d,0,i),d===0&&iE(i)}};var cE=t.version;if(cE!=="19.2.4")throw Error(n(527,cE,"19.2.4"));Q.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=h(o),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var fB={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hh.isDisabled&&Hh.supportsFiber)try{Mt=Hh.inject(fB),er=Hh}catch{}}return Zu.createRoot=function(i,o){if(!a(i))throw Error(n(299));var d=!1,p="",b=gN,S=yN,A=vN;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(b=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=XO(i,1,!1,null,null,d,p,null,b,S,A,lE),i[ml]=o.current,Lv(i),new r0(o)},Zu.hydrateRoot=function(i,o,d){if(!a(i))throw Error(n(299));var p=!1,b="",S=gN,A=yN,P=vN,$=null;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(S=d.onUncaughtError),d.onCaughtError!==void 0&&(A=d.onCaughtError),d.onRecoverableError!==void 0&&(P=d.onRecoverableError),d.formState!==void 0&&($=d.formState)),o=XO(i,1,!0,o,d??null,p,b,$,S,A,P,lE),o.context=JO(null),d=o.current,p=Dn(),p=Hg(p),b=ns(p),b.callback=null,as(d,b,p),d=p,o.current.lanes=d,lu(o,d),Da(o),i[ml]=o.current,Lv(i),new Qh(o)},Zu.version="19.2.4",Zu}var xE;function NB(){if(xE)return o0.exports;xE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),o0.exports=_B(),o0.exports}var OB=NB();const EB=Wa(OB);/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var wE="popstate";function AB(e={}){function t(a,s){let{pathname:l="/",search:u="",hash:f=""}=rl(a.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),ax("",{pathname:l,search:u,hash:f},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(a,s){let l=a.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let f=a.location.href,h=f.indexOf("#");u=h===-1?f:f.slice(0,h)}return u+"#"+(typeof s=="string"?s:xd(s))}function n(a,s){la(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return kB(t,r,n,e)}function Wt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function la(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function CB(){return Math.random().toString(36).substring(2,10)}function jE(e,t){return{usr:e.state,key:e.key,idx:t}}function ax(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?rl(t):t,state:r,key:t&&t.key||n||CB()}}function xd({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function rl(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function kB(e,t,r,n={}){let{window:a=document.defaultView,v5Compat:s=!1}=n,l=a.history,u="POP",f=null,h=m();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function m(){return(l.state||{idx:null}).idx}function g(){u="POP";let _=m(),N=_==null?null:_-h;h=_,f&&f({action:u,location:x.location,delta:N})}function y(_,N){u="PUSH";let O=ax(x.location,_,N);r&&r(O,_),h=m()+1;let E=jE(O,h),C=x.createHref(O);try{l.pushState(E,"",C)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;a.location.assign(C)}s&&f&&f({action:u,location:x.location,delta:1})}function v(_,N){u="REPLACE";let O=ax(x.location,_,N);r&&r(O,_),h=m();let E=jE(O,h),C=x.createHref(O);l.replaceState(E,"",C),s&&f&&f({action:u,location:x.location,delta:0})}function w(_){return PB(_)}let x={get action(){return u},get location(){return e(a,l)},listen(_){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(wE,g),f=_,()=>{a.removeEventListener(wE,g),f=null}},createHref(_){return t(a,_)},createURL:w,encodeLocation(_){let N=w(_);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:y,replace:v,go(_){return l.go(_)}};return x}function PB(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Wt(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:xd(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function TT(e,t,r="/"){return TB(e,t,r,!1)}function TB(e,t,r,n){let a=typeof t=="string"?rl(t):t,s=Ti(a.pathname||"/",r);if(s==null)return null;let l=DT(e);DB(l);let u=null;for(let f=0;u==null&&f<l.length;++f){let h=KB(s);u=qB(l[f],h,n)}return u}function DT(e,t=[],r=[],n="",a=!1){let s=(l,u,f=a,h)=>{let m={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(n)&&f)return;Wt(m.relativePath.startsWith(n),`Absolute route path "${m.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(n.length)}let g=Ai([n,m.relativePath]),y=r.concat(m);l.children&&l.children.length>0&&(Wt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),DT(l.children,t,y,g,f)),!(l.path==null&&!l.index)&&t.push({path:g,score:UB(g,l.index),routesMeta:y})};return e.forEach((l,u)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))s(l,u);else for(let h of MT(l.path))s(l,u,!0,h)}),t}function MT(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let l=MT(n.join("/")),u=[];return u.push(...l.map(f=>f===""?s:[s,f].join("/"))),a&&u.push(...l),u.map(f=>e.startsWith("/")&&f===""?"/":f)}function DB(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:zB(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var MB=/^:[\w-]+$/,RB=3,IB=2,LB=1,BB=10,$B=-2,SE=e=>e==="*";function UB(e,t){let r=e.split("/"),n=r.length;return r.some(SE)&&(n+=$B),t&&(n+=IB),r.filter(a=>!SE(a)).reduce((a,s)=>a+(MB.test(s)?RB:s===""?LB:BB),n)}function zB(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function qB(e,t,r=!1){let{routesMeta:n}=e,a={},s="/",l=[];for(let u=0;u<n.length;++u){let f=n[u],h=u===n.length-1,m=s==="/"?t:t.slice(s.length)||"/",g=Cm({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},m),y=f.route;if(!g&&h&&r&&!n[n.length-1].route.index&&(g=Cm({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},m)),!g)return null;Object.assign(a,g.params),l.push({params:a,pathname:Ai([s,g.pathname]),pathnameBase:GB(Ai([s,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(s=Ai([s,g.pathnameBase]))}return l}function Cm(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=FB(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let s=a[0],l=s.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:n.reduce((h,{paramName:m,isOptional:g},y)=>{if(m==="*"){let w=u[y]||"";l=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const v=u[y];return g&&!v?h[m]=void 0:h[m]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:l,pattern:e}}function FB(e,t=!1,r=!0){la(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,f)=>(n.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function KB(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return la(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ti(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var QB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function HB(e,t="/"){let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?rl(e):e,s;return r?(r=r.replace(/\/\/+/g,"/"),r.startsWith("/")?s=_E(r.substring(1),"/"):s=_E(r,t)):s=t,{pathname:s,search:WB(n),hash:YB(a)}}function _E(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function d0(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function VB(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Lw(e){let t=VB(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function Bw(e,t,r,n=!1){let a;typeof e=="string"?a=rl(e):(a={...e},Wt(!a.pathname||!a.pathname.includes("?"),d0("?","pathname","search",a)),Wt(!a.pathname||!a.pathname.includes("#"),d0("#","pathname","hash",a)),Wt(!a.search||!a.search.includes("#"),d0("#","search","hash",a)));let s=e===""||a.pathname==="",l=s?"/":a.pathname,u;if(l==null)u=r;else{let g=t.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),g-=1;a.pathname=y.join("/")}u=g>=0?t[g]:"/"}let f=HB(a,u),h=l&&l!=="/"&&l.endsWith("/"),m=(s||l===".")&&r.endsWith("/");return!f.pathname.endsWith("/")&&(h||m)&&(f.pathname+="/"),f}var Ai=e=>e.join("/").replace(/\/\/+/g,"/"),GB=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),WB=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,YB=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,XB=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function JB(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function ZB(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var RT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function IT(e,t){let r=e;if(typeof r!="string"||!QB.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,a=!1;if(RT)try{let s=new URL(window.location.href),l=r.startsWith("//")?new URL(s.protocol+r):new URL(r),u=Ti(l.pathname,t);l.origin===s.origin&&u!=null?r=u+l.search+l.hash:a=!0}catch{la(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:a,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var LT=["POST","PUT","PATCH","DELETE"];new Set(LT);var e6=["GET",...LT];new Set(e6);var Qc=j.createContext(null);Qc.displayName="DataRouter";var Dp=j.createContext(null);Dp.displayName="DataRouterState";var t6=j.createContext(!1),BT=j.createContext({isTransitioning:!1});BT.displayName="ViewTransition";var r6=j.createContext(new Map);r6.displayName="Fetchers";var n6=j.createContext(null);n6.displayName="Await";var qn=j.createContext(null);qn.displayName="Navigation";var Zd=j.createContext(null);Zd.displayName="Location";var Aa=j.createContext({outlet:null,matches:[],isDataRoute:!1});Aa.displayName="Route";var $w=j.createContext(null);$w.displayName="RouteError";var $T="REACT_ROUTER_ERROR",a6="REDIRECT",i6="ROUTE_ERROR_RESPONSE";function s6(e){if(e.startsWith(`${$T}:${a6}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function o6(e){if(e.startsWith(`${$T}:${i6}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new XB(t.status,t.statusText,t.data)}catch{}}function l6(e,{relative:t}={}){Wt(Hc(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=j.useContext(qn),{hash:a,pathname:s,search:l}=ef(e,{relative:t}),u=s;return r!=="/"&&(u=s==="/"?r:Ai([r,s])),n.createHref({pathname:u,search:l,hash:a})}function Hc(){return j.useContext(Zd)!=null}function Fn(){return Wt(Hc(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Zd).location}var UT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zT(e){j.useContext(qn).static||j.useLayoutEffect(e)}function Nt(){let{isDataRoute:e}=j.useContext(Aa);return e?w6():c6()}function c6(){Wt(Hc(),"useNavigate() may be used only in the context of a <Router> component.");let e=j.useContext(Qc),{basename:t,navigator:r}=j.useContext(qn),{matches:n}=j.useContext(Aa),{pathname:a}=Fn(),s=JSON.stringify(Lw(n)),l=j.useRef(!1);return zT(()=>{l.current=!0}),j.useCallback((f,h={})=>{if(la(l.current,UT),!l.current)return;if(typeof f=="number"){r.go(f);return}let m=Bw(f,JSON.parse(s),a,h.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Ai([t,m.pathname])),(h.replace?r.replace:r.push)(m,h.state,h)},[t,r,s,a,e])}j.createContext(null);function Kn(){let{matches:e}=j.useContext(Aa),t=e[e.length-1];return t?t.params:{}}function ef(e,{relative:t}={}){let{matches:r}=j.useContext(Aa),{pathname:n}=Fn(),a=JSON.stringify(Lw(r));return j.useMemo(()=>Bw(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function u6(e,t){return qT(e,t)}function qT(e,t,r,n,a){var O;Wt(Hc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=j.useContext(qn),{matches:l}=j.useContext(Aa),u=l[l.length-1],f=u?u.params:{},h=u?u.pathname:"/",m=u?u.pathnameBase:"/",g=u&&u.route;{let E=g&&g.path||"";KT(h,!g||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let y=Fn(),v;if(t){let E=typeof t=="string"?rl(t):t;Wt(m==="/"||((O=E.pathname)==null?void 0:O.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${E.pathname}" was given in the \`location\` prop.`),v=E}else v=y;let w=v.pathname||"/",x=w;if(m!=="/"){let E=m.replace(/^\//,"").split("/");x="/"+w.replace(/^\//,"").split("/").slice(E.length).join("/")}let _=TT(e,{pathname:x});la(g||_!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),la(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=p6(_&&_.map(E=>Object.assign({},E,{params:Object.assign({},f,E.params),pathname:Ai([m,s.encodeLocation?s.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?m:Ai([m,s.encodeLocation?s.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),l,r,n,a);return t&&N?j.createElement(Zd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},N):N}function d6(){let e=x6(),t=JB(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:s},"ErrorBoundary")," or"," ",j.createElement("code",{style:s},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),r?j.createElement("pre",{style:a},r):null,l)}var f6=j.createElement(d6,null),FT=class extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const r=o6(e.digest);r&&(e=r)}let t=e!==void 0?j.createElement(Aa.Provider,{value:this.props.routeContext},j.createElement($w.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?j.createElement(h6,{error:e},t):t}};FT.contextType=t6;var f0=new WeakMap;function h6({children:e,error:t}){let{basename:r}=j.useContext(qn);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=s6(t.digest);if(n){let a=f0.get(t);if(a)throw a;let s=IT(n.location,r);if(RT&&!f0.get(t))if(s.isExternal||n.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:n.replace}));throw f0.set(t,l),l}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return e}function m6({routeContext:e,match:t,children:r}){let n=j.useContext(Qc);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(Aa.Provider,{value:e},r)}function p6(e,t=[],r=null,n=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,l=r==null?void 0:r.errors;if(l!=null){let m=s.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);Wt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,m+1))}let u=!1,f=-1;if(r)for(let m=0;m<s.length;m++){let g=s[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=m),g.route.id){let{loaderData:y,errors:v}=r,w=g.route.loader&&!y.hasOwnProperty(g.route.id)&&(!v||v[g.route.id]===void 0);if(g.route.lazy||w){u=!0,f>=0?s=s.slice(0,f+1):s=[s[0]];break}}}let h=r&&n?(m,g)=>{var y,v;n(m,{location:r.location,params:((v=(y=r.matches)==null?void 0:y[0])==null?void 0:v.params)??{},unstable_pattern:ZB(r.matches),errorInfo:g})}:void 0;return s.reduceRight((m,g,y)=>{let v,w=!1,x=null,_=null;r&&(v=l&&g.route.id?l[g.route.id]:void 0,x=g.route.errorElement||f6,u&&(f<0&&y===0?(KT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,_=null):f===y&&(w=!0,_=g.route.hydrateFallbackElement||null)));let N=t.concat(s.slice(0,y+1)),O=()=>{let E;return v?E=x:w?E=_:g.route.Component?E=j.createElement(g.route.Component,null):g.route.element?E=g.route.element:E=m,j.createElement(m6,{match:g,routeContext:{outlet:m,matches:N,isDataRoute:r!=null},children:E})};return r&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?j.createElement(FT,{location:r.location,revalidation:r.revalidation,component:x,error:v,children:O(),routeContext:{outlet:null,matches:N,isDataRoute:!0},onError:h}):O()},null)}function Uw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function g6(e){let t=j.useContext(Qc);return Wt(t,Uw(e)),t}function y6(e){let t=j.useContext(Dp);return Wt(t,Uw(e)),t}function v6(e){let t=j.useContext(Aa);return Wt(t,Uw(e)),t}function zw(e){let t=v6(e),r=t.matches[t.matches.length-1];return Wt(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function b6(){return zw("useRouteId")}function x6(){var n;let e=j.useContext($w),t=y6("useRouteError"),r=zw("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function w6(){let{router:e}=g6("useNavigate"),t=zw("useNavigate"),r=j.useRef(!1);return zT(()=>{r.current=!0}),j.useCallback(async(a,s={})=>{la(r.current,UT),r.current&&(typeof a=="number"?await e.navigate(a):await e.navigate(a,{fromRouteId:t,...s}))},[e,t])}var NE={};function KT(e,t,r){!t&&!NE[e]&&(NE[e]=!0,la(!1,r))}j.memo(j6);function j6({routes:e,future:t,state:r,onError:n}){return qT(e,void 0,r,n,t)}function Ve({to:e,replace:t,state:r,relative:n}){Wt(Hc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=j.useContext(qn);la(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=j.useContext(Aa),{pathname:l}=Fn(),u=Nt(),f=Bw(e,Lw(s),l,n==="path"),h=JSON.stringify(f);return j.useEffect(()=>{u(JSON.parse(h),{replace:t,state:r,relative:n})},[u,h,n,t,r]),null}function Ye(e){Wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function S6({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:a,static:s=!1,unstable_useTransitions:l}){Wt(!Hc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),f=j.useMemo(()=>({basename:u,navigator:a,static:s,unstable_useTransitions:l,future:{}}),[u,a,s,l]);typeof r=="string"&&(r=rl(r));let{pathname:h="/",search:m="",hash:g="",state:y=null,key:v="default"}=r,w=j.useMemo(()=>{let x=Ti(h,u);return x==null?null:{location:{pathname:x,search:m,hash:g,state:y,key:v},navigationType:n}},[u,h,m,g,y,v,n]);return la(w!=null,`<Router basename="${u}"> is not able to match the URL "${h}${m}${g}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:j.createElement(qn.Provider,{value:f},j.createElement(Zd.Provider,{children:t,value:w}))}function _6({children:e,location:t}){return u6(ix(e),t)}function ix(e,t=[]){let r=[];return j.Children.forEach(e,(n,a)=>{if(!j.isValidElement(n))return;let s=[...t,a];if(n.type===j.Fragment){r.push.apply(r,ix(n.props.children,s));return}Wt(n.type===Ye,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Wt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=ix(n.props.children,s)),r.push(l)}),r}var xm="get",wm="application/x-www-form-urlencoded";function Mp(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function N6(e){return Mp(e)&&e.tagName.toLowerCase()==="button"}function O6(e){return Mp(e)&&e.tagName.toLowerCase()==="form"}function E6(e){return Mp(e)&&e.tagName.toLowerCase()==="input"}function A6(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function C6(e,t){return e.button===0&&(!t||t==="_self")&&!A6(e)}var Gh=null;function k6(){if(Gh===null)try{new FormData(document.createElement("form"),0),Gh=!1}catch{Gh=!0}return Gh}var P6=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function h0(e){return e!=null&&!P6.has(e)?(la(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wm}"`),null):e}function T6(e,t){let r,n,a,s,l;if(O6(e)){let u=e.getAttribute("action");n=u?Ti(u,t):null,r=e.getAttribute("method")||xm,a=h0(e.getAttribute("enctype"))||wm,s=new FormData(e)}else if(N6(e)||E6(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=e.getAttribute("formaction")||u.getAttribute("action");if(n=f?Ti(f,t):null,r=e.getAttribute("formmethod")||u.getAttribute("method")||xm,a=h0(e.getAttribute("formenctype"))||h0(u.getAttribute("enctype"))||wm,s=new FormData(u,e),!k6()){let{name:h,type:m,value:g}=e;if(m==="image"){let y=h?`${h}.`:"";s.append(`${y}x`,"0"),s.append(`${y}y`,"0")}else h&&s.append(h,g)}}else{if(Mp(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=xm,n=null,a=wm,l=e}return s&&a==="text/plain"&&(l=s,s=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:s,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function qw(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function D6(e,t,r,n){let a=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${n}`:a.pathname=`${a.pathname}.${n}`:a.pathname==="/"?a.pathname=`_root.${n}`:t&&Ti(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${n}`,a}async function M6(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function R6(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function I6(e,t,r){let n=await Promise.all(e.map(async a=>{let s=t.routes[a.route.id];if(s){let l=await M6(s,r);return l.links?l.links():[]}return[]}));return U6(n.flat(1).filter(R6).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function OE(e,t,r,n,a,s){let l=(f,h)=>r[h]?f.route.id!==r[h].route.id:!0,u=(f,h)=>{var m;return r[h].pathname!==f.pathname||((m=r[h].route.path)==null?void 0:m.endsWith("*"))&&r[h].params["*"]!==f.params["*"]};return s==="assets"?t.filter((f,h)=>l(f,h)||u(f,h)):s==="data"?t.filter((f,h)=>{var g;let m=n.routes[f.route.id];if(!m||!m.hasLoader)return!1;if(l(f,h)||u(f,h))return!0;if(f.route.shouldRevalidate){let y=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((g=r[0])==null?void 0:g.params)||{},nextUrl:new URL(e,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function L6(e,t,{includeHydrateFallback:r}={}){return B6(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function B6(e){return[...new Set(e)]}function $6(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function U6(e,t){let r=new Set;return new Set(t),e.reduce((n,a)=>{let s=JSON.stringify($6(a));return r.has(s)||(r.add(s),n.push({key:s,link:a})),n},[])}function QT(){let e=j.useContext(Qc);return qw(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function z6(){let e=j.useContext(Dp);return qw(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Fw=j.createContext(void 0);Fw.displayName="FrameworkContext";function HT(){let e=j.useContext(Fw);return qw(e,"You must render this element inside a <HydratedRouter> element"),e}function q6(e,t){let r=j.useContext(Fw),[n,a]=j.useState(!1),[s,l]=j.useState(!1),{onFocus:u,onBlur:f,onMouseEnter:h,onMouseLeave:m,onTouchStart:g}=t,y=j.useRef(null);j.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let x=N=>{N.forEach(O=>{l(O.isIntersecting)})},_=new IntersectionObserver(x,{threshold:.5});return y.current&&_.observe(y.current),()=>{_.disconnect()}}},[e]),j.useEffect(()=>{if(n){let x=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(x)}}},[n]);let v=()=>{a(!0)},w=()=>{a(!1),l(!1)};return r?e!=="intent"?[s,y,{}]:[s,y,{onFocus:ed(u,v),onBlur:ed(f,w),onMouseEnter:ed(h,v),onMouseLeave:ed(m,w),onTouchStart:ed(g,v)}]:[!1,y,{}]}function ed(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function F6({page:e,...t}){let{router:r}=QT(),n=j.useMemo(()=>TT(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?j.createElement(Q6,{page:e,matches:n,...t}):null}function K6(e){let{manifest:t,routeModules:r}=HT(),[n,a]=j.useState([]);return j.useEffect(()=>{let s=!1;return I6(e,t,r).then(l=>{s||a(l)}),()=>{s=!0}},[e,t,r]),n}function Q6({page:e,matches:t,...r}){let n=Fn(),{future:a,manifest:s,routeModules:l}=HT(),{basename:u}=QT(),{loaderData:f,matches:h}=z6(),m=j.useMemo(()=>OE(e,t,h,s,n,"data"),[e,t,h,s,n]),g=j.useMemo(()=>OE(e,t,h,s,n,"assets"),[e,t,h,s,n]),y=j.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let x=new Set,_=!1;if(t.forEach(O=>{var C;let E=s.routes[O.route.id];!E||!E.hasLoader||(!m.some(T=>T.route.id===O.route.id)&&O.route.id in f&&((C=l[O.route.id])!=null&&C.shouldRevalidate)||E.hasClientLoader?_=!0:x.add(O.route.id))}),x.size===0)return[];let N=D6(e,u,a.unstable_trailingSlashAwareDataRequests,"data");return _&&x.size>0&&N.searchParams.set("_routes",t.filter(O=>x.has(O.route.id)).map(O=>O.route.id).join(",")),[N.pathname+N.search]},[u,a.unstable_trailingSlashAwareDataRequests,f,n,s,m,t,e,l]),v=j.useMemo(()=>L6(g,s),[g,s]),w=K6(g);return j.createElement(j.Fragment,null,y.map(x=>j.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...r})),v.map(x=>j.createElement("link",{key:x,rel:"modulepreload",href:x,...r})),w.map(({key:x,link:_})=>j.createElement("link",{key:x,nonce:r.nonce,..._,crossOrigin:_.crossOrigin??r.crossOrigin})))}function H6(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var V6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{V6&&(window.__reactRouterVersion="7.13.0")}catch{}function G6({basename:e,children:t,unstable_useTransitions:r,window:n}){let a=j.useRef();a.current==null&&(a.current=AB({window:n,v5Compat:!0}));let s=a.current,[l,u]=j.useState({action:s.action,location:s.location}),f=j.useCallback(h=>{r===!1?u(h):j.startTransition(()=>u(h))},[r]);return j.useLayoutEffect(()=>s.listen(f),[s,f]),j.createElement(S6,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:s,unstable_useTransitions:r})}var VT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mc=j.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:a,reloadDocument:s,replace:l,state:u,target:f,to:h,preventScrollReset:m,viewTransition:g,unstable_defaultShouldRevalidate:y,...v},w){let{basename:x,unstable_useTransitions:_}=j.useContext(qn),N=typeof h=="string"&&VT.test(h),O=IT(h,x);h=O.to;let E=l6(h,{relative:a}),[C,T,k]=q6(n,v),M=J6(h,{replace:l,state:u,target:f,preventScrollReset:m,relative:a,viewTransition:g,unstable_defaultShouldRevalidate:y,unstable_useTransitions:_});function R(V){t&&t(V),V.defaultPrevented||M(V)}let L=j.createElement("a",{...v,...k,href:O.absoluteURL||E,onClick:O.isExternal||s?t:R,ref:H6(w,T),target:f,"data-discover":!N&&r==="render"?"true":void 0});return C&&!N?j.createElement(j.Fragment,null,L,j.createElement(F6,{page:E})):L});Mc.displayName="Link";var W6=j.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:a=!1,style:s,to:l,viewTransition:u,children:f,...h},m){let g=ef(l,{relative:h.relative}),y=Fn(),v=j.useContext(Dp),{navigator:w,basename:x}=j.useContext(qn),_=v!=null&&n$(g)&&u===!0,N=w.encodeLocation?w.encodeLocation(g).pathname:g.pathname,O=y.pathname,E=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;r||(O=O.toLowerCase(),E=E?E.toLowerCase():null,N=N.toLowerCase()),E&&x&&(E=Ti(E,x)||E);const C=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let T=O===N||!a&&O.startsWith(N)&&O.charAt(C)==="/",k=E!=null&&(E===N||!a&&E.startsWith(N)&&E.charAt(N.length)==="/"),M={isActive:T,isPending:k,isTransitioning:_},R=T?t:void 0,L;typeof n=="function"?L=n(M):L=[n,T?"active":null,k?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let V=typeof s=="function"?s(M):s;return j.createElement(Mc,{...h,"aria-current":R,className:L,ref:m,style:V,to:l,viewTransition:u},typeof f=="function"?f(M):f)});W6.displayName="NavLink";var Y6=j.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:a,state:s,method:l=xm,action:u,onSubmit:f,relative:h,preventScrollReset:m,viewTransition:g,unstable_defaultShouldRevalidate:y,...v},w)=>{let{unstable_useTransitions:x}=j.useContext(qn),_=t$(),N=r$(u,{relative:h}),O=l.toLowerCase()==="get"?"get":"post",E=typeof u=="string"&&VT.test(u),C=T=>{if(f&&f(T),T.defaultPrevented)return;T.preventDefault();let k=T.nativeEvent.submitter,M=(k==null?void 0:k.getAttribute("formmethod"))||l,R=()=>_(k||T.currentTarget,{fetcherKey:t,method:M,navigate:r,replace:a,state:s,relative:h,preventScrollReset:m,viewTransition:g,unstable_defaultShouldRevalidate:y});x&&r!==!1?j.startTransition(()=>R()):R()};return j.createElement("form",{ref:w,method:O,action:N,onSubmit:n?f:C,...v,"data-discover":!E&&e==="render"?"true":void 0})});Y6.displayName="Form";function X6(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GT(e){let t=j.useContext(Qc);return Wt(t,X6(e)),t}function J6(e,{target:t,replace:r,state:n,preventScrollReset:a,relative:s,viewTransition:l,unstable_defaultShouldRevalidate:u,unstable_useTransitions:f}={}){let h=Nt(),m=Fn(),g=ef(e,{relative:s});return j.useCallback(y=>{if(C6(y,t)){y.preventDefault();let v=r!==void 0?r:xd(m)===xd(g),w=()=>h(e,{replace:v,state:n,preventScrollReset:a,relative:s,viewTransition:l,unstable_defaultShouldRevalidate:u});f?j.startTransition(()=>w()):w()}},[m,h,g,r,n,t,e,a,s,l,u,f])}var Z6=0,e$=()=>`__${String(++Z6)}__`;function t$(){let{router:e}=GT("useSubmit"),{basename:t}=j.useContext(qn),r=b6(),n=e.fetch,a=e.navigate;return j.useCallback(async(s,l={})=>{let{action:u,method:f,encType:h,formData:m,body:g}=T6(s,t);if(l.navigate===!1){let y=l.fetcherKey||e$();await n(y,r,l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:m,body:g,formMethod:l.method||f,formEncType:l.encType||h,flushSync:l.flushSync})}else await a(l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:m,body:g,formMethod:l.method||f,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[n,a,t,r])}function r$(e,{relative:t}={}){let{basename:r}=j.useContext(qn),n=j.useContext(Aa);Wt(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),s={...ef(e||".",{relative:t})},l=Fn();if(e==null){s.search=l.search;let u=new URLSearchParams(s.search),f=u.getAll("index");if(f.some(m=>m==="")){u.delete("index"),f.filter(g=>g).forEach(g=>u.append("index",g));let m=u.toString();s.search=m?`?${m}`:""}}return(!e||e===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:Ai([r,s.pathname])),xd(s)}function n$(e,{relative:t}={}){let r=j.useContext(BT);Wt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=GT("useViewTransitionState"),a=ef(e,{relative:t});if(!r.isTransitioning)return!1;let s=Ti(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=Ti(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Cm(a.pathname,l)!=null||Cm(a.pathname,s)!=null}var Rp=PT(),Vc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},a$={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Es,Iw,xT,i$=(xT=class{constructor(){Me(this,Es,a$);Me(this,Iw,!1)}setTimeoutProvider(e){je(this,Es,e)}setTimeout(e,t){return U(this,Es).setTimeout(e,t)}clearTimeout(e){U(this,Es).clearTimeout(e)}setInterval(e,t){return U(this,Es).setInterval(e,t)}clearInterval(e){U(this,Es).clearInterval(e)}},Es=new WeakMap,Iw=new WeakMap,xT),Oo=new i$;function s$(e){setTimeout(e,0)}var Qo=typeof window>"u"||"Deno"in globalThis;function on(){}function o$(e,t){return typeof e=="function"?e(t):e}function sx(e){return typeof e=="number"&&e>=0&&e!==1/0}function WT(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ls(e,t){return typeof e=="function"?e(t):e}function sa(e,t){return typeof e=="function"?e(t):e}function EE(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:s,queryKey:l,stale:u}=e;if(l){if(n){if(t.queryHash!==Kw(l,t.options))return!1}else if(!wd(t.queryKey,l))return!1}if(r!=="all"){const f=t.isActive();if(r==="active"&&!f||r==="inactive"&&f)return!1}return!(typeof u=="boolean"&&t.isStale()!==u||a&&a!==t.state.fetchStatus||s&&!s(t))}function AE(e,t){const{exact:r,status:n,predicate:a,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(r){if(Ho(t.options.mutationKey)!==Ho(s))return!1}else if(!wd(t.options.mutationKey,s))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function Kw(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ho)(e)}function Ho(e){return JSON.stringify(e,(t,r)=>ox(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function wd(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>wd(e[r],t[r])):!1}var l$=Object.prototype.hasOwnProperty;function YT(e,t,r=0){if(e===t)return e;if(r>500)return t;const n=CE(e)&&CE(t);if(!n&&!(ox(e)&&ox(t)))return t;const s=(n?e:Object.keys(e)).length,l=n?t:Object.keys(t),u=l.length,f=n?new Array(u):{};let h=0;for(let m=0;m<u;m++){const g=n?m:l[m],y=e[g],v=t[g];if(y===v){f[g]=y,(n?m<s:l$.call(e,g))&&h++;continue}if(y===null||v===null||typeof y!="object"||typeof v!="object"){f[g]=v;continue}const w=YT(y,v,r+1);f[g]=w,w===y&&h++}return s===u&&h===s?e:f}function km(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function CE(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function ox(e){if(!kE(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!kE(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function kE(e){return Object.prototype.toString.call(e)==="[object Object]"}function c$(e){return new Promise(t=>{Oo.setTimeout(t,e)})}function lx(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?YT(e,t):t}function u$(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function d$(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Qw=Symbol();function XT(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Qw?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Hw(e,t){return typeof e=="function"?e(...t):!!e}function f$(e,t,r){let n=!1,a;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(a??(a=t()),n||(n=!0,a.aborted?r():a.addEventListener("abort",r,{once:!0})),a)}),e}var Do,As,jc,wT,h$=(wT=class extends Vc{constructor(){super();Me(this,Do);Me(this,As);Me(this,jc);je(this,jc,t=>{if(!Qo&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){U(this,As)||this.setEventListener(U(this,jc))}onUnsubscribe(){var t;this.hasListeners()||((t=U(this,As))==null||t.call(this),je(this,As,void 0))}setEventListener(t){var r;je(this,jc,t),(r=U(this,As))==null||r.call(this),je(this,As,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){U(this,Do)!==t&&(je(this,Do,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof U(this,Do)=="boolean"?U(this,Do):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Do=new WeakMap,As=new WeakMap,jc=new WeakMap,wT),Vw=new h$;function cx(){let e,t;const r=new Promise((a,s)=>{e=a,t=s});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var m$=s$;function p$(){let e=[],t=0,r=u=>{u()},n=u=>{u()},a=m$;const s=u=>{t?e.push(u):a(()=>{r(u)})},l=()=>{const u=e;e=[],u.length&&a(()=>{n(()=>{u.forEach(f=>{r(f)})})})};return{batch:u=>{let f;t++;try{f=u()}finally{t--,t||l()}return f},batchCalls:u=>(...f)=>{s(()=>{u(...f)})},schedule:s,setNotifyFunction:u=>{r=u},setBatchNotifyFunction:u=>{n=u},setScheduler:u=>{a=u}}}var Sr=p$(),Sc,Cs,_c,jT,g$=(jT=class extends Vc{constructor(){super();Me(this,Sc,!0);Me(this,Cs);Me(this,_c);je(this,_c,t=>{if(!Qo&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){U(this,Cs)||this.setEventListener(U(this,_c))}onUnsubscribe(){var t;this.hasListeners()||((t=U(this,Cs))==null||t.call(this),je(this,Cs,void 0))}setEventListener(t){var r;je(this,_c,t),(r=U(this,Cs))==null||r.call(this),je(this,Cs,t(this.setOnline.bind(this)))}setOnline(t){U(this,Sc)!==t&&(je(this,Sc,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return U(this,Sc)}},Sc=new WeakMap,Cs=new WeakMap,_c=new WeakMap,jT),Pm=new g$;function y$(e){return Math.min(1e3*2**e,3e4)}function JT(e){return(e??"online")==="online"?Pm.isOnline():!0}var ux=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function ZT(e){let t=!1,r=0,n;const a=cx(),s=()=>a.status!=="pending",l=x=>{var _;if(!s()){const N=new ux(x);y(N),(_=e.onCancel)==null||_.call(e,N)}},u=()=>{t=!0},f=()=>{t=!1},h=()=>Vw.isFocused()&&(e.networkMode==="always"||Pm.isOnline())&&e.canRun(),m=()=>JT(e.networkMode)&&e.canRun(),g=x=>{s()||(n==null||n(),a.resolve(x))},y=x=>{s()||(n==null||n(),a.reject(x))},v=()=>new Promise(x=>{var _;n=N=>{(s()||h())&&x(N)},(_=e.onPause)==null||_.call(e)}).then(()=>{var x;n=void 0,s()||(x=e.onContinue)==null||x.call(e)}),w=()=>{if(s())return;let x;const _=r===0?e.initialPromise:void 0;try{x=_??e.fn()}catch(N){x=Promise.reject(N)}Promise.resolve(x).then(g).catch(N=>{var k;if(s())return;const O=e.retry??(Qo?0:3),E=e.retryDelay??y$,C=typeof E=="function"?E(r,N):E,T=O===!0||typeof O=="number"&&r<O||typeof O=="function"&&O(r,N);if(t||!T){y(N);return}r++,(k=e.onFail)==null||k.call(e,r,N),c$(C).then(()=>h()?void 0:v()).then(()=>{t?y(N):w()})})};return{promise:a,status:()=>a.status,cancel:l,continue:()=>(n==null||n(),a),cancelRetry:u,continueRetry:f,canStart:m,start:()=>(m()?w():v().then(w),a)}}var Mo,ST,eD=(ST=class{constructor(){Me(this,Mo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),sx(this.gcTime)&&je(this,Mo,Oo.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Qo?1/0:300*1e3))}clearGcTimeout(){U(this,Mo)&&(Oo.clearTimeout(U(this,Mo)),je(this,Mo,void 0))}},Mo=new WeakMap,ST),Ro,Nc,ia,Io,Pr,Gd,Lo,xa,gi,_T,v$=(_T=class extends eD{constructor(t){super();Me(this,xa);Me(this,Ro);Me(this,Nc);Me(this,ia);Me(this,Io);Me(this,Pr);Me(this,Gd);Me(this,Lo);je(this,Lo,!1),je(this,Gd,t.defaultOptions),this.setOptions(t.options),this.observers=[],je(this,Io,t.client),je(this,ia,U(this,Io).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,je(this,Ro,TE(this.options)),this.state=t.state??U(this,Ro),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=U(this,Pr))==null?void 0:t.promise}setOptions(t){if(this.options={...U(this,Gd),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=TE(this.options);r.data!==void 0&&(this.setState(PE(r.data,r.dataUpdatedAt)),je(this,Ro,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&U(this,ia).remove(this)}setData(t,r){const n=lx(this.state.data,t,this.options);return We(this,xa,gi).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){We(this,xa,gi).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=U(this,Pr))==null?void 0:n.promise;return(a=U(this,Pr))==null||a.cancel(t),r?r.then(on).catch(on):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(U(this,Ro))}isActive(){return this.observers.some(t=>sa(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Qw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ls(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!WT(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=U(this,Pr))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=U(this,Pr))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),U(this,ia).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(U(this,Pr)&&(U(this,Lo)?U(this,Pr).cancel({revert:!0}):U(this,Pr).cancelRetry()),this.scheduleGc()),U(this,ia).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||We(this,xa,gi).call(this,{type:"invalidate"})}async fetch(t,r){var f,h,m,g,y,v,w,x,_,N,O,E;if(this.state.fetchStatus!=="idle"&&((f=U(this,Pr))==null?void 0:f.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(U(this,Pr))return U(this,Pr).continueRetry(),U(this,Pr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const C=this.observers.find(T=>T.options.queryFn);C&&this.setOptions(C.options)}const n=new AbortController,a=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(je(this,Lo,!0),n.signal)})},s=()=>{const C=XT(this.options,r),k=(()=>{const M={client:U(this,Io),queryKey:this.queryKey,meta:this.meta};return a(M),M})();return je(this,Lo,!1),this.options.persister?this.options.persister(C,k,this):C(k)},u=(()=>{const C={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:U(this,Io),state:this.state,fetchFn:s};return a(C),C})();(h=this.options.behavior)==null||h.onFetch(u,this),je(this,Nc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=u.fetchOptions)==null?void 0:m.meta))&&We(this,xa,gi).call(this,{type:"fetch",meta:(g=u.fetchOptions)==null?void 0:g.meta}),je(this,Pr,ZT({initialPromise:r==null?void 0:r.initialPromise,fn:u.fetchFn,onCancel:C=>{C instanceof ux&&C.revert&&this.setState({...U(this,Nc),fetchStatus:"idle"}),n.abort()},onFail:(C,T)=>{We(this,xa,gi).call(this,{type:"failed",failureCount:C,error:T})},onPause:()=>{We(this,xa,gi).call(this,{type:"pause"})},onContinue:()=>{We(this,xa,gi).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0}));try{const C=await U(this,Pr).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(v=(y=U(this,ia).config).onSuccess)==null||v.call(y,C,this),(x=(w=U(this,ia).config).onSettled)==null||x.call(w,C,this.state.error,this),C}catch(C){if(C instanceof ux){if(C.silent)return U(this,Pr).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw We(this,xa,gi).call(this,{type:"error",error:C}),(N=(_=U(this,ia).config).onError)==null||N.call(_,C,this),(E=(O=U(this,ia).config).onSettled)==null||E.call(O,this.state.data,C,this),C}finally{this.scheduleGc()}}},Ro=new WeakMap,Nc=new WeakMap,ia=new WeakMap,Io=new WeakMap,Pr=new WeakMap,Gd=new WeakMap,Lo=new WeakMap,xa=new WeakSet,gi=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...tD(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,...PE(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return je(this,Nc,t.manual?a:void 0),a;case"error":const s=t.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Sr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),U(this,ia).notify({query:this,type:"updated",action:t})})},_T);function tD(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:JT(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function PE(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function TE(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var bn,ot,Wd,sn,Bo,Oc,xi,ks,Yd,Ec,Ac,$o,Uo,Ps,Cc,bt,fd,dx,fx,hx,mx,px,gx,yx,rD,NT,b$=(NT=class extends Vc{constructor(t,r){super();Me(this,bt);Me(this,bn);Me(this,ot);Me(this,Wd);Me(this,sn);Me(this,Bo);Me(this,Oc);Me(this,xi);Me(this,ks);Me(this,Yd);Me(this,Ec);Me(this,Ac);Me(this,$o);Me(this,Uo);Me(this,Ps);Me(this,Cc,new Set);this.options=r,je(this,bn,t),je(this,ks,null),je(this,xi,cx()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(U(this,ot).addObserver(this),DE(U(this,ot),this.options)?We(this,bt,fd).call(this):this.updateResult(),We(this,bt,mx).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return vx(U(this,ot),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return vx(U(this,ot),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,We(this,bt,px).call(this),We(this,bt,gx).call(this),U(this,ot).removeObserver(this)}setOptions(t){const r=this.options,n=U(this,ot);if(this.options=U(this,bn).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof sa(this.options.enabled,U(this,ot))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");We(this,bt,yx).call(this),U(this,ot).setOptions(this.options),r._defaulted&&!km(this.options,r)&&U(this,bn).getQueryCache().notify({type:"observerOptionsUpdated",query:U(this,ot),observer:this});const a=this.hasListeners();a&&ME(U(this,ot),n,this.options,r)&&We(this,bt,fd).call(this),this.updateResult(),a&&(U(this,ot)!==n||sa(this.options.enabled,U(this,ot))!==sa(r.enabled,U(this,ot))||Ls(this.options.staleTime,U(this,ot))!==Ls(r.staleTime,U(this,ot)))&&We(this,bt,dx).call(this);const s=We(this,bt,fx).call(this);a&&(U(this,ot)!==n||sa(this.options.enabled,U(this,ot))!==sa(r.enabled,U(this,ot))||s!==U(this,Ps))&&We(this,bt,hx).call(this,s)}getOptimisticResult(t){const r=U(this,bn).getQueryCache().build(U(this,bn),t),n=this.createResult(r,t);return w$(this,n)&&(je(this,sn,n),je(this,Oc,this.options),je(this,Bo,U(this,ot).state)),n}getCurrentResult(){return U(this,sn)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&U(this,xi).status==="pending"&&U(this,xi).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(t){U(this,Cc).add(t)}getCurrentQuery(){return U(this,ot)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=U(this,bn).defaultQueryOptions(t),n=U(this,bn).getQueryCache().build(U(this,bn),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return We(this,bt,fd).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),U(this,sn)))}createResult(t,r){var L;const n=U(this,ot),a=this.options,s=U(this,sn),l=U(this,Bo),u=U(this,Oc),h=t!==n?t.state:U(this,Wd),{state:m}=t;let g={...m},y=!1,v;if(r._optimisticResults){const V=this.hasListeners(),G=!V&&DE(t,r),K=V&&ME(t,n,r,a);(G||K)&&(g={...g,...tD(m.data,t.options)}),r._optimisticResults==="isRestoring"&&(g.fetchStatus="idle")}let{error:w,errorUpdatedAt:x,status:_}=g;v=g.data;let N=!1;if(r.placeholderData!==void 0&&v===void 0&&_==="pending"){let V;s!=null&&s.isPlaceholderData&&r.placeholderData===(u==null?void 0:u.placeholderData)?(V=s.data,N=!0):V=typeof r.placeholderData=="function"?r.placeholderData((L=U(this,Ac))==null?void 0:L.state.data,U(this,Ac)):r.placeholderData,V!==void 0&&(_="success",v=lx(s==null?void 0:s.data,V,r),y=!0)}if(r.select&&v!==void 0&&!N)if(s&&v===(l==null?void 0:l.data)&&r.select===U(this,Yd))v=U(this,Ec);else try{je(this,Yd,r.select),v=r.select(v),v=lx(s==null?void 0:s.data,v,r),je(this,Ec,v),je(this,ks,null)}catch(V){je(this,ks,V)}U(this,ks)&&(w=U(this,ks),v=U(this,Ec),x=Date.now(),_="error");const O=g.fetchStatus==="fetching",E=_==="pending",C=_==="error",T=E&&O,k=v!==void 0,R={status:_,fetchStatus:g.fetchStatus,isPending:E,isSuccess:_==="success",isError:C,isInitialLoading:T,isLoading:T,data:v,dataUpdatedAt:g.dataUpdatedAt,error:w,errorUpdatedAt:x,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>h.dataUpdateCount||g.errorUpdateCount>h.errorUpdateCount,isFetching:O,isRefetching:O&&!E,isLoadingError:C&&!k,isPaused:g.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:C&&k,isStale:Gw(t,r),refetch:this.refetch,promise:U(this,xi),isEnabled:sa(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const V=R.data!==void 0,G=R.status==="error"&&!V,K=he=>{G?he.reject(R.error):V&&he.resolve(R.data)},fe=()=>{const he=je(this,xi,R.promise=cx());K(he)},ge=U(this,xi);switch(ge.status){case"pending":t.queryHash===n.queryHash&&K(ge);break;case"fulfilled":(G||R.data!==ge.value)&&fe();break;case"rejected":(!G||R.error!==ge.reason)&&fe();break}}return R}updateResult(){const t=U(this,sn),r=this.createResult(U(this,ot),this.options);if(je(this,Bo,U(this,ot).state),je(this,Oc,this.options),U(this,Bo).data!==void 0&&je(this,Ac,U(this,ot)),km(r,t))return;je(this,sn,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,s=typeof a=="function"?a():a;if(s==="all"||!s&&!U(this,Cc).size)return!0;const l=new Set(s??U(this,Cc));return this.options.throwOnError&&l.add("error"),Object.keys(U(this,sn)).some(u=>{const f=u;return U(this,sn)[f]!==t[f]&&l.has(f)})};We(this,bt,rD).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&We(this,bt,mx).call(this)}},bn=new WeakMap,ot=new WeakMap,Wd=new WeakMap,sn=new WeakMap,Bo=new WeakMap,Oc=new WeakMap,xi=new WeakMap,ks=new WeakMap,Yd=new WeakMap,Ec=new WeakMap,Ac=new WeakMap,$o=new WeakMap,Uo=new WeakMap,Ps=new WeakMap,Cc=new WeakMap,bt=new WeakSet,fd=function(t){We(this,bt,yx).call(this);let r=U(this,ot).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(on)),r},dx=function(){We(this,bt,px).call(this);const t=Ls(this.options.staleTime,U(this,ot));if(Qo||U(this,sn).isStale||!sx(t))return;const n=WT(U(this,sn).dataUpdatedAt,t)+1;je(this,$o,Oo.setTimeout(()=>{U(this,sn).isStale||this.updateResult()},n))},fx=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(U(this,ot)):this.options.refetchInterval)??!1},hx=function(t){We(this,bt,gx).call(this),je(this,Ps,t),!(Qo||sa(this.options.enabled,U(this,ot))===!1||!sx(U(this,Ps))||U(this,Ps)===0)&&je(this,Uo,Oo.setInterval(()=>{(this.options.refetchIntervalInBackground||Vw.isFocused())&&We(this,bt,fd).call(this)},U(this,Ps)))},mx=function(){We(this,bt,dx).call(this),We(this,bt,hx).call(this,We(this,bt,fx).call(this))},px=function(){U(this,$o)&&(Oo.clearTimeout(U(this,$o)),je(this,$o,void 0))},gx=function(){U(this,Uo)&&(Oo.clearInterval(U(this,Uo)),je(this,Uo,void 0))},yx=function(){const t=U(this,bn).getQueryCache().build(U(this,bn),this.options);if(t===U(this,ot))return;const r=U(this,ot);je(this,ot,t),je(this,Wd,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},rD=function(t){Sr.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(U(this,sn))}),U(this,bn).getQueryCache().notify({query:U(this,ot),type:"observerResultsUpdated"})})},NT);function x$(e,t){return sa(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function DE(e,t){return x$(e,t)||e.state.data!==void 0&&vx(e,t,t.refetchOnMount)}function vx(e,t,r){if(sa(t.enabled,e)!==!1&&Ls(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&Gw(e,t)}return!1}function ME(e,t,r,n){return(e!==t||sa(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Gw(e,r)}function Gw(e,t){return sa(t.enabled,e)!==!1&&e.isStaleByTime(Ls(t.staleTime,e))}function w$(e,t){return!km(e.getCurrentResult(),t)}function RE(e){return{onFetch:(t,r)=>{var m,g,y,v,w;const n=t.options,a=(y=(g=(m=t.fetchOptions)==null?void 0:m.meta)==null?void 0:g.fetchMore)==null?void 0:y.direction,s=((v=t.state.data)==null?void 0:v.pages)||[],l=((w=t.state.data)==null?void 0:w.pageParams)||[];let u={pages:[],pageParams:[]},f=0;const h=async()=>{let x=!1;const _=E=>{f$(E,()=>t.signal,()=>x=!0)},N=XT(t.options,t.fetchOptions),O=async(E,C,T)=>{if(x)return Promise.reject();if(C==null&&E.pages.length)return Promise.resolve(E);const M=(()=>{const G={client:t.client,queryKey:t.queryKey,pageParam:C,direction:T?"backward":"forward",meta:t.options.meta};return _(G),G})(),R=await N(M),{maxPages:L}=t.options,V=T?d$:u$;return{pages:V(E.pages,R,L),pageParams:V(E.pageParams,C,L)}};if(a&&s.length){const E=a==="backward",C=E?j$:IE,T={pages:s,pageParams:l},k=C(n,T);u=await O(T,k,E)}else{const E=e??s.length;do{const C=f===0?l[0]??n.initialPageParam:IE(n,u);if(f>0&&C==null)break;u=await O(u,C),f++}while(f<E)}return u};t.options.persister?t.fetchFn=()=>{var x,_;return(_=(x=t.options).persister)==null?void 0:_.call(x,h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=h}}}function IE(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function j$(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Xd,Ba,Wr,zo,$a,ws,OT,S$=(OT=class extends eD{constructor(t){super();Me(this,$a);Me(this,Xd);Me(this,Ba);Me(this,Wr);Me(this,zo);je(this,Xd,t.client),this.mutationId=t.mutationId,je(this,Wr,t.mutationCache),je(this,Ba,[]),this.state=t.state||nD(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){U(this,Ba).includes(t)||(U(this,Ba).push(t),this.clearGcTimeout(),U(this,Wr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){je(this,Ba,U(this,Ba).filter(r=>r!==t)),this.scheduleGc(),U(this,Wr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){U(this,Ba).length||(this.state.status==="pending"?this.scheduleGc():U(this,Wr).remove(this))}continue(){var t;return((t=U(this,zo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var l,u,f,h,m,g,y,v,w,x,_,N,O,E,C,T,k,M;const r=()=>{We(this,$a,ws).call(this,{type:"continue"})},n={client:U(this,Xd),meta:this.options.meta,mutationKey:this.options.mutationKey};je(this,zo,ZT({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(R,L)=>{We(this,$a,ws).call(this,{type:"failed",failureCount:R,error:L})},onPause:()=>{We(this,$a,ws).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>U(this,Wr).canRun(this)}));const a=this.state.status==="pending",s=!U(this,zo).canStart();try{if(a)r();else{We(this,$a,ws).call(this,{type:"pending",variables:t,isPaused:s}),U(this,Wr).config.onMutate&&await U(this,Wr).config.onMutate(t,this,n);const L=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,t,n));L!==this.state.context&&We(this,$a,ws).call(this,{type:"pending",context:L,variables:t,isPaused:s})}const R=await U(this,zo).start();return await((h=(f=U(this,Wr).config).onSuccess)==null?void 0:h.call(f,R,t,this.state.context,this,n)),await((g=(m=this.options).onSuccess)==null?void 0:g.call(m,R,t,this.state.context,n)),await((v=(y=U(this,Wr).config).onSettled)==null?void 0:v.call(y,R,null,this.state.variables,this.state.context,this,n)),await((x=(w=this.options).onSettled)==null?void 0:x.call(w,R,null,t,this.state.context,n)),We(this,$a,ws).call(this,{type:"success",data:R}),R}catch(R){try{await((N=(_=U(this,Wr).config).onError)==null?void 0:N.call(_,R,t,this.state.context,this,n))}catch(L){Promise.reject(L)}try{await((E=(O=this.options).onError)==null?void 0:E.call(O,R,t,this.state.context,n))}catch(L){Promise.reject(L)}try{await((T=(C=U(this,Wr).config).onSettled)==null?void 0:T.call(C,void 0,R,this.state.variables,this.state.context,this,n))}catch(L){Promise.reject(L)}try{await((M=(k=this.options).onSettled)==null?void 0:M.call(k,void 0,R,t,this.state.context,n))}catch(L){Promise.reject(L)}throw We(this,$a,ws).call(this,{type:"error",error:R}),R}finally{U(this,Wr).runNext(this)}}},Xd=new WeakMap,Ba=new WeakMap,Wr=new WeakMap,zo=new WeakMap,$a=new WeakSet,ws=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Sr.batch(()=>{U(this,Ba).forEach(n=>{n.onMutationUpdate(t)}),U(this,Wr).notify({mutation:this,type:"updated",action:t})})},OT);function nD(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var wi,wa,Jd,ET,_$=(ET=class extends Vc{constructor(t={}){super();Me(this,wi);Me(this,wa);Me(this,Jd);this.config=t,je(this,wi,new Set),je(this,wa,new Map),je(this,Jd,0)}build(t,r,n){const a=new S$({client:t,mutationCache:this,mutationId:++Vh(this,Jd)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){U(this,wi).add(t);const r=Wh(t);if(typeof r=="string"){const n=U(this,wa).get(r);n?n.push(t):U(this,wa).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(U(this,wi).delete(t)){const r=Wh(t);if(typeof r=="string"){const n=U(this,wa).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&U(this,wa).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Wh(t);if(typeof r=="string"){const n=U(this,wa).get(r),a=n==null?void 0:n.find(s=>s.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=Wh(t);if(typeof r=="string"){const a=(n=U(this,wa).get(r))==null?void 0:n.find(s=>s!==t&&s.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Sr.batch(()=>{U(this,wi).forEach(t=>{this.notify({type:"removed",mutation:t})}),U(this,wi).clear(),U(this,wa).clear()})}getAll(){return Array.from(U(this,wi))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>AE(r,n))}findAll(t={}){return this.getAll().filter(r=>AE(t,r))}notify(t){Sr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Sr.batch(()=>Promise.all(t.map(r=>r.continue().catch(on))))}},wi=new WeakMap,wa=new WeakMap,Jd=new WeakMap,ET);function Wh(e){var t;return(t=e.options.scope)==null?void 0:t.id}var ji,Ts,xn,Si,Pi,jm,bx,AT,N$=(AT=class extends Vc{constructor(r,n){super();Me(this,Pi);Me(this,ji);Me(this,Ts);Me(this,xn);Me(this,Si);je(this,ji,r),this.setOptions(n),this.bindMethods(),We(this,Pi,jm).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=U(this,ji).defaultMutationOptions(r),km(this.options,n)||U(this,ji).getMutationCache().notify({type:"observerOptionsUpdated",mutation:U(this,xn),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Ho(n.mutationKey)!==Ho(this.options.mutationKey)?this.reset():((a=U(this,xn))==null?void 0:a.state.status)==="pending"&&U(this,xn).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=U(this,xn))==null||r.removeObserver(this)}onMutationUpdate(r){We(this,Pi,jm).call(this),We(this,Pi,bx).call(this,r)}getCurrentResult(){return U(this,Ts)}reset(){var r;(r=U(this,xn))==null||r.removeObserver(this),je(this,xn,void 0),We(this,Pi,jm).call(this),We(this,Pi,bx).call(this)}mutate(r,n){var a;return je(this,Si,n),(a=U(this,xn))==null||a.removeObserver(this),je(this,xn,U(this,ji).getMutationCache().build(U(this,ji),this.options)),U(this,xn).addObserver(this),U(this,xn).execute(r)}},ji=new WeakMap,Ts=new WeakMap,xn=new WeakMap,Si=new WeakMap,Pi=new WeakSet,jm=function(){var n;const r=((n=U(this,xn))==null?void 0:n.state)??nD();je(this,Ts,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},bx=function(r){Sr.batch(()=>{var n,a,s,l,u,f,h,m;if(U(this,Si)&&this.hasListeners()){const g=U(this,Ts).variables,y=U(this,Ts).context,v={client:U(this,ji),meta:this.options.meta,mutationKey:this.options.mutationKey};if((r==null?void 0:r.type)==="success"){try{(a=(n=U(this,Si)).onSuccess)==null||a.call(n,r.data,g,y,v)}catch(w){Promise.reject(w)}try{(l=(s=U(this,Si)).onSettled)==null||l.call(s,r.data,null,g,y,v)}catch(w){Promise.reject(w)}}else if((r==null?void 0:r.type)==="error"){try{(f=(u=U(this,Si)).onError)==null||f.call(u,r.error,g,y,v)}catch(w){Promise.reject(w)}try{(m=(h=U(this,Si)).onSettled)==null||m.call(h,void 0,r.error,g,y,v)}catch(w){Promise.reject(w)}}}this.listeners.forEach(g=>{g(U(this,Ts))})})},AT),Ua,CT,O$=(CT=class extends Vc{constructor(t={}){super();Me(this,Ua);this.config=t,je(this,Ua,new Map)}build(t,r,n){const a=r.queryKey,s=r.queryHash??Kw(a,r);let l=this.get(s);return l||(l=new v$({client:t,queryKey:a,queryHash:s,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(l)),l}add(t){U(this,Ua).has(t.queryHash)||(U(this,Ua).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=U(this,Ua).get(t.queryHash);r&&(t.destroy(),r===t&&U(this,Ua).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Sr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return U(this,Ua).get(t)}getAll(){return[...U(this,Ua).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>EE(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>EE(t,n)):r}notify(t){Sr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Sr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Sr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ua=new WeakMap,CT),nr,Ds,Ms,kc,Pc,Rs,Tc,Dc,kT,E$=(kT=class{constructor(e={}){Me(this,nr);Me(this,Ds);Me(this,Ms);Me(this,kc);Me(this,Pc);Me(this,Rs);Me(this,Tc);Me(this,Dc);je(this,nr,e.queryCache||new O$),je(this,Ds,e.mutationCache||new _$),je(this,Ms,e.defaultOptions||{}),je(this,kc,new Map),je(this,Pc,new Map),je(this,Rs,0)}mount(){Vh(this,Rs)._++,U(this,Rs)===1&&(je(this,Tc,Vw.subscribe(async e=>{e&&(await this.resumePausedMutations(),U(this,nr).onFocus())})),je(this,Dc,Pm.subscribe(async e=>{e&&(await this.resumePausedMutations(),U(this,nr).onOnline())})))}unmount(){var e,t;Vh(this,Rs)._--,U(this,Rs)===0&&((e=U(this,Tc))==null||e.call(this),je(this,Tc,void 0),(t=U(this,Dc))==null||t.call(this),je(this,Dc,void 0))}isFetching(e){return U(this,nr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return U(this,Ds).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=U(this,nr).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=U(this,nr).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Ls(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return U(this,nr).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=U(this,nr).get(n.queryHash),s=a==null?void 0:a.state.data,l=o$(t,s);if(l!==void 0)return U(this,nr).build(this,n).setData(l,{...r,manual:!0})}setQueriesData(e,t,r){return Sr.batch(()=>U(this,nr).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=U(this,nr).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=U(this,nr);Sr.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=U(this,nr);return Sr.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Sr.batch(()=>U(this,nr).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(on).catch(on)}invalidateQueries(e,t={}){return Sr.batch(()=>(U(this,nr).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Sr.batch(()=>U(this,nr).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let s=a.fetch(void 0,r);return r.throwOnError||(s=s.catch(on)),a.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(on)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=U(this,nr).build(this,t);return r.isStaleByTime(Ls(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(on).catch(on)}fetchInfiniteQuery(e){return e.behavior=RE(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(on).catch(on)}ensureInfiniteQueryData(e){return e.behavior=RE(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Pm.isOnline()?U(this,Ds).resumePausedMutations():Promise.resolve()}getQueryCache(){return U(this,nr)}getMutationCache(){return U(this,Ds)}getDefaultOptions(){return U(this,Ms)}setDefaultOptions(e){je(this,Ms,e)}setQueryDefaults(e,t){U(this,kc).set(Ho(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...U(this,kc).values()],r={};return t.forEach(n=>{wd(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){U(this,Pc).set(Ho(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...U(this,Pc).values()],r={};return t.forEach(n=>{wd(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...U(this,Ms).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Kw(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Qw&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...U(this,Ms).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){U(this,nr).clear(),U(this,Ds).clear()}},nr=new WeakMap,Ds=new WeakMap,Ms=new WeakMap,kc=new WeakMap,Pc=new WeakMap,Rs=new WeakMap,Tc=new WeakMap,Dc=new WeakMap,kT),aD=j.createContext(void 0),Le=e=>{const t=j.useContext(aD);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},A$=({client:e,children:t})=>(j.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),c.jsx(aD.Provider,{value:e,children:t})),iD=j.createContext(!1),C$=()=>j.useContext(iD);iD.Provider;function k$(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var P$=j.createContext(k$()),T$=()=>j.useContext(P$),D$=(e,t,r)=>{const n=r!=null&&r.state.error&&typeof e.throwOnError=="function"?Hw(e.throwOnError,[r.state.error,r]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||n)&&(t.isReset()||(e.retryOnMount=!1))},M$=e=>{j.useEffect(()=>{e.clearReset()},[e])},R$=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||Hw(r,[e.error,n])),I$=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},L$=(e,t)=>e.isLoading&&e.isFetching&&!t,B$=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,LE=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function $$(e,t,r){var y,v,w,x;const n=C$(),a=T$(),s=Le(),l=s.defaultQueryOptions(e);(v=(y=s.getDefaultOptions().queries)==null?void 0:y._experimental_beforeQuery)==null||v.call(y,l);const u=s.getQueryCache().get(l.queryHash);l._optimisticResults=n?"isRestoring":"optimistic",I$(l),D$(l,a,u),M$(a);const f=!s.getQueryCache().get(l.queryHash),[h]=j.useState(()=>new t(s,l)),m=h.getOptimisticResult(l),g=!n&&e.subscribed!==!1;if(j.useSyncExternalStore(j.useCallback(_=>{const N=g?h.subscribe(Sr.batchCalls(_)):on;return h.updateResult(),N},[h,g]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),j.useEffect(()=>{h.setOptions(l)},[l,h]),B$(l,m))throw LE(l,h,a);if(R$({result:m,errorResetBoundary:a,throwOnError:l.throwOnError,query:u,suspense:l.suspense}))throw m.error;if((x=(w=s.getDefaultOptions().queries)==null?void 0:w._experimental_afterQuery)==null||x.call(w,l,m),l.experimental_prefetchInRender&&!Qo&&L$(m,n)){const _=f?LE(l,h,a):u==null?void 0:u.promise;_==null||_.catch(on).finally(()=>{h.updateResult()})}return l.notifyOnChangeProps?m:h.trackResult(m)}function rt(e,t){return $$(e,b$)}function xt(e,t){const r=Le(),[n]=j.useState(()=>new N$(r,e));j.useEffect(()=>{n.setOptions(e)},[n,e]);const a=j.useSyncExternalStore(j.useCallback(l=>n.subscribe(Sr.batchCalls(l)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=j.useCallback((l,u)=>{n.mutate(l,u).catch(on)},[n]);if(a.error&&Hw(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:s,mutateAsync:a.mutate}}const U$="modulepreload",z$=function(e){return"/"+e},BE={},Ww=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let l=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));a=l(r.map(h=>{if(h=z$(h),h in BE)return;BE[h]=!0;const m=h.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const y=document.createElement("link");if(y.rel=m?"stylesheet":U$,m||(y.as="script"),y.crossOrigin="",y.href=h,f&&y.setAttribute("nonce",f),document.head.appendChild(y),m)return new Promise((v,w)=>{y.addEventListener("load",v),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return a.then(l=>{for(const u of l||[])u.status==="rejected"&&s(u.reason);return t().catch(s)})};function Ip(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function q$(e,t,r,n){function a(s){return s instanceof r?s:new r(function(l){l(s)})}return new(r||(r=Promise))(function(s,l){function u(m){try{h(n.next(m))}catch(g){l(g)}}function f(m){try{h(n.throw(m))}catch(g){l(g)}}function h(m){m.done?s(m.value):a(m.value).then(u,f)}h((n=n.apply(e,t||[])).next())})}const F$=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Yw extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class K$ extends Yw{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class $E extends Yw{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class UE extends Yw{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var xx;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(xx||(xx={}));class Q${constructor(t,{headers:r={},customFetch:n,region:a=xx.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=F$(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return q$(this,arguments,void 0,function*(r,n={}){var a;let s,l;try{const{headers:u,method:f,body:h,signal:m,timeout:g}=n;let y={},{region:v}=n;v||(v=this.region);const w=new URL(`${this.url}/${r}`);v&&v!=="any"&&(y["x-region"]=v,w.searchParams.set("forceFunctionRegion",v));let x;h&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",x=h):typeof h=="string"?(y["Content-Type"]="text/plain",x=h):typeof FormData<"u"&&h instanceof FormData?x=h:(y["Content-Type"]="application/json",x=JSON.stringify(h)):h&&typeof h!="string"&&!(typeof Blob<"u"&&h instanceof Blob)&&!(h instanceof ArrayBuffer)&&!(typeof FormData<"u"&&h instanceof FormData)?x=JSON.stringify(h):x=h;let _=m;g&&(l=new AbortController,s=setTimeout(()=>l.abort(),g),m?(_=l.signal,m.addEventListener("abort",()=>l.abort())):_=l.signal);const N=yield this.fetch(w.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),u),body:x,signal:_}).catch(T=>{throw new K$(T)}),O=N.headers.get("x-relay-error");if(O&&O==="true")throw new $E(N);if(!N.ok)throw new UE(N);let E=((a=N.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),C;return E==="application/json"?C=yield N.json():E==="application/octet-stream"||E==="application/pdf"?C=yield N.blob():E==="text/event-stream"?C=N:E==="multipart/form-data"?C=yield N.formData():C=yield N.text(),{data:C,error:null,response:N}}catch(u){return{data:null,error:u,response:u instanceof UE||u instanceof $E?u.context:void 0}}finally{s&&clearTimeout(s)}})}}var H$=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},V$=class{constructor(e){var t,r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(n=e.urlLengthLimit)!==null&&n!==void 0?n:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let l=null,u=null,f=null,h=s.status,m=s.statusText;if(s.ok){var g,y;if(r.method!=="HEAD"){var v;const N=await s.text();N===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((v=r.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?u=N:u=JSON.parse(N))}const x=(g=r.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),_=(y=s.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");x&&_&&_.length>1&&(f=parseInt(_[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,h=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var w;const x=await s.text();try{l=JSON.parse(x),Array.isArray(l)&&s.status===404&&(u=[],l=null,h=200,m="OK")}catch{s.status===404&&x===""?(h=204,m="No Content"):l={message:x}}if(l&&r.isMaybeSingle&&(!(l==null||(w=l.details)===null||w===void 0)&&w.includes("0 rows"))&&(l=null,h=200,m="OK"),l&&r.shouldThrowOnError)throw new H$(l)}return{error:l,data:u,count:f,status:h,statusText:m}});return this.shouldThrowOnError||(a=a.catch(s=>{var l;let u="",f="",h="";const m=s==null?void 0:s.cause;if(m){var g,y,v,w;const N=(g=m==null?void 0:m.message)!==null&&g!==void 0?g:"",O=(y=m==null?void 0:m.code)!==null&&y!==void 0?y:"";u=`${(v=s==null?void 0:s.name)!==null&&v!==void 0?v:"FetchError"}: ${s==null?void 0:s.message}`,u+=`

Caused by: ${(w=m==null?void 0:m.name)!==null&&w!==void 0?w:"Error"}: ${N}`,O&&(u+=` (${O})`),m!=null&&m.stack&&(u+=`
${m.stack}`)}else{var x;u=(x=s==null?void 0:s.stack)!==null&&x!==void 0?x:""}const _=this.url.toString().length;return(s==null?void 0:s.name)==="AbortError"||(s==null?void 0:s.code)==="ABORT_ERR"?(h="",f="Request was aborted (timeout or manual cancellation)",_>this.urlLengthLimit&&(f+=`. Note: Your request URL is ${_} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((m==null?void 0:m.name)==="HeadersOverflowError"||(m==null?void 0:m.code)==="UND_ERR_HEADERS_OVERFLOW")&&(h="",f="HTTP headers exceeded server limits (typically 16KB)",_>this.urlLengthLimit&&(f+=`. Your request URL is ${_} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(l=s==null?void 0:s.name)!==null&&l!==void 0?l:"FetchError"}: ${s==null?void 0:s.message}`,details:u,hint:f,code:h},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},G$=class extends V${select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:a=n}={}){const s=a?`${a}.order`:"order",l=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"offset":`${n}.offset`,s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(s,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:a=!1,format:s="text"}={}){var l;const u=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),f=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${f}"; options=${u};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const zE=new RegExp("[,()]");var lc=class extends G${eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&zE.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&zE.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const s=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},W$=class{constructor(e,{headers:t={},schema:r,fetch:n,urlLengthLimit:a=8e3}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n,this.urlLengthLimit=a}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},a=r?"HEAD":"GET";let s=!1;const l=(e??"*").split("").map(h=>/\s/.test(h)&&!s?"":(h==='"'&&(s=!s),h)).join(""),{url:u,headers:f}=this.cloneRequestState();return u.searchParams.set("select",l),n&&f.append("Prefer",`count=${n}`),new lc({method:a,url:u,headers:f,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const a="POST",{url:s,headers:l}=this.cloneRequestState();if(t&&l.append("Prefer",`count=${t}`),r||l.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((f,h)=>f.concat(Object.keys(h)),[]);if(u.length>0){const f=[...new Set(u)].map(h=>`"${h}"`);s.searchParams.set("columns",f.join(","))}}return new lc({method:a,url:s,headers:l,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:a=!0}={}){var s;const l="POST",{url:u,headers:f}=this.cloneRequestState();if(f.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&u.searchParams.set("on_conflict",t),n&&f.append("Prefer",`count=${n}`),a||f.append("Prefer","missing=default"),Array.isArray(e)){const h=e.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(h.length>0){const m=[...new Set(h)].map(g=>`"${g}"`);u.searchParams.set("columns",m.join(","))}}return new lc({method:l,url:u,headers:f,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var r;const n="PATCH",{url:a,headers:s}=this.cloneRequestState();return t&&s.append("Prefer",`count=${t}`),new lc({method:n,url:a,headers:s,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new lc({method:r,url:n,headers:a,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function jd(e){"@babel/helpers - typeof";return jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jd(e)}function Y$(e,t){if(jd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function X$(e){var t=Y$(e,"string");return jd(t)=="symbol"?t:t+""}function J$(e,t,r){return(t=X$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Yh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qE(Object(r),!0).forEach(function(n){J$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Z$=class sD{constructor(t,{headers:r={},schema:n,fetch:a,timeout:s,urlLengthLimit:l=8e3}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.urlLengthLimit=l;const u=a??globalThis.fetch;s!==void 0&&s>0?this.fetch=(f,h)=>{const m=new AbortController,g=setTimeout(()=>m.abort(),s),y=h==null?void 0:h.signal;if(y){if(y.aborted)return clearTimeout(g),u(f,h);const v=()=>{clearTimeout(g),m.abort()};return y.addEventListener("abort",v,{once:!0}),u(f,Yh(Yh({},h),{},{signal:m.signal})).finally(()=>{clearTimeout(g),y.removeEventListener("abort",v)})}return u(f,Yh(Yh({},h),{},{signal:m.signal})).finally(()=>clearTimeout(g))}:this.fetch=u}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new W$(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new sD(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,r={},{head:n=!1,get:a=!1,count:s}={}){var l;let u;const f=new URL(`${this.url}/rpc/${t}`);let h;const m=v=>v!==null&&typeof v=="object"&&(!Array.isArray(v)||v.some(m)),g=n&&Object.values(r).some(m);g?(u="POST",h=r):n||a?(u=n?"HEAD":"GET",Object.entries(r).filter(([v,w])=>w!==void 0).map(([v,w])=>[v,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([v,w])=>{f.searchParams.append(v,w)})):(u="POST",h=r);const y=new Headers(this.headers);return g?y.set("Prefer",s?`count=${s},return=minimal`:"return=minimal"):s&&y.set("Prefer",`count=${s}`),new lc({method:u,url:f,headers:y,schema:this.schemaName,body:h,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}};class eU{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const a=n.node,s=parseInt(a.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const tU="2.95.3",rU=`realtime-js/${tU}`,nU="1.0.0",oD="2.0.0",FE=oD,wx=1e4,aU=1e3,iU=100;var js;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(js||(js={}));var wr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(wr||(wr={}));var ja;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ja||(ja={}));var jx;(function(e){e.websocket="websocket"})(jx||(jx={}));var _o;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(_o||(_o={}));class sU{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},l=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(t,r,n){var a,s;const l=t.topic,u=(a=t.ref)!==null&&a!==void 0?a:"",f=(s=t.join_ref)!==null&&s!==void 0?s:"",h=t.payload.event,m=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},g=Object.keys(m).length===0?"":JSON.stringify(m);if(f.length>255)throw new Error(`joinRef length ${f.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`metadata length ${g.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+u.length+l.length+h.length+g.length,v=new ArrayBuffer(this.HEADER_LENGTH+y);let w=new DataView(v),x=0;w.setUint8(x++,this.KINDS.userBroadcastPush),w.setUint8(x++,f.length),w.setUint8(x++,u.length),w.setUint8(x++,l.length),w.setUint8(x++,h.length),w.setUint8(x++,g.length),w.setUint8(x++,r),Array.from(f,N=>w.setUint8(x++,N.charCodeAt(0))),Array.from(u,N=>w.setUint8(x++,N.charCodeAt(0))),Array.from(l,N=>w.setUint8(x++,N.charCodeAt(0))),Array.from(h,N=>w.setUint8(x++,N.charCodeAt(0))),Array.from(g,N=>w.setUint8(x++,N.charCodeAt(0)));var _=new Uint8Array(v.byteLength+n.byteLength);return _.set(new Uint8Array(v),0),_.set(new Uint8Array(n),v.byteLength),_.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,s,l,u,f]=n;return r({join_ref:a,ref:s,topic:l,event:u,payload:f})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),s=r.getUint8(2),l=r.getUint8(3),u=r.getUint8(4);let f=this.HEADER_LENGTH+4;const h=n.decode(t.slice(f,f+a));f=f+a;const m=n.decode(t.slice(f,f+s));f=f+s;const g=n.decode(t.slice(f,f+l));f=f+l;const y=t.slice(f,t.byteLength),v=u===this.JSON_ENCODING?JSON.parse(n.decode(y)):y,w={type:this.BROADCAST_EVENT,event:m,payload:v};return l>0&&(w.meta=JSON.parse(g)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class lD{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Rt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Rt||(Rt={}));const KE=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((s,l)=>(s[l]=oU(l,e,t,a),s),{}):{}},oU=(e,t,r,n)=>{const a=t.find(u=>u.name===e),s=a==null?void 0:a.type,l=r[e];return s&&!n.includes(s)?cD(s,l):Sx(l)},cD=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return dU(t,r)}switch(e){case Rt.bool:return lU(t);case Rt.float4:case Rt.float8:case Rt.int2:case Rt.int4:case Rt.int8:case Rt.numeric:case Rt.oid:return cU(t);case Rt.json:case Rt.jsonb:return uU(t);case Rt.timestamp:return fU(t);case Rt.abstime:case Rt.date:case Rt.daterange:case Rt.int4range:case Rt.int8range:case Rt.money:case Rt.reltime:case Rt.text:case Rt.time:case Rt.timestamptz:case Rt.timetz:case Rt.tsrange:case Rt.tstzrange:return Sx(t);default:return Sx(t)}},Sx=e=>e,lU=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},cU=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},uU=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},dU=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let s;const l=e.slice(1,r);try{s=JSON.parse("["+l+"]")}catch{s=l?l.split(","):[]}return s.map(u=>cD(t,u))}return e},fU=e=>typeof e=="string"?e.replace(" ","T"):e,uD=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class m0{constructor(t,r,n={},a=wx){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var QE;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(QE||(QE={}));class yd{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:s,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yd.syncState(this.state,a,s,l),this.pendingDiffs.forEach(f=>{this.state=yd.syncDiff(this.state,f,s,l)}),this.pendingDiffs=[],u()}),this.channel._on(n.diff,{},a=>{const{onJoin:s,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=yd.syncDiff(this.state,a,s,l),u())}),this.onJoin((a,s,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:s,newPresences:l})}),this.onLeave((a,s,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:s,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const s=this.cloneDeep(t),l=this.transformState(r),u={},f={};return this.map(s,(h,m)=>{l[h]||(f[h]=m)}),this.map(l,(h,m)=>{const g=s[h];if(g){const y=m.map(_=>_.presence_ref),v=g.map(_=>_.presence_ref),w=m.filter(_=>v.indexOf(_.presence_ref)<0),x=g.filter(_=>y.indexOf(_.presence_ref)<0);w.length>0&&(u[h]=w),x.length>0&&(f[h]=x)}else u[h]=m}),this.syncDiff(s,{joins:u,leaves:f},n,a)}static syncDiff(t,r,n,a){const{joins:s,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(s,(u,f)=>{var h;const m=(h=t[u])!==null&&h!==void 0?h:[];if(t[u]=this.cloneDeep(f),m.length>0){const g=t[u].map(v=>v.presence_ref),y=m.filter(v=>g.indexOf(v.presence_ref)<0);t[u].unshift(...y)}n(u,m,f)}),this.map(l,(u,f)=>{let h=t[u];if(!h)return;const m=f.map(g=>g.presence_ref);h=h.filter(g=>m.indexOf(g.presence_ref)<0),t[u]=h,a(u,h,f),h.length===0&&delete t[u]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var HE;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(HE||(HE={}));var vd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(vd||(vd={}));var yi;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(yi||(yi={}));class fc{constructor(t,r={config:{}},n){var a,s;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=wr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new m0(this,ja.join,this.params,this.timeout),this.rejoinTimer=new lD(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=wr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=wr.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=wr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=wr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=wr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ja.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new yd(this),this.broadcastEndpointURL=uD(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,s;if(this.socket.isConnected()||this.socket.connect(),this.state==wr.closed){const{config:{broadcast:l,presence:u,private:f}}=this.params,h=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(v=>v.filter))!==null&&a!==void 0?a:[],m=!!this.bindings[vd.PRESENCE]&&this.bindings[vd.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,g={},y={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:m}),postgres_changes:h,private:f};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(v=>t==null?void 0:t(yi.CHANNEL_ERROR,v)),this._onClose(()=>t==null?void 0:t(yi.CLOSED)),this.updateJoinPayload(Object.assign({config:y},g)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:v})=>{var w;if(this.socket._isManualToken()||this.socket.setAuth(),v===void 0){t==null||t(yi.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,_=(w=x==null?void 0:x.length)!==null&&w!==void 0?w:0,N=[];for(let O=0;O<_;O++){const E=x[O],{filter:{event:C,schema:T,table:k,filter:M}}=E,R=v&&v[O];if(R&&R.event===C&&fc.isFilterValueEqual(R.schema,T)&&fc.isFilterValueEqual(R.table,k)&&fc.isFilterValueEqual(R.filter,M))N.push(Object.assign(Object.assign({},E),{id:R.id}));else{this.unsubscribe(),this.state=wr.errored,t==null||t(yi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,t&&t(yi.SUBSCRIBED);return}}).receive("error",v=>{this.state=wr.errored,t==null||t(yi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(yi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===wr.joined&&t===vd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;if(r==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(u.status===202)return{success:!0};let f=u.statusText;try{const h=await u.json();f=h.error||h.message||f}catch{}return Promise.reject(new Error(f))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:l}=t,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=h.body)===null||a===void 0?void 0:a.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var l,u,f;const h=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((f=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||f===void 0)&&f.ack)&&s("ok"),h.receive("ok",()=>s("ok")),h.receive("error",()=>s("error")),h.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=wr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ja.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new m0(this,ja.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=wr.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,s=setTimeout(()=>a.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(s),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new m0(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>iU){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,s;const l=t.toLocaleLowerCase(),{close:u,error:f,leave:h,join:m}=ja;if(n&&[u,f,h,m].indexOf(l)>=0&&n!==this._joinRef())return;let y=this._onMessage(l,r,n);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(v=>{var w,x,_;return((w=v.filter)===null||w===void 0?void 0:w.event)==="*"||((_=(x=v.filter)===null||x===void 0?void 0:x.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===l}).map(v=>v.callback(y,n)):(s=this.bindings[l])===null||s===void 0||s.filter(v=>{var w,x,_,N,O,E;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in v){const C=v.id,T=(w=v.filter)===null||w===void 0?void 0:w.event;return C&&((x=r.ids)===null||x===void 0?void 0:x.includes(C))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((_=r.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const C=(O=(N=v==null?void 0:v.filter)===null||N===void 0?void 0:N.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return C==="*"||C===((E=r==null?void 0:r.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===l}).map(v=>{if(typeof y=="object"&&"ids"in y){const w=y.data,{schema:x,table:_,commit_timestamp:N,type:O,errors:E}=w;y=Object.assign(Object.assign({},{schema:x,table:_,commit_timestamp:N,eventType:O,new:{},old:{},errors:E}),this._getPayloadRecords(w))}v.callback(y,n)})}_isClosed(){return this.state===wr.closed}_isJoined(){return this.state===wr.joined}_isJoining(){return this.state===wr.joining}_isLeaving(){return this.state===wr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),s={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(s):this.bindings[a]=[s],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var s;return!(((s=a.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&fc.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ja.close,{},t)}_onError(t){this._on(ja.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=wr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=KE(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=KE(t.columns,t.old_record)),r}}const p0=()=>{},Xh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},hU=[1e3,2e3,5e3,1e4],mU=1e4,pU=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class gU{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=wx,this.transport=null,this.heartbeatIntervalMs=Xh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=p0,this.ref=0,this.reconnectTimer=null,this.vsn=FE,this.logger=p0,this.conn=null,this.sendBuffer=[],this.serializer=new sU,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...s)=>a(...s):(...s)=>fetch(...s),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${jx.websocket}`,this.httpEndpoint=uD(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=eU.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return r==="ok"&&this._remove(t),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case js.connecting:return _o.Connecting;case js.open:return _o.Open;case js.closing:return _o.Closing;default:return _o.Closed}}isConnected(){return this.connectionState()===_o.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(s=>s.topic===n);if(a)return a;{const s=new fc(`realtime:${t}`,r,this);return this.channels.push(s),s}}push(t){const{topic:r,event:n,payload:a,ref:s}=t,l=()=>{this.encode(t,u=>{var f;(f=this.conn)===null||f===void 0||f.send(u)})};this.log("push",`${r} ${n} (${s})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(aU,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Xh.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const h=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",h)}catch(m){this.log("error","error in heartbeat callback",m)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:a,payload:s,ref:l}=r,u=l?`(${l})`:"",f=s.status||"";this.log("receive",`${f} ${n} ${a} ${u}`.trim(),s),this.channels.filter(h=>h._isMember(n)).forEach(h=>h._trigger(a,s,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===js.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===js.open||this.conn.readyState===js.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(ja.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([pU],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const s={access_token:r,version:rU};r&&a.updateJoinPayload(s),a.joinedOnce&&a._isJoined()&&a._push(ja.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new lD(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Xh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,s,l,u,f,h,m,g,y,v;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:wx,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Xh.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:p0,this.vsn=(f=t==null?void 0:t.vsn)!==null&&f!==void 0?f:FE,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=t==null?void 0:t.reconnectAfterMs)!==null&&h!==void 0?h:(w=>hU[w-1]||mU),this.vsn){case nU:this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:((w,x)=>x(JSON.stringify(w))),this.decode=(g=t==null?void 0:t.decode)!==null&&g!==void 0?g:((w,x)=>x(JSON.parse(w)));break;case oD:this.encode=(y=t==null?void 0:t.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(v=t==null?void 0:t.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Sd=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function yU(e,t,r){const n=new URL(t,e);if(r)for(const[a,s]of Object.entries(r))s!==void 0&&n.searchParams.set(a,s);return n.toString()}async function vU(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function bU(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:a,body:s,headers:l}){const u=yU(e.baseUrl,n,a),f=await vU(e.auth),h=await t(u,{method:r,headers:{...s?{"Content-Type":"application/json"}:{},...f,...l},body:s?JSON.stringify(s):void 0}),m=await h.text(),g=(h.headers.get("content-type")||"").includes("application/json"),y=g&&m?JSON.parse(m):m;if(!h.ok){const v=g?y:void 0,w=v==null?void 0:v.error;throw new Sd((w==null?void 0:w.message)??`Request failed with status ${h.status}`,{status:h.status,icebergType:w==null?void 0:w.type,icebergCode:w==null?void 0:w.code,details:v})}return{status:h.status,headers:h.headers,data:y}}}}function Jh(e){return e.join("")}var xU=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Jh(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Jh(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Jh(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Jh(e.namespace)}`}),!0}catch(t){if(t instanceof Sd&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Sd&&r.status===409)return;throw r}}};function Jl(e){return e.join("")}var wU=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Sd&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Sd&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},jU=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=bU({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new xU(this.client,t),this.tableOps=new wU(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Lp=class extends Error{constructor(e,t="storage",r,n){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function Bp(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Zh=class extends Lp{constructor(e,t,r,n="storage"){super(e,n,t,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},dD=class extends Lp{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const SU=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),_U=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},_x=e=>{if(Array.isArray(e))return e.map(r=>_x(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[a]=_x(n)}),t},NU=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function _d(e){"@babel/helpers - typeof";return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_d(e)}function OU(e,t){if(_d(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_d(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EU(e){var t=OU(e,"string");return _d(t)=="symbol"?t:t+""}function AU(e,t,r){return(t=EU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ue(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VE(Object(r),!0).forEach(function(n){AU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const GE=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},CU=async(e,t,r,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e,s=a.status||500;if(typeof a.json=="function")a.json().then(l=>{const u=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||s+"";t(new Zh(GE(l),s,u,n))}).catch(()=>{if(n==="vectors"){const l=s+"";t(new Zh(a.statusText||`HTTP ${s} error`,s,l,n))}else{const l=s+"";t(new Zh(a.statusText||`HTTP ${s} error`,s,l,n))}});else{const l=s+"";t(new Zh(a.statusText||`HTTP ${s} error`,s,l,n))}}else t(new dD(GE(e),e,n))},kU=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!n?Ue(Ue({},a),r):(_U(n)?(a.headers=Ue({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Ue(Ue({},a),r))};async function td(e,t,r,n,a,s,l){return new Promise((u,f)=>{e(r,kU(t,n,a,s)).then(h=>{if(!h.ok)throw h;if(n!=null&&n.noResolveJson)return h;if(l==="vectors"){const m=h.headers.get("content-type");if(h.headers.get("content-length")==="0"||h.status===204)return{};if(!m||!m.includes("application/json"))return{}}return h.json()}).then(h=>u(h)).catch(h=>CU(h,f,n,l))})}function fD(e="storage"){return{get:async(t,r,n,a)=>td(t,"GET",r,n,a,void 0,e),post:async(t,r,n,a,s)=>td(t,"POST",r,a,s,n,e),put:async(t,r,n,a,s)=>td(t,"PUT",r,a,s,n,e),head:async(t,r,n,a)=>td(t,"HEAD",r,Ue(Ue({},n),{},{noResolveJson:!0}),a,void 0,e),remove:async(t,r,n,a,s)=>td(t,"DELETE",r,a,s,n,e)}}const PU=fD("storage"),{get:Nd,post:ba,put:Nx,head:TU,remove:Xw}=PU,Rn=fD("vectors");var Gc=class{constructor(e,t={},r,n="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=SU(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Bp(r))return{data:null,error:r};throw r}}},DU=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Bp(t))return{data:null,error:t};throw t}}};let hD;hD=Symbol.toStringTag;var MU=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[hD]="BlobDownloadBuilder",this.promise=null}asStream(){return new DU(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Bp(t))return{data:null,error:t};throw t}}};const RU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},WE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var IU=class extends Gc{constructor(e,t={},r,n){super(e,t,n,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,n){var a=this;return a.handleOperation(async()=>{let s;const l=Ue(Ue({},WE),n);let u=Ue(Ue({},a.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const f=l.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",l.cacheControl),f&&s.append("metadata",a.encodeMetadata(f)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.has("cacheControl")||s.append("cacheControl",l.cacheControl),f&&!s.has("metadata")&&s.append("metadata",a.encodeMetadata(f))):(s=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,f&&(u["x-metadata"]=a.toBase64(a.encodeMetadata(f))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!l.duplex&&(l.duplex="half")),n!=null&&n.headers&&(u=Ue(Ue({},u),n.headers));const h=a._removeEmptyFolders(t),m=a._getFinalPath(h),g=await(e=="PUT"?Nx:ba)(a.fetch,`${a.url}/object/${m}`,s,Ue({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{path:h,id:g.Id,fullPath:g.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var a=this;const s=a._removeEmptyFolders(e),l=a._getFinalPath(s),u=new URL(a.url+`/object/upload/sign/${l}`);return u.searchParams.set("token",t),a.handleOperation(async()=>{let f;const h=Ue({upsert:WE.upsert},n),m=Ue(Ue({},a.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&r instanceof Blob?(f=new FormData,f.append("cacheControl",h.cacheControl),f.append("",r)):typeof FormData<"u"&&r instanceof FormData?(f=r,f.append("cacheControl",h.cacheControl)):(f=r,m["cache-control"]=`max-age=${h.cacheControl}`,m["content-type"]=h.contentType),{path:s,fullPath:(await Nx(a.fetch,u.toString(),f,{headers:m})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(e);const a=Ue({},r.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const s=await ba(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:a}),l=new URL(r.url+s.url),u=l.searchParams.get("token");if(!u)throw new Lp("No token returned by API");return{signedUrl:l.toString(),path:e,token:u}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;return n.handleOperation(async()=>await ba(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}))}async copy(e,t,r){var n=this;return n.handleOperation(async()=>({path:(await ba(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(e,t,r){var n=this;return n.handleOperation(async()=>{let a=n._getFinalPath(e),s=await ba(n.fetch,`${n.url}/object/sign/${a}`,Ue({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${s.signedURL}${l}`)}})}async createSignedUrls(e,t,r){var n=this;return n.handleOperation(async()=>{const a=await ba(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a.map(l=>Ue(Ue({},l),{},{signedUrl:l.signedURL?encodeURI(`${n.url}${l.signedURL}${s}`):null}))})}download(e,t,r){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=a?`?${a}`:"",l=this._getFinalPath(e),u=()=>Nd(this.fetch,`${this.url}/${n}/${l}${s}`,{headers:this.headers,noResolveJson:!0},r);return new MU(u,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>_x(await Nd(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await TU(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Bp(n)&&n instanceof dD){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&n.push(a);const s=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&n.push(l);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${r}${u}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await Xw(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var n=this;return n.handleOperation(async()=>{const a=Ue(Ue(Ue({},RU),t),{},{prefix:e||""});return await ba(n.fetch,`${n.url}/object/list/${n.bucketId}`,a,{headers:n.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const n=Ue({},e);return await ba(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const LU="2.95.3",tf={"X-Client-Info":`storage-js/${LU}`};var BU=class extends Gc{constructor(e,t={},r,n){const a=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."));const s=a.href.replace(/\/$/,""),l=Ue(Ue({},tf),t);super(s,l,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await Nd(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Nd(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await ba(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await Nx(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await ba(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Xw(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},$U=class extends Gc{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=Ue(Ue({},tf),t);super(n,a,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await ba(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),a=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return await Nd(t.fetch,a,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Xw(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!NU(e))throw new Lp("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new jU({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(a,s){const l=a[s];return typeof l!="function"?l:async(...u)=>{try{return{data:await l.apply(a,u),error:null}}catch(f){if(n)throw f;return{data:null,error:f}}}}})}},UU=class extends Gc{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=Ue(Ue({},tf),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await Rn.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await Rn.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await Rn.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await Rn.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},zU=class extends Gc{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=Ue(Ue({},tf),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Rn.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await Rn.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await Rn.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await Rn.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Rn.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},qU=class extends Gc{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=Ue(Ue({},tf),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Rn.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Rn.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await Rn.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Rn.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},FU=class extends qU{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new KU(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},KU=class extends UU{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,Ue(Ue({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,Ue(Ue({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new QU(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},QU=class extends zU{constructor(e,t,r,n,a){super(e,t,a),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,Ue(Ue({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,Ue(Ue({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,Ue(Ue({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,Ue(Ue({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,Ue(Ue({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},HU=class extends BU{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new IU(this.url,this.headers,e,this.fetch)}get vectors(){return new FU(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new $U(this.url+"/iceberg",this.headers,this.fetch)}};const mD="2.95.3",cc=30*1e3,Ox=3,g0=Ox*cc,VU="http://localhost:9999",GU="supabase.auth.token",WU={"X-Client-Info":`gotrue-js/${mD}`},Ex="X-Supabase-Api-Version",pD={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},YU=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,XU=600*1e3;class Od extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Pe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class JU extends Od{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function ZU(e){return Pe(e)&&e.name==="AuthApiError"}class No extends Od{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ui extends Od{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Mn extends Ui{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function y0(e){return Pe(e)&&e.name==="AuthSessionMissingError"}class Zl extends Ui{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class em extends Ui{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class tm extends Ui{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ez(e){return Pe(e)&&e.name==="AuthImplicitGrantRedirectError"}class YE extends Ui{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class tz extends Ui{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Ax extends Ui{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function v0(e){return Pe(e)&&e.name==="AuthRetryableFetchError"}class XE extends Ui{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Cx extends Ui{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Tm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),JE=` 	
\r=`.split(""),rz=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<JE.length;t+=1)e[JE[t].charCodeAt(0)]=-2;for(let t=0;t<Tm.length;t+=1)e[Tm[t].charCodeAt(0)]=t;return e})();function ZE(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Tm[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Tm[n]),t.queuedBits-=6}}function gD(e,t,r){const n=rz[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function eA(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=l=>{iz(l,n,r)};for(let l=0;l<e.length;l+=1)gD(e.charCodeAt(l),a,s);return t.join("")}function nz(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function az(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}nz(n,t)}}function iz(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function pc(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)gD(e.charCodeAt(a),r,n);return new Uint8Array(t)}function sz(e){const t=[];return az(e,r=>t.push(r)),new Uint8Array(t)}function Eo(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>ZE(a,r,n)),ZE(null,r,n),t.join("")}function oz(e){return Math.round(Date.now()/1e3)+e}function lz(){return Symbol("auth-callback")}const Kr=()=>typeof window<"u"&&typeof document<"u",yo={tested:!1,writable:!1},yD=()=>{if(!Kr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(yo.tested)return yo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),yo.tested=!0,yo.writable=!0}catch{yo.tested=!0,yo.writable=!1}return yo.writable};function cz(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,s)=>{t[s]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const vD=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),uz=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",uc=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},vo=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Fr=async(e,t)=>{await e.removeItem(t)};class $p{constructor(){this.promise=new $p.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}$p.promiseConstructor=Promise;function rm(e){const t=e.split(".");if(t.length!==3)throw new Cx("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!YU.test(t[n]))throw new Cx("JWT not in base64url format");return{header:JSON.parse(eA(t[0])),payload:JSON.parse(eA(t[1])),signature:pc(t[2]),raw:{header:t[0],payload:t[1]}}}async function dz(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function fz(e,t){return new Promise((n,a)=>{(async()=>{for(let s=0;s<1/0;s++)try{const l=await e(s);if(!t(s,null,l)){n(l);return}}catch(l){if(!t(s,l)){a(l);return}}})()})}function hz(e){return("0"+e.toString(16)).substr(-2)}function mz(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let s=0;s<56;s++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,hz).join("")}async function pz(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(s=>String.fromCharCode(s)).join("")}async function gz(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await pz(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ec(e,t,r=!1){const n=mz();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await uc(e,`${t}-code-verifier`,a);const s=await gz(n);return[s,n===s?"plain":"s256"]}const yz=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function vz(e){const t=e.headers.get(Ex);if(!t||!t.match(yz))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function bz(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function xz(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const wz=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function tc(e){if(!wz.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function b0(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function jz(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function tA(e){return JSON.parse(JSON.stringify(e))}const xo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Sz=[502,503,504];async function rA(e){var t;if(!uz(e))throw new Ax(xo(e),0);if(Sz.includes(e.status))throw new Ax(xo(e),e.status);let r;try{r=await e.json()}catch(s){throw new No(xo(s),s)}let n;const a=vz(e);if(a&&a.getTime()>=pD["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new XE(xo(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Mn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,l)=>s&&typeof l=="string",!0))throw new XE(xo(r),e.status,r.weak_password.reasons);throw new JU(xo(r),e.status||500,n)}const _z=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function $e(e,t,r,n){var a;const s=Object.assign({},n==null?void 0:n.headers);s[Ex]||(s[Ex]=pD["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const l=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",f=await Nz(e,t,r+u,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(f):{data:Object.assign({},f),error:null}}async function Nz(e,t,r,n,a,s){const l=_z(t,n,a,s);let u;try{u=await e(r,Object.assign({},l))}catch(f){throw console.error(f),new Ax(xo(f),0)}if(u.ok||await rA(u),n!=null&&n.noResolveJson)return u;try{return await u.json()}catch(f){await rA(f)}}function va(e){var t;let r=null;Az(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=oz(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function nA(e){const t=va(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ns(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Oz(e){return{data:e,error:null}}function Ez(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s}=e,l=Ip(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s},f=Object.assign({},l);return{data:{properties:u,user:f},error:null}}function aA(e){return e}function Az(e){return e.access_token&&e.refresh_token&&e.expires_in}const x0=["global","local","others"];class Cz{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=vD(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=x0[0]){if(x0.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${x0.join(", ")}`);try{return await $e(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await $e(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ns})}catch(n){if(Pe(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Ip(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await $e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Ez,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Pe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await $e(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ns})}catch(r){if(Pe(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,s,l,u,f;try{const h={nextPage:null,lastPage:0,total:0},m=await $e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:aA});if(m.error)throw m.error;const g=await m.json(),y=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(f=(u=m.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return v.length>0&&(v.forEach(w=>{const x=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(w.split(";")[1].split("=")[1]);h[`${_}Page`]=x}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(Pe(h))return{data:{users:[]},error:h};throw h}}async getUserById(t){tc(t);try{return await $e(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ns})}catch(r){if(Pe(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){tc(t);try{return await $e(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ns})}catch(n){if(Pe(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){tc(t);try{return await $e(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ns})}catch(n){if(Pe(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){tc(t.userId);try{const{data:r,error:n}=await $e(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(Pe(r))return{data:null,error:r};throw r}}async _deleteFactor(t){tc(t.userId),tc(t.id);try{return{data:await $e(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,s,l,u,f;try{const h={nextPage:null,lastPage:0,total:0},m=await $e(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:aA});if(m.error)throw m.error;const g=await m.json(),y=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(f=(u=m.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return v.length>0&&(v.forEach(w=>{const x=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(w.split(";")[1].split("=")[1]);h[`${_}Page`]=x}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(Pe(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(t){try{return await $e(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Pe(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await $e(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Pe(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await $e(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await $e(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await $e(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Pe(r))return{data:null,error:r};throw r}}}function iA(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const rc={debug:!!(globalThis&&yD()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class bD extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class kz extends bD{}async function Pz(e,t,r){rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),rc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new kz(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(rc.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Tz(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function xD(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Dz(e){return parseInt(e,16)}function Mz(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function Rz(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:s=new Date,nonce:l,notBefore:u,requestId:f,resources:h,scheme:m,uri:g,version:y}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const v=xD(e.address),w=m?`${m}://${n}`:n,x=e.statement?`${e.statement}
`:"",_=`${w} wants you to sign in with your Ethereum account:
${v}

${x}`;let N=`URI: ${g}
Version: ${y}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${s.toISOString()}`;if(a&&(N+=`
Expiration Time: ${a.toISOString()}`),u&&(N+=`
Not Before: ${u.toISOString()}`),f&&(N+=`
Request ID: ${f}`),h){let O=`
Resources:`;for(const E of h){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);O+=`
- ${E}`}N+=O}return`${_}
${N}`}class pr extends Error{constructor({message:t,code:r,cause:n,name:a}){var s;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(s=a??(n instanceof Error?n.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=r}}class Dm extends pr{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function Iz({error:e,options:t}){var r,n,a;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new pr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=s.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new pr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=s.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new pr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=s.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new pr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new pr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new pr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new pr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new pr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(wD(l)){if(s.rp.id!==l)return new pr({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new pr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new pr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new pr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new pr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Lz({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new pr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new pr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(wD(n)){if(r.rpId!==n)return new pr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new pr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new pr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new pr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Bz{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const $z=new Bz;function Uz(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=Ip(e,["challenge","user","excludeCredentials"]),s=pc(t).buffer,l=Object.assign(Object.assign({},r),{id:pc(r.id).buffer}),u=Object.assign(Object.assign({},a),{challenge:s,user:l});if(n&&n.length>0){u.excludeCredentials=new Array(n.length);for(let f=0;f<n.length;f++){const h=n[f];u.excludeCredentials[f]=Object.assign(Object.assign({},h),{id:pc(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return u}function zz(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Ip(e,["challenge","allowCredentials"]),a=pc(t).buffer,s=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){s.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];s.allowCredentials[l]=Object.assign(Object.assign({},u),{id:pc(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return s}function qz(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Eo(new Uint8Array(e.response.attestationObject)),clientDataJSON:Eo(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Fz(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Eo(new Uint8Array(a.authenticatorData)),clientDataJSON:Eo(new Uint8Array(a.clientDataJSON)),signature:Eo(new Uint8Array(a.signature)),userHandle:a.userHandle?Eo(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function wD(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function sA(){var e,t;return!!(Kr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Kz(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Dm("Browser returned unexpected credential type",t)}:{data:null,error:new Dm("Empty credential response",t)}}catch(t){return{data:null,error:Iz({error:t,options:e})}}}async function Qz(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Dm("Browser returned unexpected credential type",t)}:{data:null,error:new Dm("Empty credential response",t)}}catch(t){return{data:null,error:Lz({error:t,options:e})}}}const Hz={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Vz={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Mm(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const s in a){const l=a[s];if(l!==void 0)if(Array.isArray(l))n[s]=l;else if(r(l))n[s]=l;else if(t(l)){const u=n[s];t(u)?n[s]=Mm(u,l):n[s]=Mm(l)}else n[s]=l}return n}function Gz(e,t){return Mm(Hz,e,t||{})}function Wz(e,t){return Mm(Vz,e,t||{})}class Yz{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},s){var l;try{const{data:u,error:f}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!u)return{data:null,error:f};const h=a??$z.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:m}=u.webauthn.credential_options.publicKey;if(!m.name){const g=n;if(g)m.name=`${m.id}:${g}`;else{const v=(await this.client.getUser()).data.user,w=((l=v==null?void 0:v.user_metadata)===null||l===void 0?void 0:l.name)||(v==null?void 0:v.email)||(v==null?void 0:v.id)||"User";m.name=`${m.id}:${w}`}}m.displayName||(m.displayName=m.name)}switch(u.webauthn.type){case"create":{const m=Gz(u.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:g,error:y}=await Kz({publicKey:m,signal:h});return g?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}case"request":{const m=Wz(u.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:g,error:y}=await Qz(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:m,signal:h}));return g?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}}}catch(u){return Pe(u)?{data:null,error:u}:{data:null,error:new No("Unexpected error in challenge",u)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},s){if(!r)return{data:null,error:new Od("rpId is required for WebAuthn authentication")};try{if(!sA())return{data:null,error:new No("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:s});if(!l)return{data:null,error:u};const{webauthn:f}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:f.type,rpId:r,rpOrigins:n,credential_response:f.credential_response}})}catch(l){return Pe(l)?{data:null,error:l}:{data:null,error:new No("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},s){if(!r)return{data:null,error:new Od("rpId is required for WebAuthn registration")};try{if(!sA())return{data:null,error:new No("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(m=>{var g;return(g=m.data)===null||g===void 0?void 0:g.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===t&&y.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m==null?void 0:m.id}):void 0),{data:null,error:u};const{data:f,error:h}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:s});return f?this._verify({factorId:l.id,challengeId:f.challengeId,webauthn:{rpId:r,rpOrigins:n,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:h}}catch(l){return Pe(l)?{data:null,error:l}:{data:null,error:new No("Unexpected error in register",l)}}}}Tz();const Xz={url:VU,storageKey:GU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:WU,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function oA(e,t,r){return await r()}const nc={};class Ed{get jwks(){var t,r;return(r=(t=nc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){nc[this.storageKey]=Object.assign(Object.assign({},nc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=nc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){nc[this.storageKey]=Object.assign(Object.assign({},nc[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},Xz),t);if(this.storageKey=s.storageKey,this.instanceID=(r=Ed.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Ed.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Kr()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Cz({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=vD(s.fetch),this.lock=s.lock||oA,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&Kr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Pz:this.lock=oA,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Yz(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:yD()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=iA(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=iA(this.memoryStorage)),Kr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l);try{await this._notifyAllSubscribers(l.data.event,l.data.session,!1)}catch(u){this._debug("#broadcastChannel","error",u)}})}this.initialize().catch(l=>{this._debug("#initialize()","error",l)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${mD}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Kr()&&(r=cz(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Kr()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:s}=await this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),ez(s)){const f=(t=s.details)===null||t===void 0?void 0:t.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:s}}return{error:s}}const{session:l,redirectType:u}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Pe(r)?this._returnResult({error:r}):this._returnResult({error:new No("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const s=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:va}),{data:l,error:u}=s;if(u||!l)return this._returnResult({data:{user:null,session:null},error:u});const f=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(s){if(Pe(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(t){var r,n,a;try{let s;if("email"in t){const{email:m,password:g,options:y}=t;let v=null,w=null;this.flowType==="pkce"&&([v,w]=await ec(this.storage,this.storageKey)),s=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:m,password:g,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:v,code_challenge_method:w},xform:va})}else if("phone"in t){const{phone:m,password:g,options:y}=t;s=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:g,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},channel:(a=y==null?void 0:y.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:va})}else throw new em("You must provide either an email or phone number and a password");const{data:l,error:u}=s;if(u||!l)return await Fr(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const f=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(s){if(await Fr(this.storage,`${this.storageKey}-code-verifier`),Pe(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(t){try{let r;if("email"in t){const{email:s,password:l,options:u}=t;r=await $e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:nA})}else if("phone"in t){const{phone:s,password:l,options:u}=t;r=await $e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:nA})}else throw new em("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const s=new Zl;return this._returnResult({data:{user:null,session:null},error:s})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(Pe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,s,l,u,f,h,m,g,y;let v,w;if("message"in t)v=t.message,w=t.signature;else{const{chain:x,wallet:_,statement:N,options:O}=t;let E;if(Kr())if(typeof _=="object")E=_;else{const L=window;if("ethereum"in L&&typeof L.ethereum=="object"&&"request"in L.ethereum&&typeof L.ethereum.request=="function")E=L.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=_}const C=new URL((r=O==null?void 0:O.url)!==null&&r!==void 0?r:window.location.href),T=await E.request({method:"eth_requestAccounts"}).then(L=>L).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const k=xD(T[0]);let M=(n=O==null?void 0:O.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!M){const L=await E.request({method:"eth_chainId"});M=Dz(L)}const R={domain:C.host,address:k,statement:N,uri:C.href,version:"1",chainId:M,nonce:(a=O==null?void 0:O.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(l=(s=O==null?void 0:O.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=O==null?void 0:O.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(f=O==null?void 0:O.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(h=O==null?void 0:O.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(m=O==null?void 0:O.signInWithEthereum)===null||m===void 0?void 0:m.resources};v=Rz(R),w=await E.request({method:"personal_sign",params:[Mz(v),k]})}try{const{data:x,error:_}=await $e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:w},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:va});if(_)throw _;if(!x||!x.session||!x.user){const N=new Zl;return this._returnResult({data:{user:null,session:null},error:N})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:_})}catch(x){if(Pe(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(t){var r,n,a,s,l,u,f,h,m,g,y,v;let w,x;if("message"in t)w=t.message,x=t.signature;else{const{chain:_,wallet:N,statement:O,options:E}=t;let C;if(Kr())if(typeof N=="object")C=N;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))C=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=N}const T=new URL((r=E==null?void 0:E.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in C&&C.signIn){const k=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E==null?void 0:E.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),O?{statement:O}:null));let M;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")M=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)M=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)w=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),x=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${T.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(a=(n=E==null?void 0:E.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((s=E==null?void 0:E.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((l=E==null?void 0:E.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((u=E==null?void 0:E.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((f=E==null?void 0:E.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((h=E==null?void 0:E.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((g=(m=E==null?void 0:E.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||g===void 0)&&g.length?["Resources",...E.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const k=await C.signMessage(new TextEncoder().encode(w),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=k}}try{const{data:_,error:N}=await $e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Eo(x)},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:va});if(N)throw N;if(!_||!_.session||!_.user){const O=new Zl;return this._returnResult({data:{user:null,session:null},error:O})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:N})}catch(_){if(Pe(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(t){const r=await vo(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new tz;const{data:s,error:l}=await $e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:va});if(await Fr(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!s||!s.session||!s.user){const u=new Zl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:a??null}),error:l})}catch(s){if(await Fr(this.storage,`${this.storageKey}-code-verifier`),Pe(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:s,nonce:l}=t,u=await $e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:s,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:va}),{data:f,error:h}=u;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!f||!f.session||!f.user){const m=new Zl;return this._returnResult({data:{user:null,session:null},error:m})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:h})}catch(r){if(Pe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,s,l;try{if("email"in t){const{email:u,options:f}=t;let h=null,m=null;this.flowType==="pkce"&&([h,m]=await ec(this.storage,this.storageKey));const{error:g}=await $e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},create_user:(n=f==null?void 0:f.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:m},redirectTo:f==null?void 0:f.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:g})}if("phone"in t){const{phone:u,options:f}=t,{data:h,error:m}=await $e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(a=f==null?void 0:f.data)!==null&&a!==void 0?a:{},create_user:(s=f==null?void 0:f.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(l=f==null?void 0:f.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:m})}throw new em("You must provide either an email or phone number.")}catch(u){if(await Fr(this.storage,`${this.storageKey}-code-verifier`),Pe(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(t){var r,n;try{let a,s;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,s=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:u}=await $e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:a,xform:va});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const f=l.session,h=l.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(a){if(Pe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a,s,l;try{let u=null,f=null;this.flowType==="pkce"&&([u,f]=await ec(this.storage,this.storageKey));const h=await $e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:f}),headers:this.headers,xform:Oz});return!((s=h.data)===null||s===void 0)&&s.url&&Kr()&&!(!((l=t.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(u){if(await Fr(this.storage,`${this.storageKey}-code-verifier`),Pe(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Mn;const{error:a}=await $e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(Pe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:s}=t,{error:l}=await $e(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in t){const{phone:n,type:a,options:s}=t,{data:l,error:u}=await $e(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u})}throw new em("You must provide either an email or phone number and a type")}catch(r){if(Pe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await vo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<g0:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await vo(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=b0()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};t.user=jz(t.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await $e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ns}):await this._useSession(async r=>{var n,a,s;const{data:l,error:u}=r;if(u)throw u;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Mn}:await $e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&s!==void 0?s:void 0,xform:Ns})})}catch(r){if(Pe(r))return y0(r)&&(await this._removeSession(),await Fr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:s}=n;if(s)throw s;if(!a.session)throw new Mn;const l=a.session;let u=null,f=null;this.flowType==="pkce"&&t.email!=null&&([u,f]=await ec(this.storage,this.storageKey));const{data:h,error:m}=await $e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:f}),jwt:l.access_token,xform:Ns});if(m)throw m;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(n){if(await Fr(this.storage,`${this.storageKey}-code-verifier`),Pe(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Mn;const r=Date.now()/1e3;let n=r,a=!0,s=null;const{payload:l}=rm(t.access_token);if(l.exp&&(n=l.exp,a=n<=r),a){const{data:u,error:f}=await this._callRefreshToken(t.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!u)return{data:{user:null,session:null},error:null};s=u}else{const{data:u,error:f}=await this._getUser(t.access_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});s={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(Pe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:u}=r;if(u)throw u;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Mn;const{data:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Pe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Kr())throw new tm("No browser detected.");if(t.error||t.error_description||t.error_code)throw new tm(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new YE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new tm("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new YE("No code detected.");const{data:O,error:E}=await this._exchangeCodeForSession(t.code);if(E)throw E;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:s,refresh_token:l,expires_in:u,expires_at:f,token_type:h}=t;if(!s||!u||!l||!h)throw new tm("No session defined in URL");const m=Math.round(Date.now()/1e3),g=parseInt(u);let y=m+g;f&&(y=parseInt(f));const v=y-m;v*1e3<=cc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${g}s`);const w=y-g;m-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,y,m):m-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,y,m);const{data:x,error:_}=await this._getUser(s);if(_)throw _;const N={provider_token:n,provider_refresh_token:a,access_token:s,expires_in:g,expires_at:y,refresh_token:l,token_type:h,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:N,redirectType:t.type},error:null})}catch(n){if(Pe(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await vo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:s}=r;if(s&&!y0(s))return this._returnResult({error:s});const l=(n=a.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(ZU(u)&&(u.status===404||u.status===401||u.status===403)||y0(u)))return this._returnResult({error:u})}return t!=="others"&&(await this._removeSession(),await Fr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=lz(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:s},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await ec(this.storage,this.storageKey,!0));try{return await $e(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(await Fr(this.storage,`${this.storageKey}-code-verifier`),Pe(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(Pe(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async s=>{var l,u,f,h,m;const{data:g,error:y}=s;if(y)throw y;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(f=t.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await $e(this.fetch,"GET",v,{headers:this.headers,jwt:(m=(h=g.session)===null||h===void 0?void 0:h.access_token)!==null&&m!==void 0?m:void 0})});if(a)throw a;return Kr()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(Pe(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:s}}=r;if(a)throw a;const{options:l,provider:u,token:f,access_token:h,nonce:m}=t,g=await $e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=s==null?void 0:s.access_token)!==null&&n!==void 0?n:void 0,body:{provider:u,id_token:f,access_token:h,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:va}),{data:y,error:v}=g;return v?this._returnResult({data:{user:null,session:null},error:v}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new Zl}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:v}))}catch(a){if(await Fr(this.storage,`${this.storageKey}-code-verifier`),Pe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:s,error:l}=r;if(l)throw l;return await $e(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Pe(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await fz(async a=>(a>0&&await dz(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await $e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:va})),(a,s)=>{const l=200*Math.pow(2,a);return s&&v0(s)&&Date.now()+l-n<cc})}catch(n){if(this._debug(r,"error",n),Pe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Kr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await vo(this.storage,this.storageKey);if(a&&this.userStorage){let l=await vo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await uc(this.userStorage,this.storageKey+"-user",l)),a.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:b0()}else if(a&&!a.user&&!a.user){const l=await vo(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(a.user=l.user,await Fr(this.storage,this.storageKey+"-user"),await uc(this.storage,this.storageKey,a)):a.user=b0()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const s=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<g0;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${g0}s`),s){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),v0(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(a.access_token);!u&&(l!=null&&l.user)?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Mn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new $p;const{data:s,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!s.session)throw new Mn;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const u={data:s.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(s){if(this._debug(a,"error",s),Pe(s)){const l={data:null,error:s};return v0(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const s=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,r)}catch(f){s.push(f)}});if(await Promise.all(l),s.length>0){for(let u=0;u<s.length;u+=1)console.error(s[u]);throw s[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Fr(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await uc(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const s=tA(a);await uc(this.storage,this.storageKey,s)}else{const a=tA(r);await uc(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Fr(this.storage,this.storageKey),await Fr(this.storage,this.storageKey+"-code-verifier"),await Fr(this.storage,this.storageKey+"-user"),this.userStorage&&await Fr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Kr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),cc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/cc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${cc}ms, refresh threshold is ${Ox} ticks`),a<=Ox&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof bD)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Kr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,l]=await ec(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(u.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);a.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:s}=r;return s?this._returnResult({data:null,error:s}):await $e(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Pe(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:s,error:l}=r;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:f,error:h}=await $e(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return h?this._returnResult({data:null,error:h}):(t.factorType==="totp"&&f.type==="totp"&&(!((a=f==null?void 0:f.totp)===null||a===void 0)&&a.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(r){if(Pe(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:s}=r;if(s)return this._returnResult({data:null,error:s});const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?qz(t.webauthn.credential_response):Fz(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:f}=await $e(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:f}))})}catch(r){if(Pe(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:s}=r;if(s)return this._returnResult({data:null,error:s});const l=await $e(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:Uz(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:zz(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Pe(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(s),s.status==="verified"&&a[s.factor_type].push(s);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,n,a,s;if(t)try{const{payload:v}=rm(t);let w=null;v.aal&&(w=v.aal);let x=w;const{data:{user:_},error:N}=await this.getUser(t);if(N)return this._returnResult({data:null,error:N});((n=(r=_==null?void 0:_.factors)===null||r===void 0?void 0:r.filter(C=>C.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(x="aal2");const E=v.amr||[];return{data:{currentLevel:w,nextLevel:x,currentAuthenticationMethods:E},error:null}}catch(v){if(Pe(v))return this._returnResult({data:null,error:v});throw v}const{data:{session:l},error:u}=await this.getSession();if(u)return this._returnResult({data:null,error:u});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=rm(l.access_token);let h=null;f.aal&&(h=f.aal);let m=h;((s=(a=l.user.factors)===null||a===void 0?void 0:a.filter(v=>v.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(m="aal2");const y=f.amr||[];return{data:{currentLevel:h,nextLevel:m,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await $e(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Mn})})}catch(r){if(Pe(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!a)return this._returnResult({data:null,error:new Mn});const l=await $e(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&Kr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(n){if(Pe(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!a)return this._returnResult({data:null,error:new Mn});const l=await $e(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&Kr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(n){if(Pe(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await $e(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Mn})})}catch(t){if(Pe(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?(await $e(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Mn})})}catch(r){if(Pe(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(u=>u.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(u=>u.kid===t),n&&this.jwks_cached_at+XU>a)return n;const{data:s,error:l}=await $e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=a,n=s.keys.find(u=>u.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:v,error:w}=await this.getSession();if(w||!v.session)return this._returnResult({data:null,error:w});n=v.session.access_token}const{header:a,payload:s,signature:l,raw:{header:u,payload:f}}=rm(n);r!=null&&r.allowExpired||bz(s.exp);const h=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!h){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:s,header:a,signature:l},error:null}}const m=xz(a.alg),g=await crypto.subtle.importKey("jwk",h,m,!0,["verify"]);if(!await crypto.subtle.verify(m,g,l,sz(`${u}.${f}`)))throw new Cx("Invalid JWT signature");return{data:{claims:s,header:a,signature:l},error:null}}catch(n){if(Pe(n))return this._returnResult({data:null,error:n});throw n}}}Ed.nextInstanceID={};const Jz=Ed,Zz="2.95.3";let hd="";typeof Deno<"u"?hd="deno":typeof document<"u"?hd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?hd="react-native":hd="node";const eq={"X-Client-Info":`supabase-js-${hd}/${Zz}`},tq={headers:eq},rq={schema:"public"},nq={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},aq={};function Ad(e){"@babel/helpers - typeof";return Ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ad(e)}function iq(e,t){if(Ad(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ad(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sq(e){var t=iq(e,"string");return Ad(t)=="symbol"?t:t+""}function oq(e,t,r){return(t=sq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ar(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lA(Object(r),!0).forEach(function(n){oq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const lq=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),cq=()=>Headers,uq=(e,t,r)=>{const n=lq(r),a=cq();return async(s,l)=>{var u;const f=(u=await t())!==null&&u!==void 0?u:e;let h=new a(l==null?void 0:l.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${f}`),n(s,ar(ar({},l),{},{headers:h}))}};function dq(e){return e.endsWith("/")?e:e+"/"}function fq(e,t){var r,n;const{db:a,auth:s,realtime:l,global:u}=e,{db:f,auth:h,realtime:m,global:g}=t,y={db:ar(ar({},f),a),auth:ar(ar({},h),s),realtime:ar(ar({},m),l),storage:{},global:ar(ar(ar({},g),u),{},{headers:ar(ar({},(r=g==null?void 0:g.headers)!==null&&r!==void 0?r:{}),(n=u==null?void 0:u.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function hq(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(dq(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var mq=class extends Jz{constructor(e){super(e)}},pq=class{constructor(e,t,r){var n,a;this.supabaseUrl=e,this.supabaseKey=t;const s=hq(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const l=`sb-${s.hostname.split(".")[0]}-auth-token`,u={db:rq,realtime:aq,auth:ar(ar({},nq),{},{storageKey:l}),global:tq},f=fq(r??{},u);if(this.storageKey=(n=f.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken)this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=f.auth)!==null&&h!==void 0?h:{},this.headers,f.global.fetch)}this.fetch=uq(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(ar({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(m=>this.realtime.setAuth(m)).catch(m=>console.warn("Failed to set initial Realtime auth token:",m)),this.rest=new Z$(new URL("rest/v1",s).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch,timeout:f.db.timeout,urlLengthLimit:f.db.urlLengthLimit}),this.storage=new HU(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new Q$(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,storageKey:s,flowType:l,lock:u,debug:f,throwOnError:h},m,g){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new mq({url:this.authUrl.href,headers:ar(ar({},y),m),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,flowType:l,lock:u,debug:f,throwOnError:h,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new gU(this.realtimeUrl.href,ar(ar({},e),{},{params:ar(ar({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const gq=(e,t,r)=>new pq(e,t,r);function yq(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}yq()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const vq="https://ozjddzasadgffjjeqntc.supabase.co",bq="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im96amRkemFzYWRnZmZqamVxbnRjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzOTMwMzEsImV4cCI6MjA4NTk2OTAzMX0._1fbWup_bHYe0PN5QUcptRMuwZRAEFwQOPEPd7Lk3NY",ye=gq(vq,bq);var ft=(e=>(e.ADMIN="Admin",e.EMPLOYEE="Employee",e.EMPLOYEE1="Employee1",e))(ft||{});const Bn=e=>e==="Employee"||e==="Employee1";var Re=(e=>(e.ON_HOLD="On Hold",e.PROCESSING="Processing",e.PICKED="Picked",e.COMPLETED="Completed",e.CANCELLED="Cancelled",e))(Re||{}),wn=(e=>(e.ON_HOLD="On Hold",e.PROCESSING="Processing",e.RECEIVED="Received",e.PAID="Paid",e))(wn||{});const xq={company:{name:"BD Hatbela",logo:"",phone:"",email:"",address:""},order:{prefix:"BDH-",nextNumber:1},invoice:{title:"Tax Invoice",logoWidth:60,logoHeight:60,footer:"Thank you for shopping with BD Hatbela!"},defaults:{accountId:"",paymentMethod:"Cash",incomeCategoryId:"",expenseCategoryId:"",recordsPerPage:20},categories:[],paymentMethods:[],courier:{steadfast:{baseUrl:"",apiKey:"",secretKey:""},carryBee:{baseUrl:"",clientId:"",clientSecret:"",clientContext:"",storeId:""}}},jD=e=>{const t=localStorage.getItem(e);return t?JSON.parse(t):null},wq=jD("currentUser"),jq=jD("settings"),Se={users:[],customers:[],vendors:[],products:[],orders:[],bills:[],accounts:[],transactions:[],currentUser:wq??null,settings:jq??xq},rd=()=>{try{localStorage.setItem("currentUser",JSON.stringify(Se.currentUser)),localStorage.setItem("settings",JSON.stringify(Se.settings))}catch(e){console.warn("[DB] localStorage write failed:",e)}},Yt=25,nl="https://ozjddzasadgffjjeqntc.supabase.co",al="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im96amRkemFzYWRnZmZqamVxbnRjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzOTMwMzEsImV4cCI6MjA4NTk2OTAzMX0._1fbWup_bHYe0PN5QUcptRMuwZRAEFwQOPEPd7Lk3NY";async function Zr(){if(Se.currentUser)return{user:Se.currentUser};const e=localStorage.getItem("currentUserId");if(e)try{const r=await e1(e);if(r)return Se.currentUser=r,{user:r}}catch(r){console.warn("[supabaseQueries] Failed to restore user from ID:",r)}const t=localStorage.getItem("userData");if(t)try{const r=JSON.parse(t);return Se.currentUser=r,{user:r}}catch{}throw new Error("No authenticated session available. Please log in.")}function SD(){const e=Se.currentUser;if(!e||!e.id)throw new Error("User session not available for mutation");return e.id}async function Qs(e,t=1e4){const r=n=>{if(!n)return!1;const a=((n==null?void 0:n.message)||(n==null?void 0:n.toString())||"").toLowerCase(),s=(n==null?void 0:n.code)||"";return a.includes("failed to fetch")||a.includes("connection closed")||a.includes("network")||a.includes("econnrefused")||a.includes("etimedout")||s==="ERR_CONNECTION_CLOSED"||n instanceof TypeError};try{const n=await Promise.race([e,new Promise(l=>{setTimeout(()=>l({data:null,error:{message:"Query timeout"}}),t)})]),{data:a,error:s}=n;return s?r(s)?(console.error("[supabaseQueries] NETWORK ERROR (no retry):",(s==null?void 0:s.message)||s),[]):(console.warn("[supabaseQueries] Query error:",(s==null?void 0:s.message)||s),[]):a||(console.warn("[supabaseQueries] Query returned no data"),[])}catch(n){return r(n)?(console.error("[supabaseQueries] NETWORK ERROR in catch:",(n==null?void 0:n.message)||n),[]):(console.error("[supabaseQueries] Query exception:",n),[])}}async function _D(){return console.log("[supabaseQueries] fetchCustomers called"),(await Qs(ye.from("customers").select("*").order("created_at",{ascending:!1}))).map(Rc)}async function ND(e){if(!e)return null;if(e.startsWith("temp-"))return console.warn("[supabaseQueries] fetchCustomerById called with temp id, returning null:",e),null;const{data:t,error:r}=await ye.from("customers").select("*").eq("id",e).maybeSingle();return r?(console.error("[supabaseQueries] fetchCustomerById error:",r),null):Rc(t)}async function Sq(e){await Zr();const t=crypto.randomUUID(),r=async()=>await ye.from("customers").insert([{id:t,name:e.name,phone:e.phone,address:e.address,total_orders:e.totalOrders||0,due_amount:e.dueAmount||0}]).select().single();try{const{data:n,error:a}=await r();if(a)throw console.error("[supabaseQueries] createCustomer error:",a),a;return Rc(n)}catch(n){const a=(n==null?void 0:n.name)||(n==null?void 0:n.code)||"";if(a==="AbortError"||a==="ABORT_ERR"||String(n).toLowerCase().includes("abort")){console.warn("[supabaseQueries] createCustomer aborted - retrying once");try{await new Promise(u=>setTimeout(u,250));const{data:s,error:l}=await r();if(l)throw console.error("[supabaseQueries] createCustomer retry error:",l),l;return Rc(s)}catch(s){throw console.error("[supabaseQueries] createCustomer abort/retry failed:",s),s}}throw console.error("[supabaseQueries] createCustomer error:",n),n}}async function _q(e,t){await Zr();const{data:r,error:n}=await ye.from("customers").update({...t.name&&{name:t.name},...t.phone&&{phone:t.phone},...t.address&&{address:t.address},...t.totalOrders!==void 0&&{total_orders:t.totalOrders},...t.dueAmount!==void 0&&{due_amount:t.dueAmount}}).eq("id",e).select().single();if(n)throw console.error("[supabaseQueries] updateCustomer error:",n),n;return Rc(r)}async function Nq(e){if(e.startsWith("temp-")){const r=new Error("Cannot delete unsaved customer. Please refresh and try again.");throw console.error("[supabaseQueries] deleteCustomer error:",r),r}const{error:t}=await ye.from("customers").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteCustomer error:",t),t}function Rc(e){return{id:e.id,name:e.name,phone:e.phone,address:e.address,totalOrders:e.total_orders??e.totalOrders??0,dueAmount:e.due_amount??e.dueAmount??0,createdBy:e.created_by??e.createdBy}}async function Oq(){return(await Qs(ye.from("orders_with_customer_creator").select("*").order("created_at",{ascending:!1}))).map(Wc)}async function Eq(e=1,t=Yt,r){var h;const n=`fetchOrdersPage p=${e} sz=${t}`;console.time(n);const a=(e-1)*t,s=a+t-1,l=(h=r==null?void 0:r.search)==null?void 0:h.trim(),u=!!l;let f=ye.from("orders_with_customer_creator").select(`id, order_number, order_date, status, total, created_at, 
       history,
       customer_id, customer_name, customer_phone, customer_address, 
       created_by, creator_name, carrybee_consignment_id`,{count:"estimated"});if(r&&(r.status&&r.status!=="All"&&(f=f.eq("status",r.status)),r.from&&(f=f.gte("created_at",r.from)),r.to&&(f=f.lte("created_at",r.to)),r.createdByIds&&r.createdByIds.length>0&&(f=f.in("created_by",r.createdByIds)),u)){const m=l;/\d/.test(m)?f=f.or(`customer_phone.ilike.%${m}%,order_number.ilike.%${m}%`):f=f.or(`customer_name.ilike.%${m}%,order_number.ilike.%${m}%`)}f=f.order("created_at",{ascending:!1}).range(a,s);try{const{data:m,error:g,count:y}=await f;if(g)return console.error("[supabaseQueries] fetchOrdersPage error:",g),console.timeEnd(n),{data:[],count:0};const v={data:(m||[]).map(Wc),count:y??0};return console.timeEnd(n),v}catch(m){return console.error("[supabaseQueries] fetchOrdersPage exception:",m),console.timeEnd(n),{data:[],count:0}}}async function Aq(e){const{data:t,error:r}=await ye.from("orders_with_customer_creator").select("*").eq("id",e).single();return r?(console.error("[supabaseQueries] fetchOrderById error:",r),null):Wc(t)}async function Cq(e){return(await Qs(ye.from("orders_with_customer_creator").select("*").eq("customer_id",e).order("order_date",{ascending:!1}))).map(Wc)}async function kq(){const{data:e,error:t}=await ye.rpc("get_next_order_number");if(t)throw console.error("[supabaseQueries] getNextOrderNumber error:",t),t;if(!e)throw new Error("Failed to generate next order number");return e}async function Pq(e){await Zr();const t=SD(),r={p_order_date:e.orderDate,p_customer_id:e.customerId,p_created_by:t,p_status:e.status,p_items:e.items,p_subtotal:e.subtotal,p_discount:e.discount,p_shipping:e.shipping,p_total:e.total,p_paid_amount:e.paidAmount,p_notes:e.notes,p_history:e.history};console.time("rpc create_order_atomic");const{data:n,error:a}=await ye.rpc("create_order_atomic",r);if(console.timeEnd("rpc create_order_atomic"),a)throw console.error("[supabaseQueries] createOrder (rpc) error:",a),a;if(!n)throw new Error("RPC returned no data");const s={id:n.id,order_number:n.order_number,order_date:n.order_date,customer_id:n.customer_id,customer_name:n.customer_name,customer_phone:n.customer_phone,customer_address:n.customer_address,created_by:n.created_by,creator_name:n.creator_name,status:n.status,items:n.items,subtotal:n.subtotal,discount:n.discount,shipping:n.shipping,total:n.total,paid_amount:n.paid_amount,notes:n.notes,history:n.history,created_at:n.created_at,carrybee_consignment_id:n.carrybee_consignment_id};return Wc(s)}async function OD(e,t){await Zr();const r=t.carrybeeConsignmentId??t.carrybee_consignment_id,{data:n,error:a}=await ye.from("orders").update({...t.customerId&&{customer_id:t.customerId},...t.orderDate&&{order_date:t.orderDate},...t.orderNumber&&{order_number:t.orderNumber},...t.notes!==void 0&&{notes:t.notes},...t.status&&{status:t.status},...t.items&&{items:t.items},...t.subtotal!==void 0&&{subtotal:t.subtotal},...t.discount!==void 0&&{discount:t.discount},...t.shipping!==void 0&&{shipping:t.shipping},...t.total!==void 0&&{total:t.total},...t.paidAmount!==void 0&&{paid_amount:t.paidAmount},...t.history&&{history:t.history},...r&&{carrybee_consignment_id:r}}).eq("id",e).select("id");if(a)throw console.error("[supabaseQueries] updateOrder error:",a),a;if(!n||Array.isArray(n)&&n.length===0)return console.warn("[supabaseQueries] updateOrder: update succeeded but no row ID returned (possible RLS). Returning null."),null;const s=Array.isArray(n)?n[0].id:n.id,{data:l,error:u}=await ye.from("orders_with_customer_creator").select("*").eq("id",s).single();if(u)throw console.error("[supabaseQueries] updateOrder: failed to fetch updated order with relations:",u),u;return Wc(l)}async function Tq(e){await Zr();const{error:t}=await ye.from("transactions").delete().eq("reference_id",e).eq("type","Income");if(t)throw console.error("[supabaseQueries] deleteOrder: failed to delete income transactions:",t),t;const{error:r}=await ye.from("transactions").delete().eq("reference_id",e).eq("type","Expense").eq("category","expense_shipping");if(r)throw console.error("[supabaseQueries] deleteOrder: failed to delete shipping expense transactions:",r),r;const{error:n}=await ye.from("orders").delete().eq("id",e);if(n)throw console.error("[supabaseQueries] deleteOrder error:",n),n}function Wc(e){return{id:e.id,orderNumber:e.order_number??e.orderNumber,orderDate:e.order_date??e.orderDate,customerId:e.customer_id??e.customerId,createdBy:e.created_by??e.createdBy,status:e.status,items:e.items??[],subtotal:e.subtotal??0,discount:e.discount??0,shipping:e.shipping??0,total:e.total??e.amount??0,notes:e.notes,carrybeeConsignmentId:e.carrybee_consignment_id??e.carrybeeConsignmentId,history:e.history??{},paidAmount:e.paid_amount??e.paidAmount??0,customerName:e.customer_name,customerPhone:e.customer_phone,creatorName:e.creator_name,customerAddress:e.customer_address,createdAt:e.created_at}}async function kx(){return(await Qs(ye.from("accounts").select("*").order("created_at",{ascending:!1}))).map(Jw)}async function Px(e=1,t=Yt,r){const n=(e-1)*t,a=n+t-1;let s=ye.from("customers").select("id, name, phone, address, total_orders, due_amount, created_at",{count:"estimated"});if(r&&r.trim()){const l=r.trim();s=s.or(`name.ilike.%${l}%,phone.ilike.%${l}%,address.ilike.%${l}%`)}s=s.order("created_at",{ascending:!1}).range(n,a);try{const{data:l,error:u,count:f}=await s;return u?(console.error("[supabaseQueries] fetchCustomersPage error:",u),{data:[],count:0}):{data:(l||[]).map(Rc),count:f??0}}catch(l){return console.error("[supabaseQueries] fetchCustomersPage exception:",l),{data:[],count:0}}}async function Dq(e){const t=crypto.randomUUID(),{data:r,error:n}=await ye.from("accounts").insert([{id:t,name:e.name,type:e.type,opening_balance:e.openingBalance,current_balance:e.currentBalance}]).select().single();if(n)throw console.error("[supabaseQueries] createAccount error:",n),n;return Jw(r)}async function Mq(e,t){const{data:r,error:n}=await ye.from("accounts").update({...t.name&&{name:t.name},...t.type&&{type:t.type},...t.currentBalance!==void 0&&{current_balance:t.currentBalance}}).eq("id",e).select().single();if(n)throw console.error("[supabaseQueries] updateAccount error:",n),n;return Jw(r)}async function Rq(e){const{error:t}=await ye.from("accounts").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteAccount error:",t),t}function Jw(e){return{id:e.id,name:e.name,type:e.type,openingBalance:e.opening_balance??e.openingBalance,currentBalance:e.current_balance??e.currentBalance}}async function Iq(){return(await Qs(ye.from("transactions").select("*").order("created_at",{ascending:!1}))).map(Zw)}async function Lq(e=1,t=Yt,r){const n=(e-1)*t,a=n+t-1;let s=ye.from("transactions_with_relations").select("id, date, type, category, account_id, account_name, to_account_id, amount, description, reference_id, contact_id, contact_name, contact_type, payment_method, attachment_name, attachment_url, created_by, creator_name, created_at",{count:"estimated"});if(r){if(r.type&&(s=s.eq("type",r.type)),r.from&&(s=s.gte("date",r.from)),r.to&&(s=s.lte("date",r.to)),r.search){const l=r.search.trim();l&&(s=s.ilike("description",`%${l}%`))}r.createdByIds&&r.createdByIds.length>0&&(s=s.in("created_by",r.createdByIds))}s=s.order("created_at",{ascending:!1}).range(n,a);try{const{data:l,error:u,count:f}=await s;return u?(console.error("[supabaseQueries] fetchTransactionsPage error:",u),{data:[],count:0}):{data:(l||[]).map(Zw),count:f??0}}catch(l){return console.error("[supabaseQueries] fetchTransactionsPage exception:",l),{data:[],count:0}}}async function Bq(e){await Zr();const r={id:crypto.randomUUID(),date:e.date,type:e.type,category:e.category,account_id:e.accountId,amount:e.amount,description:e.description,payment_method:e.paymentMethod,created_by:e.createdBy};e.toAccountId&&(r.to_account_id=e.toAccountId),e.referenceId&&(r.reference_id=e.referenceId),e.contactId&&(r.contact_id=e.contactId),e.attachmentName&&(r.attachment_name=e.attachmentName),e.attachmentUrl&&(r.attachment_url=e.attachmentUrl);const{data:n,error:a}=await ye.from("transactions").insert([r]).select().single();if(a)throw console.error("[supabaseQueries] createTransaction error:",a),a;return Zw(n)}async function $q(e){if(e.startsWith("temp-")){const r=new Error("Cannot delete unsaved transactions. Please refresh and try again.");throw console.error("[supabaseQueries] deleteTransaction error:",r),r}const{error:t}=await ye.from("transactions").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteTransaction error:",t),t}function Zw(e){const t=e.date??e.date_string??null,r=e.created_at??e.createdAt??null,n=t&&t.toString().length>10?t:r||t||"";return{id:e.id,date:n,type:e.type,category:e.category,accountId:e.account_id??e.accountId,toAccountId:e.to_account_id??e.toAccountId,amount:e.amount,description:e.description,referenceId:e.reference_id??e.referenceId,contactId:e.contact_id??e.contactId,paymentMethod:e.payment_method??e.paymentMethod,attachmentName:e.attachment_name??e.attachmentName,attachmentUrl:e.attachment_url??e.attachmentUrl,createdBy:e.created_by??e.createdBy,createdAt:r||null,accountName:e.account_name??e.accountName,contactName:e.contact_name??e.contactName,contactType:e.contact_type??e.contactType,creatorName:e.creator_name??e.creatorName}}async function Uq(e=1,t=Yt,r,n,a){const s=(e-1)*t,l=s+t-1;let u=ye.from("products").select("id, name, image, category, sale_price, purchase_price, created_at",{count:"estimated"});if(r&&r.trim()){const f=r.trim();u=u.ilike("name",`%${f}%`)}a&&a.length>0&&(u=u.in("created_by",a)),u=u.order("created_at",{ascending:!1}).range(s,l);try{const{data:f,error:h,count:m}=await u;return h?(console.error("[supabaseQueries] fetchProductsPage error:",h),{data:[],count:0}):{data:(f||[]).map(il),count:m??0}}catch(f){return console.error("[supabaseQueries] fetchProductsPage exception:",f),{data:[],count:0}}}async function Rm(){try{const{data:e,error:t}=await ye.from("products").select("id, name, sale_price, purchase_price").order("created_at",{ascending:!1}).limit(100);return t?(console.error("[supabaseQueries] fetchProductsMini error:",t),[]):(e||[]).map(il)}catch(e){return console.error("[supabaseQueries] fetchProductsMini exception:",e),[]}}async function ED(e,t=50){try{if(!e||!e.trim())return[];const{data:r,error:n}=await ye.from("products").select("id, name, sale_price, purchase_price").ilike("name",`%${e.trim()}%`).order("created_at",{ascending:!1}).limit(t);return n?(console.error("[supabaseQueries] fetchProductsSearch error:",n),[]):(r||[]).map(il)}catch(r){return console.error("[supabaseQueries] fetchProductsSearch exception:",r),[]}}async function zq(){const{data:e,error:t}=await ye.from("users").select("*").order("created_at",{ascending:!1});if(t){if(String(t.message||"").includes("created_at")||t.code==="42703"){const r=await ye.from("users").select("*").order("name",{ascending:!0});return r.error?(console.error("[supabaseQueries] fetchUsers retry error:",r.error),[]):(r.data||[]).map(Ic)}return console.error("[supabaseQueries] fetchUsers error:",t),[]}return(e||[]).map(Ic)}async function e1(e){const{data:t,error:r}=await ye.from("users").select("*").eq("id",e).single();if(r)return console.error("[supabaseQueries] fetchUserById error:",r),null;console.log("[supabaseQueries] fetchUserById raw data:",{id:t==null?void 0:t.id,name:t==null?void 0:t.name,password_hash:t!=null&&t.password_hash?`(${t.password_hash.substring(0,20)}...)`:"(NULL/MISSING)",allKeys:Object.keys(t||{})});const n=Ic(t);return console.log("[supabaseQueries] fetchUserById mapped user:",{id:n.id,name:n.name,password:n.password?`(${n.password.substring(0,20)}...)`:"(NULL/MISSING)"}),n}async function qq(e,t){try{console.log("[supabaseQueries] loginUser - fetching user by phone:",e);const{data:r,error:n}=await ye.from("users").select("*").eq("phone",e).single();if(n)return console.error("[supabaseQueries] loginUser - user not found:",n==null?void 0:n.message),{user:null,error:"User not found"};if(!r)return{user:null,error:"User not found"};console.log("[supabaseQueries] loginUser - validating password");try{if(!(await Ww(()=>import("./bcrypt-DiAM7aEw.js").then(l=>l.b),[])).compareSync(t,r.password_hash||""))return console.error("[supabaseQueries] loginUser - password mismatch"),{user:null,error:"Invalid password"}}catch(a){return console.error("[supabaseQueries] loginUser - bcrypt error:",a==null?void 0:a.message),{user:null,error:"Password validation failed"}}return console.log("[supabaseQueries] loginUser - success for user:",r.id),{user:Ic(r),error:null}}catch(r){return console.error("[supabaseQueries] loginUser exception:",(r==null?void 0:r.message)||r),{user:null,error:(r==null?void 0:r.message)||"Login failed"}}}async function Fq(e){try{const t=e.password;if(!t)throw new Error("Password is required to create a user");const r=crypto.randomUUID();console.log("[supabaseQueries] Creating user with phone:",e.phone,"id:",r);let n;try{n=(await Ww(()=>import("./bcrypt-DiAM7aEw.js").then(f=>f.b),[])).hashSync(t,12),console.log("[supabaseQueries] Password hashed successfully")}catch(l){throw console.error("[supabaseQueries] Password hashing failed:",l==null?void 0:l.message),new Error(`Password hashing failed: ${(l==null?void 0:l.message)||"Unknown error"}`)}console.log("[supabaseQueries] Inserting user row into users table");const{data:a,error:s}=await ye.from("users").insert([{id:r,name:e.name,phone:e.phone,role:e.role,image:e.image,password_hash:n}]).select().single();if(s)throw console.error("[supabaseQueries] Create profile error:",s),s;return console.log("[supabaseQueries] User created successfully - can now sign in (frontend-password mode)"),Ic(a)}catch(t){throw console.error("[supabaseQueries] createUser error:",t),t}}async function Kq(e,t){const r={...t.name&&{name:t.name},...t.phone&&{phone:t.phone},...t.role&&{role:t.role},...t.image&&{image:t.image}};if(t.password)try{const u=(await Ww(()=>import("./bcrypt-DiAM7aEw.js").then(f=>f.b),[])).hashSync(t.password,12);r.password_hash=u}catch(s){throw console.error("[supabaseQueries] updateUser - password hashing failed:",s==null?void 0:s.message),s}const{data:n,error:a}=await ye.from("users").update(r).eq("id",e).select().single();if(a)throw console.error("[supabaseQueries] updateUser error:",a),a;return Ic(n)}async function Qq(e){const{error:t}=await ye.from("users").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteUser error:",t),t}function Cd(e){return e?typeof e=="string"?e:e.message?e.message:e.details?e.details:e.hint?e.hint:JSON.stringify(e):"Unknown error"}function Ic(e){return{id:e.id,name:e.name,phone:e.phone,role:e.role,image:e.image,password:void 0,createdAt:e.created_at}}async function Tx(e=1,t=Yt,r,n){const a=(e-1)*t,s=a+t-1;let l=ye.from("vendors").select("id, name, phone, address, total_purchases, due_amount, created_at",{count:"estimated"});if(r&&r.trim()){const u=r.trim();l=l.or(`name.ilike.%${u}%,phone.ilike.%${u}%,address.ilike.%${u}%`)}l=l.order("created_at",{ascending:!1}).range(a,s);try{const{data:u,error:f,count:h}=await l;return f?(console.error("[supabaseQueries] fetchVendorsPage error:",f),{data:[],count:0}):{data:(u||[]).map(nf),count:h??0}}catch(u){return console.error("[supabaseQueries] fetchVendorsPage exception:",u),{data:[],count:0}}}async function Hq(e=1,t=Yt,r){const n=(e-1)*t,a=n+t-1;let s=ye.from("bills_with_vendor_creator").select("id, bill_number, bill_date, vendor_id, vendor_name, vendor_phone, vendor_address, total, paid_amount, status, created_by, creator_name, created_at",{count:"estimated"});if(r){if(r.from&&(s=s.gte("bill_date",r.from)),r.to&&(s=s.lte("bill_date",r.to)),r.search&&r.search.trim()){const l=r.search.trim();if(/\d/.test(l))try{const{data:u,error:f}=await ye.from("vendors").select("id").ilike("phone",`%${l}%`);if(!f&&u&&u.length>0){const h=u.map(m=>m.id);s=s.in("vendor_id",h)}else s=s.ilike("bill_number",`%${l}%`)}catch{s=s.ilike("bill_number",`%${l}%`)}else s=s.ilike("bill_number",`%${l}%`)}r.createdByIds&&r.createdByIds.length>0&&(s=s.in("created_by",r.createdByIds))}s=s.order("created_at",{ascending:!1}).range(n,a);try{const{data:l,error:u,count:f}=await s;return u?(console.error("[supabaseQueries] fetchBillsPage error:",u),{data:[],count:0}):{data:(l||[]).map(rf),count:f??0}}catch(l){return console.error("[supabaseQueries] fetchBillsPage exception:",l),{data:[],count:0}}}async function Vq(){return(await Qs(ye.from("bills").select("*").order("created_at",{ascending:!1}))).map(rf)}async function Gq(e){const{data:t,error:r}=await ye.from("bills_with_vendor_creator").select("*").eq("id",e).single();return r?(console.error("[supabaseQueries] fetchBillById error:",r),null):rf(t)}async function Wq(e){await Zr();const t=SD();let r=null;try{const{data:g,error:y}=await ye.rpc("get_next_bill_number");!y&&g&&(r=g)}catch{}r||(r="Bill-"+Math.floor(Date.now()/1e3).toString());const n=(r||"").match(/(\d+)$/),a=n?parseInt(n[1],10):null,s={bill_number:r,...a!==null?{bill_seq:a}:{},bill_date:e.billDate,vendor_id:e.vendorId,created_by:t,status:e.status,items:e.items,subtotal:e.subtotal,discount:e.discount,shipping:e.shipping,total:e.total,paid_amount:e.paidAmount,notes:e.notes,history:e.history},l=crypto.randomUUID();s.id=l;const{data:u,error:f}=await ye.from("bills").insert([s]).select("id").single();if(f)throw console.error("[supabaseQueries] createBill insert error:",f),f;const{data:h,error:m}=await ye.from("bills_with_vendor_creator").select("*").eq("id",u.id).single();if(m)throw console.error("[supabaseQueries] createBill fetch full row error:",m),m;return rf(h)}async function Yq(e,t){await Zr();const{data:r,error:n}=await ye.from("bills").update({...t.vendorId&&{vendor_id:t.vendorId},...t.billDate&&{bill_date:t.billDate},...t.billNumber&&{bill_number:t.billNumber},...t.notes!==void 0&&{notes:t.notes},...t.status&&{status:t.status},...t.items&&{items:t.items},...t.subtotal!==void 0&&{subtotal:t.subtotal},...t.discount!==void 0&&{discount:t.discount},...t.shipping!==void 0&&{shipping:t.shipping},...t.total!==void 0&&{total:t.total},...t.paidAmount!==void 0&&{paid_amount:t.paidAmount},...t.history&&{history:t.history}}).eq("id",e).select().single();if(n)throw console.error("[supabaseQueries] updateBill error:",n),n;return rf(r)}async function Xq(e){await Zr();const{error:t}=await ye.from("transactions").delete().eq("reference_id",e).eq("type","Expense");if(t)throw console.error("[supabaseQueries] deleteBill: failed to delete related transactions:",t),t;const{error:r}=await ye.from("bills").delete().eq("id",e);if(r)throw console.error("[supabaseQueries] deleteBill error:",r),r}function rf(e){return{id:e.id,billNumber:e.bill_number??e.billNumber,billDate:e.bill_date??e.billDate,vendorId:e.vendor_id??e.vendorId,createdBy:e.created_by??e.createdBy,status:e.status,items:e.items??[],subtotal:e.subtotal??0,discount:e.discount??0,shipping:e.shipping??0,total:e.total??0,notes:e.notes,paidAmount:e.paid_amount??e.paidAmount??0,history:e.history,vendorName:e.vendor_name??e.vendorName,vendorPhone:e.vendor_phone??e.vendorPhone,vendorAddress:e.vendor_address??e.vendorAddress,creatorName:e.creator_name??e.creatorName}}async function Jq(){return(await Qs(ye.from("vendors").select("*").order("created_at",{ascending:!1}))).map(nf)}async function Zq(e){const{data:t,error:r}=await ye.from("vendors").select("*").eq("id",e).maybeSingle();return r?(console.error("[supabaseQueries] fetchVendorById error:",r),null):nf(t)}async function e8(e){await Zr();const t=crypto.randomUUID(),{data:r,error:n}=await ye.from("vendors").insert([{id:t,name:e.name,phone:e.phone,address:e.address,total_purchases:e.totalPurchases||0,due_amount:e.dueAmount||0}]).select().single();if(n)throw console.error("[supabaseQueries] createVendor error:",n),n;return nf(r)}async function t8(e,t){await Zr();const{data:r,error:n}=await ye.from("vendors").update({...t.name&&{name:t.name},...t.phone&&{phone:t.phone},...t.address&&{address:t.address},...t.totalPurchases!==void 0&&{total_purchases:t.totalPurchases},...t.dueAmount!==void 0&&{due_amount:t.dueAmount}}).eq("id",e).select().single();if(n)throw console.error("[supabaseQueries] updateVendor error:",n),n;return nf(r)}async function r8(e){const{error:t}=await ye.from("vendors").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteVendor error:",t),t}function nf(e){return{id:e.id,name:e.name,phone:e.phone,address:e.address,totalPurchases:e.total_purchases??e.totalPurchases??0,dueAmount:e.due_amount??e.dueAmount??0,createdBy:e.created_by??e.createdBy}}async function Dx(e){console.log("[supabaseQueries] fetchProducts called",e?"for category: "+e:"");try{let t=ye.from("products").select("id, name, image, category, sale_price, purchase_price, created_at").order("created_at",{ascending:!1});return e&&(t=t.eq("category",e)),(await Qs(t)).map(il)}catch(t){return console.error("[supabaseQueries] fetchProducts error:",t),[]}}async function n8(e){const{data:t,error:r}=await ye.from("products").select("*").eq("id",e).single();return r?(console.error("[supabaseQueries] fetchProductById error:",r),null):il(t)}async function a8(e){await Zr();const t=crypto.randomUUID(),{data:r,error:n}=await ye.from("products").insert([{id:t,name:e.name,image:e.image,category:e.category,sale_price:e.salePrice,purchase_price:e.purchasePrice}]).select().single();if(n)throw console.error("[supabaseQueries] createProduct error:",n),n;return il(r)}async function i8(e,t){const{data:r,error:n}=await ye.from("products").update({...t.name&&{name:t.name},...t.image&&{image:t.image},...t.category&&{category:t.category},...t.salePrice!==void 0&&{sale_price:t.salePrice},...t.purchasePrice!==void 0&&{purchase_price:t.purchasePrice}}).eq("id",e).select().single();if(n)throw console.error("[supabaseQueries] updateProduct error:",n),n;return il(r)}async function s8(e){const{error:t}=await ye.from("products").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteProduct error:",t),t}function il(e){return{id:e.id,name:e.name,image:e.image,category:e.category,salePrice:e.sale_price??e.salePrice??0,purchasePrice:e.purchase_price??e.purchasePrice??0,createdBy:e.created_by??e.createdBy}}async function o8(e){console.log("[supabaseQueries] fetchCategories called",e?"for type: "+e:"");try{let t=ye.from("categories").select("*").order("name",{ascending:!0});e&&(t=t.eq("type",e));const{data:r,error:n}=await t;if(n)throw console.error("[supabaseQueries] fetchCategories error:",n),new Error(`[${n.code}] ${n.message}`);return r?r.map(AD):[]}catch(t){throw console.error("[supabaseQueries] fetchCategories exception:",t),t}}async function l8(e){await Zr();const t=crypto.randomUUID(),{data:r,error:n}=await ye.from("categories").insert([{id:t,name:e.name,type:e.type,color:e.color||"#3B82F6",parent_id:e.parentId||null}]).select().single();if(n)throw console.error("[supabaseQueries] createCategory error:",n),n;return AD(r)}async function c8(e){const{error:t}=await ye.from("categories").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteCategory error:",t),t}function AD(e){return{id:e.id,name:e.name,type:e.type,color:e.color,parentId:e.parent_id,createdAt:e.created_at,updatedAt:e.updated_at}}async function u8(e=!0){console.log("[supabaseQueries] fetchPaymentMethods called");try{let t=ye.from("payment_methods").select("*").order("name",{ascending:!0});e&&(t=t.eq("is_active",!0));const{data:r,error:n}=await t;if(n)throw console.error("[supabaseQueries] fetchPaymentMethods error:",n),new Error(`[${n.code}] ${n.message}`);return r?r.map(CD):[]}catch(t){throw console.error("[supabaseQueries] fetchPaymentMethods exception:",t),t}}async function d8(e){await Zr();const t=crypto.randomUUID(),{data:r,error:n}=await ye.from("payment_methods").insert([{id:t,name:e.name,description:e.description||null,is_active:!0}]).select().single();if(n)throw console.error("[supabaseQueries] createPaymentMethod error:",n),n;return CD(r)}async function f8(e){const{error:t}=await ye.from("payment_methods").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deletePaymentMethod error:",t),t}function CD(e){return{id:e.id,name:e.name,description:e.description,isActive:e.is_active,createdAt:e.created_at,updatedAt:e.updated_at}}async function h8(){console.log("[supabaseQueries] fetchUnits called");try{const{data:e,error:t}=await ye.from("units").select("*").order("name",{ascending:!0});if(t)throw console.error("[supabaseQueries] fetchUnits error:",t),new Error(`[${t.code}] ${t.message}`);return e?e.map(kD):[]}catch(e){throw console.error("[supabaseQueries] fetchUnits exception:",e),e}}async function m8(e){const t=e.shortName.toLowerCase(),{data:r,error:n}=await ye.from("units").insert([{id:t,name:e.name,short_name:e.shortName,description:e.description||null}]).select().single();if(n)throw console.error("[supabaseQueries] createUnit error:",n),n;return kD(r)}async function p8(e){const{error:t}=await ye.from("units").delete().eq("id",e);if(t)throw console.error("[supabaseQueries] deleteUnit error:",t),t}function kD(e){return{id:e.id,name:e.name,shortName:e.short_name,description:e.description,createdAt:e.created_at,updatedAt:e.updated_at}}async function af(){try{const{data:e,error:t}=await ye.from("company_settings").select("*").maybeSingle();return t||!e?(console.error("[supabaseQueries] fetchCompanySettings error:",t),{id:"default",name:"Your Company",phone:"+880",email:"info@company.com",address:"",logo:""}):{id:e.id,name:e.name||"Your Company",phone:e.phone||"+880",email:e.email||"info@company.com",address:e.address||"",logo:e.logo||""}}catch(e){return console.error("[supabaseQueries] fetchCompanySettings exception:",e),{id:"default",name:"Your Company",phone:"+880",email:"info@company.com",address:"",logo:""}}}async function g8(e){await Zr();try{const t=await af(),r={name:e.name||t.name,phone:e.phone||t.phone,email:e.email||t.email,address:e.address!==void 0?e.address:t.address,logo:e.logo!==void 0?e.logo:t.logo},{data:n}=await ye.from("company_settings").select("id").limit(1).maybeSingle();let a;if(n!=null&&n.id){const{data:s,error:l}=await ye.from("company_settings").update(r).eq("id",n.id).select().maybeSingle();if(l)throw l;a=s}else{const{data:s,error:l}=await ye.from("company_settings").insert(r).select().single();if(l)throw l;a=s}return a||r}catch(t){throw console.error("[supabaseQueries] updateCompanySettings exception:",t),t}}async function t1(){try{const{data:e,error:t}=await ye.from("order_settings").select("*").maybeSingle();return t||!e?(console.error("[supabaseQueries] fetchOrderSettings error:",t),{prefix:"ORD-",nextNumber:1}):{prefix:e.prefix||"ORD-",nextNumber:e.next_number||1}}catch(e){return console.error("[supabaseQueries] fetchOrderSettings exception:",e),{prefix:"ORD-",nextNumber:1}}}async function y8(e){try{const t=await t1(),r={prefix:e.prefix||t.prefix,next_number:e.nextNumber!==void 0?e.nextNumber:t.nextNumber},{data:n}=await ye.from("order_settings").select("id").limit(1).maybeSingle();let a;if(n!=null&&n.id){const{data:s,error:l}=await ye.from("order_settings").update(r).eq("id",n.id).select().maybeSingle();if(l)throw l;a=s}else{const{data:s,error:l}=await ye.from("order_settings").insert(r).select().single();if(l)throw l;a=s}return a?{prefix:a.prefix,nextNumber:a.next_number}:r}catch(t){throw console.error("[supabaseQueries] updateOrderSettings error:",t),t}}async function r1(){try{const{data:e,error:t}=await ye.from("invoice_settings").select("*").maybeSingle();return t||!e?(console.error("[supabaseQueries] fetchInvoiceSettings error:",t),{title:"Invoice",logoWidth:120,logoHeight:120,footer:""}):{title:e.title||"Invoice",logoWidth:e.logo_width||120,logoHeight:e.logo_height||120,footer:e.footer||""}}catch(e){return console.error("[supabaseQueries] fetchInvoiceSettings exception:",e),{title:"Invoice",logoWidth:120,logoHeight:120,footer:""}}}async function v8(e){try{const t=await r1(),r={title:e.title||t.title,logo_width:e.logoWidth!==void 0?e.logoWidth:t.logoWidth,logo_height:e.logoHeight!==void 0?e.logoHeight:t.logoHeight,footer:e.footer!==void 0?e.footer:t.footer},{data:n}=await ye.from("invoice_settings").select("id").limit(1).maybeSingle();let a;if(n!=null&&n.id){const{data:s,error:l}=await ye.from("invoice_settings").update(r).eq("id",n.id).select().maybeSingle();if(l)throw l;a=s}else{const{data:s,error:l}=await ye.from("invoice_settings").insert(r).select().single();if(l)throw l;a=s}return a?{title:a.title,logoWidth:a.logo_width,logoHeight:a.logo_height,footer:a.footer}:{title:r.title,logoWidth:r.logo_width,logoHeight:r.logo_height,footer:r.footer}}catch(t){throw console.error("[supabaseQueries] updateInvoiceSettings error:",t),t}}async function n1(){try{const{data:e,error:t}=await ye.from("system_defaults").select("*").maybeSingle();return t||!e?(console.error("[supabaseQueries] fetchSystemDefaults error:",t),{defaultAccountId:"",defaultPaymentMethod:"",incomeCategoryId:"",expenseCategoryId:"",recordsPerPage:10}):{defaultAccountId:e.default_account_id||"",defaultPaymentMethod:e.default_payment_method||"",incomeCategoryId:e.income_category_id||"",expenseCategoryId:e.expense_category_id||"",recordsPerPage:e.records_per_page||10}}catch(e){return console.error("[supabaseQueries] fetchSystemDefaults exception:",e),{defaultAccountId:"",defaultPaymentMethod:"",incomeCategoryId:"",expenseCategoryId:"",recordsPerPage:10}}}async function b8(e){try{const t=await n1(),r={default_account_id:e.defaultAccountId?e.defaultAccountId:t.defaultAccountId||null,default_payment_method:e.defaultPaymentMethod?e.defaultPaymentMethod:t.defaultPaymentMethod||null,income_category_id:e.incomeCategoryId?e.incomeCategoryId:t.incomeCategoryId||null,expense_category_id:e.expenseCategoryId?e.expenseCategoryId:t.expenseCategoryId||null,records_per_page:e.recordsPerPage!==void 0?e.recordsPerPage:t.recordsPerPage},{data:n}=await ye.from("system_defaults").select("id").limit(1).maybeSingle();let a;if(n!=null&&n.id){const{data:s,error:l}=await ye.from("system_defaults").update(r).eq("id",n.id).select().maybeSingle();if(l)throw l;a=s}else{const{data:s,error:l}=await ye.from("system_defaults").insert(r).select().single();if(l)throw l;a=s}return a?{defaultAccountId:a.default_account_id,defaultPaymentMethod:a.default_payment_method,incomeCategoryId:a.income_category_id,expenseCategoryId:a.expense_category_id,recordsPerPage:a.records_per_page}:t}catch(t){throw console.error("[supabaseQueries] updateSystemDefaults error:",t),t}}async function Up(){try{const{data:e,error:t}=await ye.from("courier_settings").select("*").maybeSingle();return t||!e?(console.error("[supabaseQueries] fetchCourierSettings error:",t),{steadfast:{baseUrl:"",apiKey:"",secretKey:""},carryBee:{baseUrl:"",clientId:"",clientSecret:"",clientContext:"",storeId:""}}):{steadfast:{baseUrl:e.steadfast_base_url||"",apiKey:e.steadfast_api_key||"",secretKey:e.steadfast_secret_key||""},carryBee:{baseUrl:e.carrybee_base_url||"",clientId:e.carrybee_client_id||"",clientSecret:e.carrybee_client_secret||"",clientContext:e.carrybee_client_context||"",storeId:e.carrybee_store_id||""}}}catch(e){return console.error("[supabaseQueries] fetchCourierSettings exception:",e),{steadfast:{baseUrl:"",apiKey:"",secretKey:""},carryBee:{baseUrl:"",clientId:"",clientSecret:"",clientContext:"",storeId:""}}}}async function x8(e){var t,r,n,a,s,l,u,f;try{const h=await Up(),m={steadfast_base_url:((t=e.steadfast)==null?void 0:t.baseUrl)||h.steadfast.baseUrl,steadfast_api_key:((r=e.steadfast)==null?void 0:r.apiKey)||h.steadfast.apiKey,steadfast_secret_key:((n=e.steadfast)==null?void 0:n.secretKey)||h.steadfast.secretKey,carrybee_base_url:((a=e.carryBee)==null?void 0:a.baseUrl)||h.carryBee.baseUrl,carrybee_client_id:((s=e.carryBee)==null?void 0:s.clientId)||h.carryBee.clientId,carrybee_client_secret:((l=e.carryBee)==null?void 0:l.clientSecret)||h.carryBee.clientSecret,carrybee_client_context:((u=e.carryBee)==null?void 0:u.clientContext)||h.carryBee.clientContext,carrybee_store_id:((f=e.carryBee)==null?void 0:f.storeId)||h.carryBee.storeId},{data:g}=await ye.from("courier_settings").select("id").limit(1).maybeSingle();let y;if(g!=null&&g.id){const{data:v,error:w}=await ye.from("courier_settings").update(m).eq("id",g.id).select().maybeSingle();if(w)throw w;y=v}else{const{data:v,error:w}=await ye.from("courier_settings").insert(m).select().single();if(w)throw w;y=v}return{steadfast:{baseUrl:(y==null?void 0:y.steadfast_base_url)||"",apiKey:(y==null?void 0:y.steadfast_api_key)||"",secretKey:(y==null?void 0:y.steadfast_secret_key)||""},carryBee:{baseUrl:(y==null?void 0:y.carrybee_base_url)||"",clientId:(y==null?void 0:y.carrybee_client_id)||"",clientSecret:(y==null?void 0:y.carrybee_client_secret)||"",clientContext:(y==null?void 0:y.carrybee_client_context)||"",storeId:(y==null?void 0:y.carrybee_store_id)||""}}}catch(h){throw console.error("[supabaseQueries] updateCourierSettings error:",h),h}}async function w8(e){var t,r,n,a,s;try{const l=(t=e.baseUrl)==null?void 0:t.trim(),u=(r=e.clientId)==null?void 0:r.trim(),f=(n=e.clientSecret)==null?void 0:n.trim(),h=(a=e.clientContext)==null?void 0:a.trim();if(!l||!u||!f||!h)return console.warn("[supabaseQueries] CarryBee API parameters incomplete"),[];console.log("[supabaseQueries] Calling Edge Function for CarryBee stores");const m=`${nl}/functions/v1/carrybee-stores`;console.log("[supabaseQueries] Edge Function URL:",m);const g=await fetch(m,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${al}`},body:JSON.stringify({baseUrl:l,clientId:u,clientSecret:f,clientContext:h})});if(console.log("[supabaseQueries] Edge Function response status:",g.status),!g.ok)return console.error("[supabaseQueries] Edge Function error:",g.status,g.statusText),[];const y=await g.json();if(console.log("[supabaseQueries] Edge Function response data:",y),y.error)return console.error("[supabaseQueries] Edge Function returned error:",y.error,y.details),[];if(!((s=y.data)!=null&&s.stores))return console.warn("[supabaseQueries] No stores in response"),[];const v=y.data.stores.map(w=>({id:w.id,name:w.name}));return console.log("[supabaseQueries] Successfully fetched",v.length,"stores"),v}catch(l){return console.error("[supabaseQueries] fetchCarryBeeStores exception:",l instanceof Error?l.message:l),[]}}async function j8(e){var t,r,n,a,s;try{const l=(t=e.baseUrl)==null?void 0:t.trim(),u=(r=e.clientId)==null?void 0:r.trim(),f=(n=e.clientSecret)==null?void 0:n.trim(),h=(a=e.clientContext)==null?void 0:a.trim();if(!l||!u||!f||!h)return console.warn("[supabaseQueries] CarryBee API parameters incomplete"),[];const m=`${nl}/functions/v1/carrybee-cities`,g=await fetch(m,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${al}`},body:JSON.stringify({baseUrl:l,clientId:u,clientSecret:f,clientContext:h})});if(!g.ok)return console.error("[supabaseQueries] Cities Edge Function error:",g.status),[];const y=await g.json();return y.error||!((s=y.data)!=null&&s.cities)?(console.error("[supabaseQueries] Cities Edge Function returned error:",y.error),[]):y.data.cities.map(v=>({id:v.id,name:v.name}))}catch(l){return console.error("[supabaseQueries] fetchCarryBeeCities exception:",l instanceof Error?l.message:l),[]}}async function S8(e){var t,r,n,a,s,l;try{const u=(t=e.baseUrl)==null?void 0:t.trim(),f=(r=e.clientId)==null?void 0:r.trim(),h=(n=e.clientSecret)==null?void 0:n.trim(),m=(a=e.clientContext)==null?void 0:a.trim(),g=(s=e.cityId)==null?void 0:s.trim();if(!u||!f||!h||!m||!g)return console.warn("[supabaseQueries] CarryBee API parameters incomplete"),[];const y=`${nl}/functions/v1/carrybee-zones`,v=await fetch(y,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${al}`},body:JSON.stringify({baseUrl:u,clientId:f,clientSecret:h,clientContext:m,cityId:g})});if(!v.ok)return console.error("[supabaseQueries] Zones Edge Function error:",v.status),[];const w=await v.json();return w.error||!((l=w.data)!=null&&l.zones)?(console.error("[supabaseQueries] Zones Edge Function returned error:",w.error),[]):w.data.zones.map(x=>({id:x.id,name:x.name}))}catch(u){return console.error("[supabaseQueries] fetchCarryBeeZones exception:",u instanceof Error?u.message:u),[]}}async function _8(e){var t,r,n,a,s,l,u;try{const f=(t=e.baseUrl)==null?void 0:t.trim(),h=(r=e.clientId)==null?void 0:r.trim(),m=(n=e.clientSecret)==null?void 0:n.trim(),g=(a=e.clientContext)==null?void 0:a.trim(),y=(s=e.cityId)==null?void 0:s.trim(),v=(l=e.zoneId)==null?void 0:l.trim();if(!f||!h||!m||!g||!y||!v)return console.warn("[supabaseQueries] CarryBee API parameters incomplete"),[];const w=`${nl}/functions/v1/carrybee-areas`,x=await fetch(w,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${al}`},body:JSON.stringify({baseUrl:f,clientId:h,clientSecret:m,clientContext:g,cityId:y,zoneId:v})});if(!x.ok)return console.error("[supabaseQueries] Areas Edge Function error:",x.status),[];const _=await x.json();return _.error||!((u=_.data)!=null&&u.areas)?(console.error("[supabaseQueries] Areas Edge Function returned error:",_.error),[]):_.data.areas.map(N=>({id:N.id,name:N.name}))}catch(f){return console.error("[supabaseQueries] fetchCarryBeeAreas exception:",f instanceof Error?f.message:f),[]}}async function N8(e){var t,r,n,a;try{const s=(t=e.baseUrl)==null?void 0:t.trim(),l=(r=e.clientId)==null?void 0:r.trim(),u=(n=e.clientSecret)==null?void 0:n.trim(),f=(a=e.clientContext)==null?void 0:a.trim();if(!s||!l||!u||!f||!e.storeId)return console.warn("[supabaseQueries] CarryBee API parameters incomplete"),{error:"Missing required parameters"};console.log("[supabaseQueries] Calling Edge Function to submit CarryBee order");const h=`${nl}/functions/v1/carrybee-submit-order`,m=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${al}`},body:JSON.stringify({baseUrl:s,clientId:l,clientSecret:u,clientContext:f,storeId:e.storeId,deliveryType:e.deliveryType,productType:e.productType,recipientPhone:e.recipientPhone,recipientName:e.recipientName,recipientAddress:e.recipientAddress,cityId:e.cityId,zoneId:e.zoneId,areaId:e.areaId,itemWeight:e.itemWeight,collectableAmount:e.collectableAmount})});if(console.log("[supabaseQueries] Submit Order Edge Function response status:",m.status),!m.ok)return console.error("[supabaseQueries] Submit Order Edge Function error:",m.status),{error:`HTTP ${m.status}`};const g=await m.json();return console.log("[supabaseQueries] Submit Order response:",g),g.error?(console.error("[supabaseQueries] Edge Function returned error:",g.error),{error:g.error}):(console.log("[supabaseQueries] Successfully submitted order to CarryBee"),g.data)}catch(s){return console.error("[supabaseQueries] submitCarryBeeOrder exception:",s instanceof Error?s.message:s),{error:s instanceof Error?s.message:"Unknown error"}}}async function PD(e){try{const t=`${nl}/functions/v1/carrybee-order-details`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${al}`},body:JSON.stringify(e)});if(!r.ok)return{error:`HTTP ${r.status}`};const n=await r.json();return n!=null&&n.error?{error:n.error}:{data:n==null?void 0:n.data}}catch(t){return{error:t instanceof Error?t.message:"Unknown error"}}}async function O8(){var r,n,a,s,l,u,f,h,m,g,y;let e=0,t=0;try{const v=await Up(),w=(n=(r=v==null?void 0:v.carryBee)==null?void 0:r.baseUrl)==null?void 0:n.trim(),x=(s=(a=v==null?void 0:v.carryBee)==null?void 0:a.clientId)==null?void 0:s.trim(),_=(u=(l=v==null?void 0:v.carryBee)==null?void 0:l.clientSecret)==null?void 0:u.trim(),N=(h=(f=v==null?void 0:v.carryBee)==null?void 0:f.clientContext)==null?void 0:h.trim();if(!w||!x||!_||!N)return{checked:e,updated:t};const{data:O,error:E}=await ye.from("orders").select("id, status, history, carrybee_consignment_id").not("carrybee_consignment_id","is",null).neq("carrybee_consignment_id","").in("status",[Re.ON_HOLD,Re.PROCESSING]);if(E)return console.error("[supabaseQueries] syncCarryBeeTransferStatuses query error:",E),{checked:e,updated:t};const C=O||[];for(const T of C){const k=T.carrybee_consignment_id;if(k){e++;try{const M=await PD({baseUrl:w,clientId:x,clientSecret:_,clientContext:N,consignmentId:k});if(M.error)continue;if((((g=(m=M==null?void 0:M.data)==null?void 0:m.data)==null?void 0:g.transfer_status)||((y=M==null?void 0:M.data)==null?void 0:y.transfer_status)||"")==="At the sorting hub"){const L={...T.history||{},picked:`Marked picked automatically from CarryBee transfer status on ${new Date().toLocaleString()}`};await OD(T.id,{status:Re.PICKED,history:L}),t++}}catch(M){console.error("[supabaseQueries] syncCarryBeeTransferStatuses detail error:",M)}}}}catch(v){console.error("[supabaseQueries] syncCarryBeeTransferStatuses exception:",v)}return{checked:e,updated:t}}async function E8(e){var t,r,n,a,s;try{const l=(t=e.baseUrl)==null?void 0:t.trim(),u=(r=e.apiKey)==null?void 0:r.trim(),f=(n=e.secretKey)==null?void 0:n.trim();if(console.log("[supabaseQueries] ======== BEFORE TRIM ========"),console.log("[supabaseQueries] baseUrl (raw):",JSON.stringify(e.baseUrl)),console.log("[supabaseQueries] apiKey (raw):",JSON.stringify((a=e.apiKey)==null?void 0:a.substring(0,5))),console.log("[supabaseQueries] secretKey (raw):",JSON.stringify((s=e.secretKey)==null?void 0:s.substring(0,5))),console.log("[supabaseQueries] ======== AFTER TRIM ========"),console.log("[supabaseQueries] baseUrl (trimmed):",JSON.stringify(l)),console.log("[supabaseQueries] apiKey (trimmed):",JSON.stringify(u==null?void 0:u.substring(0,5))),console.log("[supabaseQueries] secretKey (trimmed):",JSON.stringify(f==null?void 0:f.substring(0,5))),!l||!u||!f||!e.invoice||!e.recipientName||!e.recipientPhone||!e.recipientAddress||e.codAmount===void 0)return console.warn("[supabaseQueries] Steadfast API parameters incomplete"),console.warn("[supabaseQueries] Validation:",{baseUrl:!!l,apiKey:!!u,secretKey:!!f,invoice:!!e.invoice,recipientName:!!e.recipientName,recipientPhone:!!e.recipientPhone,recipientAddress:!!e.recipientAddress,codAmount:e.codAmount!==void 0}),{error:"Missing required parameters"};console.log("[supabaseQueries] ======== CALLING EDGE FUNCTION ========");const h=`${nl}/functions/v1/steadfast-submit-order`;console.log("[supabaseQueries] Edge Function URL:",h);const m={baseUrl:l,apiKey:u,secretKey:f,invoice:e.invoice,recipientName:e.recipientName,recipientPhone:e.recipientPhone,recipientAddress:e.recipientAddress,codAmount:e.codAmount};console.log("[supabaseQueries] Payload being sent:",{baseUrl:l,apiKey:`${u.substring(0,5)}...`,secretKey:`${f.substring(0,5)}...`,invoice:m.invoice,recipientName:m.recipientName,recipientPhone:m.recipientPhone,recipientAddress:m.recipientAddress,codAmount:m.codAmount});const g=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${al}`},body:JSON.stringify(m)});if(console.log("[supabaseQueries] Submit Steadfast Order Edge Function response status:",g.status),!g.ok)return console.error("[supabaseQueries] Submit Steadfast Order Edge Function error:",g.status),{error:`HTTP ${g.status}`};const y=await g.json();if(console.log("[supabaseQueries] Submit Steadfast Order response:",y),y.error){const v=y.details?`${y.error}: ${y.details}`:y.error;return console.error("[supabaseQueries] Edge Function returned error:",v),{error:v}}return console.log("[supabaseQueries] Successfully submitted order to Steadfast"),y.data}catch(l){return console.error("[supabaseQueries] submitSteadfastOrder exception:",l instanceof Error?l.message:l),{error:l instanceof Error?l.message:"Unknown error"}}}async function A8(e){await Zr();try{const[t,r,n,a,s]=await Promise.all([e.company?g8(e.company):af(),e.order?y8(e.order):t1(),e.invoice?v8(e.invoice):r1(),e.defaults?b8(e.defaults):n1(),e.courier?x8(e.courier):Up()]);return{company:t,order:r,invoice:n,defaults:a,courier:s}}catch(t){throw console.error("[supabaseQueries] batchUpdateSettings error:",t),t}}const TD=j.createContext(void 0),C8=({children:e})=>{const[t,r]=j.useState(null),[n,a]=j.useState(!0),s=2500,l=Le();console.log("[AuthProvider] Mounting - initializing context provider"),j.useEffect(()=>{let h=!0;return(async()=>{try{console.log("[Auth] Initializing - restoring session from localStorage...");const g=localStorage.getItem("currentUserId");if(!g){console.log("[Auth] No saved session - user is logged out"),h&&(r(null),Se.currentUser=null,rd(),a(!1));return}console.log("[Auth] Found stored user ID, fetching full profile...");let y=0;const v=5,w=async()=>{try{const _=await e1(g);if(_)return console.log("[Auth] Fetched user profile:",_.name),_}catch(_){if(console.warn("[Auth] Fetch attempt failed:",_),y<v)return y++,await new Promise(N=>setTimeout(N,s)),w()}return null},x=await w();if(h){if(x){r(x),Se.currentUser=x,rd(),console.log("[Auth] Session restored:",x.name);try{l.prefetchQuery({queryKey:["products"],queryFn:()=>Dx(),staleTime:900*1e3}).catch(()=>{}),l.prefetchQuery({queryKey:["accounts"],queryFn:()=>kx(),staleTime:900*1e3}).catch(()=>{})}catch{}}else console.warn("[Auth] Could not restore profile, clearing session"),r(null),Se.currentUser=null,localStorage.removeItem("currentUserId"),rd();a(!1)}}catch(g){console.error("[Auth] Init error:",g),h&&(r(null),Se.currentUser=null,a(!1))}})(),()=>{h=!1}},[]);const u=async(h,m)=>{const g=h.includes("@")?h.split("@")[0]:h;console.log("[Auth] signIn called with phone:",g);try{const{user:y,error:v}=await qq(g,m);if(v||!y)return console.error("[Auth] signIn failed:",v),{error:{message:v||"Login failed"}};console.log("[Auth] signIn successful for:",y.phone),r(y),Se.currentUser=y,rd(),localStorage.setItem("currentUserId",y.id),localStorage.setItem("isLoggedIn","true"),a(!1),window.dispatchEvent(new Event("authChange")),console.log("[Auth] User logged in:",y.name);try{l.prefetchQuery({queryKey:["products"],queryFn:()=>Dx(),staleTime:900*1e3}).catch(()=>{}),l.prefetchQuery({queryKey:["accounts"],queryFn:()=>kx(),staleTime:900*1e3}).catch(()=>{})}catch{}return{data:{user:y},error:null}}catch(y){return console.error("[Auth] signIn exception:",(y==null?void 0:y.message)||y),{error:{message:(y==null?void 0:y.message)||"Login failed"}}}},f=async()=>{console.log("[Auth] signOut called"),r(null),Se.currentUser=null,rd(),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("currentUserId"),localStorage.removeItem("userProfile"),localStorage.removeItem("userData"),localStorage.removeItem("currentUser"),window.dispatchEvent(new Event("authChange")),console.log("[Auth] signOut completed")};return console.log("[AuthProvider] Rendering with state:",{userName:t==null?void 0:t.name,isLoading:n}),c.jsx(TD.Provider,{value:{user:t,profile:t,isLoading:n,signIn:u,signOut:f},children:e})};function da(){const e=j.useContext(TD);return e||(console.warn("[Auth] useAuth called without AuthProvider, falling back to db.currentUser"),{user:Se.currentUser??null,profile:Se.currentUser??null,isLoading:!1,signIn:async()=>({error:{message:"AuthProvider missing"}}),signOut:async()=>{}})}const DD=j.createContext(void 0),k8=({children:e})=>{const[t,r]=j.useState([]),n=j.useCallback((l,u,f=3500)=>{const h=`toast-${Date.now()}-${Math.random()}`,m={id:h,message:l,type:u,duration:f};return r(g=>[...g,m]),f>0&&setTimeout(()=>{a(h)},f),h},[]),a=j.useCallback(l=>{r(u=>u.filter(f=>f.id!==l))},[]),s=j.useCallback((l,u,f,h=3500)=>{r(m=>{const g=m.map(y=>y.id===l?{...y,message:u,type:f,duration:h}:y);return h>0&&setTimeout(()=>{a(l)},h),g})},[a]);return c.jsx(DD.Provider,{value:{toasts:t,showToast:n,dismissToast:a,updateToast:s},children:e})},MD=()=>{const e=j.useContext(DD);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},Vr=()=>{const{showToast:e,updateToast:t}=MD();return{success:r=>e(r,"success",3500),error:r=>e(r,"error",4500),warning:r=>e(r,"warning",3500),info:r=>e(r,"info",3500),loading:r=>e(r,"info",0),update:(r,n,a="success")=>t(r,n,a,3500)}},RD=j.createContext(void 0),P8=({children:e})=>{const[t,r]=j.useState(""),n=()=>r("");return c.jsx(RD.Provider,{value:{searchQuery:t,setSearchQuery:r,clearSearch:n},children:e})},Ya=()=>{const e=j.useContext(RD);if(!e)throw new Error("useSearch must be used within a SearchProvider");return e},T8=j.createContext(void 0),D8=({children:e})=>{const t=Le(),[r,n]=Xe.useState(!1),{user:a}=da(),s=Xe.useRef(!1);return j.useEffect(()=>{console.log("[Realtime] Initializing subscriptions for orders, bills, transactions...");const l=ye.channel("public:orders",{config:{broadcast:{self:!0},presence:{key:""}}}).on("postgres_changes",{event:"*",schema:"public",table:"orders"},m=>{var g,y;if(console.log("[Realtime] Orders change detected:",m.eventType,(g=m.new)==null?void 0:g.id),m.eventType==="INSERT"){const v=t.getQueryData(["orders"])||[];v.find(w=>w.id===m.new.id)||t.setQueryData(["orders"],[m.new,...v])}else m.eventType==="UPDATE"?t.setQueryData(["orders"],(v=[])=>v.map(w=>w.id===m.new.id?m.new:w)):m.eventType==="DELETE"&&t.setQueryData(["orders"],(v=[])=>v.filter(w=>w.id!==m.new.id));t.invalidateQueries({queryKey:["ordersByCustomerId"]}),(y=m.new)!=null&&y.id&&t.invalidateQueries({queryKey:["order",m.new.id]})}).subscribe((m,g)=>{m==="SUBSCRIBED"?(console.log("[Realtime] Orders channel subscribed"),n(!0)):m==="CHANNEL_ERROR"&&g&&(console.error("[Realtime] Orders channel error:",g),n(!1))}),u=ye.channel("public:bills",{config:{broadcast:{self:!0},presence:{key:""}}}).on("postgres_changes",{event:"*",schema:"public",table:"bills"},m=>{var g,y;if(console.log("[Realtime] Bills change detected:",m.eventType,(g=m.new)==null?void 0:g.id),m.eventType==="INSERT"){const v=t.getQueryData(["bills"])||[];v.find(w=>w.id===m.new.id)||t.setQueryData(["bills"],[m.new,...v])}else m.eventType==="UPDATE"?t.setQueryData(["bills"],(v=[])=>v.map(w=>w.id===m.new.id?m.new:w)):m.eventType==="DELETE"&&t.setQueryData(["bills"],(v=[])=>v.filter(w=>w.id!==m.new.id));(y=m.new)!=null&&y.id&&t.invalidateQueries({queryKey:["bill",m.new.id]})}).subscribe((m,g)=>{m==="SUBSCRIBED"?console.log("[Realtime] Bills channel subscribed"):m==="CHANNEL_ERROR"&&g&&console.error("[Realtime] Bills channel error:",g)}),f=ye.channel("public:transactions",{config:{broadcast:{self:!0},presence:{key:""}}}).on("postgres_changes",{event:"*",schema:"public",table:"transactions"},m=>{var g,y;if(console.log("[Realtime] Transactions change detected:",m.eventType,(g=m.new)==null?void 0:g.id),m.eventType==="INSERT"){const v=t.getQueryData(["transactions"])||[];if(!v.find(w=>w.id===m.new.id)){const w=[m.new,...v].sort((x,_)=>{const N=new Date(x.date||x.createdAt||0).getTime();return new Date(_.date||_.createdAt||0).getTime()-N});t.setQueryData(["transactions"],w)}}else m.eventType==="UPDATE"?t.setQueryData(["transactions"],(v=[])=>v.map(w=>w.id===m.new.id?m.new:w)):m.eventType==="DELETE"&&t.setQueryData(["transactions"],(v=[])=>v.filter(w=>w.id!==m.new.id));(y=m.new)!=null&&y.id&&t.invalidateQueries({queryKey:["transaction",m.new.id]})}).subscribe((m,g)=>{m==="SUBSCRIBED"?console.log("[Realtime] Transactions channel subscribed"):m==="CHANNEL_ERROR"&&g&&console.error("[Realtime] Transactions channel error:",g)}),h=ye.channel("public:accounts",{config:{broadcast:{self:!0},presence:{key:""}}}).on("postgres_changes",{event:"*",schema:"public",table:"accounts"},m=>{var g,y;if(console.log("[Realtime] Accounts change detected:",m.eventType,(g=m.new)==null?void 0:g.id),m.eventType==="INSERT"){const v=t.getQueryData(["accounts"])||[];v.find(w=>w.id===m.new.id)||t.setQueryData(["accounts"],[m.new,...v])}else m.eventType==="UPDATE"?t.setQueryData(["accounts"],(v=[])=>v.map(w=>w.id===m.new.id?m.new:w)):m.eventType==="DELETE"&&t.setQueryData(["accounts"],(v=[])=>v.filter(w=>w.id!==m.new.id));(y=m.new)!=null&&y.id&&t.invalidateQueries({queryKey:["account",m.new.id]})}).subscribe((m,g)=>{m==="SUBSCRIBED"?console.log("[Realtime] Accounts channel subscribed"):m==="CHANNEL_ERROR"&&g&&console.error("[Realtime] Accounts channel error:",g)});return()=>{console.log("[Realtime] Cleaning up all subscriptions"),ye.removeChannel(l),ye.removeChannel(u),ye.removeChannel(f),ye.removeChannel(h),n(!1)}},[t]),j.useEffect(()=>{if(!(a!=null&&a.id))return;let l=!1;const u=3e4,f=async()=>{if(!(l||s.current)){s.current=!0;try{const m=await O8();!l&&m.updated>0&&t.invalidateQueries({queryKey:["orders"],exact:!1})}catch(m){console.error("[Realtime] CarryBee sync failed:",m)}finally{s.current=!1}}};f();const h=window.setInterval(f,u);return()=>{l=!0,window.clearInterval(h)}},[a==null?void 0:a.id,t]),c.jsx(T8.Provider,{value:{isConnected:r},children:e})},ID=j.createContext(void 0),M8=({children:e})=>{const t=Le(),[r,n]=j.useState(navigator.onLine),[a,s]=j.useState(!1);return j.useEffect(()=>{console.log("[Network] Provider initialized - initial online status:",navigator.onLine);const l=()=>{console.log("[Network] Connection restored - refetching all queries"),n(!0),s(!0),t.refetchQueries()},u=()=>{console.log("[Network] Connection lost - offline mode activated"),n(!1)};return window.addEventListener("online",l),window.addEventListener("offline",u),()=>{window.removeEventListener("online",l),window.removeEventListener("offline",u)}},[t]),c.jsx(ID.Provider,{value:{isOnline:r,wasOffline:a},children:e})};function R8(){const e=j.useContext(ID);if(!e)throw new Error("useNetwork must be used within NetworkProvider");return e}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=e=>{const t=L8(e);return t.charAt(0).toUpperCase()+t.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var B8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=j.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:l,...u},f)=>j.createElement("svg",{ref:f,...B8,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:LD("lucide",a),...!s&&!$8(u)&&{"aria-hidden":"true"},...u},[...l.map(([h,m])=>j.createElement(h,m)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=(e,t)=>{const r=j.forwardRef(({className:n,...a},s)=>j.createElement(U8,{ref:s,iconNode:t,className:LD(`lucide-${I8(cA(e))}`,`lucide-${e}`,n),...a}));return r.displayName=cA(e),r};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],q8=zt("arrow-right-left",z8);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],uA=zt("briefcase",F8);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Q8=zt("chart-column",K8);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],V8=zt("check",H8);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],W8=zt("chevron-right",G8);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],X8=zt("circle-alert",Y8);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Z8=zt("circle-plus",J8);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],t9=zt("copy",e9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],n9=zt("credit-card",r9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],i9=zt("download",a9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],o9=zt("ellipsis-vertical",s9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],c9=zt("info",l9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],d9=zt("layout-dashboard",u9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],h9=zt("log-out",f9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=[["path",{d:"M5 12h14",key:"1ays0h"}]],p9=zt("minus",m9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],y9=zt("package",g9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],b9=zt("plus",v9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],w9=zt("printer",x9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],S9=zt("search",j9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],N9=zt("settings",_9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O9=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],E9=zt("shopping-cart",O9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],C9=zt("square-pen",A9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],P9=zt("trash-2",k9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],D9=zt("truck",T9);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],dA=zt("users",M9),ne={Dashboard:c.jsx(d9,{size:20}),Sales:c.jsx(E9,{size:20}),Products:c.jsx(y9,{size:20}),Customers:c.jsx(dA,{size:20}),Vendors:c.jsx(uA,{size:20}),Users:c.jsx(dA,{size:20}),Briefcase:c.jsx(uA,{size:20}),Banking:c.jsx(n9,{size:20}),Reports:c.jsx(Q8,{size:20}),Settings:c.jsx(N9,{size:20}),Courier:c.jsx(D9,{size:20}),Plus:c.jsx(b9,{size:20}),Minus:c.jsx(p9,{size:20}),PlusCircle:c.jsx(Z8,{size:20}),LogOut:c.jsx(h9,{size:20}),ChevronRight:c.jsx(W8,{size:20}),Search:c.jsx(S9,{size:18}),More:c.jsx(o9,{size:18}),Print:c.jsx(w9,{size:18}),Download:c.jsx(i9,{size:18}),Duplicate:c.jsx(t9,{size:18}),Edit:c.jsx(C9,{size:18}),Delete:c.jsx(P9,{size:18}),Transfer:c.jsx(q8,{size:18}),Check:c.jsx(V8,{size:20}),AlertCircle:c.jsx(X8,{size:20}),Info:c.jsx(c9,{size:20})},we=e=>new Intl.NumberFormat("en-BD",{style:"currency",currency:"BDT",minimumFractionDigits:0,maximumFractionDigits:0}).format(e).replace("BDT",""),zp=e=>({ON_HOLD:"bg-gray-100 text-gray-600",PROCESSING:"bg-blue-100 text-blue-600",PICKED:"bg-purple-100 text-purple-600",COMPLETED:"bg-green-100 text-green-600",CANCELLED:"bg-red-100 text-red-600",RECEIVED:"bg-green-100 text-green-600","On Hold":"bg-gray-100 text-gray-600",Processing:"bg-blue-100 text-blue-600",Picked:"bg-purple-100 text-purple-600",Completed:"bg-green-100 text-green-600",Cancelled:"bg-red-100 text-red-600",Received:"bg-green-100 text-green-600"})[e]||"bg-gray-100 text-gray-600",se={colors:{primary:{50:"bg-[#ebf4ff]",500:"bg-[#3c5a82]",600:"bg-[#0f2f57]",700:"bg-[#0c203b]",text:"text-[#0f2f57]"},secondary:{600:"bg-blue-600",700:"bg-blue-700"},danger:{50:"bg-red-50",600:"bg-red-600",700:"bg-red-700",text:"text-red-600"},bg:{primary:"bg-white",secondary:"bg-gray-50",tertiary:"bg-gray-100"},text:{primary:"text-gray-900",secondary:"text-gray-500",tertiary:"text-gray-400"},border:{primary:"border-gray-100"}},radius:{sm:"rounded-lg",md:"rounded-xl"},transitions:{normal:"transition-all duration-300"},buttons:{base:"inline-flex items-center justify-center gap-2 font-bold rounded-xl transition-all duration-300 cursor-pointer",secondary:"bg-gray-100 text-gray-600 hover:bg-gray-200",outline:"border-2 border-gray-200 text-gray-700 hover:bg-gray-50",sizes:{sm:"px-3 py-2 text-xs",md:"px-4 py-2.5 text-sm",lg:"px-6 py-3.5 text-sm"}},inputs:{base:"w-full px-4 py-2.5 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-[#3c5a82] focus:border-transparent transition-all",label:"block text-sm font-semibold text-gray-700 mb-2",error:"border-red-500 focus:ring-red-500"},table:{header:"bg-gray-50 border-b border-gray-100"},card:{base:"bg-white rounded-2xl shadow-sm border border-gray-100 transition-all",elevated:"bg-white rounded-2xl shadow-md border border-gray-100"}},xs=({to:e,icon:t,label:r,active:n,onClick:a,children:s})=>{const[l,u]=j.useState(n);return s?c.jsxs("div",{className:"space-y-1",children:[c.jsxs("button",{onClick:()=>u(!l),className:`flex items-center justify-between w-full px-4 py-3 ${se.radius.md} ${se.transitions.normal} ${n?`${se.colors.primary[50]} ${se.colors.primary.text}`:`text-gray-500 hover:${se.colors.primary[50]} hover:${se.colors.primary.text}`}`,children:[c.jsxs("div",{className:"flex items-center gap-3",children:[t,c.jsx("span",{className:"font-semibold text-sm",children:r})]}),c.jsx("div",{className:`transition-transform duration-200 ${l?"rotate-90":""}`,children:ne.ChevronRight})]}),l&&c.jsx("div",{className:"pl-11 space-y-1",children:s.map(f=>c.jsx(Mc,{to:f.to,onClick:a,className:`block px-4 py-2 text-sm font-medium ${se.radius.sm} ${se.transitions.normal} ${f.active?`${se.colors.primary[600]} text-white`:`text-gray-400 hover:${se.colors.primary.text} hover:${se.colors.primary[50]}/30`}`,children:f.label},f.to))})]}):c.jsxs(Mc,{to:e||"#",onClick:a,className:`flex items-center gap-3 px-4 py-3 ${se.radius.md} ${se.transitions.normal} ${n?`${se.colors.primary[600]} text-white shadow-lg shadow-emerald-200/50`:`text-gray-500 hover:${se.colors.primary[50]} hover:${se.colors.primary.text}`}`,children:[t,c.jsx("span",{className:"font-semibold text-sm",children:r})]})},ct=({children:e})=>{const t=Fn(),r=Nt(),{signOut:n,profile:a}=da(),{searchQuery:s,setSearchQuery:l}=Ya(),[u,f]=j.useState(!1),[h,m]=j.useState(!1),[g,y]=j.useState(!1),[v,w]=j.useState({name:Se.settings.company.name,logo:Se.settings.company.logo}),x=a||Se.currentUser;if(j.useEffect(()=>{(async()=>{try{const E=await af();w(E)}catch(E){console.error("Failed to load company settings:",E)}})()},[]),Xe.useEffect(()=>{const O=document.querySelector("main");O&&(O.scrollTop=0);try{window.scrollTo(0,0)}catch{}},[t.pathname]),!x)return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"inline-block p-4",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),c.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading user data..."})]})});const _=async()=>{try{await n(),r("/login",{replace:!0})}catch(O){console.error("Logout failed:",O)}},N=O=>t.pathname===O||t.pathname.startsWith(O+"/");return c.jsxs("div",{className:`${se.colors.bg.secondary} flex overflow-hidden`,style:{minHeight:"100vh"},children:[u&&c.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm z-40 lg:hidden",onClick:()=>f(!1)}),c.jsx("aside",{className:`fixed inset-y-0 left-0 z-50 w-72 ${se.colors.bg.primary} border-r ${se.colors.border.primary} ${se.transitions.normal} transform lg:sticky lg:top-0 lg:h-screen lg:translate-x-0 ${u?"translate-x-0":"-translate-x-full"}`,children:c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsx("div",{className:"p-8",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`p-1 ${se.colors.primary[50]} rounded-[50%]`,children:v.logo&&c.jsx("img",{src:v.logo,alt:"Logo",className:"w-10 h-10 rounded-lg object-cover"})}),c.jsxs("div",{children:[c.jsx("h1",{className:`text-xl font-black ${se.colors.text.primary} tracking-tight leading-none`,children:v.name}),c.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Management"})]})]})}),c.jsxs("nav",{className:"flex-1 px-4 space-y-1 overflow-y-auto",children:[c.jsx(xs,{to:"/dashboard",icon:ne.Dashboard,label:"Dashboard",active:N("/dashboard"),onClick:()=>f(!1)}),c.jsx(xs,{to:"/products",icon:ne.Products,label:"Products",active:N("/products"),onClick:()=>f(!1)}),c.jsx(xs,{icon:ne.Sales,label:"Sales",active:N("/orders")||N("/customers"),children:[{to:"/orders",label:"Orders",active:N("/orders")},{to:"/customers",label:"Customers",active:N("/customers")}],onClick:()=>f(!1)}),x.role===ft.ADMIN&&c.jsxs(c.Fragment,{children:[c.jsx(xs,{icon:ne.Briefcase,label:"Purchases",active:N("/bills")||N("/vendors"),children:[{to:"/bills",label:"Bills",active:N("/bills")},{to:"/vendors",label:"Vendors",active:N("/vendors")}],onClick:()=>f(!1)}),c.jsx(xs,{icon:ne.Banking,label:"Banking",active:N("/banking"),children:[{to:"/banking/accounts",label:"Accounts",active:N("/banking/accounts")},{to:"/banking/transactions",label:"Transactions",active:N("/banking/transactions")},{to:"/banking/transfer",label:"Transfer",active:N("/banking/transfer")}],onClick:()=>f(!1)})]}),x.role===ft.ADMIN&&c.jsxs(c.Fragment,{children:[c.jsx(xs,{to:"/reports",icon:ne.Reports,label:"Reports",active:N("/reports"),onClick:()=>f(!1)}),c.jsx(xs,{to:"/users",icon:ne.Users,label:"Users",active:N("/users"),onClick:()=>f(!1)}),c.jsx(xs,{to:"/settings",icon:ne.Settings,label:"Settings",active:N("/settings"),onClick:()=>f(!1)})]})]})]})}),c.jsxs("div",{className:"flex-1 flex flex-col min-w-0 h-screen overflow-hidden",children:[c.jsxs("header",{className:`flex-shrink-0 sticky top-0 z-40 ${se.colors.bg.primary}/80 backdrop-blur-lg border-b ${se.colors.border.primary} px-6 h-20 flex items-center justify-between`,children:[c.jsx("button",{onClick:()=>f(!0),className:`lg:hidden p-2.5 hover:${se.colors.bg.tertiary} ${se.radius.md} ${se.colors.text.secondary} border ${se.colors.border.primary}`,children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16m-7 6h7"})})}),c.jsxs("div",{className:"flex-1 max-w-xl mx-4 relative group hidden sm:block",children:[c.jsx("div",{className:`absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-300 group-focus-within:${se.colors.primary.text} ${se.transitions.normal}`,children:ne.Search}),c.jsx("input",{type:"text",placeholder:"Search orders, invoices, or customers...",value:s,onChange:O=>l(O.target.value),className:`block w-full pl-11 pr-4 py-2.5 ${se.colors.bg.secondary} border-transparent focus:${se.colors.bg.primary} focus:ring-2 focus:ring-[#3c5a82] focus:border-transparent ${se.radius.md} text-sm ${se.transitions.normal}`})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>m(!h),className:`${se.colors.primary[600]} text-white w-10 h-10 flex items-center justify-center ${se.radius.md} hover:${se.colors.primary[700]} ${se.transitions.normal} shadow-lg shadow-[#0f2f57]/20 active:scale-95`,children:ne.Plus}),h&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>m(!1)}),c.jsxs("div",{className:`absolute right-0 mt-3 w-56 ${se.colors.bg.primary} border ${se.colors.border.primary} rounded-2xl shadow-2xl z-50 py-2 animate-in fade-in zoom-in slide-in-from-top-2 duration-200 origin-top-right`,children:[c.jsx("div",{className:`px-4 py-2 text-[10px] font-bold ${se.colors.text.tertiary} uppercase tracking-widest border-b ${se.colors.border.primary} mb-1`,children:"Quick Actions"}),Bn(x.role)?[{label:"New Order",to:"/orders/new",icon:ne.Sales},{label:"New Customer",to:"/customers/new",icon:ne.Customers}].map(O=>c.jsxs(Mc,{to:O.to,onClick:()=>m(!1),className:`flex items-center gap-3 px-4 py-3 text-sm font-bold ${se.colors.text.primary} hover:${se.colors.primary[50]} hover:${se.colors.primary.text} ${se.transitions.normal}`,children:[c.jsx("span",{className:"opacity-70",children:O.icon}),O.label]},O.label)):[{label:"New Order",to:"/orders/new",icon:ne.Sales},{label:"New Bill",to:"/bills/new",icon:ne.Briefcase},{label:"New Customer",to:"/customers/new",icon:ne.Customers},{label:"New Vendor",to:"/vendors/new",icon:ne.Vendors},{label:"Add Income",to:"/transactions/new/income",icon:ne.PlusCircle},{label:"Add Expense",to:"/transactions/new/expense",icon:ne.Delete}].map(O=>c.jsxs(Mc,{to:O.to,onClick:()=>m(!1),className:`flex items-center gap-3 px-4 py-3 text-sm font-bold ${se.colors.text.primary} hover:${se.colors.primary[50]} hover:${se.colors.primary.text} ${se.transitions.normal}`,children:[c.jsx("span",{className:"opacity-70",children:O.icon}),O.label]},O.label))]})]})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>y(!g),className:`flex items-center gap-3 pl-4 border-l ${se.colors.border.primary} hover:opacity-70 ${se.transitions.normal}`,children:[c.jsxs("div",{className:"text-right hidden md:block",children:[c.jsx("p",{className:`text-sm font-black ${se.colors.text.primary} leading-none`,children:x.name}),c.jsx("p",{className:`text-[10px] font-bold ${se.colors.primary.text} uppercase tracking-widest mt-1`,children:x.role})]}),c.jsx("img",{src:x.image||`https://ui-avatars.com/api/?name=${x.name}&background=0f2f57&color=fff`,alt:"Profile",className:"w-10 h-10 rounded-[50%] object-cover cursor-pointer"})]}),g&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>y(!1)}),c.jsxs("div",{className:`absolute right-0 mt-3 w-48 ${se.colors.bg.primary} border ${se.colors.border.primary} rounded-xl shadow-2xl z-50 py-2 animate-in fade-in zoom-in slide-in-from-top-2 duration-200 origin-top-right`,children:[c.jsxs("button",{onClick:()=>{r(`/users/${x.id}`),y(!1)},className:`flex items-center gap-3 w-full px-4 py-3 text-sm font-bold ${se.colors.primary.text} hover:${se.colors.primary[50]} ${se.transitions.normal}`,children:[ne.Users,"Profile"]}),c.jsxs("button",{onClick:()=>{_(),y(!1)},className:`flex items-center gap-3 w-full px-4 py-3 text-sm font-bold ${se.colors.danger.text} hover:${se.colors.danger[50]} ${se.transitions.normal}`,children:[ne.LogOut,"Logout"]})]})]})]})]})]}),c.jsxs("main",{className:"flex-1 overflow-y-auto p-6 lg:p-10 animate-in fade-in duration-500 relative",children:[e,c.jsxs("footer",{className:`mt-20 py-8 border-t ${se.colors.border.primary} flex flex-col items-center gap-2`,children:[c.jsxs("p",{className:`text-sm font-medium ${se.colors.text.secondary}`,children:[" ",new Date().getFullYear()," ",v.name,". All rights reserved."]}),c.jsxs("a",{href:"https://sajedurrahmanfiad.me",target:"_blank",rel:"noreferrer",className:`group flex items-center gap-1.5 text-[11px] font-bold ${se.colors.text.secondary} hover:${se.colors.primary.text} ${se.transitions.normal} uppercase tracking-widest`,children:["Developed by ",c.jsx("span",{className:`${se.colors.text.secondary} group-hover:${se.colors.primary.text} underline underline-offset-4 decoration-[#0f2f57]/20`,children:"Md Sajedur Rahman Fiad"})]})]})]})]})]})},R9=()=>{const{toasts:e,dismissToast:t}=MD(),r=n=>{switch(n){case"success":return{icon:ne.Check,bg:"bg-green-50",border:"border-green-200",text:"text-green-800",icon_color:"text-green-600"};case"error":return{icon:ne.AlertCircle,bg:"bg-red-50",border:"border-red-200",text:"text-red-800",icon_color:"text-red-600"};case"warning":return{icon:ne.AlertCircle,bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",icon_color:"text-yellow-600"};case"info":return{icon:ne.Info,bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",icon_color:"text-blue-600"};default:return{icon:ne.Info,bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-800",icon_color:"text-gray-600"}}};return c.jsx("div",{className:"fixed bottom-6 right-6 z-[9999] flex flex-col gap-3",children:e.map(n=>{const{icon:a,bg:s,border:l,text:u,icon_color:f}=r(n.type);return c.jsxs("div",{className:`${s} ${l} border rounded-lg p-4 shadow-md flex items-start gap-3 min-w-[320px] max-w-md animate-in slide-in-from-right-5 fade-in duration-300`,children:[c.jsx("div",{className:`${f} flex-shrink-0 mt-0.5`,children:a}),c.jsx("div",{className:`${u} flex-1 text-sm font-medium`,children:n.message}),c.jsx("button",{onClick:()=>t(n.id),className:`${f} flex-shrink-0 hover:opacity-70 transition-opacity`,children:c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},n.id)})})},I9=()=>{const{isOnline:e}=R8(),[t,r]=j.useState(!1);return j.useEffect(()=>{if(!e)r(!0);else{const n=setTimeout(()=>{r(!1)},2e3);return()=>clearTimeout(n)}},[e]),t?c.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-red-50 border-b-2 shadow-lg transition-all duration-300",style:{borderColor:e?"#10b981":"#ef4444",backgroundColor:e?"#ecfdf5":"#fee2e2"},children:c.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-4 px-4 py-3",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[c.jsx("div",{className:`text-xl ${e?"text-green-600":"text-red-600"}`,children:e?"":""}),c.jsxs("div",{children:[c.jsx("p",{className:`font-bold ${e?"text-green-900":"text-red-900"}`,children:e?"Connection Restored":"No Internet Connection"}),c.jsx("p",{className:`text-sm ${e?"text-green-700":"text-red-700"}`,children:e?"Data is syncing with the server":"Your changes will be saved when connection is restored"})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[!e&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-pulse w-2 h-2 rounded-full bg-red-500"}),c.jsx("span",{className:"text-xs font-medium text-red-600",children:"Waiting for connection..."})]}),e&&c.jsx("span",{className:"text-xs font-medium text-green-600",children:"Syncing..."})]})]})}):null},L9=()=>{const e=Nt(),{signIn:t,isLoading:r,user:n,profile:a}=da(),[s,l]=j.useState(""),[u,f]=j.useState(""),[h,m]=j.useState(!1),[g,y]=j.useState(""),[v,w]=j.useState(!1),[x,_]=j.useState({name:"BD Hatbela",logo:Se.settings.company.logo});j.useEffect(()=>{console.log("[Login] Checking redirect - isLoading:",r,"authenticated:",!!n),!r&&n&&(console.log("[Login] User authenticated, navigating to dashboard"),e("/dashboard",{replace:!0}))},[n,r,e]),j.useEffect(()=>{(async()=>{try{const E=await af();_({name:"BD Hatbela",logo:E.logo||Se.settings.company.logo})}catch(E){console.error("Failed to load company settings:",E),_({name:"BD Hatbela",logo:Se.settings.company.logo})}})()},[]);const N=async O=>{var E,C;O.preventDefault(),y(""),w(!0),console.log("[Login] Form submitted with phone:",s);try{console.log("[Login] Calling signIn...");const{error:T,data:k}=await t(s,u);if(T){console.error("[Login] Sign-in error:",T);const M=(T==null?void 0:T.message)||"Authentication failed";y(M),w(!1);return}if(console.log("[Login] Sign-in successful, user:",(E=k==null?void 0:k.user)==null?void 0:E.email),!(k!=null&&k.profileLoaded)){console.error("[Login] Sign-in succeeded but profile not loaded"),y(((C=k==null?void 0:k.error)==null?void 0:C.message)||"Failed to load user profile. Please try again or contact administrator."),w(!1);return}console.log("[Login] Profile loaded, waiting for state to propagate...")}catch(T){console.error("[Login] Sign-in exception:",T),y((T==null?void 0:T.message)||"Failed to sign in"),w(!1)}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:c.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow p-8",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[x.logo&&c.jsx("img",{src:x.logo,alt:"Logo",className:"w-12 h-12 rounded-md object-cover"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-bold",children:x.name}),c.jsx("p",{className:"text-sm text-gray-500",children:"Sign in to continue"})]})]}),c.jsxs("form",{onSubmit:N,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),c.jsx("input",{value:s,onChange:O=>l(O.target.value),type:"tel",placeholder:"017XXXXXXXX",required:!0,disabled:v,className:"mt-1 block w-full border rounded px-3 py-2 focus:outline-none focus:ring disabled:opacity-50"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{value:u,onChange:O=>f(O.target.value),type:h?"text":"password",required:!0,disabled:v,className:"mt-1 block w-full border rounded px-3 py-2 pr-10 focus:outline-none focus:ring disabled:opacity-50"}),c.jsx("button",{type:"button",onClick:()=>m(!h),disabled:v,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 disabled:opacity-50",children:h?c.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:[c.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),c.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-14-14zM10 4C6.687 4 3.89 5.945 2.58 8.808c-.35.915-.35 2.468 0 3.384.74 1.94 2.08 3.61 3.756 4.7l1.83-1.83A3.992 3.992 0 016 10a4 4 0 016.956-3.533l1.416-1.416C14.225 4.523 12.15 4 10 4zm7.42 3.192c.35.915.35 2.468 0 3.384C15.26 13.055 12.463 15 9 15a6.966 6.966 0 01-3.15-.744l2.119-2.119A3.992 3.992 0 0114 10c0-.901-.281-1.735-.743-2.434l2.163-2.174z",clipRule:"evenodd"})})})]})]}),g&&c.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-sm text-red-600 space-y-2",children:[c.jsx("p",{className:"font-semibold",children:"Error"}),c.jsx("p",{children:g instanceof Error?g.message:String(g)}),(g instanceof Error?g.message:String(g)).includes("Email confirmation")&&c.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded text-yellow-700 text-xs",children:[c.jsx("p",{className:"font-semibold mb-1",children:"Quick Fix:"}),c.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[c.jsx("li",{children:"Go to Supabase Dashboard"}),c.jsx("li",{children:"Project  Authentication  Providers"}),c.jsx("li",{children:'Click "Email" tab'}),c.jsx("li",{children:'Toggle OFF "Confirm email"'}),c.jsx("li",{children:"Save settings"}),c.jsx("li",{children:"Try logging in again"})]})]})]}),c.jsx("div",{children:c.jsx("button",{type:"submit",disabled:v,className:"w-full bg-blue-600 text-white py-2 rounded disabled:opacity-50 disabled:cursor-not-allowed font-medium hover:bg-blue-700 transition-colors",children:v?"Signing in...":"Sign In"})})]})]})})},B9={primary:{bg:"bg-gray-50",text:"text-black",icon:"text-black"},secondary:{bg:"bg-gray-50",text:"text-black",icon:"text-black"},danger:{bg:"bg-gray-50",text:"text-black",icon:"text-black"},warning:{bg:"bg-gray-50",text:"text-black",icon:"text-black"},success:{bg:"bg-gray-50",text:"text-black",icon:"text-black"},info:{bg:"bg-gray-50",text:"text-black",icon:"text-black"},neutral:{bg:"bg-gray-50",text:"text-black",icon:"text-black"},profit:{bg:"bg-gray-50",text:"text-black",icon:"text-black"}},ya=({title:e,value:t,icon:r,variant:n="primary",bgColor:a,textColor:s,iconBgColor:l,isProfitCard:u=!1,profitValue:f})=>{const h=B9[n];let m=a||"bg-white",g=s||h.text,y=l||h.bg,v="";return u&&f!==void 0&&!a&&(f>=0?(m="bg-emerald-500",g="text-white",y="bg-emerald-600"):(m="bg-red-500",g="text-white",y="bg-red-600")),c.jsxs("div",{className:`p-6 flex items-center gap-4 ${m} rounded-xl shadow-lg border border-gray-100 ${v}`,children:[c.jsx("div",{className:`${y} p-4 rounded-lg flex items-center justify-center`,children:c.jsx("div",{className:g,children:r})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:`text-xs font-bold uppercase tracking-widest ${g==="text-white"?"text-white/70":"text-gray-400"}`,children:e}),c.jsx("h3",{className:`text-2xl font-black mt-1 ${g}`,children:t})]})]})},Je=Xe.forwardRef(({variant:e="primary",size:t="md",children:r,icon:n,loading:a=!1,className:s="",...l},u)=>{const f={primary:`${se.colors.primary[600]} text-white hover:${se.colors.primary[700]} shadow-lg shadow-[#0f2f57]/20`,secondary:se.buttons.secondary,danger:`${se.colors.danger[600]} text-white hover:${se.colors.danger[700]} shadow-lg`,outline:se.buttons.outline,ghost:"text-gray-600 hover:bg-gray-50"},h={sm:se.buttons.sizes.sm,md:se.buttons.sizes.md,lg:se.buttons.sizes.lg};return c.jsx("button",{ref:u,className:`${se.buttons.base} ${f[e]} ${h[t]} ${a?"opacity-75 cursor-wait":""} ${s}`,disabled:a||l.disabled,...l,children:c.jsxs("span",{className:"flex items-center gap-2",children:[a&&c.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n&&!a&&c.jsx("span",{children:n}),r]})})});Je.displayName="Button";const $9={primary:`p-2.5 text-gray-400 hover:${se.colors.primary[600]} hover:bg-[#ebf4ff] rounded-lg transition-all`,danger:"p-2.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",secondary:`p-2.5 text-gray-400 hover:${se.colors.secondary[600]} hover:bg-[#e6f0ff] rounded-lg transition-all`,neutral:"p-2.5 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-all"},Us=Xe.forwardRef(({variant:e="primary",icon:t,title:r,className:n="",...a},s)=>c.jsx("button",{ref:s,className:`${$9[e]} ${n}`,title:r,...a,children:t}));Us.displayName="IconButton";const qp=({columns:e,rows:t=5})=>c.jsx(c.Fragment,{children:Array.from({length:t}).map((r,n)=>c.jsx("tr",{className:"border-b border-gray-50 animate-pulse",children:Array.from({length:e}).map((a,s)=>c.jsx("td",{className:"px-6 py-5",children:c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),c.jsx("div",{className:"h-3 bg-gray-100 rounded w-1/2"})]})},s))},n))}),Fp=({columns:e,data:t,emptyMessage:r="No data found",onRowClick:n,rowClassName:a,hover:s=!0,striped:l=!1,size:u="md",loading:f=!1,loadingRows:h=8})=>{const m={sm:"px-4 py-3",md:"px-6 py-5",lg:"px-6 py-6"}[u],g=s?"hover:bg-[#ebf4ff]/50 cursor-pointer transition-all":"",y=l?"odd:bg-gray-50":"";return c.jsx("div",{className:`${se.card.base} overflow-visible`,children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsx("tr",{className:se.table.header,children:e.map(v=>c.jsx("th",{className:`${m} text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] ${v.align==="center"?"text-center":v.align==="right"?"text-right":""}`,style:v.width?{width:v.width}:void 0,children:v.label},v.key))})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:f?c.jsx(qp,{columns:e.length,rows:h}):t.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:e.length,className:"px-6 py-20 text-center text-gray-400 italic font-medium",children:r})}):t.map((v,w)=>c.jsx("tr",{onClick:()=>n==null?void 0:n(v,w),className:`
                    border-b border-gray-50 transition-all
                    ${g}
                    ${y}
                    ${(a==null?void 0:a(v,w))||""}
                  `,children:e.map(x=>c.jsx("td",{className:`${m} ${x.align==="center"?"text-center":x.align==="right"?"text-right":""}`,children:x.render?x.render(v[x.key],v,w):v[x.key]},x.key))},v.id||w))})]})})})},U9=Xe.forwardRef(({label:e,error:t,helperText:r,className:n="",...a},s)=>c.jsxs("div",{className:"w-full",children:[e&&c.jsx("label",{className:se.inputs.label,children:e}),c.jsx("input",{ref:s,className:`${se.inputs.base} ${t?se.inputs.error:""} ${n}`,...a}),(t||r)&&c.jsx("p",{className:`mt-1 text-xs ${t?"text-red-500":"text-gray-500"}`,children:t||r})]}));U9.displayName="Input";const z9=Xe.forwardRef(({label:e,error:t,options:r,className:n="",...a},s)=>c.jsxs("div",{className:"w-full",children:[e&&c.jsx("label",{className:se.inputs.label,children:e}),c.jsx("select",{ref:s,className:`${se.inputs.base} ${t?se.inputs.error:""} ${n}`,...a,children:r.map(l=>c.jsx("option",{value:l.value,children:l.label},l.value))}),t&&c.jsx("p",{className:"mt-1 text-xs text-red-500",children:t instanceof Error?t.message:String(t)})]}));z9.displayName="Select";const q9=Xe.forwardRef(({label:e,error:t,className:r="",...n},a)=>c.jsxs("div",{className:"w-full",children:[e&&c.jsx("label",{className:se.inputs.label,children:e}),c.jsx("textarea",{ref:a,className:`${se.inputs.base} resize-none ${t?se.inputs.error:""} ${r}`,...n}),t&&c.jsx("p",{className:"mt-1 text-xs text-red-500",children:t instanceof Error?t.message:String(t)})]}));q9.displayName="TextArea";const sf=({isLoading:e,message:t="Loading..."})=>e?c.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 flex items-center justify-center",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8 flex flex-col items-center gap-4",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),c.jsx("p",{className:"text-gray-600 font-medium",children:t})]})}):null,kd=({filterRange:e,setFilterRange:t,customDates:r,setCustomDates:n,statusTab:a,setStatusTab:s,statusOptions:l=[],title:u})=>{const[f,h]=j.useState(!1),{searchQuery:m,setSearchQuery:g}=Ya(),y=["All Time","Today","This Week","This Month","This Year","Custom"];return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[c.jsxs("div",{className:"hidden sm:flex flex-wrap items-center gap-3",children:[c.jsxs("div",{className:"flex items-center gap-1.5 bg-white p-1.5 rounded-2xl border border-gray-100 shadow-sm",children:[y.map(v=>c.jsx("button",{onClick:()=>t(v),className:`px-4 py-2 rounded-xl text-xs font-bold transition-all ${e===v?`${se.colors.primary[600]} text-white shadow-md`:"text-gray-500 hover:bg-gray-50"}`,children:v},v)),e==="Custom"&&c.jsxs("div",{className:"flex items-center gap-2 px-3 border-l border-gray-100 ml-1",children:[c.jsx("input",{type:"date",value:r.from,onChange:v=>n({...r,from:v.target.value}),className:"px-2 py-1 border rounded-lg text-[10px] font-bold bg-gray-50 outline-none focus:ring-2 focus:ring-[#3c5a82]"}),c.jsx("span",{className:"text-gray-300 text-[10px] font-black tracking-widest uppercase",children:"To"}),c.jsx("input",{type:"date",value:r.to,onChange:v=>n({...r,to:v.target.value}),className:"px-2 py-1 border rounded-lg text-[10px] font-bold bg-gray-50 outline-none focus:ring-2 focus:ring-[#3c5a82]"})]})]}),s&&l.length>0&&c.jsx("div",{className:"flex items-center gap-1 bg-gray-100/50 p-1 rounded-2xl border border-gray-100",children:["All",...l].map(v=>c.jsx("button",{onClick:()=>s(v),className:`px-4 py-2 rounded-xl text-xs font-bold transition-all ${a===v?"bg-white text-gray-900 shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:v},v))})]}),c.jsxs("button",{onClick:()=>h(!0),className:"sm:hidden flex items-center justify-center gap-2 bg-white border border-gray-200 text-gray-600 px-4 py-3 rounded-2xl font-bold shadow-sm w-full",children:[ne.Search,c.jsx("span",{className:"text-sm",children:"Filter & Period"}),e!=="All Time"&&c.jsx("div",{className:`w-2 h-2 rounded-full ${se.colors.primary[500]} ml-1`})]})]}),f&&c.jsxs("div",{className:"fixed inset-0 z-[150] flex items-end justify-center",children:[c.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>h(!1)}),c.jsxs("div",{className:"bg-white w-full rounded-t-2xl p-8 z-[160] animate-in slide-in-from-bottom duration-300 max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("h3",{className:"text-2xl font-black text-gray-900",children:["Filter ",u]}),c.jsx("button",{onClick:()=>h(!1),className:"p-2 text-gray-400",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l18 18"})})})]}),c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-4",children:"Search"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Search...",value:m,onChange:v=>g(v.target.value),className:"w-full px-4 py-3 pl-12 bg-gray-50 border border-gray-100 rounded-xl text-sm font-bold focus:ring-2 focus:ring-[#3c5a82] outline-none"}),c.jsx("span",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:ne.Search})]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-4",children:"Time Period"}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:y.map(v=>c.jsx("button",{onClick:()=>t(v),className:`py-3 rounded-2xl text-xs font-bold transition-all border ${e===v?`${se.colors.primary[600]} text-white border-[#0f2f57] shadow-lg`:"bg-white text-gray-500 border-gray-100 hover:bg-gray-50"}`,children:v},v))}),e==="Custom"&&c.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 animate-in fade-in duration-200",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[9px] font-bold text-gray-400 uppercase ml-2",children:"From"}),c.jsx("input",{type:"date",value:r.from,onChange:v=>n({...r,from:v.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl text-sm font-bold focus:ring-2 focus:ring-[#3c5a82] outline-none"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[9px] font-bold text-gray-400 uppercase ml-2",children:"To"}),c.jsx("input",{type:"date",value:r.to,onChange:v=>n({...r,to:v.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl text-sm font-bold focus:ring-2 focus:ring-[#3c5a82] outline-none"})]})]})]}),s&&l.length>0&&c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-4",children:"Status Filter"}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:["All",...l].map(v=>c.jsx("button",{onClick:()=>s(v),className:`py-3 rounded-2xl text-xs font-bold transition-all border ${a===v?"bg-gray-900 text-white border-gray-900 shadow-lg":"bg-white text-gray-500 border-gray-100"}`,children:v},v))})]}),c.jsx("button",{onClick:()=>h(!1),className:`w-full py-5 ${se.colors.primary[600]} text-white rounded-xl font-black text-lg shadow-xl active:scale-95 transition-all mt-4`,children:"Apply Filters"})]})]})]})]})},a1=({isOpen:e,onClose:t,onSubmit:r,accounts:n,paymentForm:a,setPaymentForm:s,isLoading:l,title:u="Record Payment",buttonText:f="Add Payment"})=>e?c.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4",children:[c.jsx("div",{className:"fixed inset-0 bg-gray-900/60 backdrop-blur-sm",onClick:t}),c.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] p-10 z-[210] animate-in zoom-in-95 duration-200 border border-[#ebf4ff]",children:[c.jsx("h3",{className:"text-2xl font-black text-gray-900 mb-8",children:u}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Payment Date"}),c.jsx("input",{type:"date",value:a.date,onChange:h=>s({...a,date:h.target.value}),disabled:l,className:"w-full px-6 py-3.5 bg-gray-50 border border-gray-100 rounded-lg font-bold focus:ring-2 focus:ring-emerald-500 outline-none disabled:opacity-50"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Payment Time"}),c.jsx("input",{type:"time",value:a.time,onChange:h=>s({...a,time:h.target.value}),disabled:l,className:"w-full px-6 py-3.5 bg-gray-50 border border-gray-100 rounded-lg font-bold focus:ring-2 focus:ring-emerald-500 outline-none disabled:opacity-50"})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Select Account"}),c.jsxs("select",{value:a.accountId,onChange:h=>s({...a,accountId:h.target.value}),disabled:l,className:"w-full px-6 py-3.5 bg-gray-50 border border-gray-100 rounded-lg font-bold focus:ring-2 focus:ring-emerald-500 outline-none disabled:opacity-50",children:[c.jsx("option",{value:"",children:"Select an account..."}),n.map(h=>c.jsxs("option",{value:h.id,children:[h.name," (",we(h.currentBalance),")"]},h.id))]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2",children:"Amount (BDT)"}),c.jsx("input",{type:"number",value:a.amount,onChange:h=>s({...a,amount:parseFloat(h.target.value)||0}),disabled:l,className:`w-full px-6 py-4 bg-[#ebf4ff] border-2 border-[#c7dff5] rounded-lg font-black ${se.colors.primary[600]} text-xl outline-none disabled:opacity-50`})]}),c.jsxs("div",{className:"pt-6 flex gap-4",children:[c.jsx(Je,{onClick:t,variant:"ghost",disabled:l,children:"Cancel"}),c.jsx(Je,{onClick:r,variant:"primary",size:"md",className:"flex-1",disabled:l,loading:l,children:f})]})]})]})]}):null;function F9(){return rt({queryKey:["customers"],queryFn:_D,staleTime:300*1e3})}function K9(e=1,t=Yt,r){return rt({queryKey:["customers",e,t,r],queryFn:()=>Px(e,t,r),placeholderData:n=>n,staleTime:300*1e3,refetchOnMount:!0})}function Kp(e){return rt({queryKey:["customer",e],queryFn:()=>ND(e||""),enabled:!!e&&!(e||"").startsWith("temp-"),staleTime:300*1e3})}function Qp(){return rt({queryKey:["orders"],queryFn:Oq,staleTime:300*1e3})}function Q9(e=1,t=Yt,r){return rt({queryKey:["orders",e,t,r],queryFn:()=>Eq(e,t,r),placeholderData:n=>n,staleTime:300*1e3,refetchOnMount:!0})}function i1(e){return rt({queryKey:["order",e],queryFn:()=>Aq(e||""),enabled:!!e,staleTime:300*1e3})}function H9(e){return rt({queryKey:["ordersByCustomerId",e],queryFn:()=>Cq(e||""),enabled:!!e,staleTime:300*1e3})}function Hp(){return rt({queryKey:["bills"],queryFn:Vq,staleTime:300*1e3})}function V9(e=1,t=Yt,r){return rt({queryKey:["bills",e,t,r],queryFn:()=>Hq(e,t,r),placeholderData:n=>n,staleTime:300*1e3,refetchOnMount:!0})}function BD(e){return rt({queryKey:["bill",e],queryFn:()=>Gq(e||""),enabled:!!e,staleTime:300*1e3})}function Hs(){return rt({queryKey:["accounts"],queryFn:kx,staleTime:900*1e3})}function of(){return rt({queryKey:["transactions"],queryFn:Iq,staleTime:300*1e3})}function G9(e=1,t=Yt,r){return rt({queryKey:["transactions",e,t,r],queryFn:()=>Lq(e,t,r),placeholderData:n=>n,staleTime:300*1e3,refetchOnMount:!0})}function zi(){return rt({queryKey:["users"],queryFn:zq,staleTime:300*1e3,refetchOnMount:!0})}function $D(e){return rt({queryKey:["user",e],queryFn:()=>e1(e||""),enabled:!!e,staleTime:10*1e3,refetchOnWindowFocus:!0,refetchOnReconnect:!0})}function s1(){return rt({queryKey:["vendors"],queryFn:Jq,staleTime:300*1e3})}function W9(e=1,t=Yt,r){return rt({queryKey:["vendors",e,t,r],queryFn:()=>Tx(e,t,r),placeholderData:n=>n,staleTime:300*1e3,refetchOnMount:!0})}function UD(e){return rt({queryKey:["vendor",e],queryFn:()=>Zq(e||""),enabled:!!e,staleTime:300*1e3})}function o1(e){return rt({queryKey:["products"],queryFn:()=>Dx(e),staleTime:900*1e3})}function Y9(e=1,t=Yt,r,n,a){const s={queryKey:["products",e,t,n,r,...a||[]],queryFn:()=>Uq(e,t,r,n,a),placeholderData:l=>l,staleTime:9e5,keepPreviousData:!0,refetchOnWindowFocus:!1,refetchOnMount:!0};return rt(s)}function X9(e){return rt({queryKey:["product",e],queryFn:()=>n8(e||""),enabled:!!e,staleTime:900*1e3})}function Vs(e){return rt({queryKey:["categories",e],queryFn:()=>o8(e),staleTime:3600*1e3})}function zD(e){return rt({queryKey:["paymentMethods",e],queryFn:()=>u8(e),staleTime:3600*1e3})}function J9(){return rt({queryKey:["units"],queryFn:h8,staleTime:3600*1e3})}function Vp(){return rt({queryKey:["settings","company"],queryFn:af,staleTime:3600*1e3})}function Gp(){return rt({queryKey:["settings","order"],queryFn:t1,staleTime:3600*1e3})}function Wp(){return rt({queryKey:["settings","invoice"],queryFn:r1,staleTime:3600*1e3})}function Gs(){return rt({queryKey:["settings","defaults"],queryFn:n1,staleTime:3600*1e3})}function l1(){return rt({queryKey:["settings","courier"],queryFn:Up,staleTime:3600*1e3})}const qD=new Map,Z9=new Map,vi=new Map;function FD(e="item"){return`__temp_${e}_${crypto.randomUUID()}__`}function c1(e,t){console.log(`[optimisticIdMap] Mapping ${e}  ${t}`),qD.set(e,t),Z9.set(t,e);const r=vi.get(e);r&&r.length&&(r.forEach(n=>{try{n(t)}catch{}}),vi.delete(e))}function Yp(e){return typeof e=="string"&&e.startsWith("__temp_")}function eF(e,t=5e3){if(!e)return Promise.resolve(null);const r=qD.get(e);return r?Promise.resolve(r):new Promise(n=>{const a=h=>n(h),s=vi.get(e)||[];s.push(a),vi.set(e,s);const l=setTimeout(()=>{const m=(vi.get(e)||[]).filter(g=>g!==a);m.length?vi.set(e,m):vi.delete(e),n(null)},t),u=h=>{clearTimeout(l),n(h)},f=vi.get(e)||[];f[f.length-1]=u,vi.set(e,f)})}function Pt(e){let t=1,r=Yt,n;for(let a=1;a<e.length;a++){const s=e[a];if(typeof s=="number"&&Number.isInteger(s))t===1?t=s:r===Yt&&(r=s);else{n=s;break}}return{page:t,pageSize:r,filters:n}}function KD(e,t,r){if(!r)return!0;try{if(r.status&&r.status!=="All"&&(t.status||t.status==="")&&t.status!==r.status)return!1;const n=t.createdAt||t.created_at||t.date||null;if(r.from&&n){const a=new Date(r.from);if(new Date(n)<a)return!1}if(r.to&&n){const a=new Date(r.to);if(new Date(n)>a)return!1}if(e==="bills"&&r.vendorId&&(t.vendorId||t.vendor_id)&&(t.vendorId||t.vendor_id)!==r.vendorId||e==="transactions"&&(r.accountId&&(t.accountId||t.account_id)&&(t.accountId||t.account_id)!==r.accountId||r.contactId&&(t.contactId||t.contact_id)&&(t.contactId||t.contact_id)!==r.contactId||r.type&&(t.type||t.type==="")&&t.type!==r.type))return!1;if(e==="orders"&&r.createdByIds&&Array.isArray(r.createdByIds)&&r.createdByIds.length>0){const a=t.createdBy||t.created_by;if(!r.createdByIds.includes(a))return!1}return!0}catch{return!1}}function _n(e,t){e.invalidateQueries({queryKey:[t],exact:!1})}function tF(){const e=Le();return xt({mutationFn:Sq,onMutate:async t=>{await e.cancelQueries({queryKey:["customers"]});const r=e.getQueryData(["customers"]);if(r){const n=FD("customer"),a={...t,id:n};e.setQueryData(["customers"],[...r,a]);const s=e.getQueryData(["customers",1]);if(s&&Array.isArray(s.data)){const{pageSize:l}=Pt(["customers",1]);e.setQueryData(["customers",1],{...s,data:[a,...s.data].slice(0,l),count:(s.count||0)+1})}return{previousCustomers:r,tempId:n,optimisticCustomer:a}}return{previousCustomers:r}},onError:(t,r,n)=>{n!=null&&n.previousCustomers&&e.setQueryData(["customers"],n.previousCustomers)},onSuccess:async(t,r,n)=>{try{n!=null&&n.tempId&&c1(n.tempId,t.id)}catch{}e.setQueryData(["customer",t.id],t);try{const l=(e.getQueryData(["customers"])||[]||[]).filter(u=>!Yp(String(u.id)));l.some(u=>u.id===t.id)?e.setQueryData(["customers"],l.map(u=>u.id===t.id?t:u)):e.setQueryData(["customers"],[t,...l])}catch{}e.getQueriesData({queryKey:["customers"]}).forEach(([s,l])=>{try{const u=s,{page:f,pageSize:h,filters:m}=Pt(u);if(f!==1)return;l&&l.data&&Array.isArray(l.data)&&(()=>{if(!m)return!0;if(m.search){const y=String(m.search).trim().toLowerCase();if(y&&!(String(t.name||"")+" "+String(t.phone||"")+" "+String(t.address||"")).toLowerCase().includes(y))return!1}return!0})()&&e.setQueryData(s,{...l,data:[t,...l.data].slice(0,h||Yt),count:l.count?l.count+1:1})}catch{}}),_n(e,"customers")}})}function rF(){const e=Le();return xt({mutationFn:({id:t,updates:r})=>_q(t,r),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["customers"]}),await e.cancelQueries({queryKey:["customer",t]});const n=e.getQueryData(["customers"]),a=e.getQueryData(["customer",t]);return n&&e.setQueryData(["customers"],n.map(s=>s.id===t?{...s,...r}:s)),a&&e.setQueryData(["customer",t],{...a,...r}),{previousCustomers:n,previousCustomer:a}},onError:(t,r,n)=>{n!=null&&n.previousCustomers&&e.setQueryData(["customers"],n.previousCustomers),n!=null&&n.previousCustomer&&e.setQueryData(["customer",r.id],n.previousCustomer)},onSuccess:t=>{e.getQueriesData({queryKey:["customers"]}).forEach(([n,a])=>{try{a&&a.data&&Array.isArray(a.data)&&e.setQueryData(n,{...a,data:a.data.map(s=>s.id===t.id?t:s)})}catch{}}),e.setQueryData(["customer",t.id],t)}})}function nF(){const e=Le();return xt({mutationFn:Nq,onMutate:async t=>{await e.cancelQueries({queryKey:["customers"]});const r=e.getQueryData(["customers"]);return r&&e.setQueryData(["customers"],r.filter(n=>n.id!==t)),{previousCustomers:r}},onError:(t,r,n)=>{n!=null&&n.previousCustomers&&e.setQueryData(["customers"],n.previousCustomers)},onSuccess:(t,r)=>{const n=e.getQueriesData({queryKey:["customers"]}),a=new Map;n.forEach(([l,u])=>{const f=l,{page:h,pageSize:m,filters:g}=Pt(f);typeof h!="number"||!Number.isInteger(h)||a.set(JSON.stringify([h,m,g]),{key:f,value:u,pageSize:m})});const s=Array.from(a.keys()).sort((l,u)=>JSON.parse(l)[0]-JSON.parse(u)[0]);for(const l of s){const u=a.get(l);if(!u)continue;const{key:f,value:h,pageSize:m}=u;try{if(h&&h.data&&Array.isArray(h.data)){const g=h.data.filter(_=>_.id!==r),y=Pt(f).page,v=Pt(f).filters,w=JSON.stringify([y+1,m,v]),x=a.get(w);if(x&&x.value&&Array.isArray(x.value.data)&&x.value.data.length>0){const _=x.value.data[0];x.value.data=x.value.data.slice(1),g.push(_),e.setQueryData(x.key,{...x.value,data:x.value.data,count:Math.max(0,(x.value.count||1)-1)})}e.setQueryData(f,{...h,data:g,count:Math.max(0,(h.count||1)-1)})}}catch{}}_n(e,"customers")}})}function Xp(){const e=Le();return xt({mutationFn:t=>Pq(t),onMutate:async t=>{await e.cancelQueries({queryKey:["orders"]}),await e.cancelQueries({queryKey:["orders-search"]});const r=e.getQueryData(["orders"])||[],n=FD("order"),a={...t,id:n,paidAmount:t.paidAmount||0};e.setQueryData(["orders"],[a,...r]);const s=e.getQueryData(["orders",1]);if(s&&Array.isArray(s.data)){const{pageSize:l}=Pt(["orders",1]);e.setQueryData(["orders",1],{...s,data:[a,...s.data].slice(0,l),count:(s.count||0)+1})}return{previousOrders:r,optimisticOrder:a,tempId:n}},onError:(t,r,n)=>{n!=null&&n.previousOrders&&e.setQueryData(["orders"],n.previousOrders)},onSuccess:async(t,r,n)=>{n!=null&&n.tempId&&c1(n.tempId,t.id),e.setQueryData(["order",t.id],t),e.getQueriesData({queryKey:["orders"]}).forEach(([s,l])=>{try{const u=s,{page:f,pageSize:h,filters:m}=Pt(u);if(f!==1)return;l&&l.data&&Array.isArray(l.data)&&(m?!(m.status&&m.status!=="All"&&t.status!==m.status||m.from&&t.createdAt&&t.createdAt<m.from||m.to&&t.createdAt&&t.createdAt>m.to||m.createdByIds&&Array.isArray(m.createdByIds)&&m.createdByIds.length>0&&!m.createdByIds.includes(t.createdBy)):!0)&&e.setQueryData(s,{...l,data:[t,...l.data].slice(0,h||Yt),count:l.count?l.count+1:1})}catch{}}),e.invalidateQueries({queryKey:["orders-search"],exact:!1});try{const s=e.getQueryData(["settings","order"]);if(s){const l=(t.orderNumber||"").match(/(\d+)$/);if(l){const u=parseInt(l[1],10),f=Math.max(u+1,s.nextNumber);e.setQueryData(["settings","order"],{...s,nextNumber:f})}else e.setQueryData(["settings","order"],{...s,nextNumber:s.nextNumber+1})}}catch(s){console.error("Failed to locally update order settings:",s)}_n(e,"orders")}})}function lf(){const e=Le();return xt({mutationFn:({id:t,updates:r})=>OD(t,r),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["orders"]}),await e.cancelQueries({queryKey:["orders-search"]}),await e.cancelQueries({queryKey:["order",t]}),await e.cancelQueries({queryKey:["ordersByCustomerId"]});const n=e.getQueryData(["orders"]),a=e.getQueryData(["order",t]);if(n&&e.setQueryData(["orders"],n.map(s=>s.id===t?{...s,...r}:s)),a&&e.setQueryData(["order",t],{...a,...r}),a!=null&&a.customerId){const s=e.getQueryData(["ordersByCustomerId",a.customerId]);s&&e.setQueryData(["ordersByCustomerId",a.customerId],s.map(l=>l.id===t?{...l,...r}:l))}return{previousOrders:n,previousOrder:a}},onError:(t,r,n)=>{n!=null&&n.previousOrders&&e.setQueryData(["orders"],n.previousOrders),n!=null&&n.previousOrder&&e.setQueryData(["order",r.id],n.previousOrder)},onSuccess:t=>{e.getQueriesData({queryKey:["orders"]}).forEach(([n,a])=>{try{a&&a.data&&Array.isArray(a.data)&&e.setQueryData(n,{...a,data:a.data.map(s=>s.id===t.id?t:s)})}catch{}}),e.invalidateQueries({queryKey:["orders-search"],exact:!1}),e.setQueryData(["order",t.id],t)}})}function aF(){const e=Le();return xt({mutationFn:Tq,onMutate:async t=>{await e.cancelQueries({queryKey:["orders"]}),await e.cancelQueries({queryKey:["orders-search"]});const r=e.getQueryData(["orders"]);return r&&e.setQueryData(["orders"],r.filter(n=>n.id!==t)),{previousOrders:r}},onError:(t,r,n)=>{n!=null&&n.previousOrders&&e.setQueryData(["orders"],n.previousOrders)},onSuccess:(t,r)=>{const n=e.getQueriesData({queryKey:["orders"]}),a=new Map;n.forEach(([l,u])=>{const f=l,{page:h,pageSize:m,filters:g}=Pt(f);if(typeof h!="number"||!Number.isInteger(h))return;const y=JSON.stringify([h,m,g]);a.set(y,{key:f,value:u,pageSize:m})});const s=Array.from(a.keys()).sort((l,u)=>{const f=JSON.parse(l)[0],h=JSON.parse(u)[0];return f-h});for(const l of s){const u=a.get(l);if(!u)continue;const{key:f,value:h,pageSize:m}=u;try{if(h&&h.data&&Array.isArray(h.data)){const g=h.data.filter(_=>_.id!==r),y=Pt(f).page,v=Pt(f).filters,w=JSON.stringify([y+1,m,v]),x=a.get(w);if(x&&x.value&&Array.isArray(x.value.data)&&x.value.data.length>0){const _=x.value.data[0];x.value.data=x.value.data.slice(1),g.push(_),e.setQueryData(x.key,{...x.value,data:x.value.data,count:Math.max(0,(x.value.count||1)-1)})}e.setQueryData(f,{...h,data:g,count:Math.max(0,(h.count||1)-1)})}}catch{}}e.invalidateQueries({queryKey:["orders-search"],exact:!1}),_n(e,"orders")}})}function QD(){const e=Le();return xt({mutationFn:Wq,onMutate:async t=>{await e.cancelQueries({queryKey:["bills"]});const r=e.getQueryData(["bills"])||[],n={...t,id:`temp-${Date.now()}`,paidAmount:t.paidAmount||0};e.setQueryData(["bills"],[n,...r]);const a=e.getQueryData(["bills",1]);if(a&&Array.isArray(a.data)){const{pageSize:s}=Pt(["bills",1]);e.setQueryData(["bills",1],{...a,data:[n,...a.data].slice(0,s),count:(a.count||0)+1})}return{previousBills:r,optimisticBill:n}},onError:(t,r,n)=>{n!=null&&n.previousBills&&e.setQueryData(["bills"],n.previousBills)},onSuccess:async(t,r,n)=>{var s;try{(s=n==null?void 0:n.optimisticBill)!=null&&s.id&&c1(n.optimisticBill.id,t.id)}catch{}e.setQueryData(["bill",t.id],t);try{const u=(e.getQueryData(["bills"])||[]||[]).filter(f=>!String(f.id).startsWith("temp-"));u.some(f=>f.id===t.id)?e.setQueryData(["bills"],u.map(f=>f.id===t.id?t:f)):e.setQueryData(["bills"],[t,...u])}catch{}e.getQueriesData({queryKey:["bills"]}).forEach(([l,u])=>{try{const f=l,{page:h,pageSize:m,filters:g}=Pt(f);if(h!==1)return;if(u&&u.data&&Array.isArray(u.data)){if(!KD("bills",t,g))return;e.setQueryData(l,{...u,data:[t,...u.data].slice(0,m||Yt),count:u.count?u.count+1:1})}}catch{}}),_n(e,"bills")}})}function HD(){const e=Le();return xt({mutationFn:({id:t,updates:r})=>Yq(t,r),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["bills"]}),await e.cancelQueries({queryKey:["bill",t]});const n=e.getQueryData(["bills"]),a=e.getQueryData(["bill",t]);return n&&e.setQueryData(["bills"],n.map(s=>s.id===t?{...s,...r}:s)),a&&e.setQueryData(["bill",t],{...a,...r}),{previousBills:n,previousBill:a}},onError:(t,r,n)=>{n!=null&&n.previousBills&&e.setQueryData(["bills"],n.previousBills),n!=null&&n.previousBill&&e.setQueryData(["bill",r.id],n.previousBill)},onSuccess:t=>{e.getQueriesData({queryKey:["bills"]}).forEach(([n,a])=>{try{a&&a.data&&Array.isArray(a.data)&&e.setQueryData(n,{...a,data:a.data.map(s=>s.id===t.id?t:s)})}catch{}}),e.invalidateQueries({queryKey:["bill",t.id]})}})}function iF(){const e=Le();return xt({mutationFn:Xq,onMutate:async t=>{await e.cancelQueries({queryKey:["bills"]});const r=e.getQueryData(["bills"]);return r&&e.setQueryData(["bills"],r.filter(n=>n.id!==t)),{previousBills:r}},onError:(t,r,n)=>{n!=null&&n.previousBills&&e.setQueryData(["bills"],n.previousBills)},onSuccess:(t,r)=>{const n=e.getQueriesData({queryKey:["bills"]}),a=new Map;n.forEach(([l,u])=>{const f=l,{page:h,pageSize:m,filters:g}=Pt(f);typeof h!="number"||!Number.isInteger(h)||a.set(JSON.stringify([h,m,g]),{key:f,value:u,pageSize:m})});const s=Array.from(a.keys()).sort((l,u)=>JSON.parse(l)[0]-JSON.parse(u)[0]);for(const l of s){const u=a.get(l);if(!u)continue;const{key:f,value:h,pageSize:m}=u;try{if(h&&h.data&&Array.isArray(h.data)){const g=h.data.filter(_=>_.id!==r),y=Pt(f).page,v=Pt(f).filters,w=JSON.stringify([y+1,m,v]),x=a.get(w);if(x&&x.value&&Array.isArray(x.value.data)&&x.value.data.length>0){const _=x.value.data[0];x.value.data=x.value.data.slice(1),g.push(_),e.setQueryData(x.key,{...x.value,data:x.value.data,count:Math.max(0,(x.value.count||1)-1)})}e.setQueryData(f,{...h,data:g,count:Math.max(0,(h.count||1)-1)})}}catch{}}_n(e,"bills")}})}function sF(){const e=Le();return xt({mutationFn:Dq,onMutate:async t=>{await e.cancelQueries({queryKey:["accounts"]});const r=e.getQueryData(["accounts"]);if(r){const n={...t,id:`temp-${Date.now()}`};e.setQueryData(["accounts"],[...r,n])}return{previousAccounts:r}},onError:(t,r,n)=>{n!=null&&n.previousAccounts&&e.setQueryData(["accounts"],n.previousAccounts)},onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["accounts"]})}})}function cf(){const e=Le();return xt({mutationFn:({id:t,updates:r})=>Mq(t,r),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["accounts"]}),await e.cancelQueries({queryKey:["account",t]});const n=e.getQueryData(["accounts"]),a=e.getQueryData(["account",t]);return n&&e.setQueryData(["accounts"],n.map(s=>s.id===t?{...s,...r}:s)),a&&e.setQueryData(["account",t],{...a,...r}),{previousAccounts:n,previousAccount:a}},onError:(t,r,n)=>{n!=null&&n.previousAccounts&&e.setQueryData(["accounts"],n.previousAccounts),n!=null&&n.previousAccount&&e.setQueryData(["account",r.id],n.previousAccount)},onSuccess:t=>{e.invalidateQueries({queryKey:["accounts"]}),e.invalidateQueries({queryKey:["account",t.id]})}})}function oF(){const e=Le();return xt({mutationFn:Rq,onMutate:async t=>{await e.cancelQueries({queryKey:["accounts"]});const r=e.getQueryData(["accounts"]);return r&&e.setQueryData(["accounts"],r.filter(n=>n.id!==t)),{previousAccounts:r}},onError:(t,r,n)=>{n!=null&&n.previousAccounts&&e.setQueryData(["accounts"],n.previousAccounts)},onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["accounts"]})}})}function uf(){const e=Le();return xt({mutationFn:Bq,onMutate:async t=>{await e.cancelQueries({queryKey:["transactions"]}),await e.cancelQueries({queryKey:["orders"]});const r=e.getQueryData(["transactions"]),n=e.getQueryData(["orders"]);if(r){const a={...t,id:`temp-${Date.now()}`};e.setQueryData(["transactions"],[...r,a]);const s=e.getQueryData(["transactions",1]);if(s&&Array.isArray(s.data)){const{pageSize:l}=Pt(["transactions",1]);e.setQueryData(["transactions",1],{...s,data:[a,...s.data].slice(0,l),count:(s.count||0)+1})}}return{previousTransactions:r,previousOrders:n}},onError:(t,r,n)=>{n!=null&&n.previousTransactions&&e.setQueryData(["transactions"],n.previousTransactions),n!=null&&n.previousOrders&&e.setQueryData(["orders"],n.previousOrders)},onSuccess:t=>{e.getQueriesData({queryKey:["transactions"]}).forEach(([n,a])=>{try{const s=n,{page:l,pageSize:u,filters:f}=Pt(s);if(l!==1)return;if(a&&a.data&&Array.isArray(a.data)){if(!KD("transactions",t,f))return;const m=[t,...a.data].slice(0,u);e.setQueryData(n,{...a,data:m,count:a.count?a.count+1:1})}}catch{}}),_n(e,"transactions")}})}function lF(){const e=Le();return xt({mutationFn:$q,onMutate:async t=>{await e.cancelQueries({queryKey:["transactions"]});const r=e.getQueryData(["transactions"]);return r&&e.setQueryData(["transactions"],r.filter(n=>n.id!==t)),{previousTransactions:r}},onError:(t,r,n)=>{n!=null&&n.previousTransactions&&e.setQueryData(["transactions"],n.previousTransactions)},onSuccess:(t,r)=>{const n=e.getQueriesData({queryKey:["transactions"]}),a=new Map;n.forEach(([l,u])=>{const f=l,{page:h,pageSize:m,filters:g}=Pt(f);typeof h!="number"||!Number.isInteger(h)||a.set(JSON.stringify([h,m,g]),{key:f,value:u,pageSize:m})});const s=Array.from(a.keys()).sort((l,u)=>JSON.parse(l)[0]-JSON.parse(u)[0]);for(const l of s){const u=a.get(l);if(!u)continue;const{key:f,value:h,pageSize:m}=u;try{if(h&&h.data&&Array.isArray(h.data)){const g=h.data.filter(_=>_.id!==r),{page:y,filters:v}=Pt(f),w=JSON.stringify([y+1,m,v]),x=a.get(w);if(x&&x.value&&Array.isArray(x.value.data)&&x.value.data.length>0){const _=x.value.data[0];x.value.data=x.value.data.slice(1),g.push(_),e.setQueryData(x.key,{...x.value,data:x.value.data,count:Math.max(0,(x.value.count||1)-1)})}e.setQueryData(f,{...h,data:g,count:Math.max(0,(h.count||1)-1)})}}catch{}}_n(e,"transactions")}})}function cF(){const e=Le();return xt({mutationFn:Fq,onMutate:async t=>{await e.cancelQueries({queryKey:["users"]});const r=e.getQueryData(["users"]);if(r){const n={...t,id:`temp-${Date.now()}`};e.setQueryData(["users"],[...r,n])}return{previousUsers:r}},onError:(t,r,n)=>{n!=null&&n.previousUsers&&e.setQueryData(["users"],n.previousUsers)},onSuccess:t=>{try{t!=null&&t.id&&e.setQueryData(["user",t.id],t)}catch{}try{const a=(e.getQueryData(["users"])||[]||[]).filter(s=>!String(s.id).startsWith("temp-"));a.some(s=>s.id===t.id)?e.setQueryData(["users"],a.map(s=>s.id===t.id?t:s)):e.setQueryData(["users"],[t,...a])}catch{}e.getQueriesData({queryKey:["users"]}).forEach(([n,a])=>{try{const s=n,{page:l,pageSize:u,filters:f}=Pt(s);if(l!==1)return;a&&a.data&&Array.isArray(a.data)&&e.setQueryData(n,{...a,data:[t,...a.data].slice(0,u||Yt),count:a.count?a.count+1:1})}catch{}}),_n(e,"users")}})}function VD(){const e=Le();return xt({mutationFn:({id:t,updates:r})=>Kq(t,r),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["users"]}),await e.cancelQueries({queryKey:["user",t]}),await e.cancelQueries({queryKey:["userByPhone"]});const n=e.getQueryData(["users"]),a=e.getQueryData(["user",t]);return n&&e.setQueryData(["users"],n.map(s=>s.id===t?{...s,...r}:s)),a&&e.setQueryData(["user",t],{...a,...r}),{previousUsers:n,previousUser:a}},onError:(t,r,n)=>{n!=null&&n.previousUsers&&e.setQueryData(["users"],n.previousUsers),n!=null&&n.previousUser&&e.setQueryData(["user",r.id],n.previousUser)},onSuccess:t=>{e.getQueriesData({queryKey:["users"]}).forEach(([n,a])=>{try{a&&a.data&&Array.isArray(a.data)&&e.setQueryData(n,{...a,data:a.data.map(s=>s.id===t.id?t:s)})}catch{}}),e.setQueryData(["user",t.id],t)}})}function GD(){const e=Le();return xt({mutationFn:Qq,onMutate:async t=>{await e.cancelQueries({queryKey:["users"]});const r=e.getQueryData(["users"]);return r&&e.setQueryData(["users"],r.filter(n=>n.id!==t)),{previousUsers:r}},onError:(t,r,n)=>{n!=null&&n.previousUsers&&e.setQueryData(["users"],n.previousUsers)},onSuccess:(t,r)=>{const n=e.getQueriesData({queryKey:["users"]}),a=new Map;n.forEach(([l,u])=>{const f=l,{page:h,pageSize:m,filters:g}=Pt(f);typeof h!="number"||!Number.isInteger(h)||a.set(JSON.stringify([h,m,g]),{key:f,value:u,pageSize:m})});const s=Array.from(a.keys()).sort((l,u)=>JSON.parse(l)[0]-JSON.parse(u)[0]);for(const l of s){const u=a.get(l);if(!u)continue;const{key:f,value:h}=u;try{if(h&&h.data&&Array.isArray(h.data)){const m=h.data.filter(g=>g.id!==r);e.setQueryData(f,{...h,data:m,count:Math.max(0,(h.count||1)-1)})}}catch{}}_n(e,"users")}})}function uF(){const e=Le();return xt({mutationFn:e8,onMutate:async t=>{await e.cancelQueries({queryKey:["vendors"]});const r=e.getQueryData(["vendors"]);if(r){const n={...t,id:`temp-${Date.now()}`};e.setQueryData(["vendors"],[...r,n]);const a=e.getQueryData(["vendors",1]);if(a&&Array.isArray(a.data)){const{pageSize:s}=Pt(["vendors",1]);e.setQueryData(["vendors",1],{...a,data:[n,...a.data].slice(0,s),count:(a.count||0)+1})}}return{previousVendors:r}},onError:(t,r,n)=>{n!=null&&n.previousVendors&&e.setQueryData(["vendors"],n.previousVendors)},onSuccess:t=>{try{const n=e.getQueryData(["vendors"]);if(n){const a=(n||[]).filter(s=>!(s.id&&String(s.id).startsWith("temp-")));a.some(s=>s.id===t.id)?e.setQueryData(["vendors"],a.map(s=>s.id===t.id?t:s)):e.setQueryData(["vendors"],[t,...a])}}catch{}e.getQueriesData({queryKey:["vendors"]}).forEach(([n,a])=>{try{const s=n,{page:l,pageSize:u}=Pt(s);if(l!==1)return;a&&a.data&&Array.isArray(a.data)&&e.setQueryData(n,{...a,data:[t,...a.data].slice(0,u),count:a.count?a.count+1:1})}catch{}}),_n(e,"vendors")}})}function dF(){const e=Le();return xt({mutationFn:({id:t,updates:r})=>t8(t,r),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["vendors"]}),await e.cancelQueries({queryKey:["vendor",t]});const n=e.getQueryData(["vendors"]),a=e.getQueryData(["vendor",t]);return n&&e.setQueryData(["vendors"],n.map(s=>s.id===t?{...s,...r}:s)),a&&e.setQueryData(["vendor",t],{...a,...r}),{previousVendors:n,previousVendor:a}},onError:(t,r,n)=>{n!=null&&n.previousVendors&&e.setQueryData(["vendors"],n.previousVendors),n!=null&&n.previousVendor&&e.setQueryData(["vendor",r.id],n.previousVendor)},onSuccess:t=>{e.getQueriesData({queryKey:["vendors"]}).forEach(([n,a])=>{try{a&&a.data&&Array.isArray(a.data)&&e.setQueryData(n,{...a,data:a.data.map(s=>s.id===t.id?t:s)})}catch{}}),e.setQueryData(["vendor",t.id],t)}})}function fF(){const e=Le();return xt({mutationFn:r8,onMutate:async t=>{await e.cancelQueries({queryKey:["vendors"]});const r=e.getQueryData(["vendors"]);return r&&e.setQueryData(["vendors"],r.filter(n=>n.id!==t)),{previousVendors:r}},onError:(t,r,n)=>{n!=null&&n.previousVendors&&e.setQueryData(["vendors"],n.previousVendors)},onSuccess:(t,r)=>{const n=e.getQueriesData({queryKey:["vendors"]}),a=new Map;n.forEach(([l,u])=>{const f=l,{page:h,pageSize:m,filters:g}=Pt(f);typeof h!="number"||!Number.isInteger(h)||a.set(JSON.stringify([h,m,g]),{key:f,value:u,pageSize:m})});const s=Array.from(a.keys()).sort((l,u)=>JSON.parse(l)[0]-JSON.parse(u)[0]);for(const l of s){const u=a.get(l);if(!u)continue;const{key:f,value:h,pageSize:m}=u;try{if(h&&h.data&&Array.isArray(h.data)){const g=h.data.filter(_=>_.id!==r),{page:y,filters:v}=Pt(f),w=JSON.stringify([y+1,m,v]),x=a.get(w);if(x&&x.value&&Array.isArray(x.value.data)&&x.value.data.length>0){const _=x.value.data[0];x.value.data=x.value.data.slice(1),g.push(_),e.setQueryData(x.key,{...x.value,data:x.value.data,count:Math.max(0,(x.value.count||1)-1)})}e.setQueryData(f,{...h,data:g,count:Math.max(0,(h.count||1)-1)})}}catch{}}_n(e,"vendors")}})}function hF(){const e=Le();return xt({mutationFn:a8,onMutate:async t=>{await e.cancelQueries({queryKey:["products"]});const r=e.getQueryData(["products"])||[],n={...t,id:`temp-${Date.now()}`};return e.setQueryData(["products"],[n,...r]),{previousProducts:r,optimisticProduct:n}},onError:(t,r,n)=>{n!=null&&n.previousProducts&&e.setQueryData(["products"],n.previousProducts)},onSuccess:async t=>{e.setQueryData(["product",t.id],t),e.getQueriesData({queryKey:["products"]}).forEach(([s,l])=>{try{if(l&&l.data&&Array.isArray(l.data)){const{pageSize:u}=Pt(s),f=[t,...l.data].slice(0,u);e.setQueryData(s,{...l,data:f,count:l.count?l.count+1:1})}}catch{}});const a=(e.getQueryData(["products"])||[]||[]).filter(s=>!String(s.id).startsWith("temp-"));e.setQueryData(["products"],[t,...a]),_n(e,"products")}})}function mF(){const e=Le();return xt({mutationFn:({id:t,updates:r})=>i8(t,r),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["products"]}),await e.cancelQueries({queryKey:["product",t]});const n=e.getQueryData(["products"]),a=e.getQueryData(["product",t]);return n&&e.setQueryData(["products"],n.map(s=>s.id===t?{...s,...r}:s)),a&&e.setQueryData(["product",t],{...a,...r}),{previousProducts:n,previousProduct:a}},onError:(t,r,n)=>{n!=null&&n.previousProducts&&e.setQueryData(["products"],n.previousProducts),n!=null&&n.previousProduct&&e.setQueryData(["product",r.id],n.previousProduct)},onSuccess:t=>{e.getQueriesData({queryKey:["products"]}).forEach(([n,a])=>{try{a&&a.data&&Array.isArray(a.data)&&e.setQueryData(n,{...a,data:a.data.map(s=>s.id===t.id?t:s)})}catch{}}),e.setQueryData(["product",t.id],t)}})}function pF(){const e=Le();return xt({mutationFn:s8,onMutate:async t=>{await e.cancelQueries({queryKey:["products"]});const r=e.getQueryData(["products"]);return r&&e.setQueryData(["products"],r.filter(n=>n.id!==t)),{previousProducts:r}},onError:(t,r,n)=>{n!=null&&n.previousProducts&&e.setQueryData(["products"],n.previousProducts)},onSuccess:(t,r)=>{const n=e.getQueriesData({queryKey:["products"]}),a=new Map;n.forEach(([l,u])=>{const f=l,{page:h,pageSize:m,filters:g}=Pt(f);typeof h!="number"||!Number.isInteger(h)||a.set(JSON.stringify([h,m,g]),{key:f,value:u,pageSize:m})});const s=Array.from(a.keys()).sort((l,u)=>JSON.parse(l)[0]-JSON.parse(u)[0]);for(const l of s){const u=a.get(l);if(!u)continue;const{key:f,value:h,pageSize:m}=u;try{if(h&&h.data&&Array.isArray(h.data)){const g=h.data.filter(_=>_.id!==r),{page:y,filters:v}=Pt(f),w=JSON.stringify([y+1,m,v]),x=a.get(w);if(x&&x.value&&Array.isArray(x.value.data)&&x.value.data.length>0){const _=x.value.data[0];x.value.data=x.value.data.slice(1),g.push(_),e.setQueryData(x.key,{...x.value,data:x.value.data,count:Math.max(0,(x.value.count||1)-1)})}e.setQueryData(f,{...h,data:g,count:Math.max(0,(h.count||1)-1)})}}catch{}}_n(e,"products")}})}function gF(){const e=Le();return xt({mutationFn:l8,onMutate:async t=>{await e.cancelQueries({queryKey:["categories"]});const r=e.getQueryData(["categories"]);if(r){const n={...t,id:`temp-${Date.now()}`};e.setQueryData(["categories"],[...r,n])}return{previousCategories:r}},onError:(t,r,n)=>{n!=null&&n.previousCategories&&e.setQueryData(["categories"],n.previousCategories)},onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]})}})}function yF(){const e=Le();return xt({mutationFn:c8,onMutate:async t=>{await e.cancelQueries({queryKey:["categories"]});const r=e.getQueryData(["categories"]);return r&&e.setQueryData(["categories"],r.filter(n=>n.id!==t)),{previousCategories:r}},onError:(t,r,n)=>{n!=null&&n.previousCategories&&e.setQueryData(["categories"],n.previousCategories)},onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]})}})}function vF(){const e=Le();return xt({mutationFn:d8,onMutate:async t=>{await e.cancelQueries({queryKey:["paymentMethods"]});const r=e.getQueryData(["paymentMethods"]);if(r){const n={...t,id:`temp-${Date.now()}`};e.setQueryData(["paymentMethods"],[...r,n])}return{previousMethods:r}},onError:(t,r,n)=>{n!=null&&n.previousMethods&&e.setQueryData(["paymentMethods"],n.previousMethods)},onSuccess:()=>{e.invalidateQueries({queryKey:["paymentMethods"]})}})}function bF(){const e=Le();return xt({mutationFn:f8,onMutate:async t=>{await e.cancelQueries({queryKey:["paymentMethods"]});const r=e.getQueryData(["paymentMethods"]);return r&&e.setQueryData(["paymentMethods"],r.filter(n=>n.id!==t)),{previousMethods:r}},onError:(t,r,n)=>{n!=null&&n.previousMethods&&e.setQueryData(["paymentMethods"],n.previousMethods)},onSuccess:()=>{e.invalidateQueries({queryKey:["paymentMethods"]})}})}function xF(){const e=Le();return xt({mutationFn:m8,onMutate:async t=>{await e.cancelQueries({queryKey:["units"]});const r=e.getQueryData(["units"]);if(r){const n={...t,id:`temp-${Date.now()}`};e.setQueryData(["units"],[...r,n])}return{previousUnits:r}},onError:(t,r,n)=>{n!=null&&n.previousUnits&&e.setQueryData(["units"],n.previousUnits)},onSuccess:()=>{e.invalidateQueries({queryKey:["units"]})}})}function wF(){const e=Le();return xt({mutationFn:p8,onMutate:async t=>{await e.cancelQueries({queryKey:["units"]});const r=e.getQueryData(["units"]);return r&&e.setQueryData(["units"],r.filter(n=>n.id!==t)),{previousUnits:r}},onError:(t,r,n)=>{n!=null&&n.previousUnits&&e.setQueryData(["units"],n.previousUnits)},onSuccess:()=>{e.invalidateQueries({queryKey:["units"]})}})}function jF(){const e=Le();return xt({mutationFn:A8,onMutate:async t=>{await e.cancelQueries({queryKey:["settings"]});const r=e.getQueryData(["settings","company"]),n=e.getQueryData(["settings","order"]),a=e.getQueryData(["settings","invoice"]),s=e.getQueryData(["settings","defaults"]),l=e.getQueryData(["settings","courier"]);return t.company&&r&&e.setQueryData(["settings","company"],{...r,...t.company}),t.order&&n&&e.setQueryData(["settings","order"],{...n,...t.order}),t.invoice&&a&&e.setQueryData(["settings","invoice"],{...a,...t.invoice}),t.defaults&&s&&e.setQueryData(["settings","defaults"],{...s,...t.defaults}),t.courier&&l&&e.setQueryData(["settings","courier"],{...l,...t.courier}),{previousCompany:r,previousOrder:n,previousInvoice:a,previousDefaults:s,previousCourier:l}},onError:(t,r,n)=>{n!=null&&n.previousCompany&&e.setQueryData(["settings","company"],n.previousCompany),n!=null&&n.previousOrder&&e.setQueryData(["settings","order"],n.previousOrder),n!=null&&n.previousInvoice&&e.setQueryData(["settings","invoice"],n.previousInvoice),n!=null&&n.previousDefaults&&e.setQueryData(["settings","defaults"],n.previousDefaults),n!=null&&n.previousCourier&&e.setQueryData(["settings","courier"],n.previousCourier)},onSuccess:()=>{e.invalidateQueries({queryKey:["settings"]})}})}const WD=({isOpen:e,onClose:t,order:r,customer:n})=>{var y;const a=Le(),{data:s}=l1(),[l,u]=j.useState(!1),[f,h]=j.useState(null),m=lf();if(!e)return null;const g=async()=>{var _;if(h(null),!r||!n){h("Missing order or customer information"),console.error("[SteadfastModal] Missing order, customer information");return}if(!(s!=null&&s.steadfast)){h("No Steadfast credentials configured"),console.error("[SteadfastModal] No Steadfast settings");return}const{baseUrl:v,apiKey:w,secretKey:x}=s.steadfast;if(console.log("[SteadfastModal] ======== SUBMISSION DEBUG ========"),console.log("[SteadfastModal] courierSettings object:",s),console.log("[SteadfastModal] steadfast object:",s.steadfast),console.log("[SteadfastModal] baseUrl:",v),console.log("[SteadfastModal] baseUrl type:",typeof v),console.log("[SteadfastModal] baseUrl empty?:",v===""||!v),console.log("[SteadfastModal] baseUrl trimmed empty?:",(v||"").trim()===""),console.log("[SteadfastModal] apiKey:",w?`${w.substring(0,5)}...`:"EMPTY/NULL"),console.log("[SteadfastModal] apiKey type:",typeof w),console.log("[SteadfastModal] secretKey:",x?`${x.substring(0,5)}...`:"EMPTY/NULL"),console.log("[SteadfastModal] secretKey type:",typeof x),!v||!w||!x){h(`Incomplete Steadfast credentials - baseUrl: ${!!v}, apiKey: ${!!w}, secretKey: ${!!x}`),console.error("[SteadfastModal] Incomplete credentials"),console.error("[SteadfastModal] baseUrl value:",JSON.stringify(v)),console.error("[SteadfastModal] apiKey value:",JSON.stringify(w)),console.error("[SteadfastModal] secretKey value:",JSON.stringify(x));return}u(!0);try{console.log("[SteadfastModal] ======== PREPARING SUBMISSION ========"),console.log("[SteadfastModal] Order Number:",r.orderNumber),console.log("[SteadfastModal] Customer Name:",n.name),console.log("[SteadfastModal] Customer Phone:",n.phone),console.log("[SteadfastModal] Customer Address:",n.address),console.log("[SteadfastModal] Order Total:",r.total);const N=await E8({baseUrl:v,apiKey:w,secretKey:x,invoice:r.orderNumber,recipientName:n.name,recipientPhone:n.phone,recipientAddress:n.address,codAmount:r.total});if(console.log("[SteadfastModal] ======== SUBMISSION RESULT ========"),console.log("[SteadfastModal] Result:",N),N.error){let O=N.error;try{N.error.includes("Account is not active")&&(O="Something went wrong.")}catch{}h(O),console.error("[SteadfastModal] Submission failed:",N.error);return}console.log("[SteadfastModal] Order submitted successfully to Steadfast");try{const O=`Sent to Steadfast by ${((_=Se.currentUser)==null?void 0:_.name)||"System"} on ${new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}`;console.log("[SteadfastModal] Setting courier history:",O),await m.mutateAsync({id:r.id,updates:{history:{...r.history,courier:O}}}),await a.refetchQueries({queryKey:["orders"],type:"active"}),await a.refetchQueries({queryKey:["order",r.id]}),console.log("[SteadfastModal] Courier status updated and UI refreshed")}catch(O){console.error("[SteadfastModal] Failed to update order:",O)}t()}catch(N){const O=N instanceof Error?N.message:"Unknown error";h(O),console.error("[SteadfastModal] Exception during submission:",O)}finally{u(!1)}};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm z-40",onClick:t}),c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:`${se.card.elevated} w-full max-w-2xl animate-in fade-in slide-in-from-bottom-4 duration-300`,children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Add to Steadfast"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),c.jsxs("div",{className:"p-6 space-y-4",children:[f&&c.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[c.jsx("p",{className:"font-semibold",children:"Error:"}),c.jsx("p",{children:f instanceof Error?f.message:String(f)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Order Number"}),c.jsx("p",{className:"text-gray-900",children:(r==null?void 0:r.orderNumber)||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Customer Name"}),c.jsx("p",{className:"text-gray-900",children:(n==null?void 0:n.name)||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Customer Phone"}),c.jsx("p",{className:"text-gray-900",children:(n==null?void 0:n.phone)||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Customer Address"}),c.jsx("p",{className:"text-gray-900",children:(n==null?void 0:n.address)||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"COD Amount"}),c.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[" ",((y=r==null?void 0:r.total)==null?void 0:y.toFixed(2))||"0.00"]})]})]}),c.jsxs("div",{className:"flex gap-3 px-6 py-4 border-t border-gray-100",children:[c.jsx("button",{onClick:t,disabled:l,className:"flex-1 py-2 px-4 rounded-lg border border-gray-200 text-gray-700 font-bold hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),c.jsx("button",{onClick:g,disabled:l||!r||!n,className:"flex-1 py-2 px-4 rounded-lg bg-blue-600 text-white font-bold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Adding...":"Add"})]})]})})]})},YD=({isOpen:e,onClose:t,order:r,customer:n})=>{const a=Le(),{data:s}=l1(),[l,u]=j.useState(1e3),[f,h]=j.useState("1"),[m,g]=j.useState(""),[y,v]=j.useState(""),[w,x]=j.useState(""),[_,N]=j.useState([]),[O,E]=j.useState([]),[C,T]=j.useState([]),[k,M]=j.useState(!1),[R,L]=j.useState(!1),[V,G]=j.useState(!1),[K,fe]=j.useState(!1),ge=lf(),he=j.useRef(null),B=j.useRef(!1);return j.useEffect(()=>(e||(B.current=!0,he.current&&(clearInterval(he.current),he.current=null)),()=>{B.current=!0,he.current&&(clearInterval(he.current),he.current=null)}),[e]),j.useEffect(()=>{e&&(async()=>{var ie,ue,I,D;if(!((ie=s==null?void 0:s.carryBee)!=null&&ie.baseUrl)||!((ue=s==null?void 0:s.carryBee)!=null&&ue.clientId)||!((I=s==null?void 0:s.carryBee)!=null&&I.clientSecret)||!((D=s==null?void 0:s.carryBee)!=null&&D.clientContext)){N([]);return}M(!0);try{const z=await j8({baseUrl:s.carryBee.baseUrl,clientId:s.carryBee.clientId,clientSecret:s.carryBee.clientSecret,clientContext:s.carryBee.clientContext});N(z)}catch(z){console.error("Failed to fetch cities:",z),N([])}finally{M(!1)}})()},[e,s]),j.useEffect(()=>{(async()=>{var ie,ue;if(!m||!((ie=s==null?void 0:s.carryBee)!=null&&ie.baseUrl)||!((ue=s==null?void 0:s.carryBee)!=null&&ue.clientId)){E([]),v(""),x(""),T([]);return}L(!0);try{const I=await S8({baseUrl:s.carryBee.baseUrl,clientId:s.carryBee.clientId,clientSecret:s.carryBee.clientSecret,clientContext:s.carryBee.clientContext,cityId:m});E(I)}catch(I){console.error("Failed to fetch zones:",I),E([])}finally{L(!1)}})()},[m,s]),j.useEffect(()=>{(async()=>{var ie,ue;if(!y||!m||!((ie=s==null?void 0:s.carryBee)!=null&&ie.baseUrl)||!((ue=s==null?void 0:s.carryBee)!=null&&ue.clientId)){T([]),x("");return}G(!0);try{const I=await _8({baseUrl:s.carryBee.baseUrl,clientId:s.carryBee.clientId,clientSecret:s.carryBee.clientSecret,clientContext:s.carryBee.clientContext,cityId:m,zoneId:y});T(I)}catch(I){console.error("Failed to fetch areas:",I),T([])}finally{G(!1)}})()},[y,m,s]),e?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm z-40",onClick:t}),c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:`${se.card.elevated} w-full max-w-2xl animate-in fade-in slide-in-from-bottom-4 duration-300`,children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Add to CarryBee"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-semibold text-gray-700",children:["Weight ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",value:l,onChange:Q=>u(Number(Q.target.value)),className:"flex-1 px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg",min:"1"}),c.jsx("span",{className:"text-sm font-semibold text-gray-700 whitespace-nowrap",children:"grams"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-semibold text-gray-700",children:["Delivery Type ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{value:f,onChange:Q=>h(Q.target.value),className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg",children:[c.jsx("option",{value:"1",children:"Normal Delivery (Type 1)"}),c.jsx("option",{value:"2",children:"Express Delivery (Type 2)"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-semibold text-gray-700",children:["City ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{value:m,onChange:Q=>g(Q.target.value),disabled:k||_.length===0,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("option",{value:"",children:k?"Loading cities...":_.length===0?"No cities available":"Select a city"}),_.map(Q=>c.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-semibold text-gray-700",children:["Zone ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{value:y,onChange:Q=>v(Q.target.value),disabled:!m||R||O.length===0,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("option",{value:"",children:m?R?"Loading zones...":O.length===0?"No zones available":"Select a zone":"Select a city first"}),O.map(Q=>c.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Area"}),c.jsxs("select",{value:w,onChange:Q=>x(Q.target.value),disabled:!y||V,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("option",{value:"",children:y?V?"Loading areas...":C.length===0?"No areas available":"Select an area (optional)":"Select a zone first"}),C.map(Q=>c.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]})]}),c.jsxs("div",{className:"flex gap-3 px-6 py-4 border-t border-gray-100",children:[c.jsx("button",{onClick:t,className:"flex-1 py-2 px-4 rounded-lg border border-gray-200 text-gray-700 font-bold hover:bg-gray-50",children:"Cancel"}),c.jsx("button",{onClick:async()=>{var z,Y,q;if(!m||!y){alert("Please select both City and Zone");return}if(!r||!n){alert("Missing order or customer information"),console.error("Missing order or customer:",{order:r,customer:n});return}if(!(s!=null&&s.carryBee)){alert("CarryBee settings not configured"),console.error("Missing CarryBee settings:",s);return}const{baseUrl:Q,clientId:ie,clientSecret:ue,clientContext:I,storeId:D}=s.carryBee;if(!Q||!ie||!ue||!I||!D){alert("CarryBee settings incomplete. Please configure Base URL, Client ID, Client Secret, Client Context, and Store ID in Settings."),console.error("Incomplete CarryBee settings:",{baseUrl:Q,clientId:ie,clientSecret:ue,clientContext:I,storeId:D});return}fe(!0);try{console.log("[CarryBeeModal] Submitting order:",{storeId:D,deliveryType:Number(f),recipientPhone:n.phone,recipientName:n.name,cityId:m,zoneId:y,areaId:w||void 0,itemWeight:l,collectableAmount:r.total});const pe=await N8({baseUrl:Q,clientId:ie,clientSecret:ue,clientContext:I,storeId:D,deliveryType:Number(f),productType:1,recipientPhone:n.phone,recipientName:n.name,recipientAddress:n.address||"",cityId:m,zoneId:y,areaId:w||void 0,itemWeight:l,collectableAmount:r.total||0});if(pe.error)alert(`Failed to send order: ${pe.error}`);else{try{const ve=pe&&(((z=pe.order)==null?void 0:z.consignment_id)||pe.consignment_id)||pe.data&&(((Y=pe.data.order)==null?void 0:Y.consignment_id)||pe.data.consignment_id)||null,me=`Sent to CarryBee by ${((q=Se.currentUser)==null?void 0:q.name)||"System"} on ${new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}`,Ee={history:{...r.history,courier:me}};if(ve&&(Ee.carrybeeConsignmentId=ve),console.log("[CarryBeeModal] Updating order with courier history:",Ee),await ge.mutateAsync({id:r.id,updates:Ee}),await a.refetchQueries({queryKey:["orders"],type:"active"}),await a.refetchQueries({queryKey:["order",r.id]}),console.log("[CarryBeeModal] Courier status updated and UI refreshed"),ve){const te="At the sorting hub";B.current=!1;const _e=async()=>{var De,le,Fe;if(!B.current)try{const Te=await PD({baseUrl:s.carryBee.baseUrl,clientId:s.carryBee.clientId,clientSecret:s.carryBee.clientSecret,clientContext:s.carryBee.clientContext,consignmentId:ve});if(Te.error)return;if((((le=(De=Te==null?void 0:Te.data)==null?void 0:De.data)==null?void 0:le.transfer_status)||((Fe=Te==null?void 0:Te.data)==null?void 0:Fe.transfer_status)||null)===te&&!B.current){const gt=`Marked picked automatically on ${new Date().toLocaleString()}`;await ge.mutateAsync({id:r.id,updates:{status:Re.PICKED,history:{...r.history,picked:gt}}}),await a.refetchQueries({queryKey:["orders"],type:"active"}),await a.refetchQueries({queryKey:["order",r.id]}),B.current=!0,he.current&&(clearInterval(he.current),he.current=null)}}catch(Te){console.error("[CarryBeeModal] Polling error:",Te)}};he.current=window.setInterval(_e,15e3),_e()}}catch(ve){console.error("[CarryBeeModal] Failed to update order sent flag or consignment id:",ve)}alert("Order sent to CarryBee successfully!"),t()}}catch(pe){console.error("Error submitting order:",pe),alert("Error sending order to CarryBee")}finally{fe(!1)}},disabled:!m||!y||K,className:"flex-1 py-2 px-4 rounded-lg bg-blue-600 text-white font-bold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:K?"Adding...":"Add"})]})]})})]}):null},w0=(e,t,r)=>{if(t==="All Time")return!0;const n=new Date(e),a=new Date;if(t==="Today")return n.toDateString()===a.toDateString();if(t==="This Week"){const s=a.getDate()-a.getDay(),l=new Date(new Date().setDate(s)),u=new Date(new Date().setDate(s+6));return n>=l&&n<=u}return t==="This Month"?n.getMonth()===a.getMonth()&&n.getFullYear()===a.getFullYear():t==="This Year"?n.getFullYear()===a.getFullYear():t==="Custom"?!r.from||!r.to?!0:n>=new Date(r.from)&&n<=new Date(r.to):!0};function XD(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=XD(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ht(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=XD(e))&&(n&&(n+=" "),n+=t);return n}var SF=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function u1(e){if(typeof e!="string")return!1;var t=SF;return t.includes(e)}var _F=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],NF=new Set(_F);function JD(e){return typeof e!="string"?!1:NF.has(e)}function ZD(e){return typeof e=="string"&&e.startsWith("data-")}function Un(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(JD(r)||ZD(r))&&(t[r]=e[r]);return t}function Vo(e){if(e==null)return null;if(j.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Un(t)}return typeof e=="object"&&!Array.isArray(e)?Un(e):null}function un(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(JD(r)||ZD(r)||u1(r))&&(t[r]=e[r]);return t}function OF(e){return e==null?null:j.isValidElement(e)?un(e.props):typeof e=="object"&&!Array.isArray(e)?un(e):null}var EF=["children","width","height","viewBox","className","style","title","desc"];function Mx(){return Mx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mx.apply(null,arguments)}function AF(e,t){if(e==null)return{};var r,n,a=CF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function CF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var d1=j.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:l,style:u,title:f,desc:h}=e,m=AF(e,EF),g=s||{width:n,height:a,x:0,y:0},y=ht("recharts-surface",l);return j.createElement("svg",Mx({},un(m),{className:y,width:n,height:a,style:u,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:t}),j.createElement("title",null,f),j.createElement("desc",null,h),r)}),kF=["children","className"];function Rx(){return Rx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rx.apply(null,arguments)}function PF(e,t){if(e==null)return{};var r,n,a=TF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function TF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Mr=j.forwardRef((e,t)=>{var{children:r,className:n}=e,a=PF(e,kF),s=ht("recharts-layer",n);return j.createElement("g",Rx({className:s},un(a),{ref:t}),r)}),eM=j.createContext(null),DF=()=>j.useContext(eM);function It(e){return function(){return e}}const tM=Math.cos,Im=Math.sin,Ca=Math.sqrt,Lm=Math.PI,Jp=2*Lm,Ix=Math.PI,Lx=2*Ix,wo=1e-6,MF=Lx-wo;function rM(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function RF(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return rM;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class IF{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?rM:RF(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,l){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+l}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,u=this._y1,f=n-t,h=a-r,m=l-t,g=u-r,y=m*m+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(y>wo)if(!(Math.abs(g*f-h*m)>wo)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let v=n-l,w=a-u,x=f*f+h*h,_=v*v+w*w,N=Math.sqrt(x),O=Math.sqrt(y),E=s*Math.tan((Ix-Math.acos((x+y-_)/(2*N*O)))/2),C=E/O,T=E/N;Math.abs(C-1)>wo&&this._append`L${t+C*m},${r+C*g}`,this._append`A${s},${s},0,0,${+(g*v>m*w)},${this._x1=t+T*f},${this._y1=r+T*h}`}}arc(t,r,n,a,s,l){if(t=+t,r=+r,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(a),f=n*Math.sin(a),h=t+u,m=r+f,g=1^l,y=l?a-s:s-a;this._x1===null?this._append`M${h},${m}`:(Math.abs(this._x1-h)>wo||Math.abs(this._y1-m)>wo)&&this._append`L${h},${m}`,n&&(y<0&&(y=y%Lx+Lx),y>MF?this._append`A${n},${n},0,1,${g},${t-u},${r-f}A${n},${n},0,1,${g},${this._x1=h},${this._y1=m}`:y>wo&&this._append`A${n},${n},0,${+(y>=Ix)},${g},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function f1(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new IF(t)}function h1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function nM(e){this._context=e}nM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Zp(e){return new nM(e)}function aM(e){return e[0]}function iM(e){return e[1]}function sM(e,t){var r=It(!0),n=null,a=Zp,s=null,l=f1(u);e=typeof e=="function"?e:e===void 0?aM:It(e),t=typeof t=="function"?t:t===void 0?iM:It(t);function u(f){var h,m=(f=h1(f)).length,g,y=!1,v;for(n==null&&(s=a(v=l())),h=0;h<=m;++h)!(h<m&&r(g=f[h],h,f))===y&&((y=!y)?s.lineStart():s.lineEnd()),y&&s.point(+e(g,h,f),+t(g,h,f));if(v)return s=null,v+""||null}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:It(+f),u):e},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:It(+f),u):t},u.defined=function(f){return arguments.length?(r=typeof f=="function"?f:It(!!f),u):r},u.curve=function(f){return arguments.length?(a=f,n!=null&&(s=a(n)),u):a},u.context=function(f){return arguments.length?(f==null?n=s=null:s=a(n=f),u):n},u}function nm(e,t,r){var n=null,a=It(!0),s=null,l=Zp,u=null,f=f1(h);e=typeof e=="function"?e:e===void 0?aM:It(+e),t=typeof t=="function"?t:It(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?iM:It(+r);function h(g){var y,v,w,x=(g=h1(g)).length,_,N=!1,O,E=new Array(x),C=new Array(x);for(s==null&&(u=l(O=f())),y=0;y<=x;++y){if(!(y<x&&a(_=g[y],y,g))===N)if(N=!N)v=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),w=y-1;w>=v;--w)u.point(E[w],C[w]);u.lineEnd(),u.areaEnd()}N&&(E[y]=+e(_,y,g),C[y]=+t(_,y,g),u.point(n?+n(_,y,g):E[y],r?+r(_,y,g):C[y]))}if(O)return u=null,O+""||null}function m(){return sM().defined(a).curve(l).context(s)}return h.x=function(g){return arguments.length?(e=typeof g=="function"?g:It(+g),n=null,h):e},h.x0=function(g){return arguments.length?(e=typeof g=="function"?g:It(+g),h):e},h.x1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:It(+g),h):n},h.y=function(g){return arguments.length?(t=typeof g=="function"?g:It(+g),r=null,h):t},h.y0=function(g){return arguments.length?(t=typeof g=="function"?g:It(+g),h):t},h.y1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:It(+g),h):r},h.lineX0=h.lineY0=function(){return m().x(e).y(t)},h.lineY1=function(){return m().x(e).y(r)},h.lineX1=function(){return m().x(n).y(t)},h.defined=function(g){return arguments.length?(a=typeof g=="function"?g:It(!!g),h):a},h.curve=function(g){return arguments.length?(l=g,s!=null&&(u=l(s)),h):l},h.context=function(g){return arguments.length?(g==null?s=u=null:u=l(s=g),h):s},h}class oM{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function LF(e){return new oM(e,!0)}function BF(e){return new oM(e,!1)}const m1={draw(e,t){const r=Ca(t/Lm);e.moveTo(r,0),e.arc(0,0,r,0,Jp)}},$F={draw(e,t){const r=Ca(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},lM=Ca(1/3),UF=lM*2,zF={draw(e,t){const r=Ca(t/UF),n=r*lM;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},qF={draw(e,t){const r=Ca(t),n=-r/2;e.rect(n,n,r,r)}},FF=.8908130915292852,cM=Im(Lm/10)/Im(7*Lm/10),KF=Im(Jp/10)*cM,QF=-tM(Jp/10)*cM,HF={draw(e,t){const r=Ca(t*FF),n=KF*r,a=QF*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const l=Jp*s/5,u=tM(l),f=Im(l);e.lineTo(f*r,-u*r),e.lineTo(u*n-f*a,f*n+u*a)}e.closePath()}},j0=Ca(3),VF={draw(e,t){const r=-Ca(t/(j0*3));e.moveTo(0,r*2),e.lineTo(-j0*r,-r),e.lineTo(j0*r,-r),e.closePath()}},ta=-.5,ra=Ca(3)/2,Bx=1/Ca(12),GF=(Bx/2+1)*3,WF={draw(e,t){const r=Ca(t/GF),n=r/2,a=r*Bx,s=n,l=r*Bx+r,u=-s,f=l;e.moveTo(n,a),e.lineTo(s,l),e.lineTo(u,f),e.lineTo(ta*n-ra*a,ra*n+ta*a),e.lineTo(ta*s-ra*l,ra*s+ta*l),e.lineTo(ta*u-ra*f,ra*u+ta*f),e.lineTo(ta*n+ra*a,ta*a-ra*n),e.lineTo(ta*s+ra*l,ta*l-ra*s),e.lineTo(ta*u+ra*f,ta*f-ra*u),e.closePath()}};function YF(e,t){let r=null,n=f1(a);e=typeof e=="function"?e:It(e||m1),t=typeof t=="function"?t:It(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:It(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:It(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function Bm(){}function $m(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function uM(e){this._context=e}uM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$m(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$m(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function XF(e){return new uM(e)}function dM(e){this._context=e}dM.prototype={areaStart:Bm,areaEnd:Bm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:$m(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function JF(e){return new dM(e)}function fM(e){this._context=e}fM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:$m(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ZF(e){return new fM(e)}function hM(e){this._context=e}hM.prototype={areaStart:Bm,areaEnd:Bm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function eK(e){return new hM(e)}function fA(e){return e<0?-1:1}function hA(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),l=(r-e._y1)/(a||n<0&&-0),u=(s*a+l*n)/(n+a);return(fA(s)+fA(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(u))||0}function mA(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function S0(e,t,r){var n=e._x0,a=e._y0,s=e._x1,l=e._y1,u=(s-n)/3;e._context.bezierCurveTo(n+u,a+u*t,s-u,l-u*r,s,l)}function Um(e){this._context=e}Um.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:S0(this,this._t0,mA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,S0(this,mA(this,r=hA(this,e,t)),r);break;default:S0(this,this._t0,r=hA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function mM(e){this._context=new pM(e)}(mM.prototype=Object.create(Um.prototype)).point=function(e,t){Um.prototype.point.call(this,t,e)};function pM(e){this._context=e}pM.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function tK(e){return new Um(e)}function rK(e){return new mM(e)}function gM(e){this._context=e}gM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=pA(e),a=pA(t),s=0,l=1;l<r;++s,++l)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function pA(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),l=new Array(r);for(a[0]=0,s[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,l[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,l[t]-=n*l[t-1];for(a[r-1]=l[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(l[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function nK(e){return new gM(e)}function eg(e,t){this._context=e,this._t=t}eg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function aK(e){return new eg(e,.5)}function iK(e){return new eg(e,0)}function sK(e){return new eg(e,1)}function Go(e,t){if((l=e.length)>1)for(var r=1,n,a,s=e[t[0]],l,u=s.length;r<l;++r)for(a=s,s=e[t[r]],n=0;n<u;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function $x(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function oK(e,t){return e[t]}function lK(e){const t=[];return t.key=e,t}function cK(){var e=It([]),t=$x,r=Go,n=oK;function a(s){var l=Array.from(e.apply(this,arguments),lK),u,f=l.length,h=-1,m;for(const g of s)for(u=0,++h;u<f;++u)(l[u][h]=[0,+n(g,l[u].key,h,s)]).data=g;for(u=0,m=h1(t(l));u<f;++u)l[m[u]].index=u;return r(l,m),l}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:It(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:It(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?$x:typeof s=="function"?s:It(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??Go,a):r},a}function uK(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,l;a<s;++a){for(l=r=0;r<n;++r)l+=e[r][a][1]||0;if(l)for(r=0;r<n;++r)e[r][a][1]/=l}Go(e,t)}}function dK(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var l=0,u=0;l<a;++l)u+=e[l][r][1]||0;n[r][1]+=n[r][0]=-u/2}Go(e,t)}}function fK(e,t){if(!(!((l=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,l;n<s;++n){for(var u=0,f=0,h=0;u<l;++u){for(var m=e[t[u]],g=m[n][1]||0,y=m[n-1][1]||0,v=(g-y)/2,w=0;w<u;++w){var x=e[t[w]],_=x[n][1]||0,N=x[n-1][1]||0;v+=_-N}f+=g,h+=v*g}a[n-1][1]+=a[n-1][0]=r,f&&(r-=h/f)}a[n-1][1]+=a[n-1][0]=r,Go(e,t)}}var _0={},N0={},gA;function hK(){return gA||(gA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(N0)),N0}var O0={},yA;function yM(){return yA||(yA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(O0)),O0}var E0={},vA;function p1(){return vA||(vA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(E0)),E0}var A0={},C0={},bA;function mK(){return bA||(bA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(C0)),C0}var xA;function g1(){return xA||(xA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mK(),r=p1();function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=t.toString(a);const s=[],l=a.length;if(l===0)return s;let u=0,f="",h="",m=!1;for(a.charCodeAt(0)===46&&(s.push(""),u++);u<l;){const g=a[u];h?g==="\\"&&u+1<l?(u++,f+=a[u]):g===h?h="":f+=g:m?g==='"'||g==="'"?h=g:g==="]"?(m=!1,s.push(f),f=""):f+=g:g==="["?(m=!0,f&&(s.push(f),f="")):g==="."?f&&(s.push(f),f=""):f+=g,u++}return f&&s.push(f),s}e.toPath=n})(A0)),A0}var wA;function y1(){return wA||(wA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hK(),r=yM(),n=p1(),a=g1();function s(u,f,h){if(u==null)return h;switch(typeof f){case"string":{if(t.isUnsafeProperty(f))return h;const m=u[f];return m===void 0?r.isDeepKey(f)?s(u,a.toPath(f),h):h:m}case"number":case"symbol":{typeof f=="number"&&(f=n.toKey(f));const m=u[f];return m===void 0?h:m}default:{if(Array.isArray(f))return l(u,f,h);if(Object.is(f==null?void 0:f.valueOf(),-0)?f="-0":f=String(f),t.isUnsafeProperty(f))return h;const m=u[f];return m===void 0?h:m}}}function l(u,f,h){if(f.length===0)return h;let m=u;for(let g=0;g<f.length;g++){if(m==null||t.isUnsafeProperty(f[g]))return h;m=m[f[g]]}return m===void 0?h:m}e.get=s})(_0)),_0}var k0,jA;function pK(){return jA||(jA=1,k0=y1().get),k0}var gK=pK();const Wo=Wa(gK);var yK=4;function Is(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yK,r=10**t,n=Math.round(e*r)/r;return Object.is(n,-0)?0:n}function sr(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((a,s,l)=>{var u=r[l-1];return typeof u=="string"?a+u+s:u!==void 0?a+Is(u)+s:a+s},"")}var Dr=e=>e===0?0:e>0?1:-1,Qa=e=>typeof e=="number"&&e!=+e,Yo=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Ne=e=>(typeof e=="number"||e instanceof Number)&&!Qa(e),Ha=e=>Ne(e)||typeof e=="string",vK=0,Pd=e=>{var t=++vK;return"".concat(e||"").concat(t)},Jr=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ne(t)&&typeof t!="string")return n;var s;if(Yo(t)){if(r==null)return n;var l=t.indexOf("%");s=r*parseFloat(t.slice(0,l))/100}else s=+t;return Qa(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},vM=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[String(e[n])])r[String(e[n])]=!0;else return!0;return!1};function Vt(e,t,r){return Ne(e)&&Ne(t)?Is(e+r*(t-e)):t}function bM(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Wo(n,t))===r)}var Xt=e=>e===null||typeof e>"u",df=e=>Xt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function jn(e){return e!=null}function sl(){}var bK=["type","size","sizeType"];function Ux(){return Ux=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ux.apply(null,arguments)}function SA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _A(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SA(Object(r),!0).forEach(function(n){xK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xK(e,t,r){return(t=wK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wK(e){var t=jK(e,"string");return typeof t=="symbol"?t:t+""}function jK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SK(e,t){if(e==null)return{};var r,n,a=_K(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _K(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var xM={symbolCircle:m1,symbolCross:$F,symbolDiamond:zF,symbolSquare:qF,symbolStar:HF,symbolTriangle:VF,symbolWye:WF},NK=Math.PI/180,OK=e=>{var t="symbol".concat(df(e));return xM[t]||m1},EK=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*NK;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},AK=(e,t)=>{xM["symbol".concat(df(e))]=t},v1=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=SK(e,bK),s=_A(_A({},a),{},{type:t,size:r,sizeType:n}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var y=OK(l),v=YF().type(y).size(EK(r,n,l)),w=v();if(w!==null)return w},{className:f,cx:h,cy:m}=s,g=un(s);return Ne(h)&&Ne(m)&&Ne(r)?j.createElement("path",Ux({},g,{className:ht("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(m,")"),d:u()})):null};v1.registerSymbol=AK;var wM=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,b1=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(j.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{u1(a)&&(n[a]=(s=>r[a](r,s)))}),n},CK=(e,t,r)=>n=>(e(t,r,n),null),ff=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];u1(a)&&typeof s=="function"&&(n||(n={}),n[a]=CK(s,t,r))}),n};function NA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function kK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NA(Object(r),!0).forEach(function(n){PK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PK(e,t,r){return(t=TK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TK(e){var t=DK(e,"string");return typeof t=="symbol"?t:t+""}function DK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function br(e,t){var r=kK({},e),n=t,a=Object.keys(t),s=a.reduce((l,u)=>(l[u]===void 0&&n[u]!==void 0&&(l[u]=n[u]),l),r);return s}function zm(){return zm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zm.apply(null,arguments)}function OA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function MK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OA(Object(r),!0).forEach(function(n){RK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RK(e,t,r){return(t=IK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IK(e){var t=LK(e,"string");return typeof t=="symbol"?t:t+""}function LK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aa=32,BK={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function $K(e){var{data:t,iconType:r,inactiveColor:n}=e,a=aa/2,s=aa/6,l=aa/3,u=t.inactive?n:t.color,f=r??t.type;if(f==="none")return null;if(f==="plainline"){var h;return j.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:(h=t.payload)===null||h===void 0?void 0:h.strokeDasharray,x1:0,y1:a,x2:aa,y2:a,className:"recharts-legend-icon"})}if(f==="line")return j.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(aa,"M").concat(2*l,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(f==="rect")return j.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(aa/8,"h").concat(aa,"v").concat(aa*3/4,"h").concat(-aa,"z"),className:"recharts-legend-icon"});if(j.isValidElement(t.legendIcon)){var m=MK({},t);return delete m.legendIcon,j.cloneElement(t.legendIcon,m)}return j.createElement(v1,{fill:u,cx:a,cy:a,size:aa,sizeType:"diameter",type:f})}function UK(e){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:l}=e,u={x:0,y:0,width:aa,height:aa},f={display:n==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((m,g)=>{var y=m.formatter||a,v=ht({"recharts-legend-item":!0,["legend-item-".concat(g)]:!0,inactive:m.inactive});if(m.type==="none")return null;var w=m.inactive?s:m.color,x=y?y(m.value,m,g):m.value;return j.createElement("li",zm({className:v,style:f,key:"legend-item-".concat(g)},ff(e,m,g)),j.createElement(d1,{width:r,height:r,viewBox:u,style:h,"aria-label":"".concat(x," legend icon")},j.createElement($K,{data:m,iconType:l,inactiveColor:s})),j.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},x))})}var zK=e=>{var t=br(e,BK),{payload:r,layout:n,align:a}=t;if(!r||!r.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?a:"left"};return j.createElement("ul",{className:"recharts-default-legend",style:s},j.createElement(UK,zm({},t,{payload:r})))},P0={},T0={},EA;function qK(){return EA||(EA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let s=0;s<r.length;s++){const l=r[s],u=n(l,s,r);a.has(u)||a.set(u,l)}return Array.from(a.values())}e.uniqBy=t})(T0)),T0}var D0={},AA;function FK(){return AA||(AA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return function(...a){return r.apply(this,a.slice(0,n))}}e.ary=t})(D0)),D0}var M0={},CA;function jM(){return CA||(CA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(M0)),M0}var R0={},I0={},L0={},kA;function KK(){return kA||(kA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(L0)),L0}var PA;function x1(){return PA||(PA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KK();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(I0)),I0}var B0={},TA;function QK(){return TA||(TA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(B0)),B0}var DA;function HK(){return DA||(DA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x1(),r=QK();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n})(R0)),R0}var $0={},U0={},MA;function VK(){return MA||(MA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=y1();function r(n){return function(a){return t.get(a,n)}}e.property=r})(U0)),U0}var z0={},q0={},F0={},K0={},RA;function SM(){return RA||(RA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(K0)),K0}var Q0={},IA;function _M(){return IA||(IA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Q0)),Q0}var H0={},LA;function NM(){return LA||(LA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.isEqualsSameValueZero=t})(H0)),H0}var BA;function GK(){return BA||(BA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SM(),r=_M(),n=NM();function a(m,g,y){return typeof y!="function"?a(m,g,()=>{}):s(m,g,function v(w,x,_,N,O,E){const C=y(w,x,_,N,O,E);return C!==void 0?!!C:s(w,x,v,E)},new Map)}function s(m,g,y,v){if(g===m)return!0;switch(typeof g){case"object":return l(m,g,y,v);case"function":return Object.keys(g).length>0?s(m,{...g},y,v):n.isEqualsSameValueZero(m,g);default:return t.isObject(m)?typeof g=="string"?g==="":!0:n.isEqualsSameValueZero(m,g)}}function l(m,g,y,v){if(g==null)return!0;if(Array.isArray(g))return f(m,g,y,v);if(g instanceof Map)return u(m,g,y,v);if(g instanceof Set)return h(m,g,y,v);const w=Object.keys(g);if(m==null||r.isPrimitive(m))return w.length===0;if(w.length===0)return!0;if(v!=null&&v.has(g))return v.get(g)===m;v==null||v.set(g,m);try{for(let x=0;x<w.length;x++){const _=w[x];if(!r.isPrimitive(m)&&!(_ in m)||g[_]===void 0&&m[_]!==void 0||g[_]===null&&m[_]!==null||!y(m[_],g[_],_,m,g,v))return!1}return!0}finally{v==null||v.delete(g)}}function u(m,g,y,v){if(g.size===0)return!0;if(!(m instanceof Map))return!1;for(const[w,x]of g.entries()){const _=m.get(w);if(y(_,x,w,m,g,v)===!1)return!1}return!0}function f(m,g,y,v){if(g.length===0)return!0;if(!Array.isArray(m))return!1;const w=new Set;for(let x=0;x<g.length;x++){const _=g[x];let N=!1;for(let O=0;O<m.length;O++){if(w.has(O))continue;const E=m[O];let C=!1;if(y(E,_,x,m,g,v)&&(C=!0),C){w.add(O),N=!0;break}}if(!N)return!1}return!0}function h(m,g,y,v){return g.size===0?!0:m instanceof Set?f([...m],[...g],y,v):!1}e.isMatchWith=a,e.isSetMatch=h})(F0)),F0}var $A;function OM(){return $A||($A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GK();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r})(q0)),q0}var V0={},G0={},W0={},UA;function WK(){return UA||(UA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(W0)),W0}var Y0={},zA;function w1(){return zA||(zA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Y0)),Y0}var X0={},qA;function EM(){return qA||(qA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",l="[object Symbol]",u="[object Date]",f="[object Map]",h="[object Set]",m="[object Array]",g="[object Function]",y="[object ArrayBuffer]",v="[object Object]",w="[object Error]",x="[object DataView]",_="[object Uint8Array]",N="[object Uint8ClampedArray]",O="[object Uint16Array]",E="[object Uint32Array]",C="[object BigUint64Array]",T="[object Int8Array]",k="[object Int16Array]",M="[object Int32Array]",R="[object BigInt64Array]",L="[object Float32Array]",V="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=y,e.arrayTag=m,e.bigInt64ArrayTag=R,e.bigUint64ArrayTag=C,e.booleanTag=a,e.dataViewTag=x,e.dateTag=u,e.errorTag=w,e.float32ArrayTag=L,e.float64ArrayTag=V,e.functionTag=g,e.int16ArrayTag=k,e.int32ArrayTag=M,e.int8ArrayTag=T,e.mapTag=f,e.numberTag=n,e.objectTag=v,e.regexpTag=t,e.setTag=h,e.stringTag=r,e.symbolTag=l,e.uint16ArrayTag=O,e.uint32ArrayTag=E,e.uint8ArrayTag=_,e.uint8ClampedArrayTag=N})(X0)),X0}var J0={},FA;function YK(){return FA||(FA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(J0)),J0}var KA;function AM(){return KA||(KA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WK(),r=w1(),n=EM(),a=_M(),s=YK();function l(m,g){return u(m,void 0,m,new Map,g)}function u(m,g,y,v=new Map,w=void 0){const x=w==null?void 0:w(m,g,y,v);if(x!==void 0)return x;if(a.isPrimitive(m))return m;if(v.has(m))return v.get(m);if(Array.isArray(m)){const _=new Array(m.length);v.set(m,_);for(let N=0;N<m.length;N++)_[N]=u(m[N],N,y,v,w);return Object.hasOwn(m,"index")&&(_.index=m.index),Object.hasOwn(m,"input")&&(_.input=m.input),_}if(m instanceof Date)return new Date(m.getTime());if(m instanceof RegExp){const _=new RegExp(m.source,m.flags);return _.lastIndex=m.lastIndex,_}if(m instanceof Map){const _=new Map;v.set(m,_);for(const[N,O]of m)_.set(N,u(O,N,y,v,w));return _}if(m instanceof Set){const _=new Set;v.set(m,_);for(const N of m)_.add(u(N,void 0,y,v,w));return _}if(typeof Buffer<"u"&&Buffer.isBuffer(m))return m.subarray();if(s.isTypedArray(m)){const _=new(Object.getPrototypeOf(m)).constructor(m.length);v.set(m,_);for(let N=0;N<m.length;N++)_[N]=u(m[N],N,y,v,w);return _}if(m instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&m instanceof SharedArrayBuffer)return m.slice(0);if(m instanceof DataView){const _=new DataView(m.buffer.slice(0),m.byteOffset,m.byteLength);return v.set(m,_),f(_,m,y,v,w),_}if(typeof File<"u"&&m instanceof File){const _=new File([m],m.name,{type:m.type});return v.set(m,_),f(_,m,y,v,w),_}if(typeof Blob<"u"&&m instanceof Blob){const _=new Blob([m],{type:m.type});return v.set(m,_),f(_,m,y,v,w),_}if(m instanceof Error){const _=new m.constructor;return v.set(m,_),_.message=m.message,_.name=m.name,_.stack=m.stack,_.cause=m.cause,f(_,m,y,v,w),_}if(m instanceof Boolean){const _=new Boolean(m.valueOf());return v.set(m,_),f(_,m,y,v,w),_}if(m instanceof Number){const _=new Number(m.valueOf());return v.set(m,_),f(_,m,y,v,w),_}if(m instanceof String){const _=new String(m.valueOf());return v.set(m,_),f(_,m,y,v,w),_}if(typeof m=="object"&&h(m)){const _=Object.create(Object.getPrototypeOf(m));return v.set(m,_),f(_,m,y,v,w),_}return m}function f(m,g,y=m,v,w){const x=[...Object.keys(g),...t.getSymbols(g)];for(let _=0;_<x.length;_++){const N=x[_],O=Object.getOwnPropertyDescriptor(m,N);(O==null||O.writable)&&(m[N]=u(g[N],N,y,v,w))}}function h(m){switch(r.getTag(m)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=f})(G0)),G0}var QA;function XK(){return QA||(QA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AM();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(V0)),V0}var HA;function JK(){return HA||(HA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OM(),r=XK();function n(a){return a=r.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=n})(z0)),z0}var Z0={},eb={},tb={},VA;function ZK(){return VA||(VA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AM(),r=w1(),n=EM();function a(s,l){return t.cloneDeepWith(s,(u,f,h,m)=>{const g=l==null?void 0:l(u,f,h,m);if(g!==void 0)return g;if(typeof s=="object"){if(r.getTag(s)===n.objectTag&&typeof s.constructor!="function"){const y={};return m.set(s,y),t.copyProperties(y,s,h,m),y}switch(Object.prototype.toString.call(s)){case n.numberTag:case n.stringTag:case n.booleanTag:{const y=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(y,s),y}case n.argumentsTag:{const y={};return t.copyProperties(y,s),y.length=s.length,y[Symbol.iterator]=s[Symbol.iterator],y}default:return}}})}e.cloneDeepWith=a})(tb)),tb}var GA;function eQ(){return GA||(GA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZK();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(eb)),eb}var rb={},nb={},WA;function CM(){return WA||(WA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(nb)),nb}var ab={},YA;function tQ(){return YA||(YA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w1();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(ab)),ab}var XA;function rQ(){return XA||(XA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yM(),r=CM(),n=tQ(),a=g1();function s(l,u){let f;if(Array.isArray(u)?f=u:typeof u=="string"&&t.isDeepKey(u)&&(l==null?void 0:l[u])==null?f=a.toPath(u):f=[u],f.length===0)return!1;let h=l;for(let m=0;m<f.length;m++){const g=f[m];if((h==null||!Object.hasOwn(h,g))&&!((Array.isArray(h)||n.isArguments(h))&&r.isIndex(g)&&g<h.length))return!1;h=h[g]}return!0}e.has=s})(rb)),rb}var JA;function nQ(){return JA||(JA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OM(),r=p1(),n=eQ(),a=y1(),s=rQ();function l(u,f){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=r.toKey(u);break}}return f=n.cloneDeep(f),function(h){const m=a.get(h,u);return m===void 0?s.has(h,u):f===void 0?m===void 0:t.isMatch(m,f)}}e.matchesProperty=l})(Z0)),Z0}var ZA;function aQ(){return ZA||(ZA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jM(),r=VK(),n=JK(),a=nQ();function s(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?a.matchesProperty(l[0],l[1]):n.matches(l);case"string":case"symbol":case"number":return r.property(l)}}e.iteratee=s})($0)),$0}var eC;function iQ(){return eC||(eC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qK(),r=FK(),n=jM(),a=HK(),s=aQ();function l(u,f=n.identity){return a.isArrayLikeObject(u)?t.uniqBy(Array.from(u),r.ary(s.iteratee(f),1)):[]}e.uniqBy=l})(P0)),P0}var ib,tC;function sQ(){return tC||(tC=1,ib=iQ().uniqBy),ib}var oQ=sQ();const rC=Wa(oQ);function kM(e,t,r){return t===!0?rC(e,r):typeof t=="function"?rC(e,t):e}var sb={exports:{}},ob={},lb={exports:{}},cb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nC;function lQ(){if(nC)return cb;nC=1;var e=Kc();function t(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,s=e.useLayoutEffect,l=e.useDebugValue;function u(g,y){var v=y(),w=n({inst:{value:v,getSnapshot:y}}),x=w[0].inst,_=w[1];return s(function(){x.value=v,x.getSnapshot=y,f(x)&&_({inst:x})},[g,v,y]),a(function(){return f(x)&&_({inst:x}),g(function(){f(x)&&_({inst:x})})},[g]),l(v),v}function f(g){var y=g.getSnapshot;g=g.value;try{var v=y();return!r(g,v)}catch{return!0}}function h(g,y){return y()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return cb.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,cb}var aC;function cQ(){return aC||(aC=1,lb.exports=lQ()),lb.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iC;function uQ(){if(iC)return ob;iC=1;var e=Kc(),t=cQ();function r(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,s=e.useRef,l=e.useEffect,u=e.useMemo,f=e.useDebugValue;return ob.useSyncExternalStoreWithSelector=function(h,m,g,y,v){var w=s(null);if(w.current===null){var x={hasValue:!1,value:null};w.current=x}else x=w.current;w=u(function(){function N(k){if(!O){if(O=!0,E=k,k=y(k),v!==void 0&&x.hasValue){var M=x.value;if(v(M,k))return C=M}return C=k}if(M=C,n(E,k))return M;var R=y(k);return v!==void 0&&v(M,R)?(E=k,M):(E=k,C=R)}var O=!1,E,C,T=g===void 0?null:g;return[function(){return N(m())},T===null?void 0:function(){return N(T())}]},[m,g,y,v]);var _=a(h,w[0],w[1]);return l(function(){x.hasValue=!0,x.value=_},[_]),f(_),_},ob}var sC;function dQ(){return sC||(sC=1,sb.exports=uQ()),sb.exports}var fQ=dQ(),j1=j.createContext(null),hQ=e=>e,Lt=()=>{var e=j.useContext(j1);return e?e.store.dispatch:hQ},Sm=()=>{},mQ=()=>Sm,pQ=(e,t)=>e===t;function Ce(e){var t=j.useContext(j1),r=j.useMemo(()=>t?n=>{if(n!=null)return e(n)}:Sm,[t,e]);return fQ.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:mQ,t?t.store.getState:Sm,t?t.store.getState:Sm,r,pQ)}function gQ(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function yQ(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function vQ(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var oC=e=>Array.isArray(e)?e:[e];function bQ(e){const t=Array.isArray(e[0])?e[0]:e;return vQ(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function xQ(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var wQ=class{constructor(e){this.value=e}deref(){return this.value}},jQ=typeof WeakRef<"u"?WeakRef:wQ,SQ=0,lC=1;function am(){return{s:SQ,v:void 0,o:null,p:null}}function PM(e,t={}){let r=am();const{resultEqualityCheck:n}=t;let a,s=0;function l(){var g;let u=r;const{length:f}=arguments;for(let y=0,v=f;y<v;y++){const w=arguments[y];if(typeof w=="function"||typeof w=="object"&&w!==null){let x=u.o;x===null&&(u.o=x=new WeakMap);const _=x.get(w);_===void 0?(u=am(),x.set(w,u)):u=_}else{let x=u.p;x===null&&(u.p=x=new Map);const _=x.get(w);_===void 0?(u=am(),x.set(w,u)):u=_}}const h=u;let m;if(u.s===lC)m=u.v;else if(m=e.apply(null,arguments),s++,n){const y=((g=a==null?void 0:a.deref)==null?void 0:g.call(a))??a;y!=null&&n(y,m)&&(m=y,s!==0&&s--),a=typeof m=="object"&&m!==null||typeof m=="function"?new jQ(m):m}return h.s=lC,h.v=m,m}return l.clearCache=()=>{r=am(),l.resetResultsCount()},l.resultsCount=()=>s,l.resetResultsCount=()=>{s=0},l}function _Q(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let s=0,l=0,u,f={},h=a.pop();typeof h=="object"&&(f=h,h=a.pop()),gQ(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const m={...r,...f},{memoize:g,memoizeOptions:y=[],argsMemoize:v=PM,argsMemoizeOptions:w=[]}=m,x=oC(y),_=oC(w),N=bQ(a),O=g(function(){return s++,h.apply(null,arguments)},...x),E=v(function(){l++;const T=xQ(N,arguments);return u=O.apply(null,T),u},..._);return Object.assign(E,{resultFunc:h,memoizedResultFunc:O,dependencies:N,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:g,argsMemoize:v})};return Object.assign(n,{withTypes:()=>n}),n}var W=_Q(PM),NQ=Object.assign((e,t=W)=>{yQ(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((l,u,f)=>(l[r[f]]=u,l),{}))},{withTypes:()=>NQ}),ub={},db={},fb={},cC;function OQ(){return cC||(cC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const l=t(n),u=t(a);if(l===u&&l===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?u-l:l-u}return 0};e.compareValues=r})(fb)),fb}var hb={},mb={},uC;function TM(){return uC||(uC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(mb)),mb}var dC;function EQ(){return dC||(dC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TM(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,l){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||l!=null&&Object.hasOwn(l,s)}e.isKey=a})(hb)),hb}var fC;function AQ(){return fC||(fC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OQ(),r=EQ(),n=g1();function a(s,l,u,f){if(s==null)return[];u=f?void 0:u,Array.isArray(s)||(s=Object.values(s)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(v=>String(v));const h=(v,w)=>{let x=v;for(let _=0;_<w.length&&x!=null;++_)x=x[w[_]];return x},m=(v,w)=>w==null||v==null?w:typeof v=="object"&&"key"in v?Object.hasOwn(w,v.key)?w[v.key]:h(w,v.path):typeof v=="function"?v(w):Array.isArray(v)?h(w,v):typeof w=="object"?w[v]:w,g=l.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||r.isKey(v)?v:{key:v,path:n.toPath(v)}));return s.map(v=>({original:v,criteria:g.map(w=>m(w,v))})).slice().sort((v,w)=>{for(let x=0;x<g.length;x++){const _=t.compareValues(v.criteria[x],w.criteria[x],u[x]);if(_!==0)return _}return 0}).map(v=>v.original)}e.orderBy=a})(db)),db}var pb={},hC;function CQ(){return hC||(hC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],s=Math.floor(n),l=(u,f)=>{for(let h=0;h<u.length;h++){const m=u[h];Array.isArray(m)&&f<s?l(m,f+1):a.push(m)}};return l(r,0),a}e.flatten=t})(pb)),pb}var gb={},mC;function DM(){return mC||(mC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CM(),r=x1(),n=SM(),a=NM();function s(l,u,f){return n.isObject(f)&&(typeof u=="number"&&r.isArrayLike(f)&&t.isIndex(u)&&u<f.length||typeof u=="string"&&u in f)?a.isEqualsSameValueZero(f[u],l):!1}e.isIterateeCall=s})(gb)),gb}var pC;function kQ(){return pC||(pC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AQ(),r=CQ(),n=DM();function a(s,...l){const u=l.length;return u>1&&n.isIterateeCall(s,l[0],l[1])?l=[]:u>2&&n.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(s,r.flatten(l),["asc"])}e.sortBy=a})(ub)),ub}var yb,gC;function PQ(){return gC||(gC=1,yb=kQ().sortBy),yb}var TQ=PQ();const tg=Wa(TQ);var MM=e=>e.legend.settings,DQ=e=>e.legend.size,MQ=e=>e.legend.payload,RQ=W([MQ,MM],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?tg(n,r):n});function IQ(){return Ce(RQ)}var im=1;function RM(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=j.useState({height:0,left:0,top:0,width:0}),n=j.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),l={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(l.height-t.height)>im||Math.abs(l.left-t.left)>im||Math.abs(l.top-t.top)>im||Math.abs(l.width-t.width)>im)&&r({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Qr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var LQ=typeof Symbol=="function"&&Symbol.observable||"@@observable",yC=LQ,vb=()=>Math.random().toString(36).substring(7).split("").join("."),BQ={INIT:`@@redux/INIT${vb()}`,REPLACE:`@@redux/REPLACE${vb()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${vb()}`},qm=BQ;function S1(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function IM(e,t,r){if(typeof e!="function")throw new Error(Qr(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Qr(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Qr(1));return r(IM)(e,t)}let n=e,a=t,s=new Map,l=s,u=0,f=!1;function h(){l===s&&(l=new Map,s.forEach((_,N)=>{l.set(N,_)}))}function m(){if(f)throw new Error(Qr(3));return a}function g(_){if(typeof _!="function")throw new Error(Qr(4));if(f)throw new Error(Qr(5));let N=!0;h();const O=u++;return l.set(O,_),function(){if(N){if(f)throw new Error(Qr(6));N=!1,h(),l.delete(O),s=null}}}function y(_){if(!S1(_))throw new Error(Qr(7));if(typeof _.type>"u")throw new Error(Qr(8));if(typeof _.type!="string")throw new Error(Qr(17));if(f)throw new Error(Qr(9));try{f=!0,a=n(a,_)}finally{f=!1}return(s=l).forEach(O=>{O()}),_}function v(_){if(typeof _!="function")throw new Error(Qr(10));n=_,y({type:qm.REPLACE})}function w(){const _=g;return{subscribe(N){if(typeof N!="object"||N===null)throw new Error(Qr(11));function O(){const C=N;C.next&&C.next(m())}return O(),{unsubscribe:_(O)}},[yC](){return this}}}return y({type:qm.INIT}),{dispatch:y,subscribe:g,getState:m,replaceReducer:v,[yC]:w}}function $Q(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:qm.INIT})>"u")throw new Error(Qr(12));if(typeof r(void 0,{type:qm.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Qr(13))})}function LM(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const l=t[s];typeof e[l]=="function"&&(r[l]=e[l])}const n=Object.keys(r);let a;try{$Q(r)}catch(s){a=s}return function(l={},u){if(a)throw a;let f=!1;const h={};for(let m=0;m<n.length;m++){const g=n[m],y=r[g],v=l[g],w=y(v,u);if(typeof w>"u")throw u&&u.type,new Error(Qr(14));h[g]=w,f=f||w!==v}return f=f||n.length!==Object.keys(l).length,f?h:l}}function Fm(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function UQ(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(Qr(15))};const l={getState:a.getState,dispatch:(f,...h)=>s(f,...h)},u=e.map(f=>f(l));return s=Fm(...u)(a.dispatch),{...a,dispatch:s}}}function BM(e){return S1(e)&&"type"in e&&typeof e.type=="string"}var $M=Symbol.for("immer-nothing"),vC=Symbol.for("immer-draftable"),dn=Symbol.for("immer-state");function Sa(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ln=Object,Lc=Ln.getPrototypeOf,Km="constructor",rg="prototype",zx="configurable",Qm="enumerable",_m="writable",Td="value",Di=e=>!!e&&!!e[dn];function Ea(e){var t;return e?UM(e)||ag(e)||!!e[vC]||!!((t=e[Km])!=null&&t[vC])||ig(e)||sg(e):!1}var zQ=Ln[rg][Km].toString(),bC=new WeakMap;function UM(e){if(!e||!_1(e))return!1;const t=Lc(e);if(t===null||t===Ln[rg])return!0;const r=Ln.hasOwnProperty.call(t,Km)&&t[Km];if(r===Object)return!0;if(!dc(r))return!1;let n=bC.get(r);return n===void 0&&(n=Function.toString.call(r),bC.set(r,n)),n===zQ}function ng(e,t,r=!0){hf(e)===0?(r?Reflect.ownKeys(e):Ln.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function hf(e){const t=e[dn];return t?t.type_:ag(e)?1:ig(e)?2:sg(e)?3:0}var xC=(e,t,r=hf(e))=>r===2?e.has(t):Ln[rg].hasOwnProperty.call(e,t),qx=(e,t,r=hf(e))=>r===2?e.get(t):e[t],Hm=(e,t,r,n=hf(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function qQ(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var ag=Array.isArray,ig=e=>e instanceof Map,sg=e=>e instanceof Set,_1=e=>typeof e=="object",dc=e=>typeof e=="function",bb=e=>typeof e=="boolean";function FQ(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var bi=e=>e.copy_||e.base_,N1=e=>e.modified_?e.copy_:e.base_;function Fx(e,t){if(ig(e))return new Map(e);if(sg(e))return new Set(e);if(ag(e))return Array[rg].slice.call(e);const r=UM(e);if(t===!0||t==="class_only"&&!r){const n=Ln.getOwnPropertyDescriptors(e);delete n[dn];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const l=a[s],u=n[l];u[_m]===!1&&(u[_m]=!0,u[zx]=!0),(u.get||u.set)&&(n[l]={[zx]:!0,[_m]:!0,[Qm]:u[Qm],[Td]:e[l]})}return Ln.create(Lc(e),n)}else{const n=Lc(e);if(n!==null&&r)return{...e};const a=Ln.create(n);return Ln.assign(a,e)}}function O1(e,t=!1){return og(e)||Di(e)||!Ea(e)||(hf(e)>1&&Ln.defineProperties(e,{set:sm,add:sm,clear:sm,delete:sm}),Ln.freeze(e),t&&ng(e,(r,n)=>{O1(n,!0)},!1)),e}function KQ(){Sa(2)}var sm={[Td]:KQ};function og(e){return e===null||!_1(e)?!0:Ln.isFrozen(e)}var Vm="MapSet",Kx="Patches",wC="ArrayMethods",zM={};function Xo(e){const t=zM[e];return t||Sa(0,e),t}var jC=e=>!!zM[e],Dd,qM=()=>Dd,QQ=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:jC(Vm)?Xo(Vm):void 0,arrayMethodsPlugin_:jC(wC)?Xo(wC):void 0});function SC(e,t){t&&(e.patchPlugin_=Xo(Kx),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Qx(e){Hx(e),e.drafts_.forEach(HQ),e.drafts_=null}function Hx(e){e===Dd&&(Dd=e.parent_)}var _C=e=>Dd=QQ(Dd,e);function HQ(e){const t=e[dn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function NC(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[dn].modified_&&(Qx(t),Sa(4)),Ea(e)&&(e=OC(t,e));const{patchPlugin_:a}=t;a&&a.generateReplacementPatches_(r[dn].base_,e,t)}else e=OC(t,r);return VQ(t,e,!0),Qx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==$M?e:void 0}function OC(e,t){if(og(t))return t;const r=t[dn];if(!r)return Gm(t,e.handledSet_,e);if(!lg(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);QM(r,e)}return r.copy_}function VQ(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&O1(t,r)}function FM(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var lg=(e,t)=>e.scope_===t,GQ=[];function KM(e,t,r,n){const a=bi(e),s=e.type_;if(n!==void 0&&qx(a,n,s)===t){Hm(a,n,r,s);return}if(!e.draftLocations_){const u=e.draftLocations_=new Map;ng(a,(f,h)=>{if(Di(h)){const m=u.get(h)||[];m.push(f),u.set(h,m)}})}const l=e.draftLocations_.get(t)??GQ;for(const u of l)Hm(a,u,r,s)}function WQ(e,t,r){e.callbacks_.push(function(a){var u;const s=t;if(!s||!lg(s,a))return;(u=a.mapSetPlugin_)==null||u.fixSetContents(s);const l=N1(s);KM(e,s.draft_??s,l,r),QM(s,a)})}function QM(e,t){var n;if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(((n=e.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:a}=t;if(a){const s=a.getPath(e);s&&a.generatePatches_(e,s,t)}FM(e)}}function YQ(e,t,r){const{scope_:n}=e;if(Di(r)){const a=r[dn];lg(a,n)&&a.callbacks_.push(function(){Nm(e);const l=N1(a);KM(e,r,l,t)})}else Ea(r)&&e.callbacks_.push(function(){const s=bi(e);e.type_===3?s.has(r)&&Gm(r,n.handledSet_,n):qx(s,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Gm(qx(e.copy_,t,e.type_),n.handledSet_,n)})}function Gm(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||Di(e)||t.has(e)||!Ea(e)||og(e)||(t.add(e),ng(e,(n,a)=>{if(Di(a)){const s=a[dn];if(lg(s,r)){const l=N1(s);Hm(e,n,l,e.type_),FM(s)}}else Ea(a)&&Gm(a,t,r)})),e}function XQ(e,t){const r=ag(e),n={type_:r?1:0,scope_:t?t.scope_:qM(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,s=Wm;r&&(a=[n],s=Md);const{revoke:l,proxy:u}=Proxy.revocable(a,s);return n.draft_=u,n.revoke_=l,[u,n]}var Wm={get(e,t){if(t===dn)return e;let r=e.scope_.arrayMethodsPlugin_;const n=e.type_===1&&typeof t=="string";if(n&&r!=null&&r.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);const a=bi(e);if(!xC(a,t,e.type_))return JQ(e,a,t);const s=a[t];if(e.finalized_||!Ea(s)||n&&e.operationMethod&&(r!=null&&r.isMutatingArrayMethod(e.operationMethod))&&FQ(t))return s;if(s===xb(e.base_,t)){Nm(e);const l=e.type_===1?+t:t,u=Gx(e.scope_,s,e,l);return e.copy_[l]=u}return s},has(e,t){return t in bi(e)},ownKeys(e){return Reflect.ownKeys(bi(e))},set(e,t,r){const n=HM(bi(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=xb(bi(e),t),s=a==null?void 0:a[dn];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(qQ(r,a)&&(r!==void 0||xC(e.base_,t,e.type_)))return!0;Nm(e),Vx(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),YQ(e,t,r)),!0},deleteProperty(e,t){return Nm(e),xb(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Vx(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=bi(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[_m]:!0,[zx]:e.type_!==1||t!=="length",[Qm]:n[Qm],[Td]:r[t]}},defineProperty(){Sa(11)},getPrototypeOf(e){return Lc(e.base_)},setPrototypeOf(){Sa(12)}},Md={};for(let e in Wm){let t=Wm[e];Md[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}}Md.deleteProperty=function(e,t){return Md.set.call(this,e,t,void 0)};Md.set=function(e,t,r){return Wm.set.call(this,e[0],t,r,e[0])};function xb(e,t){const r=e[dn];return(r?bi(r):e)[t]}function JQ(e,t,r){var a;const n=HM(t,r);return n?Td in n?n[Td]:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function HM(e,t){if(!(t in e))return;let r=Lc(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Lc(r)}}function Vx(e){e.modified_||(e.modified_=!0,e.parent_&&Vx(e.parent_))}function Nm(e){e.copy_||(e.assigned_=new Map,e.copy_=Fx(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var ZQ=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,a)=>{if(dc(r)&&!dc(n)){const l=n;n=r;const u=this;return function(h=l,...m){return u.produce(h,g=>n.call(this,g,...m))}}dc(n)||Sa(6),a!==void 0&&!dc(a)&&Sa(7);let s;if(Ea(r)){const l=_C(this),u=Gx(l,r,void 0);let f=!0;try{s=n(u),f=!1}finally{f?Qx(l):Hx(l)}return SC(l,a),NC(s,l)}else if(!r||!_1(r)){if(s=n(r),s===void 0&&(s=r),s===$M&&(s=void 0),this.autoFreeze_&&O1(s,!0),a){const l=[],u=[];Xo(Kx).generateReplacementPatches_(r,s,{patches_:l,inversePatches_:u}),a(l,u)}return s}else Sa(1,r)},this.produceWithPatches=(r,n)=>{if(dc(r))return(u,...f)=>this.produceWithPatches(u,h=>r(h,...f));let a,s;return[this.produce(r,n,(u,f)=>{a=u,s=f}),a,s]},bb(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),bb(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),bb(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Ea(t)||Sa(8),Di(t)&&(t=Oa(t));const r=_C(this),n=Gx(r,t,void 0);return n[dn].isManual_=!0,Hx(r),n}finishDraft(t,r){const n=t&&t[dn];(!n||!n.isManual_)&&Sa(9);const{scope_:a}=n;return SC(a,r),NC(void 0,a)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(r=r.slice(n+1));const a=Xo(Kx).applyPatches_;return Di(t)?a(t,r):this.produce(t,s=>a(s,r))}};function Gx(e,t,r,n){const[a,s]=ig(t)?Xo(Vm).proxyMap_(t,r):sg(t)?Xo(Vm).proxySet_(t,r):XQ(t,r);return((r==null?void 0:r.scope_)??qM()).drafts_.push(a),s.callbacks_=(r==null?void 0:r.callbacks_)??[],s.key_=n,r&&n!==void 0?WQ(r,s,n):s.callbacks_.push(function(f){var m;(m=f.mapSetPlugin_)==null||m.fixSetContents(s);const{patchPlugin_:h}=f;s.modified_&&h&&h.generatePatches_(s,[],f)}),a}function Oa(e){return Di(e)||Sa(10,e),VM(e)}function VM(e){if(!Ea(e)||og(e))return e;const t=e[dn];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Fx(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Fx(e,!0);return ng(r,(a,s)=>{Hm(r,a,VM(s))},n),t&&(t.finalized_=!1),r}var e7=new ZQ,GM=e7.produce;function WM(e){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,e):a(s)}var t7=WM(),r7=WM,n7=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Fm:Fm.apply(null,arguments)};function ca(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error($n(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>BM(n)&&n.type===e,r}var YM=class md extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,md.prototype)}static get[Symbol.species](){return md}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new md(...t[0].concat(this)):new md(...t.concat(this))}};function EC(e){return Ea(e)?GM(e,()=>{}):e}function om(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function a7(e){return typeof e=="boolean"}var i7=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let l=new YM;return r&&(a7(r)?l.push(t7):l.push(r7(r.extraArgument))),l},XM="RTK_autoBatch",Ht=()=>e=>({payload:e,meta:{[XM]:!0}}),AC=e=>t=>{setTimeout(t,e)},JM=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,l=!1;const u=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:AC(10):e.type==="callback"?e.queueNotification:AC(e.timeout),h=()=>{l=!1,s&&(s=!1,u.forEach(m=>m()))};return Object.assign({},n,{subscribe(m){const g=()=>a&&m(),y=n.subscribe(g);return u.add(m),()=>{y(),u.delete(m)}},dispatch(m){var g;try{return a=!((g=m==null?void 0:m.meta)!=null&&g[XM]),s=!a,s&&(l||(l=!0,f(h))),n.dispatch(m)}finally{a=!0}}})},s7=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new YM(e);return n&&a.push(JM(typeof n=="object"?n:void 0)),a};function o7(e){const t=i7(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:l=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(S1(r))u=LM(r);else throw new Error($n(1));let f;typeof n=="function"?f=n(t):f=t();let h=Fm;a&&(h=n7({trace:!1,...typeof a=="object"&&a}));const m=UQ(...f),g=s7(m);let y=typeof l=="function"?l(g):g();const v=h(...y);return IM(u,s,v)}function ZM(e){const t={},r=[];let n;const a={addCase(s,l){const u=typeof s=="string"?s:s.type;if(!u)throw new Error($n(28));if(u in t)throw new Error($n(29));return t[u]=l,a},addAsyncThunk(s,l){return l.pending&&(t[s.pending.type]=l.pending),l.rejected&&(t[s.rejected.type]=l.rejected),l.fulfilled&&(t[s.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:s.settled,reducer:l.settled}),a},addMatcher(s,l){return r.push({matcher:s,reducer:l}),a},addDefaultCase(s){return n=s,a}};return e(a),[t,r,n]}function l7(e){return typeof e=="function"}function c7(e,t){let[r,n,a]=ZM(t),s;if(l7(e))s=()=>EC(e());else{const u=EC(e);s=()=>u}function l(u=s(),f){let h=[r[f.type],...n.filter(({matcher:m})=>m(f)).map(({reducer:m})=>m)];return h.filter(m=>!!m).length===0&&(h=[a]),h.reduce((m,g)=>{if(g)if(Di(m)){const v=g(m,f);return v===void 0?m:v}else{if(Ea(m))return GM(m,y=>g(y,f));{const y=g(m,f);if(y===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return m},u)}return l.getInitialState=s,l}var u7="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",d7=(e=21)=>{let t="",r=e;for(;r--;)t+=u7[Math.random()*64|0];return t},f7=Symbol.for("rtk-slice-createasyncthunk");function h7(e,t){return`${e}/${t}`}function m7({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[f7];return function(a){const{name:s,reducerPath:l=s}=a;if(!s)throw new Error($n(11));const u=(typeof a.reducers=="function"?a.reducers(g7()):a.reducers)||{},f=Object.keys(u),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(C,T){const k=typeof C=="string"?C:C.type;if(!k)throw new Error($n(12));if(k in h.sliceCaseReducersByType)throw new Error($n(13));return h.sliceCaseReducersByType[k]=T,m},addMatcher(C,T){return h.sliceMatchers.push({matcher:C,reducer:T}),m},exposeAction(C,T){return h.actionCreators[C]=T,m},exposeCaseReducer(C,T){return h.sliceCaseReducersByName[C]=T,m}};f.forEach(C=>{const T=u[C],k={reducerName:C,type:h7(s,C),createNotation:typeof a.reducers=="function"};v7(T)?x7(k,T,m,t):y7(k,T,m)});function g(){const[C={},T=[],k=void 0]=typeof a.extraReducers=="function"?ZM(a.extraReducers):[a.extraReducers],M={...C,...h.sliceCaseReducersByType};return c7(a.initialState,R=>{for(let L in M)R.addCase(L,M[L]);for(let L of h.sliceMatchers)R.addMatcher(L.matcher,L.reducer);for(let L of T)R.addMatcher(L.matcher,L.reducer);k&&R.addDefaultCase(k)})}const y=C=>C,v=new Map,w=new WeakMap;let x;function _(C,T){return x||(x=g()),x(C,T)}function N(){return x||(x=g()),x.getInitialState()}function O(C,T=!1){function k(R){let L=R[C];return typeof L>"u"&&T&&(L=om(w,k,N)),L}function M(R=y){const L=om(v,T,()=>new WeakMap);return om(L,R,()=>{const V={};for(const[G,K]of Object.entries(a.selectors??{}))V[G]=p7(K,R,()=>om(w,R,N),T);return V})}return{reducerPath:C,getSelectors:M,get selectors(){return M(k)},selectSlice:k}}const E={name:s,reducer:_,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:N,...O(l),injectInto(C,{reducerPath:T,...k}={}){const M=T??l;return C.inject({reducerPath:M,reducer:_},k),{...E,...O(M,!0)}}};return E}}function p7(e,t,r,n){function a(s,...l){let u=t(s);return typeof u>"u"&&n&&(u=r()),e(u,...l)}return a.unwrapped=e,a}var Nn=m7();function g7(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function y7({type:e,reducerName:t,createNotation:r},n,a){let s,l;if("reducer"in n){if(r&&!b7(n))throw new Error($n(17));s=n.reducer,l=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,l?ca(e,l):ca(e))}function v7(e){return e._reducerDefinitionType==="asyncThunk"}function b7(e){return e._reducerDefinitionType==="reducerWithPrepare"}function x7({type:e,reducerName:t},r,n,a){if(!a)throw new Error($n(18));const{payloadCreator:s,fulfilled:l,pending:u,rejected:f,settled:h,options:m}=r,g=a(e,s,m);n.exposeAction(t,g),l&&n.addCase(g.fulfilled,l),u&&n.addCase(g.pending,u),f&&n.addCase(g.rejected,f),h&&n.addMatcher(g.settled,h),n.exposeCaseReducer(t,{fulfilled:l||lm,pending:u||lm,rejected:f||lm,settled:h||lm})}function lm(){}var w7="task",eR="listener",tR="completed",E1="cancelled",j7=`task-${E1}`,S7=`task-${tR}`,Wx=`${eR}-${E1}`,_7=`${eR}-${tR}`,cg=class{constructor(e){n0(this,"name","TaskAbortError");n0(this,"message");this.code=e,this.message=`${w7} ${E1} (reason: ${e})`}},A1=(e,t)=>{if(typeof e!="function")throw new TypeError($n(32))},Ym=()=>{},rR=(e,t=Ym)=>(e.catch(t),e),nR=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),qo=e=>{if(e.aborted)throw new cg(e.reason)};function aR(e,t){let r=Ym;return new Promise((n,a)=>{const s=()=>a(new cg(e.reason));if(e.aborted){s();return}r=nR(e,s),t.finally(()=>r()).then(n,a)}).finally(()=>{r=Ym})}var N7=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof cg?"cancelled":"rejected",error:r}}finally{t==null||t()}},Xm=e=>t=>rR(aR(e,t).then(r=>(qo(e),r))),iR=e=>{const t=Xm(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:gc}=Object,CC={},ug="listenerMiddleware",O7=(e,t)=>{const r=n=>nR(e,()=>n.abort(e.reason));return(n,a)=>{A1(n);const s=new AbortController;r(s);const l=N7(async()=>{qo(e),qo(s.signal);const u=await n({pause:Xm(s.signal),delay:iR(s.signal),signal:s.signal});return qo(s.signal),u},()=>s.abort(S7));return a!=null&&a.autoJoin&&t.push(l.catch(Ym)),{result:Xm(e)(l),cancel(){s.abort(j7)}}}},E7=(e,t)=>{const r=async(n,a)=>{qo(t);let s=()=>{};const u=[new Promise((f,h)=>{let m=e({predicate:n,effect:(g,y)=>{y.unsubscribe(),f([g,y.getState(),y.getOriginalState()])}});s=()=>{m(),h()}})];a!=null&&u.push(new Promise(f=>setTimeout(f,a,null)));try{const f=await aR(t,Promise.race(u));return qo(t),f}finally{s()}};return(n,a)=>rR(r(n,a))},sR=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=ca(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error($n(21));return A1(s),{predicate:a,type:t,effect:s}},oR=gc(e=>{const{type:t,predicate:r,effect:n}=sR(e);return{id:d7(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error($n(22))}}},{withTypes:()=>oR}),kC=(e,t)=>{const{type:r,effect:n,predicate:a}=sR(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},Yx=e=>{e.pending.forEach(t=>{t.abort(Wx)})},A7=(e,t)=>()=>{for(const r of t.keys())Yx(r);e.clear()},PC=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},lR=gc(ca(`${ug}/add`),{withTypes:()=>lR}),C7=ca(`${ug}/removeAll`),cR=gc(ca(`${ug}/remove`),{withTypes:()=>cR}),k7=(...e)=>{console.error(`${ug}/error`,...e)},mf=(e={})=>{const t=new Map,r=new Map,n=v=>{const w=r.get(v)??0;r.set(v,w+1)},a=v=>{const w=r.get(v)??1;w===1?r.delete(v):r.set(v,w-1)},{extra:s,onError:l=k7}=e;A1(l);const u=v=>(v.unsubscribe=()=>t.delete(v.id),t.set(v.id,v),w=>{v.unsubscribe(),w!=null&&w.cancelActive&&Yx(v)}),f=v=>{const w=kC(t,v)??oR(v);return u(w)};gc(f,{withTypes:()=>f});const h=v=>{const w=kC(t,v);return w&&(w.unsubscribe(),v.cancelActive&&Yx(w)),!!w};gc(h,{withTypes:()=>h});const m=async(v,w,x,_)=>{const N=new AbortController,O=E7(f,N.signal),E=[];try{v.pending.add(N),n(v),await Promise.resolve(v.effect(w,gc({},x,{getOriginalState:_,condition:(C,T)=>O(C,T).then(Boolean),take:O,delay:iR(N.signal),pause:Xm(N.signal),extra:s,signal:N.signal,fork:O7(N.signal,E),unsubscribe:v.unsubscribe,subscribe:()=>{t.set(v.id,v)},cancelActiveListeners:()=>{v.pending.forEach((C,T,k)=>{C!==N&&(C.abort(Wx),k.delete(C))})},cancel:()=>{N.abort(Wx),v.pending.delete(N)},throwIfCancelled:()=>{qo(N.signal)}})))}catch(C){C instanceof cg||PC(l,C,{raisedBy:"effect"})}finally{await Promise.all(E),N.abort(_7),a(v),v.pending.delete(N)}},g=A7(t,r);return{middleware:v=>w=>x=>{if(!BM(x))return w(x);if(lR.match(x))return f(x.payload);if(C7.match(x)){g();return}if(cR.match(x))return h(x.payload);let _=v.getState();const N=()=>{if(_===CC)throw new Error($n(23));return _};let O;try{if(O=w(x),t.size>0){const E=v.getState(),C=Array.from(t.values());for(const T of C){let k=!1;try{k=T.predicate(x,E,_)}catch(M){k=!1,PC(l,M,{raisedBy:"predicate"})}k&&m(T,x,v,N)}}}finally{_=CC}return O},startListening:f,stopListening:h,clearListeners:g}};function $n(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var P7={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},uR=Nn({name:"chartLayout",initialState:P7,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,a,s;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(a=t.payload.bottom)!==null&&a!==void 0?a:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:T7,setLayout:D7,setChartSize:M7,setScale:R7}=uR.actions,I7=uR.reducer;function dR(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function lt(e){return Number.isFinite(e)}function Va(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function TC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TC(Object(r),!0).forEach(function(n){L7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function L7(e,t,r){return(t=B7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B7(e){var t=$7(e,"string");return typeof t=="symbol"?t:t+""}function $7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kt(e,t,r){return Xt(e)||Xt(t)?r:Ha(t)?Wo(e,t,r):typeof t=="function"?t(e):r}var U7=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&s!=="center"&&Ne(e[s]))return hc(hc({},e),{},{[s]:e[s]+(n||0)});if((u==="horizontal"||u==="vertical"&&s==="center")&&l!=="middle"&&Ne(e[l]))return hc(hc({},e),{},{[l]:e[l]+(a||0)})}return e},qi=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",fR=(e,t,r,n)=>{if(n)return e.map(u=>u.coordinate);var a,s,l=e.map(u=>(u.coordinate===t&&(a=!0),u.coordinate===r&&(s=!0),u.coordinate));return a||l.push(t),s||l.push(r),l},hR=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:l,realScaleType:u,isCategorical:f,categoricalDomain:h,tickCount:m,ticks:g,niceTicks:y,axisType:v}=e;if(!l)return null;var w=u==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,x=a==="category"&&l.bandwidth?l.bandwidth()/w:0;if(x=v==="angleAxis"&&s&&s.length>=2?Dr(s[0]-s[1])*2*x:x,g||y){var _=(g||y||[]).map((N,O)=>{var E=n?n.indexOf(N):N,C=l.map(E);return lt(C)?{coordinate:C+x,value:N,offset:x,index:O}:null}).filter(jn);return _}return f&&h?h.map((N,O)=>{var E=l.map(N);return lt(E)?{coordinate:E+x,value:N,index:O,offset:x}:null}).filter(jn):l.ticks&&m!=null?l.ticks(m).map((N,O)=>{var E=l.map(N);return lt(E)?{coordinate:E+x,value:N,index:O,offset:x}:null}).filter(jn):l.domain().map((N,O)=>{var E=l.map(N);return lt(E)?{coordinate:E+x,value:n?n[N]:N,index:O,offset:x}:null}).filter(jn)},z7=(e,t)=>{if(!t||t.length!==2||!Ne(t[0])||!Ne(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!Ne(e[0])||e[0]<r)&&(a[0]=r),(!Ne(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},q7=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,l=0,u=0;u<r;++u){var f=e[u],h=f==null?void 0:f[a];if(h!=null){var m=h[1],g=h[0],y=Qa(m)?g:m;y>=0?(h[0]=s,s+=y,h[1]=s):(h[0]=l,l+=y,h[1]=l)}}}},F7=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,l=0;l<r;++l){var u=e[l],f=u==null?void 0:u[a];if(f!=null){var h=Qa(f[1])?f[0]:f[1];h>=0?(f[0]=s,s+=h,f[1]=s):(f[0]=0,f[1]=0)}}}},K7={sign:q7,expand:uK,none:Go,silhouette:dK,wiggle:fK,positive:F7},Q7=(e,t,r)=>{var n,a=(n=K7[r])!==null&&n!==void 0?n:Go,s=cK().keys(t).value((u,f)=>Number(kt(u,f,0))).order($x).offset(a),l=s(e);return l.forEach((u,f)=>{u.forEach((h,m)=>{var g=kt(e[m],t[f],0);Array.isArray(g)&&g.length===2&&Ne(g[0])&&Ne(g[1])&&(h[0]=g[0],h[1]=g[1])})}),l};function H7(e){return e==null?void 0:String(e)}function DC(e){var{axis:t,ticks:r,bandSize:n,entry:a,index:s,dataKey:l}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Xt(a[t.dataKey])){var u=bM(r,"value",a[t.dataKey]);if(u)return u.coordinate+n/2}return r!=null&&r[s]?r[s].coordinate+n/2:null}var f=kt(a,Xt(l)?t.dataKey:l),h=t.scale.map(f);return Ne(h)?h:null}var MC=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:l}=e;if(t.type==="category")return r[l]?r[l].coordinate+n:null;var u=kt(s,t.dataKey,t.scale.domain()[l]);if(Xt(u))return null;var f=t.scale.map(u);return Ne(f)?f-a/2+n:null},V7=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},G7=e=>{var t=e.flat(2).filter(Ne);return[Math.min(...t),Math.max(...t)]},W7=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],Y7=(e,t,r)=>{if(e!=null)return W7(Object.keys(e).reduce((n,a)=>{var s=e[a];if(!s)return n;var{stackedData:l}=s,u=l.reduce((f,h)=>{var m=dR(h,t,r),g=G7(m);return!lt(g[0])||!lt(g[1])?f:[Math.min(f[0],g[0]),Math.max(f[1],g[1])]},[1/0,-1/0]);return[Math.min(u[0],n[0]),Math.max(u[1],n[1])]},[1/0,-1/0]))},RC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,IC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Bc=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=tg(t,m=>m.coordinate),s=1/0,l=1,u=a.length;l<u;l++){var f=a[l],h=a[l-1];s=Math.min(((f==null?void 0:f.coordinate)||0)-((h==null?void 0:h.coordinate)||0),s)}return s===1/0?0:s}return r?void 0:0};function LC(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return hc(hc({},t),{},{dataKey:r,payload:n,value:a,name:s})}function Yc(e,t){if(e)return String(e);if(typeof t=="string")return t}var X7=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},J7=(e,t)=>t==="centric"?e.angle:e.radius,Fi=e=>e.layout.width,Ki=e=>e.layout.height,Z7=e=>e.layout.scale,mR=e=>e.layout.margin,dg=W(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),fg=W(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),pR="data-recharts-item-index",gR="data-recharts-item-id",pf=60;function BC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BC(Object(r),!0).forEach(function(n){eH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eH(e,t,r){return(t=tH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tH(e){var t=rH(e,"string");return typeof t=="symbol"?t:t+""}function rH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nH=e=>e.brush.height;function aH(e){var t=fg(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:pf;return r+a}return r},0)}function iH(e){var t=fg(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:pf;return r+a}return r},0)}function sH(e){var t=dg(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function oH(e){var t=dg(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var _r=W([Fi,Ki,mR,nH,aH,iH,sH,oH,MM,DQ],(e,t,r,n,a,s,l,u,f,h)=>{var m={left:(r.left||0)+a,right:(r.right||0)+s},g={top:(r.top||0)+l,bottom:(r.bottom||0)+u},y=cm(cm({},g),m),v=y.bottom;y.bottom+=n,y=U7(y,f,h);var w=e-y.left-y.right,x=t-y.top-y.bottom;return cm(cm({brushBottom:v},y),{},{width:Math.max(w,0),height:Math.max(x,0)})}),lH=W(_r,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),C1=W(Fi,Ki,(e,t)=>({x:0,y:0,width:e,height:t})),cH=j.createContext(null),en=()=>j.useContext(cH)!=null,hg=e=>e.brush,mg=W([hg,_r,mR],(e,t,r)=>({height:e.height,x:Ne(e.x)?e.x:t.left,y:Ne(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Ne(e.width)?e.width:t.width})),wb={},jb={},Sb={},$C;function uH(){return $C||($C=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:s}={}){let l,u=null;const f=s!=null&&s.includes("leading"),h=s==null||s.includes("trailing"),m=()=>{u!==null&&(r.apply(l,u),l=void 0,u=null)},g=()=>{h&&m(),x()};let y=null;const v=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,g()},n)},w=()=>{y!==null&&(clearTimeout(y),y=null)},x=()=>{w(),l=void 0,u=null},_=()=>{m()},N=function(...O){if(a!=null&&a.aborted)return;l=this,u=O;const E=y==null;v(),f&&E&&m()};return N.schedule=v,N.cancel=x,N.flush=_,a==null||a.addEventListener("abort",x,{once:!0}),N}e.debounce=t})(Sb)),Sb}var UC;function dH(){return UC||(UC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uH();function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:l=!1,trailing:u=!0,maxWait:f}=s,h=Array(2);l&&(h[0]="leading"),u&&(h[1]="trailing");let m,g=null;const y=t.debounce(function(...x){m=n.apply(this,x),g=null},a,{edges:h}),v=function(...x){return f!=null&&(g===null&&(g=Date.now()),Date.now()-g>=f)?(m=n.apply(this,x),g=Date.now(),y.cancel(),y.schedule(),m):(y.apply(this,x),m)},w=()=>(y.flush(),m);return v.cancel=y.cancel,v.flush=w,v}e.debounce=r})(jb)),jb}var zC;function fH(){return zC||(zC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dH();function r(n,a=0,s={}){const{leading:l=!0,trailing:u=!0}=s;return t.debounce(n,a,{leading:l,maxWait:a,trailing:u})}e.throttle=r})(wb)),wb}var _b,qC;function hH(){return qC||(qC=1,_b=fH().throttle),_b}var mH=hH();const pH=Wa(mH);var Jm=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=0;console.warn(r.replace(/%s/g,()=>a[l++]))}},qa={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},yR=(e,t,r)=>{var{width:n=qa.width,height:a=qa.height,aspect:s,maxHeight:l}=r,u=Yo(n)?e:Number(n),f=Yo(a)?t:Number(a);return s&&s>0&&(u?f=u/s:f&&(u=f*s),l&&f!=null&&f>l&&(f=l)),{calculatedWidth:u,calculatedHeight:f}},gH={width:0,height:0,overflow:"visible"},yH={width:0,overflowX:"visible"},vH={height:0,overflowY:"visible"},bH={},xH=e=>{var{width:t,height:r}=e,n=Yo(t),a=Yo(r);return n&&a?gH:n?yH:a?vH:bH};function wH(e){var{width:t,height:r,aspect:n}=e,a=t,s=r;return a===void 0&&s===void 0?(a=qa.width,s=qa.height):a===void 0?a=n&&n>0?void 0:qa.width:s===void 0&&(s=n&&n>0?void 0:qa.height),{width:a,height:s}}function Xx(){return Xx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xx.apply(null,arguments)}function FC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function KC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FC(Object(r),!0).forEach(function(n){jH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jH(e,t,r){return(t=SH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SH(e){var t=_H(e,"string");return typeof t=="symbol"?t:t+""}function _H(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vR=j.createContext(qa.initialDimension);function NH(e){return Va(e.width)&&Va(e.height)}function bR(e){var{children:t,width:r,height:n}=e,a=j.useMemo(()=>({width:r,height:n}),[r,n]);return NH(a)?j.createElement(vR.Provider,{value:a},t):null}var k1=()=>j.useContext(vR),OH=j.forwardRef((e,t)=>{var{aspect:r,initialDimension:n=qa.initialDimension,width:a,height:s,minWidth:l=qa.minWidth,minHeight:u,maxHeight:f,children:h,debounce:m=qa.debounce,id:g,className:y,onResize:v,style:w={}}=e,x=j.useRef(null),_=j.useRef();_.current=v,j.useImperativeHandle(t,()=>x.current);var[N,O]=j.useState({containerWidth:n.width,containerHeight:n.height}),E=j.useCallback((R,L)=>{O(V=>{var G=Math.round(R),K=Math.round(L);return V.containerWidth===G&&V.containerHeight===K?V:{containerWidth:G,containerHeight:K}})},[]);j.useEffect(()=>{if(x.current==null||typeof ResizeObserver>"u")return sl;var R=K=>{var fe,ge=K[0];if(ge!=null){var{width:he,height:B}=ge.contentRect;E(he,B),(fe=_.current)===null||fe===void 0||fe.call(_,he,B)}};m>0&&(R=pH(R,m,{trailing:!0,leading:!1}));var L=new ResizeObserver(R),{width:V,height:G}=x.current.getBoundingClientRect();return E(V,G),L.observe(x.current),()=>{L.disconnect()}},[E,m]);var{containerWidth:C,containerHeight:T}=N;Jm(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:k,calculatedHeight:M}=yR(C,T,{width:a,height:s,aspect:r,maxHeight:f});return Jm(k!=null&&k>0||M!=null&&M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,k,M,a,s,l,u,r),j.createElement("div",{id:g?"".concat(g):void 0,className:ht("recharts-responsive-container",y),style:KC(KC({},w),{},{width:a,height:s,minWidth:l,minHeight:u,maxHeight:f}),ref:x},j.createElement("div",{style:xH({width:a,height:s})},j.createElement(bR,{width:k,height:M},h)))}),yc=j.forwardRef((e,t)=>{var r=k1();if(Va(r.width)&&Va(r.height))return e.children;var{width:n,height:a}=wH({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:s,calculatedHeight:l}=yR(void 0,void 0,{width:n,height:a,aspect:e.aspect,maxHeight:e.maxHeight});return Ne(s)&&Ne(l)?j.createElement(bR,{width:s,height:l},e.children):j.createElement(OH,Xx({},e,{width:n,height:a,ref:t}))});function P1(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var pg=()=>{var e,t=en(),r=Ce(lH),n=Ce(mg),a=(e=Ce(hg))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},EH={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},xR=()=>{var e;return(e=Ce(_r))!==null&&e!==void 0?e:EH},T1=()=>Ce(Fi),D1=()=>Ce(Ki),AH=()=>Ce(e=>e.layout.margin),pt=e=>e.layout.layoutType,ol=()=>Ce(pt),wR=()=>{var e=ol();if(e==="horizontal"||e==="vertical")return e},jR=e=>{var t=e.layout.layoutType;if(t==="centric"||t==="radial")return t},CH=()=>{var e=ol();return e!==void 0},gf=e=>{var t=Lt(),r=en(),{width:n,height:a}=e,s=k1(),l=n,u=a;return s&&(l=s.width>0?s.width:n,u=s.height>0?s.height:a),j.useEffect(()=>{!r&&Va(l)&&Va(u)&&t(M7({width:l,height:u}))},[t,r,l,u]),null},SR=Symbol.for("immer-nothing"),QC=Symbol.for("immer-draftable"),zn=Symbol.for("immer-state");function _a(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Rd=Object.getPrototypeOf;function $c(e){return!!e&&!!e[zn]}function Jo(e){var t;return e?_R(e)||Array.isArray(e)||!!e[QC]||!!((t=e.constructor)!=null&&t[QC])||yf(e)||yg(e):!1}var kH=Object.prototype.constructor.toString(),HC=new WeakMap;function _R(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=HC.get(r);return n===void 0&&(n=Function.toString.call(r),HC.set(r,n)),n===kH}function Zm(e,t,r=!0){gg(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function gg(e){const t=e[zn];return t?t.type_:Array.isArray(e)?1:yf(e)?2:yg(e)?3:0}function Jx(e,t){return gg(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function NR(e,t,r){const n=gg(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function PH(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function yf(e){return e instanceof Map}function yg(e){return e instanceof Set}function jo(e){return e.copy_||e.base_}function Zx(e,t){if(yf(e))return new Map(e);if(yg(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=_R(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[zn];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const l=a[s],u=n[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(Rd(e),n)}else{const n=Rd(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function M1(e,t=!1){return vg(e)||$c(e)||!Jo(e)||(gg(e)>1&&Object.defineProperties(e,{set:um,add:um,clear:um,delete:um}),Object.freeze(e),t&&Object.values(e).forEach(r=>M1(r,!0))),e}function TH(){_a(2)}var um={value:TH};function vg(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var DH={};function Zo(e){const t=DH[e];return t||_a(0,e),t}var Id;function OR(){return Id}function MH(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function VC(e,t){t&&(Zo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ew(e){tw(e),e.drafts_.forEach(RH),e.drafts_=null}function tw(e){e===Id&&(Id=e.parent_)}function GC(e){return Id=MH(Id,e)}function RH(e){const t=e[zn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function WC(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[zn].modified_&&(ew(t),_a(4)),Jo(e)&&(e=ep(t,e),t.parent_||tp(t,e)),t.patches_&&Zo("Patches").generateReplacementPatches_(r[zn].base_,e,t.patches_,t.inversePatches_)):e=ep(t,r,[]),ew(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==SR?e:void 0}function ep(e,t,r){if(vg(t))return t;const n=e.immer_.shouldUseStrictIteration(),a=t[zn];if(!a)return Zm(t,(s,l)=>YC(e,a,t,s,l,r),n),t;if(a.scope_!==e)return t;if(!a.modified_)return tp(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let l=s,u=!1;a.type_===3&&(l=new Set(s),s.clear(),u=!0),Zm(l,(f,h)=>YC(e,a,s,f,h,r,u),n),tp(e,s,!1),r&&e.patches_&&Zo("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function YC(e,t,r,n,a,s,l){if(a==null||typeof a!="object"&&!l)return;const u=vg(a);if(!(u&&!l)){if($c(a)){const f=s&&t&&t.type_!==3&&!Jx(t.assigned_,n)?s.concat(n):void 0,h=ep(e,a,f);if(NR(r,n,h),$c(h))e.canAutoFreeze_=!1;else return}else l&&r.add(a);if(Jo(a)&&!u){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===a&&u)return;ep(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(yf(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&tp(e,a)}}}function tp(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&M1(t,r)}function IH(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:OR(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=R1;r&&(a=[n],s=Ld);const{revoke:l,proxy:u}=Proxy.revocable(a,s);return n.draft_=u,n.revoke_=l,u}var R1={get(e,t){if(t===zn)return e;const r=jo(e);if(!Jx(r,t))return LH(e,r,t);const n=r[t];return e.finalized_||!Jo(n)?n:n===Nb(e.base_,t)?(Ob(e),e.copy_[t]=nw(n,e)):n},has(e,t){return t in jo(e)},ownKeys(e){return Reflect.ownKeys(jo(e))},set(e,t,r){const n=ER(jo(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=Nb(jo(e),t),s=a==null?void 0:a[zn];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(PH(r,a)&&(r!==void 0||Jx(e.base_,t)))return!0;Ob(e),rw(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Nb(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Ob(e),rw(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=jo(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){_a(11)},getPrototypeOf(e){return Rd(e.base_)},setPrototypeOf(){_a(12)}},Ld={};Zm(R1,(e,t)=>{Ld[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ld.deleteProperty=function(e,t){return Ld.set.call(this,e,t,void 0)};Ld.set=function(e,t,r){return R1.set.call(this,e[0],t,r,e[0])};function Nb(e,t){const r=e[zn];return(r?jo(r):e)[t]}function LH(e,t,r){var a;const n=ER(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function ER(e,t){if(!(t in e))return;let r=Rd(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Rd(r)}}function rw(e){e.modified_||(e.modified_=!0,e.parent_&&rw(e.parent_))}function Ob(e){e.copy_||(e.copy_=Zx(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var BH=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const l=this;return function(f=s,...h){return l.produce(f,m=>r.call(this,m,...h))}}typeof r!="function"&&_a(6),n!==void 0&&typeof n!="function"&&_a(7);let a;if(Jo(t)){const s=GC(this),l=nw(t,void 0);let u=!0;try{a=r(l),u=!1}finally{u?ew(s):tw(s)}return VC(s,n),WC(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===SR&&(a=void 0),this.autoFreeze_&&M1(a,!0),n){const s=[],l=[];Zo("Patches").generateReplacementPatches_(t,a,s,l),n(s,l)}return a}else _a(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,f=>t(f,...u));let n,a;return[this.produce(t,r,(l,u)=>{n=l,a=u}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Jo(e)||_a(8),$c(e)&&(e=$H(e));const t=GC(this),r=nw(e,void 0);return r[zn].isManual_=!0,tw(t),r}finishDraft(e,t){const r=e&&e[zn];(!r||!r.isManual_)&&_a(9);const{scope_:n}=r;return VC(n,t),WC(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=Zo("Patches").applyPatches_;return $c(e)?n(e,t):this.produce(e,a=>n(a,t))}};function nw(e,t){const r=yf(e)?Zo("MapSet").proxyMap_(e,t):yg(e)?Zo("MapSet").proxySet_(e,t):IH(e,t);return(t?t.scope_:OR()).drafts_.push(r),r}function $H(e){return $c(e)||_a(10,e),AR(e)}function AR(e){if(!Jo(e)||vg(e))return e;const t=e[zn];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Zx(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Zx(e,!0);return Zm(r,(a,s)=>{NR(r,a,AR(s))},n),t&&(t.finalized_=!1),r}var UH=new BH;UH.produce;var zH={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},CR=Nn({name:"legend",initialState:zH,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Ht()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,a=Oa(e).payload.indexOf(r);a>-1&&(e.payload[a]=n)},prepare:Ht()},removeLegendPayload:{reducer(e,t){var r=Oa(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Ht()}}}),{setLegendSize:XC,setLegendSettings:qH,addLegendPayload:kR,replaceLegendPayload:PR,removeLegendPayload:TR}=CR.actions,FH=CR.reducer,KH=["contextPayload"];function aw(){return aw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aw.apply(null,arguments)}function JC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Uc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JC(Object(r),!0).forEach(function(n){QH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QH(e,t,r){return(t=HH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HH(e){var t=VH(e,"string");return typeof t=="symbol"?t:t+""}function VH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GH(e,t){if(e==null)return{};var r,n,a=WH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function WH(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function YH(e){return e.value}function XH(e){var{contextPayload:t}=e,r=GH(e,KH),n=kM(t,e.payloadUniqBy,YH),a=Uc(Uc({},r),{},{payload:n});return j.isValidElement(e.content)?j.cloneElement(e.content,a):typeof e.content=="function"?j.createElement(e.content,a):j.createElement(zK,a)}function JH(e,t,r,n,a,s){var{layout:l,align:u,verticalAlign:f}=t,h,m;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&l==="vertical"?h={left:((n||0)-s.width)/2}:h=u==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(f==="middle"?m={top:((a||0)-s.height)/2}:m=f==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Uc(Uc({},h),m)}function ZH(e){var t=Lt();return j.useEffect(()=>{t(qH(e))},[t,e]),null}function eV(e){var t=Lt();return j.useEffect(()=>(t(XC(e)),()=>{t(XC({width:0,height:0}))}),[t,e]),null}function tV(e,t,r,n){return e==="vertical"&&t!=null?{height:t}:e==="horizontal"?{width:r||n}:null}var rV={align:"center",iconSize:14,inactiveColor:"#ccc",itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function Bd(e){var t=br(e,rV),r=IQ(),n=DF(),a=AH(),{width:s,height:l,wrapperStyle:u,portal:f}=t,[h,m]=RM([r]),g=T1(),y=D1();if(g==null||y==null)return null;var v=g-((a==null?void 0:a.left)||0)-((a==null?void 0:a.right)||0),w=tV(t.layout,l,s,v),x=f?u:Uc(Uc({position:"absolute",width:(w==null?void 0:w.width)||s||"auto",height:(w==null?void 0:w.height)||l||"auto"},JH(u,t,a,g,y,h)),u),_=f??n;if(_==null||r==null)return null;var N=j.createElement("div",{className:"recharts-legend-wrapper",style:x,ref:m},j.createElement(ZH,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!f&&j.createElement(eV,{width:h.width,height:h.height}),j.createElement(XH,aw({},t,w,{margin:a,chartWidth:g,chartHeight:y,contextPayload:r})));return Rp.createPortal(N,_)}Bd.displayName="Legend";function iw(){return iw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iw.apply(null,arguments)}function ZC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZC(Object(r),!0).forEach(function(n){nV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nV(e,t,r){return(t=aV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aV(e){var t=iV(e,"string");return typeof t=="symbol"?t:t+""}function iV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sV(e){return Array.isArray(e)&&Ha(e[0])&&Ha(e[1])?e.join(" ~ "):e}var ac={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},oV=e=>{var{separator:t=ac.separator,contentStyle:r,itemStyle:n,labelStyle:a=ac.labelStyle,payload:s,formatter:l,itemSorter:u,wrapperClassName:f,labelClassName:h,label:m,labelFormatter:g,accessibilityLayer:y=ac.accessibilityLayer}=e,v=()=>{if(s&&s.length){var T={padding:0,margin:0},k=(u?tg(s,u):s).map((M,R)=>{if(M.type==="none")return null;var L=M.formatter||l||sV,{value:V,name:G}=M,K=V,fe=G;if(L){var ge=L(V,G,M,R,s);if(Array.isArray(ge))[K,fe]=ge;else if(ge!=null)K=ge;else return null}var he=nd(nd({},ac.itemStyle),{},{color:M.color||ac.itemStyle.color},n);return j.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:he},Ha(fe)?j.createElement("span",{className:"recharts-tooltip-item-name"},fe):null,Ha(fe)?j.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,j.createElement("span",{className:"recharts-tooltip-item-value"},K),j.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return j.createElement("ul",{className:"recharts-tooltip-item-list",style:T},k)}return null},w=nd(nd({},ac.contentStyle),r),x=nd({margin:0},a),_=!Xt(m),N=_?m:"",O=ht("recharts-default-tooltip",f),E=ht("recharts-tooltip-label",h);_&&g&&s!==void 0&&s!==null&&(N=g(m,s));var C=y?{role:"status","aria-live":"assertive"}:{};return j.createElement("div",iw({className:O,style:w},C),j.createElement("p",{className:E,style:x},j.isValidElement(N)?N:"".concat(N)),v())},ad="recharts-tooltip-wrapper",lV={visibility:"hidden"};function cV(e){var{coordinate:t,translateX:r,translateY:n}=e;return ht(ad,{["".concat(ad,"-right")]:Ne(r)&&t&&Ne(t.x)&&r>=t.x,["".concat(ad,"-left")]:Ne(r)&&t&&Ne(t.x)&&r<t.x,["".concat(ad,"-bottom")]:Ne(n)&&t&&Ne(t.y)&&n>=t.y,["".concat(ad,"-top")]:Ne(n)&&t&&Ne(t.y)&&n<t.y})}function e2(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offset:a,position:s,reverseDirection:l,tooltipDimension:u,viewBox:f,viewBoxDimension:h}=e;if(s&&Ne(s[n]))return s[n];var m=r[n]-u-(a>0?a:0),g=r[n]+a;if(t[n])return l[n]?m:g;var y=f[n];if(y==null)return 0;if(l[n]){var v=m,w=y;return v<w?Math.max(g,y):Math.max(m,y)}if(h==null)return 0;var x=g+u,_=y+h;return x>_?Math.max(m,y):Math.max(g,y)}function uV(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function dV(e){var{allowEscapeViewBox:t,coordinate:r,offsetTop:n,offsetLeft:a,position:s,reverseDirection:l,tooltipBox:u,useTranslate3d:f,viewBox:h}=e,m,g,y;return u.height>0&&u.width>0&&r?(g=e2({allowEscapeViewBox:t,coordinate:r,key:"x",offset:a,position:s,reverseDirection:l,tooltipDimension:u.width,viewBox:h,viewBoxDimension:h.width}),y=e2({allowEscapeViewBox:t,coordinate:r,key:"y",offset:n,position:s,reverseDirection:l,tooltipDimension:u.height,viewBox:h,viewBoxDimension:h.height}),m=uV({translateX:g,translateY:y,useTranslate3d:f})):m=lV,{cssProperties:m,cssClasses:cV({translateX:g,translateY:y,coordinate:r})}}function t2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function dm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t2(Object(r),!0).forEach(function(n){sw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sw(e,t,r){return(t=fV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fV(e){var t=hV(e,"string");return typeof t=="symbol"?t:t+""}function hV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class mV extends j.PureComponent{constructor(){super(...arguments),sw(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),sw(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:l,hasPayload:u,isAnimationActive:f,offset:h,position:m,reverseDirection:g,useTranslate3d:y,viewBox:v,wrapperStyle:w,lastBoundingBox:x,innerRef:_,hasPortalFromProps:N}=this.props,O=typeof h=="number"?h:h.x,E=typeof h=="number"?h:h.y,{cssClasses:C,cssProperties:T}=dV({allowEscapeViewBox:r,coordinate:l,offsetLeft:O,offsetTop:E,position:m,reverseDirection:g,tooltipBox:{height:x.height,width:x.width},useTranslate3d:y,viewBox:v}),k=N?{}:dm(dm({transition:f&&t?"transform ".concat(n,"ms ").concat(a):void 0},T),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),M=dm(dm({},k),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},w);return j.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:M,ref:_},s)}}var DR=()=>{var e;return(e=Ce(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function ow(){return ow=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ow.apply(null,arguments)}function r2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function n2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r2(Object(r),!0).forEach(function(n){pV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pV(e,t,r){return(t=gV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gV(e){var t=yV(e,"string");return typeof t=="symbol"?t:t+""}function yV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var a2={curveBasisClosed:JF,curveBasisOpen:ZF,curveBasis:XF,curveBumpX:LF,curveBumpY:BF,curveLinearClosed:eK,curveLinear:Zp,curveMonotoneX:tK,curveMonotoneY:rK,curveNatural:nK,curveStep:aK,curveStepAfter:sK,curveStepBefore:iK},rp=e=>lt(e.x)&&lt(e.y),i2=e=>e.base!=null&&rp(e.base)&&rp(e),id=e=>e.x,sd=e=>e.y,vV=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(df(e));if((r==="curveMonotone"||r==="curveBump")&&t){var n=a2["".concat(r).concat(t==="vertical"?"Y":"X")];if(n)return n}return a2[r]||Zp},s2={connectNulls:!1,type:"linear"},bV=e=>{var{type:t=s2.type,points:r=[],baseLine:n,layout:a,connectNulls:s=s2.connectNulls}=e,l=vV(t,a),u=s?r.filter(rp):r;if(Array.isArray(n)){var f,h=r.map((w,x)=>n2(n2({},w),{},{base:n[x]}));a==="vertical"?f=nm().y(sd).x1(id).x0(w=>w.base.x):f=nm().x(id).y1(sd).y0(w=>w.base.y);var m=f.defined(i2).curve(l),g=s?h.filter(i2):h;return m(g)}var y;a==="vertical"&&Ne(n)?y=nm().y(sd).x1(id).x0(n):Ne(n)?y=nm().x(id).y1(sd).y0(n):y=sM().x(id).y(sd);var v=y.defined(rp).curve(l);return v(u)},I1=e=>{var{className:t,points:r,path:n,pathRef:a}=e,s=ol();if((!r||!r.length)&&!n)return null;var l={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||s,connectNulls:e.connectNulls},u=r&&r.length?bV(l):n;return j.createElement("path",ow({},Un(e),b1(e),{className:ht("recharts-curve",t),d:u===null?void 0:u,ref:a}))},xV=["x","y","top","left","width","height","className"];function lw(){return lw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lw.apply(null,arguments)}function o2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o2(Object(r),!0).forEach(function(n){jV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jV(e,t,r){return(t=SV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SV(e){var t=_V(e,"string");return typeof t=="symbol"?t:t+""}function _V(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NV(e,t){if(e==null)return{};var r,n,a=OV(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function OV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var EV=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),AV=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:l=0,className:u}=e,f=NV(e,xV),h=wV({x:t,y:r,top:n,left:a,width:s,height:l},f);return!Ne(t)||!Ne(r)||!Ne(s)||!Ne(l)||!Ne(n)||!Ne(a)?null:j.createElement("path",lw({},un(h),{className:ht("recharts-cross",u),d:EV(t,r,s,l,n,a)}))};function CV(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function l2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function c2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l2(Object(r),!0).forEach(function(n){kV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kV(e,t,r){return(t=PV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PV(e){var t=TV(e,"string");return typeof t=="symbol"?t:t+""}function TV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DV=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),MR=(e,t,r)=>e.map(n=>"".concat(DV(n)," ").concat(t,"ms ").concat(r)).join(","),MV=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),$d=(e,t)=>Object.keys(t).reduce((r,n)=>c2(c2({},r),{},{[n]:e(n,t[n])}),{});function u2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u2(Object(r),!0).forEach(function(n){RV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RV(e,t,r){return(t=IV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IV(e){var t=LV(e,"string");return typeof t=="symbol"?t:t+""}function LV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var np=(e,t,r)=>e+(t-e)*r,cw=e=>{var{from:t,to:r}=e;return t!==r},RR=(e,t,r)=>{var n=$d((a,s)=>{if(cw(s)){var[l,u]=e(s.from,s.to,s.velocity);return jr(jr({},s),{},{from:l,velocity:u})}return s},t);return r<1?$d((a,s)=>cw(s)&&n[a]!=null?jr(jr({},s),{},{velocity:np(s.velocity,n[a].velocity,r),from:np(s.from,n[a].from,r)}):s,t):RR(e,n,r-1)};function BV(e,t,r,n,a,s){var l,u=n.reduce((y,v)=>jr(jr({},y),{},{[v]:{from:e[v],velocity:0,to:t[v]}}),{}),f=()=>$d((y,v)=>v.from,u),h=()=>!Object.values(u).filter(cw).length,m=null,g=y=>{l||(l=y);var v=y-l,w=v/r.dt;u=RR(r,u,w),a(jr(jr(jr({},e),t),f())),l=y,h()||(m=s.setTimeout(g))};return()=>(m=s.setTimeout(g),()=>{var y;(y=m)===null||y===void 0||y()})}function $V(e,t,r,n,a,s,l){var u=null,f=a.reduce((g,y)=>{var v=e[y],w=t[y];return v==null||w==null?g:jr(jr({},g),{},{[y]:[v,w]})},{}),h,m=g=>{h||(h=g);var y=(g-h)/n,v=$d((x,_)=>np(..._,r(y)),f);if(s(jr(jr(jr({},e),t),v)),y<1)u=l.setTimeout(m);else{var w=$d((x,_)=>np(..._,r(1)),f);s(jr(jr(jr({},e),t),w))}};return()=>(u=l.setTimeout(m),()=>{var g;(g=u)===null||g===void 0||g()})}const UV=(e,t,r,n,a,s)=>{var l=MV(e,t);return r==null?()=>(a(jr(jr({},e),t)),()=>{}):r.isStepper===!0?BV(e,t,r,l,a,s):$V(e,t,r,n,l,a,s)};var ap=1e-4,IR=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],LR=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),d2=(e,t)=>r=>{var n=IR(e,t);return LR(n,r)},zV=(e,t)=>r=>{var n=IR(e,t),a=[...n.map((s,l)=>s*l).slice(1),0];return LR(a,r)},qV=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(n==null||n.length!==4)return null;var a=n.map(s=>parseFloat(s));return[a[0],a[1],a[2],a[3]]},FV=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a=qV(r[0]);if(a)return a}}return r.length===4?r:[0,0,1,1]},KV=(e,t,r,n)=>{var a=d2(e,r),s=d2(t,n),l=zV(e,r),u=h=>h>1?1:h<0?0:h,f=h=>{for(var m=h>1?1:h,g=m,y=0;y<8;++y){var v=a(g)-m,w=l(g);if(Math.abs(v-m)<ap||w<ap)return s(g);g=u(g-v/w)}return s(g)};return f.isStepper=!1,f},f2=function(){return KV(...FV(...arguments))},QV=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,s=(l,u,f)=>{var h=-(l-u)*r,m=f*n,g=f+(h-m)*a/1e3,y=f*a/1e3+l;return Math.abs(y-u)<ap&&Math.abs(g)<ap?[u,0]:[y,g]};return s.isStepper=!0,s.dt=a,s},HV=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return f2(e);case"spring":return QV();default:if(e.split("(")[0]==="cubic-bezier")return f2(e)}return typeof e=="function"?e:null};function VV(e){var t,r=()=>null,n=!1,a=null,s=l=>{if(!n){if(Array.isArray(l)){if(!l.length)return;var u=l,[f,...h]=u;if(typeof f=="number"){a=e.setTimeout(s.bind(null,h),f);return}s(f),a=e.setTimeout(s.bind(null,h));return}typeof l=="string"&&(t=l,r(t)),typeof l=="object"&&(t=l,r(t)),typeof l=="function"&&l()}};return{stop:()=>{n=!0},start:l=>{n=!1,a&&(a(),a=null),s(l)},subscribe:l=>(r=l,()=>{r=()=>null}),getTimeoutController:()=>e}}class GV{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=l=>{l-n>=r?t(l):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{a!=null&&cancelAnimationFrame(a)}}}function WV(){return VV(new GV)}var YV=j.createContext(WV);function XV(e,t){var r=j.useContext(YV);return j.useMemo(()=>t??r(e),[e,t,r])}var JV=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),bg={isSsr:JV()},ZV={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},h2={t:0},Eb={t:1};function vf(e){var t=br(e,ZV),{isActive:r,canBegin:n,duration:a,easing:s,begin:l,onAnimationEnd:u,onAnimationStart:f,children:h}=t,m=r==="auto"?!bg.isSsr:r,g=XV(t.animationId,t.animationManager),[y,v]=j.useState(m?h2:Eb),w=j.useRef(null);return j.useEffect(()=>{m||v(Eb)},[m]),j.useEffect(()=>{if(!m||!n)return sl;var x=UV(h2,Eb,HV(s),a,v,g.getTimeoutController()),_=()=>{w.current=x()};return g.start([f,l,_,a,u]),()=>{g.stop(),w.current&&w.current(),u()}},[m,n,a,s,l,f,u,g]),h(y.t)}function bf(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=j.useRef(Pd(t)),n=j.useRef(e);return n.current!==e&&(r.current=Pd(t),n.current=e),r.current}var eG=["radius"],tG=["radius"],m2,p2,g2,y2,v2,b2,x2,w2,j2,S2;function _2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function N2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_2(Object(r),!0).forEach(function(n){rG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rG(e,t,r){return(t=nG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nG(e){var t=aG(e,"string");return typeof t=="symbol"?t:t+""}function aG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ip(){return ip=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ip.apply(null,arguments)}function O2(e,t){if(e==null)return{};var r,n,a=iG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function iG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ma(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var E2=(e,t,r,n,a)=>{var s=Is(r),l=Is(n),u=Math.min(Math.abs(s)/2,Math.abs(l)/2),f=l>=0?1:-1,h=s>=0?1:-1,m=l>=0&&s>=0||l<0&&s<0?1:0,g;if(u>0&&Array.isArray(a)){for(var y=[0,0,0,0],v=0,w=4;v<w;v++){var x,_=(x=a[v])!==null&&x!==void 0?x:0;y[v]=_>u?u:_}g=sr(m2||(m2=Ma(["M",",",""])),e,t+f*y[0]),y[0]>0&&(g+=sr(p2||(p2=Ma(["A ",",",",0,0,",",",",",""])),y[0],y[0],m,e+h*y[0],t)),g+=sr(g2||(g2=Ma(["L ",",",""])),e+r-h*y[1],t),y[1]>0&&(g+=sr(y2||(y2=Ma(["A ",",",",0,0,",`,
        `,",",""])),y[1],y[1],m,e+r,t+f*y[1])),g+=sr(v2||(v2=Ma(["L ",",",""])),e+r,t+n-f*y[2]),y[2]>0&&(g+=sr(b2||(b2=Ma(["A ",",",",0,0,",`,
        `,",",""])),y[2],y[2],m,e+r-h*y[2],t+n)),g+=sr(x2||(x2=Ma(["L ",",",""])),e+h*y[3],t+n),y[3]>0&&(g+=sr(w2||(w2=Ma(["A ",",",",0,0,",`,
        `,",",""])),y[3],y[3],m,e,t+n-f*y[3])),g+="Z"}else if(u>0&&a===+a&&a>0){var N=Math.min(u,a);g=sr(j2||(j2=Ma(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+f*N,N,N,m,e+h*N,t,e+r-h*N,t,N,N,m,e+r,t+f*N,e+r,t+n-f*N,N,N,m,e+r-h*N,t+n,e+h*N,t+n,N,N,m,e,t+n-f*N)}else g=sr(S2||(S2=Ma(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return g},A2={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},BR=e=>{var t=br(e,A2),r=j.useRef(null),[n,a]=j.useState(-1);j.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var Q=r.current.getTotalLength();Q&&a(Q)}catch{}},[]);var{x:s,y:l,width:u,height:f,radius:h,className:m}=t,{animationEasing:g,animationDuration:y,animationBegin:v,isAnimationActive:w,isUpdateAnimationActive:x}=t,_=j.useRef(u),N=j.useRef(f),O=j.useRef(s),E=j.useRef(l),C=j.useMemo(()=>({x:s,y:l,width:u,height:f,radius:h}),[s,l,u,f,h]),T=bf(C,"rectangle-");if(s!==+s||l!==+l||u!==+u||f!==+f||u===0||f===0)return null;var k=ht("recharts-rectangle",m);if(!x){var M=un(t),{radius:R}=M,L=O2(M,eG);return j.createElement("path",ip({},L,{x:Is(s),y:Is(l),width:Is(u),height:Is(f),radius:typeof h=="number"?h:void 0,className:k,d:E2(s,l,u,f,h)}))}var V=_.current,G=N.current,K=O.current,fe=E.current,ge="0px ".concat(n===-1?1:n,"px"),he="".concat(n,"px 0px"),B=MR(["strokeDasharray"],y,typeof g=="string"?g:A2.animationEasing);return j.createElement(vf,{animationId:T,key:T,canBegin:n>0,duration:y,easing:g,isActive:x,begin:v},Q=>{var ie=Vt(V,u,Q),ue=Vt(G,f,Q),I=Vt(K,s,Q),D=Vt(fe,l,Q);r.current&&(_.current=ie,N.current=ue,O.current=I,E.current=D);var z;w?Q>0?z={transition:B,strokeDasharray:he}:z={strokeDasharray:ge}:z={strokeDasharray:he};var Y=un(t),{radius:q}=Y,pe=O2(Y,tG);return j.createElement("path",ip({},pe,{radius:typeof h=="number"?h:void 0,className:k,d:E2(I,D,ie,ue,h),ref:r,style:N2(N2({},z),t.style)}))})};function C2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function k2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C2(Object(r),!0).forEach(function(n){sG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sG(e,t,r){return(t=oG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oG(e){var t=lG(e,"string");return typeof t=="symbol"?t:t+""}function lG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sp=Math.PI/180,cG=e=>e*180/Math.PI,gr=(e,t,r,n)=>({x:e+Math.cos(-sp*n)*r,y:t+Math.sin(-sp*n)*r}),$R=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},uG=(e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)},dG=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,l=uG({x:r,y:n},{x:a,y:s});if(l<=0)return{radius:l,angle:0};var u=(r-a)/l,f=Math.acos(u);return n>s&&(f=2*Math.PI-f),{radius:l,angle:cG(f),angleInRadian:f}},fG=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-s*360,endAngle:r-s*360}},hG=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360),l=Math.min(a,s);return e+l*360},mG=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:a,angle:s}=dG({x:r,y:n},t),{innerRadius:l,outerRadius:u}=t;if(a<l||a>u||a===0)return null;var{startAngle:f,endAngle:h}=fG(t),m=s,g;if(f<=h){for(;m>h;)m-=360;for(;m<f;)m+=360;g=m>=f&&m<=h}else{for(;m>f;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=f}return g?k2(k2({},t),{},{radius:a,angle:hG(m,t)}):null};function UR(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e,l=gr(t,r,n,a),u=gr(t,r,n,s);return{points:[l,u],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}var P2,T2,D2,M2,R2,I2,L2;function uw(){return uw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uw.apply(null,arguments)}function Ao(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var pG=(e,t)=>{var r=Dr(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},fm=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:l,cornerRadius:u,cornerIsExternal:f}=e,h=u*(l?1:-1)+n,m=Math.asin(u/h)/sp,g=f?a:a+s*m,y=gr(t,r,h,g),v=gr(t,r,n,g),w=f?a-s*m:a,x=gr(t,r,h*Math.cos(m*sp),w);return{center:y,circleTangency:v,lineTangency:x,theta:m}},zR=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:l}=e,u=pG(s,l),f=s+u,h=gr(t,r,a,s),m=gr(t,r,a,f),g=sr(P2||(P2=Ao(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),h.x,h.y,a,a,+(Math.abs(u)>180),+(s>f),m.x,m.y);if(n>0){var y=gr(t,r,n,s),v=gr(t,r,n,f);g+=sr(T2||(T2=Ao(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),v.x,v.y,n,n,+(Math.abs(u)>180),+(s<=f),y.x,y.y)}else g+=sr(D2||(D2=Ao(["L ",","," Z"])),t,r);return g},gG=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:u,startAngle:f,endAngle:h}=e,m=Dr(h-f),{circleTangency:g,lineTangency:y,theta:v}=fm({cx:t,cy:r,radius:a,angle:f,sign:m,cornerRadius:s,cornerIsExternal:u}),{circleTangency:w,lineTangency:x,theta:_}=fm({cx:t,cy:r,radius:a,angle:h,sign:-m,cornerRadius:s,cornerIsExternal:u}),N=u?Math.abs(f-h):Math.abs(f-h)-v-_;if(N<0)return l?sr(M2||(M2=Ao(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),y.x,y.y,s,s,s*2,s,s,-s*2):zR({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:f,endAngle:h});var O=sr(R2||(R2=Ao(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),y.x,y.y,s,s,+(m<0),g.x,g.y,a,a,+(N>180),+(m<0),w.x,w.y,s,s,+(m<0),x.x,x.y);if(n>0){var{circleTangency:E,lineTangency:C,theta:T}=fm({cx:t,cy:r,radius:n,angle:f,sign:m,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),{circleTangency:k,lineTangency:M,theta:R}=fm({cx:t,cy:r,radius:n,angle:h,sign:-m,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),L=u?Math.abs(f-h):Math.abs(f-h)-T-R;if(L<0&&s===0)return"".concat(O,"L").concat(t,",").concat(r,"Z");O+=sr(I2||(I2=Ao(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),M.x,M.y,s,s,+(m<0),k.x,k.y,n,n,+(L>180),+(m>0),E.x,E.y,s,s,+(m<0),C.x,C.y)}else O+=sr(L2||(L2=Ao(["L",",","Z"])),t,r);return O},yG={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},qR=e=>{var t=br(e,yG),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:f,startAngle:h,endAngle:m,className:g}=t;if(s<a||h===m)return null;var y=ht("recharts-sector",g),v=s-a,w=Jr(l,v,0,!0),x;return w>0&&Math.abs(h-m)<360?x=gG({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(w,v/2),forceCornerRadius:u,cornerIsExternal:f,startAngle:h,endAngle:m}):x=zR({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:h,endAngle:m}),j.createElement("path",uw({},un(t),{className:y,d:x}))};function vG(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(wM(t)){if(e==="centric"){var{cx:n,cy:a,innerRadius:s,outerRadius:l,angle:u}=t,f=gr(n,a,s,u),h=gr(n,a,l,u);return[{x:f.x,y:f.y},{x:h.x,y:h.y}]}return UR(t)}}var Ab={},Cb={},kb={},B2;function bG(){return B2||(B2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TM();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(kb)),kb}var $2;function xG(){return $2||($2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bG();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(Cb)),Cb}var U2;function wG(){return U2||(U2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DM(),r=xG();function n(a,s,l){l&&typeof l!="number"&&t.isIterateeCall(a,s,l)&&(s=l=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),l=l===void 0?a<s?1:-1:r.toFinite(l);const u=Math.max(Math.ceil((s-a)/(l||1)),0),f=new Array(u);for(let h=0;h<u;h++)f[h]=a,a+=l;return f}e.range=n})(Ab)),Ab}var Pb,z2;function jG(){return z2||(z2=1,Pb=wG().range),Pb}var SG=jG();const FR=Wa(SG);function Bs(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _G(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function L1(e){let t,r,n;e.length!==2?(t=Bs,r=(u,f)=>Bs(e(u),f),n=(u,f)=>e(u)-f):(t=e===Bs||e===_G?e:NG,r=e,n=e);function a(u,f,h=0,m=u.length){if(h<m){if(t(f,f)!==0)return m;do{const g=h+m>>>1;r(u[g],f)<0?h=g+1:m=g}while(h<m)}return h}function s(u,f,h=0,m=u.length){if(h<m){if(t(f,f)!==0)return m;do{const g=h+m>>>1;r(u[g],f)<=0?h=g+1:m=g}while(h<m)}return h}function l(u,f,h=0,m=u.length){const g=a(u,f,h,m-1);return g>h&&n(u[g-1],f)>-n(u[g],f)?g-1:g}return{left:a,center:l,right:s}}function NG(){return 0}function KR(e){return e===null?NaN:+e}function*OG(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const EG=L1(Bs),xf=EG.right;L1(KR).center;class q2 extends Map{constructor(t,r=kG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(F2(this,t))}has(t){return super.has(F2(this,t))}set(t,r){return super.set(AG(this,t),r)}delete(t){return super.delete(CG(this,t))}}function F2({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function AG({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function CG({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function kG(e){return e!==null&&typeof e=="object"?e.valueOf():e}function PG(e=Bs){if(e===Bs)return QR;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function QR(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const TG=Math.sqrt(50),DG=Math.sqrt(10),MG=Math.sqrt(2);function op(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),l=s>=TG?10:s>=DG?5:s>=MG?2:1;let u,f,h;return a<0?(h=Math.pow(10,-a)/l,u=Math.round(e*h),f=Math.round(t*h),u/h<e&&++u,f/h>t&&--f,h=-h):(h=Math.pow(10,a)*l,u=Math.round(e/h),f=Math.round(t/h),u*h<e&&++u,f*h>t&&--f),f<u&&.5<=r&&r<2?op(e,t,r*2):[u,f,h]}function dw(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,l]=n?op(t,e,r):op(e,t,r);if(!(s>=a))return[];const u=s-a+1,f=new Array(u);if(n)if(l<0)for(let h=0;h<u;++h)f[h]=(s-h)/-l;else for(let h=0;h<u;++h)f[h]=(s-h)*l;else if(l<0)for(let h=0;h<u;++h)f[h]=(a+h)/-l;else for(let h=0;h<u;++h)f[h]=(a+h)*l;return f}function fw(e,t,r){return t=+t,e=+e,r=+r,op(e,t,r)[2]}function hw(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?fw(t,e,r):fw(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function K2(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Q2(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function HR(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?QR:PG(a);n>r;){if(n-r>600){const f=n-r+1,h=t-r+1,m=Math.log(f),g=.5*Math.exp(2*m/3),y=.5*Math.sqrt(m*g*(f-g)/f)*(h-f/2<0?-1:1),v=Math.max(r,Math.floor(t-h*g/f+y)),w=Math.min(n,Math.floor(t+(f-h)*g/f+y));HR(e,t,v,w,a)}const s=e[t];let l=r,u=n;for(od(e,r,t),a(e[n],s)>0&&od(e,r,n);l<u;){for(od(e,l,u),++l,--u;a(e[l],s)<0;)++l;for(;a(e[u],s)>0;)--u}a(e[r],s)===0?od(e,r,u):(++u,od(e,u,n)),u<=t&&(r=u+1),t<=u&&(n=u-1)}return e}function od(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function RG(e,t,r){if(e=Float64Array.from(OG(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Q2(e);if(t>=1)return K2(e);var n,a=(n-1)*t,s=Math.floor(a),l=K2(HR(e,s).subarray(0,s+1)),u=Q2(e.subarray(s+1));return l+(u-l)*(a-s)}}function IG(e,t,r=KR){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),l=+r(e[s],s,e),u=+r(e[s+1],s+1,e);return l+(u-l)*(a-s)}}function LG(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}function fa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Qi(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const mw=Symbol("implicit");function B1(){var e=new q2,t=[],r=[],n=mw;function a(s){let l=e.get(s);if(l===void 0){if(n!==mw)return n;e.set(s,l=t.push(s)-1)}return r[l%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new q2;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return B1(t,r).unknown(n)},fa.apply(a,arguments),a}function $1(){var e=B1().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,l,u=!1,f=0,h=0,m=.5;delete e.unknown;function g(){var y=t().length,v=a<n,w=v?a:n,x=v?n:a;s=(x-w)/Math.max(1,y-f+h*2),u&&(s=Math.floor(s)),w+=(x-w-s*(y-f))*m,l=s*(1-f),u&&(w=Math.round(w),l=Math.round(l));var _=LG(y).map(function(N){return w+s*N});return r(v?_.reverse():_)}return e.domain=function(y){return arguments.length?(t(y),g()):t()},e.range=function(y){return arguments.length?([n,a]=y,n=+n,a=+a,g()):[n,a]},e.rangeRound=function(y){return[n,a]=y,n=+n,a=+a,u=!0,g()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(y){return arguments.length?(u=!!y,g()):u},e.padding=function(y){return arguments.length?(f=Math.min(1,h=+y),g()):f},e.paddingInner=function(y){return arguments.length?(f=Math.min(1,y),g()):f},e.paddingOuter=function(y){return arguments.length?(h=+y,g()):h},e.align=function(y){return arguments.length?(m=Math.max(0,Math.min(1,y)),g()):m},e.copy=function(){return $1(t(),[n,a]).round(u).paddingInner(f).paddingOuter(h).align(m)},fa.apply(g(),arguments)}function VR(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return VR(t())},e}function BG(){return VR($1.apply(null,arguments).paddingInner(1))}function U1(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function GR(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function wf(){}var Ud=.7,lp=1/Ud,vc="\\s*([+-]?\\d+)\\s*",zd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ka="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$G=/^#([0-9a-f]{3,8})$/,UG=new RegExp(`^rgb\\(${vc},${vc},${vc}\\)$`),zG=new RegExp(`^rgb\\(${Ka},${Ka},${Ka}\\)$`),qG=new RegExp(`^rgba\\(${vc},${vc},${vc},${zd}\\)$`),FG=new RegExp(`^rgba\\(${Ka},${Ka},${Ka},${zd}\\)$`),KG=new RegExp(`^hsl\\(${zd},${Ka},${Ka}\\)$`),QG=new RegExp(`^hsla\\(${zd},${Ka},${Ka},${zd}\\)$`),H2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};U1(wf,qd,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:V2,formatHex:V2,formatHex8:HG,formatHsl:VG,formatRgb:G2,toString:G2});function V2(){return this.rgb().formatHex()}function HG(){return this.rgb().formatHex8()}function VG(){return WR(this).formatHsl()}function G2(){return this.rgb().formatRgb()}function qd(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=$G.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?W2(t):r===3?new Sn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?hm(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?hm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=UG.exec(e))?new Sn(t[1],t[2],t[3],1):(t=zG.exec(e))?new Sn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=qG.exec(e))?hm(t[1],t[2],t[3],t[4]):(t=FG.exec(e))?hm(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=KG.exec(e))?J2(t[1],t[2]/100,t[3]/100,1):(t=QG.exec(e))?J2(t[1],t[2]/100,t[3]/100,t[4]):H2.hasOwnProperty(e)?W2(H2[e]):e==="transparent"?new Sn(NaN,NaN,NaN,0):null}function W2(e){return new Sn(e>>16&255,e>>8&255,e&255,1)}function hm(e,t,r,n){return n<=0&&(e=t=r=NaN),new Sn(e,t,r,n)}function GG(e){return e instanceof wf||(e=qd(e)),e?(e=e.rgb(),new Sn(e.r,e.g,e.b,e.opacity)):new Sn}function pw(e,t,r,n){return arguments.length===1?GG(e):new Sn(e,t,r,n??1)}function Sn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}U1(Sn,pw,GR(wf,{brighter(e){return e=e==null?lp:Math.pow(lp,e),new Sn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ud:Math.pow(Ud,e),new Sn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Sn(Fo(this.r),Fo(this.g),Fo(this.b),cp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Y2,formatHex:Y2,formatHex8:WG,formatRgb:X2,toString:X2}));function Y2(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}`}function WG(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}${Co((isNaN(this.opacity)?1:this.opacity)*255)}`}function X2(){const e=cp(this.opacity);return`${e===1?"rgb(":"rgba("}${Fo(this.r)}, ${Fo(this.g)}, ${Fo(this.b)}${e===1?")":`, ${e})`}`}function cp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Fo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Co(e){return e=Fo(e),(e<16?"0":"")+e.toString(16)}function J2(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Na(e,t,r,n)}function WR(e){if(e instanceof Na)return new Na(e.h,e.s,e.l,e.opacity);if(e instanceof wf||(e=qd(e)),!e)return new Na;if(e instanceof Na)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),l=NaN,u=s-a,f=(s+a)/2;return u?(t===s?l=(r-n)/u+(r<n)*6:r===s?l=(n-t)/u+2:l=(t-r)/u+4,u/=f<.5?s+a:2-s-a,l*=60):u=f>0&&f<1?0:l,new Na(l,u,f,e.opacity)}function YG(e,t,r,n){return arguments.length===1?WR(e):new Na(e,t,r,n??1)}function Na(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}U1(Na,YG,GR(wf,{brighter(e){return e=e==null?lp:Math.pow(lp,e),new Na(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ud:Math.pow(Ud,e),new Na(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Sn(Tb(e>=240?e-240:e+120,a,n),Tb(e,a,n),Tb(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Na(Z2(this.h),mm(this.s),mm(this.l),cp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=cp(this.opacity);return`${e===1?"hsl(":"hsla("}${Z2(this.h)}, ${mm(this.s)*100}%, ${mm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Z2(e){return e=(e||0)%360,e<0?e+360:e}function mm(e){return Math.max(0,Math.min(1,e||0))}function Tb(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const z1=e=>()=>e;function XG(e,t){return function(r){return e+r*t}}function JG(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function ZG(e){return(e=+e)==1?YR:function(t,r){return r-t?JG(t,r,e):z1(isNaN(t)?r:t)}}function YR(e,t){var r=t-e;return r?XG(e,r):z1(isNaN(e)?t:e)}const ek=(function e(t){var r=ZG(t);function n(a,s){var l=r((a=pw(a)).r,(s=pw(s)).r),u=r(a.g,s.g),f=r(a.b,s.b),h=YR(a.opacity,s.opacity);return function(m){return a.r=l(m),a.g=u(m),a.b=f(m),a.opacity=h(m),a+""}}return n.gamma=e,n})(1);function eW(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function tW(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function rW(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),l;for(l=0;l<n;++l)a[l]=Xc(e[l],t[l]);for(;l<r;++l)s[l]=t[l];return function(u){for(l=0;l<n;++l)s[l]=a[l](u);return s}}function nW(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function up(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function aW(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Xc(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var gw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Db=new RegExp(gw.source,"g");function iW(e){return function(){return e}}function sW(e){return function(t){return e(t)+""}}function oW(e,t){var r=gw.lastIndex=Db.lastIndex=0,n,a,s,l=-1,u=[],f=[];for(e=e+"",t=t+"";(n=gw.exec(e))&&(a=Db.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),u[l]?u[l]+=s:u[++l]=s),(n=n[0])===(a=a[0])?u[l]?u[l]+=a:u[++l]=a:(u[++l]=null,f.push({i:l,x:up(n,a)})),r=Db.lastIndex;return r<t.length&&(s=t.slice(r),u[l]?u[l]+=s:u[++l]=s),u.length<2?f[0]?sW(f[0].x):iW(t):(t=f.length,function(h){for(var m=0,g;m<t;++m)u[(g=f[m]).i]=g.x(h);return u.join("")})}function Xc(e,t){var r=typeof t,n;return t==null||r==="boolean"?z1(t):(r==="number"?up:r==="string"?(n=qd(t))?(t=n,ek):oW:t instanceof qd?ek:t instanceof Date?nW:tW(t)?eW:Array.isArray(t)?rW:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?aW:up)(e,t)}function q1(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function lW(e,t){t===void 0&&(t=e,e=Xc);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(l){var u=Math.max(0,Math.min(n-1,Math.floor(l*=n)));return s[u](l-u)}}function cW(e){return function(){return e}}function dp(e){return+e}var tk=[0,1];function cn(e){return e}function yw(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:cW(isNaN(t)?NaN:.5)}function uW(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function dW(e,t,r){var n=e[0],a=e[1],s=t[0],l=t[1];return a<n?(n=yw(a,n),s=r(l,s)):(n=yw(n,a),s=r(s,l)),function(u){return s(n(u))}}function fW(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),l=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<n;)a[l]=yw(e[l],e[l+1]),s[l]=r(t[l],t[l+1]);return function(u){var f=xf(e,u,1,n)-1;return s[f](a[f](u))}}function jf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function xg(){var e=tk,t=tk,r=Xc,n,a,s,l=cn,u,f,h;function m(){var y=Math.min(e.length,t.length);return l!==cn&&(l=uW(e[0],e[y-1])),u=y>2?fW:dW,f=h=null,g}function g(y){return y==null||isNaN(y=+y)?s:(f||(f=u(e.map(n),t,r)))(n(l(y)))}return g.invert=function(y){return l(a((h||(h=u(t,e.map(n),up)))(y)))},g.domain=function(y){return arguments.length?(e=Array.from(y,dp),m()):e.slice()},g.range=function(y){return arguments.length?(t=Array.from(y),m()):t.slice()},g.rangeRound=function(y){return t=Array.from(y),r=q1,m()},g.clamp=function(y){return arguments.length?(l=y?!0:cn,m()):l!==cn},g.interpolate=function(y){return arguments.length?(r=y,m()):r},g.unknown=function(y){return arguments.length?(s=y,g):s},function(y,v){return n=y,a=v,m()}}function F1(){return xg()(cn,cn)}function hW(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function fp(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function zc(e){return e=fp(Math.abs(e)),e?e[1]:NaN}function mW(e,t){return function(r,n){for(var a=r.length,s=[],l=0,u=e[0],f=0;a>0&&u>0&&(f+u+1>n&&(u=Math.max(1,n-f)),s.push(r.substring(a-=u,a+u)),!((f+=u+1)>n));)u=e[l=(l+1)%e.length];return s.reverse().join(t)}}function pW(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var gW=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fd(e){if(!(t=gW.exec(e)))throw new Error("invalid format: "+e);var t;return new K1({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Fd.prototype=K1.prototype;function K1(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}K1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function yW(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var hp;function vW(e,t){var r=fp(e,t);if(!r)return hp=void 0,e.toPrecision(t);var n=r[0],a=r[1],s=a-(hp=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,l=n.length;return s===l?n:s>l?n+new Array(s-l+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+fp(e,Math.max(0,t+s-1))[0]}function rk(e,t){var r=fp(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const nk={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:hW,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>rk(e*100,t),r:rk,s:vW,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ak(e){return e}var ik=Array.prototype.map,sk=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function bW(e){var t=e.grouping===void 0||e.thousands===void 0?ak:mW(ik.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?ak:pW(ik.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",f=e.nan===void 0?"NaN":e.nan+"";function h(g,y){g=Fd(g);var v=g.fill,w=g.align,x=g.sign,_=g.symbol,N=g.zero,O=g.width,E=g.comma,C=g.precision,T=g.trim,k=g.type;k==="n"?(E=!0,k="g"):nk[k]||(C===void 0&&(C=12),T=!0,k="g"),(N||v==="0"&&w==="=")&&(N=!0,v="0",w="=");var M=(y&&y.prefix!==void 0?y.prefix:"")+(_==="$"?r:_==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():""),R=(_==="$"?n:/[%p]/.test(k)?l:"")+(y&&y.suffix!==void 0?y.suffix:""),L=nk[k],V=/[defgprs%]/.test(k);C=C===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function G(K){var fe=M,ge=R,he,B,Q;if(k==="c")ge=L(K)+ge,K="";else{K=+K;var ie=K<0||1/K<0;if(K=isNaN(K)?f:L(Math.abs(K),C),T&&(K=yW(K)),ie&&+K==0&&x!=="+"&&(ie=!1),fe=(ie?x==="("?x:u:x==="-"||x==="("?"":x)+fe,ge=(k==="s"&&!isNaN(K)&&hp!==void 0?sk[8+hp/3]:"")+ge+(ie&&x==="("?")":""),V){for(he=-1,B=K.length;++he<B;)if(Q=K.charCodeAt(he),48>Q||Q>57){ge=(Q===46?a+K.slice(he+1):K.slice(he))+ge,K=K.slice(0,he);break}}}E&&!N&&(K=t(K,1/0));var ue=fe.length+K.length+ge.length,I=ue<O?new Array(O-ue+1).join(v):"";switch(E&&N&&(K=t(I+K,I.length?O-ge.length:1/0),I=""),w){case"<":K=fe+K+ge+I;break;case"=":K=fe+I+K+ge;break;case"^":K=I.slice(0,ue=I.length>>1)+fe+K+ge+I.slice(ue);break;default:K=I+fe+K+ge;break}return s(K)}return G.toString=function(){return g+""},G}function m(g,y){var v=Math.max(-8,Math.min(8,Math.floor(zc(y)/3)))*3,w=Math.pow(10,-v),x=h((g=Fd(g),g.type="f",g),{suffix:sk[8+v/3]});return function(_){return x(w*_)}}return{format:h,formatPrefix:m}}var pm,Q1,XR;xW({thousands:",",grouping:[3],currency:["$",""]});function xW(e){return pm=bW(e),Q1=pm.format,XR=pm.formatPrefix,pm}function wW(e){return Math.max(0,-zc(Math.abs(e)))}function jW(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(zc(t)/3)))*3-zc(Math.abs(e)))}function SW(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,zc(t)-zc(e))+1}function JR(e,t,r,n){var a=hw(e,t,r),s;switch(n=Fd(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=jW(a,l))&&(n.precision=s),XR(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=SW(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=wW(a))&&(n.precision=s-(n.type==="%")*2);break}}return Q1(n)}function Ws(e){var t=e.domain;return e.ticks=function(r){var n=t();return dw(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return JR(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,l=n[a],u=n[s],f,h,m=10;for(u<l&&(h=l,l=u,u=h,h=a,a=s,s=h);m-- >0;){if(h=fw(l,u,r),h===f)return n[a]=l,n[s]=u,t(n);if(h>0)l=Math.floor(l/h)*h,u=Math.ceil(u/h)*h;else if(h<0)l=Math.ceil(l*h)/h,u=Math.floor(u*h)/h;else break;f=h}return e},e}function ZR(){var e=F1();return e.copy=function(){return jf(e,ZR())},fa.apply(e,arguments),Ws(e)}function e4(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,dp),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return e4(e).unknown(t)},e=arguments.length?Array.from(e,dp):[0,1],Ws(r)}function t4(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],l;return s<a&&(l=r,r=n,n=l,l=a,a=s,s=l),e[r]=t.floor(a),e[n]=t.ceil(s),e}function ok(e){return Math.log(e)}function lk(e){return Math.exp(e)}function _W(e){return-Math.log(-e)}function NW(e){return-Math.exp(-e)}function OW(e){return isFinite(e)?+("1e"+e):e<0?0:e}function EW(e){return e===10?OW:e===Math.E?Math.exp:t=>Math.pow(e,t)}function AW(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function ck(e){return(t,r)=>-e(-t,r)}function H1(e){const t=e(ok,lk),r=t.domain;let n=10,a,s;function l(){return a=AW(n),s=EW(n),r()[0]<0?(a=ck(a),s=ck(s),e(_W,NW)):e(ok,lk),t}return t.base=function(u){return arguments.length?(n=+u,l()):n},t.domain=function(u){return arguments.length?(r(u),l()):r()},t.ticks=u=>{const f=r();let h=f[0],m=f[f.length-1];const g=m<h;g&&([h,m]=[m,h]);let y=a(h),v=a(m),w,x;const _=u==null?10:+u;let N=[];if(!(n%1)&&v-y<_){if(y=Math.floor(y),v=Math.ceil(v),h>0){for(;y<=v;++y)for(w=1;w<n;++w)if(x=y<0?w/s(-y):w*s(y),!(x<h)){if(x>m)break;N.push(x)}}else for(;y<=v;++y)for(w=n-1;w>=1;--w)if(x=y>0?w/s(-y):w*s(y),!(x<h)){if(x>m)break;N.push(x)}N.length*2<_&&(N=dw(h,m,_))}else N=dw(y,v,Math.min(v-y,_)).map(s);return g?N.reverse():N},t.tickFormat=(u,f)=>{if(u==null&&(u=10),f==null&&(f=n===10?"s":","),typeof f!="function"&&(!(n%1)&&(f=Fd(f)).precision==null&&(f.trim=!0),f=Q1(f)),u===1/0)return f;const h=Math.max(1,n*u/t.ticks().length);return m=>{let g=m/s(Math.round(a(m)));return g*n<n-.5&&(g*=n),g<=h?f(m):""}},t.nice=()=>r(t4(r(),{floor:u=>s(Math.floor(a(u))),ceil:u=>s(Math.ceil(a(u)))})),t}function r4(){const e=H1(xg()).domain([1,10]);return e.copy=()=>jf(e,r4()).base(e.base()),fa.apply(e,arguments),e}function uk(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function dk(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function V1(e){var t=1,r=e(uk(t),dk(t));return r.constant=function(n){return arguments.length?e(uk(t=+n),dk(t)):t},Ws(r)}function n4(){var e=V1(xg());return e.copy=function(){return jf(e,n4()).constant(e.constant())},fa.apply(e,arguments)}function fk(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function CW(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function kW(e){return e<0?-e*e:e*e}function G1(e){var t=e(cn,cn),r=1;function n(){return r===1?e(cn,cn):r===.5?e(CW,kW):e(fk(r),fk(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Ws(t)}function W1(){var e=G1(xg());return e.copy=function(){return jf(e,W1()).exponent(e.exponent())},fa.apply(e,arguments),e}function PW(){return W1.apply(null,arguments).exponent(.5)}function hk(e){return Math.sign(e)*e*e}function TW(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function a4(){var e=F1(),t=[0,1],r=!1,n;function a(s){var l=TW(e(s));return isNaN(l)?n:r?Math.round(l):l}return a.invert=function(s){return e.invert(hk(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,dp)).map(hk)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return a4(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},fa.apply(a,arguments),Ws(a)}function i4(){var e=[],t=[],r=[],n;function a(){var l=0,u=Math.max(1,t.length);for(r=new Array(u-1);++l<u;)r[l-1]=IG(e,l/u);return s}function s(l){return l==null||isNaN(l=+l)?n:t[xf(r,l)]}return s.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},s.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Bs),a()},s.range=function(l){return arguments.length?(t=Array.from(l),a()):t.slice()},s.unknown=function(l){return arguments.length?(n=l,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return i4().domain(e).range(t).unknown(n)},fa.apply(s,arguments)}function s4(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function l(f){return f!=null&&f<=f?a[xf(n,f,0,r)]:s}function u(){var f=-1;for(n=new Array(r);++f<r;)n[f]=((f+1)*t-(f-r)*e)/(r+1);return l}return l.domain=function(f){return arguments.length?([e,t]=f,e=+e,t=+t,u()):[e,t]},l.range=function(f){return arguments.length?(r=(a=Array.from(f)).length-1,u()):a.slice()},l.invertExtent=function(f){var h=a.indexOf(f);return h<0?[NaN,NaN]:h<1?[e,n[0]]:h>=r?[n[r-1],t]:[n[h-1],n[h]]},l.unknown=function(f){return arguments.length&&(s=f),l},l.thresholds=function(){return n.slice()},l.copy=function(){return s4().domain([e,t]).range(a).unknown(s)},fa.apply(Ws(l),arguments)}function o4(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[xf(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var l=t.indexOf(s);return[e[l-1],e[l]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return o4().domain(e).range(t).unknown(r)},fa.apply(a,arguments)}const Mb=new Date,Rb=new Date;function Nr(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const l=a(s),u=a.ceil(s);return s-l<u-s?l:u},a.offset=(s,l)=>(t(s=new Date(+s),l==null?1:Math.floor(l)),s),a.range=(s,l,u)=>{const f=[];if(s=a.ceil(s),u=u==null?1:Math.floor(u),!(s<l)||!(u>0))return f;let h;do f.push(h=new Date(+s)),t(s,u),e(s);while(h<s&&s<l);return f},a.filter=s=>Nr(l=>{if(l>=l)for(;e(l),!s(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!s(l););else for(;--u>=0;)for(;t(l,1),!s(l););}),r&&(a.count=(s,l)=>(Mb.setTime(+s),Rb.setTime(+l),e(Mb),e(Rb),Math.floor(r(Mb,Rb))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?l=>n(l)%s===0:l=>a.count(0,l)%s===0):a)),a}const mp=Nr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);mp.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Nr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):mp);mp.range;const Oi=1e3,oa=Oi*60,Ei=oa*60,Mi=Ei*24,Y1=Mi*7,mk=Mi*30,Ib=Mi*365,ko=Nr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Oi)},(e,t)=>(t-e)/Oi,e=>e.getUTCSeconds());ko.range;const X1=Nr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Oi)},(e,t)=>{e.setTime(+e+t*oa)},(e,t)=>(t-e)/oa,e=>e.getMinutes());X1.range;const J1=Nr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*oa)},(e,t)=>(t-e)/oa,e=>e.getUTCMinutes());J1.range;const Z1=Nr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Oi-e.getMinutes()*oa)},(e,t)=>{e.setTime(+e+t*Ei)},(e,t)=>(t-e)/Ei,e=>e.getHours());Z1.range;const ej=Nr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ei)},(e,t)=>(t-e)/Ei,e=>e.getUTCHours());ej.range;const Sf=Nr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*oa)/Mi,e=>e.getDate()-1);Sf.range;const wg=Nr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Mi,e=>e.getUTCDate()-1);wg.range;const l4=Nr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Mi,e=>Math.floor(e/Mi));l4.range;function ll(e){return Nr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*oa)/Y1)}const jg=ll(0),pp=ll(1),DW=ll(2),MW=ll(3),qc=ll(4),RW=ll(5),IW=ll(6);jg.range;pp.range;DW.range;MW.range;qc.range;RW.range;IW.range;function cl(e){return Nr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Y1)}const Sg=cl(0),gp=cl(1),LW=cl(2),BW=cl(3),Fc=cl(4),$W=cl(5),UW=cl(6);Sg.range;gp.range;LW.range;BW.range;Fc.range;$W.range;UW.range;const tj=Nr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());tj.range;const rj=Nr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());rj.range;const Ri=Nr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ri.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Nr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Ri.range;const Ii=Nr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ii.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Nr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Ii.range;function c4(e,t,r,n,a,s){const l=[[ko,1,Oi],[ko,5,5*Oi],[ko,15,15*Oi],[ko,30,30*Oi],[s,1,oa],[s,5,5*oa],[s,15,15*oa],[s,30,30*oa],[a,1,Ei],[a,3,3*Ei],[a,6,6*Ei],[a,12,12*Ei],[n,1,Mi],[n,2,2*Mi],[r,1,Y1],[t,1,mk],[t,3,3*mk],[e,1,Ib]];function u(h,m,g){const y=m<h;y&&([h,m]=[m,h]);const v=g&&typeof g.range=="function"?g:f(h,m,g),w=v?v.range(h,+m+1):[];return y?w.reverse():w}function f(h,m,g){const y=Math.abs(m-h)/g,v=L1(([,,_])=>_).right(l,y);if(v===l.length)return e.every(hw(h/Ib,m/Ib,g));if(v===0)return mp.every(Math.max(hw(h,m,g),1));const[w,x]=l[y/l[v-1][2]<l[v][2]/y?v-1:v];return w.every(x)}return[u,f]}const[zW,qW]=c4(Ii,rj,Sg,l4,ej,J1),[FW,KW]=c4(Ri,tj,jg,Sf,Z1,X1);function Lb(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Bb(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ld(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function QW(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,l=e.shortDays,u=e.months,f=e.shortMonths,h=cd(a),m=ud(a),g=cd(s),y=ud(s),v=cd(l),w=ud(l),x=cd(u),_=ud(u),N=cd(f),O=ud(f),E={a:Q,A:ie,b:ue,B:I,c:null,d:xk,e:xk,f:mY,g:_Y,G:OY,H:dY,I:fY,j:hY,L:u4,m:pY,M:gY,p:D,q:z,Q:Sk,s:_k,S:yY,u:vY,U:bY,V:xY,w:wY,W:jY,x:null,X:null,y:SY,Y:NY,Z:EY,"%":jk},C={a:Y,A:q,b:pe,B:ve,c:null,d:wk,e:wk,f:PY,g:zY,G:FY,H:AY,I:CY,j:kY,L:f4,m:TY,M:DY,p:me,q:Ee,Q:Sk,s:_k,S:MY,u:RY,U:IY,V:LY,w:BY,W:$Y,x:null,X:null,y:UY,Y:qY,Z:KY,"%":jk},T={a:V,A:G,b:K,B:fe,c:ge,d:vk,e:vk,f:oY,g:yk,G:gk,H:bk,I:bk,j:nY,L:sY,m:rY,M:aY,p:L,q:tY,Q:cY,s:uY,S:iY,u:YW,U:XW,V:JW,w:WW,W:ZW,x:he,X:B,y:yk,Y:gk,Z:eY,"%":lY};E.x=k(r,E),E.X=k(n,E),E.c=k(t,E),C.x=k(r,C),C.X=k(n,C),C.c=k(t,C);function k(te,_e){return function(De){var le=[],Fe=-1,Te=0,Ze=te.length,gt,qt,tn;for(De instanceof Date||(De=new Date(+De));++Fe<Ze;)te.charCodeAt(Fe)===37&&(le.push(te.slice(Te,Fe)),(qt=pk[gt=te.charAt(++Fe)])!=null?gt=te.charAt(++Fe):qt=gt==="e"?" ":"0",(tn=_e[gt])&&(gt=tn(De,qt)),le.push(gt),Te=Fe+1);return le.push(te.slice(Te,Fe)),le.join("")}}function M(te,_e){return function(De){var le=ld(1900,void 0,1),Fe=R(le,te,De+="",0),Te,Ze;if(Fe!=De.length)return null;if("Q"in le)return new Date(le.Q);if("s"in le)return new Date(le.s*1e3+("L"in le?le.L:0));if(_e&&!("Z"in le)&&(le.Z=0),"p"in le&&(le.H=le.H%12+le.p*12),le.m===void 0&&(le.m="q"in le?le.q:0),"V"in le){if(le.V<1||le.V>53)return null;"w"in le||(le.w=1),"Z"in le?(Te=Bb(ld(le.y,0,1)),Ze=Te.getUTCDay(),Te=Ze>4||Ze===0?gp.ceil(Te):gp(Te),Te=wg.offset(Te,(le.V-1)*7),le.y=Te.getUTCFullYear(),le.m=Te.getUTCMonth(),le.d=Te.getUTCDate()+(le.w+6)%7):(Te=Lb(ld(le.y,0,1)),Ze=Te.getDay(),Te=Ze>4||Ze===0?pp.ceil(Te):pp(Te),Te=Sf.offset(Te,(le.V-1)*7),le.y=Te.getFullYear(),le.m=Te.getMonth(),le.d=Te.getDate()+(le.w+6)%7)}else("W"in le||"U"in le)&&("w"in le||(le.w="u"in le?le.u%7:"W"in le?1:0),Ze="Z"in le?Bb(ld(le.y,0,1)).getUTCDay():Lb(ld(le.y,0,1)).getDay(),le.m=0,le.d="W"in le?(le.w+6)%7+le.W*7-(Ze+5)%7:le.w+le.U*7-(Ze+6)%7);return"Z"in le?(le.H+=le.Z/100|0,le.M+=le.Z%100,Bb(le)):Lb(le)}}function R(te,_e,De,le){for(var Fe=0,Te=_e.length,Ze=De.length,gt,qt;Fe<Te;){if(le>=Ze)return-1;if(gt=_e.charCodeAt(Fe++),gt===37){if(gt=_e.charAt(Fe++),qt=T[gt in pk?_e.charAt(Fe++):gt],!qt||(le=qt(te,De,le))<0)return-1}else if(gt!=De.charCodeAt(le++))return-1}return le}function L(te,_e,De){var le=h.exec(_e.slice(De));return le?(te.p=m.get(le[0].toLowerCase()),De+le[0].length):-1}function V(te,_e,De){var le=v.exec(_e.slice(De));return le?(te.w=w.get(le[0].toLowerCase()),De+le[0].length):-1}function G(te,_e,De){var le=g.exec(_e.slice(De));return le?(te.w=y.get(le[0].toLowerCase()),De+le[0].length):-1}function K(te,_e,De){var le=N.exec(_e.slice(De));return le?(te.m=O.get(le[0].toLowerCase()),De+le[0].length):-1}function fe(te,_e,De){var le=x.exec(_e.slice(De));return le?(te.m=_.get(le[0].toLowerCase()),De+le[0].length):-1}function ge(te,_e,De){return R(te,t,_e,De)}function he(te,_e,De){return R(te,r,_e,De)}function B(te,_e,De){return R(te,n,_e,De)}function Q(te){return l[te.getDay()]}function ie(te){return s[te.getDay()]}function ue(te){return f[te.getMonth()]}function I(te){return u[te.getMonth()]}function D(te){return a[+(te.getHours()>=12)]}function z(te){return 1+~~(te.getMonth()/3)}function Y(te){return l[te.getUTCDay()]}function q(te){return s[te.getUTCDay()]}function pe(te){return f[te.getUTCMonth()]}function ve(te){return u[te.getUTCMonth()]}function me(te){return a[+(te.getUTCHours()>=12)]}function Ee(te){return 1+~~(te.getUTCMonth()/3)}return{format:function(te){var _e=k(te+="",E);return _e.toString=function(){return te},_e},parse:function(te){var _e=M(te+="",!1);return _e.toString=function(){return te},_e},utcFormat:function(te){var _e=k(te+="",C);return _e.toString=function(){return te},_e},utcParse:function(te){var _e=M(te+="",!0);return _e.toString=function(){return te},_e}}}var pk={"-":"",_:" ",0:"0"},Rr=/^\s*\d+/,HW=/^%/,VW=/[\\^$*+?|[\]().{}]/g;function mt(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function GW(e){return e.replace(VW,"\\$&")}function cd(e){return new RegExp("^(?:"+e.map(GW).join("|")+")","i")}function ud(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function WW(e,t,r){var n=Rr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function YW(e,t,r){var n=Rr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function XW(e,t,r){var n=Rr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function JW(e,t,r){var n=Rr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function ZW(e,t,r){var n=Rr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function gk(e,t,r){var n=Rr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function yk(e,t,r){var n=Rr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function eY(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function tY(e,t,r){var n=Rr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function rY(e,t,r){var n=Rr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function vk(e,t,r){var n=Rr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function nY(e,t,r){var n=Rr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function bk(e,t,r){var n=Rr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function aY(e,t,r){var n=Rr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function iY(e,t,r){var n=Rr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function sY(e,t,r){var n=Rr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function oY(e,t,r){var n=Rr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function lY(e,t,r){var n=HW.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function cY(e,t,r){var n=Rr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function uY(e,t,r){var n=Rr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function xk(e,t){return mt(e.getDate(),t,2)}function dY(e,t){return mt(e.getHours(),t,2)}function fY(e,t){return mt(e.getHours()%12||12,t,2)}function hY(e,t){return mt(1+Sf.count(Ri(e),e),t,3)}function u4(e,t){return mt(e.getMilliseconds(),t,3)}function mY(e,t){return u4(e,t)+"000"}function pY(e,t){return mt(e.getMonth()+1,t,2)}function gY(e,t){return mt(e.getMinutes(),t,2)}function yY(e,t){return mt(e.getSeconds(),t,2)}function vY(e){var t=e.getDay();return t===0?7:t}function bY(e,t){return mt(jg.count(Ri(e)-1,e),t,2)}function d4(e){var t=e.getDay();return t>=4||t===0?qc(e):qc.ceil(e)}function xY(e,t){return e=d4(e),mt(qc.count(Ri(e),e)+(Ri(e).getDay()===4),t,2)}function wY(e){return e.getDay()}function jY(e,t){return mt(pp.count(Ri(e)-1,e),t,2)}function SY(e,t){return mt(e.getFullYear()%100,t,2)}function _Y(e,t){return e=d4(e),mt(e.getFullYear()%100,t,2)}function NY(e,t){return mt(e.getFullYear()%1e4,t,4)}function OY(e,t){var r=e.getDay();return e=r>=4||r===0?qc(e):qc.ceil(e),mt(e.getFullYear()%1e4,t,4)}function EY(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+mt(t/60|0,"0",2)+mt(t%60,"0",2)}function wk(e,t){return mt(e.getUTCDate(),t,2)}function AY(e,t){return mt(e.getUTCHours(),t,2)}function CY(e,t){return mt(e.getUTCHours()%12||12,t,2)}function kY(e,t){return mt(1+wg.count(Ii(e),e),t,3)}function f4(e,t){return mt(e.getUTCMilliseconds(),t,3)}function PY(e,t){return f4(e,t)+"000"}function TY(e,t){return mt(e.getUTCMonth()+1,t,2)}function DY(e,t){return mt(e.getUTCMinutes(),t,2)}function MY(e,t){return mt(e.getUTCSeconds(),t,2)}function RY(e){var t=e.getUTCDay();return t===0?7:t}function IY(e,t){return mt(Sg.count(Ii(e)-1,e),t,2)}function h4(e){var t=e.getUTCDay();return t>=4||t===0?Fc(e):Fc.ceil(e)}function LY(e,t){return e=h4(e),mt(Fc.count(Ii(e),e)+(Ii(e).getUTCDay()===4),t,2)}function BY(e){return e.getUTCDay()}function $Y(e,t){return mt(gp.count(Ii(e)-1,e),t,2)}function UY(e,t){return mt(e.getUTCFullYear()%100,t,2)}function zY(e,t){return e=h4(e),mt(e.getUTCFullYear()%100,t,2)}function qY(e,t){return mt(e.getUTCFullYear()%1e4,t,4)}function FY(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Fc(e):Fc.ceil(e),mt(e.getUTCFullYear()%1e4,t,4)}function KY(){return"+0000"}function jk(){return"%"}function Sk(e){return+e}function _k(e){return Math.floor(+e/1e3)}var ic,m4,p4;QY({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function QY(e){return ic=QW(e),m4=ic.format,ic.parse,p4=ic.utcFormat,ic.utcParse,ic}function HY(e){return new Date(e)}function VY(e){return e instanceof Date?+e:+new Date(+e)}function nj(e,t,r,n,a,s,l,u,f,h){var m=F1(),g=m.invert,y=m.domain,v=h(".%L"),w=h(":%S"),x=h("%I:%M"),_=h("%I %p"),N=h("%a %d"),O=h("%b %d"),E=h("%B"),C=h("%Y");function T(k){return(f(k)<k?v:u(k)<k?w:l(k)<k?x:s(k)<k?_:n(k)<k?a(k)<k?N:O:r(k)<k?E:C)(k)}return m.invert=function(k){return new Date(g(k))},m.domain=function(k){return arguments.length?y(Array.from(k,VY)):y().map(HY)},m.ticks=function(k){var M=y();return e(M[0],M[M.length-1],k??10)},m.tickFormat=function(k,M){return M==null?T:h(M)},m.nice=function(k){var M=y();return(!k||typeof k.range!="function")&&(k=t(M[0],M[M.length-1],k??10)),k?y(t4(M,k)):m},m.copy=function(){return jf(m,nj(e,t,r,n,a,s,l,u,f,h))},m}function GY(){return fa.apply(nj(FW,KW,Ri,tj,jg,Sf,Z1,X1,ko,m4).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function WY(){return fa.apply(nj(zW,qW,Ii,rj,Sg,wg,ej,J1,ko,p4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function _g(){var e=0,t=1,r,n,a,s,l=cn,u=!1,f;function h(g){return g==null||isNaN(g=+g)?f:l(a===0?.5:(g=(s(g)-r)*a,u?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t]=g,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),h):[e,t]},h.clamp=function(g){return arguments.length?(u=!!g,h):u},h.interpolator=function(g){return arguments.length?(l=g,h):l};function m(g){return function(y){var v,w;return arguments.length?([v,w]=y,l=g(v,w),h):[l(0),l(1)]}}return h.range=m(Xc),h.rangeRound=m(q1),h.unknown=function(g){return arguments.length?(f=g,h):f},function(g){return s=g,r=g(e),n=g(t),a=r===n?0:1/(n-r),h}}function Ys(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function g4(){var e=Ws(_g()(cn));return e.copy=function(){return Ys(e,g4())},Qi.apply(e,arguments)}function y4(){var e=H1(_g()).domain([1,10]);return e.copy=function(){return Ys(e,y4()).base(e.base())},Qi.apply(e,arguments)}function v4(){var e=V1(_g());return e.copy=function(){return Ys(e,v4()).constant(e.constant())},Qi.apply(e,arguments)}function aj(){var e=G1(_g());return e.copy=function(){return Ys(e,aj()).exponent(e.exponent())},Qi.apply(e,arguments)}function YY(){return aj.apply(null,arguments).exponent(.5)}function b4(){var e=[],t=cn;function r(n){if(n!=null&&!isNaN(n=+n))return t((xf(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Bs),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>RG(e,s/n))},r.copy=function(){return b4(t).domain(e)},Qi.apply(r,arguments)}function Ng(){var e=0,t=.5,r=1,n=1,a,s,l,u,f,h=cn,m,g=!1,y;function v(x){return isNaN(x=+x)?y:(x=.5+((x=+m(x))-s)*(n*x<n*s?u:f),h(g?Math.max(0,Math.min(1,x)):x))}v.domain=function(x){return arguments.length?([e,t,r]=x,a=m(e=+e),s=m(t=+t),l=m(r=+r),u=a===s?0:.5/(s-a),f=s===l?0:.5/(l-s),n=s<a?-1:1,v):[e,t,r]},v.clamp=function(x){return arguments.length?(g=!!x,v):g},v.interpolator=function(x){return arguments.length?(h=x,v):h};function w(x){return function(_){var N,O,E;return arguments.length?([N,O,E]=_,h=lW(x,[N,O,E]),v):[h(0),h(.5),h(1)]}}return v.range=w(Xc),v.rangeRound=w(q1),v.unknown=function(x){return arguments.length?(y=x,v):y},function(x){return m=x,a=x(e),s=x(t),l=x(r),u=a===s?0:.5/(s-a),f=s===l?0:.5/(l-s),n=s<a?-1:1,v}}function x4(){var e=Ws(Ng()(cn));return e.copy=function(){return Ys(e,x4())},Qi.apply(e,arguments)}function w4(){var e=H1(Ng()).domain([.1,1,10]);return e.copy=function(){return Ys(e,w4()).base(e.base())},Qi.apply(e,arguments)}function j4(){var e=V1(Ng());return e.copy=function(){return Ys(e,j4()).constant(e.constant())},Qi.apply(e,arguments)}function ij(){var e=G1(Ng());return e.copy=function(){return Ys(e,ij()).exponent(e.exponent())},Qi.apply(e,arguments)}function XY(){return ij.apply(null,arguments).exponent(.5)}const pd=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:$1,scaleDiverging:x4,scaleDivergingLog:w4,scaleDivergingPow:ij,scaleDivergingSqrt:XY,scaleDivergingSymlog:j4,scaleIdentity:e4,scaleImplicit:mw,scaleLinear:ZR,scaleLog:r4,scaleOrdinal:B1,scalePoint:BG,scalePow:W1,scaleQuantile:i4,scaleQuantize:s4,scaleRadial:a4,scaleSequential:g4,scaleSequentialLog:y4,scaleSequentialPow:aj,scaleSequentialQuantile:b4,scaleSequentialSqrt:YY,scaleSequentialSymlog:v4,scaleSqrt:PW,scaleSymlog:n4,scaleThreshold:o4,scaleTime:GY,scaleUtc:WY,tickFormat:JR},Symbol.toStringTag,{value:"Module"}));var Hi=e=>e.chartData,Og=W([Hi],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),sj=(e,t,r,n)=>n?Og(e):Hi(e),JY=(e,t,r)=>r?Og(e):Hi(e);function Li(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(lt(t)&&lt(r))return!0}return!1}function Nk(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function S4(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,s;if(lt(r))a=r;else if(typeof r=="function")return;if(lt(n))s=n;else if(typeof n=="function")return;var l=[a,s];if(Li(l))return l}}function ZY(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Li(n))return Nk(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,l,u;if(a==="auto")t!=null&&(l=Math.min(...t));else if(Ne(a))l=a;else if(typeof a=="function")try{t!=null&&(l=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&RC.test(a)){var f=RC.exec(a);if(f==null||f[1]==null||t==null)l=void 0;else{var h=+f[1];l=t[0]-h}}else l=t==null?void 0:t[0];if(s==="auto")t!=null&&(u=Math.max(...t));else if(Ne(s))u=s;else if(typeof s=="function")try{t!=null&&(u=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&IC.test(s)){var m=IC.exec(s);if(m==null||m[1]==null||t==null)u=void 0;else{var g=+m[1];u=t[1]+g}}else u=t==null?void 0:t[1];var y=[l,u];if(Li(y))return t==null?y:Nk(y,t,r)}}}var Jc=1e9,eX={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},lj,Gt=!0,ua="[DecimalError] ",Ko=ua+"Invalid argument: ",oj=ua+"Exponent out of range: ",Zc=Math.floor,So=Math.pow,tX=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,In,Tr=1e7,Ut=7,_4=9007199254740991,yp=Zc(_4/Ut),Oe={};Oe.absoluteValue=Oe.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Oe.comparedTo=Oe.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Oe.decimalPlaces=Oe.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ut;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Oe.dividedBy=Oe.div=function(e){return Ci(this,new this.constructor(e))};Oe.dividedToIntegerBy=Oe.idiv=function(e){var t=this,r=t.constructor;return Dt(Ci(t,new r(e),0,1),r.precision)};Oe.equals=Oe.eq=function(e){return!this.cmp(e)};Oe.exponent=function(){return vr(this)};Oe.greaterThan=Oe.gt=function(e){return this.cmp(e)>0};Oe.greaterThanOrEqualTo=Oe.gte=function(e){return this.cmp(e)>=0};Oe.isInteger=Oe.isint=function(){return this.e>this.d.length-2};Oe.isNegative=Oe.isneg=function(){return this.s<0};Oe.isPositive=Oe.ispos=function(){return this.s>0};Oe.isZero=function(){return this.s===0};Oe.lessThan=Oe.lt=function(e){return this.cmp(e)<0};Oe.lessThanOrEqualTo=Oe.lte=function(e){return this.cmp(e)<1};Oe.logarithm=Oe.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(In))throw Error(ua+"NaN");if(r.s<1)throw Error(ua+(r.s?"NaN":"-Infinity"));return r.eq(In)?new n(0):(Gt=!1,t=Ci(Kd(r,s),Kd(e,s),s),Gt=!0,Dt(t,a))};Oe.minus=Oe.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?E4(t,e):N4(t,(e.s=-e.s,e))};Oe.modulo=Oe.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(ua+"NaN");return r.s?(Gt=!1,t=Ci(r,e,0,1).times(e),Gt=!0,r.minus(t)):Dt(new n(r),a)};Oe.naturalExponential=Oe.exp=function(){return O4(this)};Oe.naturalLogarithm=Oe.ln=function(){return Kd(this)};Oe.negated=Oe.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Oe.plus=Oe.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?N4(t,e):E4(t,(e.s=-e.s,e))};Oe.precision=Oe.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ko+e);if(t=vr(a)+1,n=a.d.length-1,r=n*Ut+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Oe.squareRoot=Oe.sqrt=function(){var e,t,r,n,a,s,l,u=this,f=u.constructor;if(u.s<1){if(!u.s)return new f(0);throw Error(ua+"NaN")}for(e=vr(u),Gt=!1,a=Math.sqrt(+u),a==0||a==1/0?(t=Fa(u.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Zc((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new f(t)):n=new f(a.toString()),r=f.precision,a=l=r+3;;)if(s=n,n=s.plus(Ci(u,s,l+2)).times(.5),Fa(s.d).slice(0,l)===(t=Fa(n.d)).slice(0,l)){if(t=t.slice(l-3,l+1),a==l&&t=="4999"){if(Dt(s,r+1,0),s.times(s).eq(u)){n=s;break}}else if(t!="9999")break;l+=4}return Gt=!0,Dt(n,r)};Oe.times=Oe.mul=function(e){var t,r,n,a,s,l,u,f,h,m=this,g=m.constructor,y=m.d,v=(e=new g(e)).d;if(!m.s||!e.s)return new g(0);for(e.s*=m.s,r=m.e+e.e,f=y.length,h=v.length,f<h&&(s=y,y=v,v=s,l=f,f=h,h=l),s=[],l=f+h,n=l;n--;)s.push(0);for(n=h;--n>=0;){for(t=0,a=f+n;a>n;)u=s[a]+v[n]*y[a-n-1]+t,s[a--]=u%Tr|0,t=u/Tr|0;s[a]=(s[a]+t)%Tr|0}for(;!s[--l];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Gt?Dt(e,g.precision):e};Oe.toDecimalPlaces=Oe.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Ga(e,0,Jc),t===void 0?t=n.rounding:Ga(t,0,8),Dt(r,e+vr(r)+1,t))};Oe.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=el(n,!0):(Ga(e,0,Jc),t===void 0?t=a.rounding:Ga(t,0,8),n=Dt(new a(n),e+1,t),r=el(n,!0,e+1)),r};Oe.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?el(a):(Ga(e,0,Jc),t===void 0?t=s.rounding:Ga(t,0,8),n=Dt(new s(a),e+vr(a)+1,t),r=el(n.abs(),!1,e+vr(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Oe.toInteger=Oe.toint=function(){var e=this,t=e.constructor;return Dt(new t(e),vr(e)+1,t.rounding)};Oe.toNumber=function(){return+this};Oe.toPower=Oe.pow=function(e){var t,r,n,a,s,l,u=this,f=u.constructor,h=12,m=+(e=new f(e));if(!e.s)return new f(In);if(u=new f(u),!u.s){if(e.s<1)throw Error(ua+"Infinity");return u}if(u.eq(In))return u;if(n=f.precision,e.eq(In))return Dt(u,n);if(t=e.e,r=e.d.length-1,l=t>=r,s=u.s,l){if((r=m<0?-m:m)<=_4){for(a=new f(In),t=Math.ceil(n/Ut+4),Gt=!1;r%2&&(a=a.times(u),Ek(a.d,t)),r=Zc(r/2),r!==0;)u=u.times(u),Ek(u.d,t);return Gt=!0,e.s<0?new f(In).div(a):Dt(a,n)}}else if(s<0)throw Error(ua+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,u.s=1,Gt=!1,a=e.times(Kd(u,n+h)),Gt=!0,a=O4(a),a.s=s,a};Oe.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=vr(a),n=el(a,r<=s.toExpNeg||r>=s.toExpPos)):(Ga(e,1,Jc),t===void 0?t=s.rounding:Ga(t,0,8),a=Dt(new s(a),e,t),r=vr(a),n=el(a,e<=r||r<=s.toExpNeg,e)),n};Oe.toSignificantDigits=Oe.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Ga(e,1,Jc),t===void 0?t=n.rounding:Ga(t,0,8)),Dt(new n(r),e,t)};Oe.toString=Oe.valueOf=Oe.val=Oe.toJSON=Oe[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=vr(e),r=e.constructor;return el(e,t<=r.toExpNeg||t>=r.toExpPos)};function N4(e,t){var r,n,a,s,l,u,f,h,m=e.constructor,g=m.precision;if(!e.s||!t.s)return t.s||(t=new m(e)),Gt?Dt(t,g):t;if(f=e.d,h=t.d,l=e.e,a=t.e,f=f.slice(),s=l-a,s){for(s<0?(n=f,s=-s,u=h.length):(n=h,a=l,u=f.length),l=Math.ceil(g/Ut),u=l>u?l+1:u+1,s>u&&(s=u,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(u=f.length,s=h.length,u-s<0&&(s=u,n=h,h=f,f=n),r=0;s;)r=(f[--s]=f[s]+h[s]+r)/Tr|0,f[s]%=Tr;for(r&&(f.unshift(r),++a),u=f.length;f[--u]==0;)f.pop();return t.d=f,t.e=a,Gt?Dt(t,g):t}function Ga(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Ko+e)}function Fa(e){var t,r,n,a=e.length-1,s="",l=e[0];if(a>0){for(s+=l,t=1;t<a;t++)n=e[t]+"",r=Ut-n.length,r&&(s+=Ss(r)),s+=n;l=e[t],n=l+"",r=Ut-n.length,r&&(s+=Ss(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return s+l}var Ci=(function(){function e(n,a){var s,l=0,u=n.length;for(n=n.slice();u--;)s=n[u]*a+l,n[u]=s%Tr|0,l=s/Tr|0;return l&&n.unshift(l),n}function t(n,a,s,l){var u,f;if(s!=l)f=s>l?1:-1;else for(u=f=0;u<s;u++)if(n[u]!=a[u]){f=n[u]>a[u]?1:-1;break}return f}function r(n,a,s){for(var l=0;s--;)n[s]-=l,l=n[s]<a[s]?1:0,n[s]=l*Tr+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,l){var u,f,h,m,g,y,v,w,x,_,N,O,E,C,T,k,M,R,L=n.constructor,V=n.s==a.s?1:-1,G=n.d,K=a.d;if(!n.s)return new L(n);if(!a.s)throw Error(ua+"Division by zero");for(f=n.e-a.e,M=K.length,T=G.length,v=new L(V),w=v.d=[],h=0;K[h]==(G[h]||0);)++h;if(K[h]>(G[h]||0)&&--f,s==null?O=s=L.precision:l?O=s+(vr(n)-vr(a))+1:O=s,O<0)return new L(0);if(O=O/Ut+2|0,h=0,M==1)for(m=0,K=K[0],O++;(h<T||m)&&O--;h++)E=m*Tr+(G[h]||0),w[h]=E/K|0,m=E%K|0;else{for(m=Tr/(K[0]+1)|0,m>1&&(K=e(K,m),G=e(G,m),M=K.length,T=G.length),C=M,x=G.slice(0,M),_=x.length;_<M;)x[_++]=0;R=K.slice(),R.unshift(0),k=K[0],K[1]>=Tr/2&&++k;do m=0,u=t(K,x,M,_),u<0?(N=x[0],M!=_&&(N=N*Tr+(x[1]||0)),m=N/k|0,m>1?(m>=Tr&&(m=Tr-1),g=e(K,m),y=g.length,_=x.length,u=t(g,x,y,_),u==1&&(m--,r(g,M<y?R:K,y))):(m==0&&(u=m=1),g=K.slice()),y=g.length,y<_&&g.unshift(0),r(x,g,_),u==-1&&(_=x.length,u=t(K,x,M,_),u<1&&(m++,r(x,M<_?R:K,_))),_=x.length):u===0&&(m++,x=[0]),w[h++]=m,u&&x[0]?x[_++]=G[C]||0:(x=[G[C]],_=1);while((C++<T||x[0]!==void 0)&&O--)}return w[0]||w.shift(),v.e=f,Dt(v,l?s+vr(v)+1:s)}})();function O4(e,t){var r,n,a,s,l,u,f=0,h=0,m=e.constructor,g=m.precision;if(vr(e)>16)throw Error(oj+vr(e));if(!e.s)return new m(In);for(Gt=!1,u=g,l=new m(.03125);e.abs().gte(.1);)e=e.times(l),h+=5;for(n=Math.log(So(2,h))/Math.LN10*2+5|0,u+=n,r=a=s=new m(In),m.precision=u;;){if(a=Dt(a.times(e),u),r=r.times(++f),l=s.plus(Ci(a,r,u)),Fa(l.d).slice(0,u)===Fa(s.d).slice(0,u)){for(;h--;)s=Dt(s.times(s),u);return m.precision=g,t==null?(Gt=!0,Dt(s,g)):s}s=l}}function vr(e){for(var t=e.e*Ut,r=e.d[0];r>=10;r/=10)t++;return t}function $b(e,t,r){if(t>e.LN10.sd())throw Gt=!0,r&&(e.precision=r),Error(ua+"LN10 precision limit exceeded");return Dt(new e(e.LN10),t)}function Ss(e){for(var t="";e--;)t+="0";return t}function Kd(e,t){var r,n,a,s,l,u,f,h,m,g=1,y=10,v=e,w=v.d,x=v.constructor,_=x.precision;if(v.s<1)throw Error(ua+(v.s?"NaN":"-Infinity"));if(v.eq(In))return new x(0);if(t==null?(Gt=!1,h=_):h=t,v.eq(10))return t==null&&(Gt=!0),$b(x,h);if(h+=y,x.precision=h,r=Fa(w),n=r.charAt(0),s=vr(v),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)v=v.times(e),r=Fa(v.d),n=r.charAt(0),g++;s=vr(v),n>1?(v=new x("0."+r),s++):v=new x(n+"."+r.slice(1))}else return f=$b(x,h+2,_).times(s+""),v=Kd(new x(n+"."+r.slice(1)),h-y).plus(f),x.precision=_,t==null?(Gt=!0,Dt(v,_)):v;for(u=l=v=Ci(v.minus(In),v.plus(In),h),m=Dt(v.times(v),h),a=3;;){if(l=Dt(l.times(m),h),f=u.plus(Ci(l,new x(a),h)),Fa(f.d).slice(0,h)===Fa(u.d).slice(0,h))return u=u.times(2),s!==0&&(u=u.plus($b(x,h+2,_).times(s+""))),u=Ci(u,new x(g),h),x.precision=_,t==null?(Gt=!0,Dt(u,_)):u;u=f,a+=2}}function Ok(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Zc(r/Ut),e.d=[],n=(r+1)%Ut,r<0&&(n+=Ut),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Ut;n<a;)e.d.push(+t.slice(n,n+=Ut));t=t.slice(n),n=Ut-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Gt&&(e.e>yp||e.e<-yp))throw Error(oj+r)}else e.s=0,e.e=0,e.d=[0];return e}function Dt(e,t,r){var n,a,s,l,u,f,h,m,g=e.d;for(l=1,s=g[0];s>=10;s/=10)l++;if(n=t-l,n<0)n+=Ut,a=t,h=g[m=0];else{if(m=Math.ceil((n+1)/Ut),s=g.length,m>=s)return e;for(h=s=g[m],l=1;s>=10;s/=10)l++;n%=Ut,a=n-Ut+l}if(r!==void 0&&(s=So(10,l-a-1),u=h/s%10|0,f=t<0||g[m+1]!==void 0||h%s,f=r<4?(u||f)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||f||r==6&&(n>0?a>0?h/So(10,l-a):0:g[m-1])%10&1||r==(e.s<0?8:7))),t<1||!g[0])return f?(s=vr(e),g.length=1,t=t-s-1,g[0]=So(10,(Ut-t%Ut)%Ut),e.e=Zc(-t/Ut)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(n==0?(g.length=m,s=1,m--):(g.length=m+1,s=So(10,Ut-n),g[m]=a>0?(h/So(10,l-a)%So(10,a)|0)*s:0),f)for(;;)if(m==0){(g[0]+=s)==Tr&&(g[0]=1,++e.e);break}else{if(g[m]+=s,g[m]!=Tr)break;g[m--]=0,s=1}for(n=g.length;g[--n]===0;)g.pop();if(Gt&&(e.e>yp||e.e<-yp))throw Error(oj+vr(e));return e}function E4(e,t){var r,n,a,s,l,u,f,h,m,g,y=e.constructor,v=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),Gt?Dt(t,v):t;if(f=e.d,g=t.d,n=t.e,h=e.e,f=f.slice(),l=h-n,l){for(m=l<0,m?(r=f,l=-l,u=g.length):(r=g,n=h,u=f.length),a=Math.max(Math.ceil(v/Ut),u)+2,l>a&&(l=a,r.length=1),r.reverse(),a=l;a--;)r.push(0);r.reverse()}else{for(a=f.length,u=g.length,m=a<u,m&&(u=a),a=0;a<u;a++)if(f[a]!=g[a]){m=f[a]<g[a];break}l=0}for(m&&(r=f,f=g,g=r,t.s=-t.s),u=f.length,a=g.length-u;a>0;--a)f[u++]=0;for(a=g.length;a>l;){if(f[--a]<g[a]){for(s=a;s&&f[--s]===0;)f[s]=Tr-1;--f[s],f[a]+=Tr}f[a]-=g[a]}for(;f[--u]===0;)f.pop();for(;f[0]===0;f.shift())--n;return f[0]?(t.d=f,t.e=n,Gt?Dt(t,v):t):new y(0)}function el(e,t,r){var n,a=vr(e),s=Fa(e.d),l=s.length;return t?(r&&(n=r-l)>0?s=s.charAt(0)+"."+s.slice(1)+Ss(n):l>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+Ss(-a-1)+s,r&&(n=r-l)>0&&(s+=Ss(n))):a>=l?(s+=Ss(a+1-l),r&&(n=r-a-1)>0&&(s=s+"."+Ss(n))):((n=a+1)<l&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-l)>0&&(a+1===l&&(s+="."),s+=Ss(n))),e.s<0?"-"+s:s}function Ek(e,t){if(e.length>t)return e.length=t,!0}function A4(e){var t,r,n;function a(s){var l=this;if(!(l instanceof a))return new a(s);if(l.constructor=a,s instanceof a){l.s=s.s,l.e=s.e,l.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Ko+s);if(s>0)l.s=1;else if(s<0)s=-s,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(s===~~s&&s<1e7){l.e=0,l.d=[s];return}return Ok(l,s.toString())}else if(typeof s!="string")throw Error(Ko+s);if(s.charCodeAt(0)===45?(s=s.slice(1),l.s=-1):l.s=1,tX.test(s))Ok(l,s);else throw Error(Ko+s)}if(a.prototype=Oe,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=A4,a.config=a.set=rX,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function rX(e){if(!e||typeof e!="object")throw Error(ua+"Object expected");var t,r,n,a=["precision",1,Jc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Zc(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Ko+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Ko+r+": "+n);return this}var lj=A4(eX);In=new lj(1);const _t=lj;function C4(e){var t;return e===0?t=1:t=Math.floor(new _t(e).abs().log(10).toNumber())+1,t}function k4(e,t,r){for(var n=new _t(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}var P4=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},T4=(e,t,r)=>{if(e.lte(0))return new _t(0);var n=C4(e.toNumber()),a=new _t(10).pow(n),s=e.div(a),l=n!==1?.05:.1,u=new _t(Math.ceil(s.div(l).toNumber())).add(r).mul(l),f=u.mul(a);return t?new _t(f.toNumber()):new _t(Math.ceil(f.toNumber()))},nX=(e,t,r)=>{var n=new _t(1),a=new _t(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new _t(10).pow(C4(e)-1),a=new _t(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new _t(Math.floor(e)))}else e===0?a=new _t(Math.floor((t-1)/2)):r||(a=new _t(Math.floor(e)));for(var l=Math.floor((t-1)/2),u=[],f=0;f<t;f++)u.push(a.add(new _t(f-l).mul(n)).toNumber());return u},D4=function(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new _t(0),tickMin:new _t(0),tickMax:new _t(0)};var l=T4(new _t(r).sub(t).div(n-1),a,s),u;t<=0&&r>=0?u=new _t(0):(u=new _t(t).add(r).div(2),u=u.sub(new _t(u).mod(l)));var f=Math.ceil(u.sub(t).div(l).toNumber()),h=Math.ceil(new _t(r).sub(u).div(l).toNumber()),m=f+h+1;return m>n?D4(t,r,n,a,s+1):(m<n&&(h=r>0?h+(n-m):h,f=r>0?f:f+(n-m)),{step:l,tickMin:u.sub(new _t(f).mul(l)),tickMax:u.add(new _t(h).mul(l))})},aX=function(t){var[r,n]=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(a,2),[u,f]=P4([r,n]);if(u===-1/0||f===1/0){var h=f===1/0?[u,...Array(a-1).fill(1/0)]:[...Array(a-1).fill(-1/0),f];return r>n?h.reverse():h}if(u===f)return nX(u,a,s);var{step:m,tickMin:g,tickMax:y}=D4(u,f,l,s,0),v=k4(g,y.add(new _t(.1).mul(m)),m);return r>n?v.reverse():v},iX=function(t,r){var[n,a]=t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[l,u]=P4([n,a]);if(l===-1/0||u===1/0)return[n,a];if(l===u)return[l];var f=Math.max(r,2),h=T4(new _t(u).sub(l).div(f-1),s,0),m=[...k4(new _t(l),new _t(u),h),u];return s===!1&&(m=m.map(g=>Math.round(g))),n>a?m.reverse():m},M4=e=>e.rootProps.maxBarSize,sX=e=>e.rootProps.barGap,R4=e=>e.rootProps.barCategoryGap,oX=e=>e.rootProps.barSize,_f=e=>e.rootProps.stackOffset,I4=e=>e.rootProps.reverseStackOrder,cj=e=>e.options.chartName,uj=e=>e.rootProps.syncId,L4=e=>e.rootProps.syncMethod,dj=e=>e.options.eventEmitter,yr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},bo={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},Ra={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},Eg=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t};function Ag(e,t,r){if(r!=="auto")return r;if(e!=null)return qi(e,t)?"category":"number"}function Ak(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ak(Object(r),!0).forEach(function(n){lX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ak(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lX(e,t,r){return(t=cX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cX(e){var t=uX(e,"string");return typeof t=="symbol"?t:t+""}function uX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ck={allowDataOverflow:bo.allowDataOverflow,allowDecimals:bo.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:bo.angleAxisId,includeHidden:!1,name:void 0,reversed:bo.reversed,scale:bo.scale,tick:bo.tick,tickCount:void 0,ticks:void 0,type:bo.type,unit:void 0},kk={allowDataOverflow:Ra.allowDataOverflow,allowDecimals:Ra.allowDecimals,allowDuplicatedCategory:Ra.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ra.radiusAxisId,includeHidden:Ra.includeHidden,name:void 0,reversed:Ra.reversed,scale:Ra.scale,tick:Ra.tick,tickCount:Ra.tickCount,ticks:void 0,type:Ra.type,unit:void 0},dX=(e,t)=>{if(t!=null)return e.polarAxis.angleAxis[t]},fj=W([dX,jR],(e,t)=>{var r;if(e!=null)return e;var n=(r=Ag(t,"angleAxis",Ck.type))!==null&&r!==void 0?r:"category";return vp(vp({},Ck),{},{type:n})}),fX=(e,t)=>e.polarAxis.radiusAxis[t],hj=W([fX,jR],(e,t)=>{var r;if(e!=null)return e;var n=(r=Ag(t,"radiusAxis",kk.type))!==null&&r!==void 0?r:"category";return vp(vp({},kk),{},{type:n})}),Cg=e=>e.polarOptions,mj=W([Fi,Ki,_r],$R),B4=W([Cg,mj],(e,t)=>{if(e!=null)return Jr(e.innerRadius,t,0)}),$4=W([Cg,mj],(e,t)=>{if(e!=null)return Jr(e.outerRadius,t,t*.8)}),hX=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},U4=W([Cg],hX);W([fj,U4],Eg);var z4=W([mj,B4,$4],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});W([hj,z4],Eg);var q4=W([pt,Cg,B4,$4,Fi,Ki],(e,t,r,n,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:l,cy:u,startAngle:f,endAngle:h}=t;return{cx:Jr(l,a,a/2),cy:Jr(u,s,s/2),innerRadius:r,outerRadius:n,startAngle:f,endAngle:h,clockWise:!1}}}),Jt=(e,t)=>t,Nf=(e,t,r)=>r;function pj(e){return e==null?void 0:e.id}function F4(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:a,dataKey:s}=r,l=new Map;return e.forEach(u=>{var f,h=(f=u.data)!==null&&f!==void 0?f:n;if(!(h==null||h.length===0)){var m=pj(u);h.forEach((g,y)=>{var v=s==null||a?y:String(kt(g,s,null)),w=kt(g,u.dataKey,0),x;l.has(v)?x=l.get(v):x={},Object.assign(x,{[m]:w}),l.set(v,x)})}}),Array.from(l.values())}function kg(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Pg=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Tg(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function mX(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Ir=e=>{var t=pt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},eu=e=>e.tooltip.settings.axisId;function pX(e){if(e in pd)return pd[e]();var t="scale".concat(df(e));if(t in pd)return pd[t]()}function Pk(e){var t=e.ticks,r=e.bandwidth,n=e.range(),a=[Math.min(...n),Math.max(...n)];return{domain:()=>e.domain(),range:(function(s){function l(){return s.apply(this,arguments)}return l.toString=function(){return s.toString()},l})(()=>a),rangeMin:()=>a[0],rangeMax:()=>a[1],isInRange(s){var l=a[0],u=a[1];return l<=u?s>=l&&s<=u:s>=u&&s<=l},bandwidth:r?()=>r.call(e):void 0,ticks:t?s=>t.call(e,s):void 0,map:(s,l)=>{var u=e(s);if(u!=null){if(e.bandwidth&&l!==null&&l!==void 0&&l.position){var f=e.bandwidth();switch(l.position){case"middle":u+=f/2;break;case"end":u+=f;break}}return u}}}}function Tk(e,t,r){if(typeof e=="function")return Pk(e.copy().domain(t).range(r));if(e!=null){var n=pX(e);if(n!=null)return n.domain(t).range(r),Pk(n)}}var K4=(e,t)=>{if(t!=null)switch(e){case"linear":{if(!Li(t)){for(var r,n,a=0;a<t.length;a++){var s=t[a];lt(s)&&((r===void 0||s<r)&&(r=s),(n===void 0||s>n)&&(n=s))}return r!==void 0&&n!==void 0?[r,n]:void 0}return t}default:return t}};function Dk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dk(Object(r),!0).forEach(function(n){gX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gX(e,t,r){return(t=yX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yX(e){var t=vX(e,"string");return typeof t=="symbol"?t:t+""}function vX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vw=[0,"auto"],Cr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Q4=(e,t)=>e.cartesianAxis.xAxis[t],Vi=(e,t)=>{var r=Q4(e,t);return r??Cr},kr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:vw,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:pf},H4=(e,t)=>e.cartesianAxis.yAxis[t],Gi=(e,t)=>{var r=H4(e,t);return r??kr},bX={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},gj=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??bX},lr=(e,t,r)=>{switch(t){case"xAxis":return Vi(e,r);case"yAxis":return Gi(e,r);case"zAxis":return gj(e,r);case"angleAxis":return fj(e,r);case"radiusAxis":return hj(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},xX=(e,t,r)=>{switch(t){case"xAxis":return Vi(e,r);case"yAxis":return Gi(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},tu=(e,t,r)=>{switch(t){case"xAxis":return Vi(e,r);case"yAxis":return Gi(e,r);case"angleAxis":return fj(e,r);case"radiusAxis":return hj(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},V4=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function yj(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Dg=e=>e.graphicalItems.cartesianItems,wX=W([Jt,Nf],yj),vj=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Of=W([Dg,lr,wX],vj,{memoizeOptions:{resultEqualityCheck:Tg}}),G4=W([Of],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(kg)),W4=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),jX=W([Of],W4),bj=e=>e.map(t=>t.data).filter(Boolean).flat(1),SX=W([Of],bj,{memoizeOptions:{resultEqualityCheck:Tg}}),xj=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},wj=W([SX,sj],xj),jj=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:kt(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:kt(a,n)}))):e.map(n=>({value:n})),Mg=W([wj,lr,Of],jj);function Y4(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Om(e){if(Ha(e)||e instanceof Date){var t=Number(e);if(lt(t))return t}}function Mk(e){if(Array.isArray(e)){var t=[Om(e[0]),Om(e[1])];return Li(t)?t:void 0}var r=Om(e);if(r!=null)return[r,r]}function Bi(e){return e.map(Om).filter(jn)}function _X(e,t,r){return!r||typeof t!="number"||Qa(t)?[]:r.length?Bi(r.flatMap(n=>{var a=kt(e,n.dataKey),s,l;if(Array.isArray(a)?[s,l]=a:s=l=a,!(!lt(s)||!lt(l)))return[t-s,t+l]})):[]}var Or=e=>{var t=Ir(e),r=eu(e);return tu(e,t,r)},Ef=W([Or],e=>e==null?void 0:e.dataKey),NX=W([G4,sj,Or],F4),X4=(e,t,r,n)=>{var a={},s=t.reduce((l,u)=>{if(u.stackId==null)return l;var f=l[u.stackId];return f==null&&(f=[]),f.push(u),l[u.stackId]=f,l},a);return Object.fromEntries(Object.entries(s).map(l=>{var[u,f]=l,h=n?[...f].reverse():f,m=h.map(pj);return[u,{stackedData:Q7(e,m,r),graphicalItems:h}]}))},bw=W([NX,G4,_f,I4],X4),J4=(e,t,r,n)=>{var{dataStartIndex:a,dataEndIndex:s}=t;if(n==null&&r!=="zAxis"){var l=Y7(e,a,s);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},OX=W([lr],e=>e.allowDataOverflow),Sj=e=>{var t;if(e==null||!("domain"in e))return vw;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=Bi(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:vw},_j=W([lr],Sj),Nj=W([_j,OX],S4),EX=W([bw,Hi,Jt,Nj],J4,{memoizeOptions:{resultEqualityCheck:Pg}}),Rg=e=>e.errorBars,AX=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>Y4(r,n)),xp=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),l=Math.min(...s),u=Math.max(...s);return[l,u]}},Oj=(e,t,r,n,a)=>{var s,l;if(r.length>0&&e.forEach(u=>{r.forEach(f=>{var h,m,g=(h=n[f.id])===null||h===void 0?void 0:h.filter(N=>Y4(a,N)),y=kt(u,(m=t.dataKey)!==null&&m!==void 0?m:f.dataKey),v=_X(u,y,g);if(v.length>=2){var w=Math.min(...v),x=Math.max(...v);(s==null||w<s)&&(s=w),(l==null||x>l)&&(l=x)}var _=Mk(y);_!=null&&(s=s==null?_[0]:Math.min(s,_[0]),l=l==null?_[1]:Math.max(l,_[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(u=>{var f=Mk(kt(u,t.dataKey));f!=null&&(s=s==null?f[0]:Math.min(s,f[0]),l=l==null?f[1]:Math.max(l,f[1]))}),lt(s)&&lt(l))return[s,l]},CX=W([wj,lr,jX,Rg,Jt],Oj,{memoizeOptions:{resultEqualityCheck:Pg}});function kX(e){var{value:t}=e;if(Ha(t)||t instanceof Date)return t}var PX=(e,t,r)=>{var n=e.map(kX).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&vM(n))?FR(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},Z4=e=>e.referenceElements.dots,ru=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),TX=W([Z4,Jt,Nf],ru),eI=e=>e.referenceElements.areas,DX=W([eI,Jt,Nf],ru),tI=e=>e.referenceElements.lines,MX=W([tI,Jt,Nf],ru),rI=(e,t)=>{if(e!=null){var r=Bi(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},RX=W(TX,Jt,rI),nI=(e,t)=>{if(e!=null){var r=Bi(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},IX=W([DX,Jt],nI);function LX(e){var t;if(e.x!=null)return Bi([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:Bi(r)}function BX(e){var t;if(e.y!=null)return Bi([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:Bi(r)}var aI=(e,t)=>{if(e!=null){var r=e.flatMap(n=>t==="xAxis"?LX(n):BX(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},$X=W([MX,Jt],aI),UX=W(RX,$X,IX,(e,t,r)=>xp(e,r,t)),Ej=(e,t,r,n,a,s,l,u)=>{if(r!=null)return r;var f=l==="vertical"&&u==="xAxis"||l==="horizontal"&&u==="yAxis",h=f?xp(n,s,a):xp(s,a);return ZY(t,h,e.allowDataOverflow)},zX=W([lr,_j,Nj,EX,CX,UX,pt,Jt],Ej,{memoizeOptions:{resultEqualityCheck:Pg}}),qX=[0,1],Aj=(e,t,r,n,a,s,l)=>{if(!((e==null||r==null||r.length===0)&&l===void 0)){var{dataKey:u,type:f}=e,h=qi(t,s);if(h&&u==null){var m;return FR(0,(m=r==null?void 0:r.length)!==null&&m!==void 0?m:0)}return f==="category"?PX(n,e,h):a==="expand"?qX:l}},Cj=W([lr,pt,wj,Mg,_f,Jt,zX],Aj);function FX(e){return e in pd}var iI=(e,t,r)=>{if(e!=null){var{scale:n,type:a}=e;if(n==="auto")return a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!t)?"point":a==="category"?"band":"linear";if(typeof n=="string"){var s="scale".concat(df(n));return FX(s)?s:"point"}}},Xs=W([lr,V4,cj],iI);function kj(e,t,r,n){if(!(r==null||n==null))return typeof e.scale=="function"?Tk(e.scale,r,n):Tk(t,r,n)}var Pj=(e,t,r)=>{var n=Sj(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Li(e))return aX(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Li(e))return iX(e,t.tickCount,t.allowDecimals)}},Tj=W([Cj,tu,Xs],Pj),Dj=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Li(t)&&Array.isArray(r)&&r.length>0){var a,s,l=t[0],u=(a=r[0])!==null&&a!==void 0?a:0,f=t[1],h=(s=r[r.length-1])!==null&&s!==void 0?s:0;return[Math.min(l,u),Math.max(f,h)]}return t},KX=W([lr,Cj,Tj,Jt],Dj),QX=W(Mg,lr,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Bi(e.map(g=>g.value))).sort((g,y)=>g-y),a=n[0],s=n[n.length-1];if(a==null||s==null)return 1/0;var l=s-a;if(l===0)return 1/0;for(var u=0;u<n.length-1;u++){var f=n[u],h=n[u+1];if(!(f==null||h==null)){var m=h-f;r=Math.min(r,m)}}return r/l}}),sI=W(QX,pt,R4,_r,(e,t,r,n,a)=>a,(e,t,r,n,a)=>{if(!lt(e))return 0;var s=t==="vertical"?n.height:n.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var l=Jr(r,e*s),u=e*s/2;return u-l-(u-l)/s*l}return 0}),HX=(e,t,r)=>{var n=Vi(e,t);return n==null||typeof n.padding!="string"?0:sI(e,"xAxis",t,r,n.padding)},VX=(e,t,r)=>{var n=Gi(e,t);return n==null||typeof n.padding!="string"?0:sI(e,"yAxis",t,r,n.padding)},GX=W(Vi,HX,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),WX=W(Gi,VX,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),YX=W([_r,GX,mg,hg,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),XX=W([_r,pt,WX,mg,hg,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:l}=a;return s?[n.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Af=(e,t,r,n)=>{var a;switch(t){case"xAxis":return YX(e,r,n);case"yAxis":return XX(e,r,n);case"zAxis":return(a=gj(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return U4(e);case"radiusAxis":return z4(e,r);default:return}},oI=W([lr,Af],Eg),JX=W([Xs,KX],K4),Ig=W([lr,Xs,JX,oI],kj);W([Of,Rg,Jt],AX);function lI(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Lg=(e,t)=>t,Bg=(e,t,r)=>r,ZX=W(dg,Lg,Bg,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(lI)),eJ=W(fg,Lg,Bg,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(lI)),cI=(e,t)=>({width:e.width,height:t.height}),tJ=(e,t)=>{var r=typeof t.width=="number"?t.width:pf;return{width:r,height:e.height}},uI=W(_r,Vi,cI),rJ=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},nJ=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},aJ=W(Ki,_r,ZX,Lg,Bg,(e,t,r,n,a)=>{var s={},l;return r.forEach(u=>{var f=cI(t,u);l==null&&(l=rJ(t,n,e));var h=n==="top"&&!a||n==="bottom"&&a;s[u.id]=l-Number(h)*f.height,l+=(h?-1:1)*f.height}),s}),iJ=W(Fi,_r,eJ,Lg,Bg,(e,t,r,n,a)=>{var s={},l;return r.forEach(u=>{var f=tJ(t,u);l==null&&(l=nJ(t,n,e));var h=n==="left"&&!a||n==="right"&&a;s[u.id]=l-Number(h)*f.width,l+=(h?-1:1)*f.width}),s}),sJ=(e,t)=>{var r=Vi(e,t);if(r!=null)return aJ(e,r.orientation,r.mirror)},oJ=W([_r,Vi,sJ,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:e.left,y:0}:{x:e.left,y:a}}}),lJ=(e,t)=>{var r=Gi(e,t);if(r!=null)return iJ(e,r.orientation,r.mirror)},cJ=W([_r,Gi,lJ,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:e.top}:{x:a,y:e.top}}}),dI=W(_r,Gi,(e,t)=>{var r=typeof t.width=="number"?t.width:pf;return{width:r,height:e.height}}),Rk=(e,t,r)=>{switch(t){case"xAxis":return uI(e,r).width;case"yAxis":return dI(e,r).height;default:return}},fI=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:l}=r,u=qi(e,n),f=t.map(h=>h.value);if(l&&u&&s==="category"&&a&&vM(f))return f}},Mj=W([pt,Mg,lr,Jt],fI),hI=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,l=qi(e,n);if(l&&(a==="number"||s!=="auto"))return t.map(u=>u.value)}},Rj=W([pt,Mg,tu,Jt],hI),Ik=W([pt,xX,Xs,Ig,Mj,Rj,Af,Tj,Jt],(e,t,r,n,a,s,l,u,f)=>{if(t!=null){var h=qi(e,f);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:f,categoricalDomain:s,duplicateDomain:a,isCategorical:h,niceTicks:u,range:l,realScaleType:r,scale:n}}}),uJ=(e,t,r,n,a,s,l,u,f)=>{if(!(t==null||n==null)){var h=qi(e,f),{type:m,ticks:g,tickCount:y}=t,v=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,w=m==="category"&&n.bandwidth?n.bandwidth()/v:0;w=f==="angleAxis"&&s!=null&&s.length>=2?Dr(s[0]-s[1])*2*w:w;var x=g||a;return x?x.map((_,N)=>{var O=l?l.indexOf(_):_,E=n.map(O);return lt(E)?{index:N,coordinate:E+w,value:_,offset:w}:null}).filter(jn):h&&u?u.map((_,N)=>{var O=n.map(_);return lt(O)?{coordinate:O+w,value:_,index:N,offset:w}:null}).filter(jn):n.ticks?n.ticks(y).map((_,N)=>{var O=n.map(_);return lt(O)?{coordinate:O+w,value:_,index:N,offset:w}:null}).filter(jn):n.domain().map((_,N)=>{var O=n.map(_);return lt(O)?{coordinate:O+w,value:l?l[_]:_,index:N,offset:w}:null}).filter(jn)}},mI=W([pt,tu,Xs,Ig,Tj,Af,Mj,Rj,Jt],uJ),dJ=(e,t,r,n,a,s,l)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var u=qi(e,l),{tickCount:f}=t,h=0;return h=l==="angleAxis"&&(n==null?void 0:n.length)>=2?Dr(n[0]-n[1])*2*h:h,u&&s?s.map((m,g)=>{var y=r.map(m);return lt(y)?{coordinate:y+h,value:m,index:g,offset:h}:null}).filter(jn):r.ticks?r.ticks(f).map((m,g)=>{var y=r.map(m);return lt(y)?{coordinate:y+h,value:m,index:g,offset:h}:null}).filter(jn):r.domain().map((m,g)=>{var y=r.map(m);return lt(y)?{coordinate:y+h,value:a?a[m]:m,index:g,offset:h}:null}).filter(jn)}},zs=W([pt,tu,Ig,Af,Mj,Rj,Jt],dJ),qs=W(lr,Ig,(e,t)=>{if(!(e==null||t==null))return bp(bp({},e),{},{scale:t})}),fJ=W([lr,Xs,Cj,oI],kj);W((e,t,r)=>gj(e,r),fJ,(e,t)=>{if(!(e==null||t==null))return bp(bp({},e),{},{scale:t})});var hJ=W([pt,dg,fg],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),pI=e=>e.options.defaultTooltipEventType,gI=e=>e.options.validateTooltipEventTypes;function yI(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function Ij(e,t){var r=pI(e),n=gI(e);return yI(t,r,n)}function mJ(e){return Ce(t=>Ij(t,e))}var vI=(e,t)=>{var r,n=Number(t);if(!(Qa(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},pJ=e=>e.tooltip.settings,Os={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},gJ={itemInteraction:{click:Os,hover:Os},axisInteraction:{click:Os,hover:Os},keyboardInteraction:Os,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},bI=Nn({name:"tooltip",initialState:gJ,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Ht()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,a=Oa(e).tooltipItemPayloads.indexOf(r);a>-1&&(e.tooltipItemPayloads[a]=n)},prepare:Ht()},removeTooltipEntrySettings:{reducer(e,t){var r=Oa(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Ht()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:yJ,replaceTooltipEntrySettings:vJ,removeTooltipEntrySettings:bJ,setTooltipSettingsState:xJ,setActiveMouseOverItemIndex:xI,mouseLeaveItem:wJ,mouseLeaveChart:wI,setActiveClickItemIndex:jJ,setMouseOverAxisIndex:jI,setMouseClickAxisIndex:SJ,setSyncInteraction:xw,setKeyboardInteraction:ww}=bI.actions,_J=bI.reducer;function Lk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lk(Object(r),!0).forEach(function(n){NJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NJ(e,t,r){return(t=OJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OJ(e){var t=EJ(e,"string");return typeof t=="symbol"?t:t+""}function EJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AJ(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function CJ(e){return e.index!=null}var SI=(e,t,r,n)=>{if(t==null)return Os;var a=AJ(e,t,r);if(a==null)return Os;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(CJ(a)){if(s)return gm(gm({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return gm(gm({},Os),{},{coordinate:a.coordinate})};function kJ(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function PJ(e,t){var r=kJ(e),n=t[0],a=t[1];if(r===void 0)return!1;var s=Math.min(n,a),l=Math.max(n,a);return r>=s&&r<=l}function TJ(e,t,r){if(r==null||t==null)return!0;var n=kt(e,t);return n==null||!Li(r)?!0:PJ(n,r)}var Lj=(e,t,r,n)=>{var a=e==null?void 0:e.index;if(a==null)return null;var s=Number(a);if(!lt(s))return a;var l=0,u=1/0;t.length>0&&(u=t.length-1);var f=Math.max(l,Math.min(s,u)),h=t[f];return h==null||TJ(h,r,n)?String(f):null},_I=(e,t,r,n,a,s,l)=>{if(s!=null){var u=l[0],f=u==null?void 0:u.getPosition(s);if(f!=null)return f;var h=a==null?void 0:a[Number(s)];if(h)switch(r){case"horizontal":return{x:h.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:h.coordinate}}}},NI=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;if(r==="hover"?a=e.itemInteraction.hover.graphicalItemId:a=e.itemInteraction.click.graphicalItemId,a==null&&n!=null){var s=e.tooltipItemPayloads[0];return s!=null?[s]:[]}return e.tooltipItemPayloads.filter(l=>{var u;return((u=l.settings)===null||u===void 0?void 0:u.graphicalItemId)===a})},OI=e=>e.options.tooltipPayloadSearcher,nu=e=>e.tooltip;function Bk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $k(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Bk(Object(r),!0).forEach(function(n){DJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DJ(e,t,r){return(t=MJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MJ(e){var t=RJ(e,"string");return typeof t=="symbol"?t:t+""}function RJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IJ(e,t){return e??t}var EI=(e,t,r,n,a,s,l)=>{if(!(t==null||s==null)){var{chartData:u,computedData:f,dataStartIndex:h,dataEndIndex:m}=r,g=[];return e.reduce((y,v)=>{var w,{dataDefinedOnItem:x,settings:_}=v,N=IJ(x,u),O=Array.isArray(N)?dR(N,h,m):N,E=(w=_==null?void 0:_.dataKey)!==null&&w!==void 0?w:n,C=_==null?void 0:_.nameKey,T;if(n&&Array.isArray(O)&&!Array.isArray(O[0])&&l==="axis"?T=bM(O,n,a):T=s(O,t,f,C),Array.isArray(T))T.forEach(M=>{var R=$k($k({},_),{},{name:M.name,unit:M.unit,color:void 0,fill:void 0});y.push(LC({tooltipEntrySettings:R,dataKey:M.dataKey,payload:M.payload,value:kt(M.payload,M.dataKey),name:M.name}))});else{var k;y.push(LC({tooltipEntrySettings:_,dataKey:E,payload:T,value:kt(T,E),name:(k=kt(T,C))!==null&&k!==void 0?k:_==null?void 0:_.name}))}return y},g)}},Bj=W([Or,V4,cj],iI),LJ=W([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),BJ=W([Ir,eu],yj),au=W([LJ,Or,BJ],vj,{memoizeOptions:{resultEqualityCheck:Tg}}),$J=W([au],e=>e.filter(kg)),UJ=W([au],bj,{memoizeOptions:{resultEqualityCheck:Tg}}),iu=W([UJ,Hi],xj),zJ=W([$J,Hi,Or],F4),$j=W([iu,Or,au],jj),AI=W([Or],Sj),qJ=W([Or],e=>e.allowDataOverflow),CI=W([AI,qJ],S4),FJ=W([au],e=>e.filter(kg)),KJ=W([zJ,FJ,_f,I4],X4),QJ=W([KJ,Hi,Ir,CI],J4),HJ=W([au],W4),VJ=W([iu,Or,HJ,Rg,Ir],Oj,{memoizeOptions:{resultEqualityCheck:Pg}}),GJ=W([Z4,Ir,eu],ru),WJ=W([GJ,Ir],rI),YJ=W([eI,Ir,eu],ru),XJ=W([YJ,Ir],nI),JJ=W([tI,Ir,eu],ru),ZJ=W([JJ,Ir],aI),eZ=W([WJ,ZJ,XJ],xp),tZ=W([Or,AI,CI,QJ,VJ,eZ,pt,Ir],Ej),Cf=W([Or,pt,iu,$j,_f,Ir,tZ],Aj),rZ=W([Cf,Or,Bj],Pj),nZ=W([Or,Cf,rZ,Ir],Dj),kI=e=>{var t=Ir(e),r=eu(e),n=!1;return Af(e,t,r,n)},PI=W([Or,kI],Eg),TI=W([Or,Bj,nZ,PI],kj),aZ=W([pt,$j,Or,Ir],fI),iZ=W([pt,$j,Or,Ir],hI),sZ=(e,t,r,n,a,s,l,u)=>{if(t){var{type:f}=t,h=qi(e,u);if(n){var m=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,g=f==="category"&&n.bandwidth?n.bandwidth()/m:0;return g=u==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Dr(a[0]-a[1])*2*g:g,h&&l?l.map((y,v)=>{var w=n.map(y);return lt(w)?{coordinate:w+g,value:y,index:v,offset:g}:null}).filter(jn):n.domain().map((y,v)=>{var w=n.map(y);return lt(w)?{coordinate:w+g,value:s?s[y]:y,index:v,offset:g}:null}).filter(jn)}}},Wi=W([pt,Or,Bj,TI,kI,aZ,iZ,Ir],sZ),Uj=W([pI,gI,pJ],(e,t,r)=>yI(r.shared,e,t)),DI=e=>e.tooltip.settings.trigger,zj=e=>e.tooltip.settings.defaultIndex,kf=W([nu,Uj,DI,zj],SI),Fs=W([kf,iu,Ef,Cf],Lj),MI=W([Wi,Fs],vI),qj=W([kf],e=>{if(e)return e.dataKey}),oZ=W([kf],e=>{if(e)return e.graphicalItemId}),RI=W([nu,Uj,DI,zj],NI),lZ=W([Fi,Ki,pt,_r,Wi,zj,RI],_I),cZ=W([kf,lZ],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),uZ=W([kf],e=>{var t;return(t=e==null?void 0:e.active)!==null&&t!==void 0?t:!1}),dZ=W([RI,Fs,Hi,Ef,MI,OI,Uj],EI),fZ=W([dZ],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function Uk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Uk(Object(r),!0).forEach(function(n){hZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hZ(e,t,r){return(t=mZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mZ(e){var t=pZ(e,"string");return typeof t=="symbol"?t:t+""}function pZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gZ=()=>Ce(Or),yZ=()=>{var e=gZ(),t=Ce(Wi),r=Ce(TI);return Bc(!e||!r?void 0:zk(zk({},e),{},{scale:r}),t)};function qk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qk(Object(r),!0).forEach(function(n){vZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vZ(e,t,r){return(t=bZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bZ(e){var t=xZ(e,"string");return typeof t=="symbol"?t:t+""}function xZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wZ=(e,t,r,n)=>{var a=t.find(s=>s&&s.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},jZ=(e,t,r,n)=>{var a=t.find(h=>h&&h.index===r);if(a){if(e==="centric"){var s=a.coordinate,{radius:l}=n;return sc(sc(sc({},n),gr(n.cx,n.cy,l,s)),{},{angle:s,radius:l})}var u=a.coordinate,{angle:f}=n;return sc(sc(sc({},n),gr(n.cx,n.cy,u,f)),{},{angle:f,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function SZ(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var II=(e,t,r,n,a)=>{var s,l=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var u=0;u<l;u++){var f,h,m,g,y,v=u>0?(f=r[u-1])===null||f===void 0?void 0:f.coordinate:(h=r[l-1])===null||h===void 0?void 0:h.coordinate,w=(m=r[u])===null||m===void 0?void 0:m.coordinate,x=u>=l-1?(g=r[0])===null||g===void 0?void 0:g.coordinate:(y=r[u+1])===null||y===void 0?void 0:y.coordinate,_=void 0;if(!(v==null||w==null||x==null))if(Dr(w-v)!==Dr(x-w)){var N=[];if(Dr(x-w)===Dr(a[1]-a[0])){_=x;var O=w+a[1]-a[0];N[0]=Math.min(O,(O+v)/2),N[1]=Math.max(O,(O+v)/2)}else{_=v;var E=x+a[1]-a[0];N[0]=Math.min(w,(E+w)/2),N[1]=Math.max(w,(E+w)/2)}var C=[Math.min(w,(_+w)/2),Math.max(w,(_+w)/2)];if(e>C[0]&&e<=C[1]||e>=N[0]&&e<=N[1]){var T;return(T=r[u])===null||T===void 0?void 0:T.index}}else{var k=Math.min(v,x),M=Math.max(v,x);if(e>(k+w)/2&&e<=(M+w)/2){var R;return(R=r[u])===null||R===void 0?void 0:R.index}}}else if(t)for(var L=0;L<l;L++){var V=t[L];if(V!=null){var G=t[L+1],K=t[L-1];if(L===0&&G!=null&&e<=(V.coordinate+G.coordinate)/2||L===l-1&&K!=null&&e>(V.coordinate+K.coordinate)/2||L>0&&L<l-1&&K!=null&&G!=null&&e>(V.coordinate+K.coordinate)/2&&e<=(V.coordinate+G.coordinate)/2)return V.index}}return-1},_Z=()=>Ce(cj),Fj=(e,t)=>t,LI=(e,t,r)=>r,Kj=(e,t,r,n)=>n,NZ=W(Wi,e=>tg(e,t=>t.coordinate)),Qj=W([nu,Fj,LI,Kj],SI),Hj=W([Qj,iu,Ef,Cf],Lj),OZ=(e,t,r)=>{if(t!=null){var n=nu(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},BI=W([nu,Fj,LI,Kj],NI),wp=W([Fi,Ki,pt,_r,Wi,Kj,BI],_I),EZ=W([Qj,wp],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),$I=W([Wi,Hj],vI),AZ=W([BI,Hj,Hi,Ef,$I,OI,Fj],EI),CZ=W([Qj,Hj],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),kZ=(e,t,r,n,a,s,l)=>{if(!(!e||!r||!n||!a)&&SZ(e,l)){var u=X7(e,t),f=II(u,s,a,r,n),h=wZ(t,a,f,e);return{activeIndex:String(f),activeCoordinate:h}}},PZ=(e,t,r,n,a,s,l)=>{if(!(!e||!n||!a||!s||!r)){var u=mG(e,r);if(u){var f=J7(u,t),h=II(f,l,s,n,a),m=jZ(t,s,h,u);return{activeIndex:String(h),activeCoordinate:m}}}},TZ=(e,t,r,n,a,s,l,u)=>{if(!(!e||!t||!n||!a||!s))return t==="horizontal"||t==="vertical"?kZ(e,t,n,a,s,l,u):PZ(e,t,r,n,a,s,l)},DZ=W(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElement:n.element}}),MZ=W(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(yr)),r=Array.from(new Set(t));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:mX}});function Fk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Kk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fk(Object(r),!0).forEach(function(n){RZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RZ(e,t,r){return(t=IZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IZ(e){var t=LZ(e,"string");return typeof t=="symbol"?t:t+""}function LZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BZ={},$Z={zIndexMap:Object.values(yr).reduce((e,t)=>Kk(Kk({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),BZ)},UZ=new Set(Object.values(yr));function zZ(e){return UZ.has(e)}var UI=Nn({name:"zIndex",initialState:$Z,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Ht()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!zZ(r)&&delete e.zIndexMap[r])},prepare:Ht()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:a}=t.payload;e.zIndexMap[r]?a?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:a?void 0:n,panoramaElement:a?n:void 0}},prepare:Ht()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:Ht()}}}),{registerZIndexPortal:qZ,unregisterZIndexPortal:FZ,registerZIndexPortalElement:KZ,unregisterZIndexPortalElement:QZ}=UI.actions,HZ=UI.reducer;function On(e){var{zIndex:t,children:r}=e,n=CH(),a=n&&t!==void 0&&t!==0,s=en(),l=Lt();j.useLayoutEffect(()=>a?(l(qZ({zIndex:t})),()=>{l(FZ({zIndex:t}))}):sl,[l,t,a]);var u=Ce(f=>DZ(f,t,s));return a?u?Rp.createPortal(r,u):null:r}function jw(){return jw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jw.apply(null,arguments)}function Qk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ym(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qk(Object(r),!0).forEach(function(n){VZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VZ(e,t,r){return(t=GZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GZ(e){var t=WZ(e,"string");return typeof t=="symbol"?t:t+""}function WZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YZ(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return j.isValidElement(t)?j.cloneElement(t,n):j.createElement(r,n)}function XZ(e){var t,{coordinate:r,payload:n,index:a,offset:s,tooltipAxisBandSize:l,layout:u,cursor:f,tooltipEventType:h,chartName:m}=e,g=r,y=n,v=a;if(!f||!g||m!=="ScatterChart"&&h!=="axis")return null;var w,x,_;if(m==="ScatterChart")w=g,x=AV,_=yr.cursorLine;else if(m==="BarChart")w=CV(u,g,s,l),x=BR,_=yr.cursorRectangle;else if(u==="radial"&&wM(g)){var{cx:N,cy:O,radius:E,startAngle:C,endAngle:T}=UR(g);w={cx:N,cy:O,startAngle:C,endAngle:T,innerRadius:E,outerRadius:E},x=qR,_=yr.cursorLine}else w={points:vG(u,g,s)},x=I1,_=yr.cursorLine;var k=typeof f=="object"&&"className"in f?f.className:void 0,M=ym(ym(ym(ym({stroke:"#ccc",pointerEvents:"none"},s),w),Vo(f)),{},{payload:y,payloadIndex:v,className:ht("recharts-tooltip-cursor",k)});return j.createElement(On,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:_},j.createElement(YZ,{cursor:f,cursorComp:x,cursorProps:M}))}function JZ(e){var t=yZ(),r=xR(),n=ol(),a=_Z();return t==null||r==null||n==null||a==null?null:j.createElement(XZ,jw({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var zI=j.createContext(null),ZZ=()=>j.useContext(zI),Ub={exports:{}},Hk;function eee(){return Hk||(Hk=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(f,h,m){this.fn=f,this.context=h,this.once=m||!1}function s(f,h,m,g,y){if(typeof m!="function")throw new TypeError("The listener must be a function");var v=new a(m,g||f,y),w=r?r+h:h;return f._events[w]?f._events[w].fn?f._events[w]=[f._events[w],v]:f._events[w].push(v):(f._events[w]=v,f._eventsCount++),f}function l(f,h){--f._eventsCount===0?f._events=new n:delete f._events[h]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],m,g;if(this._eventsCount===0)return h;for(g in m=this._events)t.call(m,g)&&h.push(r?g.slice(1):g);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(m)):h},u.prototype.listeners=function(h){var m=r?r+h:h,g=this._events[m];if(!g)return[];if(g.fn)return[g.fn];for(var y=0,v=g.length,w=new Array(v);y<v;y++)w[y]=g[y].fn;return w},u.prototype.listenerCount=function(h){var m=r?r+h:h,g=this._events[m];return g?g.fn?1:g.length:0},u.prototype.emit=function(h,m,g,y,v,w){var x=r?r+h:h;if(!this._events[x])return!1;var _=this._events[x],N=arguments.length,O,E;if(_.fn){switch(_.once&&this.removeListener(h,_.fn,void 0,!0),N){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,m),!0;case 3:return _.fn.call(_.context,m,g),!0;case 4:return _.fn.call(_.context,m,g,y),!0;case 5:return _.fn.call(_.context,m,g,y,v),!0;case 6:return _.fn.call(_.context,m,g,y,v,w),!0}for(E=1,O=new Array(N-1);E<N;E++)O[E-1]=arguments[E];_.fn.apply(_.context,O)}else{var C=_.length,T;for(E=0;E<C;E++)switch(_[E].once&&this.removeListener(h,_[E].fn,void 0,!0),N){case 1:_[E].fn.call(_[E].context);break;case 2:_[E].fn.call(_[E].context,m);break;case 3:_[E].fn.call(_[E].context,m,g);break;case 4:_[E].fn.call(_[E].context,m,g,y);break;default:if(!O)for(T=1,O=new Array(N-1);T<N;T++)O[T-1]=arguments[T];_[E].fn.apply(_[E].context,O)}}return!0},u.prototype.on=function(h,m,g){return s(this,h,m,g,!1)},u.prototype.once=function(h,m,g){return s(this,h,m,g,!0)},u.prototype.removeListener=function(h,m,g,y){var v=r?r+h:h;if(!this._events[v])return this;if(!m)return l(this,v),this;var w=this._events[v];if(w.fn)w.fn===m&&(!y||w.once)&&(!g||w.context===g)&&l(this,v);else{for(var x=0,_=[],N=w.length;x<N;x++)(w[x].fn!==m||y&&!w[x].once||g&&w[x].context!==g)&&_.push(w[x]);_.length?this._events[v]=_.length===1?_[0]:_:l(this,v)}return this},u.prototype.removeAllListeners=function(h){var m;return h?(m=r?r+h:h,this._events[m]&&l(this,m)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u})(Ub)),Ub.exports}var tee=eee();const ree=Wa(tee);var Qd=new ree,Sw="recharts.syncEvent.tooltip",Vk="recharts.syncEvent.brush",Vj=(e,t)=>{if(t&&Array.isArray(e)){var r=Number.parseInt(t,10);if(!Qa(r))return e[r]}},nee={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},qI=Nn({name:"options",initialState:nee,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),aee=qI.reducer,{createEventEmitter:iee}=qI.actions;function see(e){return e.tooltip.syncInteraction}var oee={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},FI=Nn({name:"chartData",initialState:oee,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:Gk,setDataStartEndIndexes:lee,setComputedData:Ale}=FI.actions,cee=FI.reducer,uee=["x","y"];function Wk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function oc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wk(Object(r),!0).forEach(function(n){dee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dee(e,t,r){return(t=fee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fee(e){var t=hee(e,"string");return typeof t=="symbol"?t:t+""}function hee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mee(e,t){if(e==null)return{};var r,n,a=pee(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function gee(){var e=Ce(uj),t=Ce(dj),r=Lt(),n=Ce(L4),a=Ce(Wi),s=ol(),l=pg(),u=Ce(f=>f.rootProps.className);j.useEffect(()=>{if(e==null)return sl;var f=(h,m,g)=>{if(t!==g&&e===h){if(n==="index"){var y;if(l&&m!==null&&m!==void 0&&(y=m.payload)!==null&&y!==void 0&&y.coordinate&&m.payload.sourceViewBox){var v=m.payload.coordinate,{x:w,y:x}=v,_=mee(v,uee),{x:N,y:O,width:E,height:C}=m.payload.sourceViewBox,T=oc(oc({},_),{},{x:l.x+(E?(w-N)/E:0)*l.width,y:l.y+(C?(x-O)/C:0)*l.height});r(oc(oc({},m),{},{payload:oc(oc({},m.payload),{},{coordinate:T})}))}else r(m);return}if(a!=null){var k;if(typeof n=="function"){var M={activeTooltipIndex:m.payload.index==null?void 0:Number(m.payload.index),isTooltipActive:m.payload.active,activeIndex:m.payload.index==null?void 0:Number(m.payload.index),activeLabel:m.payload.label,activeDataKey:m.payload.dataKey,activeCoordinate:m.payload.coordinate},R=n(a,M);k=a[R]}else n==="value"&&(k=a.find(B=>String(B.value)===m.payload.label));var{coordinate:L}=m.payload;if(k==null||m.payload.active===!1||L==null||l==null){r(xw({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:V,y:G}=L,K=Math.min(V,l.x+l.width),fe=Math.min(G,l.y+l.height),ge={x:s==="horizontal"?k.coordinate:K,y:s==="horizontal"?fe:k.coordinate},he=xw({active:m.payload.active,coordinate:ge,dataKey:m.payload.dataKey,index:String(k.index),label:m.payload.label,sourceViewBox:m.payload.sourceViewBox,graphicalItemId:m.payload.graphicalItemId});r(he)}}};return Qd.on(Sw,f),()=>{Qd.off(Sw,f)}},[u,r,t,e,n,a,s,l])}function yee(){var e=Ce(uj),t=Ce(dj),r=Lt();j.useEffect(()=>{if(e==null)return sl;var n=(a,s,l)=>{t!==l&&e===a&&r(lee(s))};return Qd.on(Vk,n),()=>{Qd.off(Vk,n)}},[r,t,e])}function vee(){var e=Lt();j.useEffect(()=>{e(iee())},[e]),gee(),yee()}function bee(e,t,r,n,a,s){var l=Ce(v=>OZ(v,e,t)),u=Ce(dj),f=Ce(uj),h=Ce(L4),m=Ce(see),g=m==null?void 0:m.active,y=pg();j.useEffect(()=>{if(!g&&f!=null&&u!=null){var v=xw({active:s,coordinate:r,dataKey:l,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:y,graphicalItemId:void 0});Qd.emit(Sw,f,v,u)}},[g,r,l,a,n,u,f,h,s,y])}function Yk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Xk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yk(Object(r),!0).forEach(function(n){xee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xee(e,t,r){return(t=wee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wee(e){var t=jee(e,"string");return typeof t=="symbol"?t:t+""}function jee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function See(e){return e.dataKey}function _ee(e,t){return j.isValidElement(e)?j.cloneElement(e,t):typeof e=="function"?j.createElement(e,t):j.createElement(oV,t)}var Jk=[],Nee={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Po(e){var t,r,n=br(e,Nee),{active:a,allowEscapeViewBox:s,animationDuration:l,animationEasing:u,content:f,filterNull:h,isAnimationActive:m,offset:g,payloadUniqBy:y,position:v,reverseDirection:w,useTranslate3d:x,wrapperStyle:_,cursor:N,shared:O,trigger:E,defaultIndex:C,portal:T,axisId:k}=n,M=Lt(),R=typeof C=="number"?String(C):C;j.useEffect(()=>{M(xJ({shared:O,trigger:E,axisId:k,active:a,defaultIndex:R}))},[M,O,E,k,a,R]);var L=pg(),V=DR(),G=mJ(O),{activeIndex:K,isActive:fe}=(t=Ce(me=>CZ(me,G,E,R)))!==null&&t!==void 0?t:{},ge=Ce(me=>AZ(me,G,E,R)),he=Ce(me=>$I(me,G,E,R)),B=Ce(me=>EZ(me,G,E,R)),Q=ge,ie=ZZ(),ue=(r=a??fe)!==null&&r!==void 0?r:!1,[I,D]=RM([Q,ue]),z=G==="axis"?he:void 0;bee(G,E,B,z,K,ue);var Y=T??ie;if(Y==null||L==null||G==null)return null;var q=Q??Jk;ue||(q=Jk),h&&q.length&&(q=kM(q.filter(me=>me.value!=null&&(me.hide!==!0||n.includeHidden)),y,See));var pe=q.length>0,ve=j.createElement(mV,{allowEscapeViewBox:s,animationDuration:l,animationEasing:u,isAnimationActive:m,active:ue,coordinate:B,hasPayload:pe,offset:g,position:v,reverseDirection:w,useTranslate3d:x,viewBox:L,wrapperStyle:_,lastBoundingBox:I,innerRef:D,hasPortalFromProps:!!T},_ee(f,Xk(Xk({},n),{},{payload:q,label:z,active:ue,activeIndex:K,coordinate:B,accessibilityLayer:V})));return j.createElement(j.Fragment,null,Rp.createPortal(ve,Y),ue&&j.createElement(JZ,{cursor:N,tooltipEventType:G,coordinate:B,payload:q,index:K}))}var ul=e=>null;ul.displayName="Cell";function Oee(e,t,r){return(t=Eee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Eee(e){var t=Aee(e,"string");return typeof t=="symbol"?t:t+""}function Aee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Cee{constructor(t){Oee(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function Zk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function kee(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zk(Object(r),!0).forEach(function(n){Pee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pee(e,t,r){return(t=Tee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tee(e){var t=Dee(e,"string");return typeof t=="symbol"?t:t+""}function Dee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mee={cacheSize:2e3,enableCache:!0},KI=kee({},Mee),eP=new Cee(KI.cacheSize),Ree={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},tP="recharts_measurement_span";function Iee(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(l,"|").concat(u)}var rP=(e,t)=>{try{var r=document.getElementById(tP);r||(r=document.createElement("span"),r.setAttribute("id",tP),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,Ree,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},bd=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||bg.isSsr)return{width:0,height:0};if(!KI.enableCache)return rP(t,r);var n=Iee(t,r),a=eP.get(n);if(a)return a;var s=rP(t,r);return eP.set(n,s),s},QI;function Lee(e,t,r){return(t=Bee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bee(e){var t=$ee(e,"string");return typeof t=="symbol"?t:t+""}function $ee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,aP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Uee=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,zee=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,qee={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Fee=["cm","mm","pt","pc","in","Q","px"];function Kee(e){return Fee.includes(e)}var mc="NaN";function Qee(e,t){return e*qee[t]}class Hr{static parse(t){var r,[,n,a]=(r=zee.exec(t))!==null&&r!==void 0?r:[];return n==null?Hr.NaN:new Hr(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Qa(t)&&(this.unit=""),r!==""&&!Uee.test(r)&&(this.num=NaN,this.unit=""),Kee(r)&&(this.num=Qee(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Hr(NaN,""):new Hr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Hr(NaN,""):new Hr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Hr(NaN,""):new Hr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Hr(NaN,""):new Hr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Qa(this.num)}}QI=Hr;Lee(Hr,"NaN",new QI(NaN,""));function HI(e){if(e==null||e.includes(mc))return mc;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=(r=nP.exec(t))!==null&&r!==void 0?r:[],l=Hr.parse(n??""),u=Hr.parse(s??""),f=a==="*"?l.multiply(u):l.divide(u);if(f.isNaN())return mc;t=t.replace(nP,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,m,g,y]=(h=aP.exec(t))!==null&&h!==void 0?h:[],v=Hr.parse(m??""),w=Hr.parse(y??""),x=g==="+"?v.add(w):v.subtract(w);if(x.isNaN())return mc;t=t.replace(aP,x.toString())}return t}var iP=/\(([^()]*)\)/;function Hee(e){for(var t=e,r;(r=iP.exec(t))!=null;){var[,n]=r;t=t.replace(iP,HI(n))}return t}function Vee(e){var t=e.replace(/\s+/g,"");return t=Hee(t),t=HI(t),t}function Gee(e){try{return Vee(e)}catch{return mc}}function zb(e){var t=Gee(e.slice(5,-1));return t===mc?"":t}var Wee=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Yee=["dx","dy","angle","className","breakAll"];function _w(){return _w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_w.apply(null,arguments)}function sP(e,t){if(e==null)return{};var r,n,a=Xee(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Xee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var VI=/[ \f\n\r\t\v\u2028\u2029]+/,GI=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];Xt(t)||(r?a=t.toString().split(""):a=t.toString().split(VI));var s=a.map(u=>({word:u,width:bd(u,n).width})),l=r?0:bd("",n).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}};function Jee(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var WI=(e,t,r,n)=>e.reduce((a,s)=>{var{word:l,width:u}=s,f=a[a.length-1];if(f&&u!=null&&(t==null||n||f.width+u+r<Number(t)))f.words.push(l),f.width+=u+r;else{var h={words:[l],width:u};a.push(h)}return a},[]),YI=e=>e.reduce((t,r)=>t.width>r.width?t:r),Zee="",oP=(e,t,r,n,a,s,l,u)=>{var f=e.slice(0,t),h=GI({breakAll:r,style:n,children:f+Zee});if(!h)return[!1,[]];var m=WI(h.wordsWithComputedWidth,s,l,u),g=m.length>a||YI(m).width>Number(s);return[g,m]},ete=(e,t,r,n,a)=>{var{maxLines:s,children:l,style:u,breakAll:f}=e,h=Ne(s),m=String(l),g=WI(t,n,r,a);if(!h||a)return g;var y=g.length>s||YI(g).width>Number(n);if(!y)return g;for(var v=0,w=m.length-1,x=0,_;v<=w&&x<=m.length-1;){var N=Math.floor((v+w)/2),O=N-1,[E,C]=oP(m,O,f,u,s,n,r,a),[T]=oP(m,N,f,u,s,n,r,a);if(!E&&!T&&(v=N+1),E&&T&&(w=N-1),!E&&T){_=C;break}x++}return _||g},lP=e=>{var t=Xt(e)?[]:e.toString().split(VI);return[{words:t,width:void 0}]},tte=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:l}=e;if((t||r)&&!bg.isSsr){var u,f,h=GI({breakAll:s,children:n,style:a});if(h){var{wordsWithComputedWidth:m,spaceWidth:g}=h;u=m,f=g}else return lP(n);return ete({breakAll:s,children:n,maxLines:l,style:a},u,f,t,!!r)}return lP(n)},XI="#808080",rte={angle:0,breakAll:!1,capHeight:"0.71em",fill:XI,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},$g=j.forwardRef((e,t)=>{var r=br(e,rte),{x:n,y:a,lineHeight:s,capHeight:l,fill:u,scaleToFit:f,textAnchor:h,verticalAnchor:m}=r,g=sP(r,Wee),y=j.useMemo(()=>tte({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:f,style:g.style,width:g.width}),[g.breakAll,g.children,g.maxLines,f,g.style,g.width]),{dx:v,dy:w,angle:x,className:_,breakAll:N}=g,O=sP(g,Yee);if(!Ha(n)||!Ha(a)||y.length===0)return null;var E=Number(n)+(Ne(v)?v:0),C=Number(a)+(Ne(w)?w:0);if(!lt(E)||!lt(C))return null;var T;switch(m){case"start":T=zb("calc(".concat(l,")"));break;case"middle":T=zb("calc(".concat((y.length-1)/2," * -").concat(s," + (").concat(l," / 2))"));break;default:T=zb("calc(".concat(y.length-1," * -").concat(s,")"));break}var k=[],M=y[0];if(f&&M!=null){var R=M.width,{width:L}=g;k.push("scale(".concat(Ne(L)&&Ne(R)?L/R:1,")"))}return x&&k.push("rotate(".concat(x,", ").concat(E,", ").concat(C,")")),k.length&&(O.transform=k.join(" ")),j.createElement("text",_w({},un(O),{ref:t,x:E,y:C,className:ht("recharts-text",_),textAnchor:h,fill:u.includes("url")?XI:u}),y.map((V,G)=>{var K=V.words.join(N?"":" ");return j.createElement("tspan",{x:E,dy:G===0?T:s,key:"".concat(K,"-").concat(G)},K)}))});$g.displayName="Text";function cP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ia(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cP(Object(r),!0).forEach(function(n){nte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nte(e,t,r){return(t=ate(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ate(e){var t=ite(e,"string");return typeof t=="symbol"?t:t+""}function ite(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ste=e=>{var{viewBox:t,position:r,offset:n=0,parentViewBox:a}=e,{x:s,y:l,height:u,upperWidth:f,lowerWidth:h}=P1(t),m=s,g=s+(f-h)/2,y=(m+g)/2,v=(f+h)/2,w=m+f/2,x=u>=0?1:-1,_=x*n,N=x>0?"end":"start",O=x>0?"start":"end",E=f>=0?1:-1,C=E*n,T=E>0?"end":"start",k=E>0?"start":"end",M=a;if(r==="top"){var R={x:m+f/2,y:l-_,horizontalAnchor:"middle",verticalAnchor:N};return M&&(R.height=Math.max(l-M.y,0),R.width=f),R}if(r==="bottom"){var L={x:g+h/2,y:l+u+_,horizontalAnchor:"middle",verticalAnchor:O};return M&&(L.height=Math.max(M.y+M.height-(l+u),0),L.width=h),L}if(r==="left"){var V={x:y-C,y:l+u/2,horizontalAnchor:T,verticalAnchor:"middle"};return M&&(V.width=Math.max(V.x-M.x,0),V.height=u),V}if(r==="right"){var G={x:y+v+C,y:l+u/2,horizontalAnchor:k,verticalAnchor:"middle"};return M&&(G.width=Math.max(M.x+M.width-G.x,0),G.height=u),G}var K=M?{width:v,height:u}:{};return r==="insideLeft"?Ia({x:y+C,y:l+u/2,horizontalAnchor:k,verticalAnchor:"middle"},K):r==="insideRight"?Ia({x:y+v-C,y:l+u/2,horizontalAnchor:T,verticalAnchor:"middle"},K):r==="insideTop"?Ia({x:m+f/2,y:l+_,horizontalAnchor:"middle",verticalAnchor:O},K):r==="insideBottom"?Ia({x:g+h/2,y:l+u-_,horizontalAnchor:"middle",verticalAnchor:N},K):r==="insideTopLeft"?Ia({x:m+C,y:l+_,horizontalAnchor:k,verticalAnchor:O},K):r==="insideTopRight"?Ia({x:m+f-C,y:l+_,horizontalAnchor:T,verticalAnchor:O},K):r==="insideBottomLeft"?Ia({x:g+C,y:l+u-_,horizontalAnchor:k,verticalAnchor:N},K):r==="insideBottomRight"?Ia({x:g+h-C,y:l+u-_,horizontalAnchor:T,verticalAnchor:N},K):r&&typeof r=="object"&&(Ne(r.x)||Yo(r.x))&&(Ne(r.y)||Yo(r.y))?Ia({x:s+Jr(r.x,v),y:l+Jr(r.y,u),horizontalAnchor:"end",verticalAnchor:"end"},K):Ia({x:w,y:l+u/2,horizontalAnchor:"middle",verticalAnchor:"middle"},K)},ote=["labelRef"],lte=["content"];function uP(e,t){if(e==null)return{};var r,n,a=cte(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function cte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function dP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dP(Object(r),!0).forEach(function(n){ute(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ute(e,t,r){return(t=dte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dte(e){var t=fte(e,"string");return typeof t=="symbol"?t:t+""}function fte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _i(){return _i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_i.apply(null,arguments)}var JI=j.createContext(null),hte=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:a,width:s,height:l,children:u}=e,f=j.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:a,width:s,height:l}),[t,r,n,a,s,l]);return j.createElement(JI.Provider,{value:f},u)},ZI=()=>{var e=j.useContext(JI),t=pg();return e||(t?P1(t):void 0)},mte=j.createContext(null),pte=()=>{var e=j.useContext(mte),t=Ce(q4);return e||t},gte=e=>{var{value:t,formatter:r}=e,n=Xt(e.children)?t:e.children;return typeof r=="function"?r(n):n},Gj=e=>e!=null&&typeof e=="function",yte=(e,t)=>{var r=Dr(t-e),n=Math.min(Math.abs(t-e),360);return r*n},vte=(e,t,r,n,a)=>{var{offset:s,className:l}=e,{cx:u,cy:f,innerRadius:h,outerRadius:m,startAngle:g,endAngle:y,clockWise:v}=a,w=(h+m)/2,x=yte(g,y),_=x>=0?1:-1,N,O;switch(t){case"insideStart":N=g+_*s,O=v;break;case"insideEnd":N=y-_*s,O=!v;break;case"end":N=y+_*s,O=v;break;default:throw new Error("Unsupported position ".concat(t))}O=x<=0?O:!O;var E=gr(u,f,w,N),C=gr(u,f,w,N+(O?1:-1)*359),T="M".concat(E.x,",").concat(E.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(O?0:1,`,
    `).concat(C.x,",").concat(C.y),k=Xt(e.id)?Pd("recharts-radial-line-"):e.id;return j.createElement("text",_i({},n,{dominantBaseline:"central",className:ht("recharts-radial-bar-label",l)}),j.createElement("defs",null,j.createElement("path",{id:k,d:T})),j.createElement("textPath",{xlinkHref:"#".concat(k)},r))},bte=(e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:l,startAngle:u,endAngle:f}=e,h=(u+f)/2;if(r==="outside"){var{x:m,y:g}=gr(n,a,l+t,h);return{x:m,y:g,textAnchor:m>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var y=(s+l)/2,{x:v,y:w}=gr(n,a,y,h);return{x:v,y:w,textAnchor:"middle",verticalAnchor:"middle"}},Em=e=>e!=null&&"cx"in e&&Ne(e.cx),xte={angle:0,offset:5,zIndex:yr.label,position:"middle",textBreakAll:!1};function wte(e){if(!Em(e))return e;var{cx:t,cy:r,outerRadius:n}=e,a=n*2;return{x:t-n,y:r-n,width:a,upperWidth:a,lowerWidth:a,height:a}}function _s(e){var t=br(e,xte),{viewBox:r,parentViewBox:n,position:a,value:s,children:l,content:u,className:f="",textBreakAll:h,labelRef:m}=t,g=pte(),y=ZI(),v=a==="center"?y:g??y,w,x,_;r==null?w=v:Em(r)?w=r:w=P1(r);var N=wte(w);if(!w||Xt(s)&&Xt(l)&&!j.isValidElement(u)&&typeof u!="function")return null;var O=gd(gd({},t),{},{viewBox:w});if(j.isValidElement(u)){var{labelRef:E}=O,C=uP(O,ote);return j.cloneElement(u,C)}if(typeof u=="function"){var{content:T}=O,k=uP(O,lte);if(x=j.createElement(u,k),j.isValidElement(x))return x}else x=gte(t);var M=un(t);if(Em(w)){if(a==="insideStart"||a==="insideEnd"||a==="end")return vte(t,a,x,M,w);_=bte(w,t.offset,t.position)}else{if(!N)return null;var R=ste({viewBox:N,position:a,offset:t.offset,parentViewBox:Em(n)?void 0:n});_=gd(gd({x:R.x,y:R.y,textAnchor:R.horizontalAnchor,verticalAnchor:R.verticalAnchor},R.width!==void 0?{width:R.width}:{}),R.height!==void 0?{height:R.height}:{})}return j.createElement(On,{zIndex:t.zIndex},j.createElement($g,_i({ref:m,className:ht("recharts-label",f)},M,_,{textAnchor:Jee(M.textAnchor)?M.textAnchor:_.textAnchor,breakAll:h}),x))}_s.displayName="Label";var jte=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?j.createElement(_s,_i({key:"label-implicit"},n)):Ha(e)?j.createElement(_s,_i({key:"label-implicit",value:e},n)):j.isValidElement(e)?e.type===_s?j.cloneElement(e,gd({key:"label-implicit"},n)):j.createElement(_s,_i({key:"label-implicit",content:e},n)):Gj(e)?j.createElement(_s,_i({key:"label-implicit",content:e},n)):e&&typeof e=="object"?j.createElement(_s,_i({},e,{key:"label-implicit"},n)):null};function Ste(e){var{label:t,labelRef:r}=e,n=ZI();return jte(t,n,r)||null}var qb={},Fb={},fP;function _te(){return fP||(fP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(Fb)),Fb}var Kb={},hP;function Nte(){return hP||(hP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(Kb)),Kb}var mP;function Ote(){return mP||(mP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_te(),r=Nte(),n=x1();function a(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=a})(qb)),qb}var Qb,pP;function Ete(){return pP||(pP=1,Qb=Ote().last),Qb}var Ate=Ete();const Cte=Wa(Ate);var kte=["valueAccessor"],Pte=["dataKey","clockWise","id","textBreakAll","zIndex"];function jp(){return jp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jp.apply(null,arguments)}function gP(e,t){if(e==null)return{};var r,n,a=Tte(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Tte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Dte=e=>Array.isArray(e.value)?Cte(e.value):e.value,e5=j.createContext(void 0),t5=e5.Provider,r5=j.createContext(void 0),Mte=r5.Provider;function Rte(){return j.useContext(e5)}function Ite(){return j.useContext(r5)}function Am(e){var{valueAccessor:t=Dte}=e,r=gP(e,kte),{dataKey:n,clockWise:a,id:s,textBreakAll:l,zIndex:u}=r,f=gP(r,Pte),h=Rte(),m=Ite(),g=h||m;return!g||!g.length?null:j.createElement(On,{zIndex:u??yr.label},j.createElement(Mr,{className:"recharts-label-list"},g.map((y,v)=>{var w,x=Xt(n)?t(y,v):kt(y.payload,n),_=Xt(s)?{}:{id:"".concat(s,"-").concat(v)};return j.createElement(_s,jp({key:"label-".concat(v)},un(y),f,_,{fill:(w=r.fill)!==null&&w!==void 0?w:y.fill,parentViewBox:y.parentViewBox,value:x,textBreakAll:l,viewBox:y.viewBox,index:v,zIndex:0}))})))}Am.displayName="LabelList";function Wj(e){var{label:t}=e;return t?t===!0?j.createElement(Am,{key:"labelList-implicit"}):j.isValidElement(t)||Gj(t)?j.createElement(Am,{key:"labelList-implicit",content:t}):typeof t=="object"?j.createElement(Am,jp({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function Nw(){return Nw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nw.apply(null,arguments)}var n5=e=>{var{cx:t,cy:r,r:n,className:a}=e,s=ht("recharts-dot",a);return Ne(t)&&Ne(r)&&Ne(n)?j.createElement("circle",Nw({},Un(e),b1(e),{className:s,cx:t,cy:r,r:n})):null},a5=e=>e.graphicalItems.polarItems,Lte=W([Jt,Nf],yj),Ug=W([a5,lr,Lte],vj),Bte=W([Ug],bj),zg=W([Bte,Og],xj),$te=W([zg,lr,Ug],jj);W([zg,lr,Ug],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var s,l=kt(n,(s=t.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:kt(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var yP=()=>{},Ute=W([zg,lr,Ug,Rg,Jt],Oj),zte=W([lr,_j,Nj,yP,Ute,yP,pt,Jt],Ej),i5=W([lr,pt,zg,$te,_f,Jt,zte],Aj),qte=W([i5,tu,Xs],Pj),Fte=W([lr,i5,qte,Jt],Dj);W([Xs,Fte],K4);var Kte={radiusAxis:{},angleAxis:{}},s5=Nn({name:"polarAxis",initialState:Kte,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Cle,removeRadiusAxis:kle,addAngleAxis:Ple,removeAngleAxis:Tle}=s5.actions,Qte=s5.reducer;function o5(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}function vP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vP(Object(r),!0).forEach(function(n){Hte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hte(e,t,r){return(t=Vte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vte(e){var t=Gte(e,"string");return typeof t=="symbol"?t:t+""}function Gte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wte=(e,t)=>t,Yj=W([a5,Wte],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),Yte=[],Xj=(e,t,r)=>(r==null?void 0:r.length)===0?Yte:r,l5=W([Og,Yj,Xj],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>bP(bP({},t.presentationProps),s.props))),a!=null)return a}}),Xte=W([l5,Yj,Xj],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var s,l=kt(n,t.nameKey,t.name),u;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?u=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?u=n.fill:u=t.fill,{value:Yc(l,t.dataKey),color:u,payload:n,type:t.legendType}})}),Jte=W([l5,Yj,Xj,_r],(e,t,r,n)=>{if(!(t==null||e==null))return Zre({offset:n,pieSettings:t,displayedData:e,cells:r})}),Hb={exports:{}},Ct={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xP;function Zte(){if(xP)return Ct;xP=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),v=Symbol.for("react.client.reference");function w(x){if(typeof x=="object"&&x!==null){var _=x.$$typeof;switch(_){case e:switch(x=x.type,x){case r:case a:case n:case f:case h:case y:return x;default:switch(x=x&&x.$$typeof,x){case l:case u:case g:case m:return x;case s:return x;default:return _}}case t:return _}}}return Ct.ContextConsumer=s,Ct.ContextProvider=l,Ct.Element=e,Ct.ForwardRef=u,Ct.Fragment=r,Ct.Lazy=g,Ct.Memo=m,Ct.Portal=t,Ct.Profiler=a,Ct.StrictMode=n,Ct.Suspense=f,Ct.SuspenseList=h,Ct.isContextConsumer=function(x){return w(x)===s},Ct.isContextProvider=function(x){return w(x)===l},Ct.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===e},Ct.isForwardRef=function(x){return w(x)===u},Ct.isFragment=function(x){return w(x)===r},Ct.isLazy=function(x){return w(x)===g},Ct.isMemo=function(x){return w(x)===m},Ct.isPortal=function(x){return w(x)===t},Ct.isProfiler=function(x){return w(x)===a},Ct.isStrictMode=function(x){return w(x)===n},Ct.isSuspense=function(x){return w(x)===f},Ct.isSuspenseList=function(x){return w(x)===h},Ct.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===r||x===a||x===n||x===f||x===h||typeof x=="object"&&x!==null&&(x.$$typeof===g||x.$$typeof===m||x.$$typeof===l||x.$$typeof===s||x.$$typeof===u||x.$$typeof===v||x.getModuleId!==void 0)},Ct.typeOf=w,Ct}var wP;function ere(){return wP||(wP=1,Hb.exports=Zte()),Hb.exports}var tre=ere(),jP=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",SP=null,Vb=null,c5=e=>{if(e===SP&&Array.isArray(Vb))return Vb;var t=[];return j.Children.forEach(e,r=>{Xt(r)||(tre.isFragment(r)?t=t.concat(c5(r.props.children)):t.push(r))}),Vb=t,SP=e,t};function Jj(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>jP(a)):n=[jP(t)],c5(e).forEach(a=>{var s=Wo(a,"type.displayName")||Wo(a,"type.name");s&&n.indexOf(s)!==-1&&r.push(a)}),r}var u5=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,Gb={},_P;function rre(){return _P||(_P=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(Gb)),Gb}var Wb,NP;function nre(){return NP||(NP=1,Wb=rre().isPlainObject),Wb}var are=nre();const ire=Wa(are);var OP,EP,AP,CP,kP;function PP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function TP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PP(Object(r),!0).forEach(function(n){sre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sre(e,t,r){return(t=ore(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ore(e){var t=lre(e,"string");return typeof t=="symbol"?t:t+""}function lre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sp(){return Sp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sp.apply(null,arguments)}function dd(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var DP=(e,t,r,n,a)=>{var s=r-n,l;return l=sr(OP||(OP=dd(["M ",",",""])),e,t),l+=sr(EP||(EP=dd(["L ",",",""])),e+r,t),l+=sr(AP||(AP=dd(["L ",",",""])),e+r-s/2,t+a),l+=sr(CP||(CP=dd(["L ",",",""])),e+r-s/2-n,t+a),l+=sr(kP||(kP=dd(["L ",","," Z"])),e,t),l},cre={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ure=e=>{var t=br(e,cre),{x:r,y:n,upperWidth:a,lowerWidth:s,height:l,className:u}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isUpdateAnimationActive:g}=t,y=j.useRef(null),[v,w]=j.useState(-1),x=j.useRef(a),_=j.useRef(s),N=j.useRef(l),O=j.useRef(r),E=j.useRef(n),C=bf(e,"trapezoid-");if(j.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var ge=y.current.getTotalLength();ge&&w(ge)}catch{}},[]),r!==+r||n!==+n||a!==+a||s!==+s||l!==+l||a===0&&s===0||l===0)return null;var T=ht("recharts-trapezoid",u);if(!g)return j.createElement("g",null,j.createElement("path",Sp({},un(t),{className:T,d:DP(r,n,a,s,l)})));var k=x.current,M=_.current,R=N.current,L=O.current,V=E.current,G="0px ".concat(v===-1?1:v,"px"),K="".concat(v,"px 0px"),fe=MR(["strokeDasharray"],h,f);return j.createElement(vf,{animationId:C,key:C,canBegin:v>0,duration:h,easing:f,isActive:g,begin:m},ge=>{var he=Vt(k,a,ge),B=Vt(M,s,ge),Q=Vt(R,l,ge),ie=Vt(L,r,ge),ue=Vt(V,n,ge);y.current&&(x.current=he,_.current=B,N.current=Q,O.current=ie,E.current=ue);var I=ge>0?{transition:fe,strokeDasharray:K}:{strokeDasharray:G};return j.createElement("path",Sp({},un(t),{className:T,d:DP(ie,ue,he,B,Q),ref:y,style:TP(TP({},I),t.style)}))})},dre=["option","shapeType","activeClassName"];function fre(e,t){if(e==null)return{};var r,n,a=hre(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function hre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function MP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _p(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MP(Object(r),!0).forEach(function(n){mre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mre(e,t,r){return(t=pre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pre(e){var t=gre(e,"string");return typeof t=="symbol"?t:t+""}function gre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yre(e,t){return _p(_p({},t),e)}function vre(e,t){return e==="symbols"}function RP(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return j.createElement(BR,r);case"trapezoid":return j.createElement(ure,r);case"sector":return j.createElement(qR,r);case"symbols":if(vre(t))return j.createElement(v1,r);break;case"curve":return j.createElement(I1,r);default:return null}}function bre(e){return j.isValidElement(e)?e.props:e}function Zj(e){var{option:t,shapeType:r,activeClassName:n="recharts-active-shape"}=e,a=fre(e,dre),s;if(j.isValidElement(t))s=j.cloneElement(t,_p(_p({},a),bre(t)));else if(typeof t=="function")s=t(a,a.index);else if(ire(t)&&typeof t!="boolean"){var l=yre(t,a);s=j.createElement(RP,{shapeType:r,elementProps:l})}else{var u=a;s=j.createElement(RP,{shapeType:r,elementProps:u})}return a.isActive?j.createElement(Mr,{className:n},s):s}var eS=(e,t,r)=>{var n=Lt();return(a,s)=>l=>{e==null||e(a,s,l),n(xI({activeIndex:String(s),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}},tS=e=>{var t=Lt();return(r,n)=>a=>{e==null||e(r,n,a),t(wJ())}},rS=(e,t,r)=>{var n=Lt();return(a,s)=>l=>{e==null||e(a,s,l),n(jJ({activeIndex:String(s),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}};function nS(e){var{tooltipEntrySettings:t}=e,r=Lt(),n=en(),a=j.useRef(null);return j.useLayoutEffect(()=>{n||(a.current===null?r(yJ(t)):a.current!==t&&r(vJ({prev:a.current,next:t})),a.current=t)},[t,r,n]),j.useLayoutEffect(()=>()=>{a.current&&(r(bJ(a.current)),a.current=null)},[r]),null}function d5(e){var{legendPayload:t}=e,r=Lt(),n=en(),a=j.useRef(null);return j.useLayoutEffect(()=>{n||(a.current===null?r(kR(t)):a.current!==t&&r(PR({prev:a.current,next:t})),a.current=t)},[r,n,t]),j.useLayoutEffect(()=>()=>{a.current&&(r(TR(a.current)),a.current=null)},[r]),null}function xre(e){var{legendPayload:t}=e,r=Lt(),n=Ce(pt),a=j.useRef(null);return j.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(a.current===null?r(kR(t)):a.current!==t&&r(PR({prev:a.current,next:t})),a.current=t)},[r,n,t]),j.useLayoutEffect(()=>()=>{a.current&&(r(TR(a.current)),a.current=null)},[r]),null}var Yb,wre=()=>{var[e]=j.useState(()=>Pd("uid-"));return e},jre=(Yb=xB.useId)!==null&&Yb!==void 0?Yb:wre;function Sre(e,t){var r=jre();return t||(e?"".concat(e,"-").concat(r):r)}var _re=j.createContext(void 0),aS=e=>{var{id:t,type:r,children:n}=e,a=Sre("recharts-".concat(r),t);return j.createElement(_re.Provider,{value:a},n(a))},Nre={cartesianItems:[],polarItems:[]},f5=Nn({name:"graphicalItems",initialState:Nre,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Ht()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,a=Oa(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},prepare:Ht()},removeCartesianGraphicalItem:{reducer(e,t){var r=Oa(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Ht()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Ht()},removePolarGraphicalItem:{reducer(e,t){var r=Oa(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Ht()}}}),{addCartesianGraphicalItem:Ore,replaceCartesianGraphicalItem:Ere,removeCartesianGraphicalItem:Are,addPolarGraphicalItem:Cre,removePolarGraphicalItem:kre}=f5.actions,Pre=f5.reducer,Tre=e=>{var t=Lt(),r=j.useRef(null);return j.useLayoutEffect(()=>{r.current===null?t(Ore(e)):r.current!==e&&t(Ere({prev:r.current,next:e})),r.current=e},[t,e]),j.useLayoutEffect(()=>()=>{r.current&&(t(Are(r.current)),r.current=null)},[t]),null},h5=j.memo(Tre);function Dre(e){var t=Lt();return j.useLayoutEffect(()=>(t(Cre(e)),()=>{t(kre(e))}),[t,e]),null}var Mre=["key"],Rre=["onMouseEnter","onClick","onMouseLeave"],Ire=["id"],Lre=["id"];function IP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function or(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IP(Object(r),!0).forEach(function(n){Bre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bre(e,t,r){return(t=$re(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $re(e){var t=Ure(e,"string");return typeof t=="symbol"?t:t+""}function Ure(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ks(){return Ks=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ks.apply(null,arguments)}function qg(e,t){if(e==null)return{};var r,n,a=zre(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function zre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function qre(e){var t=j.useMemo(()=>Jj(e.children,ul),[e.children]),r=Ce(n=>Xte(n,e.id,t));return r==null?null:j.createElement(xre,{legendPayload:r})}var Fre=j.memo(e=>{var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:l,name:u,hide:f,tooltipType:h,id:m}=e,g={dataDefinedOnItem:n.map(y=>y.tooltipPayload),getPosition:y=>{var v;return(v=n[Number(y)])===null||v===void 0?void 0:v.tooltipPosition},settings:{stroke:a,strokeWidth:s,fill:l,dataKey:t,nameKey:r,name:Yc(u,t),hide:f,type:h,color:l,unit:"",graphicalItemId:m}};return j.createElement(nS,{tooltipEntrySettings:g})}),Kre=(e,t)=>e>t?"start":e<t?"end":"middle",Qre=(e,t,r)=>Jr(typeof t=="function"?t(e):t,r,r*.8),Hre=(e,t,r)=>{var{top:n,left:a,width:s,height:l}=t,u=$R(s,l),f=a+Jr(e.cx,s,s/2),h=n+Jr(e.cy,l,l/2),m=Jr(e.innerRadius,u,0),g=Qre(r,e.outerRadius,u),y=e.maxRadius||Math.sqrt(s*s+l*l)/2;return{cx:f,cy:h,innerRadius:m,outerRadius:g,maxRadius:y}},Vre=(e,t)=>{var r=Dr(t-e),n=Math.min(Math.abs(t-e),360);return r*n},Gre=(e,t)=>{if(j.isValidElement(e))return j.cloneElement(e,t);if(typeof e=="function")return e(t);var r=ht("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=t,a=qg(t,Mre);return j.createElement(I1,Ks({},a,{type:"linear",className:r}))},Wre=(e,t,r)=>{if(j.isValidElement(e))return j.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),j.isValidElement(n)))return n;var a=ht("recharts-pie-label-text",o5(e));return j.createElement($g,Ks({},t,{alignmentBaseline:"middle",className:a}),n)};function Yre(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:s,dataKey:l}=r;if(!n||!a||!t)return null;var u=Un(r),f=Vo(a),h=Vo(s),m=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,g=t.map((y,v)=>{var w=(y.startAngle+y.endAngle)/2,x=gr(y.cx,y.cy,y.outerRadius+m,w),_=or(or(or(or({},u),y),{},{stroke:"none"},f),{},{index:v,textAnchor:Kre(x.x,y.cx)},x),N=or(or(or(or({},u),y),{},{fill:"none",stroke:y.fill},h),{},{index:v,points:[gr(y.cx,y.cy,y.outerRadius,w),x],key:"line"});return j.createElement(On,{zIndex:yr.label,key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(v)},j.createElement(Mr,null,s&&Gre(s,N),Wre(a,_,kt(y,l))))});return j.createElement(Mr,{className:"recharts-pie-labels"},g)}function Xre(e){var{sectors:t,props:r,showLabels:n}=e,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?j.createElement(Wj,{label:a}):j.createElement(Yre,{sectors:t,props:r,showLabels:n})}function Jre(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,shape:s,id:l}=e,u=Ce(Fs),f=Ce(qj),h=Ce(oZ),{onMouseEnter:m,onClick:g,onMouseLeave:y}=a,v=qg(a,Rre),w=eS(m,a.dataKey,l),x=tS(y),_=rS(g,a.dataKey,l);return t==null||t.length===0?null:j.createElement(j.Fragment,null,t.map((N,O)=>{if((N==null?void 0:N.startAngle)===0&&(N==null?void 0:N.endAngle)===0&&t.length!==1)return null;var E=h==null||h===l,C=String(O)===u&&(f==null||a.dataKey===f)&&E,T=u?n:null,k=r&&C?r:T,M=or(or({},N),{},{stroke:N.stroke,tabIndex:-1,[pR]:O,[gR]:l});return j.createElement(Mr,Ks({key:"sector-".concat(N==null?void 0:N.startAngle,"-").concat(N==null?void 0:N.endAngle,"-").concat(N.midAngle,"-").concat(O),tabIndex:-1,className:"recharts-pie-sector"},ff(v,N,O),{onMouseEnter:w(N,O),onMouseLeave:x(N,O),onClick:_(N,O)}),j.createElement(Zj,Ks({option:s??k,index:O,shapeType:"sector",isActive:C},M)))}))}function Zre(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:s}=e,{cornerRadius:l,startAngle:u,endAngle:f,dataKey:h,nameKey:m,tooltipType:g}=r,y=Math.abs(r.minAngle),v=Vre(u,f),w=Math.abs(v),x=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,_=n.filter(k=>kt(k,h,0)!==0).length,N=(w>=360?_:_-1)*x,O=w-_*y-N,E=n.reduce((k,M)=>{var R=kt(M,h,0);return k+(Ne(R)?R:0)},0),C;if(E>0){var T;C=n.map((k,M)=>{var R=kt(k,h,0),L=kt(k,m,M),V=Hre(r,s,k),G=(Ne(R)?R:0)/E,K,fe=or(or({},k),a&&a[M]&&a[M].props);M?K=T.endAngle+Dr(v)*x*(R!==0?1:0):K=u;var ge=K+Dr(v)*((R!==0?y:0)+G*O),he=(K+ge)/2,B=(V.innerRadius+V.outerRadius)/2,Q=[{name:L,value:R,payload:fe,dataKey:h,type:g,graphicalItemId:r.id}],ie=gr(V.cx,V.cy,B,he);return T=or(or(or(or({},r.presentationProps),{},{percent:G,cornerRadius:typeof l=="string"?parseFloat(l):l,name:L,tooltipPayload:Q,midAngle:he,middleRadius:B,tooltipPosition:ie},fe),V),{},{value:R,dataKey:h,startAngle:K,endAngle:ge,payload:fe,paddingAngle:Dr(v)*x}),T})}return C}function ene(e){var{showLabels:t,sectors:r,children:n}=e,a=j.useMemo(()=>!t||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,t]);return j.createElement(Mte,{value:t?a:void 0},n)}function tne(e){var{props:t,previousSectorsRef:r,id:n}=e,{sectors:a,isAnimationActive:s,animationBegin:l,animationDuration:u,animationEasing:f,activeShape:h,inactiveShape:m,onAnimationStart:g,onAnimationEnd:y}=t,v=bf(t,"recharts-pie-"),w=r.current,[x,_]=j.useState(!1),N=j.useCallback(()=>{typeof y=="function"&&y(),_(!1)},[y]),O=j.useCallback(()=>{typeof g=="function"&&g(),_(!0)},[g]);return j.createElement(ene,{showLabels:!x,sectors:a},j.createElement(vf,{animationId:v,begin:l,duration:u,isActive:s,easing:f,onAnimationStart:O,onAnimationEnd:N,key:v},E=>{var C,T=[],k=a&&a[0],M=(C=k==null?void 0:k.startAngle)!==null&&C!==void 0?C:0;return a==null||a.forEach((R,L)=>{var V=w&&w[L],G=L>0?Wo(R,"paddingAngle",0):0;if(V){var K=Vt(V.endAngle-V.startAngle,R.endAngle-R.startAngle,E),fe=or(or({},R),{},{startAngle:M+G,endAngle:M+K+G});T.push(fe),M=fe.endAngle}else{var{endAngle:ge,startAngle:he}=R,B=Vt(0,ge-he,E),Q=or(or({},R),{},{startAngle:M+G,endAngle:M+B+G});T.push(Q),M=Q.endAngle}}),r.current=T,j.createElement(Mr,null,j.createElement(Jre,{sectors:T,activeShape:h,inactiveShape:m,allOtherPieProps:t,shape:t.shape,id:n}))}),j.createElement(Xre,{showLabels:!x,sectors:a,props:t}),t.children)}var rne={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:yr.area};function nne(e){var{id:t}=e,r=qg(e,Ire),{hide:n,className:a,rootTabIndex:s}=e,l=j.useMemo(()=>Jj(e.children,ul),[e.children]),u=Ce(m=>Jte(m,t,l)),f=j.useRef(null),h=ht("recharts-pie",a);return n||u==null?(f.current=null,j.createElement(Mr,{tabIndex:s,className:h})):j.createElement(On,{zIndex:e.zIndex},j.createElement(Fre,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:u,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),j.createElement(Mr,{tabIndex:s,className:h},j.createElement(tne,{props:or(or({},r),{},{sectors:u}),previousSectorsRef:f,id:t})))}function iS(e){var t=br(e,rne),{id:r}=t,n=qg(t,Lre),a=Un(n);return j.createElement(aS,{id:r,type:"pie"},s=>j.createElement(j.Fragment,null,j.createElement(Dre,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:t.maxRadius}),j.createElement(qre,Ks({},n,{id:s})),j.createElement(nne,Ks({},n,{id:s}))))}iS.displayName="Pie";var ane=["points"];function LP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Xb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LP(Object(r),!0).forEach(function(n){ine(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ine(e,t,r){return(t=sne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sne(e){var t=one(e,"string");return typeof t=="symbol"?t:t+""}function one(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Np(){return Np=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Np.apply(null,arguments)}function lne(e,t){if(e==null)return{};var r,n,a=cne(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function cne(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function une(e){var{option:t,dotProps:r,className:n}=e;if(j.isValidElement(t))return j.cloneElement(t,r);if(typeof t=="function")return t(r);var a=ht(n,typeof t!="boolean"?t.className:""),s=r??{},{points:l}=s,u=lne(s,ane);return j.createElement(n5,Np({},u,{className:a}))}function dne(e,t){return e==null?!1:t?!0:e.length===1}function fne(e){var{points:t,dot:r,className:n,dotClassName:a,dataKey:s,baseProps:l,needClip:u,clipPathId:f,zIndex:h=yr.scatter}=e;if(!dne(t,r))return null;var m=u5(r),g=OF(r),y=t.map((w,x)=>{var _,N,O=Xb(Xb(Xb({r:3},l),g),{},{index:x,cx:(_=w.x)!==null&&_!==void 0?_:void 0,cy:(N=w.y)!==null&&N!==void 0?N:void 0,dataKey:s,value:w.value,payload:w.payload,points:t});return j.createElement(une,{key:"dot-".concat(x),option:r,dotProps:O,className:a})}),v={};return u&&f!=null&&(v.clipPath="url(#clipPath-".concat(m?"":"dots-").concat(f,")")),j.createElement(On,{zIndex:h},j.createElement(Mr,Np({className:n},v),y))}function BP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $P(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BP(Object(r),!0).forEach(function(n){hne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hne(e,t,r){return(t=mne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mne(e){var t=pne(e,"string");return typeof t=="symbol"?t:t+""}function pne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var m5=0,gne={xAxis:{},yAxis:{},zAxis:{}},p5=Nn({name:"cartesianAxis",initialState:gne,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Ht()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Ht()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Ht()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Ht()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Ht()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Ht()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Ht()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Ht()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Ht()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,a=e.yAxis[r];if(a){var s,l=a.widthHistory||[];if(l.length===3&&l[0]===l[2]&&n===l[1]&&n!==a.width&&Math.abs(n-((s=l[0])!==null&&s!==void 0?s:0))<=1)return;var u=[...l,n].slice(-3);e.yAxis[r]=$P($P({},a),{},{width:n,widthHistory:u})}}}}),{addXAxis:yne,replaceXAxis:vne,removeXAxis:bne,addYAxis:xne,replaceYAxis:wne,removeYAxis:jne,addZAxis:Dle,replaceZAxis:Mle,removeZAxis:Rle,updateYAxisWidth:Sne}=p5.actions,_ne=p5.reducer,Nne=W([_r],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),One=W([Nne,Fi,Ki],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),sS=()=>Ce(One),Ene=()=>Ce(fZ);function UP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UP(Object(r),!0).forEach(function(n){Ane(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ane(e,t,r){return(t=Cne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cne(e){var t=kne(e,"string");return typeof t=="symbol"?t:t+""}function kne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pne=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:s,clipPath:l}=e;if(a===!1||t.x==null||t.y==null)return null;var u={index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},f=Jb(Jb(Jb({},u),Vo(a)),b1(a)),h;return j.isValidElement(a)?h=j.cloneElement(a,f):typeof a=="function"?h=a(f):h=j.createElement(n5,f),j.createElement(Mr,{className:"recharts-active-dot",clipPath:l},h)};function Tne(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a,clipPath:s,zIndex:l=yr.activeDot}=e,u=Ce(Fs),f=Ene();if(t==null||f==null)return null;var h=t.find(m=>f.includes(m.payload));return Xt(h)?null:j.createElement(On,{zIndex:l},j.createElement(Pne,{point:h,childIndex:Number(u),mainColor:r,dataKey:a,activeDot:n,clipPath:s}))}var zP=(e,t,r)=>{var n=r??e;if(!Xt(n))return Jr(n,t,0)},Dne=(e,t,r)=>{var n={},a=e.filter(kg),s=e.filter(h=>h.stackId==null),l=a.reduce((h,m)=>{var g=h[m.stackId];return g==null&&(g=[]),g.push(m),h[m.stackId]=g,h},n),u=Object.entries(l).map(h=>{var m,[g,y]=h,v=y.map(x=>x.dataKey),w=zP(t,r,(m=y[0])===null||m===void 0?void 0:m.barSize);return{stackId:g,dataKeys:v,barSize:w}}),f=s.map(h=>{var m=[h.dataKey].filter(y=>y!=null),g=zP(t,r,h.barSize);return{stackId:void 0,dataKeys:m,barSize:g}});return[...u,...f]};function qP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qP(Object(r),!0).forEach(function(n){Mne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mne(e,t,r){return(t=Rne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rne(e){var t=Ine(e,"string");return typeof t=="symbol"?t:t+""}function Ine(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lne(e,t,r,n,a){var s,l=n.length;if(!(l<1)){var u=Jr(e,r,0,!0),f,h=[];if(lt((s=n[0])===null||s===void 0?void 0:s.barSize)){var m=!1,g=r/l,y=n.reduce((O,E)=>O+(E.barSize||0),0);y+=(l-1)*u,y>=r&&(y-=(l-1)*u,u=0),y>=r&&g>0&&(m=!0,g*=.9,y=l*g);var v=(r-y)/2>>0,w={offset:v-u,size:0};f=n.reduce((O,E)=>{var C,T={stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:w.offset+w.size+u,size:m?g:(C=E.barSize)!==null&&C!==void 0?C:0}},k=[...O,T];return w=T.position,k},h)}else{var x=Jr(t,r,0,!0);r-2*x-(l-1)*u<=0&&(u=0);var _=(r-2*x-(l-1)*u)/l;_>1&&(_>>=0);var N=lt(a)?Math.min(_,a):_;f=n.reduce((O,E,C)=>[...O,{stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:x+(_+u)*C+(_-N)/2,size:N}}],h)}return f}}var Bne=(e,t,r,n,a,s,l)=>{var u=Xt(l)?t:l,f=Lne(r,n,a!==s?a:s,e,u);return a!==s&&f!=null&&(f=f.map(h=>vm(vm({},h),{},{position:vm(vm({},h.position),{},{offset:h.position.offset-a/2})}))),f},$ne=(e,t)=>{var r=pj(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(l=>l.key===r)}}}},Une=(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}};function zne(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&lt(e.zIndex)?e.zIndex:t}var g5=e=>{var{chartData:t}=e,r=Lt(),n=en();return j.useEffect(()=>n?()=>{}:(r(Gk(t)),()=>{r(Gk(void 0))}),[t,r,n]),null},FP={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},y5=Nn({name:"brush",initialState:FP,reducers:{setBrushSettings(e,t){return t.payload==null?FP:t.payload}}}),{setBrushSettings:Ile}=y5.actions,qne=y5.reducer;function Fne(e){return(e%180+180)%180}var Kne=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Fne(a),l=s*Math.PI/180,u=Math.atan(n/r),f=l>u&&l<Math.PI-u?n/Math.sin(l):r/Math.cos(l);return Math.abs(f)},Qne={dots:[],areas:[],lines:[]},v5=Nn({name:"referenceElements",initialState:Qne,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Oa(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Oa(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Oa(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Lle,removeDot:Ble,addArea:$le,removeArea:Ule,addLine:zle,removeLine:qle}=v5.actions,Hne=v5.reducer,Vne=j.createContext(void 0),Gne=e=>{var{children:t}=e,[r]=j.useState("".concat(Pd("recharts"),"-clip")),n=sS();if(n==null)return null;var{x:a,y:s,width:l,height:u}=n;return j.createElement(Vne.Provider,{value:r},j.createElement("defs",null,j.createElement("clipPath",{id:r},j.createElement("rect",{x:a,y:s,height:u,width:l}))),t)};function b5(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t){var a=e[n];a!==void 0&&r.push(a)}return r}function Wne(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Kne(n,r)}function Yne(e,t,r){var n=r==="width",{x:a,y:s,width:l,height:u}=e;return t===1?{start:n?a:s,end:n?a+l:s+u}:{start:n?a+l:s+u,end:n?a:s}}function Hd(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function Xne(e,t){return b5(e,t+1)}function Jne(e,t,r,n,a){for(var s=(n||[]).slice(),{start:l,end:u}=t,f=0,h=1,m=l,g=function(){var w=n==null?void 0:n[f];if(w===void 0)return{v:b5(n,h)};var x=f,_,N=()=>(_===void 0&&(_=r(w,x)),_),O=w.coordinate,E=f===0||Hd(e,O,N,m,u);E||(f=0,m=l,h+=1),E&&(m=O+e*(N()/2+a),f+=h)},y;h<=s.length;)if(y=g(),y)return y.v;return[]}function Zne(e,t,r,n,a){var s=(n||[]).slice(),l=s.length;if(l===0)return[];for(var{start:u,end:f}=t,h=1;h<=l;h++){for(var m=(l-1)%h,g=u,y=!0,v=function(){var C=n[x];if(C==null)return 0;var T=x,k,M=()=>(k===void 0&&(k=r(C,T)),k),R=C.coordinate,L=x===m||Hd(e,R,M,g,f);if(!L)return y=!1,1;L&&(g=R+e*(M()/2+a))},w,x=m;x<l&&(w=v(),!(w!==0&&w===1));x+=h);if(y){for(var _=[],N=m;N<l;N+=h){var O=n[N];O!=null&&_.push(O)}return _}}return[]}function KP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Yr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KP(Object(r),!0).forEach(function(n){eae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eae(e,t,r){return(t=tae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tae(e){var t=rae(e,"string");return typeof t=="symbol"?t:t+""}function rae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nae(e,t,r,n,a){for(var s=(n||[]).slice(),l=s.length,{start:u}=t,{end:f}=t,h=function(y){var v=s[y];if(v==null)return 1;var w=v,x,_=()=>(x===void 0&&(x=r(v,y)),x);if(y===l-1){var N=e*(w.coordinate+e*_()/2-f);s[y]=w=Yr(Yr({},w),{},{tickCoord:N>0?w.coordinate-N*e:w.coordinate})}else s[y]=w=Yr(Yr({},w),{},{tickCoord:w.coordinate});if(w.tickCoord!=null){var O=Hd(e,w.tickCoord,_,u,f);O&&(f=w.tickCoord-e*(_()/2+a),s[y]=Yr(Yr({},w),{},{isShow:!0}))}},m=l-1;m>=0;m--)h(m);return s}function aae(e,t,r,n,a,s){var l=(n||[]).slice(),u=l.length,{start:f,end:h}=t;if(s){var m=n[u-1];if(m!=null){var g=r(m,u-1),y=e*(m.coordinate+e*g/2-h);if(l[u-1]=m=Yr(Yr({},m),{},{tickCoord:y>0?m.coordinate-y*e:m.coordinate}),m.tickCoord!=null){var v=Hd(e,m.tickCoord,()=>g,f,h);v&&(h=m.tickCoord-e*(g/2+a),l[u-1]=Yr(Yr({},m),{},{isShow:!0}))}}}for(var w=s?u-1:u,x=function(O){var E=l[O];if(E==null)return 1;var C=E,T,k=()=>(T===void 0&&(T=r(E,O)),T);if(O===0){var M=e*(C.coordinate-e*k()/2-f);l[O]=C=Yr(Yr({},C),{},{tickCoord:M<0?C.coordinate-M*e:C.coordinate})}else l[O]=C=Yr(Yr({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var R=Hd(e,C.tickCoord,k,f,h);R&&(f=C.tickCoord+e*(k()/2+a),l[O]=Yr(Yr({},C),{},{isShow:!0}))}},_=0;_<w;_++)x(_);return l}function oS(e,t,r){var{tick:n,ticks:a,viewBox:s,minTickGap:l,orientation:u,interval:f,tickFormatter:h,unit:m,angle:g}=e;if(!a||!a.length||!n)return[];if(Ne(f)||bg.isSsr){var y;return(y=Xne(a,Ne(f)?f:0))!==null&&y!==void 0?y:[]}var v=[],w=u==="top"||u==="bottom"?"width":"height",x=m&&w==="width"?bd(m,{fontSize:t,letterSpacing:r}):{width:0,height:0},_=(T,k)=>{var M=typeof h=="function"?h(T.value,k):T.value;return w==="width"?Wne(bd(M,{fontSize:t,letterSpacing:r}),x,g):bd(M,{fontSize:t,letterSpacing:r})[w]},N=a[0],O=a[1],E=a.length>=2&&N!=null&&O!=null?Dr(O.coordinate-N.coordinate):1,C=Yne(s,E,w);return f==="equidistantPreserveStart"?Jne(E,C,_,a,l):f==="equidistantPreserveEnd"?Zne(E,C,_,a,l):(f==="preserveStart"||f==="preserveStartEnd"?v=aae(E,C,_,a,l,f==="preserveStartEnd"):v=nae(E,C,_,a,l),v.filter(T=>T.isShow))}var iae=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,l=0;if(t){Array.from(t).forEach(m=>{if(m){var g=m.getBoundingClientRect();g.width>l&&(l=g.width)}});var u=r?r.getBoundingClientRect().width:0,f=a+s,h=l+f+u+(r?n:0);return Math.round(h)}return 0},sae=["axisLine","width","height","className","hide","ticks","axisType"];function oae(e,t){if(e==null)return{};var r,n,a=lae(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function lae(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function tl(){return tl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tl.apply(null,arguments)}function QP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ir(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QP(Object(r),!0).forEach(function(n){cae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cae(e,t,r){return(t=uae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uae(e){var t=dae(e,"string");return typeof t=="symbol"?t:t+""}function dae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ki={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:yr.axis};function fae(e){var{x:t,y:r,width:n,height:a,orientation:s,mirror:l,axisLine:u,otherSvgProps:f}=e;if(!u)return null;var h=ir(ir(ir({},f),Un(u)),{},{fill:"none"});if(s==="top"||s==="bottom"){var m=+(s==="top"&&!l||s==="bottom"&&l);h=ir(ir({},h),{},{x1:t,y1:r+m*a,x2:t+n,y2:r+m*a})}else{var g=+(s==="left"&&!l||s==="right"&&l);h=ir(ir({},h),{},{x1:t+g*n,y1:r,x2:t+g*n,y2:r+a})}return j.createElement("line",tl({},h,{className:ht("recharts-cartesian-axis-line",Wo(u,"className"))}))}function hae(e,t,r,n,a,s,l,u,f){var h,m,g,y,v,w,x=u?-1:1,_=e.tickSize||l,N=Ne(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":h=m=e.coordinate,y=r+ +!u*a,g=y-x*_,w=g-x*f,v=N;break;case"left":g=y=e.coordinate,m=t+ +!u*n,h=m-x*_,v=h-x*f,w=N;break;case"right":g=y=e.coordinate,m=t+ +u*n,h=m+x*_,v=h+x*f,w=N;break;default:h=m=e.coordinate,y=r+ +u*a,g=y+x*_,w=g+x*f,v=N;break}return{line:{x1:h,y1:g,x2:m,y2:y},tick:{x:v,y:w}}}function mae(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function pae(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function gae(e){var{option:t,tickProps:r,value:n}=e,a,s=ht(r.className,"recharts-cartesian-axis-tick-value");if(j.isValidElement(t))a=j.cloneElement(t,ir(ir({},r),{},{className:s}));else if(typeof t=="function")a=t(ir(ir({},r),{},{className:s}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=ht(l,o5(t))),a=j.createElement($g,tl({},r,{className:l}),n)}return a}var yae=j.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:s,tickFormatter:l,unit:u,padding:f,tickTextProps:h,orientation:m,mirror:g,x:y,y:v,width:w,height:x,tickSize:_,tickMargin:N,fontSize:O,letterSpacing:E,getTicksConfig:C,events:T,axisType:k}=e,M=oS(ir(ir({},C),{},{ticks:r}),O,E),R=mae(m,g),L=pae(m,g),V=Un(C),G=Vo(n),K={};typeof a=="object"&&(K=a);var fe=ir(ir({},V),{},{fill:"none"},K),ge=M.map(Q=>ir({entry:Q},hae(Q,y,v,w,x,m,_,g,N))),he=ge.map(Q=>{var{entry:ie,line:ue}=Q;return j.createElement(Mr,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ie.value,"-").concat(ie.coordinate,"-").concat(ie.tickCoord)},a&&j.createElement("line",tl({},fe,ue,{className:ht("recharts-cartesian-axis-tick-line",Wo(a,"className"))})))}),B=ge.map((Q,ie)=>{var ue,I,{entry:D,tick:z}=Q,Y=ir(ir(ir(ir({verticalAnchor:L},V),{},{textAnchor:R,stroke:"none",fill:s},z),{},{index:ie,payload:D,visibleTicksCount:M.length,tickFormatter:l,padding:f},h),{},{angle:(ue=(I=h==null?void 0:h.angle)!==null&&I!==void 0?I:V.angle)!==null&&ue!==void 0?ue:0}),q=ir(ir({},Y),G);return j.createElement(Mr,tl({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(D.value,"-").concat(D.coordinate,"-").concat(D.tickCoord)},ff(T,D,ie)),n&&j.createElement(gae,{option:n,tickProps:q,value:"".concat(typeof l=="function"?l(D.value,ie):D.value).concat(u||"")}))});return j.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(k,"-ticks")},B.length>0&&j.createElement(On,{zIndex:yr.label},j.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(k,"-tick-labels"),ref:t},B)),he.length>0&&j.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(k,"-tick-lines")},he))}),vae=j.forwardRef((e,t)=>{var{axisLine:r,width:n,height:a,className:s,hide:l,ticks:u,axisType:f}=e,h=oae(e,sae),[m,g]=j.useState(""),[y,v]=j.useState(""),w=j.useRef(null);j.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var _;return iae({ticks:w.current,label:(_=e.labelRef)===null||_===void 0?void 0:_.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var x=j.useCallback(_=>{if(_){var N=_.getElementsByClassName("recharts-cartesian-axis-tick-value");w.current=N;var O=N[0];if(O){var E=window.getComputedStyle(O),C=E.fontSize,T=E.letterSpacing;(C!==m||T!==y)&&(g(C),v(T))}}},[m,y]);return l||n!=null&&n<=0||a!=null&&a<=0?null:j.createElement(On,{zIndex:e.zIndex},j.createElement(Mr,{className:ht("recharts-cartesian-axis",s)},j.createElement(fae,{x:e.x,y:e.y,width:n,height:a,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Un(e)}),j.createElement(yae,{ref:x,axisType:f,events:h,fontSize:m,getTicksConfig:e,height:e.height,letterSpacing:y,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:u,unit:e.unit,width:e.width,x:e.x,y:e.y}),j.createElement(hte,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},j.createElement(Ste,{label:e.label,labelRef:e.labelRef}),e.children)))}),lS=j.forwardRef((e,t)=>{var r=br(e,ki);return j.createElement(vae,tl({},r,{ref:t}))});lS.displayName="CartesianAxis";var bae=["x1","y1","x2","y2","key"],xae=["offset"],wae=["xAxisId","yAxisId"],jae=["xAxisId","yAxisId"];function HP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Xr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HP(Object(r),!0).forEach(function(n){Sae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sae(e,t,r){return(t=_ae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _ae(e){var t=Nae(e,"string");return typeof t=="symbol"?t:t+""}function Nae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function To(){return To=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},To.apply(null,arguments)}function Op(e,t){if(e==null)return{};var r,n,a=Oae(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Oae(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Eae=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:l,ry:u}=e;return j.createElement("rect",{x:n,y:a,ry:u,width:s,height:l,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function x5(e){var{option:t,lineItemProps:r}=e,n;if(j.isValidElement(t))n=j.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var a,{x1:s,y1:l,x2:u,y2:f,key:h}=r,m=Op(r,bae),g=(a=Un(m))!==null&&a!==void 0?a:{},{offset:y}=g,v=Op(g,xae);n=j.createElement("line",To({},v,{x1:s,y1:l,x2:u,y2:f,fill:"none",key:h}))}return n}function Aae(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:l}=e,u=Op(e,wae),f=a.map((h,m)=>{var g=Xr(Xr({},u),{},{x1:t,y1:h,x2:t+r,y2:h,key:"line-".concat(m),index:m});return j.createElement(x5,{key:"line-".concat(m),option:n,lineItemProps:g})});return j.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function Cae(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:l}=e,u=Op(e,jae),f=a.map((h,m)=>{var g=Xr(Xr({},u),{},{x1:h,y1:t,x2:h,y2:t+r,key:"line-".concat(m),index:m});return j.createElement(x5,{option:n,lineItemProps:g,key:"line-".concat(m)})});return j.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function kae(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:s,height:l,horizontalPoints:u,horizontal:f=!0}=e;if(!f||!t||!t.length||u==null)return null;var h=u.map(g=>Math.round(g+a-a)).sort((g,y)=>g-y);a!==h[0]&&h.unshift(0);var m=h.map((g,y)=>{var v=h[y+1],w=v==null,x=w?a+l-g:v-g;if(x<=0)return null;var _=y%t.length;return j.createElement("rect",{key:"react-".concat(y),y:g,x:n,height:x,width:s,stroke:"none",fill:t[_],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function Pae(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:l,height:u,verticalPoints:f}=e;if(!t||!r||!r.length)return null;var h=f.map(g=>Math.round(g+a-a)).sort((g,y)=>g-y);a!==h[0]&&h.unshift(0);var m=h.map((g,y)=>{var v=h[y+1],w=v==null,x=w?a+l-g:v-g;if(x<=0)return null;var _=y%r.length;return j.createElement("rect",{key:"react-".concat(y),x:g,y:s,width:x,height:u,stroke:"none",fill:r[_],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var Tae=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return fR(oS(Xr(Xr(Xr({},ki),r),{},{ticks:hR(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},Dae=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return fR(oS(Xr(Xr(Xr({},ki),r),{},{ticks:hR(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},Mae={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:yr.grid};function bc(e){var t=T1(),r=D1(),n=xR(),a=Xr(Xr({},br(e,Mae)),{},{x:Ne(e.x)?e.x:n.left,y:Ne(e.y)?e.y:n.top,width:Ne(e.width)?e.width:n.width,height:Ne(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:l,x:u,y:f,width:h,height:m,syncWithTicks:g,horizontalValues:y,verticalValues:v}=a,w=en(),x=Ce(L=>Ik(L,"xAxis",s,w)),_=Ce(L=>Ik(L,"yAxis",l,w));if(!Va(h)||!Va(m)||!Ne(u)||!Ne(f))return null;var N=a.verticalCoordinatesGenerator||Tae,O=a.horizontalCoordinatesGenerator||Dae,{horizontalPoints:E,verticalPoints:C}=a;if((!E||!E.length)&&typeof O=="function"){var T=y&&y.length,k=O({yAxis:_?Xr(Xr({},_),{},{ticks:T?y:_.ticks}):void 0,width:t??h,height:r??m,offset:n},T?!0:g);Jm(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(E=k)}if((!C||!C.length)&&typeof N=="function"){var M=v&&v.length,R=N({xAxis:x?Xr(Xr({},x),{},{ticks:M?v:x.ticks}):void 0,width:t??h,height:r??m,offset:n},M?!0:g);Jm(Array.isArray(R),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(C=R)}return j.createElement(On,{zIndex:a.zIndex},j.createElement("g",{className:"recharts-cartesian-grid"},j.createElement(Eae,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),j.createElement(kae,To({},a,{horizontalPoints:E})),j.createElement(Pae,To({},a,{verticalPoints:C})),j.createElement(Aae,To({},a,{offset:n,horizontalPoints:E,xAxis:x,yAxis:_})),j.createElement(Cae,To({},a,{offset:n,verticalPoints:C,xAxis:x,yAxis:_}))))}bc.displayName="CartesianGrid";var Rae={},w5=Nn({name:"errorBars",initialState:Rae,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:a}=t.payload;e[r]&&(e[r]=e[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?a:s))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:Fle,replaceErrorBar:Kle,removeErrorBar:Qle}=w5.actions,Iae=w5.reducer,Lae=["children"];function Bae(e,t){if(e==null)return{};var r,n,a=$ae(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function $ae(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Uae={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},zae=j.createContext(Uae);function j5(e){var{children:t}=e,r=Bae(e,Lae);return j.createElement(zae.Provider,{value:r},t)}function cS(e,t){var r,n,a=Ce(h=>Vi(h,e)),s=Ce(h=>Gi(h,t)),l=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Cr.allowDataOverflow,u=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:kr.allowDataOverflow,f=l||u;return{needClip:f,needClipX:l,needClipY:u}}function S5(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=sS(),{needClipX:s,needClipY:l,needClip:u}=cS(t,r);if(!u||!a)return null;var{x:f,y:h,width:m,height:g}=a;return j.createElement("clipPath",{id:"clipPath-".concat(n)},j.createElement("rect",{x:s?f:f-m/2,y:l?h:h-g/2,width:s?m:m*2,height:l?g:g*2}))}var _5=(e,t,r,n)=>qs(e,"xAxis",t,n),N5=(e,t,r,n)=>zs(e,"xAxis",t,n),O5=(e,t,r,n)=>qs(e,"yAxis",r,n),E5=(e,t,r,n)=>zs(e,"yAxis",r,n),qae=W([pt,_5,O5,N5,E5],(e,t,r,n,a)=>qi(e,"xAxis")?Bc(t,n,!1):Bc(r,a,!1)),Fae=(e,t,r,n,a)=>a;function Kae(e){return e.type==="line"}var Qae=W([Dg,Fae],(e,t)=>e.filter(Kae).find(r=>r.id===t)),Hae=W([pt,_5,O5,N5,E5,Qae,qae,sj],(e,t,r,n,a,s,l,u)=>{var{chartData:f,dataStartIndex:h,dataEndIndex:m}=u;if(!(s==null||t==null||r==null||n==null||a==null||n.length===0||a.length===0||l==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:g,data:y}=s,v;if(y!=null&&y.length>0?v=y:v=f==null?void 0:f.slice(h,m+1),v!=null)return Pie({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataKey:g,bandSize:l,displayedData:v})}});function Vae(e){var t=Vo(e),r=3,n=2;if(t!=null){var{r:a,strokeWidth:s}=t,l=Number(a),u=Number(s);return(Number.isNaN(l)||l<0)&&(l=r),(Number.isNaN(u)||u<0)&&(u=n),{r:l,strokeWidth:u}}return{r,strokeWidth:n}}var Zb={exports:{}},ex={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VP;function Gae(){if(VP)return ex;VP=1;var e=Kc();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,s=e.useEffect,l=e.useMemo,u=e.useDebugValue;return ex.useSyncExternalStoreWithSelector=function(f,h,m,g,y){var v=a(null);if(v.current===null){var w={hasValue:!1,value:null};v.current=w}else w=v.current;v=l(function(){function _(T){if(!N){if(N=!0,O=T,T=g(T),y!==void 0&&w.hasValue){var k=w.value;if(y(k,T))return E=k}return E=T}if(k=E,r(O,T))return k;var M=g(T);return y!==void 0&&y(k,M)?(O=T,k):(O=T,E=M)}var N=!1,O,E,C=m===void 0?null:m;return[function(){return _(h())},C===null?void 0:function(){return _(C())}]},[h,m,g,y]);var x=n(f,v[0],v[1]);return s(function(){w.hasValue=!0,w.value=x},[x]),u(x),x},ex}var GP;function Wae(){return GP||(GP=1,Zb.exports=Gae()),Zb.exports}Wae();function Yae(e){e()}function Xae(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Yae(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var WP={notify(){},get:()=>[]};function Jae(e,t){let r,n=WP,a=0,s=!1;function l(x){m();const _=n.subscribe(x);let N=!1;return()=>{N||(N=!0,_(),g())}}function u(){n.notify()}function f(){w.onStateChange&&w.onStateChange()}function h(){return s}function m(){a++,r||(r=e.subscribe(f),n=Xae())}function g(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=WP)}function y(){s||(s=!0,m())}function v(){s&&(s=!1,g())}const w={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:f,isSubscribed:h,trySubscribe:y,tryUnsubscribe:v,getListeners:()=>n};return w}var Zae=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eie=Zae(),tie=()=>typeof navigator<"u"&&navigator.product==="ReactNative",rie=tie(),nie=()=>eie||rie?j.useLayoutEffect:j.useEffect,aie=nie();function YP(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function iie(e,t){if(YP(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!YP(e[r[a]],t[r[a]]))return!1;return!0}var tx=Symbol.for("react-redux-context"),rx=typeof globalThis<"u"?globalThis:{};function sie(){if(!j.createContext)return{};const e=rx[tx]??(rx[tx]=new Map);let t=e.get(j.createContext);return t||(t=j.createContext(null),e.set(j.createContext,t)),t}var oie=sie();function lie(e){const{children:t,context:r,serverState:n,store:a}=e,s=j.useMemo(()=>{const f=Jae(a);return{store:a,subscription:f,getServerState:n?()=>n:void 0}},[a,n]),l=j.useMemo(()=>a.getState(),[a]);aie(()=>{const{subscription:f}=s;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),l!==a.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[s,l]);const u=r||oie;return j.createElement(u.Provider,{value:s},t)}var cie=lie,uie=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function die(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function Fg(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(uie.has(n)){if(e[n]==null&&t[n]==null)continue;if(!iie(e[n],t[n]))return!1}else if(!die(e[n],t[n]))return!1;return!0}var fie=["id"],hie=["type","layout","connectNulls","needClip","shape"],mie=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Vd(){return Vd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vd.apply(null,arguments)}function XP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function za(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XP(Object(r),!0).forEach(function(n){pie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pie(e,t,r){return(t=gie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gie(e){var t=yie(e,"string");return typeof t=="symbol"?t:t+""}function yie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uS(e,t){if(e==null)return{};var r,n,a=vie(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function vie(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var bie=e=>{var{dataKey:t,name:r,stroke:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:Yc(r,t),payload:e}]},xie=j.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:s,name:l,hide:u,unit:f,tooltipType:h,id:m}=e,g={dataDefinedOnItem:r,getPosition:sl,settings:{stroke:n,strokeWidth:a,fill:s,dataKey:t,nameKey:void 0,name:Yc(l,t),hide:u,type:h,color:n,unit:f,graphicalItemId:m}};return j.createElement(nS,{tooltipEntrySettings:g})}),A5=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function wie(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],a=0;a<t;++a)n=[...n,...r];return n}var jie=(e,t,r)=>{var n=r.reduce((v,w)=>v+w);if(!n)return A5(t,e);for(var a=Math.floor(e/n),s=e%n,l=t-e,u=[],f=0,h=0;f<r.length;h+=(m=r[f])!==null&&m!==void 0?m:0,++f){var m,g=r[f];if(g!=null&&h+g>s){u=[...r.slice(0,f),s-h];break}}var y=u.length%2===0?[0,l]:[l];return[...wie(r,a),...u,...y].map(v=>"".concat(v,"px")).join(", ")};function Sie(e){var{clipPathId:t,points:r,props:n}=e,{dot:a,dataKey:s,needClip:l}=n,{id:u}=n,f=uS(n,fie),h=Un(f);return j.createElement(fne,{points:r,dot:a,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:h,needClip:l,clipPathId:t})}function _ie(e){var{showLabels:t,children:r,points:n}=e,a=j.useMemo(()=>n==null?void 0:n.map(s=>{var l,u,f={x:(l=s.x)!==null&&l!==void 0?l:0,y:(u=s.y)!==null&&u!==void 0?u:0,width:0,lowerWidth:0,upperWidth:0,height:0};return za(za({},f),{},{value:s.value,payload:s.payload,viewBox:f,parentViewBox:void 0,fill:void 0})}),[n]);return j.createElement(t5,{value:t?a:void 0},r)}function JP(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:a,props:s}=e,{type:l,layout:u,connectNulls:f,needClip:h,shape:m}=s,g=uS(s,hie),y=za(za({},un(g)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(t,")"):void 0,points:n,type:l,layout:u,connectNulls:f,strokeDasharray:a??s.strokeDasharray});return j.createElement(j.Fragment,null,(n==null?void 0:n.length)>1&&j.createElement(Zj,Vd({shapeType:"curve",option:m},y,{pathRef:r})),j.createElement(Sie,{points:n,clipPathId:t,props:s}))}function Nie(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function Oie(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:a,longestAnimatedLengthRef:s}=e,{points:l,strokeDasharray:u,isAnimationActive:f,animationBegin:h,animationDuration:m,animationEasing:g,animateNewValues:y,width:v,height:w,onAnimationEnd:x,onAnimationStart:_}=r,N=a.current,O=bf(l,"recharts-line-"),E=j.useRef(O),[C,T]=j.useState(!1),k=!C,M=j.useCallback(()=>{typeof x=="function"&&x(),T(!1)},[x]),R=j.useCallback(()=>{typeof _=="function"&&_(),T(!0)},[_]),L=Nie(n.current),V=j.useRef(0);E.current!==O&&(V.current=s.current,E.current=O);var G=V.current;return j.createElement(_ie,{points:l,showLabels:k},r.children,j.createElement(vf,{animationId:O,begin:h,duration:m,isActive:f,easing:g,onAnimationEnd:M,onAnimationStart:R,key:O},K=>{var fe=Vt(G,L+G,K),ge=Math.min(fe,L),he;if(f)if(u){var B="".concat(u).split(/[,\s]+/gim).map(ue=>parseFloat(ue));he=jie(ge,L,B)}else he=A5(L,ge);else he=u==null?void 0:String(u);if(K>0&&L>0&&(a.current=l,s.current=Math.max(s.current,ge)),N){var Q=N.length/l.length,ie=K===1?l:l.map((ue,I)=>{var D=Math.floor(I*Q);if(N[D]){var z=N[D];return za(za({},ue),{},{x:Vt(z.x,ue.x,K),y:Vt(z.y,ue.y,K)})}return y?za(za({},ue),{},{x:Vt(v*2,ue.x,K),y:Vt(w/2,ue.y,K)}):za(za({},ue),{},{x:ue.x,y:ue.y})});return a.current=ie,j.createElement(JP,{props:r,points:ie,clipPathId:t,pathRef:n,strokeDasharray:he})}return j.createElement(JP,{props:r,points:l,clipPathId:t,pathRef:n,strokeDasharray:he})}),j.createElement(Wj,{label:r.label}))}function Eie(e){var{clipPathId:t,props:r}=e,n=j.useRef(null),a=j.useRef(0),s=j.useRef(null);return j.createElement(Oie,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:a,pathRef:s})}var Aie=(e,t)=>{var r,n;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(n=e.y)!==null&&n!==void 0?n:void 0,value:e.value,errorVal:kt(e.payload,t)}};class Cie extends j.Component{render(){var{hide:t,dot:r,points:n,className:a,xAxisId:s,yAxisId:l,top:u,left:f,width:h,height:m,id:g,needClip:y,zIndex:v}=this.props;if(t)return null;var w=ht("recharts-line",a),x=g,{r:_,strokeWidth:N}=Vae(r),O=u5(r),E=_*2+N,C=y?"url(#clipPath-".concat(O?"":"dots-").concat(x,")"):void 0;return j.createElement(On,{zIndex:v},j.createElement(Mr,{className:w},y&&j.createElement("defs",null,j.createElement(S5,{clipPathId:x,xAxisId:s,yAxisId:l}),!O&&j.createElement("clipPath",{id:"clipPath-dots-".concat(x)},j.createElement("rect",{x:f-E/2,y:u-E/2,width:h+E,height:m+E}))),j.createElement(j5,{xAxisId:s,yAxisId:l,data:n,dataPointFormatter:Aie,errorBarOffset:0},j.createElement(Eie,{props:this.props,clipPathId:x}))),j.createElement(Tne,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:C}))}}var C5={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:yr.line,type:"linear"};function kie(e){var t=br(e,C5),{activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:s,animationEasing:l,connectNulls:u,dot:f,hide:h,isAnimationActive:m,label:g,legendType:y,xAxisId:v,yAxisId:w,id:x}=t,_=uS(t,mie),{needClip:N}=cS(v,w),O=sS(),E=ol(),C=en(),T=Ce(V=>Hae(V,v,w,C,x));if(E!=="horizontal"&&E!=="vertical"||T==null||O==null)return null;var{height:k,width:M,x:R,y:L}=O;return j.createElement(Cie,Vd({},_,{id:x,connectNulls:u,dot:f,activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:s,animationEasing:l,isAnimationActive:m,hide:h,label:g,legendType:y,xAxisId:v,yAxisId:w,points:T,layout:E,height:k,width:M,left:R,top:L,needClip:N}))}function Pie(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,dataKey:l,bandSize:u,displayedData:f}=e;return f.map((h,m)=>{var g=kt(h,l);if(t==="horizontal"){var y=DC({axis:r,ticks:a,bandSize:u,entry:h,index:m}),v=Xt(g)?null:n.scale.map(g);return{x:y,y:v??null,value:g,payload:h}}var w=Xt(g)?null:r.scale.map(g),x=DC({axis:n,ticks:s,bandSize:u,entry:h,index:m});return w==null||x==null?null:{x:w,y:x,value:g,payload:h}}).filter(Boolean)}function Tie(e){var t=br(e,C5),r=en();return j.createElement(aS,{id:t.id,type:"line"},n=>j.createElement(j.Fragment,null,j.createElement(d5,{legendPayload:bie(t)}),j.createElement(xie,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:n}),j.createElement(h5,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),j.createElement(kie,Vd({},t,{id:n}))))}var Ep=j.memo(Tie,Fg);Ep.displayName="Line";function dl(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(a=>a.id===t))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:m5}function fl(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(a=>a.id===t))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:m5}var Die="Invariant failed";function Mie(e,t){throw new Error(Die)}function Ow(){return Ow=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ow.apply(null,arguments)}function Ap(e){return j.createElement(Zj,Ow({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var Rie=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(Ne(t))return t;var s=Ne(n)||Xt(n);return s?t(n,a):(s||Mie(),r)}},Iie=(e,t,r)=>r,Lie=(e,t)=>t,Pf=W([Dg,Lie],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),Bie=W([Pf],e=>e==null?void 0:e.maxBarSize),$ie=(e,t,r,n)=>n,Uie=W([pt,Dg,dl,fl,Iie],(e,t,r,n,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),zie=(e,t,r)=>{var n=pt(e),a=dl(e,t),s=fl(e,t);if(!(a==null||s==null))return n==="horizontal"?bw(e,"yAxis",s,r):bw(e,"xAxis",a,r)},qie=(e,t)=>{var r=pt(e),n=dl(e,t),a=fl(e,t);if(!(n==null||a==null))return r==="horizontal"?Rk(e,"xAxis",n):Rk(e,"yAxis",a)},Fie=W([Uie,oX,qie],Dne),Kie=(e,t,r)=>{var n,a,s=Pf(e,t);if(s==null)return 0;var l=dl(e,t),u=fl(e,t);if(l==null||u==null)return 0;var f=pt(e),h=M4(e),{maxBarSize:m}=s,g=Xt(m)?h:m,y,v;return f==="horizontal"?(y=qs(e,"xAxis",l,r),v=zs(e,"xAxis",l,r)):(y=qs(e,"yAxis",u,r),v=zs(e,"yAxis",u,r)),(n=(a=Bc(y,v,!0))!==null&&a!==void 0?a:g)!==null&&n!==void 0?n:0},k5=(e,t,r)=>{var n=pt(e),a=dl(e,t),s=fl(e,t);if(!(a==null||s==null)){var l,u;return n==="horizontal"?(l=qs(e,"xAxis",a,r),u=zs(e,"xAxis",a,r)):(l=qs(e,"yAxis",s,r),u=zs(e,"yAxis",s,r)),Bc(l,u)}},Qie=W([Fie,M4,sX,R4,Kie,k5,Bie],Bne),Hie=(e,t,r)=>{var n=dl(e,t);if(n!=null)return qs(e,"xAxis",n,r)},Vie=(e,t,r)=>{var n=fl(e,t);if(n!=null)return qs(e,"yAxis",n,r)},Gie=(e,t,r)=>{var n=dl(e,t);if(n!=null)return zs(e,"xAxis",n,r)},Wie=(e,t,r)=>{var n=fl(e,t);if(n!=null)return zs(e,"yAxis",n,r)},Yie=W([Qie,Pf],Une),Xie=W([zie,Pf],$ne),Jie=W([_r,C1,Hie,Vie,Gie,Wie,Yie,pt,JY,k5,Xie,Pf,$ie],(e,t,r,n,a,s,l,u,f,h,m,g,y)=>{var{chartData:v,dataStartIndex:w,dataEndIndex:x}=f;if(!(g==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||r==null||n==null||a==null||s==null||h==null)){var{data:_}=g,N;if(_!=null&&_.length>0?N=_:N=v==null?void 0:v.slice(w,x+1),N!=null)return Ose({layout:u,barSettings:g,pos:l,parentViewBox:t,bandSize:h,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,stackedData:m,displayedData:N,offset:e,cells:y,dataStartIndex:w})}}),Zie=["index"];function Ew(){return Ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ew.apply(null,arguments)}function ese(e,t){if(e==null)return{};var r,n,a=tse(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function tse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var P5=j.createContext(void 0),rse=e=>{var t=j.useContext(P5);if(t!=null)return t.stackId;if(e!=null)return H7(e)},nse=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),ase=e=>{var t=j.useContext(P5);if(t!=null){var{stackId:r}=t;return"url(#".concat(nse(r,e),")")}},T5=e=>{var{index:t}=e,r=ese(e,Zie),n=ase(t);return j.createElement(Mr,Ew({className:"recharts-bar-stack-layer",clipPath:n},r))},ise=["onMouseEnter","onMouseLeave","onClick"],sse=["value","background","tooltipPosition"],ose=["id"],lse=["onMouseEnter","onClick","onMouseLeave"];function $i(){return $i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$i.apply(null,arguments)}function ZP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ln(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZP(Object(r),!0).forEach(function(n){cse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cse(e,t,r){return(t=use(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function use(e){var t=dse(e,"string");return typeof t=="symbol"?t:t+""}function dse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cp(e,t){if(e==null)return{};var r,n,a=fse(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function fse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hse=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:Yc(r,t),payload:e}]},mse=j.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:l,unit:u,tooltipType:f,id:h}=e,m={dataDefinedOnItem:void 0,getPosition:sl,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:Yc(s,t),hide:l,type:f,color:a,unit:u,graphicalItemId:h}};return j.createElement(nS,{tooltipEntrySettings:m})});function pse(e){var t=Ce(Fs),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:l,onMouseLeave:u,onClick:f}=s,h=Cp(s,ise),m=eS(l,n,s.id),g=tS(u),y=rS(f,n,s.id);if(!a||r==null)return null;var v=Vo(a);return j.createElement(On,{zIndex:zne(a,yr.barBackground)},r.map((w,x)=>{var{value:_,background:N,tooltipPosition:O}=w,E=Cp(w,sse);if(!N)return null;var C=m(w,x),T=g(w,x),k=y(w,x),M=ln(ln(ln(ln(ln({option:a,isActive:String(x)===t},E),{},{fill:"#eee"},N),v),ff(h,w,x)),{},{onMouseEnter:C,onMouseLeave:T,onClick:k,dataKey:n,index:x,className:"recharts-bar-background-rectangle"});return j.createElement(Ap,$i({key:"background-bar-".concat(x)},M))}))}function gse(e){var{showLabels:t,children:r,rects:n}=e,a=n==null?void 0:n.map(s=>{var l={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return ln(ln({},l),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:l,fill:s.fill})});return j.createElement(t5,{value:t?a:void 0},r)}function yse(e){var{shape:t,activeBar:r,baseProps:n,entry:a,index:s,dataKey:l}=e,u=Ce(Fs),f=Ce(qj),h=r&&String(s)===u&&(f==null||l===f),m=h?r:t;return h?j.createElement(On,{zIndex:yr.activeBar},j.createElement(T5,{index:s},j.createElement(Ap,$i({},n,{name:String(n.name)},a,{isActive:h,option:m,index:s,dataKey:l})))):j.createElement(Ap,$i({},n,{name:String(n.name)},a,{isActive:h,option:m,index:s,dataKey:l}))}function vse(e){var{shape:t,baseProps:r,entry:n,index:a,dataKey:s}=e;return j.createElement(Ap,$i({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:a,dataKey:s}))}function bse(e){var t,{data:r,props:n}=e,a=(t=Un(n))!==null&&t!==void 0?t:{},{id:s}=a,l=Cp(a,ose),{shape:u,dataKey:f,activeBar:h}=n,{onMouseEnter:m,onClick:g,onMouseLeave:y}=n,v=Cp(n,lse),w=eS(m,f,s),x=tS(y),_=rS(g,f,s);return r?j.createElement(j.Fragment,null,r.map((N,O)=>j.createElement(T5,$i({index:O,key:"rectangle-".concat(N==null?void 0:N.x,"-").concat(N==null?void 0:N.y,"-").concat(N==null?void 0:N.value,"-").concat(O),className:"recharts-bar-rectangle"},ff(v,N,O),{onMouseEnter:w(N,O),onMouseLeave:x(N,O),onClick:_(N,O)}),h?j.createElement(yse,{shape:u,activeBar:h,baseProps:l,entry:N,index:O,dataKey:f}):j.createElement(vse,{shape:u,baseProps:l,entry:N,index:O,dataKey:f})))):null}function xse(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:l,animationDuration:u,animationEasing:f,onAnimationEnd:h,onAnimationStart:m}=t,g=r.current,y=bf(t,"recharts-bar-"),[v,w]=j.useState(!1),x=!v,_=j.useCallback(()=>{typeof h=="function"&&h(),w(!1)},[h]),N=j.useCallback(()=>{typeof m=="function"&&m(),w(!0)},[m]);return j.createElement(gse,{showLabels:x,rects:n},j.createElement(vf,{animationId:y,begin:l,duration:u,isActive:s,easing:f,onAnimationEnd:_,onAnimationStart:N,key:y},O=>{var E=O===1?n:n==null?void 0:n.map((C,T)=>{var k=g&&g[T];if(k)return ln(ln({},C),{},{x:Vt(k.x,C.x,O),y:Vt(k.y,C.y,O),width:Vt(k.width,C.width,O),height:Vt(k.height,C.height,O)});if(a==="horizontal"){var M=Vt(0,C.height,O),R=Vt(C.stackedBarStart,C.y,O);return ln(ln({},C),{},{y:R,height:M})}var L=Vt(0,C.width,O),V=Vt(C.stackedBarStart,C.x,O);return ln(ln({},C),{},{width:L,x:V})});return O>0&&(r.current=E??null),E==null?null:j.createElement(Mr,null,j.createElement(bse,{props:t,data:E}))}),j.createElement(Wj,{label:t.label}),t.children)}function wse(e){var t=j.useRef(null);return j.createElement(xse,{previousRectanglesRef:t,props:e})}var D5=0,jse=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:kt(e,t)}};class Sse extends j.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:l,needClip:u,background:f,id:h}=this.props;if(t||r==null)return null;var m=ht("recharts-bar",a),g=h;return j.createElement(Mr,{className:m,id:h},u&&j.createElement("defs",null,j.createElement(S5,{clipPathId:g,xAxisId:s,yAxisId:l})),j.createElement(Mr,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(g,")"):void 0},j.createElement(pse,{data:r,dataKey:n,background:f,allOtherBarProps:this.props}),j.createElement(wse,this.props)))}}var _se={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:D5,xAxisId:0,yAxisId:0,zIndex:yr.bar};function Nse(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:f,animationEasing:h,isAnimationActive:m}=e,{needClip:g}=cS(t,r),y=ol(),v=en(),w=Jj(e.children,ul),x=Ce(O=>Jie(O,e.id,v,w));if(y!=="vertical"&&y!=="horizontal")return null;var _,N=x==null?void 0:x[0];return N==null||N.height==null||N.width==null?_=0:_=y==="vertical"?N.height/2:N.width/2,j.createElement(j5,{xAxisId:t,yAxisId:r,data:x,dataPointFormatter:jse,errorBarOffset:_},j.createElement(Sse,$i({},e,{layout:y,needClip:g,data:x,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:f,animationEasing:h,isAnimationActive:m})))}function Ose(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:l,yAxis:u,xAxisTicks:f,yAxisTicks:h,stackedData:m,displayedData:g,offset:y,cells:v,parentViewBox:w,dataStartIndex:x}=e,_=t==="horizontal"?u:l,N=m?_.scale.domain():null,O=V7({numericAxis:_}),E=_.scale.map(O);return g.map((C,T)=>{var k,M,R,L,V,G;if(m){var K=m[T+x];if(K==null)return null;k=z7(K,N)}else k=kt(C,r),Array.isArray(k)||(k=[O,k]);var fe=Rie(n,D5)(k[1],T);if(t==="horizontal"){var ge,he=u.scale.map(k[0]),B=u.scale.map(k[1]);if(he==null||B==null)return null;M=MC({axis:l,ticks:f,bandSize:s,offset:a.offset,entry:C,index:T}),R=(ge=B??he)!==null&&ge!==void 0?ge:void 0,L=a.size;var Q=he-B;if(V=Qa(Q)?0:Q,G={x:M,y:y.top,width:L,height:y.height},Math.abs(fe)>0&&Math.abs(V)<Math.abs(fe)){var ie=Dr(V||fe)*(Math.abs(fe)-Math.abs(V));R-=ie,V+=ie}}else{var ue=l.scale.map(k[0]),I=l.scale.map(k[1]);if(ue==null||I==null)return null;if(M=ue,R=MC({axis:u,ticks:h,bandSize:s,offset:a.offset,entry:C,index:T}),L=I-ue,V=a.size,G={x:y.left,y:R,width:y.width,height:V},Math.abs(fe)>0&&Math.abs(L)<Math.abs(fe)){var D=Dr(L||fe)*(Math.abs(fe)-Math.abs(L));L+=D}}if(M==null||R==null||L==null||V==null)return null;var z=ln(ln({},C),{},{stackedBarStart:E,x:M,y:R,width:L,height:V,value:m?k:k[1],payload:C,background:G,tooltipPosition:{x:M+L/2,y:R+V/2},parentViewBox:w},v&&v[T]&&v[T].props);return z}).filter(Boolean)}function Ese(e){var t=br(e,_se),r=rse(t.stackId),n=en();return j.createElement(aS,{id:t.id,type:"bar"},a=>j.createElement(j.Fragment,null,j.createElement(d5,{legendPayload:hse(t)}),j.createElement(mse,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:a}),j.createElement(h5,{type:"bar",id:a,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),j.createElement(On,{zIndex:t.zIndex},j.createElement(Nse,$i({},t,{id:a})))))}var Ni=j.memo(Ese,Fg);Ni.displayName="Bar";var Ase=["domain","range"],Cse=["domain","range"];function eT(e,t){if(e==null)return{};var r,n,a=kse(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function kse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function tT(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function M5(e,t){if(e===t)return!0;var{domain:r,range:n}=e,a=eT(e,Ase),{domain:s,range:l}=t,u=eT(t,Cse);return!tT(r,s)||!tT(n,l)?!1:Fg(a,u)}var Pse=["type"],Tse=["dangerouslySetInnerHTML","ticks","scale"],Dse=["id","scale"];function Aw(){return Aw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Aw.apply(null,arguments)}function rT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rT(Object(r),!0).forEach(function(n){Mse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mse(e,t,r){return(t=Rse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rse(e){var t=Ise(e,"string");return typeof t=="symbol"?t:t+""}function Ise(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cw(e,t){if(e==null)return{};var r,n,a=Lse(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Lse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Bse(e){var t=Lt(),r=j.useRef(null),n=wR(),{type:a}=e,s=Cw(e,Pse),l=Ag(n,"xAxis",a),u=j.useMemo(()=>{if(l!=null)return nT(nT({},s),{},{type:l})},[s,l]);return j.useLayoutEffect(()=>{u!=null&&(r.current===null?t(yne(u)):r.current!==u&&t(vne({prev:r.current,next:u})),r.current=u)},[u,t]),j.useLayoutEffect(()=>()=>{r.current&&(t(bne(r.current)),r.current=null)},[t]),null}var $se=e=>{var{xAxisId:t,className:r}=e,n=Ce(C1),a=en(),s="xAxis",l=Ce(N=>mI(N,s,t,a)),u=Ce(N=>uI(N,t)),f=Ce(N=>oJ(N,t)),h=Ce(N=>Q4(N,t));if(u==null||f==null||h==null)return null;var{dangerouslySetInnerHTML:m,ticks:g,scale:y}=e,v=Cw(e,Tse),{id:w,scale:x}=h,_=Cw(h,Dse);return j.createElement(lS,Aw({},v,_,{x:f.x,y:f.y,width:u.width,height:u.height,className:ht("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:l,axisType:s}))},Use={allowDataOverflow:Cr.allowDataOverflow,allowDecimals:Cr.allowDecimals,allowDuplicatedCategory:Cr.allowDuplicatedCategory,angle:Cr.angle,axisLine:ki.axisLine,height:Cr.height,hide:!1,includeHidden:Cr.includeHidden,interval:Cr.interval,label:!1,minTickGap:Cr.minTickGap,mirror:Cr.mirror,orientation:Cr.orientation,padding:Cr.padding,reversed:Cr.reversed,scale:Cr.scale,tick:Cr.tick,tickCount:Cr.tickCount,tickLine:ki.tickLine,tickSize:ki.tickSize,type:Cr.type,xAxisId:0},zse=e=>{var t=br(e,Use);return j.createElement(j.Fragment,null,j.createElement(Bse,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),j.createElement($se,t))},xc=j.memo(zse,M5);xc.displayName="XAxis";var qse=["type"],Fse=["dangerouslySetInnerHTML","ticks","scale"],Kse=["id","scale"];function kw(){return kw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kw.apply(null,arguments)}function aT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function iT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aT(Object(r),!0).forEach(function(n){Qse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qse(e,t,r){return(t=Hse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hse(e){var t=Vse(e,"string");return typeof t=="symbol"?t:t+""}function Vse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pw(e,t){if(e==null)return{};var r,n,a=Gse(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Gse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Wse(e){var t=Lt(),r=j.useRef(null),n=wR(),{type:a}=e,s=Pw(e,qse),l=Ag(n,"yAxis",a),u=j.useMemo(()=>{if(l!=null)return iT(iT({},s),{},{type:l})},[l,s]);return j.useLayoutEffect(()=>{u!=null&&(r.current===null?t(xne(u)):r.current!==u&&t(wne({prev:r.current,next:u})),r.current=u)},[u,t]),j.useLayoutEffect(()=>()=>{r.current&&(t(jne(r.current)),r.current=null)},[t]),null}function Yse(e){var{yAxisId:t,className:r,width:n,label:a}=e,s=j.useRef(null),l=j.useRef(null),u=Ce(C1),f=en(),h=Lt(),m="yAxis",g=Ce(k=>dI(k,t)),y=Ce(k=>cJ(k,t)),v=Ce(k=>mI(k,m,t,f)),w=Ce(k=>H4(k,t));if(j.useLayoutEffect(()=>{if(!(n!=="auto"||!g||Gj(a)||j.isValidElement(a)||w==null)){var k=s.current;if(k){var M=k.getCalculatedWidth();Math.round(g.width)!==Math.round(M)&&h(Sne({id:t,width:M}))}}},[v,g,h,a,t,n,w]),g==null||y==null||w==null)return null;var{dangerouslySetInnerHTML:x,ticks:_,scale:N}=e,O=Pw(e,Fse),{id:E,scale:C}=w,T=Pw(w,Kse);return j.createElement(lS,kw({},O,T,{ref:s,labelRef:l,x:y.x,y:y.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:g.width,height:g.height,className:ht("recharts-".concat(m," ").concat(m),r),viewBox:u,ticks:v,axisType:m}))}var Xse={allowDataOverflow:kr.allowDataOverflow,allowDecimals:kr.allowDecimals,allowDuplicatedCategory:kr.allowDuplicatedCategory,angle:kr.angle,axisLine:ki.axisLine,hide:!1,includeHidden:kr.includeHidden,interval:kr.interval,label:!1,minTickGap:kr.minTickGap,mirror:kr.mirror,orientation:kr.orientation,padding:kr.padding,reversed:kr.reversed,scale:kr.scale,tick:kr.tick,tickCount:kr.tickCount,tickLine:ki.tickLine,tickSize:ki.tickSize,type:kr.type,width:kr.width,yAxisId:0},Jse=e=>{var t=br(e,Xse);return j.createElement(j.Fragment,null,j.createElement(Wse,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),j.createElement(Yse,t))},wc=j.memo(Jse,M5);wc.displayName="YAxis";var Zse=(e,t)=>t,dS=W([Zse,pt,q4,Ir,PI,Wi,NZ,_r],TZ),fS=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},R5=ca("mouseClick"),I5=mf();I5.startListening({actionCreator:R5,effect:(e,t)=>{var r=e.payload,n=dS(t.getState(),fS(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(SJ({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var Tw=ca("mouseMove"),L5=mf(),bm=null;L5.startListening({actionCreator:Tw,effect:(e,t)=>{var r=e.payload;bm!==null&&cancelAnimationFrame(bm);var n=fS(r);bm=requestAnimationFrame(()=>{var a=t.getState(),s=Ij(a,a.tooltip.settings.shared);if(s==="axis"){var l=dS(a,n);(l==null?void 0:l.activeIndex)!=null?t.dispatch(jI({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate})):t.dispatch(wI())}bm=null})}});function eoe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var sT={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},B5=Nn({name:"rootProps",initialState:sT,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:sT.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),toe=B5.reducer,{updateOptions:roe}=B5.actions,noe=null,aoe={updatePolarOptions:(e,t)=>t.payload},$5=Nn({name:"polarOptions",initialState:noe,reducers:aoe}),{updatePolarOptions:ioe}=$5.actions,soe=$5.reducer,U5=ca("keyDown"),z5=ca("focus"),hS=mf();hS.startListening({actionCreator:U5,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var l=Lj(a,iu(r),Ef(r),Cf(r)),u=l==null?-1:Number(l);if(!(!Number.isFinite(u)||u<0)){var f=Wi(r);if(s==="Enter"){var h=wp(r,"axis","hover",String(a.index));t.dispatch(ww({active:!a.active,activeIndex:a.index,activeCoordinate:h}));return}var m=hJ(r),g=m==="left-to-right"?1:-1,y=s==="ArrowRight"?1:-1,v=u+y*g;if(!(f==null||v>=f.length||v<0)){var w=wp(r,"axis","hover",String(v));t.dispatch(ww({active:!0,activeIndex:v.toString(),activeCoordinate:w}))}}}}}});hS.startListening({actionCreator:z5,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",l=wp(r,"axis","hover",String(s));t.dispatch(ww({active:!0,activeIndex:s,activeCoordinate:l}))}}}});var na=ca("externalEvent"),q5=mf(),nx=new Map;q5.startListening({actionCreator:na,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var a=n.type,s=nx.get(a);s!==void 0&&cancelAnimationFrame(s);var l=requestAnimationFrame(()=>{try{var u=t.getState(),f={activeCoordinate:cZ(u),activeDataKey:qj(u),activeIndex:Fs(u),activeLabel:MI(u),activeTooltipIndex:Fs(u),isTooltipActive:uZ(u)};r(f,n)}finally{nx.delete(a)}});nx.set(a,l)}}});var ooe=W([nu],e=>e.tooltipItemPayloads),loe=W([ooe,(e,t)=>t,(e,t,r)=>r],(e,t,r)=>{if(t!=null){var n=e.find(s=>s.settings.graphicalItemId===r);if(n!=null){var{getPosition:a}=n;if(a!=null)return a(t)}}}),F5=ca("touchMove"),K5=mf();K5.startListening({actionCreator:F5,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),a=Ij(n,n.tooltip.settings.shared);if(a==="axis"){var s=r.touches[0];if(s==null)return;var l=dS(n,fS({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));(l==null?void 0:l.activeIndex)!=null&&t.dispatch(jI({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate}))}else if(a==="item"){var u,f=r.touches[0];if(document.elementFromPoint==null||f==null)return;var h=document.elementFromPoint(f.clientX,f.clientY);if(!h||!h.getAttribute)return;var m=h.getAttribute(pR),g=(u=h.getAttribute(gR))!==null&&u!==void 0?u:void 0,y=au(n).find(x=>x.id===g);if(m==null||y==null||g==null)return;var{dataKey:v}=y,w=loe(n,m,g);t.dispatch(xI({activeDataKey:v,activeIndex:m,activeCoordinate:w,activeGraphicalItemId:g}))}}}});var coe=LM({brush:qne,cartesianAxis:_ne,chartData:cee,errorBars:Iae,graphicalItems:Pre,layout:I7,legend:FH,options:aee,polarAxis:Qte,polarOptions:soe,referenceElements:Hne,rootProps:toe,tooltip:_J,zIndex:HZ}),uoe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return o7({reducer:coe,preloadedState:t,middleware:n=>{var a;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([I5.middleware,L5.middleware,hS.middleware,q5.middleware,K5.middleware])},enhancers:n=>{var a=n;return typeof n=="function"&&(a=n()),a.concat(JM({type:"raf"}))},devTools:{serialize:{replacer:eoe},name:"recharts-".concat(r)}})};function Q5(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=en(),s=j.useRef(null);if(a)return r;s.current==null&&(s.current=uoe(t,n));var l=j1;return j.createElement(cie,{context:l,store:s.current},r)}function doe(e){var{layout:t,margin:r}=e,n=Lt(),a=en();return j.useEffect(()=>{a||(n(D7(t)),n(T7(r)))},[n,a,t,r]),null}var H5=j.memo(doe,Fg);function V5(e){var t=Lt();return j.useEffect(()=>{t(roe(e))},[t,e]),null}function oT(e){var{zIndex:t,isPanorama:r}=e,n=j.useRef(null),a=Lt();return j.useLayoutEffect(()=>(n.current&&a(KZ({zIndex:t,element:n.current,isPanorama:r})),()=>{a(QZ({zIndex:t,isPanorama:r}))}),[a,t,r]),j.createElement("g",{tabIndex:-1,ref:n})}function lT(e){var{children:t,isPanorama:r}=e,n=Ce(MZ);if(!n||n.length===0)return t;var a=n.filter(l=>l<0),s=n.filter(l=>l>0);return j.createElement(j.Fragment,null,a.map(l=>j.createElement(oT,{key:l,zIndex:l,isPanorama:r})),t,s.map(l=>j.createElement(oT,{key:l,zIndex:l,isPanorama:r})))}var foe=["children"];function hoe(e,t){if(e==null)return{};var r,n,a=moe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function moe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function kp(){return kp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kp.apply(null,arguments)}var poe={width:"100%",height:"100%",display:"block"},goe=j.forwardRef((e,t)=>{var r=T1(),n=D1(),a=DR();if(!Va(r)||!Va(n))return null;var{children:s,otherAttributes:l,title:u,desc:f}=e,h,m;return l!=null&&(typeof l.tabIndex=="number"?h=l.tabIndex:h=a?0:void 0,typeof l.role=="string"?m=l.role:m=a?"application":void 0),j.createElement(d1,kp({},l,{title:u,desc:f,role:m,tabIndex:h,width:r,height:n,style:poe,ref:t}),s)}),yoe=e=>{var{children:t}=e,r=Ce(mg);if(!r)return null;var{width:n,height:a,y:s,x:l}=r;return j.createElement(d1,{width:n,height:a,x:l,y:s},t)},cT=j.forwardRef((e,t)=>{var{children:r}=e,n=hoe(e,foe),a=en();return a?j.createElement(yoe,null,j.createElement(lT,{isPanorama:!0},r)):j.createElement(goe,kp({ref:t},n),j.createElement(lT,{isPanorama:!1},r))});function voe(){var e=Lt(),[t,r]=j.useState(null),n=Ce(Z7);return j.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;lt(s)&&s!==n&&e(R7(s))}},[t,e,n]),r}function uT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function boe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uT(Object(r),!0).forEach(function(n){xoe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xoe(e,t,r){return(t=woe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function woe(e){var t=joe(e,"string");return typeof t=="symbol"?t:t+""}function joe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $s(){return $s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$s.apply(null,arguments)}var Soe=()=>(vee(),null);function Pp(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var _oe=j.forwardRef((e,t)=>{var r,n,a=j.useRef(null),[s,l]=j.useState({containerWidth:Pp((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:Pp((n=e.style)===null||n===void 0?void 0:n.height)}),u=j.useCallback((h,m)=>{l(g=>{var y=Math.round(h),v=Math.round(m);return g.containerWidth===y&&g.containerHeight===v?g:{containerWidth:y,containerHeight:v}})},[]),f=j.useCallback(h=>{if(typeof t=="function"&&t(h),h!=null&&typeof ResizeObserver<"u"){var{width:m,height:g}=h.getBoundingClientRect();u(m,g);var y=w=>{var x=w[0];if(x!=null){var{width:_,height:N}=x.contentRect;u(_,N)}},v=new ResizeObserver(y);v.observe(h),a.current=v}},[t,u]);return j.useEffect(()=>()=>{var h=a.current;h!=null&&h.disconnect()},[u]),j.createElement(j.Fragment,null,j.createElement(gf,{width:s.containerWidth,height:s.containerHeight}),j.createElement("div",$s({ref:f},e)))}),Noe=j.forwardRef((e,t)=>{var{width:r,height:n}=e,[a,s]=j.useState({containerWidth:Pp(r),containerHeight:Pp(n)}),l=j.useCallback((f,h)=>{s(m=>{var g=Math.round(f),y=Math.round(h);return m.containerWidth===g&&m.containerHeight===y?m:{containerWidth:g,containerHeight:y}})},[]),u=j.useCallback(f=>{if(typeof t=="function"&&t(f),f!=null){var{width:h,height:m}=f.getBoundingClientRect();l(h,m)}},[t,l]);return j.createElement(j.Fragment,null,j.createElement(gf,{width:a.containerWidth,height:a.containerHeight}),j.createElement("div",$s({ref:u},e)))}),Ooe=j.forwardRef((e,t)=>{var{width:r,height:n}=e;return j.createElement(j.Fragment,null,j.createElement(gf,{width:r,height:n}),j.createElement("div",$s({ref:t},e)))}),Eoe=j.forwardRef((e,t)=>{var{width:r,height:n}=e;return typeof r=="string"||typeof n=="string"?j.createElement(Noe,$s({},e,{ref:t})):typeof r=="number"&&typeof n=="number"?j.createElement(Ooe,$s({},e,{width:r,height:n,ref:t})):j.createElement(j.Fragment,null,j.createElement(gf,{width:r,height:n}),j.createElement("div",$s({ref:t},e)))});function Aoe(e){return e?_oe:Eoe}var Coe=j.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:l,onDoubleClick:u,onMouseDown:f,onMouseEnter:h,onMouseLeave:m,onMouseMove:g,onMouseUp:y,onTouchEnd:v,onTouchMove:w,onTouchStart:x,style:_,width:N,responsive:O,dispatchTouchEvents:E=!0}=e,C=j.useRef(null),T=Lt(),[k,M]=j.useState(null),[R,L]=j.useState(null),V=voe(),G=k1(),K=(G==null?void 0:G.width)>0?G.width:N,fe=(G==null?void 0:G.height)>0?G.height:a,ge=j.useCallback(te=>{V(te),typeof t=="function"&&t(te),M(te),L(te),te!=null&&(C.current=te)},[V,t,M,L]),he=j.useCallback(te=>{T(R5(te)),T(na({handler:s,reactEvent:te}))},[T,s]),B=j.useCallback(te=>{T(Tw(te)),T(na({handler:h,reactEvent:te}))},[T,h]),Q=j.useCallback(te=>{T(wI()),T(na({handler:m,reactEvent:te}))},[T,m]),ie=j.useCallback(te=>{T(Tw(te)),T(na({handler:g,reactEvent:te}))},[T,g]),ue=j.useCallback(()=>{T(z5())},[T]),I=j.useCallback(te=>{T(U5(te.key))},[T]),D=j.useCallback(te=>{T(na({handler:l,reactEvent:te}))},[T,l]),z=j.useCallback(te=>{T(na({handler:u,reactEvent:te}))},[T,u]),Y=j.useCallback(te=>{T(na({handler:f,reactEvent:te}))},[T,f]),q=j.useCallback(te=>{T(na({handler:y,reactEvent:te}))},[T,y]),pe=j.useCallback(te=>{T(na({handler:x,reactEvent:te}))},[T,x]),ve=j.useCallback(te=>{E&&T(F5(te)),T(na({handler:w,reactEvent:te}))},[T,E,w]),me=j.useCallback(te=>{T(na({handler:v,reactEvent:te}))},[T,v]),Ee=Aoe(O);return j.createElement(zI.Provider,{value:k},j.createElement(eM.Provider,{value:R},j.createElement(Ee,{width:K??(_==null?void 0:_.width),height:fe??(_==null?void 0:_.height),className:ht("recharts-wrapper",n),style:boe({position:"relative",cursor:"default",width:K,height:fe},_),onClick:he,onContextMenu:D,onDoubleClick:z,onFocus:ue,onKeyDown:I,onMouseDown:Y,onMouseEnter:B,onMouseLeave:Q,onMouseMove:ie,onMouseUp:q,onTouchEnd:me,onTouchMove:ve,onTouchStart:pe,ref:ge},j.createElement(Soe,null),r)))}),koe=["width","height","responsive","children","className","style","compact","title","desc"];function Poe(e,t){if(e==null)return{};var r,n,a=Toe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Toe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var G5=j.forwardRef((e,t)=>{var{width:r,height:n,responsive:a,children:s,className:l,style:u,compact:f,title:h,desc:m}=e,g=Poe(e,koe),y=Un(g);return f?j.createElement(j.Fragment,null,j.createElement(gf,{width:r,height:n}),j.createElement(cT,{otherAttributes:y,title:h,desc:m},s)):j.createElement(Coe,{className:l,style:u,width:r,height:n,responsive:a??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},j.createElement(cT,{otherAttributes:y,title:h,desc:m,ref:t},j.createElement(Gne,null,s)))});function Dw(){return Dw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dw.apply(null,arguments)}var Doe={top:5,right:5,bottom:5,left:5},Moe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Doe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},W5=j.forwardRef(function(t,r){var n,a=br(t.categoricalChartProps,Moe),{chartName:s,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,m={chartName:s,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,eventEmitter:void 0};return j.createElement(Q5,{preloadedState:{options:m},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:s},j.createElement(g5,{chartData:h.data}),j.createElement(H5,{layout:a.layout,margin:a.margin}),j.createElement(V5,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),j.createElement(G5,Dw({},a,{ref:r})))}),Roe=["axis","item"],Y5=j.forwardRef((e,t)=>j.createElement(W5,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Roe,tooltipPayloadSearcher:Vj,categoricalChartProps:e,ref:t}));function Ioe(e){var t=Lt();return j.useEffect(()=>{t(ioe(e))},[t,e]),null}var Loe=["layout"];function Mw(){return Mw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mw.apply(null,arguments)}function Boe(e,t){if(e==null)return{};var r,n,a=$oe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function $oe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Uoe={top:5,right:5,bottom:5,left:5},X5={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Uoe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},zoe=j.forwardRef(function(t,r){var n,a=br(t.categoricalChartProps,X5),{layout:s}=a,l=Boe(a,Loe),{chartName:u,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:m}=t,g={chartName:u,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:m,eventEmitter:void 0};return j.createElement(Q5,{preloadedState:{options:g},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:u},j.createElement(g5,{chartData:a.data}),j.createElement(H5,{layout:s,margin:a.margin}),j.createElement(V5,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),j.createElement(Ioe,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),j.createElement(G5,Mw({},l,{ref:r})))});function dT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dT(Object(r),!0).forEach(function(n){qoe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qoe(e,t,r){return(t=Foe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Foe(e){var t=Koe(e,"string");return typeof t=="symbol"?t:t+""}function Koe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qoe=["item"],Hoe=fT(fT({},X5),{},{layout:"centric",startAngle:0,endAngle:360}),J5=j.forwardRef((e,t)=>{var r=br(e,Hoe);return j.createElement(zoe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Qoe,tooltipPayloadSearcher:Vj,categoricalChartProps:r,ref:t})}),Voe=["axis"],Rw=j.forwardRef((e,t)=>j.createElement(W5,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Voe,tooltipPayloadSearcher:Vj,categoricalChartProps:e,ref:t}));const Goe=()=>{const{user:e,isLoading:t}=da(),[r,n]=j.useState(window.innerWidth<768);if(j.useEffect(()=>{const I=()=>n(window.innerWidth<768);return window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[]),t)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading session..."});if(!e)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Not Authenticated"});const a=e.role===ft.ADMIN,[s,l]=j.useState("All Time"),[u,f]=j.useState({from:"",to:""}),{data:h=[],isPending:m}=Qp(),{data:g=[],isPending:y}=Hp(),{data:v=[],isPending:w}=of(),{data:x=[],isPending:_}=zi(),{data:N=[]}=Vs(),O=m||y||w||_,E=j.useMemo(()=>h.filter(I=>w0(I.orderDate,s,u)),[h,s,u]),C=j.useMemo(()=>g.filter(I=>w0(I.billDate,s,u)),[g,s,u]),T=j.useMemo(()=>v.filter(I=>w0(I.date,s,u)),[v,s,u]),k=T.filter(I=>I.type==="Income"&&!!I.referenceId).reduce((I,D)=>I+D.amount,0),M=k>0?k:E.filter(I=>I.status===Re.COMPLETED).reduce((I,D)=>I+D.total,0),R=T.filter(I=>I.type==="Expense"&&I.category==="expense_purchases").reduce((I,D)=>I+D.amount,0),L=R>0?R:C.reduce((I,D)=>I+D.total,0),V=T.filter(I=>I.type==="Expense"&&I.category!=="expense_purchases").reduce((I,D)=>I+D.amount,0),G=M-L-V,K={total:E.length,processing:E.filter(I=>I.status===Re.PROCESSING).length,picked:E.filter(I=>I.status===Re.PICKED).length,completed:E.filter(I=>I.status===Re.COMPLETED).length};E.reduce((I,D)=>I+(D.total-D.paidAmount),0),C.reduce((I,D)=>I+(D.total-D.paidAmount),0);const fe=h.filter(I=>I.createdBy===e.id).length,ge=new Date().toISOString().split("T")[0],he=h.filter(I=>I.createdBy===e.id&&I.orderDate===ge).length,B=h.filter(I=>I.createdBy===e.id&&I.status===Re.ON_HOLD).length,Q=j.useMemo(()=>{const I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],D=new Date().getFullYear(),z={};return I.forEach(Y=>{z[Y]={income:0,expense:0}}),v.forEach(Y=>{const q=new Date(Y.date);if(q.getFullYear()!==D)return;const pe=q.getMonth(),ve=I[pe];Y.type==="Income"?z[ve].income+=Y.amount:Y.type==="Expense"&&(z[ve].expense+=Y.amount)}),I.map(Y=>({name:Y,income:z[Y].income,expense:-z[Y].expense,profit:z[Y].income-z[Y].expense}))},[h,g,v]),ie=j.useMemo(()=>{const I=new Map(N.map(me=>[me.id,me.name])),D={},z={},Y=["#10B981","#3B82F6","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16"];let q=0;L>0&&(D.Purchases=L,z.Purchases=Y[q++]),T.filter(me=>me.type==="Expense"&&me.category!=="expense_purchases").forEach(me=>{const Ee=I.get(me.category)||me.category||"Uncategorized";D[Ee]=(D[Ee]||0)+me.amount,z[Ee]||(z[Ee]=Y[q%Y.length],q++)});const ve=Object.entries(D).map(([me,Ee])=>({name:me,value:Math.max(Ee,1),color:z[me]}));return ve.length>0?ve:[{name:"No Data",value:1,color:"#D1D5DB"}]},[T,L,N]),ue=x.map(I=>({name:I.name.split(" ")[0],orders:E.filter(D=>D.createdBy===I.id).length})).sort((I,D)=>D.orders-I.orders);return a?c.jsxs("div",{className:"space-y-6",children:[c.jsx(sf,{isLoading:O,message:"Loading dashboard data..."}),c.jsx(kd,{filterRange:s,setFilterRange:l,customDates:u,setCustomDates:f}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(ya,{title:"Total Sales",value:we(M),icon:ne.Sales,bgColor:"bg-blue-600",textColor:"text-white",iconBgColor:"bg-blue-700"}),c.jsx(ya,{title:"Total Purchases",value:we(L),icon:ne.Briefcase,bgColor:"bg-purple-600",textColor:"text-white",iconBgColor:"bg-purple-700"}),c.jsx(ya,{title:"Other Expenses",value:we(V),icon:ne.Delete,bgColor:"bg-amber-500",textColor:"text-white",iconBgColor:"bg-amber-600"}),c.jsx(ya,{title:"Total Profit",value:we(G),icon:ne.Reports,isProfitCard:!0,profitValue:G}),c.jsx(ya,{title:"Total Orders",value:K.total,icon:ne.Dashboard,bgColor:"bg-indigo-700",textColor:"text-white",iconBgColor:"bg-indigo-800"}),c.jsx(ya,{title:"Processing Orders",value:K.processing,icon:ne.More,bgColor:"bg-sky-500",textColor:"text-white",iconBgColor:"bg-sky-600"}),c.jsx(ya,{title:"Picked Orders",value:K.picked,icon:ne.Courier,bgColor:"bg-cyan-500",textColor:"text-white",iconBgColor:"bg-cyan-600"}),c.jsx(ya,{title:"Completed Orders",value:K.completed,icon:ne.PlusCircle,bgColor:"bg-teal-600",textColor:"text-white",iconBgColor:"bg-teal-700"})]}),c.jsxs("div",{className:"bg-white p-8 rounded-xl border border-gray-100 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsx("div",{children:c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Cash Flow"})}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full bg-[#059669]"}),c.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Income"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),c.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Expense"})]})]})]}),c.jsx("div",{className:"h-[250px]",children:c.jsx(yc,{width:"100%",height:"100%",children:r?c.jsxs(Rw,{data:Q,margin:{top:10,right:0,left:-20,bottom:0},children:[c.jsx(bc,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),c.jsx(xc,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:12,fontWeight:600,fill:"#94a3b8"}}),c.jsx(wc,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fontWeight:600,fill:"#94a3b8"}}),c.jsx(Po,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1)"},cursor:{fill:"#f8fafc"}}),c.jsx(Ni,{dataKey:"income",fill:"#059669",radius:[4,4,0,0],barSize:40}),c.jsx(Ni,{dataKey:"expense",fill:"#EF4444",radius:[4,4,0,0],barSize:40}),c.jsx(Ep,{type:"monotone",dataKey:"profit",stroke:"#8B5CF6",strokeWidth:4,dot:{r:6,fill:"#8B5CF6",strokeWidth:2,stroke:"#fff"}})]}):c.jsxs(Rw,{data:Q,children:[c.jsx(bc,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),c.jsx(xc,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:12,fontWeight:600,fill:"#94a3b8"}}),c.jsx(wc,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fontWeight:600,fill:"#94a3b8"}}),c.jsx(Po,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1)"},cursor:{fill:"#f8fafc"}}),c.jsx(Ni,{dataKey:"income",fill:"#059669",radius:[4,4,0,0],barSize:40}),c.jsx(Ni,{dataKey:"expense",fill:"#EF4444",radius:[4,4,0,0],barSize:40}),c.jsx(Ep,{type:"monotone",dataKey:"profit",stroke:"#8B5CF6",strokeWidth:4,dot:{r:6,fill:"#8B5CF6",strokeWidth:2,stroke:"#fff"}})]})})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-white p-8 rounded-xl border border-gray-100 shadow-sm",children:[c.jsx("div",{className:"flex items-center justify-between mb-8",children:c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Profit & Loss Summary"})}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center p-4 border border-gray-100 rounded-lg",children:[c.jsx("span",{className:"font-bold text-gray-600 text-sm",children:"Total Incomes"}),c.jsx("span",{className:"font-black text-gray-900 text-sm",children:we(M)})]}),c.jsxs("div",{className:"flex justify-between items-center p-4 border border-gray-100 rounded-lg",children:[c.jsx("span",{className:"font-bold text-gray-600 text-sm",children:"Total Expenses"}),c.jsx("span",{className:"font-black text-gray-900 text-sm",children:we(L+V)})]}),c.jsxs("div",{className:`flex justify-between items-center p-6 rounded-xl shadow-xl text-white
                  ${G>=0?"bg-emerald-600 shadow-emerald-600/20":"bg-red-600 shadow-red-600/20"}
                `,children:[c.jsx("span",{className:"font-black uppercase tracking-widest text-sm",children:"Net Profit"}),c.jsx("span",{className:"font-black text-sm",children:we(G)})]})]})]}),c.jsxs("div",{className:"bg-white p-8 rounded-xl border border-gray-100 shadow-sm",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-8",children:"Expenses by Category"}),c.jsx("div",{className:"h-[300px]",children:c.jsx(yc,{width:"100%",height:"100%",children:c.jsxs(J5,{children:[c.jsx(iS,{data:ie,innerRadius:0,outerRadius:100,dataKey:"value",children:ie.map((I,D)=>c.jsx(ul,{fill:I.color},`cell-${D}`))}),c.jsx(Po,{}),r?c.jsx(Bd,{verticalAlign:"bottom",align:"center",layout:"horizontal",wrapperStyle:{paddingTop:"20px"}}):c.jsx(Bd,{verticalAlign:"middle",align:"right",layout:"vertical"})]})})})]})]})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsx(kd,{filterRange:s,setFilterRange:l,customDates:u,setCustomDates:f}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(ya,{title:"Total Created",value:fe,icon:ne.Sales,bgColor:"bg-blue-600",textColor:"text-white",iconBgColor:"bg-blue-700"}),c.jsx(ya,{title:"Created Today",value:he,icon:ne.Dashboard,bgColor:"bg-teal-500",textColor:"text-white",iconBgColor:"bg-teal-600"}),c.jsx(ya,{title:"Pending (Hold)",value:B,icon:ne.More,bgColor:"bg-orange-500",textColor:"text-white",iconBgColor:"bg-orange-600"})]}),c.jsxs("div",{className:"bg-white p-8 rounded-xl border border-gray-100 shadow-sm",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Team Performance"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Comparing total orders across all employees"})]}),c.jsx("div",{className:"h-[400px]",children:c.jsx(yc,{width:"100%",height:"100%",children:c.jsxs(Y5,{data:ue,children:[c.jsx(bc,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),c.jsx(xc,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:12,fontWeight:700,fill:"#64748b"}}),c.jsx(wc,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fontWeight:700,fill:"#64748b"}}),c.jsx(Po,{cursor:{fill:"#f8fafc"},contentStyle:{borderRadius:"16px",border:"none",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1)"}}),c.jsx(Ni,{dataKey:"orders",fill:"#10B981",radius:[12,12,0,0]})]})})})]})]})},Z5=({anchorEl:e,open:t,onClose:r,children:n,align:a="right"})=>{const[s,l]=j.useState(null);if(j.useEffect(()=>{if(!t||!e){l(null);return}const f=()=>{const h=e.getBoundingClientRect(),g=a==="right"?h.right-200:h.left,y=h.bottom+8;l({top:y,left:g})};return f(),window.addEventListener("resize",f),window.addEventListener("scroll",f,!0),()=>{window.removeEventListener("resize",f),window.removeEventListener("scroll",f,!0)}},[e,t,a]),j.useEffect(()=>{if(!t)return;const f=h=>{const m=h.target;if(!e||e.contains(m))return;const g=document.getElementById("portal-menu-root");g&&g.contains(m)||r()};return document.addEventListener("click",f),()=>document.removeEventListener("click",f)},[t,e,r]),!t||!s)return null;const u=c.jsx("div",{id:"portal-menu-root",className:"fixed left-0 top-0 z-[2000] pointer-events-none",children:c.jsx("div",{style:{position:"fixed",top:s.top,left:s.left},className:"pointer-events-auto w-48 bg-white border border-gray-100 rounded-lg shadow-2xl py-2",children:n})});return Rp.createPortal(u,document.body)},su=({page:e,totalPages:t,onPageChange:r,pageSize:n,disabled:a})=>{const[s,l]=Xe.useState(String(e));Xe.useEffect(()=>l(String(e)),[e]);const u=()=>{let f=parseInt(s||"1",10)||1;f<1&&(f=1),f>t&&(f=t),f!==e&&r(f),l(String(f))};return c.jsxs("div",{className:"flex items-center justify-between mt-4",children:[c.jsx("div",{className:"text-sm text-gray-600",children:`Page ${e} of ${t}`}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{disabled:a||e<=1,onClick:()=>r(1),className:`px-3 py-1 rounded-md font-bold ${e<=1?"bg-gray-100 text-gray-400":"bg-white text-gray-700 border"}`,children:""}),c.jsx("button",{disabled:a||e<=1,onClick:()=>r(Math.max(1,e-1)),className:`px-3 py-1 rounded-md font-bold ${e<=1?"bg-gray-100 text-gray-400":"bg-white text-gray-700 border"}`,children:""}),c.jsx("input",{type:"number",min:1,max:t,value:s,onChange:f=>l(f.target.value),onBlur:u,onKeyDown:f=>{f.key==="Enter"&&u()},className:"w-16 px-2 py-1 border rounded-md text-center text-sm"}),c.jsx("button",{disabled:a||e>=t,onClick:()=>r(Math.min(t,e+1)),className:`px-3 py-1 rounded-md font-bold ${e>=t?"bg-gray-100 text-gray-400":"bg-white text-gray-700 border"}`,children:""}),c.jsx("button",{disabled:a||e>=t,onClick:()=>r(t),className:`px-3 py-1 rounded-md font-bold ${e>=t?"bg-gray-100 text-gray-400":"bg-white text-gray-700 border"}`,children:""})]})]})},Tp=(e,t)=>{t(`/print-order/${e}`)},Woe=()=>{setTimeout(()=>{window.print()},100)},Yoe=()=>{const e=Nt(),t=Le(),r=Vr(),{searchQuery:n}=Ya(),{user:a,isLoading:s}=da(),l=(a==null?void 0:a.role)===ft.ADMIN,u=Bn(a==null?void 0:a.role),{data:f}=Gs(),h=(f==null?void 0:f.recordsPerPage)||Yt,[m,g]=j.useState("All Time"),[y,v]=j.useState({from:"",to:""}),w=j.useMemo(()=>{let Z,qe;const Ke=new Date;switch(m){case"Today":Z=new Date(Ke.getFullYear(),Ke.getMonth(),Ke.getDate()).toISOString(),qe=Ke.toISOString();break;case"This Week":{const ze=new Date(Ke);ze.setDate(Ke.getDate()-Ke.getDay()),ze.setHours(0,0,0,0),Z=ze.toISOString(),qe=Ke.toISOString();break}case"This Month":Z=new Date(Ke.getFullYear(),Ke.getMonth(),1).toISOString(),qe=Ke.toISOString();break;case"This Year":Z=new Date(Ke.getFullYear(),0,1).toISOString(),qe=Ke.toISOString();break;case"Custom":if(y.from&&(Z=new Date(y.from).toISOString()),y.to){const ze=new Date(y.to);ze.setHours(23,59,59,999),qe=ze.toISOString()}break}return{from:Z,to:qe}},[m,y]),[x,_]=j.useState("All"),[N,O]=j.useState("all"),[E,C]=j.useState(null),[T,k]=j.useState(null),[M,R]=j.useState(null),[L,V]=j.useState(null),[G,K]=j.useState(null),[fe,ge]=j.useState(null),[he,B]=j.useState({date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!1}),accountId:"",amount:0}),[Q,ie]=j.useState(1),{data:ue=[]}=zi(),I=j.useMemo(()=>{if(N!=="all")return N==="admins"?ue.filter(Z=>Z.role===ft.ADMIN).map(Z=>Z.id):N==="employees"?ue.filter(Z=>Bn(Z.role)).map(Z=>Z.id):[N]},[N,ue]),{data:D,isFetching:z}=Q9(Q,h,{status:x==="All"?void 0:x,from:w.from,to:w.to,search:n,createdByIds:I}),Y=(D==null?void 0:D.data)??[],q=(D==null?void 0:D.count)??0,pe=Math.max(1,Math.ceil(q/h)),{data:ve=[]}=Hs(),{data:me}=Gp();j.useEffect(()=>{ie(1)},[n,x,m,y.from,y.to,N]);const Ee=Z=>{ie(1),_(Z)},te=Z=>{ie(1),g(Z),Z!=="Custom"&&v({from:"",to:""})},_e=Z=>{ie(1),v(Z)},De=Z=>{ie(1),O(Z)};Xp();const le=aF(),Fe=lf(),Te=uf(),Ze=cf();j.useMemo(()=>new Map(ue.map(Z=>[Z.id,Z])),[ue]);const gt=Z=>Z.creatorName||"",qt=Y,tn=async Z=>{if(confirm("Are you sure you want to delete this order?"))try{await le.mutateAsync(Z),r.success("Order deleted successfully")}catch(qe){console.error("Failed to delete order",qe),r.error("Failed to delete order: "+(qe instanceof Error?qe.message:"Unknown error"))}},rn=Z=>{B({date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!1}),accountId:"",amount:Z.total-Z.paidAmount}),V(Z)},ae=async()=>{if(!L)return;const Z=L;try{let qe=ve.find(wt=>wt.id===he.accountId);if(!qe){if(!he.accountId){r.error("Please select an account");return}qe={id:he.accountId,name:"Selected Account",type:"Bank",openingBalance:0,currentBalance:0}}const Ke=he.amount<Z.total,[ze,be]=he.time.split(":").map(Number),nt=new Date(he.date);nt.setHours(ze,be,0,0);const yt=nt.toISOString(),Ft={date:yt,type:"Income",category:Se.settings.defaults.incomeCategoryId||"income_sales",accountId:he.accountId,amount:Z.total,description:`Payment for Order #${Z.orderNumber}`,referenceId:Z.id,contactId:Z.customerId,paymentMethod:Se.settings.defaults.paymentMethod||"Cash",createdBy:a.id};if(Ke){const wt=Z.total-he.amount,Mt={date:yt,type:"Expense",category:"expense_shipping",accountId:he.accountId,amount:wt,description:`Shipping costs for Order #${Z.orderNumber}`,paymentMethod:Se.settings.defaults.paymentMethod||"Cash",createdBy:a.id};await Promise.all([Te.mutateAsync(Ft),Te.mutateAsync(Mt)])}else await Te.mutateAsync(Ft);const Kt=he.amount,Zt=(Z.paidAmount??0)+he.amount,xe=Re.COMPLETED;await Promise.all([Ze.mutateAsync({id:qe.id,updates:{currentBalance:(qe.currentBalance??0)+Kt}}),Fe.mutateAsync({id:Z.id,updates:{paidAmount:Zt,status:xe}})]),V(null),t.invalidateQueries({queryKey:["orders",Q]})}catch(qe){console.error("Failed to add payment:",qe),r.error("Failed to add payment: "+(qe instanceof Error?qe.message:"Unknown error"))}};return c.jsxs("div",{className:"space-y-6 pb-12",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-black text-gray-900 tracking-tight",children:"Orders"})}),c.jsx(Je,{onClick:()=>e("/orders/new"),variant:"primary",size:"md",icon:ne.Plus,children:"New Order"})]}),c.jsx(kd,{title:"Orders",filterRange:m,setFilterRange:te,customDates:y,setCustomDates:_e,statusTab:x,setStatusTab:Ee,statusOptions:Object.values(Re)}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:c.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[c.jsx("label",{className:"text-sm font-bold text-gray-700",children:"Created By:"}),c.jsxs("select",{value:N,onChange:Z=>De(Z.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"all",children:"All Users"}),ue.some(Z=>Z.role===ft.ADMIN)&&c.jsx("option",{value:"admins",children:"All Admins"}),ue.some(Z=>Bn(Z.role))&&c.jsx("option",{value:"employees",children:"All Employees"}),c.jsx("optgroup",{label:"Specific Users",children:ue.map(Z=>c.jsxs("option",{value:Z.id,children:[Z.name," ",Z.role===ft.ADMIN?"(Admin)":"(Employee)"]},Z.id))})]})]})}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-visible",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Order Details"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Customer"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Created By"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Status"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] text-right",children:"Net Amount"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] sm:hidden",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:z?c.jsx(qp,{columns:5,rows:8}):qt.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:6,className:"px-6 py-20 text-center text-gray-400 italic font-medium",children:"No sales orders found for this period."})}):qt.map(Z=>{var Ft;const qe=l||Z.status===Re.ON_HOLD;Z.createdBy,a==null||a.id;const Ke=Z.customerName??"Unknown",ze=String(((Ft=Z.history)==null?void 0:Ft.courier)||"").toLowerCase(),be=ze.includes("steadfast"),nt=ze.includes("carrybee")||!!Z.carrybeeConsignmentId,yt=be||nt;return c.jsxs("tr",{onMouseEnter:()=>C(Z.id),onMouseLeave:()=>C(null),onClick:()=>e(`/orders/${Z.id}`),className:"group relative hover:bg-[#ebf4ff]/20 cursor-pointer transition-all",children:[c.jsxs("td",{className:"px-6 py-5",children:[c.jsxs("span",{className:"font-black text-gray-900",children:["#",Z.orderNumber]}),c.jsx("p",{className:"text-[10px] text-gray-400 font-bold mt-1 tracking-tight",children:new Date(Z.orderDate).toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})})]}),c.jsxs("td",{className:"px-6 py-5",children:[c.jsx("span",{className:"text-sm font-bold text-gray-700",children:Ke}),c.jsx("p",{className:"text-[10px] text-gray-400 font-medium mt-0.5",children:Z.customerPhone||""})]}),c.jsx("td",{className:"px-6 py-5 text-xs font-bold text-gray-500",children:gt(Z)||""}),c.jsxs("td",{className:"px-6 py-5",children:[c.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest ${zp(Z.status)}`,children:Z.status}),be&&c.jsx("img",{src:"/uploads/steadfast.png",alt:"Steadfast",className:"inline-block w-5 h-5 rounded-full ml-2"}),nt&&c.jsx("img",{src:"/uploads/carrybee.png",alt:"CarryBee",className:"inline-block w-5 h-5 rounded-full ml-2"})]}),c.jsxs("td",{className:"px-6 py-5 text-right",children:[c.jsx("span",{className:"font-black text-gray-900 text-base",children:we(Z.total)}),Z.paidAmount>0&&c.jsx("p",{className:"text-[10px] font-black uppercase tracking-tighter mt-1 text-green-500",children:`Paid: ${we(Z.paidAmount)}`})]}),c.jsx("td",{className:"px-6 py-5 sm:hidden relative z-[999]",onClick:Kt=>Kt.stopPropagation(),children:c.jsxs("div",{className:"relative z-[999]",children:[c.jsx("button",{onClick:Kt=>{const Zt=Kt.currentTarget;T===Z.id?(k(null),R(null)):(k(Z.id),R(Zt))},className:"p-2 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-lg transition-all",children:ne.More}),c.jsx(Z5,{anchorEl:M,open:T===Z.id,onClose:()=>{k(null),R(null)},children:u?Z.status===Re.ON_HOLD?c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>{e(`/orders/edit/${Z.id}`),k(null),R(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[ne.Edit," Edit"]}),c.jsxs("button",{onClick:()=>{tn(Z.id),k(null),R(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-red-50 flex items-center gap-2 font-bold text-red-600",children:[ne.Delete," Delete"]})]}):null:c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>{e(`/orders/edit/${Z.id}`),k(null),R(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[ne.Edit," Edit"]}),Z.status!==Re.COMPLETED&&c.jsxs("button",{onClick:()=>{rn(Z),k(null),R(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[ne.Banking," Payment"]}),c.jsx("div",{className:"border-t my-1"}),c.jsxs("button",{onClick:()=>{Tp(Z.id,e),k(null),R(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[ne.Print," Print"]}),c.jsxs("button",{className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[ne.Download," Download"]}),Z.status!==Re.PICKED&&Z.status!==Re.COMPLETED&&Z.status!==Re.CANCELLED&&Z.status!==Re.ON_HOLD&&!yt&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"border-t my-1"}),c.jsxs("button",{onClick:()=>{K(Z.id),k(null),R(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-[#0f2f57]",children:[c.jsx("img",{src:"../uploads/steadfast.png",alt:"Steadfast",className:"w-5 h-5 rounded-full"})," ",c.jsx("span",{children:"Add to Steadfast"})]}),c.jsxs("button",{onClick:()=>{ge(Z.id),k(null),R(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-[#0f2f57]",children:[c.jsx("img",{src:"../uploads/carrybee.png",alt:"CarryBee",className:"w-5 h-5 rounded-full"})," ",c.jsx("span",{children:"Add to CarryBee"})]})]}),c.jsx("div",{className:"border-t my-1"}),c.jsxs("button",{onClick:()=>{tn(Z.id),k(null),R(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-red-50 flex items-center gap-2 font-bold text-red-600",children:[ne.Delete," Delete"]})]})})]})}),E===Z.id&&(l||u&&Z.status===Re.ON_HOLD)&&c.jsx("td",{className:"absolute right-6 top-1/2 -translate-y-1/2 z-10 animate-in fade-in slide-in-from-right-2 duration-200 hidden sm:table-cell",onClick:Kt=>Kt.stopPropagation(),children:c.jsx("div",{className:"flex items-center gap-1.5 bg-white p-1.5 rounded-2xl shadow-[0_20px_50px_rgba(0,0,0,0.15)] border border-[#ebf4ff]",children:u?Z.status===Re.ON_HOLD?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>e(`/orders/edit/${Z.id}`),className:"p-2.5 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-xl transition-all",title:"Edit",children:ne.Edit}),c.jsx("button",{onClick:()=>tn(Z.id),className:"p-2.5 text-red-600 hover:bg-red-50 rounded-xl transition-all",title:"Delete",children:ne.Delete})]}):null:c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>e(`/orders/edit/${Z.id}`),className:"p-2.5 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-xl transition-all",title:"Edit",children:ne.Edit}),Z.status!==Re.COMPLETED&&c.jsx("button",{onClick:()=>rn(Z),className:"p-2.5 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-xl transition-all",title:"Add Payment",children:ne.Banking}),c.jsx("button",{onClick:()=>Tp(Z.id,e),className:"p-2.5 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-xl transition-all",title:"Print",children:ne.Print}),c.jsx("button",{className:"p-2.5 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-xl transition-all",title:"Download PDF",children:ne.Download}),Z.status!==Re.PICKED&&Z.status!==Re.COMPLETED&&Z.status!==Re.CANCELLED&&Z.status!==Re.ON_HOLD&&!yt&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"h-5 w-px bg-gray-100 mx-1"}),c.jsx("button",{onClick:()=>K(Z.id),className:"px-1 py-1 text-[9px] font-black hover:bg-[#ebf4ff] rounded-lg",title:"Send to Steadfast",children:c.jsx("img",{src:"/uploads/steadfast.png",alt:"Steadfast",className:"w-6 h-6 rounded-full"})}),c.jsx("button",{onClick:()=>ge(Z.id),className:"px-1 py-1 text-[9px] font-black hover:bg-orange-50 rounded-lg",title:"Send to CarryBee",children:c.jsx("img",{src:"/uploads/carrybee.png",alt:"CarryBee",className:"w-6 h-6 rounded-full"})}),c.jsx("div",{className:"h-5 w-px bg-gray-100 mx-1"})]}),qe&&c.jsx("button",{onClick:()=>tn(Z.id),className:"p-2.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all",title:"Delete",children:ne.Delete})]})})})]},Z.id)})})]})})}),c.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[c.jsx("div",{className:"text-sm text-gray-600",children:`Showing ${Math.min((Q-1)*h+1,q||0)} - ${Math.min(Q*h,q||0)} of ${q} orders`}),c.jsx(su,{page:Q,totalPages:pe,pageSize:h,onPageChange:Z=>ie(Z),disabled:z})]}),c.jsx(a1,{isOpen:!!L,onClose:()=>V(null),onSubmit:ae,accounts:ve,paymentForm:he,setPaymentForm:B,isLoading:Te.isPending||Ze.isPending||Fe.isPending,title:"Receive Payment",buttonText:"Add Payment"}),c.jsx(WD,{isOpen:!!G,onClose:()=>K(null),order:G?Y.find(Z=>Z.id===G):null,customer:G?(()=>{const Z=Y.find(qe=>qe.id===G);return Z?{id:Z.customerId,name:Z.customerName||"",phone:Z.customerPhone||"",address:Z.customerAddress||""}:null})():null}),c.jsx(YD,{isOpen:!!fe,onClose:()=>ge(null),order:fe?Y.find(Z=>Z.id===fe):null,customer:fe?(()=>{const Z=Y.find(qe=>qe.id===fe);return Z?{id:Z.customerId,name:Z.customerName||"",phone:Z.customerPhone||"",address:Z.customerAddress||""}:null})():null})]})},hT=()=>{const{id:e}=Kn(),t=Nt(),{user:r,isLoading:n}=da();r==null||r.role,ft.ADMIN;const a=Bn(r==null?void 0:r.role),s=!!e;if(n)return c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Loading..."}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Authenticating session..."})]});if(!r)return c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Not Authenticated"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Please log in first."}),c.jsx(Je,{onClick:()=>t("/login"),variant:"primary",children:"Back to Login"})]});const l=Le(),[u,f]=j.useState(!1),[h,m]=j.useState(""),{data:g=[],isFetching:y}=rt({queryKey:["productsMini"],queryFn:()=>Rm(),staleTime:300*1e3,enabled:!1,refetchOnWindowFocus:!1});Xe.useEffect(()=>{if(!u)return;const xe=l.getQueryData(["products"]);(!xe||xe.length===0)&&l.fetchQuery({queryKey:["productsMini"],queryFn:()=>Rm()}).catch(()=>{})},[u,l]);const[v,w]=Xe.useState("");Xe.useEffect(()=>{const xe=setTimeout(()=>w(h.trim()),300);return()=>clearTimeout(xe)},[h]);const{data:x=[],isFetching:_}=rt({queryKey:["productsSearch",v],queryFn:()=>ED(v,100),enabled:u&&!!v,staleTime:60*1e3,refetchOnWindowFocus:!1}),N=l.getQueryData(["products"]),O=N&&N.length>0?N:v?x:g||[],{data:E}=i1(s?e:void 0),{data:C}=Gp(),T=Xp(),k=lf(),M=Vr(),[R,L]=j.useState(""),[V,G]=j.useState(new Date().toISOString().split("T")[0]),[K,fe]=j.useState("Generating..."),[ge,he]=j.useState(!1),[B,Q]=j.useState([]),[ie,ue]=j.useState("0"),[I,D]=j.useState("0"),[z,Y]=j.useState(""),[q,pe]=j.useState(!1),[ve,me]=j.useState(""),[Ee,te]=Xe.useState("");Xe.useEffect(()=>{const xe=setTimeout(()=>te(ve.trim()),300);return()=>clearTimeout(xe)},[ve]);const[_e,De]=j.useState(!1),[le,Fe]=j.useState(null),Te=20,{data:Ze,isFetching:gt}=rt({queryKey:["customers",1,Te,""],queryFn:()=>Px(1,Te,""),enabled:q&&!Ee,staleTime:300*1e3,refetchOnWindowFocus:!1}),{data:qt,isFetching:tn}=rt({queryKey:["customers","search",Ee],queryFn:()=>Px(1,Te,Ee),enabled:q&&!!Ee,staleTime:300*1e3,refetchOnWindowFocus:!1}),rn=Xe.useRef(!1);Xe.useEffect(()=>{if(E&&!rn.current){if(s&&a&&E.status!==Re.ON_HOLD){M.warning('Employees can only edit orders that are currently "On Hold".'),t("/orders");return}L(E.customerId),G(E.orderDate),fe(E.orderNumber),Q(E.items),ue(String(E.discount??0)),D(String(E.shipping??0)),Y(E.notes||""),rn.current=!0}else s||(he(!0),kq().then(xe=>{fe(xe),rn.current=!0}).catch(xe=>{console.error("Failed to fetch next order number:",xe),fe("ERROR"),M.error("Failed to generate order number. Please refresh the page.")}).finally(()=>he(!1)))},[E,s,a,t,M,r==null?void 0:r.id]),Xe.useEffect(()=>{rn.current=!1},[e]);const ae=Fn();Xe.useEffect(()=>{try{const Mt=new URLSearchParams(ae.search).get("selectedCustomerId");if(Mt){L(Mt);const er=window.location.pathname+window.location.hash;window.history.replaceState({},document.title,er);return}}catch{}const xe=ae&&ae.state||{};if(xe.selectedCustomerId){L(xe.selectedCustomerId);try{window.history.replaceState({},document.title)}catch{}}},[ae]);const Z=B.reduce((xe,wt)=>xe+wt.amount,0),qe=parseFloat(ie)||0,Ke=parseFloat(I)||0,ze=Z-qe+Ke,be=xe=>{const wt=O.find(er=>er.id===xe);if(!wt)return;const Mt={productId:wt.id,productName:wt.name,rate:wt.salePrice,quantity:1,amount:wt.salePrice};Q([...B,Mt]),f(!1),m("")},nt=(xe,wt)=>{const Mt=[...B];Mt[xe].quantity=Math.max(1,wt),Mt[xe].amount=Mt[xe].rate*Mt[xe].quantity,Q(Mt)},yt=xe=>{Q(B.filter((wt,Mt)=>Mt!==xe))},Ft=async()=>{if(!R||B.length===0||!K||K==="Generating..."||K==="ERROR"){const xe=R?B.length?"Order number is still being generated. Please wait a moment.":"Please add at least one product.":"Please select a customer.";Fe(xe),M.error(xe);return}if(!(r!=null&&r.id)){M.error("User session expired. Please log in again."),Fe("User session expired. Please log in again.");return}De(!0),Fe(null);try{const xe=B.reduce((ha,Xa)=>ha+Xa.amount,0),wt=parseFloat(ie)||0,Mt=parseFloat(I)||0,er=xe-wt+Mt,Lr=new Date,nn=Lr.toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"}),Kg=Lr.toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"});let hl=R;if(Yp(hl)){const ha=await eF(hl,7e3);if(!ha){const Xa="Customer is still being saved. Please wait a moment and try again.";Fe(Xa),M.error(Xa);return}hl=ha}const Tf={orderNumber:K,orderDate:V,customerId:hl,createdBy:"",status:s&&E?E.status:Re.ON_HOLD,items:B,subtotal:xe,discount:wt,shipping:Mt,total:er,notes:z,paidAmount:s&&E?E.paidAmount:0,history:s&&E?E.history:{created:`${r.name} created this order on ${nn}, at ${Kg}`}};if(s)await k.mutateAsync({id:e,updates:Tf}),M.success("Order updated successfully"),t("/orders");else{const ha=await T.mutateAsync(Tf);M.success("Order created successfully"),t(`/orders/${ha.id}`)}}catch(xe){console.error("Failed to save order:",xe);const wt=Cd(xe);Fe(wt),M.error(wt)}finally{De(!1)}},Kt=Ee?(qt==null?void 0:qt.data)||[]:(Ze==null?void 0:Ze.data)||[],Zt=Kt.find(xe=>xe.id===R)||void 0;return c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 pb-20",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s?"Edit Order":"New Order"}),c.jsx("button",{onClick:()=>t("/orders"),className:"text-gray-500 hover:text-gray-700 font-medium text-sm px-4 py-2 border border-gray-200 rounded-lg bg-white transition-all",children:"Cancel"})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-100 shadow-sm space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"space-y-1 relative md:col-span-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Select Customer"}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>pe(!q),className:"w-full text-left px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl hover:bg-white focus:ring-2 focus:ring-[#3c5a82] transition-all flex justify-between items-center group",children:[Zt?c.jsxs("div",{className:"flex-1 overflow-hidden",children:[c.jsx("span",{className:"font-bold block text-sm text-gray-900",children:Zt.name}),c.jsx("p",{className:"text-[10px] text-gray-500 leading-none mt-0.5",children:Zt.phone}),c.jsx("p",{className:"text-[10px] ${theme.colors.primary[600]} italic truncate mt-1",children:Zt.address})]}):c.jsx("span",{className:"text-gray-400 text-sm",children:"Select Customer..."}),c.jsx("div",{className:`transition-transform duration-200 ${q?"rotate-90":""}`,children:ne.ChevronRight})]}),q&&c.jsxs("div",{className:"absolute top-full left-0 mt-2 w-full max-w-xs bg-white border border-gray-200 shadow-2xl rounded-lg z-[110] p-2 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"relative mb-2",children:[c.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none text-gray-300",children:ne.Search}),c.jsx("input",{autoFocus:!0,type:"text",placeholder:"Search name or phone...",className:"w-full pl-9 pr-4 py-2.5 bg-gray-50 border border-gray-100 rounded-xl outline-none focus:ring-2 focus:ring-[#3c5a82] text-sm font-medium",value:ve,onChange:xe=>me(xe.target.value)})]}),c.jsx("div",{className:"max-h-[220px] overflow-y-auto space-y-0.5 custom-scrollbar",children:(Kt||[]).map(xe=>c.jsxs("button",{onClick:()=>{L(xe.id),pe(!1),me("")},className:"w-full px-4 py-2.5 text-left hover:bg-[#ebf4ff] rounded-lg group transition-colors",children:[c.jsx("p",{className:"text-sm font-bold text-gray-800 group-hover:${theme.colors.primary[700]}",children:xe.name}),c.jsx("p",{className:"text-[10px] text-gray-400 group-hover:${theme.colors.primary[600]}/60",children:xe.phone})]},xe.id))}),c.jsx("button",{onClick:()=>{pe(!1),t("/customers/new",{state:{fromOrderForm:!0,redirectPath:s?`/orders/edit/${e}`:"/orders/new"}})},className:"w-full mt-2 py-3 ${theme.colors.primary[600]} text-[10px] font-black uppercase tracking-widest border-t border-gray-50 hover:bg-[#ebf4ff] transition-colors",children:"+ Add New Customer"})]})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Order Date"}),c.jsx("input",{type:"date",value:V,onChange:xe=>G(xe.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-[#3c5a82] focus:bg-white transition-all cursor-pointer font-bold text-sm"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Order Number"}),c.jsx("input",{type:"text",readOnly:!0,value:K,placeholder:"Generating...",className:`w-full px-4 py-3 bg-gray-100 border border-gray-100 rounded-xl font-mono text-sm font-bold ${K==="ERROR"?"text-red-600":`${se.colors.primary[700]}`}`})]})]}),c.jsx("div",{className:"border border-gray-100 rounded-lg overflow-visible bg-white",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Product Item"}),c.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-center",children:"Rate"}),c.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-center",children:"Qty"}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-right",children:"Amount"}),c.jsx("th",{className:"px-4 py-4"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-50",children:[B.map((xe,wt)=>{var Mt,er;return c.jsxs("tr",{className:"group hover:bg-gray-50/50",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex items-center gap-4",children:[((Mt=O.find(Lr=>Lr.id===xe.productId))==null?void 0:Mt.image)&&c.jsx("img",{src:(er=O.find(Lr=>Lr.id===xe.productId))==null?void 0:er.image,className:"w-12 h-12 rounded-full object-cover border border-gray-100 shadow-sm"}),c.jsx("span",{className:"font-bold text-gray-800 text-sm",children:xe.productName})]})}),c.jsx("td",{className:"px-4 py-4 text-center text-sm font-bold text-gray-600",children:we(xe.rate)}),c.jsx("td",{className:"px-4 py-4 text-center",children:c.jsx("input",{type:"number",value:xe.quantity,onChange:Lr=>nt(wt,parseInt(Lr.target.value)),className:"w-16 text-center py-2 border border-gray-100 rounded-xl focus:ring-2 focus:ring-[#3c5a82] font-bold outline-none"})}),c.jsx("td",{className:"px-6 py-4 text-right font-black text-gray-900 text-sm",children:we(xe.amount)}),c.jsx("td",{className:"px-4 py-4 text-right",children:c.jsx("button",{onClick:()=>yt(wt),className:"p-2 text-red-200 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",children:ne.Delete})})]},wt)}),c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"px-6 py-5 relative",children:c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>f(!u),className:"flex items-center gap-2 ${theme.colors.primary[600]} font-black text-[10px] uppercase tracking-widest hover:bg-[#ebf4ff] px-4 py-2.5 rounded-xl border-2 border-dashed border-[#c7dff5] transition-all",children:[ne.Plus," Add an item"]}),u&&c.jsxs("div",{className:"absolute top-full left-0 mt-3 w-full max-w-md bg-white border border-gray-200 shadow-2xl rounded-lg z-[100] p-2 overflow-hidden animate-in slide-in-from-top-2 duration-200",children:[c.jsxs("div",{className:"relative mb-2",children:[c.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none text-gray-300",children:ne.Search}),c.jsx("input",{autoFocus:!0,type:"text",placeholder:"Search catalog...",className:"w-full pl-9 pr-4 py-2.5 bg-gray-50 border border-gray-100 rounded-xl outline-none focus:ring-2 focus:ring-[#3c5a82] text-sm font-medium",value:h,onChange:xe=>m(xe.target.value)})]}),c.jsx("div",{className:"max-h-[260px] overflow-y-auto space-y-0.5 custom-scrollbar",children:O.filter(xe=>xe.name.toLowerCase().includes(h.toLowerCase())).map(xe=>c.jsxs("button",{onClick:()=>be(xe.id),className:"flex items-center gap-4 w-full px-4 py-3 text-left hover:bg-[#ebf4ff] rounded-xl group transition-all",children:[xe.image&&c.jsx("img",{src:xe.image,className:"w-10 h-10 rounded-full object-cover border border-gray-100 shadow-sm"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-bold text-gray-800 group-hover:${theme.colors.primary[700]} truncate",children:xe.name}),c.jsx("p",{className:"text-[10px] font-bold ${theme.colors.primary[600]}/60 uppercase tracking-widest",children:we(xe.salePrice)})]})]},xe.id))})]})]})})})]})]})}),c.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-12 pt-6",children:[c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Order Notes / Terms"}),c.jsx("textarea",{placeholder:"Internal notes or special instructions for this order...",value:z,onChange:xe=>Y(xe.target.value),className:"w-full px-5 py-4 bg-gray-50 border border-gray-100 rounded-lg h-32 focus:ring-2 focus:ring-[#3c5a82] focus:bg-white outline-none font-medium text-sm transition-all"})]}),c.jsxs("div",{className:"w-full md:w-96 space-y-4 bg-gray-50/50 p-8 rounded-lg border border-gray-100",children:[c.jsxs("div",{className:"flex justify-between items-center text-gray-500 text-[12px] font-bold uppercase tracking-widest",children:[c.jsx("span",{children:"Subtotal"}),c.jsx("span",{className:"text-gray-900 font-black",children:we(Z)})]}),c.jsxs("div",{className:"flex justify-between items-center text-gray-500 text-[12px] font-bold uppercase tracking-widest",children:[c.jsx("span",{children:"Discount"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs text-gray-500 font-black",children:""}),c.jsx("input",{type:"number",value:ie,onChange:xe=>ue(xe.target.value),className:"w-20 text-right py-1.5 border border-gray-100 rounded-lg focus:ring-2 focus:ring-[#3c5a82] font-black text-gray-900 bg-white"})]})]}),c.jsxs("div",{className:"flex justify-between items-center text-gray-500 text-[12px] font-bold uppercase tracking-widest",children:[c.jsx("span",{children:"Shipping"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs text-gray-500 font-black",children:""}),c.jsx("input",{type:"number",value:I,onChange:xe=>D(xe.target.value),className:"w-20 text-right py-1.5 border border-gray-100 rounded-lg focus:ring-2 focus:ring-[#3c5a82] font-black text-gray-900 bg-white"})]})]}),c.jsxs("div",{className:"pt-6 border-t-4 border-[#c7dff5] flex justify-between items-center",children:[c.jsx("span",{className:"text-sm font-black text-gray-900 uppercase tracking-tighter",children:"Total"}),c.jsx("span",{className:"text-sm font-black text-[#3c5a82]",children:we(ze)})]}),le&&c.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm font-bold text-red-600",children:le instanceof Error?le.message:String(le)})}),c.jsx(Je,{onClick:Ft,variant:"primary",size:"lg",className:"w-full mt-4",disabled:_e,loading:_e,children:s?"Update Order":"Create Order"})]})]})]})]})},Xoe=()=>{var D,z,Y,q,pe,ve;const{id:e}=Kn(),t=Nt(),r=Le(),n=Vr(),a=Se.currentUser,s=a.role===ft.ADMIN,{data:l,isPending:u,error:f}=i1(e||""),{data:h}=Kp(l?l.customerId:void 0),{data:m=[]}=zi(),{data:g=[]}=o1(),{data:y=[]}=Hs(),{data:v}=Vp(),{data:w}=Wp(),x=lf();Xp();const _=uf(),N=cf(),[O,E]=j.useState(!1),[C,T]=j.useState(!1),[k,M]=j.useState(!1),[R,L]=j.useState({date:new Date().toISOString().split("T")[0],accountId:Se.settings.defaults.accountId||"",amount:0}),[V,G]=j.useState(!1),K=l?m.find(me=>me.id===l.createdBy):void 0,fe=Bn(a.role),ge=l?l.createdBy===a.id:!1,he=u;if(he)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading order..."});if(f||!l)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:(f==null?void 0:f.message)||"Order not found."});const B=async(me,Ee,te)=>{if(l)try{const _e={...l,status:me,history:Ee?{...l.history,[Ee]:te}:l.history};await x.mutateAsync({id:e,updates:_e}),r.invalidateQueries({queryKey:["order",e]}),G(!1)}catch(_e){console.error("Failed to update order status:",_e),n.error("Failed to update order status")}},Q=async()=>{const me=`Marked as processing by ${a.name}, on ${new Date().toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"})}`;await B(Re.PROCESSING,"processing",me)},ie=async()=>{const me=`Marked as picked by courier, on ${new Date().toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"})}`;await B(Re.PICKED,"picked",me)},ue=async()=>{let me=y.find(Fe=>Fe.id===R.accountId);if(!me){if(!R.accountId){n.error("Please select an account");return}me={id:R.accountId,name:"Selected Account",type:"Bank",openingBalance:0,currentBalance:0}}const Ee=l.paidAmount+R.amount;new Date(R.date);const te=`Payment of ${we(R.amount)} received by ${a.name} on ${new Date().toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"})}`,_e=R.amount<l.total,De=Re.COMPLETED,le={...l,paidAmount:Ee,status:De,history:{...l.history,payment:te}};try{const Fe={id:Math.random().toString(36).substr(2,9),date:R.date,type:"Income",category:Se.settings.defaults.incomeCategoryId||"income_sales",accountId:R.accountId,amount:l.total,description:`Payment for Order #${l.orderNumber}`,referenceId:l.id,contactId:l.customerId,paymentMethod:Se.settings.defaults.paymentMethod||"Cash",createdBy:a.id};if(await _.mutateAsync(Fe),_e){const gt=l.total-R.amount,qt={id:Math.random().toString(36).substr(2,9),date:R.date,type:"Expense",category:"expense_shipping",accountId:R.accountId,amount:gt,description:`Shipping costs for Order #${l.orderNumber}`,paymentMethod:Se.settings.defaults.paymentMethod||"Cash",createdBy:a.id};await _.mutateAsync(qt)}const Te=R.amount,Ze=await Promise.allSettled([x.mutateAsync({id:e,updates:le}),N.mutateAsync({id:R.accountId,updates:{currentBalance:me.currentBalance+Te}})]);if(Ze[0].status==="rejected"||Ze[1].status==="rejected"){const gt=Ze[0].status==="rejected"?"failed":"succeeded",qt=Ze[1].status==="rejected"?"failed":"succeeded";throw new Error(`Payment update failed: Order update ${gt}, Account update ${qt}`)}r.invalidateQueries({queryKey:["order",e]}),r.invalidateQueries({queryKey:["orders"]}),E(!1),n.success("Payment recorded successfully")}catch(Fe){console.error("Failed to record payment:",Fe),n.error("Failed to record payment")}},I=()=>{L({date:new Date().toISOString().split("T")[0],accountId:"",amount:l.total-l.paidAmount}),E(!0)};return c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsx(sf,{isLoading:he&&!l,message:"Loading order details..."}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>t("/orders"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500 transition-all",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-md md:text-2xl font-bold text-gray-900",children:l.orderNumber}),c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide ${zp(l.status)}`,children:l.status}),l.status!==Re.COMPLETED&&l.status!==Re.CANCELLED&&((z=(D=l.history)==null?void 0:D.courier)==null?void 0:z.includes("Steadfast"))&&c.jsx("img",{src:"/uploads/steadfast.png",alt:"Steadfast",className:"w-6 h-6 rounded-full"}),l.status!==Re.COMPLETED&&l.status!==Re.CANCELLED&&((q=(Y=l.history)==null?void 0:Y.courier)==null?void 0:q.includes("CarryBee"))&&c.jsx("img",{src:"/uploads/carrybee.png",alt:"CarryBee",className:"w-6 h-6 rounded-full"})]}),c.jsxs("div",{className:"flex items-center gap-2 relative",children:[c.jsxs("button",{onClick:()=>Tp(e,t),className:"hidden md:flex items-center gap-2 px-4 py-2 text-sm font-semibold border rounded-lg bg-white hover:bg-gray-50 transition-all shadow-sm",children:[ne.Print," Print"]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>G(!V),className:`flex items-center gap-2 px-4 py-2 text-sm font-semibold border rounded-lg ${se.colors.primary[600]} text-white hover:${se.colors.primary[700]} transition-all shadow-md`,children:[ne.More," ",c.jsx("span",{className:"hidden md:inline",children:"Actions"})]}),V&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>G(!1)}),c.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-100 rounded-xl shadow-2xl z-50 py-2 animate-in fade-in zoom-in duration-150 origin-top-right",children:[c.jsxs("button",{onClick:()=>{Tp(e,t),G(!1)},className:"md:hidden w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[ne.Print," Print"]}),c.jsx("div",{className:"md:hidden border-t my-1"}),(s||ge||fe&&l.status===Re.ON_HOLD)&&c.jsxs("button",{onClick:()=>t(`/orders/edit/${l.id}`),className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[ne.Edit," Edit Order"]}),s&&l.status!==Re.COMPLETED&&c.jsxs("button",{className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",onClick:I,children:[ne.Banking," Add Payment"]}),c.jsx("div",{className:"border-t my-1"}),s&&c.jsxs("button",{onClick:()=>B(Re.CANCELLED),disabled:l.status===Re.COMPLETED,className:"w-full text-left px-4 py-2.5 text-sm hover:bg-red-50 disabled:hover:bg-gray-50 flex items-center gap-2 text-red-500 font-bold disabled:text-gray-300 disabled:cursor-not-allowed",children:[ne.Delete," Cancel Order"]})]})]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8",children:[c.jsx("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-xl border border-gray-100 overflow-hidden",children:c.jsxs("div",{className:"p-3 sm:p-4 md:p-6 lg:p-10 space-y-3 sm:space-y-4 lg:space-y-5",children:[c.jsxs("div",{className:"flex flex-row justify-between items-start gap-3 sm:gap-4 lg:gap-6",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[((v==null?void 0:v.logo)||Se.settings.company.logo)&&c.jsx("img",{src:(v==null?void 0:v.logo)||Se.settings.company.logo,className:"rounded-lg object-cover mb-2 sm:mb-3 lg:mb-4 w-auto h-auto",style:{maxWidth:"min(100px, 20%)",maxHeight:"auto"}}),c.jsx("h1",{className:"text-sm sm:text-base lg:text-xl font-black text-blue-600 uppercase tracking-tighter break-words",children:(v==null?void 0:v.name)||Se.settings.company.name}),c.jsxs("div",{className:"mt-1 sm:mt-2 text-[9px] sm:text-[10px] lg:text-xs text-gray-400 font-medium space-y-0.5 sm:space-y-1",children:[c.jsx("p",{className:"break-words",children:(v==null?void 0:v.address)||Se.settings.company.address}),c.jsxs("p",{className:"text-[8px] sm:text-[9px] break-words",children:[(v==null?void 0:v.phone)||Se.settings.company.phone,"  ",(v==null?void 0:v.email)||Se.settings.company.email]})]})]}),c.jsxs("div",{className:"text-right flex-shrink-0",children:[c.jsx("h2",{className:"text-sm sm:text-2xl lg:text-3xl font-black text-gray-300 uppercase leading-none mb-1 sm:mb-2 break-words",children:(w==null?void 0:w.title)||Se.settings.invoice.title}),c.jsxs("div",{className:"space-y-0.5 sm:space-y-1 lg:space-y-1.5 text-[9px] sm:text-sm",children:[c.jsxs("p",{className:"text-[9px] sm:text-xs lg:text-sm font-bold text-gray-900",children:[c.jsx("span",{className:"text-gray-400 font-medium",children:"Order No:"})," ",c.jsx("span",{className:"break-all",children:l.orderNumber})]}),c.jsxs("p",{className:"text-[9px] sm:text-xs lg:text-sm font-bold text-gray-900",children:[c.jsx("span",{className:"text-gray-400 font-medium",children:"Date:"})," ",l.orderDate]})]})]})]}),c.jsxs("div",{className:"border-t border-gray-100 py-2 sm:py-3 lg:py-4",children:[c.jsx("p",{className:"text-[8px] sm:text-[9px] lg:text-[10px] font-black text-gray-400 uppercase tracking-[0.15em] sm:tracking-[0.2em] mb-2 sm:mb-3 lg:mb-4",children:"Billed To"}),c.jsx("h3",{className:"text-sm sm:text-base lg:text-lg font-black text-gray-900 break-words",children:h==null?void 0:h.name}),c.jsx("p",{className:"text-[10px] sm:text-xs lg:text-sm text-gray-500 leading-relaxed break-words",children:h==null?void 0:h.address}),c.jsx("p",{className:"text-[10px] sm:text-xs lg:text-sm font-bold text-cyan-600 mt-1 sm:mt-1.5 lg:mt-2 break-words",children:h==null?void 0:h.phone})]}),c.jsx("div",{className:"overflow-x-auto -mx-3 sm:-mx-4 md:-mx-6 lg:-mx-10",children:c.jsx("div",{className:"px-3 sm:px-4 md:px-6 lg:px-10",children:c.jsxs("table",{className:"w-full text-left text-[10px] sm:text-xs lg:text-sm",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b-2 border-gray-100",children:[c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 font-black text-gray-400 uppercase",children:"Item Description"}),c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 text-center font-black text-gray-400 uppercase whitespace-nowrap px-1",children:"Rate"}),c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 text-center font-black text-gray-400 uppercase whitespace-nowrap px-1",children:"Qty"}),c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 text-right font-black text-gray-400 uppercase whitespace-nowrap px-1",children:"Total"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:l.items.map((me,Ee)=>{const te=g.find(_e=>_e.id===me.productId);return c.jsxs("tr",{className:"group",children:[c.jsx("td",{className:"py-3 sm:py-4 lg:py-6",children:c.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 lg:gap-4 min-w-0",children:[c.jsx("img",{src:te==null?void 0:te.image,className:"w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 rounded-full object-cover border border-gray-100 shadow-sm flex-shrink-0"}),c.jsx("span",{className:"font-bold text-gray-900 text-[10px] sm:text-xs lg:text-base break-words",children:me.productName})]})}),c.jsx("td",{className:"py-3 sm:py-4 lg:py-6 text-center text-gray-500 font-bold px-1 whitespace-nowrap",children:we(me.rate)}),c.jsx("td",{className:"py-3 sm:py-4 lg:py-6 text-center text-gray-500 font-bold px-1 whitespace-nowrap",children:me.quantity}),c.jsx("td",{className:"py-3 sm:py-4 lg:py-6 text-right font-black text-gray-900 px-1 whitespace-nowrap",children:we(me.amount)})]},Ee)})})]})})}),c.jsx("div",{className:"flex flex-col items-end pt-2 sm:pt-3 lg:pt-6 px-0",children:c.jsxs("div",{className:"w-full sm:w-full md:w-98 lg:max-w-xs space-y-2 sm:space-y-3 lg:space-y-4",children:[c.jsxs("div",{className:"flex justify-between text-[10px] sm:text-xs lg:text-sm gap-2",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase flex-shrink-0",children:"Subtotal"}),c.jsx("span",{className:"font-bold text-gray-900 flex-shrink-0",children:we(l.subtotal)})]}),l.discount>0&&c.jsxs("div",{className:"flex justify-between text-[10px] sm:text-xs lg:text-sm gap-2",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase flex-shrink-0",children:"Discount"}),c.jsxs("span",{className:"font-bold text-red-500 flex-shrink-0",children:["-",we(l.discount)]})]}),l.shipping>0&&c.jsxs("div",{className:"flex justify-between text-[10px] sm:text-xs lg:text-sm gap-2",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase flex-shrink-0",children:"Shipping"}),c.jsx("span",{className:"font-bold text-gray-900 flex-shrink-0",children:we(l.shipping)})]}),c.jsxs("div",{className:"flex justify-between items-center py-2 sm:py-3 lg:py-4 border-t-2 border-[#0f2f57] gap-2",children:[c.jsx("span",{className:"font-black text-gray-900 uppercase tracking-tighter text-[11px] sm:text-xs lg:text-sm flex-shrink-0",children:"Net Total"}),c.jsx("span",{className:"font-black text-sm sm:text-base lg:text-lg flex-shrink-0",children:we(l.total)})]})]})}),l.notes&&c.jsxs("div",{className:"bg-gray-50 p-3 sm:p-4 rounded-[10px] border border-gray-100",children:[c.jsx("p",{className:"text-[8px] sm:text-[9px] lg:text-[10px] font-black text-gray-300 uppercase tracking-widest mb-1 sm:mb-2",children:"Terms & Notes"}),c.jsx("p",{className:"text-[9px] sm:text-[10px] lg:text-xs text-gray-600 font-medium italic leading-relaxed",children:l.notes})]})]})}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"1. Creation"}),c.jsx("div",{className:"p-1 bg-[#ebf4ff]0 text-white rounded-full",children:ne.Plus})]}),c.jsx("div",{className:"p-5",children:c.jsx("p",{className:"text-xs text-gray-500 leading-relaxed font-medium",children:l.history.created||`Created by ${(K==null?void 0:K.name)||"Unknown"} on ${l.orderDate}`})})]}),(pe=l.history)!=null&&pe.processing||s||a.role===ft.EMPLOYEE1?c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"2. Processing"}),c.jsx("div",{className:`p-1 rounded-full ${l.history.processing?"bg-[#ebf4ff]0 text-white":"bg-gray-200 text-gray-400"}`,children:ne.ChevronRight})]}),c.jsxs("div",{className:"p-5 space-y-4",children:[l.history.processing?c.jsx("p",{className:"text-xs ${theme.colors.primary[600]} leading-relaxed font-bold bg-[#ebf4ff] p-3 rounded-xl",children:l.history.processing}):(s||a.role===ft.EMPLOYEE1)&&c.jsx("button",{disabled:l.status!==Re.ON_HOLD,onClick:Q,className:`w-full py-3 ${se.colors.secondary[600]} hover:${se.colors.secondary[700]} disabled:bg-gray-100 disabled:text-gray-400 text-white font-bold rounded-xl shadow-md transition-all active:scale-95`,children:"Mark as Processing"}),l.history.courier?c.jsx("p",{className:"text-xs text-gray-700 leading-relaxed font-bold bg-gray-50 p-3 rounded-xl",children:l.history.courier}):!fe&&l.status!==Re.PICKED&&l.status!==Re.COMPLETED&&l.status!==Re.CANCELLED&&l.status!==Re.ON_HOLD&&!((ve=l.history)!=null&&ve.courier)&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>T(!0),className:"w-full py-3 bg-[#0f2f57] hover:bg-[#0a1f38] text-white font-bold rounded-xl shadow-md transition-all active:scale-95 flex items-center justify-center gap-2",children:[c.jsx("img",{src:"/uploads/steadfast.png",alt:"Steadfast",className:"w-5 h-5 rounded-full"})," Add to Steadfast"]}),c.jsxs("button",{onClick:()=>M(!0),className:"w-full py-3 bg-[#0f2f57] hover:bg-[#0a1f38] text-white font-bold rounded-xl shadow-md transition-all active:scale-95 flex items-center justify-center gap-2",children:[c.jsx("img",{src:"/uploads/carrybee.png",alt:"CarryBee",className:"w-5 h-5 rounded-full"})," Add to CarryBee"]})]})]})]}):null,l.history.picked||!fe?c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"3. Courier Picked"}),c.jsx("div",{className:`p-1 rounded-full ${l.history.picked?"bg-[#ebf4ff]0 text-white":"bg-gray-200 text-gray-400"}`,children:ne.Courier})]}),c.jsx("div",{className:"p-5",children:l.history.picked?c.jsx("p",{className:"text-xs text-purple-600 leading-relaxed font-bold bg-purple-50 p-3 rounded-xl",children:l.history.picked}):!fe&&c.jsx("button",{disabled:l.status!==Re.PROCESSING,onClick:ie,className:"w-full py-3 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-100 disabled:text-gray-400 text-white font-bold rounded-xl shadow-md transition-all active:scale-95",children:"Mark as Picked"})})]}):null,l.history.payment||!fe?c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"4. Payment"}),c.jsx("div",{className:`p-1 rounded-full ${l.paidAmount>=l.total?"bg-[#ebf4ff]0 text-white":"bg-gray-200 text-gray-400"}`,children:ne.Banking})]}),c.jsx("div",{className:"p-5 space-y-3",children:l.history.payment?c.jsx("div",{className:"space-y-2",children:c.jsx("p",{className:"text-xs ${theme.colors.primary[600]} leading-relaxed font-bold bg-[#ebf4ff] p-3 rounded-xl",children:l.history.payment})}):!fe&&c.jsxs("div",{className:"space-y-4 text-center",children:[c.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[c.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase",children:"Amount Due"}),c.jsx("p",{className:"text-2xl font-black text-gray-900",children:we(l.total-l.paidAmount)})]}),c.jsx("button",{onClick:I,className:`w-full py-3 ${se.colors.primary[600]} hover:${se.colors.primary[700]} text-white font-bold rounded-xl shadow-md transition-all active:scale-95`,children:"Add Payment"})]})})]}):null]})]}),c.jsx(a1,{isOpen:O,onClose:()=>E(!1),onSubmit:ue,accounts:y,paymentForm:R,setPaymentForm:L,isLoading:x.isPending||_.isPending||N.isPending,title:"Record Payment",buttonText:"Add Payment"}),c.jsx(WD,{isOpen:C,onClose:()=>T(!1),order:l,customer:h}),c.jsx(YD,{isOpen:k,onClose:()=>M(!1),order:l,customer:h})]})},Joe=()=>{const e=Nt();Le();const t=Vr(),{searchQuery:r}=Ya(),n=Se.currentUser,{data:a}=Gs(),s=(a==null?void 0:a.recordsPerPage)||Yt,[l,u]=j.useState(1),[f,h]=j.useState("All Time"),[m,g]=j.useState({from:"",to:""}),[y,v]=j.useState("All"),[w,x]=j.useState("all"),{data:_=[]}=zi(),N=j.useMemo(()=>{if(w!=="all")return w==="admins"?_.filter(q=>q.role===ft.ADMIN).map(q=>q.id):w==="employees"?_.filter(q=>Bn(q.role)).map(q=>q.id):[w]},[w,_]),{data:O,isFetching:E}=V9(l,s,{from:m.from,to:m.to,search:r,createdByIds:N}),C=(O==null?void 0:O.data)??[],T=(O==null?void 0:O.count)??0,k=Math.max(1,Math.ceil(T/s)),{data:M=[]}=s1();j.useEffect(()=>{u(1)},[r,f,m.from,m.to,w]);const R=q=>{u(1),h(q),q!=="Custom"&&g({from:"",to:""})},L=q=>{u(1),g(q)},V=q=>{u(1),x(q)},[G,K]=j.useState(null),[fe,ge]=j.useState(null),[he,B]=j.useState(null),Q=QD(),ie=iF(),ue=j.useMemo(()=>new Map(_.map(q=>[q.id,q])),[_]),I=q=>{var pe,ve;if((pe=q.createdBy)!=null&&pe.trim()){const me=ue.get(q.createdBy);if(me!=null&&me.name)return me.name}if((ve=q.history)!=null&&ve.created){const me=q.history.created.match(/Created by\s+(.+?)\s+on/);if(me&&me[1])return me[1]}return null},D=C.filter(q=>y==="All"||q.status===y),z=async q=>{try{const pe=new Date,ve=pe.toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"}),me=pe.toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"}),Ee={billNumber:`PUR-${Math.floor(1e3+Math.random()*9e3)}`,billDate:new Date().toISOString().split("T")[0],vendorId:q.vendorId,createdBy:(n==null?void 0:n.id)||q.createdBy,status:wn.ON_HOLD,items:q.items,subtotal:q.subtotal,discount:q.discount,shipping:q.shipping,total:q.total,paidAmount:0,notes:q.notes,history:{created:`Created as duplicate on ${ve}, at ${me}`}};await Q.mutateAsync(Ee)}catch(pe){console.error("Failed to duplicate bill:",pe),t.error("Failed to duplicate bill")}},Y=async q=>{if(confirm("Are you sure you want to delete this bill?"))try{await ie.mutateAsync(q),t.success("Bill deleted successfully")}catch(pe){console.error("Failed to delete bill:",pe),t.error("Failed to delete bill")}};return c.jsxs("div",{className:"space-y-6 pb-12",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-black text-gray-900 tracking-tight",children:"Purchase Bills"})}),c.jsx(Je,{onClick:()=>e("/bills/new"),variant:"primary",size:"md",icon:ne.Plus,children:"New Bill"})]}),c.jsx(kd,{title:"Bills",filterRange:f,setFilterRange:R,customDates:m,setCustomDates:L,statusTab:y,setStatusTab:v,statusOptions:Object.values(wn)}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:c.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[c.jsx("label",{className:"text-sm font-bold text-gray-700",children:"Created By:"}),c.jsxs("select",{value:w,onChange:q=>V(q.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"all",children:"All Users"}),_.some(q=>q.role===ft.ADMIN)&&c.jsx("option",{value:"admins",children:"All Admins"}),_.some(q=>Bn(q.role))&&c.jsx("option",{value:"employees",children:"All Employees"}),c.jsx("optgroup",{label:"Specific Users",children:_.map(q=>c.jsxs("option",{value:q.id,children:[q.name," ",q.role===ft.ADMIN?"(Admin)":"(Employee)"]},q.id))})]})]})}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-visible",children:c.jsx("div",{className:"overflow-x-auto overflow-y-visible",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Bill Details"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Vendor"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Created By"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Status"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] text-right",children:"Net Amount"}),c.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] sm:hidden",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:E?c.jsx(qp,{columns:5,rows:8}):D.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:6,className:"px-6 py-20 text-center text-gray-400 italic font-medium",children:"No purchase bills found for this period."})}):D.map(q=>{var pe;return c.jsxs("tr",{onMouseEnter:()=>K(q.id),onMouseLeave:()=>K(null),onClick:()=>e(`/bills/${q.id}`),className:"group relative hover:bg-[#ebf4ff]/20 cursor-pointer transition-all",children:[c.jsxs("td",{className:"px-6 py-5",children:[c.jsxs("span",{className:"font-black text-gray-900",children:["#",q.billNumber]}),c.jsx("p",{className:"text-[10px] text-gray-400 font-bold mt-1 tracking-tight",children:q.billDate})]}),c.jsxs("td",{className:"px-6 py-5",children:[c.jsx("span",{className:"text-sm font-bold text-gray-700",children:q.vendorName||((pe=M.find(ve=>ve.id===q.vendorId))==null?void 0:pe.name)||"Unknown Vendor"}),c.jsx("p",{className:"text-[10px] text-gray-400 font-medium mt-0.5",children:q.vendorPhone||""})]}),c.jsx("td",{className:"px-6 py-5 text-xs font-bold text-gray-500",children:q.creatorName||I(q)||""}),c.jsx("td",{className:"px-6 py-5",children:c.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest ${zp(q.status)}`,children:q.status})}),c.jsx("td",{className:"px-6 py-5 text-right",children:c.jsx("span",{className:"font-black text-gray-900 text-base",children:we(q.total)})}),c.jsx("td",{className:"px-6 py-5 sm:hidden relative z-[999]",onClick:ve=>ve.stopPropagation(),children:c.jsxs("div",{className:"relative z-[999]",children:[c.jsx("button",{onClick:ve=>{const me=ve.currentTarget;fe===q.id?(ge(null),B(null)):(ge(q.id),B(me))},className:"p-2 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-lg transition-all",children:ne.More}),c.jsxs(Z5,{anchorEl:he,open:fe===q.id,onClose:()=>{ge(null),B(null)},children:[c.jsxs("button",{onClick:()=>{e(`/bills/edit/${q.id}`),ge(null),B(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[ne.Edit," Edit"]}),c.jsxs("button",{onClick:()=>{z(q),ge(null),B(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 font-bold text-gray-700",children:[ne.Duplicate," Duplicate"]}),c.jsx("div",{className:"border-t my-1"}),c.jsxs("button",{onClick:()=>{Y(q.id),ge(null),B(null)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-red-50 flex items-center gap-2 font-bold text-red-600",children:[ne.Delete," Delete"]})]})]})}),G===q.id&&c.jsx("td",{className:"absolute right-6 top-1/2 -translate-y-1/2 z-10 animate-in fade-in slide-in-from-right-2 duration-200 hidden sm:table-cell",onClick:ve=>ve.stopPropagation(),children:c.jsxs("div",{className:"flex items-center gap-1.5 bg-white p-1.5 rounded-2xl shadow-[0_20px_50px_rgba(0,0,0,0.15)] border border-[#ebf4ff]",children:[c.jsx("button",{onClick:()=>e(`/bills/edit/${q.id}`),className:"p-2.5 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-xl transition-all",title:"Edit",children:ne.Edit}),c.jsx("button",{onClick:()=>z(q),className:"p-2.5 text-gray-400 hover:text-[#0f2f57] hover:bg-[#ebf4ff] rounded-xl transition-all",title:"Duplicate",children:ne.Duplicate}),c.jsx("div",{className:"h-5 w-px bg-gray-100 mx-1"}),c.jsx("button",{onClick:()=>Y(q.id),className:"p-2.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all",title:"Delete",children:ne.Delete})]})})]},q.id)})})]})})}),c.jsx(su,{page:l,totalPages:k,onPageChange:q=>u(q),disabled:E})]})},mT=()=>{const{id:e}=Kn(),t=Nt(),r=Se.currentUser,n=!!e;if(!r)return c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Not Authenticated"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Please log in first."}),c.jsx(Je,{onClick:()=>t("/login"),variant:"primary",children:"Back to Login"})]});const a=Le(),{data:s,isPending:l,error:u}=BD(e),[f,h]=j.useState(!1),[m,g]=j.useState(""),{data:y=[],isFetching:v}=rt({queryKey:["productsMini"],queryFn:Rm,staleTime:300*1e3,enabled:!1,refetchOnWindowFocus:!1});Xe.useEffect(()=>{if(!f)return;const be=a.getQueryData(["products"]);(!be||be.length===0)&&a.fetchQuery({queryKey:["productsMini"],queryFn:Rm}).catch(()=>{})},[f,a]);const[w,x]=Xe.useState("");Xe.useEffect(()=>{const be=setTimeout(()=>x(m.trim()),300);return()=>clearTimeout(be)},[m]);const{data:_=[],isFetching:N}=rt({queryKey:["productsSearch",w],queryFn:()=>ED(w,100),enabled:f&&!!w,staleTime:60*1e3,refetchOnWindowFocus:!1}),O=a.getQueryData(["products"]),E=O&&O.length>0?O:w?_:y||[],C=QD(),T=HD(),k=Vr(),[M,R]=j.useState(""),[L,V]=j.useState(new Date().toISOString().split("T")[0]),[G,K]=j.useState(""),[fe,ge]=j.useState([]),[he,B]=j.useState(0),[Q,ie]=j.useState(0),[ue,I]=j.useState(""),[D,z]=j.useState(!1),[Y,q]=j.useState(""),[pe,ve]=Xe.useState("");Xe.useEffect(()=>{const be=setTimeout(()=>ve(Y.trim()),300);return()=>clearTimeout(be)},[Y]);const me=20,{data:Ee,isFetching:te}=rt({queryKey:["vendors",1,me,""],queryFn:()=>Tx(1,me,""),enabled:D&&!pe,staleTime:300*1e3,refetchOnWindowFocus:!1}),{data:_e,isFetching:De}=rt({queryKey:["vendors","search",pe],queryFn:()=>Tx(1,me,pe),enabled:D&&!!pe,staleTime:300*1e3,refetchOnWindowFocus:!1}),[le,Fe]=j.useState(!1),[Te,Ze]=j.useState(null);Xe.useEffect(()=>{s?(R(s.vendorId),V(s.billDate),K(s.billNumber),ge(s.items),B(s.discount),ie(s.shipping),I(s.notes||"")):n||K(`PUR-${Math.floor(1e3+Math.random()*9e3)}`)},[s,n]);const gt=fe.reduce((be,nt)=>be+nt.amount,0),qt=gt-he+Q,tn=be=>{const nt=E.find(Ft=>Ft.id===be);if(!nt)return;const yt={productId:nt.id,productName:nt.name,rate:nt.purchasePrice,quantity:1,amount:nt.purchasePrice};ge([...fe,yt]),h(!1),g("")},rn=(be,nt)=>{const yt=[...fe];yt[be].quantity=Math.max(1,nt),yt[be].amount=yt[be].rate*yt[be].quantity,ge(yt)},ae=be=>{ge(fe.filter((nt,yt)=>yt!==be))},Z=async()=>{if(!M||fe.length===0){Ze("Please select a vendor and add at least one product.");return}if(!(r!=null&&r.id)){Ze("User session expired. Please log in again.");return}Fe(!0),Ze(null);try{const be=fe.reduce((Zt,xe)=>Zt+xe.amount,0),nt=be-he+Q,yt=new Date().toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"}),Ft=new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"}),Kt={billNumber:G,billDate:L,vendorId:M,createdBy:r.id,status:n&&s?s.status:wn.ON_HOLD,items:fe,subtotal:be,discount:he,shipping:Q,total:nt,notes:ue,paidAmount:n&&s?s.paidAmount:0,history:n&&s?s.history:{created:`Created by ${r.name} on ${yt}, at ${Ft}`}};n?(await T.mutateAsync({id:e,updates:Kt}),k.success("Bill updated successfully"),Fe(!1),t("/bills")):C.mutateAsync(Kt).then(Zt=>{Fe(!1),k.success("Bill created successfully"),t(`/bills/${Zt.id}`)},Zt=>{Fe(!1);const xe=Zt instanceof Error?Zt.message:"Failed to save bill";Ze(xe),k.error(xe)})}catch(be){console.error("Failed to save bill:",be);const nt=be instanceof Error?be.message:"Failed to save bill";Ze(nt),k.error(nt),Fe(!1)}},qe=pe?(_e==null?void 0:_e.data)||[]:(Ee==null?void 0:Ee.data)||[],Ke=qe.find(be=>be.id===M)||void 0,ze=Fn();return Xe.useEffect(()=>{try{const be=new URLSearchParams(ze.search),nt=be.get("selectedVendorId");if(nt){R(nt),z(!1),be.delete("selectedVendorId");const yt=be.toString(),Ft=`${ze.pathname}${yt?`?${yt}`:""}`;t(Ft,{replace:!0})}}catch{}},[ze.search,qe,t,ze.pathname]),c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 pb-20",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:n?"Edit Bill":"New Purchase Bill"}),c.jsx("button",{onClick:()=>t("/bills"),className:"text-gray-500 hover:text-gray-700 font-medium text-sm px-4 py-2 border border-gray-200 rounded-lg bg-white transition-all",children:"Cancel"})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-100 shadow-sm space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"space-y-1 relative md:col-span-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Select Vendor"}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>z(!D),className:"w-full text-left px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl hover:bg-white focus:ring-2 focus:ring-[#3c5a82] transition-all flex justify-between items-center group",children:[Ke?c.jsxs("div",{className:"flex-1 overflow-hidden",children:[c.jsx("span",{className:"font-bold block text-sm text-gray-900",children:Ke.name}),c.jsx("p",{className:"text-[10px] text-gray-500 leading-none mt-0.5",children:Ke.phone}),c.jsx("p",{className:"text-[10px] ${theme.colors.secondary[600]} italic truncate mt-1",children:Ke.address})]}):c.jsx("span",{className:"text-gray-400 text-sm",children:"Select Vendor..."}),c.jsx("div",{className:`transition-transform duration-200 ${D?"rotate-90":""}`,children:ne.ChevronRight})]}),D&&c.jsxs("div",{className:"absolute top-full left-0 mt-2 w-full max-w-xs bg-white border border-gray-200 shadow-2xl rounded-lg z-[110] p-2 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"relative mb-2",children:[c.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none text-gray-300",children:ne.Search}),c.jsx("input",{autoFocus:!0,type:"text",placeholder:"Search business...",className:"w-full pl-9 pr-4 py-2.5 bg-gray-50 border border-gray-100 rounded-xl outline-none focus:ring-2 focus:ring-[#3c5a82] text-sm font-medium",value:Y,onChange:be=>q(be.target.value)})]}),c.jsx("div",{className:"max-h-[220px] overflow-y-auto space-y-0.5 custom-scrollbar",children:(qe||[]).map(be=>c.jsxs("button",{onClick:()=>{R(be.id),z(!1),q("")},className:"w-full px-4 py-2.5 text-left hover:bg-[#e6f0ff] rounded-lg group transition-colors",children:[c.jsx("p",{className:"text-sm font-bold text-gray-800 group-hover:${theme.colors.secondary[700]}",children:be.name}),c.jsx("p",{className:"text-[10px] text-gray-400 group-hover:${theme.colors.secondary[600]}/60",children:be.phone})]},be.id))}),c.jsx(Je,{onClick:()=>{z(!1),t("/vendors/new",{state:{fromBillForm:!0,redirectPath:n?`/bills/edit/${e}`:"/bills/new"}})},variant:"secondary",size:"sm",className:"w-full mt-2 text-[10px]",icon:ne.Plus,children:"Add New Vendor"})]})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Bill Date"}),c.jsx("input",{type:"date",value:L,onChange:be=>V(be.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-[#3c5a82] focus:bg-white transition-all cursor-pointer font-bold text-sm"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Bill Number"}),c.jsx("input",{type:"text",value:G,onChange:be=>K(be.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl font-mono ${theme.colors.secondary[700]} text-sm font-bold"})]})]}),c.jsx("div",{className:"border border-gray-100 rounded-lg overflow-visible bg-white",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Product Item"}),c.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-center",children:"Cost Rate"}),c.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-center",children:"Qty"}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-right",children:"Amount"}),c.jsx("th",{className:"px-4 py-4"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-50",children:[fe.map((be,nt)=>{var yt,Ft;return c.jsxs("tr",{className:"group hover:bg-gray-50/50",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex items-center gap-4",children:[((yt=E.find(Kt=>Kt.id===be.productId))==null?void 0:yt.image)&&c.jsx("img",{src:(Ft=E.find(Kt=>Kt.id===be.productId))==null?void 0:Ft.image,className:"w-12 h-12 rounded-full object-cover border border-gray-100 shadow-sm"}),c.jsx("span",{className:"font-bold text-gray-800 text-sm",children:be.productName})]})}),c.jsx("td",{className:"px-4 py-4 text-center text-sm font-bold text-gray-600",children:we(be.rate)}),c.jsx("td",{className:"px-4 py-4 text-center",children:c.jsx("input",{type:"number",value:be.quantity,onChange:Kt=>rn(nt,parseInt(Kt.target.value)),className:"w-16 text-center py-2 border border-gray-100 rounded-xl focus:ring-2 focus:ring-[#3c5a82] font-bold outline-none"})}),c.jsx("td",{className:"px-6 py-4 text-right font-black text-gray-900 text-sm",children:we(be.amount)}),c.jsx("td",{className:"px-4 py-4 text-right",children:c.jsx("button",{onClick:()=>ae(nt),className:"p-2 text-red-200 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",children:ne.Delete})})]},nt)}),c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"px-6 py-5 relative",children:c.jsxs("div",{className:"relative",children:[c.jsx(Je,{onClick:()=>h(!f),variant:"secondary",size:"sm",icon:ne.Plus,className:"border-2 border-dashed border-[#c7e0f5]",children:"Add an item"}),f&&c.jsxs("div",{className:"absolute top-full left-0 mt-3 w-full max-w-md bg-white border border-gray-200 shadow-2xl rounded-lg z-[100] p-2 overflow-hidden animate-in slide-in-from-top-2 duration-200",children:[c.jsxs("div",{className:"relative mb-2",children:[c.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none text-gray-300",children:ne.Search}),c.jsx("input",{autoFocus:!0,type:"text",placeholder:"Search product...",className:"w-full pl-9 pr-4 py-2.5 bg-gray-50 border border-gray-100 rounded-xl outline-none focus:ring-2 focus:ring-[#3c5a82] text-sm font-medium",value:m,onChange:be=>g(be.target.value)})]}),c.jsx("div",{className:"max-h-[260px] overflow-y-auto space-y-0.5 custom-scrollbar",children:E.filter(be=>be.name.toLowerCase().includes(m.toLowerCase())).map(be=>c.jsxs("button",{onClick:()=>tn(be.id),className:"flex items-center gap-4 w-full px-4 py-3 text-left hover:bg-[#e6f0ff] rounded-xl group transition-all",children:[be.image&&c.jsx("img",{src:be.image,className:"w-10 h-10 rounded-full object-cover border border-gray-100 shadow-sm"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-bold text-gray-800 group-hover:${theme.colors.secondary[700]} truncate",children:be.name}),c.jsxs("p",{className:"text-[10px] font-bold ${theme.colors.secondary[600]}/60 uppercase tracking-widest",children:["Cost: ",we(be.purchasePrice)]})]})]},be.id))})]})]})})})]})]})}),c.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-12 pt-6",children:[c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Purchase Memo"}),c.jsx("textarea",{placeholder:"Bill details, vendor instructions, or delivery notes...",value:ue,onChange:be=>I(be.target.value),className:"w-full px-5 py-4 bg-gray-50 border border-gray-100 rounded-lg h-32 focus:ring-2 focus:ring-[#3c5a82] focus:bg-white outline-none font-medium text-sm transition-all"})]}),c.jsxs("div",{className:"w-full md:w-96 space-y-4 bg-gray-50/50 p-8 rounded-[2rem] border border-gray-100",children:[c.jsxs("div",{className:"flex justify-between items-center text-gray-500 text-sm font-bold uppercase tracking-widest",children:[c.jsx("span",{children:"Subtotal"}),c.jsx("span",{className:"text-gray-900 font-black",children:we(gt)})]}),c.jsxs("div",{className:"flex justify-between items-center text-gray-500 text-sm font-bold uppercase tracking-widest",children:[c.jsx("span",{children:"Discount"}),c.jsx("input",{type:"number",value:he,onChange:be=>B(parseFloat(be.target.value)||0),className:"w-24 text-right px-3 py-1.5 border border-gray-100 rounded-lg focus:ring-2 focus:ring-[#3c5a82] font-black text-gray-900 bg-white"})]}),c.jsxs("div",{className:"flex justify-between items-center text-gray-500 text-sm font-bold uppercase tracking-widest",children:[c.jsx("span",{children:"Shipping"}),c.jsx("input",{type:"number",value:Q,onChange:be=>ie(parseFloat(be.target.value)||0),className:"w-24 text-right px-3 py-1.5 border border-gray-100 rounded-lg focus:ring-2 focus:ring-[#3c5a82] font-black text-gray-900 bg-white"})]}),c.jsxs("div",{className:"pt-6 border-t-4 border-[#c7e0f5] flex justify-between items-center",children:[c.jsx("span",{className:"text-lg font-bold text-gray-900 uppercase tracking-tighter",children:"Total Bill"}),c.jsx("span",{className:"text-3xl font-black",children:we(qt)})]}),c.jsx(Je,{onClick:Z,variant:"primary",size:"lg",className:"w-full mt-4",loading:le,disabled:le,children:"Save Purchase Bill"})]})]})]})]})},Zoe=()=>{var B,Q,ie,ue;const{id:e}=Kn(),t=Nt(),r=Le(),n=Se.currentUser,{data:a,isPending:s,error:l}=BD(e||""),{data:u=[]}=s1(),{data:f=[]}=zi(),{data:h=[]}=Hs(),{data:m=[]}=o1(),{data:g}=Vp(),{data:y}=Wp(),v=HD(),w=uf(),x=cf(),_=Vr(),N=v.isPending||w.isPending||x.isPending,O=a?u.find(I=>I.id===a.vendorId):void 0,E=a?f.find(I=>I.id===a.createdBy):void 0,C=s,[T,k]=j.useState(!1),[M,R]=j.useState(!1),[L,V]=j.useState({date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!1}),accountId:Se.settings.defaults.accountId||"",amount:0});if(C)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading bill..."});if(l||!a)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:(l==null?void 0:l.message)||"Bill not found."});const G=async(I,D,z)=>{if(a)try{const Y={...a,status:I,history:D?{...a.history,[D]:z}:a.history};await v.mutateAsync({id:e,updates:Y}),r.invalidateQueries({queryKey:["bill",e]}),r.invalidateQueries({queryKey:["bills"]}),k(!1)}catch(Y){console.error("Failed to update bill status:",Y),_.error("Failed to update bill status")}},K=async()=>{const I=`Marked as processing by ${n.name}, on ${new Date().toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"})}`;await G(wn.PROCESSING,"processing",I)},fe=async()=>{const I=`Marked as received by ${n.name}, on ${new Date().toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"})}`;await G(wn.RECEIVED,"received",I)},ge=async()=>{if(a)try{let I=h.find(le=>le.id===L.accountId);if(!I){if(!L.accountId){_.error("Please select an account");return}I={id:L.accountId,name:"Selected Account",type:"Bank",openingBalance:0,currentBalance:0}}const D=a.paidAmount+L.amount,z=`Payment of ${we(L.amount)} received by ${n.name} on ${new Date(L.date).toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})}, at ${new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"})}`,q=D>=a.total?wn.PAID:a.status,[pe,ve]=L.time.split(":").map(Number),me=new Date(L.date);me.setHours(pe,ve,0,0);const Ee=me.toISOString(),te={...a,paidAmount:D,status:q,history:{...a.history,paid:z},paidAt:L.date};try{const le={id:Math.random().toString(36).substr(2,9),date:Ee,type:"Expense",category:Se.settings.defaults.expenseCategoryId||"expense_purchases",accountId:L.accountId,amount:L.amount,description:`Payment for Bill #${a.billNumber}`,referenceId:a.id,contactId:a.vendorId,paymentMethod:Se.settings.defaults.paymentMethod||"Cash",createdBy:n.id};await w.mutateAsync(le)}catch(le){console.error("Failed to create transaction:",le)}const _e=L.amount,De=await Promise.allSettled([v.mutateAsync({id:e,updates:te}),x.mutateAsync({id:L.accountId,updates:{currentBalance:I.currentBalance-_e}})]);if(De[0].status==="rejected"||De[1].status==="rejected"){const le=De[0].status==="rejected"?"failed":"succeeded",Fe=De[1].status==="rejected"?"failed":"succeeded";throw new Error(`Payment update failed: Bill update ${le}, Account update ${Fe}`)}r.invalidateQueries({queryKey:["bill",e]}),r.invalidateQueries({queryKey:["bills"]}),R(!1),_.success("Payment recorded successfully")}catch(I){console.error("Failed to record payment:",I),_.error("Failed to record payment")}},he=()=>{a&&(V({date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!1}),accountId:"",amount:a.total-a.paidAmount}),R(!0))};return c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsx(sf,{isLoading:C&&!a,message:"Loading bill details..."}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>t("/bills"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500 transition-all",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsxs("h2",{className:"text-md md:text-2xl font-bold text-gray-900",children:["#",a.billNumber]}),c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide ${zp(a.status)}`,children:a.status})]}),c.jsxs("div",{className:"flex items-center gap-2 relative",children:[c.jsxs("button",{className:"hidden md:flex items-center gap-2 px-4 py-2 text-sm font-semibold border rounded-lg bg-white hover:bg-gray-50 transition-all",children:[ne.Print," Print Bill"]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>k(!T),className:`flex items-center gap-2 px-4 py-2 text-sm font-semibold border rounded-lg ${se.colors.primary[600]} text-white hover:${se.colors.primary[700]} transition-all shadow-md`,children:[ne.More," ",c.jsx("span",{className:"hidden md:inline",children:"Actions"})]}),T&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>k(!1)}),c.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white border rounded-xl shadow-xl z-50 py-2",children:[c.jsx("button",{onClick:()=>{window.print(),k(!1)},className:"md:hidden w-full text-left px-4 py-2 text-sm hover:bg-gray-50",children:"Print Bill"}),c.jsx("button",{onClick:()=>{window.print(),k(!1)},className:"md:hidden border-t w-full text-left px-4 py-2 text-sm hover:bg-gray-50"}),c.jsx("button",{onClick:()=>{K(),k(!1)},className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50",children:"Mark Processing"}),c.jsx("button",{onClick:()=>{fe(),k(!1)},className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50",children:"Mark Received"}),c.jsx("div",{className:"border-t my-1"}),c.jsx("button",{onClick:()=>{he(),k(!1)},disabled:a.paidAmount>=a.total,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 text-red-600 font-bold disabled:text-gray-300 disabled:cursor-not-allowed",children:"Record Payment"}),c.jsx("button",{onClick:()=>t(`/bills/edit/${a.id}`),className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50",children:"Edit Bill"})]})]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[c.jsx("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:c.jsxs("div",{className:"p-3 sm:p-4 md:p-6 lg:p-8 space-y-6 sm:space-y-8",children:[c.jsxs("div",{className:"flex flex-row justify-between items-start gap-3 sm:gap-4",children:[c.jsxs("div",{className:"min-w-0",children:[((g==null?void 0:g.logo)||Se.settings.company.logo)&&c.jsx("img",{src:(g==null?void 0:g.logo)||Se.settings.company.logo,className:"rounded-lg object-cover mb-2 sm:mb-3 lg:mb-4 w-auto h-auto",style:{maxWidth:"min(100px, 20%)",maxHeight:"auto"}}),c.jsx("h1",{className:"text-sm sm:text-base lg:text-xl font-black text-blue-600 uppercase tracking-tighter break-words",children:(g==null?void 0:g.name)||Se.settings.company.name}),c.jsxs("div",{className:"mt-1 sm:mt-2 text-[9px] sm:text-[10px] lg:text-xs text-gray-400 font-medium space-y-0.5 sm:space-y-1",children:[c.jsx("p",{className:"break-words",children:(g==null?void 0:g.address)||Se.settings.company.address}),c.jsxs("p",{className:"text-[8px] sm:text-[9px] break-words",children:[(g==null?void 0:g.phone)||Se.settings.company.phone,"  ",(g==null?void 0:g.email)||Se.settings.company.email]})]})]}),c.jsxs("div",{className:"text-right flex-shrink-0",children:[c.jsx("h2",{className:"text-sm sm:text-2xl lg:text-3xl font-black text-gray-300 uppercase leading-none mb-1 sm:mb-2 break-words",children:(y==null?void 0:y.title)||Se.settings.invoice.title}),c.jsxs("div",{className:"space-y-0.5 sm:space-y-1 lg:space-y-1.5 text-[9px] sm:text-sm",children:[c.jsxs("p",{className:"text-[9px] sm:text-sm font-bold text-gray-900 break-words",children:["Bill No: #",a.billNumber]}),c.jsx("p",{className:"text-[9px] sm:text-sm text-gray-500",children:a.billDate})]})]})]}),c.jsxs("div",{className:"border-t border-gray-100 py-2 sm:py-3 lg:py-4",children:[c.jsx("p",{className:"text-[8px] sm:text-[9px] lg:text-[10px] font-black text-gray-400 uppercase tracking-[0.15em] sm:tracking-[0.2em] mb-2 sm:mb-3 lg:mb-4",children:"Bill From (Vendor)"}),c.jsx("h3",{className:"text-sm sm:text-base lg:text-lg font-black text-gray-900 break-words",children:O==null?void 0:O.name}),c.jsx("p",{className:"text-[10px] sm:text-xs lg:text-sm text-gray-500 leading-relaxed break-words",children:O==null?void 0:O.address}),c.jsx("p",{className:"text-[10px] sm:text-xs lg:text-sm font-bold text-cyan-600 mt-1 sm:mt-1.5 lg:mt-2 break-words",children:O==null?void 0:O.phone})]}),c.jsx("div",{className:"overflow-x-auto -mx-3 sm:-mx-4 md:-mx-6 lg:-mx-10",children:c.jsx("div",{className:"px-3 sm:px-4 md:px-6 lg:px-10",children:c.jsxs("table",{className:"w-full text-left text-[10px] sm:text-xs lg:text-sm",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b-2 border-gray-100",children:[c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 font-black text-gray-400 uppercase",children:"Description"}),c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 text-center font-black text-gray-400 uppercase whitespace-nowrap px-1",children:"Cost"}),c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 text-center font-black text-gray-400 uppercase whitespace-nowrap px-1",children:"Qty"}),c.jsx("th",{className:"py-2 sm:py-3 lg:py-4 text-right font-black text-gray-400 uppercase whitespace-nowrap px-1",children:"Total"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:a.items.map((I,D)=>{const z=m.find(Y=>Y.id===I.productId);return c.jsxs("tr",{className:"group",children:[c.jsx("td",{className:"py-3 sm:py-4 lg:py-6",children:c.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 lg:gap-4 min-w-0",children:[c.jsx("img",{src:z==null?void 0:z.image,className:"w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 rounded-full object-cover border border-gray-100 shadow-sm flex-shrink-0"}),c.jsx("span",{className:"font-bold text-gray-900 text-[10px] sm:text-xs lg:text-base break-words",children:I.productName})]})}),c.jsx("td",{className:"py-3 sm:py-4 lg:py-6 text-center text-gray-500 font-bold px-1 whitespace-nowrap",children:we(I.rate)}),c.jsx("td",{className:"py-3 sm:py-4 lg:py-6 text-center text-gray-500 font-bold px-1 whitespace-nowrap",children:I.quantity}),c.jsx("td",{className:"py-3 sm:py-4 lg:py-6 text-right font-black text-gray-900 px-1 whitespace-nowrap",children:we(I.amount)})]},D)})})]})})}),c.jsx("div",{className:"flex flex-col items-end pt-2 sm:pt-3 lg:pt-6 px-0",children:c.jsxs("div",{className:"w-full sm:w-full md:w-98 lg:max-w-xs space-y-2 sm:space-y-3 lg:space-y-4",children:[c.jsxs("div",{className:"flex justify-between text-[10px] sm:text-xs lg:text-sm gap-2",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase flex-shrink-0",children:"Subtotal"}),c.jsx("span",{className:"font-bold text-gray-900 flex-shrink-0",children:we(a.subtotal)})]}),a.discount>0&&c.jsxs("div",{className:"flex justify-between text-[10px] sm:text-xs lg:text-sm gap-2",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase flex-shrink-0",children:"Discount"}),c.jsxs("span",{className:"font-bold text-red-500 flex-shrink-0",children:["-",we(a.discount)]})]}),a.shipping>0&&c.jsxs("div",{className:"flex justify-between text-[10px] sm:text-xs lg:text-sm gap-2",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase flex-shrink-0",children:"Shipping"}),c.jsx("span",{className:"font-bold text-gray-900 flex-shrink-0",children:we(a.shipping)})]}),c.jsxs("div",{className:"flex justify-between items-center py-2 sm:py-3 lg:py-4 border-t-2 border-[#0f2f57] gap-2",children:[c.jsx("span",{className:"font-black text-gray-900 uppercase tracking-tighter text-[11px] sm:text-xs lg:text-sm flex-shrink-0",children:"Total Payable"}),c.jsx("span",{className:"font-black text-sm sm:text-base lg:text-lg flex-shrink-0",children:we(a.total)})]})]})})]})}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"1. Creation"}),c.jsx("div",{className:"p-1 bg-[#ebf4ff] text-white rounded-full",children:ne.Plus})]}),c.jsx("div",{className:"p-5",children:c.jsx("p",{className:"text-xs text-gray-500 leading-relaxed font-medium",children:E!=null&&E.name?`${a.history.created} `:((B=a.history)==null?void 0:B.created)||"Creation information unavailable"})})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"2. Processing"}),c.jsx("div",{className:`p-1 rounded-full ${a.status===wn.PROCESSING?"bg-[#ebf4ff] text-white":"bg-gray-200 text-gray-400"}`,children:ne.ChevronRight})]}),c.jsx("div",{className:"p-5",children:(Q=a.history)!=null&&Q.processing?c.jsx("p",{className:"text-xs text-blue-600 leading-relaxed font-bold bg-[#ebf4ff] p-3 rounded-xl",children:a.history.processing}):c.jsx("button",{disabled:a.status===wn.RECEIVED,onClick:K,className:`w-full py-3 ${se.colors.secondary[600]} hover:${se.colors.secondary[700]} disabled:bg-gray-100 disabled:text-gray-400 text-white font-bold rounded-xl shadow-md transition-all active:scale-95`,children:"Mark as Processing"})})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"3. Received"}),c.jsx("div",{className:`p-1 rounded-full ${a.status===wn.RECEIVED?"bg-green-100 text-green-600":"bg-gray-200 text-gray-400"}`,children:ne.ChevronRight})]}),c.jsx("div",{className:"p-5",children:(ie=a.history)!=null&&ie.received?c.jsx("p",{className:"text-xs text-green-600 leading-relaxed font-bold bg-green-50 p-3 rounded-xl",children:a.history.received}):c.jsx("button",{disabled:a.status===wn.ON_HOLD,onClick:fe,className:"w-full py-3 bg-green-600 hover:bg-green-700 disabled:bg-gray-100 disabled:text-gray-400 text-white font-bold rounded-xl shadow-md transition-all active:scale-95",children:"Mark as Received"})})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex justify-between items-center",children:[c.jsx("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-widest",children:"4. Payment"}),c.jsx("div",{className:`p-1 rounded-full ${a.paidAmount>0?"bg-[#ebf4ff] text-white":"bg-gray-200 text-gray-400"}`,children:ne.Banking})]}),c.jsx("div",{className:"p-5 space-y-3",children:a.paidAmount>0?c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-xs text-blue-600 leading-relaxed font-bold bg-[#ebf4ff] p-3 rounded-xl",children:(ue=a.history)==null?void 0:ue.paid}),a.paidAt&&c.jsxs("p",{className:"text-xs text-gray-500 leading-relaxed font-medium",children:["Payment Date: ",new Date(a.paidAt).toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})]}),a.paidAmount<a.total&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"p-3 bg-yellow-50 rounded-lg border border-yellow-100 mt-2",children:[c.jsx("p",{className:"text-[10px] font-black text-yellow-600 uppercase",children:"Remaining Amount"}),c.jsx("p",{className:"text-lg font-black text-yellow-700",children:we(a.total-a.paidAmount)})]}),c.jsx("button",{onClick:he,className:`w-full py-3 ${se.colors.primary[600]} hover:${se.colors.primary[700]} text-white font-bold rounded-xl shadow-md transition-all active:scale-95`,children:"Add Balance Payment"})]})]}):c.jsxs("div",{className:"space-y-4 text-center",children:[c.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[c.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase",children:"Amount Due"}),c.jsx("p",{className:"text-2xl font-black text-gray-900",children:we(a.total-a.paidAmount)})]}),c.jsx("button",{onClick:he,className:`w-full py-3 ${se.colors.primary[600]} hover:${se.colors.primary[700]} text-white font-bold rounded-xl shadow-md transition-all active:scale-95`,children:"Record Payment"})]})})]})]})]}),c.jsx(a1,{isOpen:M,onClose:()=>R(!1),onSubmit:ge,accounts:h,paymentForm:L,setPaymentForm:V,isLoading:N,title:"Record Payment",buttonText:"Add Payment"})]})},ele=()=>{const{data:e=[],isLoading:t}=Hs(),{searchQuery:r}=Ya(),n=sF(),a=oF(),s=Vr(),l=j.useMemo(()=>{if(!r.trim())return e;const _=r.toLowerCase();return e.filter(N=>N.name.toLowerCase().includes(_)||N.type.toLowerCase().includes(_))},[e,r]),[u,f]=j.useState(!1),[h,m]=j.useState(null),[g,y]=j.useState({name:"",type:"Bank",openingBalance:0}),v=async()=>{if(g.name)try{await n.mutateAsync({name:g.name,type:g.type,openingBalance:g.openingBalance,currentBalance:g.openingBalance}),f(!1),y({name:"",type:"Bank",openingBalance:0})}catch(_){console.error("Failed to create account:",_),s.error("Failed to create account. Please try again.")}},w=async _=>{const N=e.find(O=>O.id===_);if(N){if(N.currentBalance!==0){s.warning(`Cannot delete account "${N.name}" because it has a balance of ${N.currentBalance}. Please transfer the balance to another account first.`);return}if(confirm(`Are you sure you want to delete the account "${N.name}"?`))try{await a.mutateAsync(_),m(null)}catch(O){console.error("Failed to delete account:",O),s.error("Failed to delete account. Please try again.")}}},x=l.reduce((_,N)=>_+N.currentBalance,0);return c.jsxs("div",{className:"space-y-6",children:[c.jsx(sf,{isLoading:t,message:"Loading accounts..."}),c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-bold text-gray-900",children:"Banking & Accounts"})}),c.jsx(Je,{onClick:()=>f(!0),variant:"primary",size:"md",icon:ne.Plus,disabled:n.isPending,children:"Add Account"})]}),c.jsxs("div",{className:`${se.colors.primary[600]} rounded-xl p-8 text-white shadow-xl shadow-[#0f2f57]/20 relative overflow-hidden`,children:[c.jsxs("div",{className:"relative z-10",children:[c.jsx("p",{className:"text-[#c7dff5] font-medium text-sm mb-1 uppercase tracking-wider",children:"Total Combined Balance"}),c.jsx("h1",{className:"text-4xl font-black",children:we(x)}),c.jsxs("div",{className:"mt-8 flex gap-6",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-[#a8c5e8] text-xs font-bold uppercase",children:"Bank Accounts"}),c.jsx("p",{className:"text-xl font-bold",children:e.filter(_=>_.type==="Bank").length})]}),c.jsx("div",{className:"w-px bg-[#0f2f57]/50 h-10"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-[#a8c5e8] text-xs font-bold uppercase",children:"Cash Accounts"}),c.jsx("p",{className:"text-xl font-bold",children:e.filter(_=>_.type==="Cash").length})]})]})]}),c.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 pointer-events-none",children:c.jsx("div",{className:"w-48 h-48 border-[24px] border-white rounded-full"})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(_=>c.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow group relative",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("div",{className:`p-3 rounded-xl ${_.type==="Bank"?`bg-[#e6f0ff] ${se.colors.secondary[600]}`:"bg-orange-50 text-orange-600"}`,children:(_.type==="Bank",ne.Banking)}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>m(h===_.id?null:_.id),className:"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-lg transition-all",children:ne.More}),h===_.id&&c.jsx("div",{className:"absolute right-0 mt-1 w-40 bg-white border border-gray-100 rounded-lg shadow-lg z-50 py-1",children:c.jsxs("button",{onClick:()=>w(_.id),disabled:_.currentBalance!==0||a.isPending,className:`w-full text-left px-4 py-2.5 text-sm flex items-center gap-2 font-bold ${_.currentBalance!==0||a.isPending?"text-gray-400 cursor-not-allowed":"text-red-600 hover:bg-red-50"}`,title:_.currentBalance!==0?"Account must have zero balance to delete":"Delete account",children:[ne.Delete," Delete"]})})]})]}),c.jsx("h3",{className:"text-lg font-bold text-gray-900",children:_.name}),c.jsxs("p",{className:"text-xs text-gray-400 font-medium uppercase tracking-tight mb-4",children:[_.type," Account"]}),c.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-50",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-gray-500",children:"Opening Balance"}),c.jsx("span",{className:"font-semibold text-gray-700",children:we(_.openingBalance)})]}),c.jsxs("div",{className:"flex justify-between items-center pt-2",children:[c.jsx("span",{className:"text-sm font-bold text-gray-900",children:"Current Balance"}),c.jsx("span",{className:"text-xl font-black",children:we(_.currentBalance)})]})]})]},_.id))}),u&&c.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[c.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm",onClick:()=>f(!1)}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md relative z-10 animate-in fade-in zoom-in duration-200",children:[c.jsx("div",{className:"p-6 border-b",children:c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Add New Account"})}),c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Account Name"}),c.jsx("input",{type:"text",placeholder:"e.g. City Bank - 0987",className:"w-full px-4 py-2 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-emerald-500",value:g.name,onChange:_=>y({...g,name:_.target.value})})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Account Type"}),c.jsxs("select",{className:"w-full px-4 py-2 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-emerald-500",value:g.type,onChange:_=>y({...g,type:_.target.value}),children:[c.jsx("option",{value:"Bank",children:"Bank"}),c.jsx("option",{value:"Cash",children:"Cash"})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Opening Balance"}),c.jsx("input",{type:"number",placeholder:"0.00",className:"w-full px-4 py-2 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-emerald-500",value:g.openingBalance,onChange:_=>y({...g,openingBalance:parseFloat(_.target.value)||0})})]})]}),c.jsxs("div",{className:"p-6 bg-gray-50 rounded-b-2xl flex gap-3",children:[c.jsx(Je,{onClick:()=>f(!1),variant:"ghost",disabled:n.isPending,children:"Cancel"}),c.jsx(Je,{onClick:v,variant:"primary",size:"md",className:"flex-1",disabled:n.isPending||!g.name,children:n.isPending?"Creating...":"Create Account"})]})]})]})]})},tle=()=>{const e=Nt(),t=Le();Vr();const{searchQuery:r}=Ya(),{data:n}=Gs(),a=(n==null?void 0:n.recordsPerPage)||Yt,[s,l]=j.useState("All Time"),[u,f]=j.useState({from:"",to:""}),[h,m]=j.useState("All"),[g,y]=j.useState("all"),[v,w]=j.useState(1),{data:x=[]}=zi(),_=j.useMemo(()=>{if(g!=="all")return g==="admins"?x.filter(I=>I.role===ft.ADMIN).map(I=>I.id):g==="employees"?x.filter(I=>Bn(I.role)).map(I=>I.id):[g]},[g,x]),{data:N,isPending:O}=G9(v,a,{type:h==="All"?void 0:h,from:u.from,to:u.to,search:r,createdByIds:_}),E=(N==null?void 0:N.data)??[],C=(N==null?void 0:N.count)??0,T=Math.max(1,Math.ceil(C/a)),{data:k=[]}=Qp(),{data:M=[]}=Hp(),{data:R=[]}=Vs();lF(),j.useEffect(()=>{w(1)},[r,h,s,u.from,u.to,g]);const L=I=>{w(1),m(I)},V=I=>{w(1),l(I),I!=="Custom"&&f({from:"",to:""})},G=I=>{w(1),f(I)},K=I=>{w(1),y(I)},fe=j.useMemo(()=>new Map(x.map(I=>[I.id,I])),[x]),ge=I=>{if(s==="All Time")return!0;const D=new Date(I),z=new Date;if(s==="Today")return D.toDateString()===z.toDateString();if(s==="This Week"){const Y=z.getDate()-z.getDay(),q=Y+6,pe=new Date(new Date().setDate(Y)),ve=new Date(new Date().setDate(q));return D>=pe&&D<=ve}return s==="This Month"?D.getMonth()===z.getMonth()&&D.getFullYear()===z.getFullYear():s==="This Year"?D.getFullYear()===z.getFullYear():s==="Custom"?!u.from||!u.to?!0:D>=new Date(u.from)&&D<=new Date(u.to):!0},he=I=>{var z,Y;if(!((z=I.createdBy)!=null&&z.trim()))return null;const D=fe.get(I.createdBy);if(D!=null&&D.name)return D.name;if((Y=I.history)!=null&&Y.created){const q=I.history.created.match(/Created by (.+?) on/);if(q)return q[1]}return null},B=(I,D)=>{if(D&&D.contactName)return{name:D.contactName,type:D.contactType||"Customer"};if(!I)return null;const z=t.getQueryData(["customer",I]);if(z)return{name:z.name,type:"Customer"};const Y=t.getQueryData(["vendor",I]);return Y?{name:Y.name,type:"Vendor"}:null},Q=j.useMemo(()=>{let I=E.filter(D=>ge(D.date)).filter(D=>h==="All"||D.type===h);if(r.trim()){const D=r.toLowerCase();I=I.filter(z=>{var ve,me;const Y=z.contactId?B(z.contactId):null,q=he(z),pe=((ve=R.find(Ee=>Ee.id===z.category))==null?void 0:ve.name)||z.category||"";return z.description.toLowerCase().includes(D)||pe.toLowerCase().includes(D)||z.type.toLowerCase().includes(D)||(Y==null?void 0:Y.name.toLowerCase().includes(D))||((me=q==null?void 0:q.toLowerCase)==null?void 0:me.call(q).includes(D))||we(z.amount).includes(D)})}return I},[E,s,u,h,r,R,x]),ie=(I,D)=>{try{const z=I&&I.toString().length>10?I:D||I||"",Y=new Date(z),q="Asia/Dhaka",pe=Y.toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric",timeZone:q}),ve=Y.toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:q});return{date:pe,time:ve}}catch{return{date:I||D||"",time:""}}},ue=I=>{if(I.referenceId){if(k.some(Y=>Y.id===I.referenceId)){e(`/orders/${I.referenceId}`);return}if(M.some(Y=>Y.id===I.referenceId)){e(`/bills/${I.referenceId}`);return}}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-bold text-gray-900 tracking-tight",children:"Financial Transactions"})}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx(Je,{onClick:()=>e("/transactions/new/income"),variant:"primary",size:"md",icon:ne.Plus,children:"Income"}),c.jsx(Je,{onClick:()=>e("/transactions/new/expense"),variant:"danger",size:"md",icon:ne.Minus,children:"Expense"})]})]}),c.jsx(kd,{title:"Transactions",filterRange:s,setFilterRange:V,customDates:u,setCustomDates:G,statusTab:h,setStatusTab:L,statusOptions:["Income","Expense","Transfer"]}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:c.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[c.jsx("label",{className:"text-sm font-bold text-gray-700",children:"Created By:"}),c.jsxs("select",{value:g,onChange:I=>K(I.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"all",children:"All Users"}),x.some(I=>I.role===ft.ADMIN)&&c.jsx("option",{value:"admins",children:"All Admins"}),x.some(I=>Bn(I.role))&&c.jsx("option",{value:"employees",children:"All Employees"}),c.jsx("optgroup",{label:"Specific Users",children:x.map(I=>c.jsxs("option",{value:I.id,children:[I.name," ",I.role===ft.ADMIN?"(Admin)":"(Employee)"]},I.id))})]})]})}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Date"}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Type"}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Contact"}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:c.jsxs(c.Fragment,{children:["Category ",c.jsx("br",{})," Notes"]})}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-right",children:"Amount"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:O?c.jsx(qp,{columns:5,rows:8}):Q.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-6 py-16 text-center text-gray-400 italic font-medium",children:"No transactions found."})}):Q.map(I=>{var me;const D=I.contactId?B(I.contactId,I):null,z=he(I),Y=I.referenceId&&(k.some(Ee=>Ee.id===I.referenceId)||M.some(Ee=>Ee.id===I.referenceId)),q=!!I.referenceId,{date:pe,time:ve}=ie(I.date,I.createdAt);return c.jsxs("tr",{onClick:()=>ue(I),className:`hover:bg-gray-50 transition-all group ${Y?"cursor-pointer":""}`,children:[c.jsx("td",{className:"px-6 py-5 text-sm font-bold text-gray-700",children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-bold text-gray-900",children:pe}),c.jsx("span",{className:"text-[11px] text-gray-400 font-medium",children:ve})]})}),c.jsx("td",{className:"px-6 py-5",children:c.jsx("span",{className:`px-2.5 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest ${I.type==="Income"?"bg-[#ebf4ff]":I.type==="Expense"?"bg-red-50 text-red-600":"bg-[#e6f0ff]"}`,children:I.type})}),c.jsx("td",{className:"px-6 py-5",children:q?D?c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-sm font-bold text-gray-900",children:D.name}),c.jsx("span",{className:"text-[9px] text-gray-400 uppercase font-bold tracking-widest",children:D.type})]}):c.jsx("span",{className:"text-gray-300 font-bold text-xs",children:""}):z?c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-sm font-bold text-gray-900",children:z}),c.jsx("span",{className:"text-[9px] text-gray-400 uppercase font-bold tracking-widest",children:"Created By"})]}):c.jsx("span",{className:"text-gray-300 font-bold text-xs",children:""})}),c.jsx("td",{className:"px-6 py-5",children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("p",{className:"text-sm font-bold text-gray-800",children:((me=R.find(Ee=>Ee.id===I.category))==null?void 0:me.name)||I.category}),c.jsx("p",{className:"text-xs text-gray-400 italic max-w-xs truncate",children:I.description})]})}),c.jsx("td",{className:"px-6 py-5 text-right",children:c.jsxs("span",{className:`font-black text-base ${I.type==="Income"?"text-emerald-600":I.type==="Expense"?"text-red-600":"text-black"}`,children:[I.type==="Income"?"+":I.type==="Expense"?"-":"",we(I.amount)]})})]},I.id)})})]})})}),c.jsx(su,{page:v,totalPages:T,onPageChange:I=>w(I),disabled:O})]})},rle=()=>{var N;const{type:e}=Kn(),t=Nt(),r=Se.currentUser,n=e==="income",{data:a=[]}=Hs(),{data:s}=Gs(),{data:l=[]}=zD(),{data:u=[]}=Vs(),f=uf(),h=cf(),m=Vr(),g=j.useMemo(()=>u.filter(O=>O.type===(n?"Income":"Expense")),[u,n]),[y,v]=j.useState({date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!1}),paymentMethod:(s==null?void 0:s.paymentMethod)||"Cash",accountId:(s==null?void 0:s.accountId)||((N=a[0])==null?void 0:N.id)||"",amount:0,description:"",category:n?(s==null?void 0:s.incomeCategoryId)||"":(s==null?void 0:s.expenseCategoryId)||"",attachmentName:"",attachmentUrl:""}),w=O=>{var C;const E=(C=O.target.files)==null?void 0:C[0];if(E){const T=new FileReader;T.onload=()=>{v({...y,attachmentName:E.name,attachmentUrl:T.result})},T.readAsDataURL(E)}},x=f.isPending||h.isPending,_=async()=>{if(y.amount<=0){m.warning("Amount must be greater than 0");return}if(!y.accountId){m.warning("Please select an account");return}if(!y.category){m.warning("Please select a category");return}if(!(r!=null&&r.id)){m.warning("User session expired. Please log in again.");return}try{if(!n){const G=a.find(K=>K.id===y.accountId);if(G&&G.currentBalance<y.amount){m.error(`Insufficient balance. Account has ${we(G.currentBalance)} but transaction requires ${we(y.amount)}`);return}}const E=new Date(y.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),C=y.time,[T,k]=y.time.split(":").map(Number),M=new Date(y.date);M.setHours(T,k,0,0);const R=M.toISOString(),L={type:n?"Income":"Expense",date:R,paymentMethod:y.paymentMethod,accountId:y.accountId,amount:y.amount,description:y.description,category:y.category,attachmentName:y.attachmentName,attachmentUrl:y.attachmentUrl,createdBy:r.id,history:{created:`Created by ${r.name} on ${E}, at ${C}`}};await f.mutateAsync(L);const V=a.find(G=>G.id===y.accountId);if(V){const G=n?V.currentBalance+y.amount:V.currentBalance-y.amount;await h.mutateAsync({id:y.accountId,updates:{currentBalance:G}})}t("/transactions")}catch(O){console.error("Failed to save transaction:",O),m.error("Failed to save transaction: "+(O instanceof Error?O.message:"Unknown error"))}};return c.jsxs("div",{className:"max-w-3xl mx-auto animate-in slide-in-from-bottom-4 duration-500",children:[c.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[c.jsx("div",{children:c.jsxs("h2",{className:"md:text-2xl text-xl font-black text-gray-900 tracking-tight",children:["Record ",n?"Income":"Expense"]})}),c.jsx("button",{onClick:()=>t(-1),className:"p-3 text-gray-400 hover:text-gray-600 bg-white border border-gray-100 rounded-lg shadow-sm",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l18 18"})})})]}),c.jsxs("div",{className:"bg-white p-8 lg:p-12 rounded-lg border border-gray-100 shadow-xl shadow-gray-200/20 space-y-10",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Amount (BDT)"}),c.jsx("input",{type:"number",className:`w-full text-xl font-black px-6 py-4 bg-gray-50 border-2 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-xl transition-all outline-none ${n?"${theme.colors.primary[600]}":"text-red-600"}`,value:y.amount,onChange:O=>v({...y,amount:parseFloat(O.target.value)||0}),placeholder:"0.00"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Date"}),c.jsx("input",{type:"date",className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg text-lg font-bold",value:y.date,onChange:O=>v({...y,date:O.target.value})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Time"}),c.jsx("input",{type:"time",className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg text-lg font-bold",value:y.time,onChange:O=>v({...y,time:O.target.value})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Connected Account"}),c.jsx("select",{className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-xl font-bold",value:y.accountId,onChange:O=>v({...y,accountId:O.target.value}),children:a.map(O=>c.jsx("option",{value:O.id,children:O.name},O.id))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Category"}),c.jsxs("select",{className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-xl font-bold",value:y.category,onChange:O=>v({...y,category:O.target.value}),children:[c.jsx("option",{value:"",children:"Select a category"}),g.map(O=>c.jsx("option",{value:O.id,children:O.name},O.id))]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Payment Method"}),c.jsx("select",{className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-xl font-bold",value:y.paymentMethod,onChange:O=>v({...y,paymentMethod:O.target.value}),children:l.map(O=>c.jsx("option",{value:O.name,children:O.name},O.id))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Attachment"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"file",className:"hidden",id:"file-upload",onChange:w}),c.jsx("label",{htmlFor:"file-upload",className:"w-full px-6 py-4 bg-gray-50 border-transparent hover:bg-gray-100 rounded-lg font-bold pl-14 flex items-center cursor-pointer transition-colors",children:y.attachmentName||"Choose file to upload"}),c.jsx("div",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-gray-400",children:ne.Print})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Description"}),c.jsx("textarea",{className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg font-medium h-32 outline-none",placeholder:"What was this transaction for?",value:y.description,onChange:O=>v({...y,description:O.target.value})})]}),c.jsxs(Je,{onClick:_,variant:n?"primary":"danger",size:"lg",className:"w-full",disabled:x,loading:x,children:["Finalize ",n?"Income":"Expense"]})]})]})},nle=()=>{Nt();const e=Le(),t=Se.currentUser,{data:r=[]}=Hs(),n=uf(),a=cf(),s=Vr(),[l,u]=j.useState({date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!1}),fromAccountId:"",toAccountId:"",amount:0,description:""}),f=async()=>{if(!l.amount||!l.fromAccountId||!l.toAccountId){s.warning("Please fill in all fields.");return}if(l.fromAccountId===l.toAccountId){s.warning("Cannot transfer to the same account.");return}const h=r.find(g=>g.id===l.fromAccountId),m=r.find(g=>g.id===l.toAccountId);if(h&&m){if(h.currentBalance<l.amount){s.warning("Insufficient balance in source account.");return}try{const[g,y]=l.time.split(":").map(Number),v=new Date(l.date);v.setHours(g,y,0,0);const w=v.toISOString();await Promise.all([n.mutateAsync({type:"Transfer",date:w,accountId:l.fromAccountId,toAccountId:l.toAccountId,amount:l.amount,description:l.description||`Transfer from ${h.name} to ${m.name}`,category:"Transfer",paymentMethod:"Internal Transfer",createdBy:t.id}),Promise.all([a.mutateAsync({id:l.fromAccountId,updates:{currentBalance:h.currentBalance-l.amount}}),a.mutateAsync({id:l.toAccountId,updates:{currentBalance:m.currentBalance+l.amount}})])]),s.success("Transfer completed successfully"),e.invalidateQueries({queryKey:["accounts"]}),u({date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit",hour12:!1}),fromAccountId:"",toAccountId:"",amount:0,description:""})}catch(g){console.error("Transfer failed:",g),s.error("Failed to complete transfer: "+(g instanceof Error?g.message:"Unknown error"))}}};return c.jsxs("div",{className:"max-w-3xl mx-auto animate-in slide-in-from-bottom-4 duration-500",children:[c.jsx("div",{className:"mb-8 flex items-center justify-between",children:c.jsxs("div",{children:[c.jsx("h2",{className:"md:text-2xl text-xl font-black text-gray-900 tracking-tight",children:"Fund Transfer"}),c.jsx("p",{className:"text-gray-500 font-medium",children:"Move balances between your business accounts"})]})}),c.jsxs("div",{className:"bg-white p-8 lg:p-12 rounded-lg border border-gray-100 shadow-xl space-y-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Amount to Transfer (BDT)"}),c.jsx("input",{type:"number",className:`w-full text-xl font-black px-6 py-4 bg-[#ebf4ff] border-2 border-transparent focus:border-[#3c5a82] rounded-xl transition-all outline-none ${se.colors.primary[600]}`,value:l.amount,onChange:h=>u({...l,amount:parseFloat(h.target.value)||0}),placeholder:"0.00"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"From Account (Source)"}),c.jsxs("select",{className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg font-bold",value:l.fromAccountId,onChange:h=>u({...l,fromAccountId:h.target.value}),children:[c.jsx("option",{value:"",children:"Select an account"}),r.map(h=>c.jsxs("option",{value:h.id,children:[h.name," (",we(h.currentBalance),")"]},h.id))]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"To Account (Destination)"}),c.jsxs("select",{className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg font-bold",value:l.toAccountId,onChange:h=>u({...l,toAccountId:h.target.value}),children:[c.jsx("option",{value:"",children:"Select an account"}),r.map(h=>c.jsxs("option",{value:h.id,children:[h.name," (",we(h.currentBalance),")"]},h.id))]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Transfer Date"}),c.jsx("input",{type:"date",className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg text-lg font-bold",value:l.date,onChange:h=>u({...l,date:h.target.value})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Transfer Time"}),c.jsx("input",{type:"time",className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg text-lg font-bold",value:l.time,onChange:h=>u({...l,time:h.target.value})})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Memo / Description"}),c.jsx("textarea",{className:"w-full px-6 py-4 bg-gray-50 border-transparent focus:border-[#3c5a82] focus:bg-white rounded-lg font-medium h-32 outline-none",placeholder:"Reason for transfer...",value:l.description,onChange:h=>u({...l,description:h.target.value})})]}),c.jsx(Je,{onClick:f,variant:"primary",size:"lg",className:"w-full",disabled:n.isPending||a.isPending,children:n.isPending||a.isPending?"Processing Transfer...":"Execute Transfer"})]})]})},ale=()=>{const e=Nt();Le();const t=Vr(),{searchQuery:r}=Ya(),{user:n}=da(),{data:a}=Gs(),s=(a==null?void 0:a.recordsPerPage)||Yt,[l,u]=j.useState(1),{data:f=[]}=zi(),[h,m]=j.useState("all"),g=j.useMemo(()=>{if(h!=="all")return h==="admins"?f.filter(L=>L.role===ft.ADMIN).map(L=>L.id):h==="employees"?f.filter(L=>Bn(L.role)).map(L=>L.id):[h]},[h,f]),{data:y,isFetching:v}=Y9(l,s,r,void 0,g),w=(y==null?void 0:y.data)??[],x=(y==null?void 0:y.count)??0,_=Math.max(1,Math.ceil(x/s)),N=pF(),O=(n==null?void 0:n.role)===ft.ADMIN,[E,C]=j.useState("All Time"),[T,k]=j.useState({from:"",to:""});j.useEffect(()=>{u(1)},[r,h]);const M=w,R=async L=>{if(confirm("Are you sure you want to delete this product?"))try{await N.mutateAsync(L),t.success("Product deleted successfully")}catch(V){console.error("Failed to delete product:",V),t.error("Failed to delete product")}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-bold text-gray-900",children:"Products Catalog"})}),O&&c.jsx(Je,{onClick:()=>e("/products/new"),variant:"primary",size:"md",icon:ne.Plus,children:"Add Product"})]}),c.jsx(Fp,{columns:[{key:"name",label:"Name",render:(L,V)=>c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("img",{src:V.image||"https://via.placeholder.com/100",alt:V.name,className:"w-12 h-12 rounded-full object-cover border border-gray-100 shadow-sm"}),c.jsx("div",{children:c.jsx("p",{className:"font-bold text-gray-900",children:V.name})})]})},{key:"category",label:"Category",render:L=>c.jsx("span",{className:"px-2.5 py-1 bg-[#ebf4ff] rounded-lg text-[10px] font-black uppercase tracking-widest",children:L})},{key:"salePrice",label:O?c.jsxs(c.Fragment,{children:["Sale Price",c.jsx("br",{}),"Purchase Price"]}):c.jsx(c.Fragment,{children:"Sale Price"}),render:(L,V)=>c.jsxs("div",{className:"flex flex-col gap-0.5",children:[c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("span",{className:"text-sm font-bold",children:we(V.salePrice)})}),O&&c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("span",{className:"text-[11px] font-bold text-gray-600",children:we(V.purchasePrice)})})]})},...O?[{key:"id",label:"Actions",align:"right",render:L=>c.jsxs("div",{className:"justify-end flex items-center gap-2",children:[c.jsx(Us,{icon:ne.Edit,variant:"primary",title:"Edit",onClick:V=>{V.stopPropagation(),e(`/products/edit/${L}`)}}),c.jsx(Us,{icon:ne.Delete,variant:"danger",title:"Delete",onClick:V=>{V.stopPropagation(),R(L)}})]})}]:[]],data:M,loading:v,emptyMessage:"No products found"}),c.jsx(su,{page:l,totalPages:_,onPageChange:L=>u(L),disabled:v})]})},pT=()=>{const{id:e}=Kn(),t=Nt(),r=!!e,n=Se.currentUser;if(!n)return c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Not Authenticated"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Please log in first."}),c.jsx(Je,{onClick:()=>t("/login"),variant:"primary",children:"Back to Login"})]});if(r&&Bn(n.role))return c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Employees cannot edit products. Contact an administrator for assistance."}),c.jsx(Je,{onClick:()=>t("/products"),variant:"primary",children:"Back to Products"})]});const{data:a}=X9(r?e:void 0),{data:s=[],isPending:l}=Vs("Product"),u=hF(),f=mF(),[h,m]=j.useState({name:"",category:"",image:"",salePrice:0,purchasePrice:0}),[g,y]=j.useState(!1),[v,w]=j.useState(null);Xe.useEffect(()=>{a&&m(a)},[a]);const x=N=>{var E;const O=(E=N.target.files)==null?void 0:E[0];if(O){const C=new FileReader;C.onload=()=>{m({...h,image:C.result})},C.readAsDataURL(O)}},_=async()=>{if(!h.name||!h.category){w("Name and category are required");return}y(!0),w(null);try{const N={name:h.name||"",category:h.category||"",image:h.image||"https://picsum.photos/200/200?random="+Math.random(),salePrice:h.salePrice||0,purchasePrice:h.purchasePrice||0};r?(await f.mutateAsync({id:e,updates:N}),t("/products")):u.mutateAsync(N).then(()=>{t("/products")},O=>{y(!1),w(O instanceof Error?O.message:"Failed to create product")})}catch(N){console.error("Failed to save product:",N),w(N instanceof Error?N.message:"Failed to save product"),y(!1)}};return c.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:r?"Edit Product":"Add Product"}),c.jsx("button",{onClick:()=>t("/products"),className:"px-4 py-2 border rounded-xl text-gray-500 font-bold bg-white hover:bg-gray-50",children:"Cancel"})]}),c.jsxs("div",{className:"bg-white p-8 rounded-lg border border-gray-100 shadow-sm space-y-6",children:[c.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[c.jsxs("div",{className:"flex-1 space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Product Name"}),c.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-[#3c5a82]",value:h.name,onChange:N=>m({...h,name:N.target.value}),placeholder:"e.g. Cotton Polo T-Shirt"})]}),c.jsxs("div",{className:"flex-1 space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Category"}),c.jsxs("select",{className:"w-full px-4 py-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-emerald-500",value:h.category,onChange:N=>m({...h,category:N.target.value}),disabled:l,children:[c.jsx("option",{value:"",children:l?"Loading...":"Select Category..."}),s.map(N=>c.jsx("option",{value:N.name,children:N.name},N.id))]})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Product Image"}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsx("div",{className:"w-24 h-24 rounded-lg border border-dashed border-gray-300 flex items-center justify-center overflow-hidden bg-gray-50",children:h.image?c.jsx("img",{src:h.image,className:"w-full h-full object-cover"}):c.jsx("span",{className:"text-gray-300 text-xs text-center p-2",children:"No image"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("input",{type:"file",id:"product-image",className:"hidden",onChange:x}),c.jsx("label",{htmlFor:"product-image",className:"inline-block px-6 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold rounded-xl cursor-pointer transition-all",children:"Upload File"}),c.jsx("p",{className:"text-[10px] text-gray-400 mt-2 font-medium",children:"Recommended size: 500x500px. JPG, PNG supported."})]})]})]}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[c.jsxs("div",{className:"flex-1 space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Sale Price (BDT)"}),c.jsx("input",{type:"number",className:"w-full px-4 py-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-[#3c5a82] font-bold",value:h.salePrice,onChange:N=>m({...h,salePrice:parseFloat(N.target.value)||0})})]}),c.jsxs("div",{className:"flex-1 space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Purchase Price (BDT)"}),c.jsx("input",{type:"number",className:"w-full px-4 py-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-[#3c5a82] text-gray-600 font-bold",value:h.purchasePrice,onChange:N=>m({...h,purchasePrice:parseFloat(N.target.value)||0})})]})]}),c.jsxs("div",{className:"pt-6 space-y-4",children:[v&&c.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm font-bold text-red-600",children:v instanceof Error?v.message:String(v)})}),c.jsx(Je,{onClick:_,variant:"primary",size:"lg",className:"w-full",disabled:g,children:g?"Saving...":r?"Update Product Item":"Create Product Item"})]})]})]})},ile=()=>{const e=Nt(),{user:t}=da(),{searchQuery:r}=Ya(),{data:n=[],isPending:a}=zi(),s=(t==null?void 0:t.role)===ft.ADMIN,l=j.useMemo(()=>{if(!r.trim())return n;const u=r.toLowerCase();return n.filter(f=>f.name.toLowerCase().includes(u)||f.phone.includes(u)||f.role.toLowerCase().includes(u))},[n,r]);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Application Users"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Manage staff accounts and system permissions"})]}),s&&c.jsx(Je,{onClick:()=>e("/users/new"),variant:"primary",size:"md",icon:ne.Plus,children:"Add User"})]}),c.jsx(Fp,{columns:[{key:"name",label:"User",render:(u,f)=>c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("img",{src:f.image||"https://picsum.photos/100/100?random="+f.id,className:"w-10 h-10 rounded-full object-cover border"}),c.jsx("span",{className:"font-bold text-gray-900",children:f.name})]})},{key:"role",label:"Role",render:u=>c.jsx("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase tracking-widest ${u===ft.ADMIN?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:u})},{key:"phone",label:"Contact",render:u=>c.jsx("span",{className:"text-sm text-gray-600",children:u})},{key:"id",label:"Actions",align:"right",render:u=>c.jsx(Us,{icon:ne.Edit,variant:"primary",title:"Edit",onClick:f=>{f.stopPropagation(),e(`/users/edit/${u}`)}})}],data:l,onRowClick:u=>e(`/users/${u.id}`),emptyMessage:"No users found",loading:a})]})},gT=()=>{const{id:e}=Kn(),t=Nt(),r=!!e,{data:n,isPending:a,error:s}=$D(r?e:void 0),l=cF(),u=VD(),f=GD(),h=Vr(),[m,g]=j.useState(!1),[y,v]=j.useState(!1),[w,x]=j.useState(!1),[_,N]=j.useState({name:"",phone:"",password:"",role:ft.EMPLOYEE,image:""});Xe.useEffect(()=>{n&&N(n)},[n]);const O=localStorage.getItem("currentUser"),E=O?JSON.parse(O):null,C=(E==null?void 0:E.role)===ft.ADMIN,T=(E==null?void 0:E.id)===e,k=a,M=V=>{var K;const G=(K=V.target.files)==null?void 0:K[0];if(G){const fe=new FileReader;fe.onload=()=>{N({..._,image:fe.result})},fe.readAsDataURL(G)}},R=async()=>{if(!_.name||!_.phone||C&&!r&&!_.password){h.warning("Please fill mandatory fields (Name, Phone, Password)");return}g(!0);try{if(r&&e){const V={name:_.name,phone:_.phone,image:_.image};if(C&&(_.password&&(V.password=_.password),_.role&&(V.role=_.role)),await u.mutateAsync({id:e,updates:V}),T&&E){const G={...E,...V};localStorage.setItem("currentUser",JSON.stringify(G))}}else{if(!C){h.error("Only admins can add users"),g(!1);return}await l.mutateAsync({name:_.name||"",phone:_.phone||"",password:_.password||"",role:_.role||ft.EMPLOYEE,image:_.image||""})}h.success(r?"User updated successfully!":"User created successfully!"),t("/users")}catch(V){console.error("Failed to save user:",V);const G=Cd(V);h.error("Failed to save user: "+G)}finally{g(!1)}},L=async()=>{if(e){g(!0);try{await f.mutateAsync(e),h.success("User deleted successfully!"),t("/users")}catch(V){console.error("Failed to delete user:",V);const G=Cd(V);h.error("Failed to delete user: "+G)}finally{g(!1),x(!1)}}};return c.jsxs("div",{className:"max-w-2xl mx-auto space-y-6 pb-20",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"md:text-2xl text-xl font-bold text-gray-900",children:r?"Edit Profile":"Add User"}),c.jsx("button",{onClick:()=>t("/users"),className:"px-4 py-2 border rounded-xl font-bold bg-white text-gray-500 hover:bg-gray-50",children:"Cancel"})]}),r&&k&&c.jsx("div",{className:"bg-white p-8 rounded-lg border border-gray-100 shadow-sm text-center text-gray-500",children:"Loading user details..."}),s&&c.jsx("div",{className:"bg-red-50 p-4 rounded-lg border border-red-100 text-red-700",children:s.message||"User not found"}),(!r||!k)&&c.jsxs("div",{className:"bg-white p-8 rounded-lg border border-gray-100 shadow-sm space-y-6",children:[c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-6 p-6 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"w-20 h-20 rounded-[50%] overflow-hidden bg-white border",children:c.jsx("img",{src:_.image||`https://ui-avatars.com/api/?name=${_.name||"User"}&background=10b981&color=fff`,className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase mb-2",children:"Profile Photo"}),c.jsx("input",{type:"file",id:"user-pfp",className:"hidden",onChange:M}),c.jsx("label",{htmlFor:"user-pfp",className:`cursor-pointer px-4 py-2 ${se.colors.primary[600]} text-white text-xs font-bold rounded-lg hover:${se.colors.primary[700]}`,children:"Upload Picture"})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Full Name"}),c.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-[#3c5a82]",value:_.name,onChange:V=>N({..._,name:V.target.value})})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Phone Number"}),c.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-[#3c5a82]",value:_.phone,onChange:V=>N({..._,phone:V.target.value})})]}),C&&c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Password (Admin Only Access)"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:y?"text":"password",className:"w-full px-4 py-3 pr-10 bg-purple-50 border border-purple-100 rounded-xl focus:ring-2 focus:ring-purple-500",value:_.password,onChange:V=>N({..._,password:V.target.value}),placeholder:r?"Leave blank to keep current password":"Secure system password"}),c.jsx("button",{type:"button",onClick:()=>v(!y),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-purple-500 hover:text-purple-700",children:y?c.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:[c.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),c.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-14-14zM10 4C6.687 4 3.89 5.945 2.58 8.808c-.35.915-.35 2.468 0 3.384.74 1.94 2.08 3.61 3.756 4.7l1.83-1.83A3.992 3.992 0 016 10a4 4 0 016.956-3.533l1.416-1.416C14.225 4.523 12.15 4 10 4zm7.42 3.192c.35.915.35 2.468 0 3.384C15.26 13.055 12.463 15 9 15a6.966 6.966 0 01-3.15-.744l2.119-2.119A3.992 3.992 0 0114 10c0-.901-.281-1.735-.743-2.434l2.163-2.174z",clipRule:"evenodd"})})})]}),c.jsx("p",{className:"text-[10px] text-purple-400 font-medium",children:"Only administrators can set or change passwords."})]}),C&&c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"System Role"}),c.jsxs("select",{className:"w-full px-4 py-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-[#3c5a82]",value:_.role,onChange:V=>N({..._,role:V.target.value}),children:[c.jsx("option",{value:ft.EMPLOYEE,children:"Employee"}),c.jsx("option",{value:ft.EMPLOYEE1,children:"Employee1"}),c.jsx("option",{value:ft.ADMIN,children:"Administrator"})]})]})]}),c.jsxs("div",{className:"pt-6 space-y-3",children:[c.jsx(Je,{onClick:R,variant:"primary",size:"lg",className:"w-full",disabled:m,children:m?"Saving...":"Save Details"}),r&&C&&c.jsx("button",{onClick:()=>x(!0),disabled:m,className:"w-full px-4 py-3 bg-red-50 border border-red-200 text-red-600 rounded-xl font-bold hover:bg-red-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Delete User"})]})]}),w&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-sm w-full p-6 space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Delete User?"}),c.jsxs("p",{className:"text-gray-600 text-sm",children:["Are you sure you want to delete ",c.jsx("strong",{children:_.name}),"? This action cannot be undone."]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>x(!1),disabled:m,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg font-bold text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),c.jsx("button",{onClick:L,disabled:m,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 disabled:opacity-50 flex items-center justify-center gap-2",children:m?"Deleting...":"Delete"})]})]})})]})},sle=()=>{const{id:e}=Kn(),t=Nt(),r=Se.currentUser,{data:n,isPending:a,error:s}=$D(e),l=GD(),u=VD(),f=Vr(),[h,m]=j.useState(!1),[g,y]=j.useState(!0),[v,w]=j.useState("");if(Xe.useEffect(()=>{console.log("[UserDetails] User data loaded:",{id:n==null?void 0:n.id,name:n==null?void 0:n.name,password:n!=null&&n.password?"(exists)":"(missing)"}),n&&n.password?(console.log("[UserDetails] Setting editedPassword from user.password"),w(n.password)):n&&(console.log("[UserDetails] WARNING: user loaded but password is missing/empty!"),w(""))},[n==null?void 0:n.id,n==null?void 0:n.password]),a)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading user..."});if(s||!n)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:(s==null?void 0:s.message)||"User not found."});const x=r.role===ft.ADMIN||r.id===e,_=r.role===ft.ADMIN,N=async()=>{if(e)try{await l.mutateAsync(e),f.success("User deleted successfully!"),t("/users")}catch(E){console.error("Failed to delete user:",E),f.error("Failed to delete user: "+(E instanceof Error?E.message:"Unknown error"))}finally{m(!1)}},O=async()=>{if(!e||!v.trim()){f.warning("Please enter a password");return}try{await u.mutateAsync({id:e,updates:{password:v}}),f.success("Password updated successfully!")}catch(E){console.error("Failed to update password:",E),f.error("Failed to update password: "+(E instanceof Error?E.message:"Unknown error"))}};return c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>t("/users"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"User Profile"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[x&&c.jsxs("button",{onClick:()=>t(`/users/edit/${n.id}`),className:`px-6 py-2 ${se.colors.primary[600]} text-white rounded-xl font-bold hover:${se.colors.primary[700]} shadow-md flex items-center gap-2`,children:[ne.Edit," Edit Profile"]}),_&&c.jsx("button",{onClick:()=>m(!0),disabled:l.isPending,className:"px-6 py-2 bg-red-50 border border-red-200 text-red-600 rounded-xl font-bold hover:bg-red-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Delete User"})]})]}),c.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsx("div",{className:"h-32 bg-gradient-to-r from-[#0f2f57] to-[#1a3a6e]"}),c.jsxs("div",{className:"px-8 pb-8",children:[c.jsxs("div",{className:"relative flex justify-between items-end -mt-12 mb-8",children:[c.jsx("div",{className:"p-1 bg-white rounded-full shadow-xl",children:c.jsx("img",{src:n.image||"https://picsum.photos/200/200?random="+n.id,className:"w-24 h-24 rounded-full object-cover border-1 border-black"})}),c.jsx("span",{className:`px-4 py-1 rounded-full text-xs font-black uppercase tracking-widest ${n.role===ft.ADMIN?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:n.role})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1",children:"Full Name"}),c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:n.name})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1",children:"Phone Number"}),c.jsx("p",{className:"text-lg font-medium text-gray-700",children:n.phone})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1",children:"Joining Date"}),c.jsx("p",{className:"text-lg font-medium text-gray-700",children:n.createdAt?new Date(n.createdAt).toLocaleDateString("en-BD",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]})]}),c.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg space-y-4",children:[c.jsx("h4",{className:"font-bold text-gray-900",children:"Account Security"}),_?c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:g?"text":"password",value:v,onChange:E=>w(E.target.value),className:"w-full px-4 py-3 pr-10 bg-white border border-purple-300 rounded-lg font-mono text-sm text-gray-700 focus:ring-2 focus:ring-purple-500"}),c.jsx("button",{type:"button",onClick:()=>y(!g),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-purple-600 hover:text-purple-800",children:g?c.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:[c.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),c.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-14-14zM10 4C6.687 4 3.89 5.945 2.58 8.808c-.35.915-.35 2.468 0 3.384.74 1.94 2.08 3.61 3.756 4.7l1.83-1.83A3.992 3.992 0 016 10a4 4 0 016.956-3.533l1.416-1.416C14.225 4.523 12.15 4 10 4zm7.42 3.192c.35.915.35 2.468 0 3.384C15.26 13.055 12.463 15 9 15a6.966 6.966 0 01-3.15-.744l2.119-2.119A3.992 3.992 0 0114 10c0-.901-.281-1.735-.743-2.434l2.163-2.174z",clipRule:"evenodd"})})})]}),c.jsx("button",{onClick:O,disabled:u.isPending||v===n.password,className:"mt-3 w-full px-3 py-2 bg-purple-600 text-white rounded-lg text-sm font-bold hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u.isPending?"Updating...":"Update Password"}),c.jsx("p",{className:"text-[10px] text-purple-600 font-medium mt-2",children:"Admin access only. Edit and save password here."})]})}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Passwords are managed by system administrators. If you need to reset your password, please contact the IT department."}),c.jsxs("div",{className:"flex items-center gap-2 text-emerald-700 text-sm font-bold",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"Active Status Verified"]})]})]})]})]})]}),h&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-sm w-full p-6 space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Delete User?"}),c.jsxs("p",{className:"text-gray-600 text-sm",children:["Are you sure you want to delete ",c.jsx("strong",{children:n.name}),"? This action cannot be undone."]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>m(!1),disabled:l.isPending,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg font-bold text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),c.jsx("button",{onClick:N,disabled:l.isPending,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 disabled:opacity-50 flex items-center justify-center gap-2",children:l.isPending?"Deleting...":"Delete"})]})]})})]})},ole=()=>{const[e,t]=j.useState("company"),[r,n]=j.useState(null),a=Le(),{data:s,isPending:l}=Vp(),{data:u,isPending:f}=Gp(),{data:h,isPending:m}=Wp(),{data:g,isPending:y}=Gs(),{data:v,isPending:w}=l1(),{data:x=[],isPending:_}=Vs(),{data:N=[],isPending:O}=zD(),{data:E=[],isPending:C}=J9(),{data:T=[]}=Hs(),k=gF(),M=yF(),R=vF(),L=bF();xF(),wF();const V=jF(),G=Vr(),[K,fe]=j.useState({name:"",phone:"",email:"",address:"",logo:""}),[ge,he]=j.useState({prefix:"ORD-",nextNumber:1}),[B,Q]=j.useState({steadfast:{baseUrl:"",apiKey:"",secretKey:""},carryBee:{baseUrl:"",clientId:"",clientSecret:"",clientContext:"",storeId:""}}),[ie,ue]=j.useState({title:"Invoice",logoWidth:120,logoHeight:120,footer:""}),[I,D]=j.useState({defaultAccountId:"",defaultPaymentMethod:"",incomeCategoryId:"",expenseCategoryId:"",recordsPerPage:10}),[z,Y]=j.useState({name:"",type:"Income",color:"#10B981",parentId:""}),[q,pe]=j.useState({name:"",description:""}),[ve,me]=j.useState({name:"",shortName:"",description:""}),[Ee,te]=j.useState([]),[_e,De]=j.useState(!1);Xe.useEffect(()=>{s&&fe(s)},[s]),Xe.useEffect(()=>{u&&he(u)},[u]),Xe.useEffect(()=>{h&&ue(h)},[h]),Xe.useEffect(()=>{g&&D(g)},[g]),Xe.useEffect(()=>{v&&Q(v)},[v]),j.useEffect(()=>{let ae=null;const Z=async()=>{const{baseUrl:qe,clientId:Ke,clientSecret:ze,clientContext:be}=B.carryBee,nt=qe==null?void 0:qe.trim(),yt=Ke==null?void 0:Ke.trim(),Ft=ze==null?void 0:ze.trim(),Kt=be==null?void 0:be.trim();if(!nt||!yt||!Ft||!Kt){te([]);return}De(!0);try{const Zt=await w8({baseUrl:nt,clientId:yt,clientSecret:Ft,clientContext:Kt});te(Zt)}catch(Zt){console.error("Failed to fetch CarryBee stores:",Zt),te([])}finally{De(!1)}};return ae=setTimeout(()=>{Z()},700),()=>{ae&&clearTimeout(ae)}},[B.carryBee.baseUrl,B.carryBee.clientId,B.carryBee.clientSecret,B.carryBee.clientContext]);const le=l||f||m||y||w||_||O||C,Fe=async()=>{try{const ae=G.loading("Saving all settings...");V.mutateAsync({company:K,order:ge,invoice:ie,defaults:I,courier:B}).then(()=>{Se.settings.company=K,Se.settings.order=ge,Se.settings.invoice=ie,Se.settings.defaults=I,Se.settings.courier=B,G.update(ae,"Settings saved successfully!","success")}).catch(Z=>{console.error("Failed to save settings:",Z),G.update(ae,"Failed to save settings: "+(Z instanceof Error?Z.message:"Unknown error"),"error")})}catch(ae){console.error("Failed to initiate settings save:",ae),G.error("Failed to save settings: "+(ae instanceof Error?ae.message:"Unknown error"))}},Te=ae=>{var qe;const Z=(qe=ae.target.files)==null?void 0:qe[0];if(Z){const Ke=new FileReader;Ke.onload=()=>{fe({...K,logo:Ke.result})},Ke.readAsDataURL(Z)}},Ze=async()=>{if(!z.name.trim()){G.warning("Please enter a category name");return}const ae={id:crypto.randomUUID(),name:z.name,type:z.type,color:z.color,parentId:z.parentId||void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},Z=a.getQueryData(["categories"]);a.setQueryData(["categories"],(ze=[])=>[...ze,ae]);const qe=G.loading("Adding category..."),Ke={...z};Y({name:"",type:"Income",color:"#10B981",parentId:""}),n(null);try{await k.mutateAsync({name:Ke.name,type:Ke.type,color:Ke.color,parentId:Ke.parentId||void 0}),G.update(qe,"Category added successfully!","success")}catch(ze){console.error("Failed to add category:",ze),a.setQueryData(["categories"],Z),G.update(qe,"Failed to add category: "+(ze instanceof Error?ze.message:"Unknown error"),"error"),n("category"),Y(Ke)}},gt=async ae=>{if(confirm("Are you sure you want to delete this category?"))try{await M.mutateAsync(ae),G.success("Category deleted successfully!")}catch(Z){console.error("Failed to delete category:",Z),G.error("Failed to delete category: "+(Z instanceof Error?Z.message:"Unknown error"))}},qt=async()=>{if(!q.name.trim()){G.warning("Please enter a payment method name");return}const ae={id:crypto.randomUUID(),name:q.name,description:q.description||"",is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},Z=a.getQueryData(["paymentMethods"]);a.setQueryData(["paymentMethods"],(ze=[])=>[...ze,ae]);const qe=G.loading("Adding payment method..."),Ke={...q};pe({name:"",description:""}),n(null);try{await R.mutateAsync({name:Ke.name,description:Ke.description||void 0}),G.update(qe,"Payment method added successfully!","success")}catch(ze){console.error("Failed to add payment method:",ze),a.setQueryData(["paymentMethods"],Z),G.update(qe,"Failed to add payment method: "+(ze instanceof Error?ze.message:"Unknown error"),"error"),n("payment"),pe(Ke)}},tn=async ae=>{if(confirm("Are you sure you want to delete this payment method?"))try{await L.mutateAsync(ae),G.success("Payment method deleted successfully!")}catch(Z){console.error("Failed to delete payment method:",Z),G.error("Failed to delete payment method: "+(Z instanceof Error?Z.message:"Unknown error"))}},rn=[{id:"company",label:"Company",icon:ne.Dashboard},{id:"order",label:"Order & Invoice",icon:ne.Sales},{id:"defaults",label:"Defaults",icon:ne.Settings},{id:"categories",label:"Categories",icon:ne.More},{id:"payments",label:"Payment Methods",icon:ne.Banking},{id:"courier",label:"Courier",icon:ne.Courier}];return c.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[c.jsx(sf,{isLoading:le,message:"Loading settings..."}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-bold text-gray-900",children:"Settings"})}),c.jsx(Je,{onClick:Fe,variant:"primary",size:"md",children:"Save Changes"})]}),c.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[c.jsx("div",{className:"w-full lg:w-64 space-y-1",children:rn.map(ae=>c.jsxs("button",{onClick:()=>t(ae.id),className:`flex items-center gap-3 w-full px-4 py-3 rounded-xl font-medium transition-all ${e===ae.id?`bg-white ${se.colors.primary[600]} shadow-sm border border-gray-100 ring-1 ring-[#ebf4ff]`:"text-gray-500 hover:bg-gray-100"}`,children:[ae.icon,ae.label]},ae.id))}),c.jsxs("div",{className:"flex-1 bg-white p-8 rounded-xl border border-gray-100 shadow-sm min-h-[500px]",children:[e==="company"&&c.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 border-b pb-4",children:"Company Profile"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"md:col-span-2 flex items-center gap-6 p-6 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"w-20 h-20 rounded-xl overflow-hidden bg-white border",children:K.logo&&c.jsx("img",{src:K.logo,className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase",children:"Company Logo"}),c.jsx("input",{type:"file",id:"logo-input",className:"hidden",onChange:Te}),c.jsx(Je,{variant:"primary",size:"sm",onClick:()=>{var ae;return(ae=document.getElementById("logo-input"))==null?void 0:ae.click()},children:"Change Logo"})]})]}),c.jsxs("div",{className:"md:col-span-2 space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Company Name"}),c.jsx("input",{type:"text",value:K.name,onChange:ae=>fe({...K,name:ae.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-[#3c5a82] transition-all"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Phone"}),c.jsx("input",{type:"text",value:K.phone,onChange:ae=>fe({...K,phone:ae.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-[#3c5a82] transition-all"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Email"}),c.jsx("input",{type:"email",value:K.email,onChange:ae=>fe({...K,email:ae.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-[#3c5a82] transition-all"})]}),c.jsxs("div",{className:"md:col-span-2 space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Office Address"}),c.jsx("textarea",{value:K.address,onChange:ae=>fe({...K,address:ae.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl h-24 focus:ring-2 focus:ring-[#3c5a82] transition-all"})]})]})]}),e==="order"&&c.jsxs("div",{className:"space-y-10 animate-in fade-in duration-300",children:[c.jsxs("section",{className:"space-y-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 border-b pb-4",children:"Order Logic"}),c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Order Prefix"}),c.jsx("input",{type:"text",value:ge.prefix,onChange:ae=>he({...ge,prefix:ae.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl font-mono"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Next Number"}),c.jsx("input",{type:"number",value:ge.nextNumber,onChange:ae=>he({...ge,nextNumber:parseInt(ae.target.value)}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]})]})]}),c.jsxs("section",{className:"space-y-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 border-b pb-4",children:"Invoice Settings"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-1 space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Invoice Title"}),c.jsx("input",{type:"text",value:ie.title,onChange:ae=>ue({...ie,title:ae.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Logo Width (px)"}),c.jsx("input",{type:"number",value:ie.logoWidth,onChange:ae=>ue({...ie,logoWidth:parseInt(ae.target.value)}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Logo Height (px)"}),c.jsx("input",{type:"number",value:ie.logoHeight,onChange:ae=>ue({...ie,logoHeight:parseInt(ae.target.value)}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"md:col-span-3 space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Invoice Footer"}),c.jsx("textarea",{value:ie.footer,onChange:ae=>ue({...ie,footer:ae.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl h-24"})]})]})]})]}),e==="defaults"&&c.jsxs("div",{className:"space-y-10 animate-in fade-in duration-300",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 border-b pb-4",children:"System Defaults"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Default Account"}),c.jsxs("select",{value:I.defaultAccountId,onChange:ae=>D({...I,defaultAccountId:ae.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl",children:[c.jsx("option",{value:"",children:"Select an account..."}),T.map(ae=>c.jsx("option",{value:ae.id,children:ae.name},ae.id))]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Default Payment Method"}),c.jsxs("select",{value:I.defaultPaymentMethod,onChange:ae=>D({...I,defaultPaymentMethod:ae.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl",children:[c.jsx("option",{value:"",children:"Select a payment method..."}),N.map(ae=>c.jsx("option",{value:ae.name,children:ae.name},ae.id))]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Default Income Category"}),c.jsxs("select",{value:I.incomeCategoryId,onChange:ae=>D({...I,incomeCategoryId:ae.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl",children:[c.jsx("option",{value:"",children:"Select a category..."}),x.filter(ae=>ae.type==="Income").map(ae=>c.jsx("option",{value:ae.id,children:ae.name},ae.id))]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Default Expense Category"}),c.jsxs("select",{value:I.expenseCategoryId,onChange:ae=>D({...I,expenseCategoryId:ae.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl",children:[c.jsx("option",{value:"",children:"Select a category..."}),x.filter(ae=>ae.type==="Expense").map(ae=>c.jsx("option",{value:ae.id,children:ae.name},ae.id))]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Records Per Page"}),c.jsx("input",{type:"number",value:I.recordsPerPage,onChange:ae=>D({...I,recordsPerPage:parseInt(ae.target.value)}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]})]})]}),e==="categories"&&c.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[c.jsxs("div",{className:"flex items-center justify-between border-b pb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Categories"}),c.jsxs(Je,{onClick:()=>n("category"),variant:"primary",size:"md",children:[ne.Plus," Add"]})]}),_?c.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading categories..."}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.map(ae=>c.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg bg-gray-50/50 hover:shadow-sm transition-all",children:[c.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:ae.color}}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-bold text-gray-800",children:ae.name}),c.jsx("p",{className:"text-[10px] text-gray-400 font-black uppercase tracking-widest",children:ae.type})]}),c.jsx("button",{onClick:()=>gt(ae.id),className:"text-red-500 hover:text-red-700 px-2",children:ne.Delete})]},ae.id)),x.length===0&&c.jsx("div",{className:"col-span-2 text-center py-8 text-gray-500",children:'No categories yet. Click "Add Category" to create one.'})]})]}),e==="payments"&&c.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[c.jsxs("div",{className:"flex items-center justify-between border-b pb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Payment Methods"}),c.jsxs(Je,{onClick:()=>n("payment"),variant:"primary",size:"md",children:[ne.Plus," Add"]})]}),O?c.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading payment methods..."}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[N.map(ae=>c.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50/50 hover:shadow-sm transition-all flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-bold text-gray-800",children:ae.name}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:ae.description||"No description"})]}),c.jsx("button",{onClick:()=>tn(ae.id),className:"text-red-500 hover:text-red-700 px-2",children:ne.Delete})]},ae.id)),N.length===0&&c.jsx("div",{className:"col-span-2 text-center py-8 text-gray-500",children:'No payment methods yet. Click "Add Method" to create one.'})]})]}),e==="courier"&&c.jsxs("div",{className:"space-y-10 animate-in fade-in duration-300",children:[c.jsxs("section",{className:"space-y-6",children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-800 border-b pb-4 flex items-center gap-2",children:[c.jsx("img",{src:"/uploads/steadfast.png",alt:"Steadfast",className:"w-6 h-6 rounded-full"}),c.jsx("span",{className:"",children:"Steadfast"})," Secrets"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Base URL"}),c.jsx("input",{type:"text",value:B.steadfast.baseUrl,onChange:ae=>Q({...B,steadfast:{...B.steadfast,baseUrl:ae.target.value}}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"API Key"}),c.jsx("input",{type:"text",value:B.steadfast.apiKey,onChange:ae=>Q({...B,steadfast:{...B.steadfast,apiKey:ae.target.value}}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Secret Key"}),c.jsx("input",{type:"text",value:B.steadfast.secretKey,onChange:ae=>Q({...B,steadfast:{...B.steadfast,secretKey:ae.target.value}}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]})]})]})]}),c.jsxs("section",{className:"space-y-6",children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-800 border-b pb-4 flex items-center gap-2",children:[c.jsx("img",{src:"/uploads/carrybee.png",alt:"CarryBee",className:"w-6 h-6 rounded-full"}),c.jsx("span",{className:"",children:"CarryBee"})," Secrets"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Base URL"}),c.jsx("input",{type:"text",value:B.carryBee.baseUrl,onChange:ae=>Q({...B,carryBee:{...B.carryBee,baseUrl:ae.target.value}}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Client ID"}),c.jsx("input",{type:"text",value:B.carryBee.clientId,onChange:ae=>Q({...B,carryBee:{...B.carryBee,clientId:ae.target.value}}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Client Secret"}),c.jsx("input",{type:"text",value:B.carryBee.clientSecret,onChange:ae=>Q({...B,carryBee:{...B.carryBee,clientSecret:ae.target.value}}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Client Context"}),c.jsx("input",{type:"text",value:B.carryBee.clientContext,onChange:ae=>Q({...B,carryBee:{...B.carryBee,clientContext:ae.target.value}}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Store ID"}),c.jsxs("select",{value:B.carryBee.storeId,onChange:ae=>Q({...B,carryBee:{...B.carryBee,storeId:ae.target.value}}),disabled:_e||Ee.length===0,className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("option",{value:"",children:_e?"Loading stores...":Ee.length===0?"Fill CarryBee credentials first":"Select Store"}),Ee.map(ae=>c.jsx("option",{value:ae.id,children:ae.name},ae.id))]})]})]})]})]})]})]})]}),r==="category"&&c.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[c.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm",onClick:()=>n(null)}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md relative z-10 p-8 space-y-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Add Category"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Name"}),c.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-50 border rounded-xl",value:z.name,onChange:ae=>Y({...z,name:ae.target.value})})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Type"}),c.jsxs("select",{className:"w-full px-4 py-3 bg-gray-50 border rounded-xl",value:z.type,onChange:ae=>Y({...z,type:ae.target.value}),children:[c.jsx("option",{value:"Income",children:"Income"}),c.jsx("option",{value:"Expense",children:"Expense"}),c.jsx("option",{value:"Product",children:"Product"})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Color"}),c.jsx("input",{type:"color",className:"w-full h-12 bg-gray-50 border rounded-xl cursor-pointer",value:z.color,onChange:ae=>Y({...z,color:ae.target.value})})]})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx(Je,{onClick:()=>n(null),variant:"ghost",className:"flex-1",children:"Cancel"}),c.jsx(Je,{onClick:Ze,variant:"primary",size:"md",className:"flex-1",children:"Add Category"})]})]})]}),r==="payment"&&c.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[c.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm",onClick:()=>n(null)}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md relative z-10 p-8 space-y-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Add Payment Method"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Method Name"}),c.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-50 border rounded-xl",value:q.name,onChange:ae=>pe({...q,name:ae.target.value})})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Description"}),c.jsx("textarea",{className:"w-full px-4 py-3 bg-gray-50 border rounded-xl h-24",value:q.description,onChange:ae=>pe({...q,description:ae.target.value})})]})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx(Je,{onClick:()=>n(null),variant:"ghost",className:"flex-1",children:"Cancel"}),c.jsx(Je,{onClick:qt,variant:"primary",size:"md",className:"flex-1",children:"Add Method"})]})]})]})]})},lle=()=>{const e=Nt(),t=Le(),r=Vr(),{searchQuery:n}=Ya(),{user:a}=da(),{data:s}=Gs(),l=(s==null?void 0:s.recordsPerPage)||Yt,[u,f]=Xe.useState(1),{data:h,isFetching:m,error:g}=K9(u,l,n),y=(h==null?void 0:h.data)??[],v=(h==null?void 0:h.count)??0,w=Math.max(1,Math.ceil(v/l)),x=nF(),_=(a==null?void 0:a.role)===ft.ADMIN;j.useEffect(()=>{f(1)},[n]);const N=y,O=async E=>{if(confirm("Are you sure you want to delete this customer?")){if(Yp(E)){t.setQueryData(["customers"],C=>C&&C.filter(T=>T.id!==E)),r.success("Customer deleted");return}try{await x.mutateAsync(E),r.success("Customer deleted successfully")}catch(C){console.error("Failed to delete customer:",C);const T=Cd(C);T.includes("fk_orders_customer")||T.toLowerCase().includes("orders")?r.error("Cannot delete customer: this customer is referenced by one or more orders. Delete or reassign those orders first."):r.error(`Failed to delete customer: ${T}`)}}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-bold text-gray-900",children:"Customers"})}),c.jsx(Je,{onClick:()=>e("/customers/new"),variant:"primary",size:"md",icon:ne.Plus,children:"New Customer"})]}),g&&c.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("p",{className:"text-red-800",children:[c.jsx("strong",{children:"Error loading customers:"})," ",g instanceof Error?g.message:String(g)]})}),c.jsx(Fp,{columns:[{key:"name",label:"Customer Name",render:(E,C)=>c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-400 flex items-center justify-center font-bold text-white",children:C.name.charAt(0)}),c.jsxs("div",{children:[c.jsx("span",{className:"font-bold text-gray-900 block",children:C.name}),c.jsx("p",{className:"text-xs text-gray-400 truncate max-w-[200px]",children:C.address})]})]})},{key:"phone",label:"Contact",render:E=>c.jsx("span",{className:"text-sm font-medium text-gray-700",children:E})},{key:"totalOrders",label:"Total Orders",align:"center",render:E=>c.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded-lg text-xs font-bold text-gray-600",children:E})},{key:"dueAmount",label:"Due Amount",align:"right",render:E=>c.jsx("span",{className:`font-bold ${E>0?"text-red-500":"text-green-500"}`,children:we(E)})},{key:"id",label:"Actions",align:"right",render:E=>c.jsxs("div",{className:"justify-end flex items-center gap-2",children:[c.jsx(Us,{icon:ne.Edit,variant:"primary",title:"Edit",onClick:C=>{C.stopPropagation(),e(`/customers/edit/${E}`)}}),_&&c.jsx(Us,{icon:ne.Delete,variant:"danger",title:"Delete",onClick:C=>{C.stopPropagation(),O(E)}})]})}],data:N,loading:m,onRowClick:E=>e(`/customers/${E.id}`),emptyMessage:"No customers found"}),c.jsx(su,{page:u,totalPages:w,onPageChange:E=>f(E),disabled:m})]})},yT=()=>{const{id:e}=Kn(),t=Nt(),{isLoading:r}=da(),n=!!e,[a,s]=j.useState({name:"",phone:"",address:""}),[l,u]=j.useState(null);if(r)return c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Loading..."}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Authenticating session..."})]});const{data:f,isPending:h,error:m}=Kp(n?e:void 0),{data:g=[]}=F9(),y=tF(),v=rF(),w=Fn(),x=Le();j.useEffect(()=>{if(f){s({name:f.name,phone:f.phone,address:f.address});return}if(e&&Yp(e)){const N=(g||[]).find(O=>O.id===e);N&&s({name:N.name,phone:N.phone,address:N.address})}},[f,g,e]);const _=async()=>{if(!a.name||!a.phone){u("Name and phone are required");return}u(null);try{if(n){const N={name:a.name,phone:a.phone,address:a.address};await v.mutateAsync({id:e,updates:N}),t("/customers")}else{const N={name:a.name,phone:a.phone,address:a.address,totalOrders:0,dueAmount:0};try{const O=await y.mutateAsync(N);try{x.setQueryData(["customers"],C=>C?Array.isArray(C)&&C.some(T=>T.id===O.id)?C:[...C,O]:[O])}catch{}const E=w&&w.state||{};if(E.fromOrderForm&&E.redirectPath){const C=`${E.redirectPath}${E.redirectPath.includes("?")?"&":"?"}selectedCustomerId=${O.id}`;t(C)}else t("/customers")}catch(O){console.error("Create customer failed:",O),u(O instanceof Error?O.message:"Failed to create customer")}}}catch(N){console.error(`Failed to ${n?"update":"create"} customer:`,N),u(N instanceof Error?N.message:`Failed to ${n?"update":"create"} customer`)}};return c.jsxs("div",{className:"max-w-2xl mx-auto space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"md:text-2xl text-xl font-black text-gray-900 tracking-tight",children:n?"Edit Customer":"New Customer"}),c.jsx("button",{onClick:()=>t(-1),className:"px-4 py-2 text-gray-500 font-bold hover:bg-gray-100 rounded-xl transition-all",children:"Cancel"})]}),c.jsx("div",{className:"bg-white p-10 rounded-xl border border-gray-100 shadow-xl space-y-8",children:n&&h?c.jsx("div",{className:"text-center text-gray-500",children:"Loading customer..."}):c.jsxs(c.Fragment,{children:[l&&c.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm font-bold text-red-600",children:l instanceof Error?l.message:String(l)})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Full Name"}),c.jsx("input",{type:"text",className:"w-full px-6 py-4 bg-gray-50 border border-gray-200 focus:border-[#3c5a82] focus:bg-white rounded-2xl font-bold transition-all outline-none",value:a.name,onChange:N=>s({...a,name:N.target.value})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Phone Number"}),c.jsx("input",{type:"text",className:"w-full px-6 py-4 bg-gray-50 border border-gray-200 focus:border-[#3c5a82] focus:bg-white rounded-2xl font-bold transition-all outline-none",value:a.phone,onChange:N=>s({...a,phone:N.target.value})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Address"}),c.jsx("textarea",{className:"w-full px-6 py-4 bg-gray-50 border border-gray-200 focus:border-[#3c5a82] focus:bg-white rounded-lg font-medium h-32 transition-all outline-none",value:a.address,onChange:N=>s({...a,address:N.target.value})})]}),c.jsx(Je,{onClick:_,variant:"primary",size:"lg",className:"w-full",disabled:y.isPending||v.isPending,children:y.isPending||v.isPending?n?"Updating...":"Adding...":n?"Update Customer":"Add Customer"})]})})]})},cle=()=>{const{id:e}=Kn(),t=Nt(),[r,n]=j.useState(null),a=Se.currentUser,s=(a==null?void 0:a.role)||null,{data:l}=Kp(e||""),{data:u=[]}=H9(e||""),{data:f}=Gp(),h=Xp(),m=Vr(),{totalRevenue:g,dueAmount:y}=j.useMemo(()=>{const x=u.filter(E=>E.status===Re.COMPLETED),_=u.filter(E=>E.status===Re.PROCESSING||E.status===Re.PICKED),N=x.reduce((E,C)=>E+C.total,0),O=_.reduce((E,C)=>E+(C.total-C.paidAmount),0);return{totalRevenue:N,dueAmount:O}},[u]),v=x=>{switch(x){case Re.ON_HOLD:return"bg-gray-100 text-gray-600";case Re.PROCESSING:return"bg-[#e6f0ff] ${theme.colors.secondary[600]}";case Re.PICKED:return"bg-purple-100 text-purple-600";case Re.COMPLETED:return"bg-green-100 ${theme.colors.primary[600]}";case Re.CANCELLED:return"bg-red-100 text-red-600";default:return"bg-gray-100 text-gray-600"}},w=async x=>{try{if(!l)return;if(!f){m.error("Unable to generate new order number. Please try again.");return}const _=`${f.prefix}${f.nextNumber}`,N=new Date,O=N.toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"}),E=N.toLocaleTimeString("en-BD",{hour:"2-digit",minute:"2-digit"}),C={orderNumber:_,orderDate:new Date().toISOString().split("T")[0],customerId:l.id,createdBy:x.createdBy,status:Re.ON_HOLD,items:x.items,subtotal:x.subtotal,discount:x.discount,shipping:x.shipping,total:x.total,paidAmount:0,history:{created:`Duplicated from order #${x.orderNumber} on ${O}, at ${E}`}};await h.mutateAsync(C),m.success("Order duplicated successfully"),t("/orders")}catch(_){console.error("Failed to duplicate order",_),m.error("Failed to duplicate order: "+(_ instanceof Error?_.message:"Unknown error"))}};return Bn(s)?c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Employees cannot view customer details. Contact an administrator for assistance."}),c.jsx(Je,{onClick:()=>t("/customers"),variant:"primary",children:"Back to Customers"})]}):l?c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>t("/customers"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Customer Profile"})]}),c.jsx("div",{className:"flex gap-2",children:c.jsx("button",{onClick:()=>t(`/customers/edit/${e}`),className:"px-4 py-2 border rounded-xl font-bold bg-white text-gray-700 hover:bg-gray-50",children:"Edit Profile"})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[c.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100 text-center",children:[c.jsx("div",{className:"w-24 h-24 rounded-full bg-[#ebf4ff] ${theme.colors.primary[600]} flex items-center justify-center font-black text-4xl mx-auto mb-4 border-2 border-[#c7dff5]",children:l.name.charAt(0)}),c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:l.name}),c.jsx("p",{className:"text-sm text-gray-400 mt-1",children:l.phone}),c.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-50 space-y-4 text-left",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Address"}),c.jsx("p",{className:"text-sm text-gray-700 font-medium leading-relaxed",children:l.address})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Total Revenue"}),c.jsx("p",{className:"text-lg font-black text-gray-900",children:we(g)})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg shadow-[#0f2f57]/20/50 border border-gray-100 text-white",children:[c.jsx("p",{className:"text-gray-400 text-[10px] font-bold uppercase tracking-wider mb-1",children:"Due Amount"}),c.jsx("h4",{className:"text-lg font-black text-green-600",children:we(y)})]})]}),c.jsx("div",{className:"lg:col-span-3",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[c.jsxs("div",{className:"p-6 border-b border-gray-50 flex items-center justify-between",children:[c.jsx("h3",{className:"font-bold text-gray-900",children:"Order History"}),c.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[u.length," Records found"]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 text-xs font-bold text-gray-500 uppercase tracking-wider",children:[c.jsx("th",{className:"px-6 py-4",children:"Order Number"}),c.jsx("th",{className:"px-6 py-4",children:"Order Date"}),c.jsx("th",{className:"px-6 py-4",children:"Status"}),c.jsx("th",{className:"px-6 py-4 text-right",children:"Amount"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:u.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"px-6 py-12 text-center text-gray-400 italic",children:"No orders found for this customer."})}):u.map(x=>c.jsxs("tr",{onMouseEnter:()=>n(x.id),onMouseLeave:()=>n(null),onClick:()=>t(`/orders/${x.id}`),className:"group relative hover:bg-[#ebf4ff]/30 cursor-pointer transition-colors",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("span",{className:"font-bold text-gray-900",children:["#",x.orderNumber]})}),c.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:x.orderDate}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase tracking-tighter ${v(x.status)}`,children:x.status})}),c.jsx("td",{className:"px-6 py-4 text-right",children:c.jsx("span",{className:"font-black text-gray-900",children:we(x.total)})}),r===x.id&&c.jsx("td",{className:"absolute inset-y-0 right-0 flex items-center pr-6 bg-gradient-to-l from-emerald-50 via-emerald-50 to-transparent",children:c.jsxs("div",{className:"flex items-center gap-1 bg-white p-1 rounded-lg shadow-lg border border-[#c7dff5] animate-in fade-in slide-in-from-right-2 duration-200",onClick:_=>_.stopPropagation(),children:[c.jsx("button",{title:"Edit",onClick:()=>t(`/orders/edit/${x.id}`),className:"p-2 text-gray-500 hover:${theme.colors.primary[600]} hover:bg-[#ebf4ff] rounded-md transition-colors",children:ne.Edit}),c.jsx("button",{title:"Duplicate",onClick:()=>w(x),className:"p-2 text-gray-500 hover:${theme.colors.primary[600]} hover:bg-[#ebf4ff] rounded-md transition-colors",children:ne.Duplicate})]})})]},x.id))})]})})]})})]})]}):c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Customer not found."})},ule=()=>{const e=Nt();Le();const t=Vr(),{searchQuery:r}=Ya(),{data:n}=Gs(),a=(n==null?void 0:n.recordsPerPage)||Yt,[s,l]=Xe.useState(1),{data:u={data:[],count:0},isFetching:f}=W9(s,a,r),h=u.data||[],m=u.count||0,g=Math.max(1,Math.ceil(m/a)),y=fF();j.useEffect(()=>{l(1)},[r]);const v=h,w=async x=>{if(confirm("Are you sure you want to delete this vendor?"))try{await y.mutateAsync(x),t.success("Vendor deleted successfully")}catch(_){console.error("Failed to delete vendor:",_);const N=Cd(_);N.includes("fk_bills_vendor")||N.toLowerCase().includes("bills")?t.error("Cannot delete vendor: this vendor is referenced by one or more bills. Delete or reassign those bills first."):t.error(`Failed to delete vendor: ${N}`)}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsx("h2",{className:"md:text-2xl text-xl font-bold text-gray-900",children:"Vendors"})}),c.jsx(Je,{onClick:()=>e("/vendors/new"),variant:"primary",size:"md",icon:ne.Plus,children:"New Vendor"})]}),c.jsx(Fp,{columns:[{key:"name",label:"Vendor Name",render:(x,_)=>c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-400 text-white flex items-center justify-center font-bold",children:_.name.charAt(0)}),c.jsxs("div",{children:[c.jsx("span",{className:"font-bold text-gray-900 block",children:_.name}),c.jsx("p",{className:"text-xs text-gray-400 truncate max-w-[200px]",children:_.address})]})]})},{key:"phone",label:"Contact",render:x=>c.jsx("span",{className:"text-sm font-medium text-gray-700",children:x})},{key:"totalPurchases",label:"Purchases",align:"center",render:x=>c.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded-lg text-xs font-bold text-gray-600",children:x})},{key:"dueAmount",label:"Balance Payable",align:"right",render:x=>c.jsx("span",{className:`font-bold ${x>0?"text-red-500":"text-green-500"}`,children:we(x)})},{key:"id",label:"Actions",align:"right",render:x=>c.jsxs("div",{className:"justify-end flex items-center gap-2",children:[c.jsx(Us,{icon:ne.Edit,variant:"primary",title:"Edit",onClick:_=>{_.stopPropagation(),e(`/vendors/edit/${x}`)}}),c.jsx(Us,{icon:ne.Delete,variant:"danger",title:"Delete",onClick:_=>{_.stopPropagation(),w(x)}})]})}],data:v,loading:f,onRowClick:x=>e(`/vendors/${x.id}`),emptyMessage:"No vendors found"}),c.jsx(su,{page:s,totalPages:g,onPageChange:x=>l(x),disabled:f})]})},vT=()=>{const{id:e}=Kn(),t=Nt(),{isLoading:r}=da(),n=!!e,[a,s]=j.useState({name:"",phone:"",address:""}),[l,u]=j.useState(null),f=Fn();Le();const{data:h,isPending:m,error:g}=UD(n?e:void 0),y=uF(),v=dF();j.useEffect(()=>{if(h){s({name:h.name,phone:h.phone,address:h.address});return}const x=f&&f.state||{};x.fromBillForm&&x.preFill&&x.preFill.name&&s({name:x.preFill.name,phone:x.preFill.phone||"",address:x.preFill.address||""})},[h,f]);const w=async()=>{if(r){u("Authenticating... Please wait");return}if(!a.name||!a.phone){u("Business name and phone are required");return}u(null);try{if(n){const x={name:a.name,phone:a.phone,address:a.address};await v.mutateAsync({id:e,updates:x}),t("/vendors")}else{const x={name:a.name,phone:a.phone,address:a.address,totalPurchases:0,dueAmount:0};try{const _=await y.mutateAsync(x),N=f&&f.state||{};if(N.fromBillForm&&N.redirectPath){const O=`${N.redirectPath}${N.redirectPath.includes("?")?"&":"?"}selectedVendorId=${_.id}`;t(O)}else t("/vendors")}catch(_){console.error("Create vendor failed:",_),u(_ instanceof Error?_.message:"Failed to create vendor")}}}catch(x){console.error(`Failed to ${n?"update":"create"} vendor:`,x),u(x instanceof Error?x.message:`Failed to ${n?"update":"create"} vendor`)}};return c.jsxs("div",{className:"max-w-2xl mx-auto space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"md:text-2xl text-xl font-black text-gray-900 tracking-tight",children:n?"Edit Vendor":"New Vendor"}),c.jsx("button",{onClick:()=>t(-1),className:"px-4 py-2 text-gray-500 font-bold hover:bg-gray-100 rounded-xl transition-all",children:"Cancel"})]}),c.jsx("div",{className:"bg-white p-10 rounded-xl border border-gray-100 shadow-xl space-y-8",children:n&&m?c.jsx("div",{className:"text-center text-gray-500",children:"Loading vendor..."}):c.jsxs(c.Fragment,{children:[l&&c.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm font-bold text-red-600",children:l instanceof Error?l.message:String(l)})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Full Name"}),c.jsx("input",{type:"text",className:"w-full px-6 py-4 bg-gray-50 border border-gray-200 focus:border-[#3c5a82] focus:bg-white rounded-2xl font-bold transition-all outline-none",value:a.name,onChange:x=>s({...a,name:x.target.value})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Phone Number"}),c.jsx("input",{type:"text",className:"w-full px-6 py-4 bg-gray-50 border border-gray-200 focus:border-[#3c5a82] focus:bg-white rounded-2xl font-bold transition-all outline-none",value:a.phone,onChange:x=>s({...a,phone:x.target.value})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Address"}),c.jsx("textarea",{className:"w-full px-6 py-4 bg-gray-50 border border-gray-200 focus:border-[#3c5a82] focus:bg-white rounded-lg font-medium h-32 transition-all outline-none",value:a.address,onChange:x=>s({...a,address:x.target.value})})]}),c.jsx(Je,{onClick:w,variant:"primary",size:"lg",className:"w-full",disabled:y.isPending||v.isPending,children:y.isPending||v.isPending?n?"Updating...":"Adding...":n?"Update Vendor":"Add Vendor"})]})})]})},dle=()=>{const{id:e}=Kn(),t=Nt(),{data:r,isPending:n}=UD(e||""),{data:a=[]}=Hp(),[s,l]=j.useState(null);if(n)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading vendor details..."});if(!r)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Vendor not found."});const u=a.filter(h=>h.vendorId===r.id),f=h=>{switch(h){case wn.ON_HOLD:return"bg-gray-100 text-gray-600";case wn.PROCESSING:return"bg-blue-100 text-blue-600";case wn.RECEIVED:return"bg-green-100 text-green-600";default:return"bg-gray-100 text-gray-600"}};return c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>t("/vendors"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Vendor Profile"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{className:"px-4 py-2 border rounded-xl font-bold bg-white text-gray-700 hover:bg-gray-50",children:"Edit Profile"}),c.jsx("button",{className:`px-4 py-2 ${se.colors.primary[600]} text-white rounded-xl font-bold hover:${se.colors.primary[700]} shadow-md`,children:"Purchase Statement"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[c.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100 text-center",children:[c.jsx("div",{className:`w-24 h-24 rounded-full bg-[#e6f0ff] ${se.colors.primary.text} flex items-center justify-center font-black text-4xl mx-auto mb-4 border-2 border-[#c7dff5]`,children:r.name.charAt(0)}),c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:r.name}),c.jsx("p",{className:"text-sm text-gray-400 mt-1",children:r.phone}),c.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-50 space-y-4 text-left",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Office Address"}),c.jsx("p",{className:"text-sm text-gray-700 font-medium leading-relaxed",children:r.address})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Total Procurement"}),c.jsx("p",{className:"text-lg font-black text-gray-900",children:we(u.reduce((h,m)=>h+m.total,0))})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg shadow-[#0f2f57]/20 text-white",children:[c.jsx("p",{className:"text-gray-400 text-[10px] font-bold uppercase tracking-wider mb-1",children:"Total Payable"}),c.jsx("h4",{className:"text-lg font-black text-red-600",children:we(r.dueAmount)})]})]}),c.jsx("div",{className:"lg:col-span-3",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[c.jsxs("div",{className:"p-6 border-b border-gray-50 flex items-center justify-between",children:[c.jsx("h3",{className:"font-bold text-gray-900",children:"Purchase Bills"}),c.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[u.length," Invoices"]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 text-xs font-bold text-gray-500 uppercase tracking-wider",children:[c.jsx("th",{className:"px-6 py-4",children:"Bill Number"}),c.jsx("th",{className:"px-6 py-4",children:"Bill Date"}),c.jsx("th",{className:"px-6 py-4",children:"Status"}),c.jsx("th",{className:"px-6 py-4 text-right",children:"Amount"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:u.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"px-6 py-12 text-center text-gray-400 italic",children:"No purchase bills found for this vendor."})}):u.map(h=>c.jsxs("tr",{onMouseEnter:()=>l(h.id),onMouseLeave:()=>l(null),onClick:()=>t(`/bills/${h.id}`),className:"group relative hover:bg-blue-50/30 cursor-pointer transition-colors",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("span",{className:"font-bold text-gray-900",children:["#",h.billNumber]})}),c.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:h.billDate}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase tracking-tighter ${f(h.status)}`,children:h.status})}),c.jsx("td",{className:"px-6 py-4 text-right",children:c.jsx("span",{className:"font-black text-gray-900",children:we(h.total)})}),s===h.id&&c.jsx("td",{className:"absolute inset-y-0 right-0 flex items-center pr-6 bg-gradient-to-l from-blue-50 via-blue-50 to-transparent",children:c.jsx("div",{className:"flex items-center gap-1 bg-white p-1 rounded-lg shadow-lg border border-[#c7dff5] animate-in fade-in slide-in-from-right-2 duration-200",onClick:m=>m.stopPropagation(),children:c.jsx("button",{title:"Edit",onClick:()=>t(`/bills/edit/${h.id}`),className:`p-2 text-gray-500 hover:${se.colors.primary[600]} hover:bg-[#ebf4ff] rounded-md transition-colors`,children:ne.Edit})})})]},h.id))})]})})]})})]})]})},fle=({title:e,description:t,icon:r,color:n,to:a})=>{const s=Nt();return c.jsxs("button",{onClick:()=>s(a),className:"flex items-start gap-4 p-6 bg-white rounded-lg border border-gray-100 shadow-sm hover:shadow-md hover:border-[#c7dff5] transition-all text-left w-full group",children:[c.jsx("div",{className:`p-4 rounded-[50%] ${n} transition-transform group-hover:scale-110 duration-300`,children:r}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:e}),c.jsx("p",{className:"text-sm text-gray-500 mt-1 leading-relaxed",children:t}),c.jsxs("div",{className:"mt-4 flex items-center gap-1 text-xs font-bold uppercase tracking-widest opacity-40 group-hover:opacity-100 transition-opacity",children:["View Report ",ne.ChevronRight]})]})]})},hle=()=>{const e=[{title:"Expense Summary",description:"Breakdown of your business spending by category and vendor.",icon:ne.Delete,color:"bg-red-50 text-red-600",to:"/reports/expense"},{title:"Income Summary",description:"Analysis of your revenue streams and payment collections.",icon:ne.PlusCircle,color:`bg-[#ebf4ff] ${se.colors.primary[600]}`,to:"/reports/income"},{title:"Income vs Expense",description:"Visual comparison of cash inflows and outflows over time.",icon:ne.Transfer,color:`bg-[#e6f0ff] ${se.colors.secondary[600]}`,to:"/reports/income-vs-expense"},{title:"Profit and Loss",description:"Standard P&L statement to track net business profitability.",icon:ne.Reports,color:"bg-purple-50 text-purple-600",to:"/reports/profit-loss"}];return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Financial Reports"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Deep dive into your business metrics and performance."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map((t,r)=>c.jsx(fle,{...t},r))})]})},mle=()=>{const e=Nt(),{data:t=[]}=of(),{data:r=[]}=s1(),{data:n=[]}=Hs(),{data:a=[]}=Vs(),s=new Map(a.map(g=>[g.id,g.name])),l=t.filter(g=>g.type==="Expense"),u={};l.forEach(g=>{const y=s.get(g.category)||g.category||"Uncategorized";u[y]=(u[y]||0)+g.amount});const f=Object.entries(u).map(([g,y])=>({name:g,value:y})),h=["#EF4444","#F97316","#F59E0B","#8B5CF6","#EC4899","#3B82F6"],m=()=>{const g=`Date,Category,Contact,Account,Amount,Description
`,y=l.map(_=>{var C,T;const N=((C=r.find(k=>k.id===_.contactId))==null?void 0:C.name)||"N/A",O=((T=n.find(k=>k.id===_.accountId))==null?void 0:T.name)||"N/A",E=s.get(_.category)||_.category||"Uncategorized";return`${_.date},"${E}","${N}","${O}",${_.amount},"${_.description}"`}).join(`
`),v=new Blob([g+y],{type:"text/csv"}),w=window.URL.createObjectURL(v),x=document.createElement("a");x.setAttribute("hidden",""),x.setAttribute("href",w),x.setAttribute("download","expense_summary.csv"),document.body.appendChild(x),x.click(),document.body.removeChild(x)};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>e("/reports"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Expense Summary"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 bg-white border rounded-xl font-bold text-sm text-gray-700 hover:bg-gray-50",children:[ne.Download," Export CSV"]}),c.jsx(Je,{variant:"primary",size:"sm",icon:ne.Print,children:"Export Image"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-2 bg-white p-6 rounded-lg border border-gray-100 shadow-sm",children:[c.jsx("h3",{className:"font-bold text-gray-800 mb-6",children:"Expenses by Category"}),c.jsx("div",{className:"h-[350px]",children:c.jsx(yc,{width:"100%",height:"100%",children:c.jsxs(Y5,{data:f,layout:"vertical",margin:{left:40,right:40},children:[c.jsx(bc,{strokeDasharray:"3 3",horizontal:!1,stroke:"#f1f5f9"}),c.jsx(xc,{type:"number",axisLine:!1,tickLine:!1,tick:{fontSize:10}}),c.jsx(wc,{dataKey:"name",type:"category",axisLine:!1,tickLine:!1,tick:{fontSize:10,fontWeight:"bold"}}),c.jsx(Po,{formatter:g=>we(g),contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1)"}}),c.jsx(Ni,{dataKey:"value",radius:[0,4,4,0],barSize:30,children:f.map((g,y)=>c.jsx(ul,{fill:h[y%h.length]},`cell-${y}`))})]})})})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-100 shadow-sm space-y-6",children:[c.jsx("h3",{className:"font-bold text-gray-800",children:"Key Statistics"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-red-50 rounded-lg",children:[c.jsx("p",{className:"text-[10px] font-bold text-red-400 uppercase tracking-widest",children:"Total Outflow"}),c.jsx("h4",{className:"text-3xl font-black text-red-600",children:we(l.reduce((g,y)=>g+y.amount,0))})]}),c.jsx("div",{className:"divide-y divide-gray-50",children:f.sort((g,y)=>y.value-g.value).slice(0,5).map((g,y)=>c.jsxs("div",{className:"py-3 flex justify-between items-center",children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:g.name}),c.jsx("span",{className:"text-sm font-bold text-gray-900",children:we(g.value)})]},y))})]})]})]}),c.jsxs("div",{className:"bg-white rounded-lg border border-gray-100 shadow-sm overflow-hidden",children:[c.jsx("div",{className:"p-6 border-b border-gray-50",children:c.jsx("h3",{className:"font-bold text-gray-900",children:"Recent Expense Log"})}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 text-xs font-bold text-gray-500 uppercase",children:[c.jsx("th",{className:"px-6 py-4",children:"Date"}),c.jsx("th",{className:"px-6 py-4",children:"Category"}),c.jsx("th",{className:"px-6 py-4 text-right",children:"Amount"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50",children:l.slice(0,10).map(g=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:g.date}),c.jsx("td",{className:"px-6 py-4 text-sm font-bold text-gray-800",children:s.get(g.category)||g.category||"Uncategorized"}),c.jsx("td",{className:"px-6 py-4 text-right font-black text-red-600",children:we(g.amount)})]},g.id))})]})})]})]})},ple=()=>{const e=Nt(),t=Le(),{data:r=[]}=of(),{data:n=[]}=Qp(),{data:a=[]}=Vs(),[s,l]=Xe.useState([]),u=new Map(a.map(w=>[w.id,w.name])),f=r.filter(w=>w.type==="Income"),h={};f.forEach(w=>{h[w.category]=(h[w.category]||0)+w.amount});const m=Object.entries(h).map(([w,x])=>({name:u.get(w)||w||"Uncategorized",value:x})),g=["#10B981","#34D399","#6EE7B7","#A7F3D0","#D1FAE5"],y=n.filter(w=>w.status===Re.COMPLETED),v={};return y.forEach(w=>{v[w.customerId]=(v[w.customerId]||0)+w.total}),Xe.useEffect(()=>{const x=Object.entries(v).sort((_,N)=>N[1]-_[1]).slice(0,3).map(_=>_[0]);if(x.length===0){l([]);return}Promise.all(x.map(_=>t.fetchQuery({queryKey:["customer",_],queryFn:()=>ND(_)}))).then(_=>{const N=_.map((O,E)=>({...O||{},revenue:v[x[E]]||0}));l(N.filter(O=>O&&O.revenue>0))}).catch(()=>{l([])})},[n,r]),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>e("/reports"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Income Summary"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white border rounded-xl font-bold text-sm text-gray-700 hover:bg-gray-50",children:[ne.Download," Export CSV"]}),c.jsx(Je,{variant:"primary",size:"sm",icon:ne.Print,children:"Export Image"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-white p-8 rounded-lg border border-gray-100 shadow-sm flex flex-col items-center",children:[c.jsx("h3",{className:"font-bold text-gray-800 self-start mb-6",children:"Revenue Mix"}),c.jsx("div",{className:"w-full h-[300px]",children:c.jsx(yc,{width:"100%",height:"100%",children:c.jsxs(J5,{children:[c.jsx(iS,{data:m,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:m.map((w,x)=>c.jsx(ul,{fill:g[x%g.length]},`cell-${x}`))}),c.jsx(Po,{formatter:w=>we(w)}),c.jsx(Bd,{verticalAlign:"bottom",align:"center"})]})})})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:`${se.colors.primary[600]} p-8 rounded-lg text-white shadow-lg shadow-[#0f2f57]/20`,children:[c.jsx("p",{className:"text-[#c7dff5] text-xs font-bold uppercase tracking-widest mb-1",children:"Total Revenue Collected"}),c.jsx("h4",{className:"text-4xl font-black",children:we(f.reduce((w,x)=>w+x.amount,0))}),c.jsxs("div",{className:"mt-6 p-4 bg-white/10 rounded-xl flex items-center justify-between",children:[c.jsx("span",{className:"text-sm font-medium",children:"Avg Transaction Size"}),c.jsx("span",{className:"font-bold",children:we(f.length?f.reduce((w,x)=>w+x.amount,0)/f.length:0)})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-100 shadow-sm",children:[c.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:"Top Customers"}),c.jsx("div",{className:"space-y-4",children:s.map((w,x)=>c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center font-bold text-xs",children:w.name.charAt(0)}),c.jsx("span",{className:"text-sm font-semibold text-gray-700",children:w.name})]}),c.jsx("span",{className:"text-sm font-black",children:we(w.revenue)})]},x))})]})]})]})]})},gle=()=>{const e=Nt(),{data:t=[]}=of(),r=j.useMemo(()=>{const n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=new Date().getFullYear(),s={};return n.forEach(l=>{s[l]={income:0,expense:0}}),t.forEach(l=>{const u=new Date(l.date);if(u.getFullYear()!==a)return;const f=u.getMonth(),h=n[f];l.type==="Income"?s[h].income+=l.amount:l.type==="Expense"&&(s[h].expense+=l.amount)}),n.map(l=>({name:l,income:s[l].income,expense:s[l].expense,profit:s[l].income-s[l].expense}))},[t]);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>e("/reports"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Income vs Expense Trend"})]}),c.jsx("div",{className:"flex gap-2",children:c.jsx(Je,{variant:"primary",size:"sm",icon:ne.Print,children:"Export Full Report"})})]}),c.jsxs("div",{className:"bg-white p-8 rounded-lg border border-gray-100 shadow-sm",children:[c.jsx("h3",{className:"font-bold text-gray-800 mb-8",children:"Cash Flow Dynamics (Last 6 Months)"}),c.jsx("div",{className:"h-[400px]",children:c.jsx(yc,{width:"100%",height:"100%",children:c.jsxs(Rw,{data:r,children:[c.jsx(bc,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),c.jsx(xc,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:12}}),c.jsx(wc,{axisLine:!1,tickLine:!1,tick:{fontSize:12}}),c.jsx(Po,{formatter:n=>we(n),contentStyle:{borderRadius:"16px",border:"none",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1)"}}),c.jsx(Bd,{verticalAlign:"top",align:"right",height:36}),c.jsx(Ni,{dataKey:"income",fill:"#10B981",radius:[4,4,0,0],name:"Total Income",barSize:40}),c.jsx(Ni,{dataKey:"expense",fill:"#EF4444",radius:[4,4,0,0],name:"Total Expense",barSize:40}),c.jsx(Ep,{type:"monotone",dataKey:"profit",stroke:"#8B5CF6",strokeWidth:4,dot:{r:6,fill:"#8B5CF6",strokeWidth:2,stroke:"#fff"},name:"Net Cash Flow"})]})})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:(()=>{var f,h,m,g;const n=r.reduce((y,v)=>y+v.income,0),a=r.reduce((y,v)=>y+v.expense,0),s=r.length>0?(n-a)/r.length:0,l=r.reduce((y,v,w)=>v.income>r[y].income?w:y,0),u=r.reduce((y,v,w)=>v.expense<r[y].expense?w:y,0);return[{label:"Highest Revenue Month",value:((f=r[l])==null?void 0:f.name)||"",amount:((h=r[l])==null?void 0:h.income)||0},{label:"Least Expense Month",value:((m=r[u])==null?void 0:m.name)||"",amount:((g=r[u])==null?void 0:g.expense)||0},{label:"Average Monthly Profit",value:"Monthly Avg",amount:s,color:"text-purple-600"}].map((y,v)=>c.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-100 shadow-sm",children:[c.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:y.label}),c.jsx("h4",{className:"text-xl font-bold text-gray-900 mt-1",children:y.value}),c.jsx("p",{className:`text-lg font-black mt-2 ${y.color}`,children:we(y.amount)})]},v))})()})]})},La=({label:e,amount:t,isBold:r,isTotal:n,indent:a})=>c.jsxs("div",{className:`flex justify-between py-2 ${r?"font-bold text-gray-900":"text-gray-600"} ${n?"border-t-2 border-gray-100 pt-4 mt-2":""} ${a?"pl-6":""}`,children:[c.jsx("span",{className:"text-sm",children:e}),c.jsx("span",{className:"text-sm font-black",children:we(t)})]}),yle=()=>{const e=Nt(),{data:t=[]}=Qp(),{data:r=[]}=Hp(),{data:n=[]}=of(),{data:a=[]}=Vs(),s=new Map(a.map(w=>[w.id,w.name])),[l,u]=j.useState("currentYear"),[f,h]=j.useState(""),[m,g]=j.useState(""),y=w=>{const x=new Date(w),_=new Date;return l==="currentYear"?x.getFullYear()===_.getFullYear():l==="currentMonth"?x.getFullYear()===_.getFullYear()&&x.getMonth()===_.getMonth():l==="custom"?!f||!m?!0:x>=new Date(f)&&x<=new Date(m):!0},v=j.useMemo(()=>{const w=n.filter(R=>R.type==="Income"&&!!R.referenceId&&y(R.date)).reduce((R,L)=>R+L.amount,0),x=w>0?w:t.filter(R=>R.status===Re.COMPLETED&&y(R.orderDate)).reduce((R,L)=>R+L.total,0),_=n.filter(R=>R.type==="Expense"&&R.category==="expense_purchases"&&y(R.date)).reduce((R,L)=>R+L.amount,0),N=_>0?_:r.filter(R=>y(R.billDate)).reduce((R,L)=>R+L.total,0),O=x-N,E={};n.filter(R=>R.type==="Expense"&&R.category!=="expense_purchases"&&y(R.date)).forEach(R=>{const L=s.get(R.category)||R.category||"Uncategorized";E[L]=(E[L]||0)+R.amount});const T=Object.entries(E).map(([R,L])=>({categoryName:R,amount:L})).sort((R,L)=>L.amount-R.amount),k=Object.values(E).reduce((R,L)=>R+L,0),M=O-k;return{grossSales:x,costOfPurchases:N,grossProfit:O,expenses:T,totalOperatingExpenses:k,netProfit:M}},[t,r,n,l,f,m,s]);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>e("/reports"),className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 text-gray-500",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Profit and Loss Statement"})]}),c.jsxs("button",{onClick:()=>window.print(),className:`flex items-center gap-2 px-4 py-2 ${se.colors.primary[600]} hover:${se.colors.primary[700]} text-white font-bold rounded-xl transition-colors`,children:[ne.Print," Print Statement"]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-4",children:"Period"}),c.jsxs("div",{className:"flex gap-4 items-end",children:[c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"radio",name:"dateRange",value:"currentYear",checked:l==="currentYear",onChange:w=>u(w.target.value),className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Current Year"})]}),c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"radio",name:"dateRange",value:"currentMonth",checked:l==="currentMonth",onChange:w=>u(w.target.value),className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Current Month"})]}),c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"radio",name:"dateRange",value:"custom",checked:l==="custom",onChange:w=>u(w.target.value),className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Custom Range"})]})]}),l==="custom"&&c.jsxs("div",{className:"flex gap-3 ml-auto",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-600",children:"From:"}),c.jsx("input",{type:"date",value:f,onChange:w=>h(w.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-600",children:"To:"}),c.jsx("input",{type:"date",value:m,onChange:w=>g(w.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm"})]})]})]})]}),c.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"p-8 bg-gray-50 border-b border-gray-100 text-center",children:[Se.settings.company.logo&&c.jsx("img",{src:Se.settings.company.logo,className:"w-16 h-16 rounded-xl mx-auto mb-4"}),c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:Se.settings.company.name})]}),c.jsxs("div",{className:"p-8 space-y-2",children:[c.jsx("h4",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mb-4",children:"Revenue"}),c.jsx(La,{label:"Gross Sales (Completed Orders)",amount:v.grossSales}),c.jsx(La,{label:"Other Operating Income",amount:0}),c.jsx(La,{label:"Total Revenue",amount:v.grossSales,isBold:!0,isTotal:!0}),c.jsxs("div",{className:"pt-8",children:[c.jsx("h4",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mb-4",children:"Cost of Goods Sold"}),c.jsx(La,{label:"Purchases",amount:v.costOfPurchases}),c.jsx(La,{label:"Total COGS",amount:v.costOfPurchases,isBold:!0,isTotal:!0})]}),c.jsx("div",{className:"pt-8",children:c.jsx(La,{label:"Gross Profit",amount:v.grossProfit,isBold:!0})}),c.jsxs("div",{className:"pt-8",children:[c.jsx("h4",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mb-4",children:"Operating Expenses"}),v.expenses.length>0?c.jsxs(c.Fragment,{children:[v.expenses.slice(0,5).map((w,x)=>c.jsx(La,{label:w.categoryName,amount:w.amount,indent:!0},x)),v.expenses.length>5&&c.jsx(La,{label:"Other Expenses",amount:v.expenses.slice(5).reduce((w,x)=>w+x.amount,0),indent:!0})]}):c.jsx(La,{label:"None",amount:0,indent:!0}),c.jsx(La,{label:"Total Operating Expenses",amount:v.totalOperatingExpenses,isBold:!0,isTotal:!0})]}),c.jsx("div",{className:"pt-12",children:c.jsxs("div",{className:`p-6 rounded-lg flex justify-between items-center ${v.netProfit>=0?se.colors.primary[600]:"bg-red-600"} text-white shadow-xl`,children:[c.jsx("span",{className:"text-lg font-black uppercase tracking-widest",children:"Net Profit / Loss"}),c.jsx("span",{className:"text-3xl font-black",children:we(v.netProfit)})]})})]}),c.jsx("div",{className:"p-8 text-center text-[10px] text-gray-300 italic border-t border-gray-50",children:"This report is generated automatically by BD Hatbela Financial Management System."})]})]})},bT=({order:e,customer:t,products:r,companySettings:n,invoiceSettings:a})=>c.jsxs("div",{className:"space-y-5 print:space-y-4 text-gray-900",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[((n==null?void 0:n.logo)||Se.settings.company.logo)&&c.jsx("img",{src:(n==null?void 0:n.logo)||Se.settings.company.logo,className:"rounded-lg object-cover mb-4",style:{width:(a==null?void 0:a.logoWidth)||Se.settings.invoice.logoWidth,height:(a==null?void 0:a.logoHeight)||Se.settings.invoice.logoHeight},alt:"Company Logo"}),c.jsx("h1",{className:"text-xl font-black uppercase tracking-tighter",children:(n==null?void 0:n.name)||Se.settings.company.name}),c.jsxs("div",{className:"mt-2 text-xs text-gray-400 font-medium space-y-1 print:text-gray-600",children:[c.jsx("p",{children:(n==null?void 0:n.address)||Se.settings.company.address}),c.jsxs("p",{children:[(n==null?void 0:n.phone)||Se.settings.company.phone," "," ",(n==null?void 0:n.email)||Se.settings.company.email]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("h2",{className:"text-3xl font-black text-gray-300 uppercase leading-none mb-2 print:text-gray-400",children:(a==null?void 0:a.title)||Se.settings.invoice.title}),c.jsxs("div",{className:"space-y-1.5 print:space-y-1",children:[c.jsxs("p",{className:"text-sm font-bold text-gray-900 print:text-gray-800",children:[c.jsx("span",{className:"text-gray-400 font-medium",children:"Order No:"}),e.orderNumber]}),c.jsxs("p",{className:"text-sm font-bold text-gray-900 print:text-gray-800",children:[c.jsx("span",{className:"text-gray-400 font-medium",children:"Date:"}),new Date(e.orderDate).toLocaleDateString("en-BD",{day:"numeric",month:"short",year:"numeric"})]})]})]})]}),c.jsx("div",{className:"grid grid-cols-2 gap-12 border-t border-gray-100 py-4 print:border-gray-300 print:py-3",children:c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-4 print:mb-2",children:"Billed To"}),c.jsx("h3",{className:"text-md font-black text-gray-900 print:text-gray-800",children:t==null?void 0:t.name}),c.jsx("p",{className:"text-sm text-gray-500 leading-relaxed print:text-gray-600",children:t==null?void 0:t.address}),c.jsx("p",{className:"text-sm font-bold mt-2 print:mt-1",children:t==null?void 0:t.phone})]})}),c.jsxs("table",{className:"w-full text-left print:text-gray-800",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b-2 border-gray-100 print:border-gray-300",children:[c.jsx("th",{className:"py-4 text-sm font-black text-gray-400 uppercase print:text-xs print:py-2",children:"Item Description"}),c.jsx("th",{className:"py-4 text-sm text-center font-black text-gray-400 uppercase print:text-xs print:py-2",children:"Rate"}),c.jsx("th",{className:"py-4 text-sm text-center font-black text-gray-400 uppercase print:text-xs print:py-2",children:"Qty"}),c.jsx("th",{className:"py-4 text-sm text-right font-black text-gray-400 uppercase print:text-xs print:py-2",children:"Total"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-50 print:divide-gray-300",children:e.items.map((s,l)=>{const u=r.find(f=>f.id===s.productId);return c.jsxs("tr",{className:"group",children:[c.jsx("td",{className:"py-6 print:py-3",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("img",{src:u==null?void 0:u.image,className:"w-12 h-12 rounded-full object-cover border border-gray-100 shadow-sm print:w-10 print:h-10 print:rounded-full print:border-gray-300 print:shadow-none",alt:s.productName}),c.jsx("span",{className:"font-bold text-gray-900 print:text-sm",children:s.productName})]})}),c.jsx("td",{className:"py-6 text-center text-gray-500 font-bold print:py-3 print:text-sm",children:we(s.rate)}),c.jsx("td",{className:"py-6 text-center text-gray-500 font-bold print:py-3 print:text-sm",children:s.quantity}),c.jsx("td",{className:"py-6 text-right font-black text-gray-900 print:py-3 print:text-sm",children:we(s.amount)})]},l)})})]}),c.jsx("div",{className:"flex justify-end pt-6 print:pt-4",children:c.jsxs("div",{className:"w-full max-w-xs space-y-4 print:space-y-2 print:text-sm",children:[c.jsxs("div",{className:"flex justify-between text-sm print:text-xs",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase print:text-gray-600",children:"Subtotal"}),c.jsx("span",{className:"font-bold text-gray-900 print:text-gray-800",children:we(e.subtotal)})]}),e.discount>0&&c.jsxs("div",{className:"flex justify-between text-sm print:text-xs",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase print:text-gray-600",children:"Discount"}),c.jsxs("span",{className:"font-bold text-red-500 print:text-red-600",children:["-",we(e.discount)]})]}),e.shipping>0&&c.jsxs("div",{className:"flex justify-between text-sm print:text-xs",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase print:text-gray-600",children:"Shipping"}),c.jsx("span",{className:"font-bold text-gray-900 print:text-gray-800",children:we(e.shipping)})]}),c.jsxs("div",{className:"flex justify-between items-center py-6 border-t-2 border-[#0f2f57] print:py-3 print:border-t print:border-gray-400",children:[c.jsx("span",{className:"font-black text-gray-900 uppercase tracking-tighter print:text-gray-800",children:"Net Total"}),c.jsx("span",{className:"font-black text-gray-900 print:text-gray-800",children:we(e.total)})]})]})}),e.notes&&c.jsxs("div",{className:"bg-gray-50 p-4 rounded-[10px] border border-gray-100 print:bg-white print:p-3 print:rounded-lg print:border-gray-300",children:[c.jsx("p",{className:"text-[10px] font-black text-gray-300 uppercase tracking-widest mb-2 print:text-gray-500 print:mb-1",children:"Terms & Notes"}),c.jsx("p",{className:"text-xs text-gray-600 font-medium italic leading-relaxed print:text-gray-700",children:e.notes})]})]}),vle=()=>{const{id:e}=Kn(),{data:t,isPending:r}=i1(e||""),{data:n}=Kp(t?t.customerId:void 0),{data:a=[]}=zi(),{data:s=[]}=o1(),{data:l}=Vp(),{data:u}=Wp(),f=j.useRef(!1);return t&&a.find(h=>h.id===t.createdBy),j.useEffect(()=>{t&&!r&&!f.current&&(f.current=!0,Woe())},[t,r]),r||!t?c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading details..."}):c.jsxs("div",{className:"min-h-screen bg-white print:bg-white",children:[c.jsxs("div",{className:"space-y-0 print:space-y-0",children:[c.jsx("div",{className:"bg-white p-6 lg:p-10 print:p-6 min-h-screen print:min-h-fit",children:c.jsx(bT,{order:t,customer:n,products:s,companySettings:l,invoiceSettings:u})}),c.jsx("div",{className:"bg-white p-6 lg:p-10 print:p-6 min-h-screen print:min-h-fit",style:{pageBreakBefore:"always"},children:c.jsx(bT,{order:t,customer:n,products:s,companySettings:l,invoiceSettings:u})})]}),c.jsx("style",{children:`
        @media print {
          body {
            margin: 0;
            padding: 0;
            background: white;
          }
          .no-print {
            display: none !important;
          }
          table {
            page-break-inside: avoid;
          }
          tr {
            page-break-inside: avoid;
          }
          @page {
            margin: 0.25in;
            size: A4;
          }
          .print:page-break-avoid {
            page-break-inside: avoid;
          }
          .grid {
            page-break-inside: avoid;
          }
        }
      `})]})},ble=new E$({defaultOptions:{queries:{staleTime:300*1e3,gcTime:1800*1e3,retry:2,retryDelay:e=>Math.min(1e3*2**e,1e4),refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1},mutations:{retry:1,retryDelay:1e3}}}),xle=({user:e,profile:t,isLoading:r})=>{const n=!!e;return c.jsxs(_6,{children:[c.jsx(Ye,{path:"/login",element:n?c.jsx(Ve,{to:"/dashboard",replace:!0}):c.jsx(L9,{})}),c.jsx(Ye,{path:"/",element:n?c.jsx(Ve,{to:"/dashboard",replace:!0}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/dashboard",element:n?c.jsx(ct,{children:c.jsx(Goe,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/orders",element:n?c.jsx(ct,{children:c.jsx(Yoe,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/orders/new",element:n?c.jsx(ct,{children:c.jsx(hT,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/orders/edit/:id",element:n?c.jsx(ct,{children:c.jsx(hT,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/orders/:id",element:n?c.jsx(ct,{children:c.jsx(Xoe,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/print-order/:id",element:n?c.jsx(vle,{}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/bills",element:n?c.jsx(ct,{children:c.jsx(Joe,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/bills/new",element:n?c.jsx(ct,{children:c.jsx(mT,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/bills/edit/:id",element:n?c.jsx(ct,{children:c.jsx(mT,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/bills/:id",element:n?c.jsx(ct,{children:c.jsx(Zoe,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/banking/accounts",element:n?c.jsx(ct,{children:c.jsx(ele,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/banking/transfer",element:n?c.jsx(ct,{children:c.jsx(nle,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/banking/transactions",element:n?c.jsx(ct,{children:c.jsx(tle,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/transactions",element:n?c.jsx(Ve,{to:"/banking/transactions",replace:!0}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/transactions/new/:type",element:n?c.jsx(ct,{children:c.jsx(rle,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/customers",element:n?c.jsx(ct,{children:c.jsx(lle,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/customers/new",element:n?c.jsx(ct,{children:c.jsx(yT,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/customers/edit/:id",element:n?c.jsx(ct,{children:c.jsx(yT,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/customers/:id",element:n?c.jsx(ct,{children:c.jsx(cle,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/vendors",element:n?c.jsx(ct,{children:c.jsx(ule,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/vendors/new",element:n?c.jsx(ct,{children:c.jsx(vT,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/vendors/edit/:id",element:n?c.jsx(ct,{children:c.jsx(vT,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/vendors/:id",element:n?c.jsx(ct,{children:c.jsx(dle,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/products",element:n?c.jsx(ct,{children:c.jsx(ale,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/products/new",element:n?c.jsx(ct,{children:c.jsx(pT,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/products/edit/:id",element:n?c.jsx(ct,{children:c.jsx(pT,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/users",element:n?c.jsx(ct,{children:c.jsx(ile,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/users/new",element:n?c.jsx(ct,{children:c.jsx(gT,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/users/edit/:id",element:n?c.jsx(ct,{children:c.jsx(gT,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/users/:id",element:n?c.jsx(ct,{children:c.jsx(sle,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/reports",element:n?c.jsx(ct,{children:c.jsx(hle,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/reports/expense",element:n?c.jsx(ct,{children:c.jsx(mle,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/reports/income",element:n?c.jsx(ct,{children:c.jsx(ple,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/reports/income-vs-expense",element:n?c.jsx(ct,{children:c.jsx(gle,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/reports/profit-loss",element:n?c.jsx(ct,{children:c.jsx(yle,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"/settings",element:n?c.jsx(ct,{children:c.jsx(ole,{})}):c.jsx(Ve,{to:"/login",replace:!0})}),c.jsx(Ye,{path:"*",element:n?c.jsx(Ve,{to:"/dashboard",replace:!0}):c.jsx(Ve,{to:"/login",replace:!0})})]})},wle=()=>{const{user:e,profile:t,isLoading:r}=da();return console.log("[App] Render - user:",!!e,"profile:",!!t,"isLoading:",r),r?(console.log("[App] Rendering loading screen"),c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"inline-block p-4",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),c.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading..."})]})})):c.jsx(xle,{user:e,profile:t,isLoading:r})},jle=()=>(console.log("[App] Root component rendering - setting up providers"),c.jsx(A$,{client:ble,children:c.jsx(C8,{children:c.jsx(M8,{children:c.jsx(k8,{children:c.jsx(P8,{children:c.jsx(D8,{children:c.jsxs(G6,{children:[c.jsx(wle,{}),c.jsx(I9,{}),c.jsx(R9,{})]})})})})})})})),e3=document.getElementById("root");if(!e3)throw new Error("Could not find root element to mount to");const Sle=EB.createRoot(e3);Sle.render(c.jsx(Xe.StrictMode,{children:c.jsx(jle,{})}));window.__testSupabase={async testCustomers(){console.log(" Testing customer fetch...");try{const e=await _D();return console.log(" Success! Customers:",e),e}catch(e){throw console.error(" Error:",e),e}},async testConnection(){console.log(" Testing session (direct table auth)...");try{const e=localStorage.getItem("userData");if(e){const t=JSON.parse(e);return console.log(" User session active:",t),t}return console.log(" No active session - user not logged in"),null}catch(e){throw console.error(" Session check error:",e),e}},help(){console.log("Available test functions:"),console.log("  __testSupabase.testCustomers() - Fetch customers from DB"),console.log("  __testSupabase.testConnection() - Check auth session"),console.log("  __testSupabase.help() - Show this help")}};console.log(" Tip: Type __testSupabase.help() in console for test commands");export{Wa as a,Nle as g};
